!function(a){function b(a,b,e){return 4===arguments.length?c.apply(this,arguments):void d(a,{declarative:!0,deps:b,declare:e})}function c(a,b,c,e){d(a,{declarative:!1,deps:b,executingRequire:c,execute:e})}function d(a,b){b.name=a,a in o||(o[a]=b),b.normalizedDeps=b.deps}function e(a,b){if(b[a.groupIndex]=b[a.groupIndex]||[],-1==p.call(b[a.groupIndex],a)){b[a.groupIndex].push(a);for(var c=0,d=a.normalizedDeps.length;d>c;c++){var f=a.normalizedDeps[c],g=o[f];if(g&&!g.evaluated){var h=a.groupIndex+(g.declarative!=a.declarative);if(void 0===g.groupIndex||g.groupIndex<h){if(void 0!==g.groupIndex&&(b[g.groupIndex].splice(p.call(b[g.groupIndex],g),1),0==b[g.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");g.groupIndex=h}e(g,b)}}}}function f(a){var b=o[a];b.groupIndex=0;var c=[];e(b,c);for(var d=!!b.declarative==c.length%2,f=c.length-1;f>=0;f--){for(var g=c[f],i=0;i<g.length;i++){var k=g[i];d?h(k):j(k)}d=!d}}function g(a){return s[a]||(s[a]={name:a,dependencies:[],exports:{},importers:[]})}function h(b){if(!b.module){var c=b.module=g(b.name),d=b.module.exports,e=b.declare.call(a,function(a,b){if(c.locked=!0,"object"==typeof a)for(var e in a)d[e]=a[e];else d[a]=b;for(var f=0,g=c.importers.length;g>f;f++){var h=c.importers[f];if(!h.locked)for(var i=0;i<h.dependencies.length;++i)h.dependencies[i]===c&&h.setters[i](d)}return c.locked=!1,b},{id:b.name});c.setters=e.setters,c.execute=e.execute;for(var f=0,i=b.normalizedDeps.length;i>f;f++){var j,k=b.normalizedDeps[f],l=o[k],m=s[k];m?j=m.exports:l&&!l.declarative?j=l.esModule:l?(h(l),m=l.module,j=m.exports):j=n(k),m&&m.importers?(m.importers.push(c),c.dependencies.push(m)):c.dependencies.push(null),c.setters[f]&&c.setters[f](j)}}}function i(a){var b,c=o[a];if(c)c.declarative?m(a,[]):c.evaluated||j(c),b=c.module.exports;else if(!(b=n(a)))throw new Error("Unable to load dependency "+a+".");return(!c||c.declarative)&&b&&b.__useDefault?b.default:b}function j(b){if(!b.module){var c={},d=b.module={exports:c,id:b.name};if(!b.executingRequire)for(var e=0,f=b.normalizedDeps.length;f>e;e++){var g=b.normalizedDeps[e],h=o[g];h&&j(h)}b.evaluated=!0;var l=b.execute.call(a,function(a){for(var c=0,d=b.deps.length;d>c;c++)if(b.deps[c]==a)return i(b.normalizedDeps[c]);throw new TypeError("Module "+a+" not declared as a dependency.")},c,d);void 0!==l&&(d.exports=l),c=d.exports,c&&c.__esModule?b.esModule=c:b.esModule=k(c)}}function k(b){var c={};if(("object"==typeof b||"function"==typeof b)&&b!==a)if(q)for(var d in b)"default"!==d&&l(c,b,d);else{var e=b&&b.hasOwnProperty;for(var d in b)"default"===d||e&&!b.hasOwnProperty(d)||(c[d]=b[d])}return c.default=b,r(c,"__useDefault",{value:!0}),c}function l(a,b,c){try{var d;(d=Object.getOwnPropertyDescriptor(b,c))&&r(a,c,d)}catch(d){return a[c]=b[c],!1}}function m(b,c){var d=o[b];if(d&&!d.evaluated&&d.declarative){c.push(b);for(var e=0,f=d.normalizedDeps.length;f>e;e++){var g=d.normalizedDeps[e];-1==p.call(c,g)&&(o[g]?m(g,c):n(g))}d.evaluated||(d.evaluated=!0,d.module.execute.call(a))}}function n(a){if(u[a])return u[a];if("@node/"==a.substr(0,6))return u[a]=k(t(a.substr(6)));var b=o[a];if(!b)throw"Module "+a+" not present.";return f(a),m(a,[]),o[a]=void 0,b.declarative&&r(b.module.exports,"__esModule",{value:!0}),u[a]=b.declarative?b.module.exports:b.esModule}var o={},p=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},q=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(a){q=!1}var r;!function(){try{Object.defineProperty({},"a",{})&&(r=Object.defineProperty)}catch(a){r=function(a,b,c){try{a[b]=c.value||c.get.call(a)}catch(a){}}}}();var s={},t="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&void 0!==require.resolve&&"undefined"!=typeof process&&process.platform&&require,u={"@empty":{}};return function(a,d,e,f){return function(g){g(function(g){for(var h={_nodeRequire:t,register:b,registerDynamic:c,get:n,set:function(a,b){u[a]=b},newModule:function(a){return a}},i=0;i<d.length;i++)!function(a,b){b&&b.__esModule?u[a]=b:u[a]=k(b)}(d[i],arguments[i]);f(h);var j=n(a[0]);if(a.length>1)for(var i=1;i<a.length;i++)n(a[i]);return e?j.default:j})}}}("undefined"!=typeof self?self:global)(["1"],[],!1,function(a){var b=(this.require,this.exports),c=this.module;!function(b){function c(a,b){for(var c=a.split(".");c.length;)b=b[c.shift()];return b}function d(a){if("string"==typeof a)return c(a,b);if(!(a instanceof Array))throw new Error("Global exports must be a string or array.");for(var d={},e=!0,f=0;f<a.length;f++){var g=c(a[f],b);e&&(d.default=g,e=!1),d[a[f].split(".").pop()]=g}return d}function e(a){if(Object.keys)Object.keys(b).forEach(a);else for(var c in b)i.call(b,c)&&a(c)}function f(a){e(function(c){if(-1==j.call(k,c)){try{var d=b[c]}catch(a){k.push(c)}a(c,d)}})}var g,h=a,i=Object.prototype.hasOwnProperty,j=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},k=["_g","sessionStorage","localStorage","clipboardData","frames","frameElement","external","mozAnimationStartTime","webkitStorageInfo","webkitIndexedDB","mozInnerScreenY","mozInnerScreenX"];h.set("@@global-helpers",h.newModule({prepareGlobal:function(a,c,e){var h=b.define;b.define=void 0;var i;if(e){i={};for(var j in e)i[j]=b[j],b[j]=e[j]}return c||(g={},f(function(a,b){g[a]=b})),function(){var a;if(c)a=d(c);else{a={};var e,j;f(function(b,c){g[b]!==c&&void 0!==c&&(a[b]=c,void 0!==e?j||e===c||(j=!0):e=c)}),a=j?a:e}if(i)for(var k in i)b[k]=i[k];return b.define=h,a}}}))}("undefined"!=typeof self?self:global),function(b){function c(a,b){a=a.replace(h,"");var c=a.match(k),d=(c[1].split(",")[b]||"require").replace(l,""),e=m[d]||(m[d]=new RegExp(i+d+j,"g"));e.lastIndex=0;for(var f,g=[];f=e.exec(a);)g.push(f[2]||f[3]);return g}function d(a,b,c,e){if("object"==typeof a&&!(a instanceof Array))return d.apply(null,Array.prototype.splice.call(arguments,1,arguments.length-1));if("string"==typeof a&&"function"==typeof b&&(a=[a]),!(a instanceof Array)){if("string"==typeof a){var g=f.get(a);return g.__useDefault?g.default:g}throw new TypeError("Invalid require")}for(var h=[],i=0;i<a.length;i++)h.push(f.import(a[i],e));Promise.all(h).then(function(a){b&&b.apply(null,a)},c)}function e(a,e,h){"string"!=typeof a&&(h=e,e=a,a=null),e instanceof Array||(h=e,e=["require","exports","module"].splice(0,h.length)),"function"!=typeof h&&(h=function(a){return function(){return a}}(h)),void 0===e[e.length-1]&&e.pop();var i,j,k;-1!=(i=g.call(e,"require"))&&(e.splice(i,1),a||(e=e.concat(c(h.toString(),i)))),-1!=(j=g.call(e,"exports"))&&e.splice(j,1),-1!=(k=g.call(e,"module"))&&e.splice(k,1);var l={name:a,deps:e,execute:function(a,c,g){for(var l=[],m=0;m<e.length;m++)l.push(a(e[m]));g.uri=g.id,g.config=function(){},-1!=k&&l.splice(k,0,g),-1!=j&&l.splice(j,0,c),-1!=i&&l.splice(i,0,function(b,c,e){return"string"==typeof b&&"function"!=typeof c?a(b):d.call(f,b,c,e,g.id)});var n=h.apply(-1==j?b:c,l);return void 0===n&&g&&(n=g.exports),void 0!==n?n:void 0}};if(a)n.anonDefine||n.isBundle?n.anonDefine&&n.anonDefine.name&&(n.anonDefine=null):n.anonDefine=l,n.isBundle=!0,f.registerDynamic(l.name,l.deps,!1,l.execute);else{if(n.anonDefine&&!n.anonDefine.name)throw new Error("Multiple anonymous defines in module "+a);n.anonDefine=l}}var f=a,g=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},h=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,i="(?:^|[^$_a-zA-Z\\xA0-\\uFFFF.])",j="\\s*\\(\\s*(\"([^\"]+)\"|'([^']+)')\\s*\\)",k=/\(([^\)]*)\)/,l=/^\s+|\s+$/g,m={};e.amd={};var n={isBundle:!1,anonDefine:null};f.amdDefine=e,f.amdRequire=d}("undefined"!=typeof self?self:global),a.registerDynamic("2",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){"children"in window.SVGElement.prototype||Object.defineProperty(window.SVGElement.prototype,"children",{get:function(){return Array.from(this.childNodes).filter(function(a){return"#"!=a.nodeName.charAt(0)})}}),Object.values||(Object.values=function(a){return Object.keys(a).map(function(b){return a[b]})}),Object.entries||(Object.entries=function(a){return Object.keys(a).map(function(b){return[b,a[b]]})})}(),e()}),a.registerDynamic("3",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){!function(){window.SVGElement.prototype.getTransformToElement=window.SVGElement.prototype.getTransformToElement||function(a){return a.getScreenCTM().inverse().multiply(this.getScreenCTM())},document.getBoundingClientRect||(document.getBoundingClientRect=function(){return document.body.getBoundingClientRect()}),"outerHTML"in window.SVGElement.prototype||Object.defineProperty(SVGElement.prototype,"outerHTML",{get:function(){const a=document.createElement("div"),b=this.cloneNode(!0);return a.appendChild(b),a.innerHTML},enumerable:!1,configurable:!0})}()}(),e()}),a.registerDynamic("4",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){!function(){window.MSPointerEvent&&window.PointerEvent&&(window.MSPointerEvent=null)}()}(),e()}),a.registerDynamic("5",[],!1,function(b,c,d){return a.get("@@global-helpers").prepareGlobal(d.id,null,null)()}),a.registerDynamic("6",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){SVGPathElement.prototype.getPathData&&SVGPathElement.prototype.setPathData||function(){var a={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},b=function(a){this._string=a,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()},c=-1!==window.navigator.userAgent.indexOf("MSIE ");b.prototype={parseSegment:function(){var b=this._string[this._currentIndex],c=a[b]?a[b]:null;if(null===c){if(null===this._prevCommand)return null;if(null===(c=("+"===b||"-"===b||"."===b||b>="0"&&b<="9")&&"Z"!==this._prevCommand?"M"===this._prevCommand?"L":"m"===this._prevCommand?"l":this._prevCommand:null))return null}else this._currentIndex+=1;this._prevCommand=c;var d=null,e=c.toUpperCase();return"H"===e||"V"===e?d=[this._parseNumber()]:"M"===e||"L"===e||"T"===e?d=[this._parseNumber(),this._parseNumber()]:"S"===e||"Q"===e?d=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"C"===e?d=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"A"===e?d=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:"Z"===e&&(this._skipOptionalSpaces(),d=[]),null===d||d.indexOf(null)>=0?null:{type:c,values:d}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var b=this._string[this._currentIndex];return a[b]?a[b]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var a=this.peekSegmentType();return"M"===a||"m"===a},_isCurrentSpace:function(){var a=this._string[this._currentIndex];return a<=" "&&(" "===a||"\n"===a||"\t"===a||"\r"===a||"\f"===a)},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string[this._currentIndex])&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string[this._currentIndex]&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var a=0,b=0,c=1,d=0,e=1,f=1,g=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"===this._string[this._currentIndex]?this._currentIndex+=1:this._currentIndex<this._endIndex&&"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,e=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")&&"."!==this._string[this._currentIndex])return null;for(var h=this._currentIndex;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==h)for(var i=this._currentIndex-1,j=1;i>=h;)b+=j*(this._string[i]-"0"),i-=1,j*=10;if(this._currentIndex<this._endIndex&&"."===this._string[this._currentIndex]){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)c*=10,d+=(this._string.charAt(this._currentIndex)-"0")/c,this._currentIndex+=1}if(this._currentIndex!==g&&this._currentIndex+1<this._endIndex&&("e"===this._string[this._currentIndex]||"E"===this._string[this._currentIndex])&&"x"!==this._string[this._currentIndex+1]&&"m"!==this._string[this._currentIndex+1]){if(this._currentIndex+=1,"+"===this._string[this._currentIndex]?this._currentIndex+=1:"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,f=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)a*=10,a+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var k=b+d;return k*=e,a&&(k*=Math.pow(10,f*a)),g===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),k)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var a=null,b=this._string[this._currentIndex];if(this._currentIndex+=1,"0"===b)a=0;else{if("1"!==b)return null;a=1}return this._skipOptionalSpacesOrDelimiter(),a}};var d=function(a){if(!a||0===a.length)return[];var c=new b(a),d=[];if(c.initialCommandIsMoveTo())for(;c.hasMoreData();){var e=c.parseSegment();if(null===e)break;d.push(e)}return d},e=SVGPathElement.prototype.setAttribute,f=SVGPathElement.prototype.removeAttribute,g=window.Symbol?Symbol():"__cachedPathData",h=window.Symbol?Symbol():"__cachedNormalizedPathData",i=function(a,b,c,d,e,f,g,h,j,k){var l,m,n,o,p=function(a){return Math.PI*a/180},q=function(a,b,c){return{x:a*Math.cos(c)-b*Math.sin(c),y:a*Math.sin(c)+b*Math.cos(c)}},r=p(g),s=[];if(k)l=k[0],m=k[1],n=k[2],o=k[3];else{var t=q(a,b,-r);a=t.x,b=t.y;var u=q(c,d,-r);c=u.x,d=u.y;var v=(a-c)/2,w=(b-d)/2,x=v*v/(e*e)+w*w/(f*f);x>1&&(x=Math.sqrt(x),e*=x,f*=x);var y;y=h===j?-1:1;var z=e*e,A=f*f,B=z*A-z*w*w-A*v*v,C=z*w*w+A*v*v,D=y*Math.sqrt(Math.abs(B/C));n=D*e*w/f+(a+c)/2,o=D*-f*v/e+(b+d)/2,l=Math.asin(parseFloat(((b-o)/f).toFixed(9))),m=Math.asin(parseFloat(((d-o)/f).toFixed(9))),a<n&&(l=Math.PI-l),c<n&&(m=Math.PI-m),l<0&&(l=2*Math.PI+l),m<0&&(m=2*Math.PI+m),j&&l>m&&(l-=2*Math.PI),!j&&m>l&&(m-=2*Math.PI)}var E=m-l;if(Math.abs(E)>120*Math.PI/180){var F=m,G=c,H=d;m=j&&m>l?l+120*Math.PI/180*1:l+120*Math.PI/180*-1,c=n+e*Math.cos(m),d=o+f*Math.sin(m),s=i(c,d,G,H,e,f,g,0,j,[m,F,n,o])}E=m-l;var I=Math.cos(l),J=Math.sin(l),K=Math.cos(m),L=Math.sin(m),M=Math.tan(E/4),N=4/3*e*M,O=4/3*f*M,P=[a,b],Q=[a+N*J,b-O*I],R=[c+N*L,d-O*K],S=[c,d];if(Q[0]=2*P[0]-Q[0],Q[1]=2*P[1]-Q[1],k)return[Q,R,S].concat(s);s=[Q,R,S].concat(s).join().split(",");var T=[],U=[];return s.forEach(function(a,b){b%2?U.push(q(s[b-1],s[b],r).y):U.push(q(s[b],s[b+1],r).x),6===U.length&&(T.push(U),U=[])}),T},j=function(a){return a.map(function(a){return{type:a.type,values:Array.prototype.slice.call(a.values)}})},k=function(a){var b=[],c=null,d=null,e=null,f=null;return a.forEach(function(a){var g=a.type;if("M"===g){var h=a.values[0],i=a.values[1];b.push({type:"M",values:[h,i]}),e=h,f=i,c=h,d=i}else if("m"===g){var h=c+a.values[0],i=d+a.values[1];b.push({type:"M",values:[h,i]}),e=h,f=i,c=h,d=i}else if("L"===g){var h=a.values[0],i=a.values[1];b.push({type:"L",values:[h,i]}),c=h,d=i}else if("l"===g){var h=c+a.values[0],i=d+a.values[1];b.push({type:"L",values:[h,i]}),c=h,d=i}else if("C"===g){var j=a.values[0],k=a.values[1],l=a.values[2],m=a.values[3],h=a.values[4],i=a.values[5];b.push({type:"C",values:[j,k,l,m,h,i]}),c=h,d=i}else if("c"===g){var j=c+a.values[0],k=d+a.values[1],l=c+a.values[2],m=d+a.values[3],h=c+a.values[4],i=d+a.values[5];b.push({type:"C",values:[j,k,l,m,h,i]}),c=h,d=i}else if("Q"===g){var j=a.values[0],k=a.values[1],h=a.values[2],i=a.values[3];b.push({type:"Q",values:[j,k,h,i]}),c=h,d=i}else if("q"===g){var j=c+a.values[0],k=d+a.values[1],h=c+a.values[2],i=d+a.values[3];b.push({type:"Q",values:[j,k,h,i]}),c=h,d=i}else if("A"===g){var h=a.values[5],i=a.values[6];b.push({type:"A",values:[a.values[0],a.values[1],a.values[2],a.values[3],a.values[4],h,i]}),c=h,d=i}else if("a"===g){var h=c+a.values[5],i=d+a.values[6];b.push({type:"A",values:[a.values[0],a.values[1],a.values[2],a.values[3],a.values[4],h,i]}),c=h,d=i}else if("H"===g){var h=a.values[0];b.push({type:"H",values:[h]}),c=h}else if("h"===g){var h=c+a.values[0];b.push({type:"H",values:[h]}),c=h}else if("V"===g){var i=a.values[0];b.push({type:"V",values:[i]}),d=i}else if("v"===g){var i=d+a.values[0];b.push({type:"V",values:[i]}),d=i}else if("S"===g){var l=a.values[0],m=a.values[1],h=a.values[2],i=a.values[3];b.push({type:"S",values:[l,m,h,i]}),c=h,d=i}else if("s"===g){var l=c+a.values[0],m=d+a.values[1],h=c+a.values[2],i=d+a.values[3];b.push({type:"S",values:[l,m,h,i]}),c=h,d=i}else if("T"===g){var h=a.values[0],i=a.values[1];b.push({type:"T",values:[h,i]}),c=h,d=i}else if("t"===g){var h=c+a.values[0],i=d+a.values[1];b.push({type:"T",values:[h,i]}),c=h,d=i}else"Z"!==g&&"z"!==g||(b.push({type:"Z",values:[]}),c=e,d=f)}),b},l=function(a){var b=[],c=null,d=null,e=null,f=null,g=null,h=null,j=null;return a.forEach(function(a){if("M"===a.type){var k=a.values[0],l=a.values[1];b.push({type:"M",values:[k,l]}),h=k,j=l,f=k,g=l}else if("C"===a.type){var m=a.values[0],n=a.values[1],o=a.values[2],p=a.values[3],k=a.values[4],l=a.values[5];b.push({type:"C",values:[m,n,o,p,k,l]}),d=o,e=p,f=k,g=l}else if("L"===a.type){var k=a.values[0],l=a.values[1];b.push({type:"L",values:[k,l]}),f=k,g=l}else if("H"===a.type){var k=a.values[0];b.push({type:"L",values:[k,g]}),f=k}else if("V"===a.type){var l=a.values[0];b.push({type:"L",values:[f,l]}),g=l}else if("S"===a.type){var q,r,o=a.values[0],p=a.values[1],k=a.values[2],l=a.values[3];"C"===c||"S"===c?(q=f+(f-d),r=g+(g-e)):(q=f,r=g),b.push({type:"C",values:[q,r,o,p,k,l]}),d=o,e=p,f=k,g=l}else if("T"===a.type){var m,n,k=a.values[0],l=a.values[1];"Q"===c||"T"===c?(m=f+(f-d),n=g+(g-e)):(m=f,n=g);var q=f+2*(m-f)/3,r=g+2*(n-g)/3,s=k+2*(m-k)/3,t=l+2*(n-l)/3;b.push({type:"C",values:[q,r,s,t,k,l]}),d=m,e=n,f=k,g=l}else if("Q"===a.type){var m=a.values[0],n=a.values[1],k=a.values[2],l=a.values[3],q=f+2*(m-f)/3,r=g+2*(n-g)/3,s=k+2*(m-k)/3,t=l+2*(n-l)/3;b.push({type:"C",values:[q,r,s,t,k,l]}),d=m,e=n,f=k,g=l}else if("A"===a.type){var u=a.values[0],v=a.values[1],w=a.values[2],x=a.values[3],y=a.values[4],k=a.values[5],l=a.values[6];if(0===u||0===v)b.push({type:"C",values:[f,g,k,l,k,l]}),f=k,g=l;else if(f!==k||g!==l){var z=i(f,g,k,l,u,v,w,x,y);z.forEach(function(a){b.push({type:"C",values:a}),f=k,g=l})}}else"Z"===a.type&&(b.push(a),f=h,g=j);c=a.type}),b};SVGPathElement.prototype.setAttribute=function(a,b){"d"===a&&(this[g]=null,this[h]=null),e.call(this,a,b)},SVGPathElement.prototype.removeAttribute=function(a,b){"d"===a&&(this[g]=null,this[h]=null),f.call(this,a)},SVGPathElement.prototype.getPathData=function(a){if(a&&a.normalize){if(this[h])return j(this[h]);var b;this[g]?b=j(this[g]):(b=d(this.getAttribute("d")||""),this[g]=j(b));var c=l(k(b));return this[h]=j(c),c}if(this[g])return j(this[g]);var b=d(this.getAttribute("d")||"");return this[g]=j(b),b},SVGPathElement.prototype.setPathData=function(a){if(0===a.length)c?this.setAttribute("d",""):this.removeAttribute("d");else{for(var b="",d=0,e=a.length;d<e;d+=1){var f=a[d];d>0&&(b+=" "),b+=f.type,f.values&&f.values.length>0&&(b+=" "+f.values.join(" "))}this.setAttribute("d",b)}},SVGRectElement.prototype.getPathData=function(a){var b=this.x.baseVal.value,c=this.y.baseVal.value,d=this.width.baseVal.value,e=this.height.baseVal.value,f=this.hasAttribute("rx")?this.rx.baseVal.value:this.ry.baseVal.value,g=this.hasAttribute("ry")?this.ry.baseVal.value:this.rx.baseVal.value;f>d/2&&(f=d/2),g>e/2&&(g=e/2);var h=[{type:"M",values:[b+f,c]},{type:"H",values:[b+d-f]},{type:"A",values:[f,g,0,0,1,b+d,c+g]},{type:"V",values:[c+e-g]},{type:"A",values:[f,g,0,0,1,b+d-f,c+e]},{type:"H",values:[b+f]},{type:"A",values:[f,g,0,0,1,b,c+e-g]},{type:"V",values:[c+g]},{type:"A",values:[f,g,0,0,1,b+f,c]},{type:"Z",values:[]}];return h=h.filter(function(a){return"A"!==a.type||0!==a.values[0]&&0!==a.values[1]}),a&&!0===a.normalize&&(h=l(h)),h},SVGCircleElement.prototype.getPathData=function(a){var b=this.cx.baseVal.value,c=this.cy.baseVal.value,d=this.r.baseVal.value,e=[{type:"M",values:[b+d,c]},{type:"A",values:[d,d,0,0,1,b,c+d]},{type:"A",values:[d,d,0,0,1,b-d,c]},{type:"A",values:[d,d,0,0,1,b,c-d]},{type:"A",values:[d,d,0,0,1,b+d,c]},{type:"Z",values:[]}];return a&&!0===a.normalize&&(e=l(e)),e},SVGEllipseElement.prototype.getPathData=function(a){var b=this.cx.baseVal.value,c=this.cy.baseVal.value,d=this.rx.baseVal.value,e=this.ry.baseVal.value,f=[{type:"M",values:[b+d,c]},{type:"A",values:[d,e,0,0,1,b,c+e]},{type:"A",values:[d,e,0,0,1,b-d,c]},{type:"A",values:[d,e,0,0,1,b,c-e]},{type:"A",values:[d,e,0,0,1,b+d,c]},{type:"Z",values:[]}];return a&&!0===a.normalize&&(f=l(f)),f},SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]},SVGPolylineElement.prototype.getPathData=function(){for(var a=[],b=0;b<this.points.numberOfItems;b+=1){var c=this.points.getItem(b);a.push({type:0===b?"M":"L",values:[c.x,c.y]})}return a},SVGPolygonElement.prototype.getPathData=function(){for(var a=[],b=0;b<this.points.numberOfItems;b+=1){var c=this.points.getItem(b);a.push({type:0===b?"M":"L",values:[c.x,c.y]})}return a.push({type:"Z",values:[]}),a}}()}(),e()}),a.register("7",[],function(){return{setters:[],execute:function(){}}}),a.register("8",[],function(){return{setters:[],execute:function(){}}}),a.register("9",[],function(){return{setters:[],execute:function(){}}}),a.register("a",[],function(){return{setters:[],execute:function(){}}}),a.register("b",[],function(){return{setters:[],execute:function(){}}}),a.register("c",[],function(){return{setters:[],execute:function(){}}}),a.register("d",[],function(){return{setters:[],execute:function(){}}}),a.register("e",[],function(){return{setters:[],execute:function(){}}}),a.register("f",["10","11","12"],function(a,b){"use strict";function c(a){var b=[],c=d(),h=null,i=null,j={ECommandLogicStates:g,get length(){return b.length},get activeContext(){return h},get activeAppMode(){return i},set activeAppMode(a){i=a||null},changeContext:function(a){h=a,c.notifyListeners("context-change",j)},getCommandObject:function(a){for(var c=null,d=0;d<b.length;d++)if(b[d].commandID==a){c=b[d];break}return c},notifyCommandStateChanges:function(){for(var a=0;a<b.length;a++)b[a].notifyIsStateChanged()},createCommandObject:function(i,k,l,m,n){for(var o=null,p=0;p<b.length;p++)if(b[p].commandID==i){o=b[p];break}return null===o?function(){var p=!1,q=!1,r=!0,s=null,t=g.CLS_OFF,u=!1,v=null,w=n||!1,x=e(j),y=d(),z=function(){return w||p&&x.testContextEnabled()};o={ECommandLogicStates:g,get commandID(){return i},set commandLogicState(a){t!=a&&(t=a,y.notifyListeners("command-state-change",this))},get commandLogicState(){return t},set enabled(a){p!=a&&(p=a,y.notifyListeners("command-state-change",this))},set visible(a){r!=a&&(r=a,y.notifyListeners("command-state-change",this))},get contextHelper(){return x},get visible(){return r&&x.testContextVisible()},get enabled(){return w||r&&p&&x.testContextEnabled()},get forceEnable(){return w},set forceEnable(a){w=a},get active(){return q},get contextName(){return s},set contextName(a){s=a},set cancelActiveCommand(a){u=a},get cancelActiveCommand(){return u},notifyIsStateChanged:function(){y.notifyListeners("command-state-change",this)},startCommand:function(d,e){var f=this,g=function(){z()&&!q&&(u&&b.forEach(function(a){a.active&&a.stopCommand(!0)}),l||a.startAction(d),q=!0,y.notifyListeners("command-state-change",f),j.notifyCommandStateChanges(),v=k(f,e),"function"!=typeof v?(v=null,q=!1,y.notifyListeners("command-state-change",f),j.notifyCommandStateChanges(),l||a.finishAction(!1)):h!=s&&(h=s,c.notifyListeners("context-change",j)))};m?z()&&!q&&m(e,g):g()},stopCommand:function(b,d){var e={removeContext:!0};window.multisim.tryCatchAll(function(){v&&q&&(e=f(e,v(b,d)),l||a.finishAction(b))},this),q=!1,null!==h&&e.removeContext&&(h=null,c.notifyListeners("context-change",j)),y.notifyListeners("command-state-change",this),j.notifyCommandStateChanges()},addStateListener:function(a){return y.addListener("command-state-change",a)},removeStateListener:function(a){return y.removeListener("command-state-change",a)}},b.push(o),c.notifyListeners("command-change",j)}():o=null,o},removeCommandObject:function(a){"string"==typeof a&&(a=this.getCommandObject(a));var d=b.indexOf(a);-1!==d&&(b.splice(d,1),c.notifyListeners("command-change",j))},forEach:function(a){var c=this;if("function"==typeof a)for(var d=function(d){window.multisim.tryCatchAll(function(){a(b[d])},c)},e=0;e<b.length;e++)d(e)},addCommandChangeListener:function(a){return c.addListener("command-change",a)},removeCommandChangeListener:function(a){return c.removeListener("command-change",a)},addContextChangeListener:function(a){return c.addListener("context-change",a)},removeContextChangeListener:function(a){return c.removeListener("context-change",a)},createCommandContextHelper:function(a){return e(this,a)}};return j}var d,e,f,g;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.extend}],execute:function(){a("ECommandLogicStates",g=Object.freeze({CLS_ON:"ON",CLS_OFF:"OFF",CLS_INTERMEDIATE:"INTERMEDIATE"})),a("ECommandLogicStates",g)}}}),a.register("13",[],function(a,b){"use strict";function c(){function a(){g.forEach(function(a){a.off()})}function b(){g.forEach(function(a){a.on()})}function c(a){g.filter(function(b){return b==a}).forEach(function(a){a.off()}),g=g.filter(function(b){return b!=a})}function d(){function a(){f&&(d=f.createOscillator(),d.connect(f.destination),d.type=l,d.frequency.value=j,d.start(0),k&&d.setPeriodicWave(k),"suspended"===f.state&&i.resume(),e=!0)}function b(a,b){f&&(k=f.createPeriodicWave(a,b))&&d&&d.setPeriodicWave(k)}var c=Object.freeze({SINE:"sine",SQUARE:"square",SAWTOOTH:"sawtooth",TRIANGLE:"triangle",CUSTOM:"custom"}),d=null,e=!1,j=1e3,k=null,l=c.SINE,m={ESignalTypes:c,on:function(){e||h||a()},off:function(){e&&(d.stop(0),d=null,e=!1)},set frequency(a){j!=a&&(j=Math.min(25e3,Math.max(0,a)),d&&d.frequency.value!=j&&(d.frequency.value=j))},get frequency(){return j},set type(a){l!=a&&(l=c[a]||c.SINE,d&&d.type!=l&&(d.type=l))},get type(){return l},get playing(){return e},setCustomWaveForm:b};return g.push(m),m}var e=window.AudioContext||window.webkitAudioContext,f=e?new e:null,g=[],h=!1,i={createSignalGenerator:d,suspend:function(){h=!0,f&&(f.suspend?f.suspend():a())},resume:function(){h=!1,f&&(f.resume?f.resume():b())},allSignalsOff:a,remove:c};return i.suspend(),i}return a("default",c),{setters:[],execute:function(){}}}),a.register("14",["15","16","17","18"],function(a,b){"use strict";function c(a,b,c){var h=null,i=null,j=function(d){var e=a(),j=m(e.netlist),k=j.map(function(a){return a.pins.filter(function(a){var b=!0,c=a.parent.contextGUID+"+"+a.parent.templateGUID,e=d.parts[c];if(e){var f=e.filter(function(b){return b.symbolpinname===a.pinID});if(1===f.length){b=!f[0].currentattainable}else d.parts[c].push({currentattainable:!1,devicecurrents:[],nocurrentpresent:!0,refdessch:c,symbolpinname:a.pinID})}else d.parts[c]=[{currentattainable:!1,devicecurrents:[],nocurrentpresent:!0,refdessch:c,symbolpinname:a.pinID}];return b}).map(function(b){return{pin:b,netName:a.net.name}})}),l=k.filter(function(a){return 0!==a.length}),o=l.reduce(function(a,b){return a.concat(b)},[]),p={isEmptyNetlist:!1};h=f.toString(a(),b,o,n(j,d),null,!1,i,p,c&&c().sheetTemplateController.sheetTemplate),p.isEmptyNetlist&&c&&a().probeController.hasActiveDataProbes(c().sheetTemplateController.sheetTemplate)&&(h+=g)},k=function(a,b){j(a),b&&b(h)},l=function(){var c=a(),d=c.netlist,e="",g={};d.forEachNet(function(a){a.objects.filter(function(a){return a.hasOwnProperty("pin")}).map(function(a){return a.pin}).forEach(function(a){var c=a.parent.contextGUID+"+"+a.parent.templateGUID;g[c]||(g[c]=[]);var e=f.getSpiceInfoForPin(a,b,d);g[c].push({componentid:c,pinid:a.pinID,refdesspice:e.refdes,spicepinposition:e.pinposition})})});for(var h in g)if(g.hasOwnProperty(h)){var i=g[h];e&&(e+=">"),e+=h+":"+i.map(function(a){return"refdessch="+a.componentid+";refdesspice="+a.refdesspice+";symbolpinname="+a.pinid+";spicepinposition="+a.spicepinposition}).join("|")}return e},m=function(a){var b=[];return a&&a.forEachNet(function(a){b.push({net:a,pins:a.objects.filter(function(a){return a.hasOwnProperty("pin")&&a.pin.parent&&void 0===a.pin.parent.connectorHub}).map(function(a){return a.pin})})}),b},n=function(a,b){var c=new Map;return b&&a.forEach(function(a){a.pins.forEach(function(a){var d=a.parent.contextGUID+"+"+a.parent.templateGUID,e=b.parts[d];if(e){var f=e.filter(function(b){return b.symbolpinname===a.pinID});1===f.length&&c.set(a,f[0])}})}),c},o=function(a){d.D_UNKNOWN;return a.start.y==a.end.y?a.start.x>a.end.x?d.D_LEFT:d.D_RIGHT:a.start.x==a.end.x?a.start.y>a.end.y?d.D_UP:d.D_DOWN:a.start.x>a.end.x?a.start.y>a.end.y?a.start.x-a.end.x>a.start.y-a.end.y?d.D_LEFT:d.D_UP:a.start.x-a.end.x>a.end.y-a.start.y?d.D_LEFT:d.D_DOWN:a.start.y>a.end.y?a.end.x-a.start.x>a.start.y-a.end.y?d.D_RIGHT:d.D_UP:a.end.x-a.start.x>a.end.y-a.start.y?d.D_RIGHT:d.D_DOWN},p=function(a,c,d,e,f,g){var h=[],i=[],j=function(a){var b=e.get(a);return b&&!b.currentattainable},k=[],l=a.length>=c.length&&0!==c.length||0===a.length,m=l?c:a,n=l?a:c,o=m.filter(j);if(o.length){if(n.filter(j).length){if(!g)throw new Error("what happened ??, we cannot get current for this net at this location, this should have been filtered out")}else l=!l,k=n}else k=m;k.forEach(function(a){var b=e.get(a);b&&b.currentattainable&&(h=b.nocurrentpresent?h.concat(0):h.concat(b.devicecurrents.map(function(a){return("positive"==a.currentpolarity==l?"-":"")+a.currentname})))});var p=[];o=d.filter(j),p=!o.length&&d.length>0?d:k,p.forEach(function(a){var c=e.get(a);if(c&&c.currentattainable){var d=null;b&&a.parent&&a.parent.designComponent&&a.parent.designComponent.oeclComponent&&(d=b.getSymbolPinNameForSymbolPinID(a.parent.designComponent.oeclComponent,a.parent.sectionName,c.symbolpinname,a.parent.activeSymbolID))&&(a.parent.pinInstances.size>2||null===d.match(/^\d+$/)||(d=null));var g="";c.devicecurrents&&c.devicecurrents.length>0&&"positive"==c.devicecurrents[0].currentpolarity==f&&(g="-"),i=i.concat(g+"I("+a.parent.refdesString+(d?":"+d:"")+")")}});var q="("+h.join("+")+")",r=i.join("+");return r=r.replace(/\+\-/g,"-"),{spiceExpression:q,displayExpression:r}},q=function(a,b,c,d,e,f){var g=null,h=null,i=[],j=[],k=[],l=[],m=[];return d.every(function(a){return a.pins.every(function(a){return a.parent===b&&a.pinID===c.name&&(h=a),!h})||(g=a.pins),!g}),g&&h&&(i.push(h),j=g.filter(function(a){return a!=h}),k=e?i:j,l=e?j:i,m=i),p(k,l,m,a,m===l,f)},r=function(a,b,c,d){var f=!1,g=c.netlistController,h=e(a.path,b);return c.getContextsOfTemplate(d.sheetGUID).every(function(b){var d=[],e=[];if(h&&h.segment){var i=c.findInstance(b,a.templateGUID),j=g.getWireTerminals(i);d=g.getComponentPinsConnectedToTerminal(j.from,[i]),e=g.getComponentPinsConnectedToTerminal(j.to,[i])}return!(f=d.length&&!d.every(function(a){return-1==e.indexOf(a)}))}),f},s=function(a,b,c,f,g,h,i,j){var k=null,l=i.netlistController;f.every(function(a){return a.net.name==c.netName&&(k=a),null===k});var m=[],n=[],q=e(b.path,g),r=null,s=!1;if(q&&q.segment){var t=o(q.segment),u=h==(t===d.D_LEFT||t===d.D_UP),v=l.getWireTerminals(c),w=u?v.from:v.to,x=u?v.to:v.from;m=l.getComponentPinsConnectedToTerminal(w,[c]),n=l.getComponentPinsConnectedToTerminal(x,[c]);var y=b.getRatioOfPointOnPath(g),z=void 0;z=v.to.pin&&v.from.pin||v.to.junction&&v.from.junction?y>.5?v.to:v.from:v.to.pin?v.to:v.from;var A=w.pin&&w.pin.parent.connectorHub&&"ground"===w.pin.parent.connectorHub.connectorType,B=x.pin&&x.pin.parent.connectorHub&&"ground"===x.pin.parent.connectorHub.connectorType;s=z===w,s&&A?(z=x,s=!1):!s&&B&&(z=w,s=!0),r=l.getComponentPinsConnectedToTerminal(z,[c],"ground");r.reduce(function(a,b){return a||b&&b.parent&&b.parent.connectorHub&&"ground"===b.parent.connectorHub.connectorType},!1)&&(s?(s=!1,r=n,z=x):(s=!0,r=m,z=w),r=l.getComponentPinsConnectedToTerminal(z,[c],"ground"))}return m.every(function(a){return-1==n.indexOf(a)})?p(n,m,r,a,s,j):""};return{get compParamToSweep(){return i},set compParamToSweep(a){i=a},processCurrentMeasurementInfo:k,buildPinInfoRequestString:l,createExpressionForPin:q,createExpressionForWire:s,getPinOnlyNets:m,mapNetInfoToPins:n,probeIsOnLoop:r}}var d,e,f,g;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.constrainPointToPath},function(a){f=a},function(a){g=a.default}],execute:function(){}}}),a.register("18",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c="\n* Component: Rdummy_1\nrRdummy_1 dummy_1 0 1000 VIRTUAL_RESISTANCE_Rdummy_1 \n\n* Component: Vdummy_1\nvVdummy_1 dummy_1 0 dc 12 ac 0 0 \n + distof1 0 0 \n + distof2 0 0\n\n\n* --- Circuit Models ---\n\n* Rdummy_1 model\n.model VIRTUAL_RESISTANCE_Rdummy_1 r(    )\n",a("default",c)}}}),a.register("19",[],function(a,b){"use strict";function c(a,b,c){for(var d=c||a.length,e=0,f=d-e,g=0,h=0;f>0;)h=e,g=f/2|0,h+=g,b(a[h])?f=g:(e=++h,f-=g+1);return e}return a("upperBound",c),{setters:[],execute:function(){}}}),a.register("1a",["1b","1c","1d","1e","1f","20","21","22","23","19"],function(a,b){"use strict";function c(a,b,c,d,e){return a+(c-a)/(d-b)*(e-b)}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.LogicFamily},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.sourceType},function(a){m=a.upperBound}],execute:function(){n=Object.freeze({InitialArraySize:2e3,MinimumUnknownStateDuration:1e-6}),o=Object.freeze({AddData:"addData",Initialized:"initialize",Stale:"dataStale",Refreshed:"dataRefreshed"}),p={update:function(a,b,c,d,e){var f=void 0;if(0===a.crossingValueDivisor)a.crossingValueInProgress=d[e-1],a.crossingValueDivisor=1;else if(a.crossingValueInProgress=.9*a.crossingValueInProgress+.1*d[e-1],!a.crossedAfterPeak){var g=a.crossingValueInProgress/a.crossingValueDivisor;a.isLastPeakHigh&&d[e-1]<g||!a.isLastPeakHigh&&d[e-1]>g?a.crossedAfterPeak=!0:!isNaN(a.mean)&&(a.isLastPeakHigh&&d[e-1]<a.mean||!a.isLastPeakHigh&&d[e-1]>a.mean)&&(a.crossedAfterPeak=!0)}if(e>=2){var h=d[e-1]-d[e-2];if(h>0?(a.lastDeltaY<0&&(a.crossedAfterPeak||isNaN(a.peak.highPeriod))&&a.isLastPeakHigh&&(isNaN(a.peak.lowTime)||(a.peak.lowPeriod=a.lastX-a.peak.lowTime),a.peak.lowTime=a.lastX,a.peak.low=d[e-2],a.isLastPeakHigh=!1,a.crossedAfterPeak=!1),a.lastDeltaY=h):h<0&&(a.lastDeltaY>0&&(!a.crossedAfterPeak&&!isNaN(a.peak.lowPeriod)||a.isLastPeakHigh||(isNaN(a.peak.highTime)||(a.peak.highPeriod=a.lastX-a.peak.highTime,a.meanDivisor>0?a.mean=a.meanInProgress/a.meanDivisor:a.mean=NaN,a.meanDivisor=0,a.meanInProgress=0,a.rms=Math.sqrt(a.rmsRunningTotal/a.rmsDivisor),a.rmsRunningTotal=0,a.rmsDivisor=0),a.peak.highTime=a.lastX,a.peak.high=d[e-2],a.isLastPeakHigh=!0,a.crossedAfterPeak=!1)),a.lastDeltaY=h),isNaN(a.meanInProgress)?(f=c-a.lastX,a.meanInProgress+=f*d[e-1],a.meanDivisor+=f):(f=c-a.lastX,a.meanInProgress+=f*d[e-2]+(d[e-1]-d[e-2])/2*f,a.meanDivisor+=f),!isNaN(d[e-1])){var i=c-a.lastX,j=d[e-1]*i;a.rmsRunningTotal+=j*j/i,a.rmsDivisor+=i}}if(!isNaN(a.peak.highTime)&&!isNaN(a.peak.highPeriod)||!isNaN(a.peak.lowTime)&&!isNaN(a.peak.lowPeriod)){f=Math.min(a.lastX-a.peak.highTime,a.lastX-a.peak.lowTime);var k=0;k=isNaN(a.peak.highPeriod)||isNaN(a.peak.lowPeriod)?isNaN(a.peak.highPeriod)?a.peak.lowPeriod:a.peak.highPeriod:Math.max(a.peak.lowPeriod,a.peak.highPeriod),f>5*k&&(a.crossingValueInProgress=0,a.crossingValueDivisor=0,a.peak.highPeriod=NaN,a.peak.lowPeriod=NaN,a.peak.highTime=NaN,a.peak.high=NaN,a.peak.lowTime=NaN,a.peak.low=NaN,a.rms=0,a.rmsDivisor=0,a.rmsRunningTotal=0,a.meanInProgress=0,a.meanDivisor=0,a.mean=NaN,a.crossedAfterPeak=!1)}a.lastX=c}},q=Object.freeze({LOW:0,HIGH:1,UNKNOWN:2,INVALID:3}),r=function(){function a(){f(this,a),this._insertedIndexToTransitionDataArrayMap=new Map}return g(a,[{key:"addDigitalData",value:function(b,c,d){var e=this._insertedIndexToTransitionDataArrayMap.get(b);if(e){var f=e.find(function(a){return Math.abs(a[0][0]-c.time)<1e-30});f?(f[0][c.node]=a.convertDigitalStateToDigitalValue(c.oldvalue),f[1][c.node]=a.convertDigitalStateToDigitalValue(c.value)):e.push(a._createTransitionData(c,d))}else this._insertedIndexToTransitionDataArrayMap.set(b,[a._createTransitionData(c,d)])}},{key:"insertToDataBlock",value:function(b){var c=0,f=!0,g=!1,h=void 0;try{for(var i,j=function(){var f=e(i.value,2),g=f[0],h=f[1],j=[];h.forEach(function(a){return j.push.apply(j,d(a))});var k=j.length;a.arrayInsertSort(j,1,function(a,b){return a[0]-b[0]}),b.splice.apply(b,[g+c,0].concat(j)),c+=k},k=this._insertedIndexToTransitionDataArrayMap[Symbol.iterator]();!(f=(i=k.next()).done);f=!0)j()}catch(a){g=!0,h=a}finally{try{!f&&k.return&&k.return()}finally{if(g)throw h}}}}],[{key:"_createTransitionData",value:function(b,c){var d=new Array(c);d.fill(a.invalidPlaceholder),d[0]=b.time,d[b.node]=a.convertDigitalStateToDigitalValue(b.oldvalue);var e=new Array(c);return e.fill(a.invalidPlaceholder),e[0]=b.time,e[b.node]=a.convertDigitalStateToDigitalValue(b.value),[d,e]}},{key:"arrayInsertSort",value:function(a,b,c){for(var d=a.length,e=b;e<d;e++)for(var f=0;f<e;f++)if(c(a[f],a[e])>0){a.splice(f,0,a[e]),a.splice(e+1,1);break}}},{key:"convertDigitalStateToDigitalValue",value:function(a){return a===q.HIGH?1:a===q.LOW?0:.5}},{key:"convertAnalogValueToDigitalValue",value:function(a,b,c){return a>=c?1:a<=b?0:.5}},{key:"isInvalidPlaceholder",value:function(a){return Number.isNaN(a)}},{key:"invalidPlaceholder",get:function(){return Number.NaN}}]),a}(),a("InsertIndexToInterpolationDataMap",s=function(){function a(){f(this,a),this._insertIndexToInterpolationDataMap=[]}return g(a,[{key:"set",value:function(a,b,c,d){var e=this._insertIndexToInterpolationDataMap[a];if(e)e.interpolation.push({channelIndex:c,state:d});else{var f={time:b,interpolation:[]};f.interpolation.push({channelIndex:c,state:d}),this._insertIndexToInterpolationDataMap[a]=f}}},{key:"get",value:function(a){return this._insertIndexToInterpolationDataMap[a]}},{key:"insertToDataBlock",value:function(a,b){var c=this,d=0,e=Object.keys(this._insertIndexToInterpolationDataMap),f=!0,g=!1,h=void 0;try{for(var i,j=function(){var e=i.value,f=c._insertIndexToInterpolationDataMap[e],g=new Array(b);g.fill(r.invalidPlaceholder),g[0]=f.time,f.interpolation.forEach(function(a){g[a.channelIndex]=a.state}),a.splice(Number(e)+d,0,g),d++},k=e[Symbol.iterator]();!(f=(i=k.next()).done);f=!0)j()}catch(a){g=!0,h=a}finally{try{!f&&k.return&&k.return()}finally{if(g)throw h}}}},{key:"findInterpolationDataArrayAtSpecifiedTime",value:function(a){var b=!0,c=!1,d=void 0;try{for(var e,f=Object.values(this._insertIndexToInterpolationDataMap)[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;if(g.time===a)return g.interpolation}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}},{key:"size",get:function(){return Object.keys(this._insertIndexToInterpolationDataMap).length}}]),a}()),a("InsertIndexToInterpolationDataMap",s),t={EDataUpdateEvents:o,mutateDataChannelToDigitalData:function(a,b,c,d,e,f,g){for(var i=b===c,j=[],k=0,l=a.length-1,m={},o=r.convertAnalogValueToDigitalValue(a[0][b],e,f),p=0;p<a.length;p++){var q=a[p][b],s=r.convertAnalogValueToDigitalValue(q,e,f);if(i&&.5===s&&(m[p]=q),d(a,p,c,s),s!==o&&.5!==s&&.5!==o)g.set(p,a[p][0],c,o);else if(s!==o&&.5===s)k=p,j.push({beginIndex:k,endIndex:l,duration:a[l][0]-a[k][0]});else if(.5===o&&.5!==s){var t=j.length,u=0===t;u?j.push({beginIndex:0,endIndex:p,duration:a[p-1][0]-a[k][0]}):(j[t-1].endIndex=p,j[t-1].duration=a[p-1][0]-a[k][0]),k=void 0}0!==p&&(o=s)}for(var v=h.calculateUnknownVoltage(e,f),w=0;w<j.length;w++){var x=j[w],y=x.endIndex===l&&.5===a[x.endIndex][c],z=0===x.beginIndex;if(x.duration>=n.MinimumUnknownStateDuration||y||z){if(x.beginIndex>0){var A=a[x.beginIndex-1][c];g.set(x.beginIndex,a[x.beginIndex][0],c,A)}var B=x.endIndex===l&&.5!==a[x.endIndex][c];(x.endIndex<l||B)&&g.set(x.endIndex,a[x.endIndex][0],c,.5)}else for(var C=a[x.beginIndex-1][c],D=x.beginIndex;D<=x.endIndex;D++){var E=void 0;if(D<x.endIndex){var F=i?m[D]:a[D][b];E=F>=v?1:0,a[D][c]=E}else E=a[D][c];C!==E&&g.set(D,a[D][0],c,C),C=E}}},create:function(a){function b(a,b){b&&(A=[],B=null),A.push({data:[],decimatedCache:null,name:a,dataSize:0,limits:{minx:NaN,maxx:NaN,miny:NaN,maxy:NaN,serieslimits:[]},measurements:[]}),B=A[A.length-1]}function d(a){a>=0&&a<A.length&&(B=A[a])}function e(b){(b=B.dataSize>0&&b)!==E&&(E=b,a&&a.notifyListeners(!1===b?o.Refreshed:o.Stale))}function f(a,b){if(void 0!==b&&void 0!==a.decimatedCache&&null!==a.decimatedCache||(a.decimatedCache={dataSlice:null,perXChannel:[]}),b)g(a,b);else for(var c=0;c<D.length;c++)D[c].xChannelIndex===c&&g(a,c)}function g(a,b){a.decimatedCache.perXChannel[b]={min:-1,max:-1,decimationTarget:0,transform:null,compressionResolution:0,compressionBufferIndex:-1,compressionBufferTraceExtremes:null,fullyDecimatedSliceIndex:[]},a.decimatedCache.dataSlice&&(a.decimatedCache.dataSlice[b]=[])}function h(a){return D.map(function(b){return void 0===a||b.xChannelIndex===a?[]:null})}function q(a,b,c){var d=h(c);return d.forEach(function(d,e){null!==d&&(d.push([b[c][a],b[e][a]]),d.push([b[c][a],b[e][a]]))}),d}function u(a,b,c,d,e){var f=d[b][c];r.isInvalidPlaceholder(f)||e[b].push([d[a][c],f])}function v(a,b,c,d){for(var e=0;e<D.length;++e)e!==d&&D[e].xChannelIndex===d&&u(d,e,a,b,c)}function w(a,b,c,d){for(var e=0;e<D.length;++e)if(e!==d&&D[e].xChannelIndex===d){var f=D[e].xChannelIndex,g=b[e][a],h=c[e],i=h[0][1]<h[1][1]?0:1,j=h[0][1]>h[1][1]?0:1,k=g<h[i][1],l=g>h[j][1],m=l?j:k?i:null;null!==m&&(0===m&&(h[0]=h[1]),h[1]=[b[f][a],b[e][a]])}}function x(a,b,c){a.forEach(function(a,d){null!==a&&a.forEach(function(a){var e=a[1];r.isInvalidPlaceholder(e)||d===c||D[d].xChannelIndex!==c||b[d].push(a)})})}function y(a){return a}function z(a,b,c,d,e,f){var g=!B.decimatedCache.dataSlice||!B.decimatedCache.dataSlice[a]||0===B.decimatedCache.dataSlice[a].length;d=Math.min(d,(0===a?B.dataSize:b[a].length)-1);var i=B.decimatedCache,j=i.perXChannel[a];if(g){h(a).forEach(function(a,b){a&&(i.dataSlice[b]=a)});var k=f(j.max-j.min);j.compressionResolution=k/(e/2),j.compressionBufferIndex=c}else i.dataSlice.forEach(function(b,c){if(c!==a&&D[c].xChannelIndex===a){var d=j.fullyDecimatedSliceIndex;void 0===d&&(d=-1),b.splice(d,b.length)}});j.compressionBufferTraceExtremes=q(j.compressionBufferIndex,b,a);for(var l=j.compressionBufferIndex;l<d;l++){if(f(b[a][l])-f(b[a][j.compressionBufferIndex])>=j.compressionResolution){if(l-j.compressionBufferIndex>=4)v(j.compressionBufferIndex,b,i.dataSlice,a),x(j.compressionBufferTraceExtremes,i.dataSlice,a),v(l-1,b,i.dataSlice,a);else for(var m=j.compressionBufferIndex;m<l;++m)v(m,b,i.dataSlice,a);j.compressionBufferIndex=l,j.compressionBufferTraceExtremes=q(l,b,a);var n=D.findIndex(function(b,c){return c!==a&&b.xChannelIndex===a});j.fullyDecimatedSliceIndex=i.dataSlice[n].length}else w(l,b,j.compressionBufferTraceExtremes,a)}if(d-j.compressionBufferIndex>=4)v(j.compressionBufferIndex,b,i.dataSlice,a),x(j.compressionBufferTraceExtremes,i.dataSlice,a),v(d,b,i.dataSlice,a);else for(;j.compressionBufferIndex<d;++j.compressionBufferIndex)v(j.compressionBufferIndex,b,i.dataSlice,a);return i.dataSlice}var A=[],B=null,C=2e3,D=[],E=!1,F="";b("",!0),A.forEach(function(a){f(a)});var G=new Map;return{EDataUpdateEvents:o,dataUpdateListeners:a,addSweep:b,activateSweep:d,get sweepCount(){return A.length},get sweepName(){return B.name},initData:function(b,c){var d=void 0===c?n.InitialArraySize:c;e(!1),D=b.slice(),f(B),B.dataSize=0,B.data=[],B.measurements=[],B.limits={minx:NaN,maxx:NaN,miny:NaN,maxy:NaN,serieslimits:[]},D.forEach(function(a){void 0===a.xChannelIndex&&(a.xChannelIndex=0),void 0===a.dataSize&&(a.dataSize=0)}),d>0&&D.forEach(function(a){a.signalIsExternal?B.data.push([]):B.data.push(new Float64Array(d))}),function(){for(var a=0;a<b.length;a++)B.limits.serieslimits.push({miny:NaN,maxy:NaN})}(),b.forEach(function(){B.measurements.push({mean:NaN,peak:{high:NaN,low:NaN,highPeriod:NaN,lowPeriod:NaN,highTime:NaN,lowTime:NaN},rms:NaN,crossingValueDivisor:0,crossingValueInProgress:0,crossedAfterPeak:!1,isLastPeakHigh:!1,meanDivisor:0,lastX:0,lastDeltaY:0,meanInProgress:0,rmsRunningTotal:0,rmsDivisor:0})}),a&&a.notifyListeners(o.Initialized)},setRelativeXChannelData:function(b,c,d,e,f){var g=D.filter(function(a){return-1!==d.indexOf(a.signalName)}).reduce(function(a,b){var d=D[b.xChannelIndex];return d&&(a.find(function(a){return a.channelIndex===d.channelIndex})||(d.triggerIndex=c,a.push(d)),a.find(function(a){return a.channelIndex===b.channelIndex})||(b.triggerIndex=c,a.push(b))),a},[]),h=null,j=null,k=!1;return g.length?function(){var c=0===B.dataSize,d=[];g.forEach(function(a){if(B.data[a.channelIndex].length<b.length)try{d.push(new Float64Array(b.length))}catch(a){d=null,h=a,j=i.DEC_OUT_OF_MEMORY}a.dataSize=b.length}),k=b.every(function(a,b){var c=0,e=f?f(a):a;if(null!==d&&B.limits){for(c=0;c<e.length;c++){var h=g[c];h.xChannelIndex!==h.channelIndex&&(0===B.dataSize?(B.limits.miny=e[c],B.limits.maxy=e[c]):(B.limits.miny=Math.min(B.limits.miny,e[c]),B.limits.maxy=Math.max(B.limits.maxy,e[c])),B.limits.serieslimits&&B.limits.serieslimits[c]&&h.xChannelIndex!==h.channelIndex&&(0===b?(B.limits.serieslimits[h.channelIndex].miny=e[c],B.limits.serieslimits[h.channelIndex].maxy=e[c]):(B.limits.serieslimits[h.channelIndex].miny=Math.min(B.limits.serieslimits[h.channelIndex].miny,e[c]),B.limits.serieslimits[h.channelIndex].maxy=Math.max(B.limits.serieslimits[h.channelIndex].maxy,e[c]))))}d.length&&g.forEach(function(a,b){B.data[a.channelIndex]=d[b]}),g.forEach(function(a,c){B.data[a.channelIndex][b]=e[c]})}return null!==d}),a&&e&&a.notifyListeners(o.AddData,{firstData:c})}():(h="Received data for unrequested channel(s) "+d.join(","),j=-2),{success:k,error:h,errorCode:j}},convertAnalogDataToDigitalData:function(a){var b=D.filter(function(a){return!a.signalIsExternal}),c=new s;D.forEach(function(b,d){if(b.needsConvertToDigital){var e=b.inputLowThreshold,f=b.inputHighThreshold;t.mutateDataChannelToDigitalData(a,d,d,function(a,b,c,d){a[b][c]=d},e,f,c)}else if(b.signalName.includes("!dprobe")){var g=b.inputLowThreshold,h=b.inputHighThreshold,i=b.yChannelIndex;t.mutateDataChannelToDigitalData(a,i,d,function(a,b,c,d){a[b].splice(c,0,d)},g,h,c)}}),c.insertToDataBlock(a,b.length)},addDigitalDataToDataBlock:function(a){var b=new r,c=D.filter(function(a){return!a.signalIsExternal}),d=c.length;a.forEach(function(a,c){a.filter(function(a){return"object"==typeof a}).forEach(function(e){var f=void 0;f=e.time<=a[0]?c:c+1,b.addDigitalData(f,e,d)})}),b.insertToDataBlock(a)},appendData:function(b,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j.Interactive,e=0===B.dataSize;if(e)for(var f=0;f<D.length;f++){var g=D[f];if(g&&g.signalIsExternal&&g.getExternalData&&(!g.source||g.source===l.file)){var h=g.getExternalData();if(h&&h.length>=0){if(B.data[f]=h,g.xChannelIndex!==f){var k=void 0,m=void 0;if(h.length>0){k=h[0],m=k;for(var n=0;n<h.length;n++){var q=h[n];k=Math.min(q,k),m=Math.max(q,m)}}B.limits.serieslimits[f].miny=k,B.limits.serieslimits[f].maxy=m}g.dataSize=h.length}}}var s=null,t=null;F=d;var u=b.every(function(a){var d=0,e=a.filter(function(a){return"object"!=typeof a}),f=c?c(e):e,g=[];if(B.dataSize&&B.data[0]&&B.dataSize===B.data[0].length)try{B.data.forEach(function(a,b){D[b].signalIsExternal?g.push(new Float64Array(a.length)):g.push(new Float64Array(Math.min(2*a.length,a.length+1e6)))})}catch(a){g=null,s=a,t=i.DEC_OUT_OF_MEMORY}if(null!==g&&B.limits){if(0===B.dataSize){B.limits.minx=b[0][0],B.limits.miny=1/0,B.limits.maxy=-1/0;for(var h=0;h<f.length;h++)D[h].xChannelIndex!==h&&B.limits.serieslimits&&B.limits.serieslimits[h]&&(B.limits.serieslimits[h].miny=1/0,B.limits.serieslimits[h].maxy=-1/0)}for(d=0;d<f.length;d++)r.isInvalidPlaceholder(f[d])||D[d].xChannelIndex===d||(B.limits.miny=Math.min(B.limits.miny,f[d]),B.limits.maxy=Math.max(B.limits.maxy,f[d]),B.limits.serieslimits&&B.limits.serieslimits[d]&&(B.limits.serieslimits[d].miny=Math.min(B.limits.serieslimits[d].miny,f[d]),B.limits.serieslimits[d].maxy=Math.max(B.limits.serieslimits[d].maxy,f[d])));g.length&&(B.data.forEach(function(a,b){g[b].set(a)}),B.data=g),B.data.forEach(function(a,b,c){(this[b]||r.isInvalidPlaceholder(this[b]))&&(c[b][B.dataSize]=this[b])},f),B.dataSize++,B.limits.maxx=b[b.length-1][0],B.data.forEach(function(b,c){p.update(B.measurements[c],B.limits.serieslimits[c],a[0],b,B.dataSize)})}return null!==g});return a&&a.notifyListeners(o.AddData,{firstData:e,activeAnalysis:d}),{success:u,error:s,errorCode:t}},getTriggerPoint:function(a,b,d,e,f){var g=null,h=D.map(function(a){return a.signalName}).indexOf(f);if(-1!==h){var i=Math.max(0,m(B.data[0],function(b){return a<b},B.dataSize)-1),j=Math.min(B.dataSize,B.data[h].length);if(null===e&&(e=B.measurements[h].mean),isNaN(e)){if(b&&!d){for(var k=i+1;k<j;k++)if(B.data[h][k-1]<B.data[h][k]){g=B.data[0][k-1];break}}else if(d&&!b){for(var l=i+1;l<j;l++)if(B.data[h][l-1]>B.data[h][l]){g=B.data[0][l-1];break}}else for(var n=i+1;n<j;n++)if(B.data[h][n-1]!==B.data[h][n]){g=B.data[0][n-1];break}}else if(b&&!d){for(var o=i+1;o<j;o++)if(B.data[h][o-1]<=e&&B.data[h][o]>e){g=c(B.data[0][o-1],B.data[h][o-1],B.data[0][o],B.data[h][o],e);break}}else if(d&&!b){for(var p=i+1;p<j;p++)if(B.data[h][p-1]>=e&&B.data[h][p]<e){g=c(B.data[0][p-1],B.data[h][p-1],B.data[0][p],B.data[h][p],e);break}}else for(var q=i+1;q<j;q++){var r=B.data[h][q-1],s=B.data[h][q];if(r>=e&&s<e||r<=e&&s>e){g=c(B.data[0][q-1],B.data[h][q-1],B.data[0][q],B.data[h][q],e);break}}}return g},getData:function(a,b,c,d,e){var g=c||C,h=e||null;h&&(h.minx=null,h.maxx=null,h.miny=null,h.maxy=null,h.serieslimits=[]);var i=D.filter(function(a){return a.relativeX});return B.dataSize>0&&B.data.length>0||i.find(function(a){return B.data[a.channelIndex].length})?(d=d||y,D.forEach(function(c,e){if(c.xChannelIndex===e){var h=B.data.slice(),i=h[e],j=0,k=0===e?B.dataSize:c.dataSize||i.length;if(c.relativeX)!function(){j=c.triggerIndex||0;var b=i[j]-a;i=i.map(function(a){return a-b}),h[e]=i}();else if(B.dataSize>1e4)j=m(i,function(b){return a<b},k);else for(;i[j]<=a&&j<k;)j++;j=Math.max(0,j-1);for(var l=j;i[l]<b&&l<=k;)l++;if((l=0===e?Math.min(Math.min(i.length,l+1),B.dataSize):Math.min(k,l+1))-j>2*g)void 0!==B.decimatedCache.perXChannel[e]&&a===B.decimatedCache.perXChannel[e].min[e]&&b===B.decimatedCache.perXChannel[e].max[e]&&g===B.decimatedCache.perXChannel[e].decimationTarget&&B.decimatedCache.perXChannel[e].transform===d||(f(B,e),B.decimatedCache.perXChannel[e].min=a,B.decimatedCache.perXChannel[e].max=b,B.decimatedCache.perXChannel[e].decimationTarget=g,B.decimatedCache.perXChannel[e].transform=d),null===B.decimatedCache.dataSlice&&(B.decimatedCache.dataSlice=D.map(function(){return null})),B.decimatedCache.dataSlice=z(e,h,j,l,g,d);else for(var n=0;n<D.length;n++){var o=D[n];if(e===o.xChannelIndex){var p=[];if(n!==o.xChannelIndex)for(var q=Math.min(l,h[n].length),s=j;s<q;s++){var t=h[n][s];r.isInvalidPlaceholder(t)||p.push([h[e][s],t])}null===B.decimatedCache.dataSlice&&(B.decimatedCache.dataSlice=D.map(function(){return null})),B.decimatedCache.dataSlice[n]=p}}}})):(B.decimatedCache.dataSlice=[],D.forEach(function(){B.decimatedCache.dataSlice.push([])})),h&&B.decimatedCache.dataSlice.length>1&&B.decimatedCache.dataSlice[1].length&&(h.minx=B.decimatedCache.dataSlice[1][0][0],h.maxx=B.decimatedCache.dataSlice[1][B.decimatedCache.dataSlice[1].length-1][0],B.decimatedCache.dataSlice[1][0].length>1?(h.miny=B.decimatedCache.dataSlice[1][0][1],h.maxy=B.decimatedCache.dataSlice[1][0][1]):(h.miny=null,h.maxy=null),B.decimatedCache.dataSlice.forEach(function(a,b){if(D[b].xChannelIndex===b){var c={miny:NaN,maxy:NaN};h.serieslimits.push(c)}else!function(){var b={miny:a.length?a[0][1]:null,maxy:a.length?a[0][1]:null};a.forEach(function(a){b.miny=Math.min(b.miny,a[1]),b.maxy=Math.max(b.maxy,a[1])}),h.serieslimits.push(b),null!==h.miny&&null!==b.maxy&&(h.miny=Math.min(h.miny,b.miny),h.maxy=Math.max(h.maxy,b.maxy))}()})),B.decimatedCache.dataSlice},getLimits:function(a,b){if(void 0===a&&void 0===b)return B.limits;var c={},d=a||B.limits.minx,e=b||B.limits.maxx;return 1===A.length?this.getData(d,e,null,null,c):this.getSweepData(d,e,null,null,c),c},getSweepData:function(a,b,c,d,e){var f=B,g=[],h=e||null,i={},j=void 0;h&&(h.minx=null,h.maxx=null,h.miny=1/0,h.maxy=-1/0,h.serieslimits=[]);try{A.forEach(function(e){if(B=e,g.push({name:e.name,data:this.getData(a,b,c,d,i)}),h&&(h.miny=Math.min(h.miny,i.miny),h.maxy=Math.max(h.maxy,i.maxy),i.serieslimits.length))for(j=0;j<i.serieslimits.length;++j)h.serieslimits[j]=h.serieslimits[j]||{maxy:-1/0,miny:1/0},h.serieslimits[j].miny=Math.min(h.serieslimits[j].miny,i.serieslimits[j].miny),h.serieslimits[j].maxy=Math.max(h.serieslimits[j].maxy,i.serieslimits[j].maxy)},this),h&&(h.minx=i.minx,h.maxx=i.maxx)}catch(a){console.log(a)}return B=f,g},get length(){return B.dataSize},getRawData:function(a,b){a=Math.max(0,Math.min(B.dataSize,a||0)),b=Math.max(a,Math.min(B.dataSize,b||B.dataSize));var c=[];return B.data&&B.data.length>0&&B.dataSize>0&&b>a?B.data.forEach(function(d){for(var e=[],f=Math.min(b,d.length),g=a;g<f;++g)e.push(d[g]);c.push(e)}):D.forEach(function(){c.push([0])}),c},getSaveData:function(){var a=[];return B.data&&B.data.length>0&&B.dataSize>0?B.data.forEach(function(b){var c=b.subarray(0,B.dataSize);a.push(c)}):D.forEach(function(){a.push([0])}),a},loadData:function(b,c){if(F=b.activeAnalysis,B.limits.minx=b.limits.minx,B.limits.maxx=b.limits.maxx,B.limits.miny=b.limits.miny,B.limits.maxy=b.limits.maxy,B.limits.serieslimits=b.limits.serieslimits.slice(),B.dataSize=b.pointsPerChannel,c.forEach(function(a){B.data.push(a)}),a){a.notifyListeners(o.AddData,{firstData:!0,activeAnalysis:F})}},getSimulationDataToSave:function(){var a=null;if(F===j.DC){var b=this.getSaveData();if(b&&b.length){for(var c={activeAnalysis:F,dataChannels:this.getSignalNames(),pointsPerChannel:B.dataSize,pointsSaved:b[0].byteLength/Float64Array.BYTES_PER_ELEMENT,numChannels:b.length,limits:this.getLimits(),dataSize:[]},d=0;d<b.length;d++)c.dataSize.push(b[d].byteLength);for(var e=JSON.stringify(c,null,0);(e.length+4)%8!=0;)e+=" ";var f=[],g=new ArrayBuffer(4);new Uint32Array(g)[0]=e.length,f.push(g),f.push(e);for(var h=0;h<b.length;h++)f.push(b[h]);a=new window.Blob(f,{type:"application/octet-stream"})}}return a},getDataProbeLoadedFileData:function(a,b){var c=[];return a.probeController.getProbes().forEach(function(a){if(b.getObject(a.templateGUID).probeType==k.PROBE_DATA){var d=a.getLoadedFileData(),e=a.fileChecksum;if(d&&d.externalData&&d.externalData.length>0){for(var f=!1,g=0;!f&&g<c.length;g+=1)c[g].checksum==e&&(c[g].data.templateGUIDs.push(d.templateGUIDs[0]),f=!0);f||c.push({checksum:e,data:d})}}}),c.map(function(a){return a.data})},getRawSweepData:function(a,b){a=Math.max(0,Math.min(B.dataSize,a||0)),b=Math.max(a,Math.min(B.dataSize,b||B.dataSize));var c=void 0,d=B,e=[],f=void 0,g=function(){B=A[c];var d=[];B.data&&B.data.length>0&&B.dataSize>0&&b>a?B.data.forEach(function(c){var e=[];for(f=a;f<b;++f)e.push(c[f]);d.push(e)}):D.forEach(function(){var a=[];for(f=0;f<b;++f)a.push(0);d.push(a)}),e.push(d)};for(c=0;c<A.length;++c)g();return B=d,e},cleanUpSpiceSignalName:function(a){var b=a;return b=b.replace(/\$(([\w]|[+\-\/*](?=[^${()}]))+)/gi,"V($1)"),b=b.replace(/-?@?((\w+:)*)\w(\w+)\[(\w)(\w+)]/gi,"$4($3:$5)"),b=b.replace(/-?@?((\w+:)*)\w(\w+)\[(\w)]/gi,"$4($3)"),b=b.replace(/^\s*\((.*)\)\s*$/,"$1"),b=b.toUpperCase().replace(" ",""),G.set(b,a),b},setDecimationTarget:function(a){C=a},getDecimationTarget:function(){return C},getSignalNames:function(){return D},getDataManagerAnalysis:function(){return F},setDataManagerAnalysis:function(a){F=a},getSweepNames:function(){return A.map(function(a){return a.name})},getMeasurements:function(a){var b=D.map(function(a){return a.signalName}).indexOf(a);return B.measurements[b]},getLastValue:function(a){var b=D.map(function(a){return a.signalName}).indexOf(a);if(B.dataSize>0&&B.data.length>0&&-1!==b)return B.data[b][B.dataSize-1]},get stale(){return E},set stale(a){e(a)}}}},a("default",t)}}}),a.register("24",[],function(a,b){"use strict";function c(a){var b=[],c=null;return{get guid(){return a},get parent(){return c},get childLength(){return b.length},set parent(a){c=a},addChild:function(a){-1===b.indexOf(a)&&(b.push(a),a.parent=this)},removeChild:function(a){b.splice(b.indexOf(a),1),a.parent===this&&(a.parent=null)},getChild:function(a){return a>=0&&a<b.length?b[a]:null}}}return a("default",c),{setters:[],execute:function(){}}}),a.register("25",["1d","1e","26","27","28","29","2a"],function(a,b){"use strict";function c(a){return/^[^#\\:;()[\]{}$'"%<>&`=\/~!\s]+$/.test(a)}var d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){k=function(){this.design.addConnectorHub(this.hub)},l=function(){this.design.removeConnectorHub(this.hub)},m=function(a){function b(){return d(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),e(b,[{key:"addConnectorHub",value:function(a){this.design.addConnectorHub(a),this.undo.addStep({undo:l,redo:k,design:this.design,hub:a})}},{key:"removeConnectorHub",value:function(a){this.design.removeConnectorHub(a),this.netlistController.removeJunction(a),this.undo.addStep({undo:k,redo:l,design:this.design,hub:a})}},{key:"changeConnectorIDs",value:function(a,b){var c=a[0].connectorHub.connectorID,d=a.filter(function(a){return a.connectorHub.connectorID!==b});d.length&&(this.design.changeConnectorIDs(d,b),this.undo.addStep({undo:function(){this.design.changeConnectorIDs(this.connectorsToChange,this.oldConnectorID)},redo:function(){this.design.changeConnectorIDs(this.connectorsToChange,this.newConnectorID)},design:this.design,connectorsToChange:d,oldConnectorID:c,newConnectorID:b}))}},{key:"addConnector",value:function(a){var b=h(),c=this.mainController.createTemplateConnector(b,a.component,a.objectMatrix);this.addTemplateSymbolPinsFromOECL(c,a.component,a.sectionName,a.component.symbolBlueprints[0].id);var d=h(),e=!1,f=this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID);if(f.forEach(function(c){var f=this.design.generateNextAvailableConnectorID(a.component.componentBlueprints[0].symbolConfigurations[0].refDesPrefix),g=this.design.getConnectorHub(f,a.connectorType);g||(g=this.design.createConnectorHub(f,a.connectorType),this.addConnectorHub(g),this.netlistController.addJunction(g,{name:f,priority:this.design.netlist.ENetPriorities.PRIORITY_CONNECTOR_NAMED})),e="ground"===g.connectorType&&"0"===g.connectorID;var h=this.mainController.createConnectorInstance(c,b,g);if(this.addInstanceSymbolPinsFromOECL(h,a.component,a.sectionName,a.component.symbolBlueprints[0].id),this.addDesignInstance(c,b,h),!e){var i=this.mainController.createTextInstance(c,d,"connectorID",h);this.addDesignInstance(c,d,i)}},this),!e){var g=this.mainController.createTemplateText(d,{x:0,y:0},!0,"center",!1,null);c.children.push(g),g.parent=c,this.addTemplateObject(d,g)}this.addTemplateObject(b,c),f.forEach(function(a){var d=this.design.findInstance(a,b);c.pins.forEach(function(a,b){var c=d.getPinInstance(b);this.netlistController.addPin(c),this.netlistController.addConnectorLink(c),this.netlistController.connect(c,d.connectorHub,c)},this)},this);var i={finalize:function(){this.probeController.updateAllProbeState()},probeController:this.mainController.probeController};return i.finalize(),this.undo.addFinalizer(i),b}},{key:"splitConnectorStartingAt",value:function(a,b){var c=void 0;this.design.getConnectorHub(b,a.connectorHub.connectorType)?c=this.design.getConnectorHub(b,a.connectorHub.connectorType):(c=this.design.createConnectorHub(b,a.connectorHub.connectorType),this.addConnectorHub(c),this.netlistController.addJunction(c,{name:b,priority:this.design.netlist.ENetPriorities.PRIORITY_USER_NAMED,useInitialConditions:this.netlistController.useTransientInitialConditions(a.connectorHub.connectorID),initialConditions:this.netlistController.getTransientInitialConditions(a.connectorHub.connectorID),useNodeset:this.netlistController.useDCNodeset(a.connectorHub.connectorID),nodeset:this.netlistController.getDCNodeset(a.connectorHub.connectorID)}));var d=void 0;a.pinInstances.forEach(function(a){d=a});var e=this;this.netlistController.forEachConnectedTerminal(this.netlistController.getTerminal(d),function(a){a.connectable.parent&&a.connectable.parent.connectorHub&&e.netlistController.disconnect(a.connectable,function(c,d){-1===c.netContents.indexOf(a.connectable.parent.connectorHub)?c.netName=b||e.design.netlist.getNextAvailableDefaultNetName():d.netName=b||e.design.netlist.getNextAvailableDefaultNetName()})},function(a){var b=e.netlistController.getWireTerminals(a.wire);return void 0===b.from.connectable.connectorID&&void 0===b.to.connectable.connectorID}),this.netlistController.forEachConnectedTerminal(this.netlistController.getTerminal(d),function(a){a.connectable.parent&&a.connectable.parent.connectorHub&&(e.netlistController.connect(a.connectable,c,a.connectable,b),e.changeConnectorIDs([a.connectable.parent],c.connectorID))},function(a){var b=e.netlistController.getWireTerminals(a.wire);return void 0===b.from.connectable.connectorID&&void 0===b.to.connectable.connectorID}),this.design.getUnusedConnectorHubs().forEach(function(a){this.removeConnectorHub(a)},this)}},{key:"mergeConnectors",value:function(a,b){var c=this.design.getConnectorHub(b,a.connectorHub.connectorType),d=a.connectorHub,e=d.connectors.slice();e.forEach(function(a){var b=void 0;a.pinInstances.forEach(function(a){b=a}),this.netlistController.disconnect(b)},this),e.forEach(function(a){var b=void 0;a.pinInstances.forEach(function(a){b=a}),this.netlistController.connect(b,c,b,c.connectorID),this.changeConnectorIDs([a],c.connectorID)},this),this.design.getUnusedConnectorHubs().forEach(function(a){this.removeConnectorHub(a)},this)}},{key:"removeConnector",value:function(a){var b=a.contexts,c=a.templateGUID,d=a.deleteQueueSearch,e=a.cleanup,f=a.savedJunctions,g=a.itemsToProcessForLabelVisibility,h=this.sheetTemplate.getObject(c),i=this.design.netlist;b.forEach(function(a,k){var l=this.design.findInstance(a,c);h.pins.forEach(function(a,c){var h=this.netlistController.getWires(l.getPinInstance(c));e&&0===k&&void 0!==h&&h.forEach(function(a){var c=this.sheetTemplate.getObject(a.templateGUID);c&&c.netlistRemove({contexts:b,templateGUID:a.templateGUID,deleteQueueSearch:d,cleanup:e,savedJunctions:f,itemsToProcessForLabelVisibility:g},k)},this),this.netlistController.disconnect(l.getPinInstance(c),function(a,b){j.decideNames(a,b,i)}),this.netlistController.removePin(l.getPinInstance(c)),this.netlistController.removeConnectorLink(l.getPinInstance(c))},this),this.removeDesignInstance(a,c,l),l.children.forEach(function(b){this.removeDesignInstance(a,b.templateGUID,b)},this)},this),this.sheetTemplate.getObject(c).children.forEach(function(a){this.removeTemplateObject(a.templateGUID)},this),this.removeTemplateObject(c)}},{key:"cloneTemplateConnector",value:function(a,b,c,d){var e=c.clone(this.mainController,d);return e.templateGUID=a,c.children.forEach(function(a){var c=a.clone(this.mainController);c.templateGUID=b.get(a.templateGUID),e.children.push(c),c.parent=e},this),e}},{key:"cloneConnectorInstance",value:function(a,b,c){var d=c.clone(this.mainController);return d.templateGUID=a,c.children.forEach(function(a){var c=a.clone(this.mainController);c.templateGUID=b.get(a.templateGUID),c.parent=d,d.children.push(c)},this),d}},{key:"cloneConnector",value:function(a,b,c,d,e){var f=h();c.push(f);var g=new Map;a.children.forEach(function(a){var b=h();g.set(a.templateGUID,b)},this);var i=this.cloneTemplateConnector(f,g,a,e);i.offset(d),b.forEach(function(b){var c=this.design.findInstance(b,a.templateGUID),d=this.cloneConnectorInstance(f,g,c);d.children.forEach(function(a){this.addDesignInstance(b,a.templateGUID,a)},this),this.addDesignInstance(b,f,d)},this),i.children.forEach(function(a){this.addTemplateObject(a.templateGUID,a)},this),this.addTemplateObject(f,i),b.forEach(function(b){var c=this.design.findInstance(b,f);a.pins.forEach(function(a,b){var d=c.getPinInstance(b);this.netlistController.addPin(d),this.netlistController.addConnectorLink(d),this.netlistController.connect(d,c.connectorHub,d)},this)},this)}},{key:"attachModifyInput",value:function(a,b,d,e){var f=this,g=!0;a.validator=function(a,b){var e=!0,h=void 0;g||(d&&f.design.getConnectorHub(a,d.connectorHub.connectorType)?e=!0:"0"===a?(h=i.i18n.translate('Connect a ground symbol for net "0"').fetch(),e=!1):d.connectorHub.connectorID&&a.toLowerCase()!==d.connectorHub.connectorID.toLowerCase()&&f.design.netlist.netExists(a)?void 0!==f.design.getConnectorHub(a,d.connectorHub.connectorType)||(h=i.i18n.translate('Connector ID "%1$s" conflicts with an existing net').fetch(a),e=!1):(e=c(a))||(h=i.i18n.translate('Invalid connector ID "%1$s"').fetch(a))),g=!1,b({valid:e,errorMessage:h})},a.value=d.connectorHub.connectorID,a.onValueChange=function(c){this.valid&&function(){var g=void 0!==f.design.getConnectorHub(c,d.connectorHub.connectorType),h=function(){f.undo.startAction(i.i18n.translate("connector ID change.").fetch()),g&&c.toLowerCase()!==d.connectorHub.connectorID.toLowerCase()?f.mergeConnectors(d,c):(f.design.netlistController.renameNet(d.connectorHub.connectorID,c),b().sheetTemplateController.wiringController.ensureConnectorIDsMatchNetName(d.connectorHub,c)),a.value=d.connectorHub.connectorID,f.undo.finishAction(!1)},j=function(){f.undo.startAction(i.i18n.translate("connector ID change.").fetch()),f.splitConnectorStartingAt(d,c),a.value=d.connectorHub.connectorID,f.undo.finishAction(!1)};d.connectorHub.connectors.length>1&&c.toLowerCase()!==d.connectorHub.connectorID.toLowerCase()?(e.onYes=h,e.onNo=j,e.open()):h()}()},a.oninput=function(){}}}]),b}(j),a("default",m)}}}),a.register("2b",["1d","1e","26","27","28","2a"],function(a,b){"use strict";var c,d,e,f,g,h,i;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){i=function(a){function b(){return c(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return f(b,a),d(b,[{key:"addJunction",value:function(a){var b=void 0;if(a){b=g();var c=this.mainController.createTemplateJunction(b,a.point);this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID).forEach(function(a){var c=this.mainController.createJunctionInstance(a,b);this.addDesignInstance(a,b,c),this.netlistController.addJunction(c)},this),this.addTemplateObject(b,c)}return b}},{key:"cloneTemplateJunction",value:function(a,b){var c=b.clone(this.mainController,{x:b.point.x,y:b.point.y});return c.templateGUID=a,c}},{key:"cloneJunctionInstance",value:function(a,b){var c=b.clone(this.mainController);return c.templateGUID=a,c.ID=g(),c}},{key:"cloneJunction",value:function(a,b,c,d,e){var f=g();c.push(f);var h=this.cloneTemplateJunction(f,a,e);h.offset(d),b.forEach(function(b){var c=this.design.findInstance(b,a.templateGUID),d=this.cloneJunctionInstance(f,c);this.addDesignInstance(b,f,d),this.netlistController.addJunction(d)},this),this.addTemplateObject(f,h)}}]),b}(h),a("default",i)}}}),a.register("2c",["1d","1e","26","27","2d","16","28","29","2e","2f","30","22","21","31","32","2a","33","23","34"],function(a,b){"use strict";function c(){this.design.probeController.addProbe(this.probeInstance)}function d(){this.design.probeController.removeProbe(this.probeInstance)}function e(){this.design.probeController.addProbe(this.probeInstance)}function f(){this.design.probeController.removeProbe(this.probeInstance)}function g(){this.sheetTemplate.changeProbeState(this.sheetTemplate.getObject(this.templateGUID),this.oldState)}function h(){this.sheetTemplate.changeProbeState(this.sheetTemplate.getObject(this.templateGUID),this.newState)}function i(){S(this.probeInstance,this.oldProbeExpression,this.design)}function j(){S(this.probeInstance,this.newProbeExpression,this.design)}function k(){T(this.probeInstance,this.oldSource,this.design)}function l(){T(this.probeInstance,this.newSource,this.design)}function m(a,b){a.sort(function(a,c){var d=b.sheetTemplate.getObject(a.templateGUID),e=b.sheetTemplate.getObject(c.templateGUID);return d&&d.probeType===G.PROBE_REFERENCE?-1:e&&e.probeType===G.PROBE_REFERENCE?1:0}),a.forEach(function(a){var c=b.sheetTemplate,d=c.getObject(a.templateGUID);if(d){var e=d.probeType===G.PROBE_REFERENCE,f=b.probeController.getProbeStateAtPoint({x:d.matrix.e,y:d.matrix.f},d);e||(f.disabled=b.probeController.getProbeStateBasedOnReference(c.getObject(a.templateGUID),f.disabled)),b.design.probeController.refreshProbeVariables(a,b.sheetTemplate,b.design.simulationController.pinInfoList),c.changeProbeState(d,f)}})}function n(a,b,c){var d=void 0;return b?b.push(a):b=[a],c.probeData.probes.forEach(function(c){if(-1!==(d=c.probeRefs.indexOf(a))){var e=a.probeRefs.indexOf(c);c.probeRefs.splice(d,1),b.push(c),-1!==e&&a.probeRefs.splice(e,1)}}),b}function o(a,b,c){return c?c.push(a):c=[a],b.length&&1===b.length?(a.probeRefs.push(b[0]),b[0].probeRefs.push(a),c.push(b[0])):b.length>1?b.forEach(function(b){b.probeRefs.push(a),a.probeRefs.push(b),c.push(b)}):b&&0!==b.length&&(a.probeRefs.push(b),b.probeRefs.push(a),c.push(b)),c}function p(a,b,c){var d=c.sheetTemplate,e=[];e=n(a,void 0,c.design),b&&(e=o(a,b,e)),e.forEach(function(a){d.updateProbeInstanceState(d.getObject(a.templateGUID))}),m(e,c)}function q(a,b){if(!1===a.probeData.probesVarRefreshDisabled.has(b))a.probeData.probesVarRefreshDisabled.set(b,1);else{var c=a.probeData.probesVarRefreshDisabled.get(b);a.probeData.probesVarRefreshDisabled.set(b,++c)}}function r(a,b){if(a.probeData.probesVarRefreshDisabled.has(b)){var c=a.probeData.probesVarRefreshDisabled.get(b);1===c?a.probeData.probesVarRefreshDisabled.delete(b):a.probeData.probesVarRefreshDisabled.set(b,--c)}}function s(a,b,c){var d=c.sheetTemplate,e=[];b&&(e=o(a,b)),e.forEach(function(a){d.updateProbeInstanceState(d.getObject(a.templateGUID))}),m(e,c)}function t(a,b){b&&function(){var c=b.sheetTemplate,d=n(a,void 0,b.design);d.forEach(function(a){c.updateProbeInstanceState(c.getObject(a.templateGUID))}),m(d,b)}()}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U;return{setters:[function(a){u=a.default},function(a){v=a.default},function(a){w=a.default},function(a){x=a.default},function(a){y=a.default},function(a){z=a.constrainPointToPath},function(a){A=a.default},function(a){B=a.default},function(a){C=a.default},function(a){D=a.isTemplateJunction,E=a.isTemplateWire},function(a){F=a.default},function(a){G=a.default},function(a){H=a.default},function(a){I=a.changeSymbol},function(a){J=a.default},function(a){K=a.default},function(a){L=a.SOCKET_STATES},function(a){M=a.sourceType,N=a.defaultNetworkAddress,O=a.defaultUsbAddress},function(a){P=a.MultisimDeviceState}],execute:function(){Q=function(a,b,c){a.file=b,c.listeners.notifyListeners(F.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},R=function(a,b,c,d){switch(b){case M.url:a.url=c,a.connectionTarget={url:c,connectionId:c};break;case M.network:a.network=c,a.connectionTarget={network:N,deviceCode:c,connectionId:N+"-"+c};break;case M.usb:a.usb=c,a.connectionTarget={usb:O,connectionId:O}}d.listeners.notifyListeners(F.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},S=function(a,b,c){a.expression=b,a.displayExpression="...",a.spiceExpression="0",c.listeners.notifyListeners(F.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},T=function(a,b,c){a.source=b,c.listeners.notifyListeners(F.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]}),c.listeners.notifyListeners(F.SOURCE_CHANGED,a)},U=function(a){function b(){return u(this,b),w(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return x(b,a),v(b,[{key:"addToProbeController",value:function(a){this.design.probeController.addProbe(a),this.undo.addStep({undo:d,redo:c,design:this.design,probeInstance:a})}},{key:"removeFromProbeController",value:function(a){this.removeProbeReference(a),this.design.probeController.removeProbe(a),this.undo.addStep({undo:e,redo:f,design:this.design,probeInstance:a})}},{key:"addProbe",value:function(a){var b=this,c=void 0;return a&&function(){var d=a.probeType===G.PROBE_EXPRESSION,e=a.probeType===G.PROBE_DATA,f=d||e;c=A();var g=b.mainController.createTemplateProbe(c,a.point,a.fragment,a.probeType);g.disabled=a.probeState.disabled,g.vertical=a.probeState.vertical;var h=A(),i=b.mainController.createTemplateProbeText(h,{x:0,y:0},!0);g.children.push(i),i.parent=g;var j="center";f&&(j="left");var k=A(),l=b.mainController.createTemplateText(k,{x:0,y:0},!0,j,!1,null);l.updateView=b.mainController.probeIdTextViewControllerUpdateHandler,g.children.push(l),l.parent=g;var m=null,n=null;d&&(m=A(),n=b.mainController.createTemplateText(m,{x:0,y:0},!0,j,!1,null),g.children.push(n),n.parent=g);var o=null,p=null;e&&(o=A(),p=b.mainController.createTemplateText(o,{x:0,y:0},!0,j,!1,null),g.children.push(p),p.parent=g),b.design.getContextsOfTemplate(b.sheetTemplate.sheetGUID).forEach(function(b){var f=this.design.generateNextAvailableProbeID(g.probeType),i=this.mainController.createProbeInstance(b,c,f,!1);i.plot.color=y.cloneDeep(a.color)||i.plot.color,this.addDesignInstance(b,c,i);var j=this.mainController.createProbeTextInstance(b,h,"measurements",i);this.addDesignInstance(b,h,j);var l=this.mainController.createTextInstance(b,k,"probeID",i);if(this.addDesignInstance(b,k,l),e&&p){var q=this.mainController.createTextInstance(b,o,i.source===M.file?"file":i.source===M.url?"url":i.source===M.network?"network":"usb",i);this.addDesignInstance(b,o,q)}if(d&&n){var r=this.mainController.createTextInstance(b,m,"probeExpression",i);this.addDesignInstance(b,m,r)}this.addToProbeController(i)},b),b.addTemplateObject(h,i),b.addTemplateObject(k,l),d?b.addTemplateObject(m,n):e&&b.addTemplateObject(o,p),b.addTemplateObject(c,g)}(),c}},{key:"cloneTemplateProbe",value:function(a,b,c){var d=c.clone(this.mainController);return d.templateGUID=a,c.children.forEach(function(a){var c=a.clone(this.mainController);c.templateGUID=b.get(a.templateGUID),d.children.push(c),c.updateView=this.mainController.probeIdTextViewControllerUpdateHandler,c.parent=d},this),d}},{key:"cloneProbeInstance",value:function(a,b,c,d){var e=c.clone(this.mainController),f=this.sheetTemplate.getObject(c.templateGUID).probeType;if(e.templateGUID=a,e.probeID=d,c.children.forEach(function(a){var c=a.clone(this.mainController);c.templateGUID=b.get(a.templateGUID),c.parent=e,e.children.push(c)},this),e.probeRefs=[],f!==G.PROBE_REFERENCE&&c.probeRefs[0]){var g=c.probeRefs[0];this.addProbeReference(e,g)}return f===G.PROBE_DATA&&(c.file&&(e.externalData=c.externalData,e.externalDataCurrentChannelIndex=c.externalDataCurrentChannelIndex,e.file=c.file,e.fileChannelName=c.fileChannelName,e.fileChecksum=c.fileChecksum,e.fileSize=c.fileSize),c.url&&(e.url=c.url,e.externalURLData=c.externalURLData,e.externalURLDataCurrentChannelIndex=c.externalURLDataCurrentChannelIndex,e.urlChannelName=c.urlChannelName),c.network&&(e.network=c.network,e.externalNetworkData=c.externalNetworkData,e.externalNetworkDataCurrentChannelIndex=c.externalNetworkDataCurrentChannelIndex,e.networkChannelName=c.networkChannelName),c.usb&&(e.usb=c.usb,e.externalUsbData=c.externalUsbData,e.externalUsbDataCurrentChannelIndex=c.externalUsbDataCurrentChannelIndex,e.usbChannelName=c.usbChannelName)),e}},{key:"updateProbeEnableStatus",value:function(a){var b=this,c=[];a?"string"==typeof a?c=this.design.probeController.getProbes().filter(function(b){return b.probeID===a}):c.push(a):c=this.design.probeController.getProbes();var d=function(a,b,c){var d=a.getAnalysisType(),e=!1;return b===H.Interactive||b===H.Transient?e=d===H.Interactive||d===H.Transient||d===H.PARAM_SWEEP&&"time"===a.getXAxisType():b===H.AC?e=d===H.AC||d===H.PARAM_SWEEP&&"frequency"===a.getXAxisType():b===H.DC_SWEEP?e=d===H.DC_SWEEP&&c.xAxisType===a.getXAxisType():b===H.PARAM_SWEEP?e=c.selectedAnalysisType===H.Transient?d===H.Interactive||d===H.Transient||d===H.PARAM_SWEEP&&"time"===a.getXAxisType():c.selectedAnalysisType===H.AC?d===H.AC||d===H.PARAM_SWEEP&&"frequency"===a.getXAxisType():d===H.PARAM_SWEEP:b===H.DC&&(e=d===H.DC),e},e=this.design.simulationController.activeAnalysis,f=this.design.simulationController.getSimulationSettings(e);c.forEach(function(a){var c=b.sheetTemplate.getObject(a.templateGUID);if(c&&c.probeType===G.PROBE_DATA){var g=document.querySelector("g[id='"+c.templateGUID+"'] .nims_graphics");g&&(a.source===M.file?d(a,e,f)?(g.removeAttribute("disabled"),c.disabled=!1):(g.setAttribute("disabled","disabled"),c.disabled=!0):a.connectionState===L.CONNECTED&&e===H.Interactive?(g.removeAttribute("disabled"),c.disabled=!1):(g.setAttribute("disabled","disabled"),c.disabled=!0))}})}},{key:"isProbeDisabled",value:function(a){return this.sheetTemplate.getObject(a.templateGUID).disabled}},{key:"disconnectStreamingProbe",value:function(a,b){a.getExternalDataType()===a.EXTERNAL_DATA_TYPE.EDT_STREAM&&(this.design.simulationController.cancelConnectStreamingSource(a.connectionTarget,a.probeID),a.connectionState!==L.CANCELLED&&(a.connectionError=b||""),a.connectionState=L.NOT_CONNECTED,a.initialExternalData(),this.updateProbeEnableStatus(a),this.design.simulationController.listeners.notifyListeners(J.StreamConnectionChange,{connectionState:a.connectionState,probeInstance:a}))}},{key:"connectStreamingProbe",value:function(a){var b=this;a.getExternalDataType()===a.EXTERNAL_DATA_TYPE.EDT_STREAM&&(a.connectionTarget.onClose=function(){a.connectionState===L.CONNECTED&&b.disconnectStreamingProbe(a,B.i18n.translate("Device disconnected.").fetch())},this.design.simulationController.connectStreamingSource(a.connectionTarget,a.probeID,function(c){if(c.error)a.connectionState!==L.CANCELLED?(b.disconnectStreamingProbe(a,B.i18n.translate("Connection failed.").fetch()),window.console.log("Fail to connect a device.("+c.error+")")):b.disconnectStreamingProbe(a);else if(a.connectionState===L.CANCELLED)b.disconnectStreamingProbe(a);else{a.connectionError="",a.connectionState=L.CONNECTED;var d=c.instruments.filter(function(a){return/^osc|scope$/i.test(a.name)}).reduce(function(a,b){return a.concat(b.channels.filter(function(a){return a.input}).map(function(a){return{sourceFormat:c.device,analysisType:H.Transient,name:b.name.charAt(0).toUpperCase()+b.name.slice(1)+" Ch "+a.name,input:a.input,output:a.output,instrument:b.name,channel:a.name,dataSignalType:"voltage",relativeX:!0}}))},[]);switch(a.source){case M.url:a.externalURLData=d;break;case M.network:a.externalNetworkData=d;break;case M.usb:a.externalUsbData=d}b.updateProbeEnableStatus(a),b.design.simulationController.listeners.notifyListeners(J.StreamConnectionChange,{connectionState:a.connectionState,probeInstance:a})}}))}},{key:"cancelconnectStreamingProbe",value:function(a){a.getExternalDataType()===a.EXTERNAL_DATA_TYPE.EDT_STREAM&&(this.design.simulationController.cancelConnectStreamingSource(a.connectionTarget),a.connectionTarget.url&&this.disconnectStreamingProbe(a))}},{key:"cloneProbe",value:function(a,b,c,d,e){var f=A();c.push(f);var g=new Map;a.children.forEach(function(a){var b=A();g.set(a.templateGUID,b)},this);var h=this.cloneTemplateProbe(f,g,a);h.offset(d),h.probeType=a.probeType,b.forEach(function(b){var c=this.design.findInstance(b,a.templateGUID),d=this.design.generateNextAvailableProbeID(a.probeType,c.probeID),h=this.cloneProbeInstance(f,g,c,d);h.plot.color=(e&&e.hasOwnProperty(a.templateGUID)?e[a.templateGUID].color:null)||h.plot.color,h.children.forEach(function(a){this.addDesignInstance(b,a.templateGUID,a)},this),this.addDesignInstance(b,f,h),this.addToProbeController(h),c.connectionState===L.CONNECTED&&(h.connectionState=L.CONNECTING,this.connectStreamingProbe(h))},this),h.children.forEach(function(a){this.addTemplateObject(a.templateGUID,a)},this);var i=this.getProbeStateAtPoint({x:h.matrix.e,y:h.matrix.f},h);h.disabled=i.disabled,h.vertical=i.vertical,this.addTemplateObject(f,h)}},{key:"probeSortByReference",value:function(a){a.sort(function(a,b){return a.probeType===G.PROBE_REFERENCE?-1:b.probeType===G.PROBE_REFERENCE?1:0})}},{key:"updateAllProbeState",value:function(){var a=this.sheetTemplate.getTemplateProbes(),b=this;b.probeSortByReference(a),b.design.probeController.clearProbeCaches(),a.forEach(function(a){var b=this.getProbeStateAtPoint({x:a.matrix.e,y:a.matrix.f},a);this.updateProbeState(a,b)},this)}},{key:"updateProbeState",value:function(a,b){var c=this.getProbeStateBasedOnReference(a);(b.disabled||c)&&(b.disabled=!0),this.undo.hasValidAction()&&this.undo.addStep({sheetTemplate:this.sheetTemplate,undo:g,redo:h,templateGUID:a.templateGUID,oldState:{disabled:a.disabled,vertical:a.vertical},newState:b});var d=this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID);this.sheetTemplate.changeProbeState(a,b),this.design.probeController&&this.design.simulationController&&d.forEach(function(b){var c=this.design.findInstance(b,a.templateGUID);this.design.probeController.refreshProbeVariables(c,this.sheetTemplate,this.design.simulationController.pinInfoList)},this),this.sheetTemplate.listeners.notifyListeners(C.SHEET_OBJECTS_CHANGED,{added:[],modified:[a.templateGUID],removed:[]})}},{key:"checkWiresConnectedToComponent",value:function(a){var b=this,c=!1,d=[];a.forEach(function(a){d.push(b.design.findInstancesOfTemplate(a.templateGUID)[0])});var e=this.netlistController.getWireTerminals(d[0]);return this.netlistController.forEachConnectedTerminal(e.from,function(a){a.pin&&(c=!0)}),c}},{key:"getProbeStateAtPoint",value:function(a,b){var c=b.probeType,d=this.sheetTemplate.objectLookup.getObjectsAtPoint(a.x,a.y),e=d.filter(function(a){return E(a)},this),f=d.filter(function(a){return D(a)},this),g=!1,h=!1;if(c===G.PROBE_EXPRESSION)g=!this.design.findInstancesOfTemplate(b.templateGUID).length||!this.design.findInstancesOfTemplate(b.templateGUID)[0].expression.trim();else if(c===G.PROBE_DATA){var i=this.design.findInstancesOfTemplate(b.templateGUID)[0];i&&(g=i.source===M.file?!(this.design.simulationController.activeAnalysis===i.getAnalysisType()||"interactive"===this.design.simulationController.activeAnalysis&&"transient"===i.getAnalysisType()):!(i.connectionState===L.CONNECTED&&"interactive"===this.design.simulationController.activeAnalysis))}else if(0===e.length||e.length>1&&0===f.length)g=!0;else{this.checkWiresConnectedToComponent(e)||(g=!0);var j=z(e[0].path,a);j&&j.segment&&(h=j.segment.start.x===j.segment.end.x)}return g||c!==G.PROBE_CURRENT&&c!==G.PROBE_VOLTAGE_CURRENT||(f.length>0||e.length&&this.design.probeController.currentController.probeIsOnLoop(e[0],a,this.design,this.sheetTemplate))&&(g=!0),{disabled:g,vertical:h}}},{key:"getProbeStateBasedOnReference",value:function(a,b){var c=this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID),d=!1;return b&&(d=b),c.forEach(function(b){var c=this.design.findInstance(b,a.templateGUID);if(a.probeType!==G.PROBE_REFERENCE&&c&&c.probeRefs&&c.probeRefs.length>0){var e=this.sheetTemplate.getObject(c.probeRefs[0].templateGUID);e&&e.disabled&&(d=!0)}},this),d}},{key:"showProbeInstantaneousValues",value:function(a,b){a.displayInstantaneous=b;var c=this.sheetTemplate.getObject(a.templateGUID);void 0!==c.probeType&&this.sheetTemplate.updateProbeInstanceState(c)}},{key:"showProbePeriodicMeasurements",value:function(a,b){a.displayPeriodic=b;var c=this.sheetTemplate.getObject(a.templateGUID);void 0!==c.probeType&&this.sheetTemplate.updateProbeInstanceState(c)}},{key:"showDcProbeBiasPoints",value:function(a,b){a.displayDc=b;var c=this.sheetTemplate.getObject(a.templateGUID);void 0!==c.probeType&&this.sheetTemplate.updateProbeInstanceState(c)}},{key:"showStreamToMeasurementsLive",value:function(a,b){var c=this;if(a.streamToMeasurementsLive!==b){a.streamToMeasurementsLive=b;var d=this.sheetTemplate.getObject(a.templateGUID);void 0!==d.probeType&&this.sheetTemplate.updateProbeInstanceState(d),this.design.listeners.notifyListeners(F.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]});if(!b&&!this.design.probeController.getProbes().find(function(a){return c.design.probeController.getProbeType(a)===G.PROBE_VOLTAGE&&a.streamToMeasurementsLive}))return void this.design.multisimDeviceController.disconnect();b&&this.design.multisimDeviceController.state===P.Disabled&&this.design.multisimDeviceController.doConnect(),this.design.multisimDeviceController.sendStreamProbesInformation()}}},{key:"reverseProbeDirection",value:function(a,b){var c=this;a.reversed!==b&&function(){c.undo.startAction(B.i18n.translate("Flip current measurement change.").fetch());var b=function(b,c,d){b.reversed=!b.reversed;var e=c.getObject(b.templateGUID);void 0!==e.probeType&&(d.probeController.refreshProbeVariables(a,c,d.simulationController.pinInfoList),c.updateProbeInstanceState(e))};c.undo.addStep({undo:function(){b(this.probeInstance,this.sheetTemplate,this.design)},redo:function(){b(this.probeInstance,this.sheetTemplate,this.design)},probeInstance:a,sheetTemplate:c.sheetTemplate,design:c.design}),b(a,c.sheetTemplate,c.design),c.undo.finishAction(!1)}()}},{key:"getTotalDataProbeFileSize",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=b,d=0;return this.design.probeController.getProbes().forEach(function(b){!b.fileSize||a&&-1!=a.findIndex(function(a){return a===b})||-1===c.findIndex(function(a){return a===b.fileChecksum})&&(c.push(b.fileChecksum),d+=b.fileSize)}),d}},{key:"changeFileName",value:function(a,b){Q(a,b,this.design)}},{key:"changeConnectName",value:function(a,b,c){R(a,b,c,this.design)}},{key:"changeSource",value:function(a,b){this.undo.startAction(B.i18n.translate("change data plotter source.").fetch()),this.undo.addStep({undo:k,redo:l,oldSource:a.source,newSource:b,probeInstance:a,design:this.design}),T(a,b,this.design),this.undo.finishAction(!1)}},{key:"changeChannel",value:function(a){this.design.listeners.notifyListeners(F.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})}},{key:"changeProbeExpression",value:function(a,b){a.expression!==b&&(this.undo.startAction(B.i18n.translate("probe expression change.").fetch()),this.undo.addStep({undo:i,redo:j,oldProbeExpression:a.expression,newProbeExpression:b,probeInstance:a,design:this.design}),S(a,b,this.design),this.undo.finishAction(!1))}},{key:"changeProbeType",value:function(a,b,c){var d=this;a.probeType!==c&&function(){d.undo.startAction(B.i18n.translate("Change probe type").fetch());var e=function(a,b,c,d){a.probeType=b;var e=d.probeController.getProbeStateAtPoint({x:a.matrix.e,y:a.matrix.f},a);d.sheetTemplate.changeProbeState(a,e),c.findInstancesOfTemplate(a.templateGUID).map(function(a){return a.contextGUID}).forEach(function(b){c.listeners.notifyListeners(F.DESIGN_CHANGED,{contextGUID:b,added:[],modified:[a.templateGUID],removed:[]})},this)},f=[];b.probeRefs.forEach(function(a){f.push(a)}),d.undo.addStep({undo:function(){e(this.probeTemplate,this.oldProbeType,this.design,this.sheetTemplateController),s(this.probeInstance,this.probeToReference,this.sheetTemplateController)},redo:function(){t(this.probeInstance,this.sheetTemplateController),e(this.probeTemplate,this.newProbeType,this.design,this.sheetTemplateController)},oldProbeType:a.probeType,newProbeType:c,design:d.design,probeTemplate:a,sheetTemplateController:d.mainController,probeInstance:b,probeToReference:f}),e(a,c,d.design,d.mainController),t(b,d.mainController),d.undo.finishAction(!1)}()}},{key:"addProbeReference",value:function(a,b){this.undo.addStep({redo:function(){s(this.probeInstance,this.probeToReference,this.sheetTemplateController)},undo:function(){t(this.probeInstance,this.sheetTemplateController)},probeInstance:a,probeToReference:b,sheetTemplateController:this.mainController}),s(a,b,this.mainController)}},{key:"removeProbeReference",value:function(a){var b=[];a.probeRefs.forEach(function(a){b.push(a)}),this.undo.addStep({undo:function(){s(this.probeInstance,this.probeToReference,this.sheetTemplateController)},redo:function(){t(this.probeInstance,this.sheetTemplateController)},probeInstance:a,probeToReference:b,sheetTemplateController:this.mainController}),t(a,this.mainController)}},{key:"changeProbeReferenceHandler",value:function(a,b,c){var d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];b!==c&&(d&&this.undo.startAction(B.i18n.translate("probe reference changed.").fetch()),this.undo.addStep({undo:function(){r(this.sheetTemplateController.design,this.probeInstance),p(this.probeInstance,this.prevProbeReference,this.sheetTemplateController)},redo:function(){q(this.sheetTemplateController.design,this.probeInstance),p(this.probeInstance,this.probeToReference,this.sheetTemplateController)},probeInstance:a,prevProbeReference:c,probeToReference:b,sheetTemplateController:this.mainController}),q(this.design,a),this.design.probeController.refreshProbeVariables(a,this.sheetTemplate,this.design.simulationController.pinInfoList),p(a,b,this.mainController),d&&this.undo.finishAction(!1))}},{key:"replaceProbeImage",value:function(a,b,c,d){var e=this.design.probeController.resourceController,f=void 0;if(e.resourceInfo.length)f=e.resourceInfo.filter(function(a){return"probe"===a.type&&a.additionalData.probeType===b});else{f=[{additionalData:{probeSymbol:"resources/icons/probes/"+{voltage:"voltage.svg",current:"current.svg",voltage_and_current:"current_and_voltage.svg",expression:"expression.svg",data:"data.svg",reference:"probe_voltage_reference.svg"}[b]}}]}var g=function(a,b){c.fragment=b,I(a,b),d()};f.length>0&&function(){var b=f[0].additionalData.probeSymbol;c.currentSymbolPath!==b?e.loadSVGResource(b,function(d){d&&(g(a,d.querySelector("g").cloneNode(!0)),c.currentSymbolPath=b)}):d()}()}},{key:"changePlotProperty",value:function(a,b){var c=this;y.isEqual(a.plot,b)||function(){c.undo.startAction(B.i18n.translate("Change plot property").fetch());var d=c.sheetTemplate,e=function(b,c,e){var f=a.plot.axisRanges;a.plot=c.clone(),a.plot.axisRanges=f;var g=d.getObject(a.templateGUID);void 0!==g.probeType&&d.updateProbeInstanceState(g),e.listeners.notifyListeners(F.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})};c.undo.addStep({undo:function(){e(this.probeInstance,this.oldProperties,this.design)},redo:function(){e(this.probeInstance,this.newProperties,this.design)},probeInstance:a,design:c.design,oldProperties:a.plot.clone(),newProperties:b.clone()}),e(a,b,c.design),c.undo.finishAction(!1)}()}},{key:"changeDigitalProbeLogicLevel",value:function(a,b){var c=this,d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a.logicLevel!==b&&function(){d&&c.undo.startAction(B.i18n.translate("Change digital probe logic level").fetch());var e=function(b,c,d){b.logicLevel=c,d.listeners.notifyListeners(F.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})};c.undo.addStep({undo:function(){e(this.probeInstance,this.oldLogicLevel,this.design)},redo:function(){e(this.probeInstance,this.newLogicLevel,this.design)},probeInstance:a,design:c.design,oldLogicLevel:a.logicLevel,newLogicLevel:b}),e(a,b,c.design),d&&c.undo.finishAction(!1)}()}},{key:"changeDigitalProbeCustomLogicFamily",value:function(a,b){var c=this,d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a.customLogicFamily.equals(b)||function(){d&&c.undo.startAction(B.i18n.translate("Change digital probe custom logic family").fetch());var e=function(b,c,d){b.customLogicFamily=c.clone(),d.listeners.notifyListeners(F.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})};c.undo.addStep({undo:function(){e(this.probeInstance,this.oldCustomLogicFamily,this.design)},redo:function(){e(this.probeInstance,this.newCustomLogicFamily,this.design)},probeInstance:a,design:c.design,oldCustomLogicFamily:a.customLogicFamily.clone(),newCustomLogicFamily:b.clone()}),e(a,b,c.design),d&&c.undo.finishAction(!1)}()}},{key:"changeDigitalProbeUseDocumentLogicLevelSettings",value:function(a,b){var c=this,d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a.useDocumentLogicLevelSettings!==b&&function(){d&&c.undo.startAction(B.i18n.translate("Change digital probe use document logic level settings").fetch());var e=function(b,c,d){b.useDocumentLogicLevelSettings=c,d.listeners.notifyListeners(F.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})};c.undo.addStep({undo:function(){e(this.probeInstance,this.oldUseDocumentLogicLevelSettings,this.design)},redo:function(){e(this.probeInstance,this.newUseDocumentLogicLevelSettings,this.design)},probeInstance:a,design:c.design,oldUseDocumentLogicLevelSettings:a.useDocumentLogicLevelSettings,newUseDocumentLogicLevelSettings:b}),e(a,b,c.design),d&&c.undo.finishAction(!1)}()}}]),b}(K),a("default",U)}}}),a.register("35",["1d","1e","26","27","28","29","2a"],function(a,b){"use strict";var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){j=function(a){function b(){return c(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return f(b,a),d(b,[{key:"addText",value:function(a){var b=void 0;if(a){b=g();var c=this.mainController.createTemplateText(b,a.point,!0,a.align,a.standAlone,a.font);this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID).forEach(function(c){var d=this.mainController.createTextInstance(c,b,a.text,null);this.addDesignInstance(c,b,d)},this),this.addTemplateObject(b,c)}return b}},{key:"changeText",value:function(a,b){var c=a.getText();c!==b&&(this.design.changeText(a,b),this.undo.addStep({undo:function(){this.design.changeText(this.textInstance,this.oldText)},redo:function(){this.design.changeText(this.textInstance,this.newText)},design:this.design,textInstance:a,oldText:c,newText:b}))}},{key:"cloneTemplateText",value:function(a,b){var c=b.clone(this.mainController);return c.templateGUID=a,c}},{key:"cloneTextInstance",value:function(a,b){var c=b.clone(this.mainController);return c.templateGUID=a,c.ID=g(),c}},{key:"cloneText",value:function(a,b,c,d,e){var f=g();c.push(f);var h=this.cloneTemplateText(f,a,e);h.offset(d),b.forEach(function(b){var c=this.design.findInstance(b,a.templateGUID),d=this.cloneTextInstance(f,c);this.addDesignInstance(b,f,d)},this),this.addTemplateObject(f,h)}},{key:"attachModifyInput",value:function(a,b,c){var d=this;a.value=c.getText(),a.validator=function(a,b){var c=a,d=c.trim().length>0,e="";d||(e=h.i18n.translate("Text annotation must not be blank.").fetch(a)),b({valid:d,errorMessage:e})},a.onValueChange=function(a){b()&&this.valid&&(d.undo.startAction(h.i18n.translate("text annotation change.").fetch()),d.changeText(c,a),d.undo.finishAction(!1))}}}]),b}(i),a("default",j)}}}),a.register("36",["1d","1e","26","27","2d","16","28","37","38","2a","39"],function(a,b){"use strict";function c(){this.template.updateWirePath(this.template.getObject(this.templateGUID),m.cloneDeep(this.newPath))}function d(){this.template.updateWirePath(this.template.getObject(this.templateGUID),m.cloneDeep(this.originalPath))}function e(){var a=this.sheetTemplate.getObject(this.templateGUID).getSymbolPin(this.symbolPinID);a&&a.changeConnectionState(this.oldConnectionState)}function f(){var a=this.sheetTemplate.getObject(this.templateGUID).getSymbolPin(this.symbolPinID);a&&a.changeConnectionState(this.newConnectionState)}function g(){this.sheetTemplate.changeWireLabelVisibility(this.sheetTemplate.getObject(this.templateGUID),this.oldLabelVisibility)}function h(){this.sheetTemplate.changeWireLabelVisibility(this.sheetTemplate.getObject(this.templateGUID),this.newLabelVisibility)}var i,j,k,l,m,n,o,p,q,r,s,t,u,v;return{setters:[function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.isPointOnPath,o=a.getLongestPathSegment,p=a.distancePointToPoint},function(a){q=a.default},function(a){r=a.default},function(a){s=a.default},function(a){t=a.default},function(a){u=a.default}],execute:function(){v=function(a){function b(){return i(this,b),k(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return l(b,a),j(b,[{key:"addWire",value:function(a,b){var c=this,d=void 0,e=void 0,f=this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID),g=null,h=this,i=!1,j=[];if(a.startItem.connectType==u.PIN)d=this.getWiringConnectDataForPin(a.startItem);else if(a.startItem.connectType==u.WIRE){if(d=this.getWiringConnectDataForWire(a.startItem),a.endItem.connectType==u.WIRE&&a.startItem.templateGUID===a.endItem.templateGUID){var k=this.sheetTemplate.getObject(a.startItem.templateGUID);n(k.path,a.endItem.splitPoint)||(a.endItem.templateGUID=d.splitWireTemplateGUID)}}else a.startItem.connectType==u.JUNCTION&&(d=this.getWiringConnectDataForJunction(a.startItem));a.endItem.connectType==u.PIN?e=this.getWiringConnectDataForPin(a.endItem):a.endItem.connectType==u.WIRE?e=this.getWiringConnectDataForWire(a.endItem):a.endItem.connectType==u.JUNCTION&&(e=this.getWiringConnectDataForJunction(a.endItem)),d&&e&&function(){var k=q(),l=q(),m=q();f.forEach(function(b){function c(a){a.pinInstances.forEach(function(a){h.netlistController.getWires(a).length>0&&(i=!1)})}var f=this.mainController.createWireInstance("",b,k),g=this.mainController.createTextInstance(b,l,"netName",f),n=this.mainController.createTextInstance(b,m,"initialConditions",f),o=d.itemMap.get(b),p=e.itemMap.get(b),q=void 0;0===this.netlistController.getWires(o).length&&0===this.netlistController.getWires(p).length&&(i=!0),o.parent&&o.parent.connectorHub&&o.parent.connectorHub.connectors.forEach(c),p.parent&&p.parent.connectorHub&&p.parent.connectorHub.connectors.forEach(c),this.netlistController.addWire(f),this.netlistController.connect(o,p,f,a.mergedNetName),o.parent&&o.pinID&&(q=this.sheetTemplate.getObject(o.parent.templateGUID).getSymbolPin(o.pinID))&&this.changeTemplatePinConnectionState(q,a.startItem.templateGUID,!0),f.netName=this.netlistController.getNetNameForPin(o)||this.netlistController.getNetNameForJunction(o),this.netlistController.forAllWires(f.netName,function(a){var b=h.sheetTemplate.getObject(a.templateGUID);b&&b.isLabelVisible&&!0===b.isLabelVisible()&&(i=!0)}),p.parent&&p.pinID&&(q=this.sheetTemplate.getObject(p.parent.templateGUID).getSymbolPin(p.pinID))&&this.changeTemplatePinConnectionState(q,a.endItem.templateGUID,!0),this.addDesignInstance(b,m,n),this.addDesignInstance(b,l,g),this.addDesignInstance(b,k,f),this.netlistController.forEachConnectedTerminal(this.netlistController.getTerminal(o),function(a){a.connectable.parent&&a.connectable.parent.connectorHub&&a.connectable.parent.connectorHub.connectors.forEach(function(a){a.pinInstances.forEach(function(a){-1===j.indexOf(a)&&j.push(a)})})}),0===j.length&&j.push(o),this.ensureConnectorIDsMatchNetName(o,f.netName)},c);var n=c.mainController.createTemplateText(l,{x:0,y:0},!1,"center",!1,null),o=c.mainController.createTemplateText(m,{x:0,y:0},!1,"center",!1,null);g=c.mainController.createTemplateWire(k,a.wirePath),n.parent=g,g.children.push(n),o.parent=g,g.children.push(o),c.addTemplateObject(m,o),c.addTemplateObject(l,n),c.addTemplateObject(k,g),i&&c.sheetTemplate.netLabelsVisibility&&j.forEach(function(a){h.ensureWireLabelVisibility(a)});var p=void 0;b&&a.startItem.connectType==u.JUNCTION&&2===c.getNumberOfConnectionsForJunction(a.startItem.templateGUID)&&(p=c.mergeJunction(f,a.startItem.templateGUID),g=c.sheetTemplate.getObject(p)),b&&a.endItem.connectType==u.JUNCTION&&2===c.getNumberOfConnectionsForJunction(a.endItem.templateGUID)&&(p=c.mergeJunction(f,a.endItem.templateGUID),g=c.sheetTemplate.getObject(p)),p&&f.forEach(function(a){var b=this.netlistController.getWireTerminals(this.design.findInstance(a,p));b&&i&&(this.ensureWireLabelVisibility(b.from.connectable),this.ensureWireLabelVisibility(b.to.connectable))},c)}();var l={finalize:function(){this.probeController.updateAllProbeState()},probeController:this.mainController.probeController};return l.finalize(),this.undo.addFinalizer(l),g}},{key:"getWiringConnectDataForPin",value:function(a){var b={itemMap:new Map},c=this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID),d=void 0,e=void 0,f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=this.sheetTemplate.getObject(a.templateGUID).getSymbolPin(a.symbolPinID),m={x:l.connectionX,y:l.connectionY};return c.forEach(function(c){var l=this.design.findInstance(c,a.templateGUID),n=l.getPinInstance(a.symbolPinID),o=this.netlistController.getWires(n),p=this.netlistController.getNetNameForPin(n);if(o&&1===o.length){var r=this.design.netlist.getNet(p);d=d||q(),e=e||this.mainController.createTemplateJunction(d,m),f=f||q(),h=h||q(),j=j||q();var s=[{x:m.x,y:m.y},{x:m.x,y:m.y}];g=g||this.mainController.createTemplateWire(f,s),i=i||this.mainController.createTemplateText(h,{x:0,y:0},!1,"center",!1,null);var t={x:0,y:0};k=k||this.mainController.createTemplateText(j,t,!1,"center",!1,null);var u=this.netlistController.getWireTerminals(o[0]),v=this.mainController.createJunctionInstance(c,d),w=this.mainController.createWireInstance(p,c,f),x=this.mainController.createTextInstance(c,h,"netName",w),y=this.mainController.createTextInstance(c,j,"initialConditions",w);this.addDesignInstance(c,d,v),this.addDesignInstance(c,j,y),this.addDesignInstance(c,h,x),this.addDesignInstance(c,f,w),this.netlistController.addJunction(v,{name:p,priority:r.priority}),this.netlistController.addWire(w),this.netlistController.connect(n,v,w),u.from.connectable.pinID===a.symbolPinID&&u.from.connectable.parent===l?this.netlistController.changeWireTerminal(o[0],u.from.connectable,v):this.netlistController.changeWireTerminal(o[0],u.to.connectable,v),b.itemMap.set(c,v)}else b.itemMap.set(c,n)},this),e&&g&&i&&(this.addTemplateObject(d,e),g.children.push(i),i.parent=g,g.children.push(k),k.parent=g,this.addTemplateObject(j,k),this.addTemplateObject(h,i),this.addTemplateObject(f,g)),b}},{key:"getWiringConnectDataForJunction",value:function(a){var b={itemMap:new Map};return this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID).forEach(function(c){b.itemMap.set(c,this.design.findInstance(c,a.templateGUID))},this),b}},{key:"getWiringConnectDataForWire",value:function(a){var b={itemMap:new Map},c=this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID),d=q(),e=this.sheetTemplate.getObject(a.templateGUID),f=this.splitWire(e,a.splitPoint),g=this.mainController.createTemplateJunction(d,{x:a.splitPoint.x,y:a.splitPoint.y});return c.forEach(function(a){var c=this.design.findInstance(a,e.templateGUID),g=this.netlistController.getWireTerminals(c),h=this.mainController.createJunctionInstance(a,d),i=f?this.mainController.createWireInstance(c.netName,a,f.templateGUID):null,j=f?f.children.map(function(b,c){return this.mainController.createTextInstance(a,b.templateGUID,0===c?"netName":"initialConditions",i)},this):[],k=this.mainController.createWireInstance(c.netName,a,e.templateGUID),l=[];c.children.forEach(function(a){var b=a.clone(this.mainController);b.parent=k,k.children.push(b),l.push(b)},this);var m=this.design.netlist.getNet(c.netName);this.netlistController.addJunction(h,{name:c.netName,priority:m.priority}),this.netlistController.addWire(k),this.netlistController.connect(g.from.connectable,h,k),i&&(this.netlistController.addWire(i),this.netlistController.connect(h,g.to.connectable,i)),this.netlistController.disconnect(c),this.netlistController.removeWire(c),this.addDesignInstance(a,d,h),this.removeDesignInstance(a,e.templateGUID,this.design.findInstance(a,e.templateGUID)),c.children.forEach(function(b){this.removeDesignInstance(a,b.templateGUID,b)},this),f&&i&&(j.forEach(function(b){this.addDesignInstance(a,b.templateGUID,b)},this),this.addDesignInstance(a,f.templateGUID,i)),l.forEach(function(b){this.addDesignInstance(a,b.templateGUID,b)},this),this.addDesignInstance(a,e.templateGUID,k),b.itemMap.set(a,h)},this),f&&(f.children.forEach(function(a){this.addTemplateObject(a.templateGUID,a)},this),this.addTemplateObject(f.templateGUID,f),b.splitWireTemplateGUID=f.templateGUID),this.addTemplateObject(d,g),b}},{key:"splitWire",value:function(a,b){var c=q(),d=q(),e=q(),f=a.getPathAfterPoint(b),g=void 0;if(f.secondPath.length>1){g=this.mainController.createTemplateWire(c,f.secondPath);var h=this.mainController.createTemplateText(d,{x:0,y:0},!1,"center",!1,null);g.children.push(h),h.parent=g;var i=this.mainController.createTemplateText(e,{x:0,y:0},!1,"center",!1,null);g.children.push(i),i.parent=g,this.changeWirePath(a,f.firstPath)}return g}},{key:"mergeJunction",value:function(a,b){var c=void 0,d=void 0,e=void 0,f=void 0,g=void 0;return a.forEach(function(a,h){var i=this.netlistController.getWires(this.design.findInstance(a,b)),j=i[0],k=i[1];if(0===h){if(c=j.templateGUID,d=k.templateGUID,e=this.sheetTemplate.getObject(c),f=this.sheetTemplate.getObject(d),this.changeWireLabelVisibility(e,e.isLabelVisible()||f.isLabelVisible()),2===e.path.length&&e.path[0].x==e.path[1].x&&e.path[0].y==e.path[1].y){var l=c;c=d,d=l,l=e,e=f,f=l}g=e.getMergedWirePath(f.path)}var m=this.netlistController.getWireTerminals(j.templateGUID===c?j:k),n=this.netlistController.getWireTerminals(j.templateGUID===c?k:j),o=void 0,p=void 0;m.from.connectable===this.design.findInstance(a,b)?(o=n.from!==m.from?n.from:n.to,p=m.to):(o=m.from,p=n.from!==m.to?n.from:n.to);var q=this.mainController.createWireInstance(j.netName,a,c);this.design.findInstance(a,c).children.forEach(function(a){var b=a.clone(this.mainController);b.parent=q,q.children.push(b)},this),this.netlistController.addWire(q),this.netlistController.connect(o.connectable,p.connectable,q),this.netlistController.disconnect(j),this.netlistController.disconnect(k),this.netlistController.removeWire(j),this.netlistController.removeWire(k),j.children.forEach(function(b){this.removeDesignInstance(a,b.templateGUID,b)},this),this.removeDesignInstance(a,j.templateGUID,j),k.children.forEach(function(b){this.removeDesignInstance(a,b.templateGUID,b)},this),this.removeDesignInstance(a,k.templateGUID,k),q.children.forEach(function(b){this.addDesignInstance(a,b.templateGUID,b)},this),this.addDesignInstance(a,c,q);var r=this.design.findInstance(a,b);this.netlistController.removeJunction(r),this.removeDesignInstance(a,b,r)},this),this.removeTemplateObject(b),this.sheetTemplate.getObject(d).children.forEach(function(a){this.removeTemplateObject(a.templateGUID)},this),this.removeTemplateObject(d),this.changeWirePath(e,g),c}},{key:"removeNetlistItemsAndSimplify",value:function(a,b,c,d){function e(a){return-1!==k.indexOf(a)}function f(a){k.push(a)}function g(a,f){var g=this.sheetTemplate.getObject(a);if(g){var h={contexts:b,templateGUID:a,deleteQueueSearch:e,savedJunctions:l,cleanup:c,itemsToProcessForLabelVisibility:m,extraData:d};g.netlistRemove(h,f)}}function h(a){var d=this,g=this.design.findInstance(b[0],a),h=this.netlistController.getNumberOfConnectionsForJunction(g);if(0===h&&!1===e(a))this.removeJunction({contexts:b,templateGUID:a,deleteQueueSearch:e,savedJunctions:l,cleanup:c});else{var i=!1;this.netlistController.getWires(g).forEach(function(a){var b=this.netlistController.getWireTerminals(a);b&&b.from===b.to&&(i=!0,-1===k.indexOf(a.templateGUID)&&f(a.templateGUID))},this),i||(2===h?function(){var c=d.mergeJunction(b,a);c&&!1===e(c)&&(b.forEach(function(a){var b=this.design.findInstance(a,c),d=void 0;b&&(d=this.netlistController.getWireTerminals(b)),d&&(d.from===d.to?(i=!0,m.add(d.from)):(m.add(d.from),m.add(d.to)))},d),i&&f(c))}():b.forEach(function(b){m.add(this.netlistController.getTerminal(this.design.findInstance(b,a)))},this))}}function i(a){var b=n.sheetTemplate.getObject(a.templateGUID);b&&b.isLabelVisible&&!0===b.isLabelVisible()&&(q=!0)}function j(a,c){var d=o.getNumberOfConnectionsForJunction(p.findInstance(b[0],a)),e=o.getNumberOfConnectionsForJunction(p.findInstance(b[0],c));return d>e?-1:e>d?1:0}for(var k=a.slice(),l=void 0,m=new Set,n=this,o=this.netlistController,p=this.design,q=!1;k.length>0;){l=[];var r=p.findInstance(b[0],k[0]);r&&(r.netName?o.forAllWires(r.netName,i):r.pinInstances&&r.pinInstances.forEach(function(a){o.forAllWires(o.getNetNameForPin(a),i)})),k.forEach(g,this),k=[],l.sort(j),l.forEach(h,this)}m.forEach(function(a){var b=a.connectable;q&&this.ensureWireLabelVisibility(b),this.ensureConnectorIDsMatchNetName(a.connectable,this.design.netlist.getNetNameForItem(b))},this)}},{key:"removeWire",value:function(a){var b=a.contexts,c=a.templateGUID,d=a.deleteQueueSearch,e=a.cleanup,f=a.savedJunctions,g=a.itemsToProcessForLabelVisibility,h=this.design.netlist;b.forEach(function(a,b){var i=this.design.findInstance(a,c);i.children.forEach(function(b){this.removeDesignInstance(a,b.templateGUID,b)},this),this.removeDesignInstance(a,c,i);var j=this.netlistController.disconnect(i,function(a,b){t.decideNames(a,b,h)});this.netlistController.removeWire(i);var k=void 0;j.from.connectable.pinID?(this.netlistController.getNetNameForPin(j.from.connectable)||(k=this.sheetTemplate.getObject(j.from.connectable.parent.templateGUID).getSymbolPin(j.from.connectable.pinID))&&this.changeTemplatePinConnectionState(k,j.from.connectable.parent.templateGUID,!1),0===b&&g.add(j.from)):e&&j.from.connectable.templateGUID&&!1===d(j.from.connectable.templateGUID)&&0===b&&-1===f.indexOf(j.from.connectable.templateGUID)&&f.push(j.from.connectable.templateGUID),j.to.connectable.pinID?(this.netlistController.getNetNameForPin(j.to.connectable)||(k=this.sheetTemplate.getObject(j.to.connectable.parent.templateGUID).getSymbolPin(j.to.connectable.pinID))&&this.changeTemplatePinConnectionState(k,j.to.connectable.parent.templateGUID,!1),0===b&&g.add(j.to)):e&&j.to.connectable.templateGUID&&!1===d(j.to.connectable.templateGUID)&&0===b&&-1===f.indexOf(j.to.connectable.templateGUID)&&f.push(j.to.connectable.templateGUID)},this),this.sheetTemplate.getObject(c).children.forEach(function(a){this.removeTemplateObject(a.templateGUID)},this),this.removeTemplateObject(c)}},{key:"removeJunction",value:function(a){var b=a.contexts,c=a.templateGUID,d=a.deleteQueueSearch,e=a.cleanup,f=a.savedJunctions,g=a.itemsToProcessForLabelVisibility;b.forEach(function(a,h){var i=this.design.findInstance(a,c),j=this.netlistController.getWires(i)||[];0===h&&e&&j.forEach(function(a){this.sheetTemplate.getObject(a.templateGUID).netlistRemove({contexts:b,templateGUID:a.templateGUID,deleteQueueSearch:d,cleanup:e,savedJunctions:f,itemsToProcessForLabelVisibility:g},h)},this),this.netlistController.removeJunction(i),this.removeDesignInstance(a,c,i)},this),this.removeTemplateObject(c)}},{key:"cloneTemplateWire",value:function(a,b,c){var d=c.path.map(function(a){return{x:a.x,y:a.y}}),e=c.clone(this.mainController,d);return e.templateGUID=a,c.children.forEach(function(a){var c=a.clone(this.mainController);c.templateGUID=b.get(a.templateGUID),e.children.push(c),c.parent=e},this),e}},{key:"cloneWireInstance",value:function(a,b,c){var d=c.clone(this.mainController);return d.templateGUID=a,c.children.forEach(function(a){var c=a.clone(this.mainController);c.templateGUID=b.get(a.templateGUID),c.parent=d,d.children.push(c)},this),d}},{key:"cloneWire",value:function(a,b,c,d,e){var f=q();c.push(f);var g=new Map;a.children.forEach(function(a){var b=q();g.set(a.templateGUID,b)},this);var h=this.cloneTemplateWire(f,g,a);h.offset(d),b.forEach(function(b){var c=this.design.findInstance(b,a.templateGUID),d=this.cloneWireInstance(f,g,c),i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=void 0;o=this.sheetTemplate.getObject(e[0].cloneGUID).point?{x:this.sheetTemplate.getObject(e[0].cloneGUID).point.x,y:this.sheetTemplate.getObject(e[0].cloneGUID).point.y}:{x:this.sheetTemplate.getObject(e[0].cloneGUID).getSymbolPin(e[0].connection.pinID).connectionX,y:this.sheetTemplate.getObject(e[0].cloneGUID).getSymbolPin(e[0].connection.pinID).connectionY},p=this.sheetTemplate.getObject(e[1].cloneGUID).point?{x:this.sheetTemplate.getObject(e[1].cloneGUID).point.x,y:this.sheetTemplate.getObject(e[1].cloneGUID).point.y}:{x:this.sheetTemplate.getObject(e[1].cloneGUID).getSymbolPin(e[1].connection.pinID).connectionX,y:this.sheetTemplate.getObject(e[1].cloneGUID).getSymbolPin(e[1].connection.pinID).connectionY},h.path[0].x===o.x&&h.path[0].y===o.y?(i=this.design.findInstance(b,e[0].cloneGUID),j=e[0].connection.pinID?i.pinInstances.get(e[0].connection.pinID):i,m=e[0].cloneGUID,k=this.design.findInstance(b,e[1].cloneGUID),l=e[1].connection.pinID?k.pinInstances.get(e[1].connection.pinID):k,n=e[1].cloneGUID):h.path[0].x===p.x&&h.path[0].y===p.y&&(i=this.design.findInstance(b,e[1].cloneGUID),j=e[1].connection.pinID?i.pinInstances.get(e[1].connection.pinID):i,m=e[1].cloneGUID,k=this.design.findInstance(b,e[0].cloneGUID),l=e[0].connection.pinID?k.pinInstances.get(e[0].connection.pinID):k,n=e[0].cloneGUID),this.netlistController.addWire(d),this.netlistController.connect(j,l,d,""),d.netName=this.netlistController.getNetNameForPin(j)||this.netlistController.getNetNameForJunction(j);var q=this.design.netlist.getNet(c.netName),r=this.design.netlist.getNet(d.netName);if(r.initialConditions=q.initialConditions,r.useInitialConditions=q.useInitialConditions,r.nodeset=q.nodeset,r.useNodeset=q.useNodeset,j.parent&&j.pinID){var s=this.sheetTemplate.getObject(j.parent.templateGUID).getSymbolPin(j.pinID);s&&this.changeTemplatePinConnectionState(s,m,!0)}if(l.parent&&l.pinID){var t=this.sheetTemplate.getObject(l.parent.templateGUID).getSymbolPin(l.pinID);t&&this.changeTemplatePinConnectionState(t,n,!0)}d.children.forEach(function(a){this.addDesignInstance(b,a.templateGUID,a)},this),this.addDesignInstance(b,f,d)},this),h.children.forEach(function(a){this.addTemplateObject(a.templateGUID,a)},this),this.addTemplateObject(f,h)}},{key:"ensureConnectorIDsMatchNetName",value:function(a,b){var c=this,d=this,e=[],f=[];d.design.netlistController.forEachConnectedTerminal(d.netlistController.getTerminal(a),function(a){var b=a.connectable,c=b.parent,g=d.design.netlist.getNetNameForItem(b);c&&c.connectorHub&&(c.connectorHub.connectorID!==g&&e.push(b),-1===f.indexOf(c.connectorHub)&&f.push(c.connectorHub))}),e.length>0&&function(){var a=new Map;f.forEach(function(b){!1===a.has(b.connectorType)&&a.set(b.connectorType,[]),a.get(b.connectorType).push(b)});var g=[];a.forEach(function(a,c){if(!this.design.getConnectorHub(b,c)){var d=this.design.createConnectorHub(b,c);this.mainController.connectorController.addConnectorHub(d),this.netlistController.addJunction(d,{name:b}),a.push(d)}if("ground"!==c)if(2===a.length){var e={};this.netlistController.addConnectorLink(e),this.netlistController.connect(a[0],a[1],e),g.push(e)}else if(1!==a.length||a[0].connectorID.toLowerCase()!==b.toLowerCase())throw new Error("Failed to find hub of type: "+c)},c);var h=[],i=[];e.forEach(function(a){i.push(a.parent),h.push(a.parent.connectorHub)}),d.mainController.connectorController.changeConnectorIDs(i,b),e.forEach(function(a,b){var c=h[b];a.parent.connectorHub!==c&&d.netlistController.changeWireTerminal(a,c,a.parent.connectorHub)}),g.forEach(function(a){d.netlistController.disconnect(a)}),d.design.getUnusedConnectorHubs().forEach(function(a){d.mainController.connectorController.removeConnectorHub(a)})}()}},{key:"getNumberOfConnectionsForJunction",value:function(a){var b=this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID),c=0;return b&&b.length>0&&(c=this.netlistController.getNumberOfConnectionsForJunction(this.design.findInstance(b[0],a))),c}},{key:"changeWirePath",value:function(a,b){this.undo.addStep({redo:c,undo:d,template:this.sheetTemplate,templateGUID:a.templateGUID,originalPath:m.cloneDeep(a.path),newPath:m.cloneDeep(b)}),this.sheetTemplate.updateWirePath(a,b);var e={finalize:function(){this.probeController.updateAllProbeState()},probeController:this.mainController.probeController};e.finalize(),this.undo.addFinalizer(e)}},{key:"changeWireLabelVisibility",value:function(a,b){this.undo.addStep({sheetTemplate:this.sheetTemplate,undo:g,redo:h,templateGUID:a.templateGUID,oldLabelVisibility:a.isLabelVisible(),newLabelVisibility:b}),this.sheetTemplate.changeWireLabelVisibility(a,b)}},{key:"changeTemplatePinConnectionState",value:function(a,b,c){this.undo.addStep({redo:f,undo:e,symbolPinID:a.name,templateGUID:b,sheetTemplate:this.sheetTemplate,oldConnectionState:a.connected,newConnectionState:c}),a.changeConnectionState(c)}},{key:"ensureWireLabelVisibility",value:function(a,b){var c=this,d=!1;if(this.netlistController.forEachWire(a,function(a){var e=c.sheetTemplate.getObject(a.templateGUID);b=b||a.templateGUID;var f=null;e&&e.isLabelVisible&&(f=e.isLabelVisible(),d&&f?c.changeWireLabelVisibility(e,!1):f&&(d=!0))}),!d){var e=this.sheetTemplate.getObject(b);e&&this.changeWireLabelVisibility(e,!0)}}},{key:"displayNetNameCallback",value:function(a,b){function c(){var a=null,b=e.netlistController.getWireTerminals(g);e.netlistController.forEachConnectedTerminal(b.from,function(b){if(b.connectable.parent&&b.connectable.parent.connectorHub){var c=e.netlistController.getWires(b.connectable);c.length>0&&c.forEach(function(b){a=e.sheetTemplate.getObjectAsTemplateWire(b.templateGUID),a&&(e.sheetTemplate.changeWireLabelVisibility(a,!0),e.updateChildItemLocations(a,b)),a=null})}}),e.netlistController.forEachWire(b.from.connectable,function(b){a=e.sheetTemplate.getObjectAsTemplateWire(b.templateGUID),a===f?(e.sheetTemplate.changeWireLabelVisibility(a,!0),e.updateChildItemLocations(a,b),h=!0):e.sheetTemplate.changeWireLabelVisibility(a,!1)}),a&&!h&&e.sheetTemplate.changeWireLabelVisibility(a,!0)}function d(b){var c=e.sheetTemplate.getObjectAsTemplateWire(b.templateGUID);c&&c.isLabelVisible&&c.isLabelVisible()&&!1===a&&e.sheetTemplate.changeWireLabelVisibility(c,!1)}var e=this,f=this.sheetTemplate.getObjectAsTemplateWire(b[0]),g=void 0,h=!1;if(f){g=this.design.findInstancesOfTemplate(f.templateGUID)[0];this.netlistController.getWireTerminals(g)&&(a?c():this.netlistController.forAllWires(g.netName,d))}}},{key:"wireAdornerUpdate",value:function(a,b,c){this.undo.addStep({activeView:c,undo:function(){this.template.updateWirePath(this.template.getObject(this.templateGUID),this.originalPath)},redo:function(){this.template.updateWirePath(this.template.getObject(this.templateGUID),this.newPath)},template:this.sheetTemplate,templateGUID:a.templateGUID,originalPath:m.cloneDeep(a.path),newPath:m.cloneDeep(b)}),this.sheetTemplate.updateWirePath(a,b);var d={finalize:function(){this.probeController.updateAllProbeState()},probeController:this.mainController.probeController};d.finalize(),this.undo.addFinalizer(d)}},{key:"getReroutingInfo",value:function(a){var b=new Set,c=[],d=new Set;return a.forEach(function(a){d.add(a.templateGUID)}),a.forEach(function(a){var e=this;a.pins?function(){var f=e.design.findInstancesOfTemplate(a.templateGUID)[0];a.pins.forEach(function(a){var e=f.getPinInstance(a.name),g=this.netlistController.getTerminal(e),h=this.netlistController.getWires(e);h&&h.forEach(function(a){var f=this.netlistController.getWireTerminals(a),h=void 0;if(!1===b.has(a.templateGUID)&&!1===d.has(a.templateGUID)){b.add(a.templateGUID);h={wireGraphic:this.sheetTemplate.getObject(a.templateGUID),from:f.from,to:f.to,floatingTerminal:g,floatingTerminalDescriptor:e},c.push(h)}},this)},e)}():a.point&&function(){var f=e.design.findInstancesOfTemplate(a.templateGUID)[0],g=e.netlistController.getTerminal(f),h=e.netlistController.getWires(f);h&&h.forEach(function(a){var e=this.netlistController.getWireTerminals(a),f=void 0;if(!1===b.has(a.templateGUID)&&!1===d.has(a.templateGUID)){b.add(a.templateGUID);f={wireGraphic:this.sheetTemplate.getObject(a.templateGUID),from:e.from,to:e.to,floatingTerminal:g},c.push(f)}},e)}()},this),c}},{key:"rerouteWires",value:function(a,b){var c=this;b&&b.skipIfEndpointsUnchanged&&(a=a.filter(function(a){var b=!1;if(a.templateWire&&a.templateWire.path){var c=a.templateWire.path[0],d=a.templateWire.path[a.templateWire.path.length-1];b=a.fromPos.x==c.x&&a.toPos.x==d.x&&a.fromPos.y==c.y&&a.toPos.y==d.y}return!b})),a.length&&function(){var b=new Set;a.forEach(function(a){b.add(a.templateWire)});var d=s(),e=r(c.sheetTemplate.size.width,c.sheetTemplate.size.height,d.estimateCost,d.cost,d.adjacent);d.size={cx:c.sheetTemplate.size.width+1,cy:c.sheetTemplate.size.height+1},d.drawHardOpenRect({x0:0,y0:0,x1:d.size.cx-1,y1:d.size.cy-1}),c.sheetTemplate.drawOnRouterMap(d,b),a.forEach(function(a){var b=!1;e.startPoint=a.fromPos,e.endPoint=a.toPos,m.isEqual(a.fromPos,a.toPos)||(d.markTarget(e.endPoint),e.findRoute(),b=e.success),b?this.changeWirePath(a.templateWire,e.reduce(e.route)):this.changeWirePath(a.templateWire,[a.fromPos,a.toPos]),a.templateWire.drawOnRouterMap(d),d.clearTarget(e.endPoint)},c)}()}},{key:"updateChildItemLocations",value:function(a,b){var c=.5;if(a&&b){var d=o(a.path),e=void 0,f=void 0;b.children.forEach(function(a){"netName"===a.variableName?e=a:"initialConditions"===a.variableName&&(f=a)});var g=e?this.sheetTemplate.getObject(e.templateGUID):null,h=f?this.sheetTemplate.getObject(f.templateGUID):null;if(d){var i=void 0;if(d.start.x===d.end.x)i={x:d.start.x,y:(d.start.y+d.end.y)/2},g&&this.sheetTemplate.changeTextLocation(g,{x:i.x+(g.rawBoundingBox.right-g.rawBoundingBox.left)/2+c,y:i.y-(g.rawBoundingBox.bottom-g.rawBoundingBox.top)/2}),h&&this.sheetTemplate.changeTextLocation(h,{x:i.x+(h.rawBoundingBox.right-h.rawBoundingBox.left)/2+c,y:i.y+(h.rawBoundingBox.bottom-h.rawBoundingBox.top)/2});else if(d.start.y===d.end.y)i={x:(d.start.x+d.end.x)/2,y:d.start.y},g&&this.sheetTemplate.changeTextLocation(g,{x:i.x,y:i.y-(g.rawBoundingBox.bottom-g.rawBoundingBox.top)/2}),h&&this.sheetTemplate.changeTextLocation(h,{x:i.x,y:i.y+(h.rawBoundingBox.bottom-h.rawBoundingBox.top)/2+c});else{var j=p(d.start,d.end)/2,k=Math.atan2(d.end.y-d.start.y,d.end.x-d.start.x),l=d.start.x+j*Math.cos(k)+1,m=d.start.y+j*Math.sin(k),n=1;(k>0&&k<.5*Math.PI||k>-1*Math.PI&&k<-.5*Math.PI)&&(n=-1);var q=g?g.rawBoundingBox.bottom-g.rawBoundingBox.top:0,r=h?h.rawBoundingBox.bottom-h.rawBoundingBox.top:0;g&&this.sheetTemplate.changeTextLocation(g,{x:l+(g.rawBoundingBox.right-g.rawBoundingBox.left)/2,y:n<0?m-r-q/2-c:m+q/2}),h&&this.sheetTemplate.changeTextLocation(h,{x:l+(h.rawBoundingBox.right-h.rawBoundingBox.left)/2,y:n<0?m-r/2:m+q+r/2+c})}}}}}]),b}(t),a("default",v)}}}),a.register("3a",["1b","2d","21","28","3b","3c","2f","3d","22","1f","3e","3f","25","2b","2c","35","36"],function(a,b){"use strict";function c(a,b){var c={pins:[],junctions:[]};b.forEach(function(b){if(b.connectable.pinID){var d=a.getObject(b.connectable.parent.templateGUID);d&&c.pins.push({section:d,connectitem:b})}else{var e=a.getObject(b.connectable.templateGUID);e&&c.junctions.push({junction:e,connectitem:b})}}),(c.pins.length||c.junctions.length)&&a.updateConnections(c)}function d(a,b){c(a,[b.from,b.to])}function e(a,b){var d=[];b.forEach(function(a){d=d.concat(a)}),c(a,d)}function f(){this.template.rotateObject(this.templateGUID,this.angle)}function g(){this.template.rotateObject(this.templateGUID,-1*this.angle)}function h(){this.template.flipObjectHorizontal(this.templateGUID)}function i(){this.template.flipObjectHorizontal(this.templateGUID)}function j(a,b,c,d,e){return new P(a,b,c,d,e)}var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P;return a("default",j),{setters:[function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.ESimulationVariable,p=a.formatSimulationNumber,q=a.convertAnalogValueToDigitalString,r=a.convertDigitalValueToDigitalString},function(a){s=a.formatRefDes},function(a){t=a.isTemplateJunction,u=a.isTemplateComponent,v=a.isTemplateConnector,w=a.isTemplateWire},function(a){x=a.default},function(a){y=a.default},function(a){z=a.DefaultLogicFamily,A=a.LogicFamily},function(a){B=a.moveSelectionCommand},function(a){C=a.ComponentController,D=a.mapBasicRewiringInfo},function(a){E=a.default},function(a){F=a.default},function(a){G=a.default},function(a){H=a.default},function(a){I=a.default}],execute:function(){J=function(){this.design.addInstance(this.contextGUID,this.templateGUID,this.instance)},K=function(){this.design.removeInstances(this.contextGUID,[this.templateGUID])},L=function(){this.template.addObject(this.templateGUID,this.templateObject)},M=function(){this.template.removeObjects({templateGUIDs:[this.templateGUID]},!1)},N=function(){var a={x:-1*this.offset.x,y:-1*this.offset.y},b=this.orientData?{objectMatrix:this.orientData.oldObjectMatrix,flipStats:this.orientData.flipStats}:null;this.template.moveObjects(this.templateGUIDs,a,b)},O=function(){this.template.moveObjects(this.templateGUIDs,this.offset,this.orientData)},P=function(a,b,f,g,h){this.componentAPI=h,this.sheetTemplate=a,this.design=b,this.netlistController=b.netlistController,this.undo=f,this.moveSelectionCommand=B,this.propertyController=g,this.componentController=new C(this),this.connectorController=new E(this,this.undo,this.design,this.sheetTemplate),this.probeController=new G(this),this.wiringController=new I(this),this.textController=new H(this),this.junctionController=new F(this);var i=this;b.netlistController.listener.addListener(x.NE_CONNECT,function(b){d(a,b)}),b.netlistController.listener.addListener(x.NE_DISCONNECT,function(b){e(a,b)}),b.netlistController.listener.addListener(x.NE_TERMINALCHANGED,function(b){c(a,b)}),this.wireCloneAndOffsetHandler=function(a,b,c,d){i.wiringController.cloneWire(this,a,b,c,d)},this.junctionCloneAndOffsetHandler=function(a,b,c,d){i.junctionController.cloneJunction(this,a,b,c,d)},this.componentCloneAndOffsetHandler=function(a,b,c,d){i.componentController.cloneComponent(this,a,b,c,d)},this.probeCloneAndOffsetHandler=function(a,b,c,d){i.probeController.cloneProbe(this,a,b,c,d)},this.connectorCloneAndOffsetHandler=function(a,b,c,d){i.connectorController.cloneConnector(this,a,b,c,d)},this.textCloneAndOffsetHandler=function(a,b,c,d){i.textController.cloneText(this,a,b,c,d)},this.componentNetlistRemoveHandler=function(a,b){i.componentController.removeSection(a,b)},this.wireNetlistRemoveHandler=function(a){i.wiringController.removeWire(a)},this.junctionNetlistRemoveHandler=function(a){i.wiringController.removeJunction(a)},this.connectorNetlistRemoveHandler=function(a){i.connectorController.removeConnector(a)},this.componentViewControllerAddHandler=function(a,b){a.addComponentSection(b.viewObject,b.guid,b.templateObject,b.instance)},this.wireViewControllerAddHandler=function(a,b){a.addWire(b.viewObject,b.guid,b.templateObject,b.instance)},this.junctionViewControllerAddHandler=function(a,b){a.addJunction(b.viewObject,b.guid,b.templateObject,b.instance)},this.probeViewControllerAddHandler=function(a,b){a.addProbe(b.viewObject,b.guid,b.templateObject,b.instance)},this.probeTextViewControllerAddHandler=function(a,b){a.addProbeText(b.viewObject,b.guid,b.templateObject,b.instance)},this.textViewControllerAddHandler=function(a,b){a.addText(b.viewObject,b.guid,b.templateObject,b.instance)},this.componentViewControllerUpdateHandler=function(a,b){a.updateComponentSection(b.viewObject,b.guid,b.templateObject,b.instance)},this.wireViewControllerUpdateHandler=function(a,b){a.updateWireSegment(b.viewObject,b.guid,b.templateObject,b.instance)},this.junctionViewControllerUpdateHandler=function(a,b){a.updateJunction(b.viewObject,b.guid,b.templateObject,b.instance)},this.probeViewControllerUpdateHandler=function(a,b){a.updateProbe(b.viewObject,b.guid,b.templateObject,b.instance)},this.probeTextViewControllerUpdateHander=function(a,b){a.updateProbeText(b.viewObject,b.guid,b.templateObject,b.instance)},this.textViewControllerUpdateHandler=function(a,b){a.updateText(b.viewObject,b.guid,b.templateObject,b.instance)},this.probeIdTextViewControllerUpdateHandler=function(a,b){a.updateProbeIdText(b.viewObject,b.guid,b.templateObject,b.instance),a.updateText(b.viewObject,b.guid,b.templateObject,b.instance)},this.templateComponentExporter=function(a){a.exportComponent(this)},this.templateWireExporter=function(a){a.exportWire(this)},this.templateJunctionExporter=function(a){a.exportJunction(this)},this.templateTextExporter=function(a){a.exportText(this)},this.templateProbeExporter=function(a){a.exportProbe(this)},this.templateProbeTextExporter=function(a){a.exportProbeText(this)},this.templateConnectorExporter=function(a){a.exportConnector(this)},this.sectionInstanceExporter=function(a){a.exportComponent(this)},this.wireInstanceExporter=function(a){a.exportWire(this)},this.textInstanceExporter=function(a){a.exportText(this)},this.probeInstanceExporter=function(a){a.exportProbe(this)},this.probeTextInstanceExporter=function(a){a.exportProbeText(this)},this.connectorInstanceExporter=function(a){a.exportConnector(this)},this.connectorInstanceVariableGetter=function(a){var b="";return"connectorID"===a&&"0"===(b=this.connectorHub.connectorID)&&"ground"===this.connectorHub.connectorType&&(b=""),b},this.sectionInstanceVariableObjectGetter=function(a){return i.componentAPI.getModelInstanceProperty(this.activeModelID,a)||i.componentAPI.getModelDefinitionProperty(this.activeModelID,a)||null},this.sectionInstanceVariableGetter=function(a){var b=this,c="";if("refdes"===a)c=C.getFormattedRefDesForComponent(this);else if("component"===a)!function(){var a=b.activePackageID;c=a?b.designComponent.oeclComponentBlueprint.packageConfigurations.find(function(b){return b.id==a}).partNumber:b.designComponent.oeclComponentBlueprint.name}();else{var d=i.componentAPI.getModelInstanceProperty(this.activeModelID,a);if(d)c=this.getInstanceVariableValue(this.activeModelID,a),d.units&&(c+=d.units);else{var e=i.componentAPI.getModelDefinitionProperty(this.activeModelID,a);e&&(c=this.getModelVariableValue(this.activeModelID,a),e.units&&(c+=e.units))}}return c},this.probeInstanceVariableGetter=function(a){var b=this,c={voltage:void 0,vDc:void 0,vPp:void 0,vRms:void 0,vAvg:void 0,vFreq:void 0,current:void 0,iDc:void 0,iPp:void 0,iRms:void 0,iAvg:void 0,iFreq:void 0,vDigital:void 0,probeID:this.probeID,referenceID:this.probeRefs&&this.probeRefs.length>0&&this.probeRefs[0]?this.probeRefs[0].probeID:null},d="",e=i.sheetTemplate.getObject(this.templateGUID),f=e?e.probeType:"",g=f===y.PROBE_EXPRESSION,h=f===y.PROBE_DATA,j=i.design.findInstance(i.design.getContextsOfTemplate(i.sheetTemplate.sheetGUID)[0],this.templateGUID);return"probeID"===a?(d=this.probeID,f===y.PROBE_VOLTAGE&&1===this.probeRefs.length?d=d+" +\n"+this.probeRefs[0].probeID+" -":(g&&this.expression.length>0||h&&(!j||j.getDisplayVariableName().length>0))&&(d+=":")):"probeExpression"===a?d=""+this.expression:"file"===a||"url"===a||"network"===a||"usb"===a?d=j?j.getDisplayVariableName():"":"measurements"===a&&function(){var a=i.design,e=a.simulationController.activeAnalysis===m.DC,f=a.probeController,g=f.getNetlistVariablesForProbe(b);a.simulationController.activeAnalysis===a.simulationController.lastRunAnalysisType||(g=[]);var h=5,j={vDcOp:h,vInst:h,vPp:h,vRms:h,vAvg:h,vFreq:h,iDcOp:h,iInst:h,iPp:h,iRms:h,iAvg:h,iFreq:h};(a.simulationController.activeAnalysis===m.Interactive||e)&&g.forEach(function(d){var g=f.getTypeOfNetlistVariable(b,d),h=a.simulationController.dataManager.getMeasurements(d);if(g===f.signalTypes.voltage){var k=void 0,l=z,m=b.getAttachedNets(a,i.sheetTemplate),n=m&&m.length>0?m[0]:void 0;n&&void 0!==n.pinLogicFamilies&&n.pinLogicFamilies.length>0&&(l=n.pinLogicFamilies[0]),k=A.getVoltageLevelForLogicFamily(l),n&&n.customVoltageValues&&(k=n.customVoltageValues),e?c.vDc=p(a.simulationController.dataManager.getLastValue(d),o.Voltage,void 0,j.vDcOp):c.voltage=p(a.simulationController.dataManager.getLastValue(d),o.Voltage,void 0,j.vInst),h&&(c.vPp=p(h.peak.high-h.peak.low,o.Voltage,!0,j.vPp),c.vRms=p(h.rms,o.Voltage,!0,j.vRms),c.vAvg=p(h.mean,o.Voltage,!0,j.vAvg),c.vFreq=p(1/h.peak.highPeriod,o.Frequency,!0,j.vFreq)),c.vDigital=q(a.simulationController.dataManager.getLastValue(d),k.minHighVoltage,k.maxLowVoltage)}else if(g===f.signalTypes.current)e?c.iDc=p(a.simulationController.dataManager.getLastValue(d),o.Current,void 0,j.iDcOp):c.current=p(a.simulationController.dataManager.getLastValue(d),o.Current,void 0,j.iInst),h&&(c.iPp=p(h.peak.high-h.peak.low,o.Current,!0,j.iPp),c.iRms=p(h.rms,o.Current,!0,j.iRms),c.iAvg=p(h.mean,o.Current,!0,j.iAvg),c.iFreq=p(1/h.peak.highPeriod,o.Frequency,!0,j.iFreq));else if(g===f.signalTypes.digital){var s=d,t=a.probeData.netlistVariableToProbeInstances.get(d),u=t.size,v=0,w=!0,x=!1,y=void 0;try{for(var B,C=t.values()[Symbol.iterator]();!(w=(B=C.next()).done);w=!0){var D=B.value;D===f.signalTypes.digital&&v++}}catch(a){x=!0,y=a}finally{try{!w&&C.return&&C.return()}finally{if(x)throw y}}v<u&&(s=d+"-!dprobe");var E=a.simulationController.dataManager.getLastValue(s);c.vDigital=r(E)}},b),d=c}(),d},this.wireInstanceVariableGetter=function(a){var b="";if("netName"===a)b=this.netName;else if("initialConditions"===a){var c=i.design.netlist.getNet(this.netName);c&&c.useInitialConditions&&(b="IC="+c.initialConditions+"V")}return b},this.probePostRemoveActionHandler=function(){i.probeController.removeFromProbeController(this)},this.displayConfirmDialog=null,this.initConfirmDialog=function(a){i.displayConfirmDialog=function(b,c){a.open(),a.onOk=b,a.onCancel=c}}},P.prototype.createTemplateComponent=function(a,b,c,d){var e=this.sheetTemplate.createTemplateComponent(a,b,c,d);return e.cloneAndPlaceAtOffset=this.componentCloneAndOffsetHandler,e.netlistRemove=this.componentNetlistRemoveHandler,e.addToView=this.componentViewControllerAddHandler,e.updateView=this.componentViewControllerUpdateHandler,e.export=this.templateComponentExporter,e.rotateable=!0,e.flipable=!0,e.freshSymbolFlag=!1,e},P.prototype.createTemplateConnector=function(a,b,c){var d=this.sheetTemplate.createTemplateConnector(a,b,c);return d.cloneAndPlaceAtOffset=this.connectorCloneAndOffsetHandler,d.netlistRemove=this.connectorNetlistRemoveHandler,d.addToView=this.componentViewControllerAddHandler,d.updateView=this.componentViewControllerUpdateHandler,d.export=this.templateConnectorExporter,d.rotateable=!0,d.flipable=!0,d},P.prototype.createTemplateWire=function(a,b){var c=this.sheetTemplate.createTemplateWire(a,b);return c.cloneAndPlaceAtOffset=this.wireCloneAndOffsetHandler,c.netlistRemove=this.wireNetlistRemoveHandler,c.addToView=this.wireViewControllerAddHandler,c.updateView=this.wireViewControllerUpdateHandler,c.export=this.templateWireExporter,c},P.prototype.createTemplateProbe=function(a,b,c,d){var e=this.sheetTemplate.createTemplateProbe(a,b,c,d);return e.cloneAndPlaceAtOffset=this.probeCloneAndOffsetHandler,e.addToView=this.probeViewControllerAddHandler,e.updateView=this.probeViewControllerUpdateHandler,e.export=this.templateProbeExporter,e.rotateable=!0,e.flipable=!0,e},P.prototype.createTemplateProbeText=function(a,b,c){var d=this.sheetTemplate.createTemplateProbeText(a,b,c);return d.addToView=this.probeTextViewControllerAddHandler,d.updateView=this.probeTextViewControllerUpdateHander,d.export=this.templateProbeTextExporter,d},P.prototype.createTemplateJunction=function(a,b){var c=this.sheetTemplate.createTemplateJunction(a,b);return c.cloneAndPlaceAtOffset=this.junctionCloneAndOffsetHandler,c.netlistRemove=this.junctionNetlistRemoveHandler,c.addToView=this.junctionViewControllerAddHandler,c.updateView=this.junctionViewControllerUpdateHandler,c.export=this.templateJunctionExporter,c},P.prototype.createTemplateText=function(a,b,c,d,e,f){var g=this.sheetTemplate.createTemplateText(a,b,c,d,e,f);return g.addToView=this.textViewControllerAddHandler,g.updateView=this.textViewControllerUpdateHandler,g.export=this.templateTextExporter,g.rotateable=e,e&&(g.cloneAndPlaceAtOffset=this.textCloneAndOffsetHandler),g},P.prototype.createSectionInstance=function(a,b,c,d){var e=this.design.createSectionInstance(a,b,c,d);return e.export=this.sectionInstanceExporter,e.variableGetter=this.sectionInstanceVariableGetter,e.variableObjectGetter=this.sectionInstanceVariableObjectGetter,e},P.prototype.createWireInstance=function(a,b,c){var d=this.design.createWireInstance(a,b,c);return d.export=this.wireInstanceExporter,d.variableGetter=this.wireInstanceVariableGetter,d},P.prototype.createJunctionInstance=function(a,b){return this.design.createJunctionInstance(a,b)},P.prototype.createTextInstance=function(a,b,c,d){var e=this.design.createTextInstance(a,b,c,d);return e.export=this.textInstanceExporter,e},P.prototype.createProbeInstance=function(a,b,c,d){var e=this.design.createProbeInstance(a,b,c,d);return e.export=this.probeInstanceExporter,e.variableGetter=this.probeInstanceVariableGetter,e.postRemoveAction=this.probePostRemoveActionHandler,e},P.prototype.createProbeTextInstance=function(a,b,c,d){var e=this.design.createProbeTextInstance(a,b,c,d);return e.export=this.probeTextInstanceExporter,e},P.prototype.createConnectorInstance=function(a,b,c){var d=this.design.createConnectorInstance(a,b,c);return d.export=this.connectorInstanceExporter,d.variableGetter=this.connectorInstanceVariableGetter,d},P.prototype.addTemplateObject=function(a,b){this.sheetTemplate.addObject(a,b),this.undo.addStep({redo:L,undo:M,template:this.sheetTemplate,templateGUID:a,templateObject:b})},P.prototype.addDesignInstance=function(a,b,c){this.design.addInstance(a,b,c),this.undo.addStep({redo:J,undo:K,contextGUID:a,templateGUID:b,instance:c,design:this.design})},P.prototype.removeTemplateObject=function(a){this.undo.addStep({undo:L,redo:M,template:this.sheetTemplate,templateGUID:a,templateObject:this.sheetTemplate.getObject(a)}),this.sheetTemplate.removeObjects({templateGUIDs:[a]})},P.prototype.removeDesignInstance=function(a,b,c){this.design.removeInstances(a,[b]),this.undo.addStep({undo:J,redo:K,design:this.design,templateGUID:b,contextGUID:a,instance:c})},P.prototype.removeObjects=function(a,b,c){var d=this,e=this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID),f=[],g=[],h=!1;a.templateGUIDs.forEach(function(a){var b=this.sheetTemplate.getObject(a);if(b.probeType&&b.probeType===y.PROBE_DATA){var c=this.design.findInstance(e[0],a);c.file&&(h=!0),c.network&&this.probeController.disconnectStreamingProbe(c)}b.netlistRemove?f.push(a):g.push(a)},this);var i=function(){d.wiringController.removeNetlistItemsAndSimplify(f,e,b),g.forEach(function(a){e.forEach(function(b){var c=this.design.findInstance(b,a);c.file="",c.externalData&&c.initialExternalData(),this.removeDesignInstance(b,a,c),c.children&&c.children.forEach(function(a){this.removeDesignInstance(b,a.templateGUID,a)},this),c.postRemoveAction&&c.postRemoveAction()},this);var b=this.sheetTemplate.getObject(a);b.children&&b.children.forEach(function(a){this.removeTemplateObject(a.templateGUID)},this),this.removeTemplateObject(a)},d),d.design.getUnusedDesignComponents().forEach(function(a){this.componentController.removeDesignComponent(a)},d),d.design.getUnusedConnectorHubs().forEach(function(a){this.connectorController.removeConnectorHub(a)},d);var a={finalize:function(){this.probeController.updateAllProbeState()},probeController:d.probeController};a.finalize(),d.undo.addFinalizer(a)};if(h)return this.displayConfirmDialog(function(){i(),c.stopCommand(!1)},function(){c.stopCommand(!1)}),function(){};i()},P.prototype.moveObjects=function(a){var b=this,c=a.orientData?{objectMatrix:a.orientData.objectMatrix,oldObjectMatrix:this.sheetTemplate.getObject(a.templateGUIDs[0]).matrix,flipStats:a.orientData.flipStats}:null;this.undo.addStep({undo:N,redo:O,templateGUIDs:a.templateGUIDs,offset:a.offset,orientData:c,template:this.sheetTemplate});var d=a.wireUpdateInfo?a.wireUpdateInfo.map(function(a){for(var b=[],c=0;c<a.templateWire.path.length;++c)b.push({x:a.templateWire.path[c].x,y:a.templateWire.path[c].y});return b}):null;this.sheetTemplate.moveObjects(a.templateGUIDs,a.offset,c),a.wireUpdateInfo&&(a.wireUpdateInfo.forEach(function(a,b){a.templateWire.path=d[b]}),a.wireUpdateInfo.length<=a.routingBreakThreshold?this.wiringController.rerouteWires(a.wireUpdateInfo):function(){var c=b.design.getContextsOfTemplate(b.sheetTemplate.sheetGUID),d=[],e=[];a.wireUpdateInfo.forEach(function(a){var b=this,f=a.templateWire;2===f.path.length&&f.path[0].x===f.path[1].x&&f.path[0].y==f.path[1].y?d.push(f.templateGUID):function(){var d=n(),g=b.createTemplateJunction(d,a.originalFloatPoint);c.forEach(function(b){var c=this.createJunctionInstance(b,d);this.addDesignInstance(b,d,c),this.netlistController.addJunction(c);var g=this.design.findInstance(b,f.templateGUID);this.netlistController.changeWireTerminal(g,a.floatingTerminalDescriptor,c),e.push(this.netlistController.getTerminal(a.floatingTerminalDescriptor)),e.push(this.netlistController.getTerminal(c))},b),b.addTemplateObject(d,g)}()},b),b.wiringController.removeNetlistItemsAndSimplify(d,c,!1)}());var e={finalize:function(){this.probeController.updateAllProbeState()},probeController:this.probeController};e.finalize(),this.undo.addFinalizer(e)},P.prototype.rotateObject=function(a){this.undo.addStep({undo:g,redo:f,templateGUID:a.templateGUID,angle:a.angle,template:this.sheetTemplate}),this.sheetTemplate.rotateObject(a.templateGUID,a.angle);var b=this.wiringController.getReroutingInfo([this.sheetTemplate.getObject(a.templateGUID)]).map(D,this);this.wiringController.rerouteWires(b)},P.prototype.cloneObjectsAndPlaceAtOffset=function(a,b,c){var d=this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID),e=[],f={},g={},h=a.filter(function(a){return!w(this.sheetTemplate.getObject(a))},this),i=this;return d.forEach(function(a){h.forEach(function(g){var h=i.sheetTemplate.getObject(g);if(h.cloneAndPlaceAtOffset&&(h.cloneAndPlaceAtOffset(d,e,b,c),u(h)||v(h)||t(h))){var j=i.componentController.design.findInstance(a,g);j=j.pinInstances?j.pinInstances:[j],j.forEach(function(a){(i.netlistController.getWires(a)||[]).forEach(function(b){f[b.templateGUID]?f[b.templateGUID].numConnects++:f[b.templateGUID]={connectPoints:[],numConnects:1},f[b.templateGUID].connectPoints.push({connection:a,cloneGUID:e[e.length-1],connectType:t(h)?"junction":"pin"})})})}})}),a.filter(function(a){return w(this.sheetTemplate.getObject(a))&&f[a]},this).forEach(function(a){var c=this.sheetTemplate.getObject(a);c.cloneAndPlaceAtOffset&&(c.cloneAndPlaceAtOffset(d,e,b,f[a].connectPoints),f[a].connectPoints.forEach(function(a){"junction"===a.connectType&&(g[a.cloneGUID]?g[a.cloneGUID].numConnects++:g[a.cloneGUID]={numConnects:1,newWireGUIDs:[]},g[a.cloneGUID].newWireGUIDs.push(e[e.length-1]))}))},this),Object.keys(g).forEach(function(a){if(2===g[a].numConnects){var b=this.wiringController.mergeJunction(d,a),c=b!==g[a].newWireGUIDs[0]?g[a].newWireGUIDs[0]:g[a].newWireGUIDs[1];e.splice(e.indexOf(c),1),e.splice(e.indexOf(a),1)}},this),e},P.prototype.flipObjectHorizontal=function(a){this.undo.addStep({undo:i,redo:h,templateGUID:a.templateGUID,template:this.sheetTemplate}),this.sheetTemplate.flipObjectHorizontal(a.templateGUID);var b=this.wiringController.getReroutingInfo([this.sheetTemplate.getObject(a.templateGUID)]).map(D,this);this.wiringController.rerouteWires(b)},P.prototype.getModelDataForItem=function(a,b){var c=this.design.findInstance(a,b);return c&&c.activeModelID?this.componentAPI.getModelFromCache(c.activeModelID):null},P.prototype.getPropertiesForItem=function(a,b){var c=[],d=this.design.findInstance(a,b),e=new Set;if(d&&d.activeModelID){var f=this.componentAPI.getInstanceForModelID(d.activeModelID);f&&f.variables.forEach(function(a){this.componentAPI.userCanModifyVariable(a)&&!1===e.has(a)&&(c.push(a),e.add(a))},this);var g=this.componentAPI.getDefinitionForModelID(d.activeModelID);g&&g.variables.forEach(function(a){this.componentAPI.userCanModifyVariable(a)&&!1===e.has(a)&&(c.push(a),e.add(a))},this)}return c.sort(function(a,b){return a.order<b.order?-1:a.order>b.order?1:0}),c},P.prototype.isInstanceOrModelPropertyInvalid=function(a,b,c,d,e){var f=this.design.findInstance(a,b);this.sheetTemplate.getObject(b)&&f?this.propertyController.isInstanceOrModelPropertyInvalid(f,c,d,e):e(null)},P.prototype.changeInstanceOrModelVariable=function(a,b,c,d,e){var f=this.design.findInstance(a,b);if(this.sheetTemplate.getObject(b)&&f){this.undo.startAction(c+" change.");var g=this.componentAPI.getModelInstanceProperty(f.activeModelID,c);null===g&&(g=this.componentAPI.getModelDefinitionProperty(f.activeModelID,c)),g&&g.isInstanceVar?(this.propertyController.changeInstanceProperty(f,c,d),!0===e&&this.synchronizeInstanceVariableValue(b,c,d)):(this.propertyController.changeModelProperty(f,c,d),!0===e&&this.synchronizeModelVariableValue(b,c,d)),this.updateSimulatorForVarChange(a,b,c,d),this.undo.finishAction(!1)}},P.prototype.changeInstanceVariable=function(a,b,c,d,e,f){var g=this.design.findInstance(a,b);this.sheetTemplate.getObject(b)&&g&&(this.undo.startAction(c+" change."),this.propertyController.changeInstanceProperty(g,c,d,e),!0===f&&this.synchronizeInstanceVariableValue(b,c,d,e),this.undo.finishAction(!1))},P.prototype.updateSimulatorForVarChange=function(a,b,c){var d=this.design.findInstance(a,b);if(d&&d.modelInstanceData&&d.modelInstanceData[d.activeModelID]){var e=d.designComponent.isMultiSection(),f=s(d.designComponent.refDes,e?d.sectionName:void 0,{}),g=this.getModelDataForItem(a,b),h=g&&g.instances[0].variables.filter(function(a){return"model"==a.name}).length?g.name:null,i=this.design.simulationController,j=g?g.customData:null,k=this.componentAPI.getModelInstanceProperty(d.activeModelID,c);null===k&&(k=this.componentAPI.getModelDefinitionProperty(d.activeModelID,c));var l=!1;if(k&&k.spiceParameters&&k.spiceParameters.length&&j){var m=this.getPropertiesForItem(a,b),n=m.reduce(function(a,b){return a[b.name]=b.isInstanceVar?d.getInstanceVariableValue(d.activeModelID,b.name,!0):d.getModelVariableValue(d.activeModelID,b.name,!0),a},{}),o=h?h+"_"+f:j.modelType,p=k.isInstanceVar?d.getInstanceVariableValue(d.activeModelID,k.name,!0):d.getModelVariableValue(d.activeModelID,k.name,!0);i.changeSingleDeviceValue(j.deviceType,o,k.isInstanceVar?j.modelType+f:null,{parameters:k.spiceParameters,variables:n},p,function(){l=!0})}return l}},P.prototype.getInstanceOrModelProperty=function(a,b,c,d){var e=void 0,f=this.design.findInstance(a,b);return f&&f.activeModelID&&(e=this.componentAPI.getModelInstanceProperty(f.activeModelID,c),null===e&&(e=this.componentAPI.getModelDefinitionProperty(f.activeModelID,c)),e&&d&&(this.propertyController.isNumericProperty(e)||(e=null))),e||void 0},P.prototype.getInstanceOrModelVariable=function(a,b,c,d){var e=this.design.findInstance(a,b),f=void 0;if(e&&e.activeModelID){var g=this.componentAPI.getModelInstanceProperty(e.activeModelID,c);null===g&&(g=this.componentAPI.getModelDefinitionProperty(e.activeModelID,c)),g&&d&&!this.propertyController.isNumericProperty(g)||(f=g&&g.isInstanceVar?e.getInstanceVariableValue(e.activeModelID,c):e.getModelVariableValue(e.activeModelID,c))}return f},P.prototype.getInstanceVariable=function(a,b,c){var d=this.design.findInstance(a,b);return d&&d.activeModelID?d.getInstanceVariableValue(d.activeModelID,c):void 0},P.prototype.synchronizeInstanceVariableValue=function(a,b,c,d){this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID).forEach(function(e){var f=this.design.findInstance(e,a);this.sheetTemplate.getObject(a)&&f&&this.propertyController.changeInstanceProperty(f,b,c,d)},this)},P.prototype.synchronizeModelVariableValue=function(a,b,c){this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID).forEach(function(d){var e=this.design.findInstance(d,a);this.sheetTemplate.getObject(a)&&e&&this.propertyController.changeModelProperty(e,b,c)},this)},P.prototype.changeModelVariable=function(a,b,c,d,e){var f=this.design.findInstance(a,b);f&&(this.undo.startAction(c+" change."),this.propertyController.changeModelProperty(f,c,d,e),this.undo.finishAction(!1))},P.prototype.updateCommands=function(a,b){var c=0,d=0,e=0;a.forEach(function(a){var b=this.sheetTemplate.getObject(a);b.rotateable&&++e,b.flipable&&++d,++c},this),b.getCommandObject("rotateobject").visible=1===c&&1===e,b.getCommandObject("rotateobject").enable=1===c&&1===e,b.getCommandObject("flipobjecthorizontal").visible=1===c&&1===d,b.getCommandObject("flipobjecthorizontal").enable=1===c&&1===d},P.prototype.getInteractiveCommandsFor=function(a,b){var c=this,d=b.map(function(b){return this.design.findInstance(a,b)},this).map(function(a){var b=[];if(a.designComponent&&a.activeModelID){var c=this.getPropertiesForItem(a.contextGUID,a.templateGUID);l.find(c,function(a){return"button"===a.propertyType})&&b.push("togglestate")}return b},this),e=l.intersection.apply(l,k(d));return function(){1===b.length&&c.design.simulationController.isInSimulation&&e.pop("togglestate")}(),e}}}}),a.register("40",["2d","21","3b","3d","31","41","42","2e","30","22","43","32","44","45"],function(a,b){"use strict";function c(a,b,c,d){a.forEach(function(a){var e=a.contentElement,f=e.sheetTemplateController,g=f.netlistController,h={},i=function(a){return a.map(function(a){return{link:a,wire:b.getObject(a.templateGUID)}}).filter(function(a){var b=a.wire&&a.wire.path?a.wire.path:null;return b&&2==b.length&&b[0].x==b[1].x&&b[0].y==b[1].y})};d.junctions.forEach(function(a){var b=f.wiringController.getNumberOfConnectionsForJunction(a.junction.templateGUID)<4,d=i(g.getWires(a.connectitem.connectable));c.setWiringTargetLollipopForJunction(e,a.junction.templateGUID,b),e.objectToFront(a.junction.templateGUID),d.forEach(function(b){var d=f.netlistController.getWireTerminals(b.link),g=void 0,i=void 0;d.from.connectable.pinID?(g=d.from,void 0===d.to.connectable.pinID&&(i=d.to)):d.to.connectable.pinID&&(g=d.to,void 0===d.from.connectable.pinID&&(i=d.from)),i&&g&&i.connectable.templateGUID==a.junction.templateGUID&&(c.setWiringTargetLollipopForPin(e,g.connectable.parent.templateGUID,g.connectable.pinID,!1),c.hideSingleLollipop(e,g.connectable.parent.templateGUID,g.connectable.pinID),h[g.connectable.parent.templateGUID]||(h[g.connectable.parent.templateGUID]={}),h[g.connectable.parent.templateGUID][g.connectable.pinID]=!0)})}),d.pins.forEach(function(a){if(!h[a.section.templateGUID]||!h[a.section.templateGUID][a.connectitem.connectable.pinID]){var b=f.netlistController.getWires(a.connectitem.connectable),d=b.length&&b.length<4;if(b.length){c.hideSingleLollipop(e,a.section.templateGUID,a.connectitem.connectable.pinID);for(var g=i(b),j=0;j<g.length;j++){var k=g[j],l=f.netlistController.getWireTerminals(k.link),m=void 0,n=void 0;if(l.from.connectable.pinID?(m=l.from,void 0===l.to.connectable.pinID&&(n=l.to)):l.to.connectable.pinID&&(m=l.to,void 0===l.from.connectable.pinID&&(n=l.from)),n&&m&&m.connectable.parent.templateGUID==a.section.templateGUID&&m.connectable.pinID==a.connectitem.connectable.pinID){d=!1;break}}}else c.showSingleLollipop(e,a.section.templateGUID,a.connectitem.connectable.pinID);c.setWiringTargetLollipopForPin(e,a.section.templateGUID,a.connectitem.connectable.pinID,d)}})})}function d(a,b,d,e,f,g,h,j,k,l){this.viewObjects=[],this.sheetController=k,this.sheetTemplate=a,this.context=d,this.wiringInterface=f,this.animationInterface=e,this.design=b,this.componentAPI=g,this.propertyController=h,this.flipTextHorizontal=l.flipTextHorizontal;var n=this;this.sheetTemplate.listeners.addListener(r.SHEET_PROPERTIES_CHANGED,function(){n.sheetPropertiesChanged()}),this.sheetTemplate.listeners.addListener(r.SHEET_OBJECTS_CHANGED,function(a){n.sheetObjectsChanged(a)}),this.sheetTemplate.listeners.addListener(r.CONNECTIONS_CHANGED,function(b){c(n.viewObjects,a,f,b)}),this.sheetTemplate.listeners.addListener(r.COMPONENT_SYMBOL_CHANGED,function(a){n.replaceComponentSymbol(a)}),this.sheetTemplate.listeners.addListener(r.COMPONENT_SYMBOL_CHANGE_UNDO,function(a){n.replaceComponentSymbolUndo(a)}),b.listeners.addListener(s.DESIGN_CHANGED,function(a){n.designObjectsChanged(a)}),b.listeners.addListener(s.ANIMATED_COMPONENT_UPDATED,function(a){n.animatedComponentUpdated(a)});var o=function(a){n.context.guid==a.contextGUID&&n.propertyChanged(a)};this.propertyController.propertyChangeListeners.addListener(x.INSTANCE_PROPERTY_CHANGED,o),this.propertyController.propertyChangeListeners.addListener(x.MODEL_PROPERTY_CHANGED,o),this.checkScrollZoomCacheAndUpdate=function(a){var b=a.getZoom(),c=a.getScroll(),d=n.cachedLastZoom!==b||n.cachedLastScrollLeft!==c.left||n.cachedLastScrollTop!==c.top;return d&&(n.cachedLastZoom=b,n.cachedLastScrollLeft=c.left,n.cachedLastScrollTop=c.top),d},this.shouldRefreshProbeLabels=function(){var a=n.design.simulationController.activeAnalysis,b=a!==n.cachedLastActiveAnalysis;b&&(n.cachedLastActiveAnalysis=a);var c=a===i.Interactive,d=a===i.DC;return c||b||d},this.ScrollListener=function(a){if(n.design&&a.viewobject&&n.shouldRefreshProbeLabels()&&n.checkScrollZoomCacheAndUpdate(a.viewobject)){n.design.getAllProbeInstances().forEach(function(b){var c=n.sheetTemplate.getObject(b.templateGUID);n.refreshProbeLabel(a.viewobject,b.templateGUID,c,b,!0)})}},this.AnimationListener=function(){var a=n.shouldRefreshProbeLabels();n.design&&n.viewObjects.forEach(function(b){if(a){n.design.getAllProbeInstances().forEach(function(a){var c=n.sheetTemplate.getObject(a.templateGUID);n.refreshProbeLabel(b,a.templateGUID,c,a,!0)})}})},this.activeAnalysisChangedHandler=function(){n.design&&n.viewObjects.forEach(function(a){n.design.getAllProbeInstances().forEach(function(b){b.children.forEach(function(b){var c=n.sheetTemplate.getObject(b.templateGUID);c&&"measurements"===b.variableName&&n.updateProbeText(a,b.templateGUID,c,b)})})})},this.netPropertiesChanged=function(a){var b=n.design.getAllWireInstances().filter(function(b){return b.netName===a.netName}),c=[],d=a.netlistController.useTransientInitialConditions(a.netName);b.forEach(function(a){if(a.children.reduce(function(a,b){var c=n.sheetTemplate.getObject(b.templateGUID);return a||c&&!0===c.visible},!1)){Array.prototype.push.apply(c,a.children.map(function(a){return a.templateGUID})),c.push(a.templateGUID);var b=a.children.filter(function(a){return"initialConditions"===a.textOrVarName}),e=n.sheetTemplate.getObject(b[0].templateGUID);n.sheetTemplate.changeWirePropertyVisibility(n.sheetTemplate.getObject(a.templateGUID),d,e)}}),n.viewObjects.forEach(function(a){this.updateTemplateObjects(a,c)},n)};var p=this.design.simulationController;p&&p.listeners.addListener(v.ActiveAnalysisChanged,this.activeAnalysisChangedHandler),this.design.netlistController.listener.addListener(m.NE_PROPSCHANGED,this.netPropertiesChanged),j&&(this.activeDesignChangeHandler=function(a){a.oldDesign&&!a.activeDesign&&(a.oldDesign.simulationController.listeners.removeListener(v.ActiveAnalysisChanged,n.activeAnalysisChangedHandler),a.oldDesign.netlistController.listener.removeListener(m.NE_PROPSCHANGED,n.netPropertiesChanged),j.listeners.removeListener(j.events.ACTIVEDESIGNCHANGED,n.activeDesignChangeHandler),n.propertyController.propertyChangeListeners.removeListener(x.INSTANCE_PROPERTY_CHANGED,o),n.propertyController.propertyChangeListeners.removeListener(x.MODEL_PROPERTY_CHANGED,o))},j.listeners.addListener(j.events.ACTIVEDESIGNCHANGED,this.activeDesignChangeHandler))}function e(a){var b=a.getBBox(),c=document.createElementNS("http://www.w3.org/2000/svg","rect");c.setAttribute("x",b.x-2),c.setAttribute("y",b.y),c.setAttribute("width",b.width+4),c.setAttribute("height",b.height),c.classList.add("nims_selectionbox"),a.insertBefore(c,a.firstChild)}function f(a,b){var c=a.getBBox();b.getAttribute("x")!=c.x-2&&b.setAttribute("x",c.x-2),b.getAttribute("y")!=c.y&&b.setAttribute("y",c.y),b.getAttribute("width")!=c.width+4&&b.setAttribute("width",c.width+4),b.getAttribute("height")!=c.height&&b.setAttribute("height",c.height)}function g(a,b,c,e,f,g,h,i,j,k){return new d(a,b,c,e,f,g,h,i,j,k)}var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return a("default",g),{setters:[function(a){h=a.default},function(a){i=a.default},function(a){j=a.convertDigitalStringToOneZero,k=a.EDigitalProbeSymbolText,l=a.EDigitalProbeDisplayValues},function(a){m=a.default},function(a){n=a.changeSymbol,o=a.doCreateSelectionRect},function(a){p=a.default},function(a){q=a.default},function(a){r=a.default},function(a){s=a.default},function(a){t=a.default},function(a){u=a.default},function(a){v=a.default},function(a){w=a.default},function(a){x=a.default}],execute:function(){d.prototype.constructor=d,d.prototype.forEach=function(a){this.viewObjects.forEach(a)},d.prototype.addView=function(a){this.viewObjects.push(a),this.updateViewObject(a),a.zoomIndependentListeners&&this.ScrollListener&&a.zoomIndependentListeners.addListener(a.viewEvents.SCROLL,this.ScrollListener),this.AnimationListener&&this.animationInterface&&this.animationInterface.addListener(this.AnimationListener)},d.prototype.removeView=function(a){this.viewObjects.splice(this.viewObjects.indexOf(a),1),a.zoomIndependentListeners&&this.ScrollListener&&a.zoomIndependentListeners.removeListener(a.viewEvents.SCROLL,this.ScrollListener),this.AnimationListener&&this.animationInterface&&this.animationInterface.removeListener(this.AnimationListener)},d.prototype.getView=function(a){var b=this.viewObjects.filter(function(b){return b.guid===a});return b.length?b[0]:null},d.prototype.updateViewObject=function(a){a.contentElement.setAttribute("showGrid",this.sheetTemplate.gridVisibility);var b=Number(a.contentElement.getGridSize());a.contentElement.setAttribute("sheetsize",this.sheetTemplate.size.width+" "+this.sheetTemplate.size.height),a.setContentSize(this.sheetTemplate.size.width*b,this.sheetTemplate.size.height*b)},d.prototype.sheetPropertiesChanged=function(){this.viewObjects.forEach(function(a){this.updateViewObject(a)},this)},d.prototype.sheetObjectsChanged=function(a){this.viewObjects.forEach(function(b){a.removed.length>0&&this.removeObjects(b,a.removed),a.added.length>0&&this.addObjects(b,a.added),a.modified.length>0&&this.updateTemplateObjects(b,a.modified)},this)},d.prototype.designObjectsChanged=function(a){this.context.guid==a.contextGUID&&this.sheetObjectsChanged(a)},d.prototype.updateAnimatedSymbol=function(a){var b=this,c=this.design.simulationController.simulationState===w.Stopped||this.design.simulationController.simulationState===w.Paused;if(a.activeSymbolID){var d=a.designComponent.getSymbolBlueprint(a.activeSymbolID);d&&(d.resetFunction||d.animateFunction||d.symbolScript)&&function(){var e={};b.viewObjects.length>0&&b.viewObjects[0].contentElement.sheetTemplateController.getPropertiesForItem(a.contextGUID,a.templateGUID).forEach(function(b){var c=b.isInstanceVar?a.getInstanceVariableValue(a.activeModelID,b.name,!0):a.getModelVariableValue(a.activeModelID,b.name,!0);e[b.name]=c});var f=b,g=c?d.resetFunction:d.animateFunction;g?q(g,e,function(b){b.error||(a.lastStyles=b,f.animatedComponentUpdated({contextGUID:a.contextGUID,templateGUID:a.templateGUID,styles:b}))}):d.symbolScript&&q(d.symbolScript,{parameters:e,reset:c},function(b){b.error||b.animation&&(a.lastStyles=b.animation,f.animatedComponentUpdated({contextGUID:a.contextGUID,templateGUID:a.templateGUID,styles:b.animation}))})}()}},d.prototype.propertyChanged=function(a){var b=this,c=this.design.findInstance(a.contextGUID,a.templateGUID);c.children&&function(){for(var d=void 0,e=0;e<c.children.length;++e)if(c.children[e].variableName==a.propertyName){d=c.children[e];break}d&&b.viewObjects.forEach(function(b){var c=this.sheetTemplate.getObject(d.templateGUID);this.updateText(b,d.templateGUID,c,d),b.contentElement.sheetTemplateController.componentController.updateChildItemLocations(a.templateGUID)},b)}(),this.updateAnimatedSymbol(c)},d.prototype.removeObjects=function(a,b){a.contentElement.removeObjects(b),u.updateAdorners(a.contentElement.getSelection(!1),a.contentElement),this.wiringInterface.clearLollipopsForObjects(b,a.contentElement)},d.prototype.addObjects=function(a,b){b.forEach(function(b){var c=this.sheetTemplate.getObject(b),d=this.design.findInstance(this.context.guid,b);if(c&&d){var e={viewObject:a,guid:b,templateObject:c,instance:d};c.addToView&&c.addToView(this,e)}},this)},d.prototype.addComponentSection=function(a,b,c,d){function e(){g.classList.remove("hidden");var a=c.matrix.a,b=c.matrix.b,d=c.matrix.c,e=c.matrix.d;!c.freshSymbolFlag||a*e!=-1&&b*d!=1||(f.flipTextHorizontal(g),c.freshSymbolFlag=!1)}var f=this,g=null;c.symbol&&(g=c.symbol.cloneNode(!0),g.classList.add("hidden")),a.contentElement.addComponent({templateGUID:b,matrix:c.matrix,symbol:g,model:!!d.activeModelID,pcbpackage:!!d.activePackageID}),f.updateBoundingBox(a,b),f.resetSymbolPins(a,g,c,d),f.wiringInterface.addLollipopsForComponent(c,a.contentElement),a.contentElement.sheetTemplateController.componentController.updateChildItemLocations(b);var h=d.designComponent?d.designComponent.getSymbolBlueprint(d.activeSymbolID):null;h&&(h.resetFunction||h.symbolScript)?function(){var b={};a.contentElement.sheetTemplateController.getPropertiesForItem(d.contextGUID,d.templateGUID).forEach(function(a){var c=a.isInstanceVar?d.getInstanceVariableValue(d.activeModelID,a.name,!0):d.getModelVariableValue(d.activeModelID,a.name,!0);b[a.name]=c}),h.resetFunction?q(h.resetFunction,b,function(a){a.error||(f.updateAnimation(g,a),e())}):h.symbolScript&&q(h.symbolScript,{parameters:b,reset:!0},function(a){!a.error&&a.animation&&(f.updateAnimation(g,a.animation),e())})}():e()},d.prototype.updateSymbolPinText=function(a,b,c){var d=c.querySelector('[oecl\\:placeholder="symbolPin"]');if(d){var e=d.querySelector("tspan");if(e){var f=this.componentAPI.getSymbolPinNameForSymbolPinID(a.oeclComponent,b.sectionName,c.getAttribute("oecl:pinid"),b.activeSymbolID);e.firstChild.data=f}d.getAttribute("default")?"hidden"===d.getAttribute("default")?a.showSymbolPinNames?d.classList.remove("hidden"):d.classList.add("hidden"):d.classList.remove("hidden"):"hidden"===d.getAttribute("class")?(d.setAttribute("default","hidden"),a.showSymbolPinNames?d.classList.remove("hidden"):d.classList.add("hidden")):(d.setAttribute("default","visible"),d.classList.remove("hidden"))}},d.prototype.addWire=function(a,b,c,d){a.contentElement.addWire({path:c.path,guid:b}),a.contentElement.sheetTemplateController.wiringController.updateChildItemLocations(c,d)},d.prototype.addJunction=function(a,b,c){a.contentElement.addJunction({guid:b,point:c.point}),this.wiringInterface.addLollipopsForJunction(c,a.contentElement)},y=function(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","text");return c.setAttribute("x",0),c.setAttribute("y",0),(Array.isArray(b)?b:[b]).forEach(function(a,b){var d=document.createElementNS("http://www.w3.org/2000/svg","tspan");d.setAttribute("x",0),d.setAttribute("y",20*b),d.textContent=a,c.appendChild(d)}),c.classList.add("nims_textcore"),a.appendChild(c),c},d.prototype.addText=function(a,b,c,d){var f=d.getText(),g=a.contentElement.schematicObjectsLayer,h=document.createElementNS("http://www.w3.org/2000/svg","g");h.setAttribute("id",b),h.setAttribute("parent",d.parent?d.parent.templateGUID:""),h.classList.add("nims_text");var i=c.align;h.setAttribute("align",i),d&&d.variableName&&d.parent&&h.classList.add("nims_text_var_"+d.variableName.replace(/\s+/g,"_")),h.classList.add("nims_text"),c.standAlone&&h.classList.add("standalone");var j=c.matrix.clone(),k=a.contentElement.gridToSvg({x:j.e,y:j.f});j.e=k.x,j.f=k.y,h.setAttribute("transform",j.toCSS());var l=y(h,f.split("\n")),m=a.contentElement.getGridSize();l.style.fontSize=c.fontSize*m,g.appendChild(h);var n=a.contentElement.getRawBoundingBox(b);n&&this.sheetTemplate.setItemBoundingBox(b,n),e(h),!1===c.visible&&h.classList.add("hidden")},d.prototype.addProbe=function(a,b,c,d){if(c.fragment){var e=a.contentElement.probeLayer,f=document.createElementNS("http://www.w3.org/2000/svg","g");f.classList.add("nims_probe"),f.setAttribute("id",b);var g=document.createElementNS("http://www.w3.org/2000/svg","g");f.appendChild(g),g.classList.add("nims_graphics"),g.appendChild(c.fragment.cloneNode(!0)),!0===c.disabled&&g.setAttribute("disabled","disabled"),e.appendChild(f),o(g,f,e.ownerSVGElement);var h=c.matrix.clone();h.e=h.e*a.contentElement.getGridSize(),h.f=h.f*a.contentElement.getGridSize(),f.setAttribute("transform",h.toCSS());var i=g.querySelector(".arrow");if(i){var j=d.reversed?c.vertical?270:180:c.vertical?90:0,k=h.inverse().translate(h.e,h.f),l=new p;l.transform(k.a,k.b,k.c,k.d,k.e,k.f).rotateDeg(j),i.setAttribute("transform",l.toCSS())}for(var m=d.plot.color,n=g.querySelectorAll(".colorindicator"),q=0;q<n.length;q++){var r=c.probeType===t.PROBE_REFERENCE?this.design.probeController.referenceProbeColour:"rgba("+m.r+", "+m.g+", "+m.b+", "+m.a+")";n[q].style.fill=r,n[q].style.stroke=r}this.updateBoundingBox(a,b),a.contentElement.sheetTemplateController.probeController.updateChildItemLocations(b),this.design.probeController.refreshProbeVariables(d,this.sheetTemplate,this.design.simulationController.pinInfoList),a.contentElement.sheetTemplateController.probeController.updateChildItemLocations(b),this.refreshProbeLabel(a,b,c,d)}},d.prototype.updateTemplateObjects=function(a,b){b.forEach(function(b){var c=this.sheetTemplate.getObject(b),d=this.design.findInstance(this.context.guid,b);if(c&&d){var e={viewObject:a,guid:b,templateObject:c,instance:d};c.updateView&&c.updateView(this,e)}},this)},d.prototype.replaceComponentSymbol=function(a){var b=this;a.templateComponent&&function(){var d=a.templateComponent,e=d.templateGUID,f=b;b.viewObjects.forEach(function(a){var b=a.contentElement.getSingleObject(e),c=this.sheetTemplate.getObject(e),d=this.design.findInstance(this.context.guid,e);d&&b&&(this.wiringInterface.clearLollipopsForObjects([e],a.contentElement),n(b,c.symbol.cloneNode(!0)),this.wiringInterface.addLollipopsForComponent(c,a.contentElement),c.freshSymbolFlag=!0,this.updateComponentSection(a,e,c,d),a.contentElement.selectioninterface.fireSelectionListener(a.contentElement))},b);var g={pins:[],junctions:[]},h=f.design.findInstancesOfTemplate(e);g.pins=h.reduce(function(a,b){var c=[];return b.pinInstances.forEach(function(a){return c.push(a)}),a.concat(c.map(function(a){return{section:d,connectitem:f.design.netlistController.getTerminal(a)}}))},[]),c(f.viewObjects,f.sheetTemplate,f.wiringInterface,g)}()},d.prototype.replaceComponentSymbolUndo=function(a){var b=this;a.templateComponent&&function(){var d=a.templateComponent,e=d.templateGUID,f=b;f.viewObjects.forEach(function(a){f.wiringInterface.clearLollipopsForObjects([e],a.contentElement),f.wiringInterface.addLollipopsForComponent(d,a.contentElement)});var g={pins:[],junctions:[]},h=f.design.findInstancesOfTemplate(e);g.pins=h.reduce(function(a,b){var c=[];return b.pinInstances.forEach(function(a){return c.push(a)}),a.concat(c.map(function(a){return{section:d,connectitem:f.design.netlistController.getTerminal(a)}}))},[]),c(f.viewObjects,f.sheetTemplate,f.wiringInterface,g)}()},d.prototype.updateComponentSection=function(a,b,c,d){var e=a.contentElement.getSingleObject(b);if(e){var f=a.contentElement.gridToSvg({x:c.matrix.e,y:c.matrix.f}),g=c.matrix.clone(),h=!0;g.e=f.x,g.f=f.y;var i=g.a,j=g.b,k=g.c,l=g.d,m=e.transform.baseVal.getItem(0).matrix.a,n=e.transform.baseVal.getItem(0).matrix.c;c.freshSymbolFlag||i*m!=-1&&k*n!=-1||(this.flipTextHorizontal(e),h=!1),e.setAttribute("transform",g.toCSS()),e.classList.remove("hidden"),this.updateBoundingBox(a,b),this.resetSymbolPins(a,e,c,d),this.keepUpdatedObjectInSheet(a,c),!c.freshSymbolFlag||i*l!=-1&&j*k!=1||(this.flipTextHorizontal(e),h=!1),c.hadBeenFlipped&&h&&this.flipTextHorizontal(e),c.freshSymbolFlag=!1}this.wiringInterface.resetLollipopPositionForComponent(b,a.contentElement),a.contentElement.sheetTemplateController.componentController.updateChildItemLocations(b),a.contentElement.sheetTemplateController.componentController.updateChildItemLocations(b)},z=new Map,d.prototype.keepUpdatedObjectInSheet=function(a,b){var c=this;if(!this.sheetController.undo.inUndoRedo){var d=a.contentElement.getRawBoundingBox(b.templateGUID);d.left=Math.floor(d.left),d.top=Math.floor(d.top),d.right=Math.ceil(d.right),d.bottom=Math.ceil(d.bottom);var e=0,f=0;d.right>this.sheetTemplate.size.width?e=-1*Math.min(d.left,Math.ceil(d.right-this.sheetTemplate.size.width)):d.left<0&&(e=-1*d.left),d.bottom>this.sheetTemplate.size.height?f=-1*Math.min(d.top,Math.ceil(d.bottom-this.sheetTemplate.size.height)):d.top<0&&(f=-1*d.top),0===e&&0===f||function(){var a=d,g=z.get(b);g?g.find(function(b){return b.left==a.left&&b.top==a.top&&b.right==a.right&&b.bottom==a.bottom})?(e=0,f=0,console.log("A recursion was prevented please check the code to prevent this recursion from happening")):g.push(a):(g=[a],z.set(b,g)),0===e&&0===f||(c.sheetController.moveObjects({templateGUIDs:[b.templateGUID],offset:{x:e,y:f}}),g.pop())}()}},d.prototype.resetSymbolPins=function(a,b,c,d){for(var e=b.querySelectorAll("[oecl\\:pinid]"),f=0;f<e.length;f++){var g=e[f],h=g.querySelector("[oecl\\:pin]"),i=h.querySelector("line"),j=i.getTransformToElement(i.ownerSVGElement),k=a.contentElement.contentSVG.createSVGPoint(),l=null;if(i){0!==i.x1.baseVal.value||0!==i.y1.baseVal.value?(k.x=i.x1.baseVal.value,k.y=i.y1.baseVal.value):(k.x=i.x2.baseVal.value,k.y=i.y2.baseVal.value);var m=k.matrixTransform(j);l=a.contentElement.svgToGrid(m)}k.x=0,k.y=0;var n=k.matrixTransform(j),o=a.contentElement.svgToGrid(n),p=g.getAttribute("oecl:pinid");c.updateSymbolPinLocation(p,o,l||{x:o.x,y:o.y}),this.updateSymbolPinText(c,d,g)}},d.prototype.updateWireSegment=function(a,b,c,d){var e=a.contentElement.getSingleObject(b);e&&(a.contentElement.updateWirePath(e,c.path),e.classList.remove("hidden"),a.contentElement.sheetTemplateController.wiringController.updateChildItemLocations(c,d))},d.prototype.updateJunction=function(a,b,c){var d=a.contentElement.getSingleObject(b);if(d){var e=a.contentElement.gridToSvg(c.point);d.setAttribute("transform","translate("+e.x+" "+e.y+")"),d.classList.remove("hidden"),this.wiringInterface.clearLollipopsForObjects([b],a.contentElement),this.wiringInterface.addLollipopsForJunction(c,a.contentElement)}},d.prototype.updateTextPosition=function(a,b,c){var d=a.contentElement.getSingleObject(b);if(d){var e=c.matrix.clone(),f=a.contentElement.gridToSvg({x:e.e,y:e.f});e.e=f.x,e.f=f.y,d.setAttribute("transform",e.toCSS());var g=c.align;"left"==g&&c.angle>90?g="right":"right"==g&&c.angle>90&&(g="left"),d.setAttribute("align",g),this.keepUpdatedObjectInSheet(a,c)}},d.prototype.updateTextContent=function(a,b,c,d){var e=!1,f=a.contentElement.getSingleObject(b),g=d.getText();if(f){var h=f.querySelector("text"),i=void 0;if(g!=d.cachedLastGetText){e=!0,d.cachedLastGetText=g;var j=g.split("\n");i=h.querySelectorAll("tspan"),i.length!==j.length&&(h.parentNode.removeChild(h),h=y(f,j),i=h.querySelectorAll("tspan"));for(var k=0;k<i.length;k++){var l=i[k];l.style.fontSize=c.fontSize*a.contentElement.getGridSize(),l.textContent=j[k]}}}return e},d.prototype.updateText=function(a,b,c,d){this.updateTextPosition(a,b,c);var g=this.updateTextContent(a,b,c,d),h=a.contentElement.getSingleObject(b);if(h){h.classList.remove("hidden");var i=h.querySelector(".nims_textcore"),j=a.contentElement.getRawBoundingBoxForNode(i);this.sheetTemplate.setItemBoundingBox(b,j);var k=h.querySelector(".nims_selectionbox");!g&&k||(k?f(i,k):e(h)),!1===c.visible&&h.classList.add("hidden")}},d.prototype.refreshProbeLabel=function(a,b,c,d){d.children.forEach(function(b){var c=this.sheetTemplate.getObject(b.templateGUID);c&&"measurements"===b.variableName&&this.updateProbeTextContents(a,b.templateGUID,c,b)},this)},d.prototype.updateProbe=function(a,b,c,d){var e=a.contentElement.getSingleObject(b),f=this,g=a.contentElement.sheetTemplateController.design.probeController;a.contentElement.sheetTemplateController.probeController.replaceProbeImage(e,c.probeType,c,function(){if(e){var i=a.contentElement.gridToSvg({x:c.matrix.e,y:c.matrix.f}),j=c.matrix.clone();j.e=i.x,j.f=i.y,e.setAttribute("transform",j.toCSS()),e.classList.remove("hidden");var k=e.querySelector(".nims_graphics");c.disabled?k.setAttribute("disabled","disabled"):k.removeAttribute("disabled");var l=k.querySelector(".arrow");if(l){var m=d.reversed?c.vertical?270:180:c.vertical?90:0,n=j.inverse().translate(i.x,i.y),o=new p;o.transform(n.a,n.b,n.c,n.d,n.e,n.f).rotateDeg(m),l.setAttribute("transform",o.toCSS())}f.updateBoundingBox(a,b)}for(var q=d.plot.color,r=e.querySelectorAll(".colorindicator"),s=0;s<r.length;s++){var u=c.probeType===t.PROBE_REFERENCE?g.referenceProbeColour:"rgba("+q.r+", "+q.g+", "+q.b+", "+q.a+")";r[s].style.fill=u,r[s].style.stroke=u}a.contentElement.sheetTemplateController.probeController.updateChildItemLocations(b);var v=h.find(d.children,function(a){return"measurements"===a.variableName});if(v){var w=a.contentElement.getSingleObject(v.templateGUID);w&&(w.displayVoltage=c.probeType===t.PROBE_VOLTAGE||c.probeType===t.PROBE_VOLTAGE_CURRENT,w.displayCurrent=c.probeType===t.PROBE_CURRENT||c.probeType===t.PROBE_VOLTAGE_CURRENT,w.displayInstantaneous=d.displayInstantaneous,w.displayPeriodic=d.displayPeriodic,w.displayDc=d.displayDc,w.displayDigital=c.probeType===t.PROBE_DIGITAL),f.updateProbeText(a,v.templateGUID,f.sheetTemplate.getObject(v.templateGUID),v)}a.contentElement.sheetTemplateController.probeController.updateChildItemLocations(b)})},d.prototype.updateProbeText=function(a,b,c,d){this.updateProbeTextContents(a,b,c,d);var e=a.contentElement.getSingleObject(b);e.classList.remove("hidden"),c.visible&&0!==e.children.length||e.classList.add("hidden")},d.prototype.updateProbeIdText=function(a,b,c,d){var e=a.contentElement.getSingleObject(b),f=d.getText();if(c.parent.probeType===t.PROBE_VOLTAGE&&e){var g=e.querySelector("text"),h=void 0,i=f.split("\n");h=g.querySelectorAll("tspan"),h.length!==i.length&&(g.parentNode.removeChild(g),g=y(e,i),h=g.querySelectorAll("tspan"));for(var j=0;j<h.length;j++){var k=h[j];if(k.style.fontSize=c.fontSize*a.contentElement.getGridSize()/(j+1),k.setAttribute("y",15*j),j>0){var l=a.contentElement.sheetTemplateController.probeController.getProbeStateBasedOnReference(c.parent,!1);k.style.textDecoration=l?"line-through":"none"}}}},d.prototype.updateProbeTextContents=function(a,b,c,d){var e=d.getText(),f=a.contentElement.getSingleObject(b);if(f){f.probeData=e;var g=a.contentElement.getRawBoundingBox(c.parent.templateGUID),h=a.contentElement.gridToSvg({x:g.right,y:(g.top+g.bottom)/2}),i=a.contentToView(h),m=a.contentToView({x:0,y:0}),n=document.getElementById(b);n&&(n.style.left=i.x-m.x+"px",n.style.top=i.y-m.y+"px")}if(d.parent){var o=this.sheetTemplate.getObject(d.parent.templateGUID);if(o.probeType&&o.probeType===t.PROBE_DIGITAL)for(var p=a.contentElement.getSingleObject(o.templateGUID),q=p.querySelectorAll(".colorindicator"),r=0;r<q.length;r++){for(var s=q[r],u=0;u<s.children.length;u++)"text"===s.children[u].tagName&&(s.children[u].innerHTML=void 0!==e.vDigital?j(e.vDigital):k.NoValue);if(void 0!=e){var v=d.parent,w=v.plot.color,x=void 0,y=e.vDigital===l.High,z=e.vDigital===l.Low;if(y||z){var A=.2126*w.r+.6152*w.g+.0722*w.b,B=30,C=A;y?C+=B:C-=B,C=Math.min(255,Math.max(20,C));var D=C/A;x={r:Math.floor(w.r*D),g:Math.floor(w.g*D),b:Math.floor(w.b*D),a:w.a}}else x=w;s.style.fill="rgba("+x.r+", "+x.g+", "+x.b+", "+x.a+")",s.style.stroke=s.style.fill}}}},d.prototype.addProbeText=function(a,b){var c=a.contentElement.zoomIndependentTextLayer,d=document.createElement("probe-display");d.classList.add("nims_probe_text"),d.id=b,d.style.position="absolute",c.appendChild(d)},d.prototype.updateBoundingBox=function(a,b){var c=a.contentElement.getObjectBoundingBox(b);c&&this.sheetTemplate.setItemBoundingBox(b,c)},d.prototype.animatedComponentUpdated=function(a){this.context.guid===a.contextGUID&&this.viewObjects.forEach(function(b){var c=this.sheetTemplate.getObject(a.templateGUID),d=this.design.findInstance(a.contextGUID,a.templateGUID);if(c&&d){var e=b.contentElement.getSingleObject(c.templateGUID);this.updateAnimation(e,a.styles)}},this)},d.prototype.updateAnimation=function(a,b){if(a){var c=function(c){if(b.hasOwnProperty(c)){b[c].forEach(function(b){var d=void 0;"number"==typeof b.value?d=b.value:"object"!=typeof b.value||void 0===b.value.a||isNaN(b.value.a)||void 0===b.value.b||isNaN(b.value.b)||void 0===b.value.g||isNaN(b.value.g)||void 0===b.value.r||isNaN(b.value.r)||(d="rgba("+b.value.r+","+b.value.g+","+b.value.b+","+b.value.a+")");var e=a.querySelectorAll(c);if(void 0!==d){({})[b.property]=d;for(var f=function(a){var c=e[a];b.animation&&b.animation.duration?!c.hasAttribute(b.property)&&c.style.hasOwnProperty(b.property)?c.style[b.property]!=d&&(c.style.transitionDuration=b.animation.duration/1e3+"s",c.style.transitionProperty=b.property,c.style[b.property]=d):function(){var a=c.getAttribute(b.property);a!=d&&function(){var e=window.performance.now(),f=e+b.animation.duration;a=parseFloat(a);var g=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/30)};g(function h(){var i=window.performance.now(),j=d-a,k=(i-e)/b.animation.duration,l=j*k+a;l=Math.abs(l<.001)?Math.round(l):l,l=i>=f?d:l,c.setAttribute(b.property,l),i<f&&g(h)})}()}():!c.hasAttribute(b.property)&&c.style.hasOwnProperty(b.property)?c.style[b.property]=d:c.setAttribute(b.property,d)},g=0;g<e.length;g++)f(g)}})}};for(var d in b)c(d)}}}}}),a.register("46",["28","24","47","48","3a","49","43","40"],function(a,b){"use strict";function c(a,b,c,d,q,r,s,t,u){var v=!1,w=[],x=a,y=function a(b,c,d){b()?c():setTimeout(function(){a(b,c,d)},d)};return x.commandInterface.addContextChangeListener(function(){w.forEach(function(a){a.viewControllers.forEach(function(a){a.viewObjects.forEach(function(a){n.updateAdorners(a.contentElement.getSelection(!1),a.contentElement),a.contentElement.updateSelectionDisplay(x.commandInterface.activeContext,void 0)})})})}),{set undoEnabled(a){x.undo.enabled=a},get undoEnabled(){return x.undo.enabled},get activeDesign(){return x.activeDesign},get activeView(){return x.activeView},get sheets(){return w},get sheetGroups(){return i()},newDesign:function(a,b){var c=this,d=this.createDesign(a),f=this;d&&function(){d.topLevelTemplateGroup=c.createSheetGroup(e());var a=e(),g=e(),h=f.createSheet(d,a,[g],"Sheet"),i=f.createView(h.sheetTemplateController,h.viewControllers[0],e(),g,b);y(function(){return v},function(){f.activateView(i.viewObject.guid)},50)}()},destroyDesign:function(){b.innerHTML="",c.innerHTML="",w=[],x.activeDesign&&(x.activeDesign.animatedPartsController.detachFromAnimationController(x.animationController),x.activeDesign.animatedPartsController.destroyAnimatedPartController(),x.activeDesign.animatedPartsController=null,x.activeDesign.animatedWiresController&&(x.activeDesign.animatedWiresController.detachFromAnimationController(x.animationController),x.activeDesign.animatedWiresController.destroyAnimatedWiresController(),x.activeDesign.animatedWiresController=null),x.simulationController.clearPinInfo()),x.activeDesign=null,x.activeView=null,x.undo.clearBuffer(),j()},createSheet:function(a,b,c,e){var h=new g(b);h.name=e,a.topLevelTemplateGroup.addSheetTemplate(h);var i=l(h,a,x.undo,u,t),j=[];c.forEach(function(b){var c=f(b);a.addContextForTemplate(h.sheetGUID,c.guid),j.push(o(h,a,c,x.animationController,x.wiringController,t,u,x,i,d))});var k={sheetTemplateController:i,viewControllers:j};return w.push(k),k},createView:function(a,e,f,g,h){var i=this,j=document.createElement("div"),k=document.createElement("div"),l=document.createElement("schematic-view");j.classList.add("nims_page"),k.classList.add("nims_content"),b.appendChild(j),j.appendChild(k),j.style.position="absolute",j.style.top=j.style.left=j.style.bottom=j.style.right="0",l.zoomIndependedParent=j,l.manipulationinterface=d,l.inputeventsinterface=q,l.selectioninterface=r,l.wiringcontroller=s;var n=m.create(k,l,q,f,x.commandInterface,h);k.setAttribute("viewguid",n.guid),l.viewObject=n,l.initialize(p,x),l.sheetTemplateController=a,l.contextGUID=g,e.addView(n);var o=document.createElement("div");return o.classList.add("nims_viewtab"),o.textContent=a.sheetTemplate.name+":"+e.viewObjects.length,o.setAttribute("title",a.sheetTemplate.name+":"+e.viewObjects.length),o.setAttribute("viewguid",n.guid),c.appendChild(o),o.addEventListener("click",function(){i.activateView(this.getAttribute("viewguid"))}),c.querySelectorAll(".nims_viewtab").length>1&&b.parentNode.classList.add("nims_tabsvisible"),y(function(){return 0!==l.offsetWidth&&0!==l.offsetHeight&&0!==l.parentNode.offsetWidth&&0!==l.parentNode.offsetHeight&&0!==b.offsetWidth&&0!==b.offsetHeight},function(){l.viewObject.centerContent(),v=!0},50),l},activateView:function(a){for(var d=null,e=0;e<w.length;e++){for(var f=0;f<w[e].viewControllers.length&&!(d=w[e].viewControllers[f].getView(a));f++);if(d)break}if(d){x.activeView=d.contentElement;for(var g=c.querySelectorAll(".nims_viewtab"),h=0;h<g.length;h++)g[h].removeAttribute("selected");for(var i=b.querySelectorAll(".nims_content"),j=0;j<g.length;j++)i[j].removeAttribute("selected");c.querySelector(".nims_viewtab[viewguid='"+a+"']").setAttribute("selected",""),b.querySelector(".nims_content[viewguid='"+a+"']").setAttribute("selected","")}},createSheetGroup:function(a){return h(a)},getSheetGroup:function(a){var b=i().filter(function(b){return b.guid===a});return 1===b.length?b[0]:null},createDesign:function(a){return this.destroyDesign(),x.activeDesign=k.createDesign(x.undo,a),x.activeDesign.animatedPartsController.setDesignController(this),x.activeDesign.animatedPartsController.attachToAnimationController(x.animationController),x.activeDesign.animatedWiresController&&x.activeDesign.animatedWiresController.attachToAnimationController(x.animationController,function(){return x.activeDesign}),x.activeDesign},getGraph:function(a,b){var c=this.activeDesign,d=x.$.nims_simoutputcontainer.querySelector("#graph"),e=d.screenShot(a,b);return e?{hasData:c.simulationController.dataManager.length>0,data:e}:null},getMiniPreviewSVG:function(a,b,c){var d=this.activeView,e=d.contentSVG.querySelector("#nims_view_content");return a.saveSVGData(e,c,b,20,[]).data},getMiniPreviewPNG:function(a,b,c){var d=this.activeView,e=d.contentSVG.querySelector("#nims_view_content"),f=e.getBBox(),g=Math.max(f.width,10),h=Math.max(f.height,10),i=c.baseWidth||1024,j=c.minWidth||500,k=c.minHeight||200,l=c.maxHeight||512;i/g*h>l&&(i=(l-2)/h*g);var m={data:this.getMiniPreviewSVG(a,c.background,{width:Math.max(j,i),height:Math.max(i/g*h,k)}),width:Math.max(j,i),height:Math.max(i/g*h,k)};a.svgToPNG(m,b)},getPreviewHTML:function(a){var b=this.activeView,c=b.contentSVG,d=b.viewObject.getZoom(),e=b.zoomIndependentTextLayer,f=b.viewObject.getContentSize(),g=document.implementation.createHTMLDocument("preview"),h=g.documentElement,i=h.appendChild(g.createElement("body")),j=g.createElement("div");j.classList.add("circuitpreview"),j.style.left=j.style.top=j.style.bottom=j.style.right="0",j.style.position="absolute",j.style.overflow="hidden";for(var k=0;k<x.classList.length;k++)/web-multisim/gi.test(x.classList[k])||j.classList.add(x.classList[k]);for(var l=0;l<b.classList.length;l++)/schematic-view/gi.test(b.classList[l])||j.classList.add(b.classList[l]);for(var m=0;m<b.attributes.length;m++)/style|class/gi.test(b.attributes[m].name)||j.setAttribute(b.attributes[m].name,b.attributes[m].value);i.appendChild(j);var n=g.createElement("div");n.style.position="relative",n.style.width=1.1*f.cx+"px",n.style.height=1.1*f.cy+"px";var o=g.createElement("div");o.style.position="absolute",o.style.left=f.cx/20+"px",o.style.top=f.cy/20+"px",o.style.width=f.cx+"px",o.style.height=f.cy+"px";var p=a.collectSVGData(c,!1,!0);p.clone.setAttribute("width","100%"),p.clone.setAttribute("height","100%"),p.clone.insertBefore(p.css,p.clone.firstChild);var q=a.collectHTMLData(e,".circuitpreview"),r=g.createElement("div");r.innerHTML=e.outerHTML.replace(/<probe-display/g,"<div-temp").replace(/<\/probe-display/g,"</div-temp");for(var s=r.querySelectorAll("div-temp"),t=0;t<s.length;t++){var u=s[t];u.style.left=100*parseInt(u.style.left,10)/d+"px",u.style.top=100*parseInt(u.style.top,10)/d+"px",u.classList.add("probe-display-main")}return r.innerHTML=r.innerHTML.replace(/div-temp/g,"div"),o.appendChild(p.clone),o.appendChild(q.css),o.appendChild(r.firstChild),n.appendChild(o),j.appendChild(n),(new window.XMLSerializer).serializeToString(j).replace(/xmlns:NS\d+="" /gi,"").replace(/NS\d+:/gi,"")},getSimulationData:function(a){return a.dataManager.getSimulationDataToSave()}}}function d(a){p=a}var e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.SheetTemplate,h=a.createSheetTemplateGroup,i=a.getSheetGroups,j=a.destroyAllTemplateSheetGroups},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default}],execute:function(){p=null,q={create:c,initialize:d},a("default",q)}}}),function(){var b=a.amdDefine,d=d||function(a){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},g=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),h=a.webkitRequestFileSystem,i=a.requestFileSystem||h||a.mozRequestFileSystem,j=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},k="application/octet-stream",l=0,m=4e4,n=function(a){var b=function(){"string"==typeof a?c().revokeObjectURL(a):a.remove()};setTimeout(b,m)},o=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(a){j(a)}}},p=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\ufeff",a],{type:a.type}):a},q=function(b,j,m){m||(b=p(b));var q,r,s,t=this,u=b.type,v=!1,w=function(){o(t,"writestart progress write writeend".split(" "))},x=function(){if(r&&g&&"undefined"!=typeof FileReader){var d=new FileReader;return d.onloadend=function(){var a=d.result;r.location.href="data:attachment/file"+a.slice(a.search(/[,;]/)),t.readyState=t.DONE,w()},d.readAsDataURL(b),void(t.readyState=t.INIT)}if(!v&&q||(q=c().createObjectURL(b)),r)r.location.href=q;else{void 0===a.open(q,"_blank")&&g&&(a.location.href=q)}t.readyState=t.DONE,w(),n(q)},y=function(a){return function(){if(t.readyState!==t.DONE)return a.apply(this,arguments)}},z={create:!0,exclusive:!1};return t.readyState=t.INIT,j||(j="download"),e?(q=c().createObjectURL(b),void setTimeout(function(){d.href=q,d.download=j,f(d),w(),n(q),t.readyState=t.DONE})):(a.chrome&&u&&u!==k&&(s=b.slice||b.webkitSlice,b=s.call(b,0,b.size,k),v=!0),h&&"download"!==j&&(j+=".download"),(u===k||h)&&(r=a),i?(l+=b.size,void i(a.TEMPORARY,l,y(function(a){a.root.getDirectory("saved",z,y(function(a){var c=function(){a.getFile(j,z,y(function(a){a.createWriter(y(function(c){c.onwriteend=function(b){r.location.href=a.toURL(),t.readyState=t.DONE,o(t,"writeend",b),n(a)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&x()},"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=t["on"+a]}),c.write(b),t.abort=function(){c.abort(),t.readyState=t.DONE},t.readyState=t.WRITING}),x)}),x)};a.getFile(j,{create:!1},y(function(a){a.remove(),c()}),y(function(a){a.code===a.NOT_FOUND_ERR?c():x()}))}),x)}),x)):void x())},r=q.prototype,s=function(a,b,c){return new q(a,b,c)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,b,c){return c||(a=p(a)),navigator.msSaveOrOpenBlob(a,b||"download")}:(r.abort=function(){var a=this;a.readyState=a.DONE,o(a,"abort")},r.readyState=r.INIT=0,r.WRITING=1,r.DONE=2,r.error=r.onwritestart=r.onprogress=r.onwrite=r.onabort=r.onerror=r.onwriteend=null,s)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==c&&c.exports?c.exports.saveAs=d:void 0!==b&&null!==b&&null!==b.amd&&b("4a",[],function(){return d})}(),a.register("4b",["4a","2d","10","29","4c","4d"],function(a,b){"use strict";function c(a,b){function c(){b.clearGroups()}function m(a,c,d,e,f){var i=c;b.doMessage({type:a==k.responseCodes.RC_OK||a==k.responseCodes.RC_CREATED?h.NT_INFO:h.NT_ERROR,toast:!f&&(a==k.responseCodes.RC_OK||a==k.responseCodes.RC_CREATED),message:i,group:{name:d,info:{displayName:g.i18n.translate(d).fetch(),timestamp:new Date(e.getTime())}}})}function n(a){m(k.responseCodes.RC_UNAUTHORIZED,g.i18n.translate(l.AM_NOTAUTHORIZED_WRITE).fetch(a),"Save",new Date)}function o(a){(a||U())&&d(H().blob,(a||U().name)+".svg")}function p(a,b){(b||U())&&d(a instanceof window.Blob?a:new window.Blob([a],{type:"application/octet-stream"}),b||U().name+".msjs")}function q(a,b,c,d){for(var e={valid:!1,errorMessage:g.i18n.translate("Cannot read file.").fetch()},f=0;f<V.length&&(!V[f].canReadThisFileType(a,c)||(e=V[f].parseFileData(a,b,d,{useFloat64Arrays:!0}),!e.valid));f++);return e}function r(a){return{design:{id:a.projectID,guid:a.guid,name:a.designName,metaData:{description:a.designMetaData.description,tags:a.designMetaData.tags.slice(),private:a.designMetaData.private},copiedFrom:a.copiedFrom},cloud:a.cloudProject}}function s(a,b,c,d,e,f){k.ensureProject(function(h,i){i==k.responseCodes.RC_OK||i==k.responseCodes.RC_CREATED?function(){var j=i==k.responseCodes.RC_OK,n=[],o=[],p=function(a,c,h){var i=n.indexOf(c);if(-1!=i&&(h!=k.responseCodes.RC_OK&&h!=k.responseCodes.RC_CREATED?o=o.concat(n.splice(i,1)):n.splice(i,1)),!n.length&&!o.length){b(h,a,null,null,null,function(){null!==f&&""===f||m(h,f||g.i18n.translate(l.AM_SAVE_OK).fetch(a.design.name),d,e,null!==f)})}},q=function(a){w(a),k.ensureProject.failCount={msjs:0,pngthumbnailcircuit:0,previewcircuit:0,thumbnailcircuit:0,pngthumbnail:0,"previewgraph.png":0,simdata:0},c.forEach(function(c){var f=k.buildFileName(a.design.guid,c),h=function h(i,j){k.ensureProject.previousProjectSaveAttemptID=void 0;var n=!1;if(!i)if(j==k.responseCodes.RC_UNAUTHORIZED)m(j,g.i18n.translate(l.AM_NOTAUTHORIZED_WRITE).fetch(f),d,e);else if(k.ensureProject.failCount[c.postfix]<3)k.ensureProject.failCount[c.postfix]++,k.saveFile(h,a.design.id,f,c.data),n=!0;else{var o=void 0;switch(c.postfix){case"msjs":o=l.AM_FAILED_WRITE;break;case"pngthumbnailcircuit":o=l.AM_FAILED_WRITE_CIRCUIT_SHARE_PNG;break;case"previewcircuit":o=l.AM_FAILED_WRITE_CIRCUIT_PREVIEW;break;case"thumbnailcircuit":case"pngthumbnail":o=l.AM_FAILED_WRITE_CIRCUIT_THUMBNAIL;break;case"previewgraph.png":case"simdata":o=l.AM_FAILED_WRITE_GRAPH_PREVIEW}window.multisim.silentFail(new Error("Failure on file save of "+c.postfix)),m(j,g.i18n.translate(o).fetch(a.design.name),d,e),k.ensureProject.previousProjectSaveAttemptID=a.design.id}n||(b(j,a,c,f,i),window.multisim.versionInfo.isDevelopment&&k.ensureProject.failCount[c.postfix]<3&&m(j,g.i18n.translate(l.AM_SAVE_OK).fetch(c.postfix),d,e,!0),p(a,f,j))};switch(c.type){case"svg":case"html":case"msjs":case"simdata":n.push(f),k.saveFile(h,a.design.id,f,c.data);break;case"png":n.push(f);var i=c.data;k.saveFile(h,a.design.id,f,i)}})};j?k.saveProject(function(a,c){a?(a.fileName=a.design.name,q(a)):(c==k.responseCodes.RC_UNAUTHORIZED?m(c,g.i18n.translate(l.AM_NOTAUTHORIZED_WRITE).fetch(h.design.name),d,e):m(c,g.i18n.translate(l.AM_FAILED_WRITE).fetch(h.design.name),d,e),b(c))},a):q(h)}():i==k.responseCodes.RC_UNAUTHORIZED?(m(i,g.i18n.translate(l.AM_NOTAUTHORIZED_WRITE).fetch(a.design.name),d,e),b(i)):(m(i,g.i18n.translate(l.AM_FAILED_WRITE).fetch(a.design.name),d,e),b(i))},a)}function t(a,b,d,e,f){var h=new Date,i="Save";f&&c(),k.isAuthenticated(function(c){c?s(r(a),b,d,i,h,e):(m(k.responseCodes.RC_UNAUTHORIZED,g.i18n.translate(l.AM_NOTAUTHORIZED_WRITE).fetch(a.name),i,h),b(k.responseCodes.RC_UNAUTHORIZED))})}function u(a,b,c,d){var e=new Date;k.isAuthenticated(function(f){var h=k.buildFileName(c,d);f?k.deleteItem(a,b,h):(m(k.responseCodes.RC_UNAUTHORIZED,g.i18n.translate(l.AM_NOTAUTHORIZED_DELETE).fetch(h),"Delete",e),a(k.responseCodes.RC_UNAUTHORIZED))})}function v(a,b,c,d){a==k.responseCodes.RC_UNAUTHORIZED?m(a,g.i18n.translate(l.AM_NOTAUTHORIZED_READ).fetch(b),c,d):a==k.responseCodes.RC_NOTFOUND?m(a,g.i18n.translate(l.AM_NOT_FOUND).fetch(b),c,d):m(a,g.i18n.translate(l.AM_FAILED_READ).fetch(b),c,d)}function w(a){k.isAuthenticated(function(b){var c=new RegExp(document.location.host,"gi");c.lastIndex=0,X.notifyListeners(Z.FDE_HOMELINKCHANGED,{mycircuits:b&&k.requestInfo&&k.requestInfo.myCircuits?k.requestInfo.myCircuits:null,publiccircuits:k.requestInfo?k.requestInfo.publicCircuits:null,circuitdetails:a&&a.cloud&&a.cloud.html_url?a.cloud.html_url:null,homepage:c.test(document.referrer)?document.referrer:"/",login:k.requestInfo?k.requestInfo.login:null,signup:k.requestInfo?k.requestInfo.signup:null,upgrade:k.requestInfo?k.requestInfo.upgrade:null})})}function x(a,b){var c=new Date,d="Open",e=!1,f="";return a&&function(){var h={message:g.i18n.translate("Loading project %s ...").fetch(null)};X.notifyListeners(Z.FDE_STARTLOAD,h);var i=function(a,e,g,i){k.loadFile(function(j,l){a&&!a.match(/.simdata$/gi)&&X.notifyListeners(Z.FDE_ENDLOAD,h),f=e.design.name||a,j?q(j,e,i,function(a){a||(l=k.responseCodes.RC_UNKNOWN,v(l,f,d,c)),b(e,l)}).valid||(l=k.responseCodes.RC_INVALIDJSON,v(l,f,d,c),b(e,l)):(g&&v(l,f,d,c),b(e,l))},e.design.id,a,i)};e=!0,k.loadProject(function(a,e){e==k.responseCodes.RC_OK?(w(a),h.message=g.i18n.translate("Loading project %s ...").fetch(a.design.name),X.notifyListeners(Z.FDE_UPDATELOAD,h),i(k.buildFileName(a.design.guid,{postfix:"msjs",guid:""}),a,!0,".msjs"),i(k.buildFileName(a.design.guid,{postfix:"simdata",guid:""}),a,!1,".simdata")):(X.notifyListeners(Z.FDE_ENDLOAD,h),w(null),v(e,document.location.href,d,c),b(null,e))},a)}(),e}function y(a){return k.isAuthenticated(a)}function z(a){k.authenticate(function(b){if(a(b),!b){var c=new Date;m(k.responseCodes.RC_UNAUTHORIZED,"Unauthorized","Login",c)}})}function A(){k.logout()}function B(a,b){var c=[];if(a.length){var d=a[0].matches||a[0].webkitMatchesSelector||a[0].mozMatchesSelector||a[0].msMatchesSelector||a[0].oMatchesSelector;if(d)for(var e=b.length-1;e>=0;e--){var f=b[e];if(f.selectorText)for(var g=f.selectorText.replace("oecl:","oecl\\:"),h=0;h<a.length;h++)if(!/:-/.test(g))try{if(d.call(a[h],g)){c.push(f.cssText.replace(f.selectorText,g).replace(/\.nims_schematic_view/g,"").replace(/\.web-multisim-\d+/g,"").replace("oecl\\:","*|"));break}}catch(a){console.log(a)}f.cssText&&/^@font-face/.test(f.cssText)&&((j.isSafari||j.isIE)&&/myriad-pro/i.test(f.cssText)||c.unshift(f.cssText))}}return c}function C(a){var b=null;if(Y&&Y.has(a))b=Y.get(a);else{for(var c=[],d=[],e=0;e<document.styleSheets.length;e++)try{for(var f=document.styleSheets[e].rules||document.styleSheets[e].cssRules,g=0;g<f.length;g++)c.push(f[g])}catch(a){console.log(a)}d.push(a);for(var h=a.getElementsByTagName("*"),i=0;i<h.length;i++)d.push(h[i]);b=B(d,c),Y&&Y.set(a,b)}return b}function D(a,b,c){var d=C(a),e=null;if(/svg/i.test(a.nodeName)){c?(e=document.createElementNS("http://www.w3.org/2000/svg","svg"),Array.from(a.attributes).forEach(function(a){e.setAttribute(a.name,a.value)})):e=document.createElementNS("http://www.w3.org/2000/svg","g");for(var f=0;f<a.childNodes.length;f++)e.appendChild(a.childNodes[f].cloneNode(!0))}else e=a.cloneNode(!0);if(j.isIE){Array.from(e.querySelectorAll("defs pattern")).forEach(function(a){a.parentNode.removeChild(a)});var g=e.querySelector("#grid");if(g){var h=g.querySelector("#minorGridRect");h.parentNode.removeChild(h);var i=g.querySelector("#majorGridRect");i.parentNode.removeChild(i);var k=g.querySelector(".border"),l=a.querySelector("#grid").getBBox(),m=null,n=void 0;for(n=0;n<l.width;n+=10)m=document.createElementNS("http://www.w3.org/2000/svg","line"),m.classList.add("minorGrid"),m.x1.baseVal.value=n,m.x2.baseVal.value=n,m.y1.baseVal.value=l.y,m.y2.baseVal.value=l.height,g.insertBefore(m,k);for(n=0;n<l.height;n+=10)m=document.createElementNS("http://www.w3.org/2000/svg","line"),m.classList.add("minorGrid"),m.y1.baseVal.value=n,m.y2.baseVal.value=n,m.x1.baseVal.value=l.x,m.x2.baseVal.value=l.width,g.insertBefore(m,k);for(n=0;n<l.width;n+=100)m=document.createElementNS("http://www.w3.org/2000/svg","line"),m.classList.add("majorGrid"),m.x1.baseVal.value=n,m.x2.baseVal.value=n,m.y1.baseVal.value=l.y,m.y2.baseVal.value=l.height,g.insertBefore(m,k);for(n=0;n<l.height;n+=100)m=document.createElementNS("http://www.w3.org/2000/svg","line"),m.classList.add("majorGrid"),m.y1.baseVal.value=n,m.y2.baseVal.value=n,m.x1.baseVal.value=l.x,m.x2.baseVal.value=l.width,g.insertBefore(m,k)}}var o=document.createElement("style");o.setAttribute("type","text/css"),o.innerHTML=b?"<![CDATA[\n"+d.join("\n")+"\n]]>":d.join("\n");var p=document.createElement("defs");p.appendChild(o);for(var q=e.querySelectorAll("#selectinnermask, #selectoutermask, #selectionborderrect"),r=0;r<q.length;r++)q[r].parentNode.removeChild(q[r]);return{clone:e,css:p}}function E(a){var b=C(a),c=a.cloneNode(!0),d=document.createElement("style");return d.setAttribute("type","text/css"),d.innerHTML=b.join("\n"),{clone:c,css:d}}function F(a){var b=C(a),c=document.createElement("style");c.setAttribute("type","text/css"),c.innerHTML=b.join("\n");var d=Array.from(a.querySelectorAll("*")).filter(function(a,b,c){return c.indexOf(a)==b&&/-/g.test(a.nodeName)}),e=(new window.XMLSerializer).serializeToString(a);return d.forEach(function(a){var b=new RegExp("("+a.nodeName+")","ig");e=e.replace(b,"polymer-element-$1")}),{clone:e,css:(new window.XMLSerializer).serializeToString(c)}}function G(a,b,c,d,e){var f=a.getBBox(),g="circuitpreview",h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.classList.add("nims_graphics_view"),h.style.width=b?b.width+"px":"100%",h.style.height=b?b.height+"px":"100%",b&&(h.setAttribute("width",b.width),h.setAttribute("height",b.height)),c&&(h.style.backgroundColor=c);for(var i=a;i&&!/^schematic-view$/i.test(i.nodeName);)i=i.parentNode;i&&i.hasAttribute("showgrid")&&h.setAttribute("showgrid",i.getAttribute("showgrid")),h.classList.add(g),h.setAttribute("viewBox",f.x-d+" "+(f.y-d)+" "+(f.width+2*d)+" "+(f.height+2*d)),h.setAttribute("xmlns:oecl","http://www.oecl.org/2012/oecl");var j=D(a,!1,!1);h.appendChild(j.css),h.appendChild(j.clone),h.setAttribute("version","1.1"),h.getAttribute("xmlns")||h.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),h.getAttribute("xmlns:xlink")||h.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");var k="";e&&e.forEach(function(a){k+=a});var l=new window.XMLSerializer,m={data:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'+l.serializeToString(h).replace(/xmlns:NS\d+="" /gi,"").replace(/NS\d+:/gi,"").replace("</svg>",k+"</svg>")};return b&&(m.width=b.width,m.height=b.height),m}function H(a,b){var c=a||document.querySelector("#nims_view"),d=1.28,e=c.getBBox(),f=c.getBoundingClientRect(),g=(c.viewBox?c.viewBox.baseVal.width:e.width)*d,h=(c.viewBox?c.viewBox.baseVal.height:e.height)*d,i=[];!b||j.isIE||j.isSafari||b.forEach(function(a){var b=K(a,{width:g,height:h,scale:e.width/f.width*d});b&&i.push(b)});var k=G(c,{width:g,height:h},"#fff",0,i);return{blob:new window.Blob([k.data],{type:"image/svg+xml; charset=utf-8"}),data:k.data,width:k.width,height:k.height,scaling:e.width/f.width*d}}function I(a,b){L(H(null,b),function(b){a(b)})}function J(a,b){window.multisim.tryCatchAll(function(){var c=new window.Image;c.onload=function(){var d=document.createElement("canvas");d.width=a.width,d.height=a.height;var e=d.getContext("2d");e.font="13px Roboto, Helvetica Neue, Helvetica, Arial, sans-serif",e.drawImage(c,0,0),b(d)},c.onerror=function(){b(null)},c.src="data:image/svg+xml;base64,"+window.btoa(window.unescape(encodeURIComponent(a.data)))},this)}function K(a,b){var c=document.querySelector("web-multisim"),d=document.querySelector(a),e=null;if(d){var f=F(d,".htmlPreview"),g=document.createElement("div");g.textContent="contentPlaceHolder",g.className=c.className,g.classList.add("htmlPreview"),g.innerHTML=f.clone,b.scale&&Array.from(g.querySelectorAll("*")).forEach(function(a){a.style.left&&(a.style.left="calc("+a.style.left+"*"+b.scale+")"),a.style.top&&(a.style.top="calc("+a.style.top+"*"+b.scale+")"),a.style.width&&(a.style.width="calc("+a.style.width+"*"+b.scale+")"),a.style.height&&(a.style.height="calc("+a.style.height+"*"+b.scale+")")});var h=(new window.XMLSerializer).serializeToString(g).replace(/polymer-element-/g,"");e='<foreignObject width="100%" height="100%">'+f.css+h+"</foreignObject>"}return e}function L(a,b){J(a,function(a){b(M(a))})}function M(a,c){var d=null;try{for(var e=window.atob(a.toDataURL().split(",")[1]),f=e.length,i=new Uint8Array(f),j=0;j<f;j++)i[j]=e.charCodeAt(j);d=new window.Blob([i],{type:c||"image/png"})}catch(a){var k=null;void 0!==window.SecurityError&&a instanceof window.SecurityError||"SecurityError"==a.name?(console.log("PNG files cannot be generated from SVG on Internet explorer"),k=g.i18n.translate("The creation of PNG thumbnails from the circuit is not supported by this web browser.").fetch()):k=g.i18n.translate("Failed to create a PNG thumbnail of the circuit.").fetch(),b.doMessage({type:h.NT_WARNING,toast:!1,message:k,group:{name:"Save",info:{displayName:g.i18n.translate("Save").fetch(),timestamp:new Date}}})}return d}function N(){}function O(){}function P(){}function Q(a,b){(b?W:V).push(a)}function R(a,b,c,d,e){for(var f={valid:!1,errorMessage:g.i18n.translate("Cannot read file.").fetch()},h=0;h<W.length;h++)if(W[h].canReadThisFileType(b,d)&&(f=W[h].parseFileData(b,c,e,{useFloat64Arrays:!0,removeRedundantYValues:!0}),f.valid)){W[h].loadDataIntoInstance&&W[h].loadDataIntoInstance(a);break}return f}function S(a,b){var c=a,d=new Date;k.isAuthenticated(function(e){e?k.getProjects(function(d,e){var f=1;if(e==k.responseCodes.RC_OK)for(;d.filter(function(a){return a.design.name==c&&a.cloud.contributor_name==window.requestInfo.user}).length;)c=a+" ("+f+")",f++;b(c)}):(m(k.responseCodes.RC_UNAUTHORIZED,"not logged in","Open",d),b(c))})}function T(a,b){k.getSubscriptionInfo(function(b){a(b),e.isEqual($,b)||($=b,X.notifyListeners(Z.FDE_SUBSCRIPTION_CHANGED,b))},b)}k=i.create();var U=a,V=[],W=[],X=f(),Y=null,Z=Object.freeze({FDE_STARTLOAD:"startload",FDE_UPDATELOAD:"updateload",FDE_ENDLOAD:"endload",FDE_STARTSAVE:"startsave",FDE_UPDATESAVE:"updatesave",FDE_ENDSAVE:"endsave",FDE_HOMELINKCHANGED:"homeLinkChanged",FDE_SUBSCRIPTION_CHANGED:"subscriptionChanged"}),$={};return U=a,{dataFileLoad:R,doSaveToDisk:p,doLoadFromDisk:q,doFullSave:N,doAppendSave:O,doLoad:P,doDelete:u,getDefaultProjectName:S,svgToCanvas:J,svgToPNG:L,saveSVGData:G,createPNG:I,createPNGFromCanvas:M,collectSVGData:D,collectHTMLData:E,exportSVG:o,doLoadFromServer:x,doSaveToServer:t,loggedIn:y,login:z,logout:A,getSubscriptionInfo:T,addImporter:Q,responseCodes:k.responseCodes,listeners:X,fileDataEvents:Z,handleHomeLink:w,apiMessages:l,doNotAuthrorizedForSaveMessage:n,createCSSCache:function(){Y=new Map},destroyCSSCache:function(){Y=null}}}var d,e,f,g,h,i,j,k,l;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.ENotifyType},function(a){i=a.default}],execute:function(){j=window.multisim.browserDetect,k=void 0,l=Object.freeze({AM_SAVE_OK:"%s was saved successfully.",AM_NOTAUTHORIZED_READ:"You are not authorized to access %s. Make sure you are logged in.",AM_NOTAUTHORIZED_WRITE:"You are not authorized to save %s. Make sure you are logged in.",AM_NOTAUTHORIZED_DELETE:"You are not authorized to delete %s. Make sure you are logged in.",AM_FAILED_READ:"Failed to open %s. Check your internet connection and try again.",AM_FAILED_WRITE:"Failed to save %s. Check your internet connection and try again.",AM_FAILED_WRITE_CIRCUIT_PREVIEW:"Failed to save schematic preview image. Check your internet connection and try again.",AM_FAILED_WRITE_CIRCUIT_THUMBNAIL:"Failed to save schematic thumbnail image. Check your internet connection and try again.",AM_FAILED_WRITE_CIRCUIT_SHARE_PNG:"Failed to save social media share image. Check your internet connection and try again.",AM_FAILED_WRITE_GRAPH_PREVIEW:"Failed to save graph preview image. Check your internet connection and try again.",AM_NOT_FOUND:"%s could not be found. Make sure the path is correct and that you are authorized to access the item."})}}}),a.register("1c",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}())}}}),a.register("4e",["4f","3b","29","50","51","52"],function(a,b){"use strict";function c(a){function b(a){var b=1e6,c={startFrequency:!0,stopFrequency:!0,pointCount:!0,simName:!0,allValid:!0};a=a||{};var d=i(Q.startFrequency,a.stringStart);d.valid&&(d=k(function(){return Q.stopFrequencyValue>Q.startFrequencyValue&&Q.startFrequencyValue>0},h.i18n.translate("Start frequency must be a number greater than zero and smaller than the stop frequency").fetch())),c.startFrequency=d.valid,!d.valid&&d.errorMessage&&(c.startFrequencyError=d.errorMessage),d=i(Q.stopFrequency,a.stringStop),d.valid&&(d=k(function(){return Q.stopFrequencyValue>Q.startFrequencyValue&&Q.stopFrequencyValue>0&&Q.stopFrequencyValue<N},h.i18n.translate("Stop frequency must be a number greater than the start frequency and smaller than %s.").fetch(N.toExponential()))),c.stopFrequency=d.valid,!d.valid&&d.errorMessage&&(c.stopFrequencyError=d.errorMessage),d=i(Q.pointCount,a.stringPointsperdecade),d.valid&&(d=k(function(){return!(Q.pointCountValue%1)&&Q.pointCountValue>0&&Q.pointCountValue<=b},h.i18n.translate("Points must be a whole number greater than %s and less than or equal to %s").fetch(0,b.toExponential()))),c.pointCount=d.valid,!d.valid&&d.errorMessage&&(c.pointCountError=d.errorMessage),d=j(Q.runName,a.stringName),c.simName=d.valid,!d.valid&&d.errorMessage&&(c.simNameError=d.errorMessage);for(var e in c)c.hasOwnProperty(e)&&(c.allValid=c.allValid&&!(!1===c[e]));return c}function c(a,b){var c={allValid:!0,minXDisplay:!0,maxXDisplay:!0},e=void 0,f=void 0,g=void 0,j=void 0;"string"==typeof a||a instanceof String?(e=a,g=d(e)):(e=Q.minPhaseDisplayValue,g=Q.minPhaseDisplay),"string"==typeof b||b instanceof String?(f=b,j=d(f)):(f=Q.maxPhaseDisplayValue,j=Q.maxPhaseDisplay);var l=i(a,h.i18n.translate("Minimum").fetch());l.valid&&(l=k(function(){return g>0&&g<j},h.i18n.translate("Minimum must be a number greater than %1$s and smaller than the maximum").fetch(0))),c.minXDisplay=l.valid,c.minXDisplayError=l.errorMessage,l=i(b,h.i18n.translate("Maximum").fetch()),l.valid&&(l=k(function(){return g<j&&j<=N},h.i18n.translate("Maximum must be a number greater than the minimum and smaller than or equal to %1$s").fetch(N.toExponential()))),c.maxXDisplay=l.valid,c.maxXDisplayError=l.errorMessage;for(var m in c)c.hasOwnProperty(m)&&(c.allValid=c.allValid&&!(!1===c[m]));return c}function n(a,b){var c={allValid:!0,minMagnitudeDisplay:!0,maxMagnitudeDisplay:!0},d=p(a),j=p(b),m=void 0;Q.grapherMagnitudeScaleType===l.DECIBEL?(d=f(d),j=f(j),m=function(a){return e(a)}):m=function(a){return g(a)};var n=i(a,h.i18n.translate("Minimum").fetch());n.valid&&(n=k(function(){return d>=Q.minValidMagnitude&&d<j},h.i18n.translate("Minimum must be a number greater than or equal to %1$s and smaller than the maximum").fetch(m(Q.minValidMagnitude)))),c.minMagnitudeDisplay=n.valid,c.minMagnitudeDisplayError=n.errorMessage,n=i(b,h.i18n.translate("Maximum").fetch()),n.valid&&(n=k(function(){return d<j&&j>Q.minValidMagnitude&&j<=Q.maxValidMagnitude},h.i18n.translate("Maximum must be a number greater than the minimum and smaller than or equal to %1$s").fetch(m(Q.maxValidMagnitude)))),c.maxMagnitudeDisplay=n.valid,c.maxMagnitudeDisplayError=n.errorMessage;for(var o in c)c.hasOwnProperty(o)&&(c.allValid=c.allValid&&!(!1===c[o]));return c}function o(a,b){var c={allValid:!0,minPhaseDisplay:!0,maxPhaseDisplay:!0},d=p(a),e=p(b),f=i(a,h.i18n.translate("Minimum").fetch());f.valid&&(f=k(function(){return d>=Q.minValidPhase&&d<e},h.i18n.translate("Minimum must be a number greater than or equal to %1$s and smaller than the maximum").fetch(Q.minValidPhase.toExponential()))),c.minPhaseDisplay=f.valid,c.minPhaseDisplayError=f.errorMessage,f=i(b,h.i18n.translate("Maximum").fetch()),f.valid&&(f=k(function(){return d<e&&e<=Q.maxValidPhase},h.i18n.translate("Maximum must be a number greater than the minimum and smaller than or equal to %1$s").fetch(Q.maxValidPhase.toExponential()))),c.maxPhaseDisplay=f.valid,c.maxPhaseDisplayError=f.errorMessage;for(var g in c)c.hasOwnProperty(g)&&(c.allValid=c.allValid&&!(!1===c[g]));return c}var p=function(a){return"string"==typeof a?d(a):a};a=a||{};var q=""+(a.startFrequency||"1"),r=""+(a.stopFrequency||"1e10"),s=a.sweepType||l.DECADE,t=""+(a.pointCount||"10"),u=a.runName||null,v=a.cursorType||m.DISABLED,w=a.cursorSignals||[],x=a.cursors||{x:[],y:[],xy:[]},y=void 0,z=void 0,A=void 0,B=void 0,C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=1e12,L=1e12,M=-L,N=1e24,O=l.LOGARITHMIC,P=O,Q=null,R=function(){var a="ac -env-options ";return Q.sweepType===l.DECADE?a+="dec ":Q.sweepType===l.LINEAR?a+="lin ":Q.sweepType===l.OCTAVE&&(a+="oct "),a+=Q.pointCountValue+" "+Q.startFrequencyValue.toExponential()+" "+Q.stopFrequencyValue.toExponential(),P=O,a};return Q={get startFrequency(){return q},get startFrequencyValue(){return d(q)},set startFrequency(a){q=""+a},get stopFrequency(){return r},get stopFrequencyValue(){return d(r)},set stopFrequency(a){r=""+a},get sweepType(){return s},set sweepType(a){s=a},get pointCount(){return t},get pointCountValue(){return d(t)},set pointCount(a){t=""+a},get runName(){return"string"==typeof u?u:h.i18n.translate("AC Sweep 1").fetch()},set runName(a){u=a},get minXDisplay(){return y},get minXDisplayValue(){return p(y)},set minXDisplay(a){y=a},get maxXDisplay(){return z},get maxXDisplayValue(){return p(z)},set maxXDisplay(a){z=a},get minMagnitudeDisplay(){return A},get minMagnitudeDisplayValue(){return p(A)},set minMagnitudeDisplay(a){A=a},get maxMagnitudeDisplay(){return B},get maxMagnitudeDisplayValue(){return p(B)},set maxMagnitudeDisplay(a){B=a},get minPhaseDisplay(){return C},get minPhaseDisplayValue(){return p(C)},set minPhaseDisplay(a){C=a},get maxPhaseDisplay(){return D},get maxPhaseDisplayValue(){return p(D)},set maxPhaseDisplay(a){D=a},get minXActual(){return E},set minXActual(a){E=a},get maxXActual(){return F},set maxXActual(a){F=a},get minMagnitudeActual(){return G},set minMagnitudeActual(a){G=a},get maxMagnitudeActual(){return H},set maxMagnitudeActual(a){H=a},get minPhaseActual(){return I},set minPhaseActual(a){I=a},get maxPhaseActual(){return J},set maxPhaseActual(a){J=a},get minValidMagnitude(){return Q.grapherMagnitudeScaleType==l.LINEAR?-K:1e-16},get maxValidMagnitude(){return K},get maxValidPhase(){return L},get minValidPhase(){return M},get magnitudeScaleType(){return O},set magnitudeScaleType(a){O=a},get grapherMagnitudeScaleType(){return P},set grapherMagnitudeScaleType(a){P=a},get cursorType(){return v},set cursorType(a){v=a},get cursorSignals(){return w},set cursorSignals(a){w=a},get cursor1Signal(){return w[0]},get cursor2Signal(){return w[1]},set cursor1Signal(a){w[0]=a},set cursor2Signal(a){w[1]=a},get cursors(){return x},get activeCursors(){return x[v]},get cursor1(){return this.activeCursors[0]},get cursor2(){return this.activeCursors[1]},set activeCursors(a){x[v]=a},set cursor1(a){this.activeCursors[0]=a},set cursor2(a){this.activeCursors[1]=a},generateCommandString:R,validate:b,validateXDisplayRange:c,validateMagnitudeDisplayRange:n,validatePhaseDisplayRange:o}}var d,e,f,g,h,i,j,k,l,m;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.convertToDB,f=a.convertFromDB,g=a.formatSimulationNumber},function(a){h=a.default},function(a){i=a.basicNumberValidate,j=a.basicTextValidate,k=a.customValidate},function(a){l=a.default},function(a){m=a.default}],execute:function(){}}}),a.register("53",["29","50"],function(a,b){"use strict";function c(a){a=a||{};var b=a.runName||null,c=function(){return"op -env-options"},f={get runName(){return"string"==typeof b?b:d.i18n.translate("DC OP 1").fetch()},set runName(a){b=a},generateCommandString:c,validate:function(a){var b={simName:!0,allValid:!0};a=a||{};var c=e(f.runName,a.stringName);return b.simName=c.valid,b.allValid=b.allValid&&c.valid,b.simNameError=c.errorMessage,b}};return f}var d,e;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.basicTextValidate}],execute:function(){}}}),a.register("54",["4f","3b","29","50","55","52"],function(a,b){"use strict";function c(a){var b=function(a){return"string"==typeof a?d(a):a};a=a||{};var c=a.useSource2||!1,m=a.runName||null,n="",o=void 0,p=void 0,q=1e12,r=-q,s={name:a.source1Name||"",start:a.source1Start||"0",stop:a.source1Stop||"1",step:a.source1Step||"0.5",mode:a.source1StepMode||k.SM_INCREMENT},t={name:a.source2Name||"",start:a.source2Start||"0",stop:a.source2Stop||"1",step:a.source2Step||"0.5",mode:a.source2StepMode||k.SM_INCREMENT},u=a.cursorType||l.DISABLED,v=a.cursorSignals||[],w=a.cursorSweeps||[],x=a.cursors||{x:[],y:[],xy:[]},y=1,z=function(){y=c?A.source2Points:1;var a=["dc","-env-options"];return s.name&&(a.push(A.source1Name),a.push(A.source1StartValue),a.push(A.source1StopValue),a.push(b(A.source1Increment)),c&&t.name&&(a.push(A.source2Name),a.push(A.source2StartValue),a.push(A.source2StopValue),a.push(b(A.source2Increment)))),a.join(" ")},A={EStepMode:k,get runName(){return"string"==typeof m?m:g.i18n.translate("DC Sweep 1").fetch()},set runName(a){m=a},get xAxisName(){return n},set xAxisName(a){n=a},get xAxisType(){return/^v/i.test(s.name)?"voltage":/^i/i.test(s.name)?"current":""},get source1Name(){return s.name},set source1Name(a){s.name=a},get source1Start(){return s.start},set source1Start(a){s.start=a},get source1StartValue(){return b(s.start)},get source1Stop(){return s.stop},set source1Stop(a){s.stop=a},get source1StopValue(){return b(s.stop)},get source1Increment(){return e(k.SM_INCREMENT,s.mode,s.step,s.start,s.stop)},get source1Points(){return e(k.SM_POINTS,s.mode,s.step,s.start,s.stop)},set source1Step(a){s.step=a},get source1Step(){return s.step},set source1StepMode(a){a!=s.mode&&(s.step=e(a,s.mode,s.step,s.start,s.stop),s.mode=a)},get source1StepMode(){return s.mode},get source2Name(){return t.name},set source2Name(a){t.name=a},get source2Start(){return t.start},set source2Start(a){t.start=a},get source2StartValue(){return b(t.start)},get source2Stop(){return t.stop},set source2Stop(a){t.stop=a},get source2StopValue(){return b(t.stop)},get source2Increment(){return e(k.SM_INCREMENT,t.mode,t.step,t.start,t.stop)},get source2Points(){return e(k.SM_POINTS,t.mode,t.step,t.start,t.stop)},set source2Step(a){t.step=a},get source2Step(){return t.step},set source2StepMode(a){a!=t.mode&&(t.step=e(a,t.mode,t.step,t.start,t.stop),t.mode=a)},get source2StepMode(){return t.mode},get useSource2(){return c},set useSource2(a){c=!!a},get minValidY(){return r},get maxValidY(){return q},get minXDisplay(){return o},get minXDisplayValue(){return"string"==typeof o||o instanceof String?b(o):o},set minXDisplay(a){o=void 0!==a&&null!==a?""+a:a},get maxXDisplay(){return p},get maxXDisplayValue(){return"string"==typeof p||p instanceof String?b(p):p},set maxXDisplay(a){p=void 0!==a&&null!==a?""+a:a},get numSweeps(){return y},get cursorType(){return u},set cursorType(a){u=a},get cursorSignals(){return v},set cursorSignals(a){v=a},get cursorSweeps(){return w},set cursorSweeps(a){w=a},get cursor1Signal(){return v[0]},get cursor2Signal(){return v[1]},set cursor1Signal(a){v[0]=a},set cursor2Signal(a){v[1]=a},get cursors(){return x},get activeCursors(){return x[u]},get cursor1(){return this.activeCursors[0]},get cursor2(){return this.activeCursors[1]},set activeCursors(a){x[u]=a},set cursor1(a){this.activeCursors[0]=a},set cursor2(a){this.activeCursors[1]=a},generateCommandString:z,validate:function(a){var d=void 0,e=void 0,l=1e6,m=20,n={runName:!0,source1Name:!0,source1Start:!0,source1Stop:!0,source1Step:!0,source2Name:!0,source2Start:!0,source2Stop:!0,source2Step:!0,allValid:!0};a=a||{};var o=i(A.runName,a.stringName);n.runName=o.valid,!o.valid&&o.errorMessage&&(n.runNameError=o.errorMessage),d=A.source1Name?"Source 1 cannot be equal to Source 2":"A source is required for DC Sweep",o=j(function(){return!(!A.source1Name||c&&A.source1Name==A.source2Name)},g.i18n.translate(d).fetch()),n.source1Name=o.valid,!o.valid&&o.errorMessage&&(n.source1NameError=o.errorMessage),o=h(A.source1Start,a.stringStart),o.valid&&(o=j(function(){return A.source1StartValue<A.source1StopValue},g.i18n.translate("Start value must be less than Stop value").fetch())),n.source1Start=o.valid,!o.valid&&o.errorMessage&&(n.source1StartError=o.errorMessage),o=h(A.source1Stop,a.stringStop),o.valid&&(o=j(function(){return A.source1StopValue>A.source1StartValue},g.i18n.translate("Stop value must be greater than Start value").fetch())),n.source1Stop=o.valid,!o.valid&&o.errorMessage&&(n.source1StopError=o.errorMessage);var p=b(A.source1Points);A.source1StepMode==k.SM_INCREMENT?function(){var c=b(A.source1Increment);o=h(A.source1Increment,a.stringIncrement),o.valid&&function(){var a=A.source1StopValue-A.source1StartValue,b=p>l?a/(l-1):0;o=j(function(){return(!n.source1Start||!n.source1Stop||p<=l&&c<=a)&&c>0},g.i18n.translate("Increment must be a number greater than %s and less than or equal to %s").fetch(b,Math.max(0,a)))}()}():(o=h(A.source1Points,a.stringPoints),o.valid&&(o=j(function(){return!(p%1)&&p>1&&A.source1Points<=l},g.i18n.translate("Points must be a whole number greater than %s and less than or equal to %s").fetch(1,l.toExponential())))),n.source1Step=o.valid,!o.valid&&o.errorMessage&&(n.source1StepError=o.errorMessage),c&&(d=A.source2Name?"Source 2 cannot be equal to Source 1":"Two sources are required to use source 2 for DC Sweep",o=j(function(){return!!A.source2Name&&A.source1Name!=A.source2Name},g.i18n.translate(d).fetch()),n.source2Name=o.valid,!o.valid&&o.errorMessage&&(n.source2NameError=o.errorMessage),o=h(A.source2Start,a.stringStart),o.valid&&(o=j(function(){return A.source2StartValue<A.source2StopValue},g.i18n.translate("Start value must be less than Stop value").fetch())),n.source2Start=o.valid,!o.valid&&o.errorMessage&&(n.source2StartError=o.errorMessage),o=h(A.source2Stop,a.stringStop),o.valid&&(o=j(function(){return A.source2StopValue>A.source2StartValue},g.i18n.translate("Stop value must be greater than Start value").fetch())),n.source2Stop=o.valid,!o.valid&&o.errorMessage&&(n.source2StopError=o.errorMessage),e=b(A.source2Points),A.source2StepMode==k.SM_INCREMENT?function(){var c=b(A.source2Increment);o=h(A.source2Increment,a.stringIncrement),o.valid&&function(){var a=A.source2StopValue-A.source2StartValue,b=e>m?a/(m-1):0;o=j(function(){return(!n.source2Start||!n.source2Stop||e<=m&&c<=a)&&c>0},g.i18n.translate("Increment must be a number greater than %s and less than or equal to %s").fetch(f(b),f(Math.max(0,a))))}()}():(o=h(A.source2Points,a.stringPoints),o.valid&&(o=j(function(){return!(e%1)&&e>1&&A.source2Points<=m},g.i18n.translate("Points must be a whole number greater than %s and less than or equal to %s").fetch(1,m)))),n.source2Step=o.valid,!o.valid&&o.errorMessage&&(n.source2StepError=o.errorMessage));for(var q in n)n.hasOwnProperty(q)&&(n.allValid=n.allValid&&!(!1===n[q]));return n},validateXDisplayRange:function(a,c){var d=1e29,e={allValid:!0,minXDisplay:!0,maxXDisplay:!0},f=a||0===a?b(a):A.minXDisplayValue,i=c||0===c?b(c):A.maxXDisplayValue,k=h(a,g.i18n.translate("Minimum").fetch());k.valid&&(k=j(function(){return f>=b(A.source1Start)&&f<i},g.i18n.translate("Minimum must be a number greater than or equal to %1$s and smaller than the maximum").fetch(A.source1Start))),e.minXDisplay=k.valid,e.minXDisplayError=k.errorMessage,k=h(c,g.i18n.translate("Maximum").fetch()),k.valid&&(k=j(function(){return f<i&&i>=0&&i<=d},g.i18n.translate("Maximum must be a number greater than the minimum and smaller than or equal to %1$s").fetch(d))),e.maxXDisplay=k.valid,e.maxXDisplayError=k.errorMessage;for(var l in e)e.hasOwnProperty(l)&&(e.allValid=e.allValid&&!(!1===e[l]));return e}};return A}var d,e,f,g,h,i,j,k,l;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.getAlternativeStep,f=a.formatSimulationNumber},function(a){g=a.default},function(a){h=a.basicNumberValidate,i=a.basicTextValidate,j=a.customValidate},function(a){k=a.default},function(a){l=a.default}],execute:function(){}}}),a.register("56",["1b","4f","3b","29","57","50","55","21","51","52"],function(a,b){"use strict";function c(a){function b(a,b){var d=s,e={allValid:!0,minXDisplay:!0,maxXDisplay:!0},f=a||0===a?c(a):Q.minXDisplayValue,g=b||0===b?c(b):Q.maxXDisplayValue,i=j(a,h.i18n.translate("Minimum").fetch());i.valid&&(i=l(function(){return f>=c(Q.paramStart)&&f<g},h.i18n.translate("Minimum must be a number greater than or equal to %1$s and smaller than the maximum").fetch(Q.paramStart))),e.minXDisplay=i.valid,e.minXDisplayError=i.errorMessage,i=j(b,h.i18n.translate("Maximum").fetch()),i.valid&&(i=l(function(){return f<g&&g>=0&&g<=d},h.i18n.translate("Maximum must be a number greater than the minimum and smaller than or equal to %1$s").fetch(d))),e.maxXDisplay=i.valid,e.maxXDisplayError=i.errorMessage;for(var k in e)e.hasOwnProperty(k)&&(e.allValid=e.allValid&&!(!1===e[k]));return e}var c=function(a){return"string"==typeof a?e(a):a},r=function(){return Q.selectedSweepType===p.DECADE||Q.selectedSweepType===p.OCTAVE},s=1e29;a=a||{};var t=a.runName||null,u=a.selectedAnalysisType||o.Transient,v=u,w=void 0,x=void 0,y=void 0,z=a.selectedSweepType||p.LINEAR,A={name:a.componentName||""},B={name:a.parameterName||"",units:a.parameterUnits||"",fullName:a.parameterFullName||""},C=new Map,D=a.paramList||"1000, 2000",E="",F=void 0,G=void 0,H=1e12,I=-H,J={name:a.paramName||"",start:a.paramStart||"1",stop:a.paramStop||"2",step:a.paramStep||"1",mode:a.paramStepMode||n.SM_INCREMENT},K=a.cursorType||q.DISABLED,L=a.cursorSignals||[],M=a.cursorSweeps||[],N=a.cursors||{x:[],y:[],xy:[]},O=1,P=function(){var a=void 0;switch(v=u,O=u!==o.DC?z!==p.LIST?Q.paramPoints:Q.sortedParamListValues.length:1,Q.selectedSweepType){case p.LINEAR:a=["lin",Q.paramStartValue,Q.paramStopValue,c(Q.paramIncrement)].join(" ");break;case p.DECADE:a=["dec",Q.paramStartValue,Q.paramStopValue,Q.paramPoints].join(" ");break;case p.OCTAVE:a=["oct",Q.paramStartValue,Q.paramStopValue,Q.paramPoints].join(" ");break;case p.LIST:a="list "+Q.sortedParamListValues.join(", ")}return["paramsweep","-env-options","cktparam",i(Q.parameterName),a,x.get(u).generateCommandString().replace(" -env-options","")].join(" ")},Q={set simulationController(a){w=a,x=new Map,x.set(o.DC,w.getSimulationSettings(o.DC)),x.set(o.Transient,w.getSimulationSettings(o.Transient)),x.set(o.AC,w.getSimulationSettings(o.AC)),y=x.get(o.AC)},set availableParameters(a){C=a},get runName(){return"string"==typeof t?t:h.i18n.translate("Param Sweep 1").fetch()},set runName(a){t=a},set selectedAnalysisType(a){u=a},get selectedAnalysisType(){return u},set lastSweptAnalysis(a){v=a},get lastSweptAnalysis(){return v},set selectedSweepType(a){z=a},get selectedSweepType(){return z},get componentName(){return A.name},set componentName(a){A.name=a},get parameterName(){return B.name},set parameterName(a){B.name=a},get parameterUnits(){return B.units},set parameterUnits(a){B.units=a},get parameterFullName(){return B.fullName},set parameterFullName(a){B.fullName=a},get paramList(){return D},set paramList(a){D=a},get parsedParamListValues(){return D.trim().split(",").map(function(a){return c(a.trim())})},get sortedParamListValues(){return[].concat(d(new Set(Q.parsedParamListValues))).sort(function(a,b){return a-b})},get xAxisName(){return E},set xAxisName(a){E=a},get paramStart(){return J.start},set paramStart(a){J.start=a},get paramStartValue(){return c(J.start)},get paramStop(){return J.stop},set paramStop(a){J.stop=a},get paramStopValue(){return c(J.stop)},get paramIncrement(){return f(n.SM_INCREMENT,J.mode,J.step,J.start,J.stop)},get paramPoints(){return f(n.SM_POINTS,J.mode,J.step,J.start,J.stop,!0)},set paramStep(a){J.step=a},get paramStep(){return J.step},set paramStepMode(a){a!=J.mode&&(J.step=f(a,J.mode,J.step,J.start,J.stop),J.mode=a)},get paramStepMode(){return J.mode},get minValidY(){return I},get maxValidY(){return H},get minXDisplay(){return Q.lastSweptAnalysis===o.DC?F:w.getSimulationSettings(Q.lastSweptAnalysis).minXDisplay},get minXDisplayValue(){return Q.lastSweptAnalysis!==o.DC?w.getSimulationSettings(Q.lastSweptAnalysis).minXDisplayValue:"string"==typeof F||F instanceof String?c(F):F},set minXDisplay(a){Q.lastSweptAnalysis!==o.DC?w.getSimulationSettings(Q.lastSweptAnalysis).minXDisplay=a:F=void 0!==a&&null!==a?""+a:a},get maxXDisplay(){return Q.lastSweptAnalysis===o.DC?G:w.getSimulationSettings(Q.lastSweptAnalysis).maxXDisplay},get maxXDisplayValue(){return Q.lastSweptAnalysis!==o.DC?w.getSimulationSettings(Q.lastSweptAnalysis).maxXDisplayValue:"string"==typeof G||G instanceof String?c(G):G},set maxXDisplay(a){Q.lastSweptAnalysis!==o.DC?w.getSimulationSettings(Q.lastSweptAnalysis).maxXDisplay=a:G=void 0!==a&&null!==a?""+a:a},get minMagnitudeDisplay(){return y.minMagnitudeDisplay},get minMagnitudeDisplayValue(){return y.minMagnitudeDisplayValue},set minMagnitudeDisplay(a){y.minMagnitudeDisplay=a},get maxMagnitudeDisplay(){return y.maxMagnitudeDisplay},get maxMagnitudeDisplayValue(){return y.maxMagnitudeDisplayValue},set maxMagnitudeDisplay(a){y.maxMagnitudeDisplay=a},get minPhaseDisplay(){return y.minPhaseDisplay},get minPhaseDisplayValue(){return y.minPhaseDisplayValue},set minPhaseDisplay(a){y.minPhaseDisplay=a},get maxPhaseDisplay(){return y.maxPhaseDisplay},get maxPhaseDisplayValue(){return y.maxPhaseDisplayValue},set maxPhaseDisplay(a){y.maxPhaseDisplay=a},get minXActual(){return y.minXActual},set minXActual(a){y.minXActual=a},get maxXActual(){return y.maxXActual},set maxXActual(a){y.maxXActual=a},get minMagnitudeActual(){return y.minMagnitudeActual},set minMagnitudeActual(a){y.minMagnitudeActual=a},get maxMagnitudeActual(){return y.maxMagnitudeActual},set maxMagnitudeActual(a){y.maxMagnitudeActual=a},get minPhaseActual(){return y.minPhaseActual},set minPhaseActual(a){y.minPhaseActual=a},get maxPhaseActual(){return y.maxPhaseActual},set maxPhaseActual(a){y.maxPhaseActual=a},get minValidMagnitude(){return y.minValidMagnitude},get maxValidMagnitude(){return y.maxMagnitudeValid},get maxValidPhase(){return y.maxPhaseValid},get minValidPhase(){return y.minPhaseValid},get magnitudeScaleType(){return y.magnitudeScaleType},set magnitudeScaleType(a){y.magnitudeScaleType=a},get grapherMagnitudeScaleType(){return y.grapherMagnitudeScaleType},set grapherMagnitudeScaleType(a){y.grapherMagnitudeScaleType=a},get numSweeps(){return O},get cursorType(){return K},set cursorType(a){K=a},get cursorSignals(){return L},set cursorSignals(a){L=a},get cursorSweeps(){return M},set cursorSweeps(a){M=a},get cursor1Signal(){return L[0]},get cursor2Signal(){return L[1]},set cursor1Signal(a){L[0]=a},set cursor2Signal(a){L[1]=a},get cursors(){return N},get activeCursors(){return N[K]},get cursor1(){return this.activeCursors[0]},get cursor2(){return this.activeCursors[1]},set activeCursors(a){N[K]=a},set cursor1(a){this.activeCursors[0]=a},set cursor2(a){this.activeCursors[1]=a},generateCommandString:P,validate:function(a){var b=void 0,d=20,e={runName:!0,componentName:!0,parameterName:!0,paramListValues:!0,paramStart:!0,paramStop:!0,paramStep:!0,allValid:!0};a=a||{};var f=k(Q.runName,a.stringName);e.runName=f.valid,!f.valid&&f.errorMessage&&(e.runNameError=f.errorMessage),f=l(function(){return!!Q.componentName},h.i18n.translate("No suitable components").fetch()),e.componentName=f.valid,!f.valid&&f.errorMessage&&(e.componentNameError=f.errorMessage),f=l(function(){return!!Q.parameterName},h.i18n.translate("No suitable parameters").fetch()),e.parameterName=f.valid,!f.valid&&f.errorMessage&&(e.parameterNameError=f.errorMessage),e.componentName&&C.size&&function(){var i=C.get(Q.componentName),k=i?i.get(Q.parameterName):void 0;if(Q.selectedSweepType===p.LIST){var q=Q.parsedParamListValues,t=new Set(q).size;f=t>1&&t<=d?{valid:!0}:{valid:!1,errorMessage:h.i18n.translate("At least two, but no more than %d different sweep values are required.").fetch(d)},f.valid&&function(){var b=[];q.forEach(function(c,d){f=j(c,a.stringValueList),f.valid&&k&&(f=m(c,k.parameterObject)),f.valid||b.push(d)}),f=b.length?{valid:!1,errorMessage:h.i18n.translate("Entry %1$s is invalid.").ifPlural(b.length,"Entries %1$s are invalid.").fetch(b.map(function(a){return a+1}).join(", "))}:{valid:!0}}(),e.paramListValues=f.valid,!f.valid&&f.errorMessage&&(e.paramListValuesError=f.errorMessage),e.paramStart=e.paramStop=e.paramStep=!0}else!function(){f=j(Q.paramStart,a.stringStart),f.valid&&(f=l(function(){return Q.paramStartValue<Q.paramStopValue},h.i18n.translate("Start value must be less than Stop value").fetch()),f.valid&&k&&(f=m(Q.paramStart,k.parameterObject),f.valid&&r()&&(f=l(function(){return Q.paramStartValue>0},h.i18n.translate("Start value must be greater than zero for non-linear sweeps").fetch("Start value",0))))),e.paramStart=f.valid,!f.valid&&f.errorMessage&&(e.paramStartError=f.errorMessage),f=j(Q.paramStop,a.stringStop),f.valid&&(f=l(function(){return Q.paramStopValue>Q.paramStartValue},h.i18n.translate("Stop value must be greater than Start value").fetch()),f.valid&&k&&(f=m(Q.paramStop,k.parameterObject),f.valid&&r()&&(f=l(function(){return Q.paramStopValue>0},h.i18n.translate("Stop value must be greater than zero for non-linear sweeps").fetch())))),e.paramStop=f.valid,!f.valid&&f.errorMessage&&(e.paramStopError=f.errorMessage),b=c(Q.paramPoints);var i=Q.paramStopValue-Q.paramStartValue;Q.paramStepMode==n.SM_INCREMENT?function(){var k=c(Q.paramIncrement);f=j(Q.paramIncrement,a.stringIncrement),f.valid&&function(){var a=void 0,c=void 0;Q.selectedAnalysisType!==o.DC?(a=b>d?i/(d-1):0,c=b<=d):(a=0,c=b<=s),f=l(function(){return(!e.paramStart||!e.paramStop||c&&k<=i)&&k>0},h.i18n.translate("Increment must be a number greater than %s and less than or equal to %s").fetch(g(a),g(Math.max(0,i))))}()}():(f=j(Q.paramPoints,a.stringPoints),f.valid&&function(){var a=void 0,c=void 0;if(Q.selectedAnalysisType!==o.DC)switch(Q.selectedSweepType){case p.DECADE:c=i>0?Math.ceil(d/(Math.log(i)/Math.log(10))):d,a=Math.min(d,Math.abs(c));break;case p.OCTAVE:c=i>0?Math.ceil(d/(Math.log(i)/Math.log(8))):d,a=Math.min(d,Math.abs(c));break;default:a=d}else a=s;var e=r()?0:1;f=l(function(){return!(b%1)&&b>e&&b<=a},h.i18n.translate("Points must be a whole number greater than %s and less than or equal to %s").fetch(e,a))}()),e.paramStep=f.valid,!f.valid&&f.errorMessage&&(e.paramStepError=f.errorMessage),e.paramListValues=!0}()}();for(var i in e)e.hasOwnProperty(i)&&(e.allValid=e.allValid&&!(!1===e[i]));return e},get validateXDisplayRange(){return Q.lastSweptAnalysis===o.DC?b:w.getSimulationSettings(Q.lastSweptAnalysis).validateXDisplayRange},get validateMagnitudeDisplayRange(){return y.validateMagnitudeDisplayRange},get validatePhaseDisplayRange(){return y.validatePhaseDisplayRange}};return Q}var d,e,f,g,h,i,j,k,l,m,n,o,p,q;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.getAlternativeStep,g=a.formatSimulationNumber},function(a){h=a.default},function(a){i=a.getCktParamName},function(a){j=a.basicNumberValidate,k=a.basicTextValidate,l=a.customValidate,m=a.customPropertyValidation},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default}],execute:function(){}}}),a.register("58",["2d","10","4f","3b","29","50","59","52"],function(a,b){"use strict";function c(a){function b(a){var b=p.validate(a);return b.stopTimeError&&p.stopTimeValue<=0&&(b.stopTimeError=h.i18n.translate("End time must be a number greater than 0").fetch()),b}function c(a){var b=i(a,h.i18n.translate("Level").fetch());return b.numericValue=f(a),b}var n=e();a=a||{stopTime:"1e29",userDefinedTMax:!1,cursorType:k.DISABLED};var o=null;a.startTime&&(a.startTime="0");var p=j(a);p.timePerDivision=.001,p.trigger={delay:0,value:0,valueString:"0",mode:l.TM_NONE,edge:m.TE_RISING,signal:"",probe:"",probeType:""};var q=function(){return p.generateCommandString(!0)};return o={addFeedbackChangeListener:function(a){n.addListener("feedbacksettingschanged",a)},removeFeedbackChangeListener:function(a){n.removeListener("feedbacksettingschanged",a)},initialConditionsEnum:p.initialConditionsEnum,get cursorType(){return p.cursorType},set cursorType(a){p.cursorType=a},get cursorSignals(){return p.cursorSignals},set cursorSignals(a){p.cursorSignals=a},get cursor1Signal(){return p.cursor1Signal},get cursor2Signal(){return p.cursor2Signal},set cursor1Signal(a){p.cursor1Signal=a},set cursor2Signal(a){p.cursor2Signal=a},get cursors(){return p.cursors},get activeCursors(){return p.activeCursors},get cursor1(){return p.cursor1},get cursor2(){return p.cursor2},set activeCursors(a){p.activeCursors=a},set cursor1(a){p.cursor1=a},set cursor2(a){p.cursor2=a},get maxTimePerDivision(){return 1e3},get minTimePerDivision(){return 1e-12},get stopTime(){return p.stopTime},get stopTimeValue(){return p.stopTimeValue},set stopTime(a){p.stopTime=a},get initialConditions(){return p.initialConditions},set initialConditions(a){p.initialConditions=a},get userDefinedTMax(){return p.userDefinedTMax},set userDefinedTMax(a){p.userDefinedTMax=a},get tMax(){return p.tMax},get tMaxValue(){return p.tMaxValue},set tMax(a){p.tMax=a},get userDefinedTStep(){return p.userDefinedTStep},set userDefinedTStep(a){p.userDefinedTStep=a},get tStep(){return p.tStep},get tStepValue(){return p.tStepValue},set tStep(a){p.tStep=a},get runName(){return p.runName},set runName(a){p.runName=a},set defaultRunName(a){p.defaultRunName=a},get defaultRunName(){return p.defaultRunName},get minXDisplay(){return p.minXDisplay},get minXDisplayValue(){return p.minXDisplayValue},set minXDisplay(a){p.minXDisplay=a},get maxXDisplay(){return p.maxXDisplay},get maxXDisplayValue(){return p.maxXDisplayValue},set maxXDisplay(a){p.maxXDisplay=a},get minValidY(){return p.minValidY},get maxValidY(){return p.maxValidY},get timePerDivision(){return p.timePerDivision},get timePerDivisionDisplayString(){var a=g(this.timePerDivision);return h.i18n.translate("%s/div").fetch((this.timePerDivision*Math.pow(10,a.siPrefixPow)).toFixed(0)+a.siPrefix+"s")},set timePerDivision(a){p.timePerDivision=Math.max(Math.min(a,this.maxTimePerDivision),this.minTimePerDivision),n.notifyListeners("feedbacksettingschanged",this)},setNextHigherTimePerDivision:function(){var a=Math.log10(this.timePerDivision),b=Math.floor(a),c=0|Math.round(this.timePerDivision/Math.pow(10,b)),d=c;if(this.timePerDivision<this.maxTimePerDivision)switch(c){case 1:d=2;break;case 2:d=5;break;case 5:d=10;break;case 10:d=20}d!=c&&(this.timePerDivision=d*Math.pow(10,b))},setNextLowerTimePerDivision:function(){var a=Math.log10(this.timePerDivision),b=Math.floor(a),c=0|Math.round(this.timePerDivision/Math.pow(10,b)),d=c;if(this.timePerDivision>this.minTimePerDivision)switch(c){case 1:d=.5;break;case 2:d=1;break;case 5:d=2;break;case 10:d=5}d!=c&&(this.timePerDivision=d*Math.pow(10,b))},get trigger(){return d.cloneDeep(p.trigger)},set trigger(a){d.isEqual(p.trigger,a)||(p.trigger.delay=a.delay,p.trigger.value=f(a.valueString),p.trigger.valueString=a.valueString,p.trigger.mode=a.mode,p.trigger.edge=a.edge,p.trigger.signal=a.signal,p.trigger.probe=a.probe,p.trigger.probeType=a.probeType,n.notifyListeners("feedbacksettingschanged",this))},generateCommandString:q,validate:b,validateTriggerLevel:c,validateXDisplayRange:p.validateXDisplayRange,triggerModes:l,triggerEdges:m},h.addReadyListener(function(a){o.defaultRunName=a.i18n.translate("Interactive 1").fetch()}),o}var d,e,f,g,h,i,j,k,l,m;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.findBestSIUnitPrefix},function(a){h=a.default},function(a){i=a.basicNumberValidate},function(a){j=a.default},function(a){k=a.default}],execute:function(){l=Object.freeze({TM_SINGLE:"single",TM_AUTO:"auto",TM_NORMAL:"normal",TM_STOP:"stop",TM_NONE:"none"}),m=Object.freeze({TE_RISING:"rising",TE_FALLING:"falling",TE_BOTH:"both"})}}}),a.register("59",["4f","29","50","52"],function(a,b){"use strict";function c(a){return 0===a?a.toString():a.toExponential()}function d(a){function b(a){var b="tran -env-options ",d=r?z.tMaxValue:a?1e-5:z.stopTimeValue-z.startTimeValue;return b+=c(t?z.tStepValue:d)+" "+c(z.stopTimeValue)+" "+c(z.startTimeValue)+" "+c(d)+" ",o===k.AUTOMATIC?b+="auto_ic":o===k.USER?b+="uic":o===k.ZERO&&(b+="zero_ic"),r||(b+=" auto_tmax",t||(b+=" auto_tstep")),b}function d(a){var b=1e-12,c=1e-5,d={startTime:!0,stopTime:!0,tMax:!0,tStep:!0,simName:!0,allValid:!0};a=a||{};var e=g(z.startTime,a.stringStartTime);if(e.valid&&(e=i(function(){return z.startTimeValue>=0&&z.startTimeValue<z.stopTimeValue},f.i18n.translate("Start time must be a number greater than or equal to 0 and smaller than the end time").fetch())),d.startTime=e.valid,!e.valid&&e.errorMessage&&(d.startTimeError=e.errorMessage),e=g(z.stopTime,a.stringEndTime),e.valid){var j=z.stopTimeValue>m?"End time must be less than or equal to %1s":"End time must be a number greater than the start time";e=i(function(){return z.stopTimeValue>=0&&z.stopTimeValue>z.startTimeValue&&z.stopTimeValue<=m},f.i18n.translate(j).fetch(m))}d.stopTime=e.valid,!e.valid&&e.errorMessage&&(d.stopTimeError=e.errorMessage),r&&(e=g(z.tMax,a.stringTimeStep),e.valid&&(e=i(function(){return z.tMaxValue<=z.stopTimeValue&&z.tMaxValue>0},f.i18n.translate("Time step must be a number greater than %1s and smaller than or equal to the end time").fetch(b))),e.valid&&(e=i(function(){return z.tMaxValue>=b&&z.tMaxValue<=c},f.i18n.translate("Maximum time step must be a number between %1s and %2s").fetch(b.toExponential(),c.toExponential()))),d.tMax=e.valid,!e.valid&&e.errorMessage&&(d.tMaxError=e.errorMessage)),t&&(e=g(z.tStep,a.stringTimeStep),e.valid&&(e=i(function(){return!r||z.tStepValue<=z.tMaxValue&&z.tStepValue>=b},f.i18n.translate("Time step must be a number greater than %1s and smaller than or equal to the maximum time step").fetch(b))),e.valid&&(e=i(function(){return r||z.tStepValue<=z.stopTimeValue&&z.tStepValue>=b},f.i18n.translate("Time step must be a number greater than %1s and smaller than or equal to the end time").fetch(b.toExponential(),c.toExponential()))),d.tStep=e.valid,!e.valid&&e.errorMessage&&(d.tStepError=e.errorMessage)),e=h(z.runName,a.stringName),d.simName=e.valid,!e.valid&&e.errorMessage&&(d.simNameError=e.errorMessage);for(var k in d)d.hasOwnProperty(k)&&(d.allValid=d.allValid&&!(!1===d[k]));return d}function n(a,b){var c={allValid:!0,minXDisplay:!0,maxXDisplay:!0},d=a||0===a?e(a):z.minXDisplayValue,h=b||0===b?e(b):z.maxXDisplayValue,j=g(a,f.i18n.translate("Minimum").fetch());j.valid&&(j=i(function(){return d>=0&&d<h},f.i18n.translate("Minimum must be a number greater than %1$s and smaller than the maximum").fetch(0))),c.minXDisplay=j.valid,c.minXDisplayError=j.errorMessage,j=g(b,f.i18n.translate("Maximum").fetch()),j.valid&&(j=i(function(){return d<h&&h>=0&&h<=m},f.i18n.translate("Maximum must be a number greater than the minimum and smaller than or equal to %1$s").fetch(m))),c.maxXDisplay=j.valid,c.maxXDisplayError=j.errorMessage;for(var k in c)c.hasOwnProperty(k)&&(c.allValid=c.allValid&&!(!1===c[k]));return c}a=a||{};var o=a.initialConditions||k.AUTOMATIC,p=""+(a.startTime||"0"),q=""+(a.stopTime||"1e-3"),r=a.userDefinedTMax||!1,s=""+(a.tMax||l),t=a.userDefinedTStep||!1,u=""+(a.tStep||"1e-5"),v=a.runName||null,w=void 0,x=void 0,y=null,z=null,A=1e12,B=-A,C=a.cursorType||j.DISABLED,D=a.cursorSignals||[],E=a.cursors||{x:[],y:[],xy:[]};return z={initialConditionsEnum:k,get startTime(){return p},get startTimeValue(){return e(p)},set startTime(a){p=""+a},get stopTime(){return q},get stopTimeValue(){return e(q)},set stopTime(a){q=""+a},get initialConditions(){return o},set initialConditions(a){o=a},get userDefinedTMax(){return r},set userDefinedTMax(a){r=a},get tMax(){return s},get tMaxValue(){return e(s)},set tMax(a){s=""+a},get userDefinedTStep(){return t},set userDefinedTStep(a){t=a},get tStep(){return u},get tStepValue(){return e(u)},set tStep(a){u=""+a},get runName(){return"string"==typeof v?v:this.defaultRunName},set runName(a){v=a},set defaultRunName(a){y=a},get defaultRunName(){return y},get minXDisplay(){return w},get minXDisplayValue(){return"string"==typeof w||w instanceof String?e(w):w},set minXDisplay(a){w=void 0!==a&&null!==a?""+a:a},get maxXDisplay(){return x},get maxXDisplayValue(){return"string"==typeof x||x instanceof String?e(x):x},set maxXDisplay(a){x=void 0!==a&&null!==a?""+a:a},get minValidY(){return B},get maxValidY(){return A},get cursorType(){return C},set cursorType(a){C=a},get cursorSignals(){return D},set cursorSignals(a){D=a},get cursor1Signal(){return D[0]},get cursor2Signal(){return D[1]},set cursor1Signal(a){D[0]=a},set cursor2Signal(a){D[1]=a},get cursors(){return E},get activeCursors(){return E[C]},get cursor1(){return this.activeCursors[0]},get cursor2(){return this.activeCursors[1]},set activeCursors(a){E[C]=a},set cursor1(a){this.activeCursors[0]=a},set cursor2(a){this.activeCursors[1]=a},generateCommandString:b,validate:d,validateXDisplayRange:n},f.addReadyListener(function(a){z.defaultRunName=a.i18n.translate("Transient 1").fetch()}),z}var e,f,g,h,i,j,k,l,m;return a("default",d),{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.basicNumberValidate,h=a.basicTextValidate,i=a.customValidate},function(a){j=a.default}],execute:function(){k=Object.freeze({AUTOMATIC:"automatic",CALCDC:"calcDC",ZERO:"zero",USER:"user"}),l="1e-5",m=1e29}}}),a.register("5a",["4f","50","29"],function(a,b){"use strict";function c(a){function b(a){var b={abstol:!0,itl1:!0,itl4:!0,method:!0,reltol:!0,rshunt:!0,temperature:!0,vntol:!0,allValid:!0};a=a||{};var c=e(z.abstol,a.stringABSTOL);c.valid&&(c=f(function(){return z.abstolValue>0},g.i18n.translate("ABSTOL must be a number greater than 0").fetch())),b.abstol=c.valid,!c.valid&&c.errorMessage&&(b.abstolError=c.errorMessage),c=e(z.itl1,a.stringITL1),c.valid&&(c=f(function(){return!/\D/.test(z.itl1Value)&&z.itl1Value>0},g.i18n.translate("ITL1 must be a whole number greater than 0").fetch())),b.itl1=c.valid,!c.valid&&c.errorMessage&&(b.itl1Error=c.errorMessage),c=e(z.itl4,a.stringITL4),c.valid&&(c=f(function(){return!/\D/.test(z.itl4Value)&&z.itl4Value>0},g.i18n.translate("ITL4 must be a whole number greater than 0").fetch())),b.itl4=c.valid,!c.valid&&c.errorMessage&&(b.itl4Error=c.errorMessage),z.method!=h.TRAPEZOIDAL&&z.method!=h.GEAR&&(b.method=!1),c=e(z.reltol,a.stringRELTOL),c.valid&&(c=f(function(){return z.reltolValue>0&&z.reltolValue<=1},g.i18n.translate("RELTOL must be a number greater than 0 and smaller than or equal to 1").fetch())),b.reltol=c.valid,!c.valid&&c.errorMessage&&(b.reltolError=c.errorMessage),z.rshuntEnabled&&(c=e(z.rshunt,a.stringRSHUNT),c.valid&&(c=f(function(){return z.rshuntValue>0},g.i18n.translate("RSHUNT must be a number greater than 0").fetch())),b.rshunt=c.valid,!c.valid&&c.errorMessage&&(b.rshuntError=c.errorMessage)),c=e(z.temperature,a.stringTemp),c.valid&&(c=f(function(){return z.temperature>=-273.15},g.i18n.translate("Temp must be a number greater than or equal to -273.15").fetch())),b.temperature=c.valid,!c.valid&&c.errorMessage&&(b.temperatureError=c.errorMessage),c=e(z.vntol,a.stringVNTOL),c.valid&&(c=f(function(){return z.vntolValue>0},g.i18n.translate("VNTOL must be a number greater than 0").fetch())),b.vntol=c.valid,!c.valid&&c.errorMessage&&(b.vntolError=c.errorMessage);for(var d in b)b.hasOwnProperty(d)&&(b.allValid=b.allValid&&!(!1===b[d]));return b}function c(){var a=[],b=void 0;return b="set abstol = "+z.abstolValue,a.push(b),b="set itl1 = "+z.itl1Value,a.push(b),b="set itl4 = "+z.itl4Value,a.push(b),z.method===h.TRAPEZOIDAL?(b='set method = "trapezoidal"',a.push(b)):z.method===h.GEAR&&(b='set method = "gear"',a.push(b)),b="set reltol = "+z.reltolValue,a.push(b),z.rshuntEnabled&&(b="set rshunt = "+z.rshuntValue,a.push(b)),b="set temp = "+z.temperatureValue,a.push(b),b="set vntol = "+z.vntolValue,a.push(b),a}function p(){q=i,r=j,s=k,t=h.TRAPEZOIDAL,u=l,w=!0,v=m,x=n,y=o}a=a||{};var q=""+(a.abstol||i),r=""+(a.itl1||j),s=""+(a.itl4||k),t=a.method||h.TRAPEZOIDAL,u=""+(a.reltol||l),v=""+(a.rshunt||m),w=void 0===a.rshuntEnabled||a.rshuntEnabled,x=""+(a.temperature||n),y=""+(a.vntol||o),z=null;return z={integrationMethodEnum:h,get abstol(){return q},get abstolValue(){return d(q)},set abstol(a){q=""+a},get itl1(){return r},get itl1Value(){return d(r)},set itl1(a){r=""+a},get itl4(){return s},get itl4Value(){return d(s)},set itl4(a){s=""+a},get method(){return t},set method(a){t=a},get reltol(){return u},get reltolValue(){return d(u)},set reltol(a){u=""+a},get rshunt(){return v},get rshuntValue(){return d(v)},set rshunt(a){v=""+a},get rshuntEnabled(){return w},set rshuntEnabled(a){w=a},get temperature(){return x},get temperatureValue(){return d(x)},set temperature(a){x=""+a},get vntol(){return y},get vntolValue(){return d(y)},set vntol(a){y=""+a},validate:b,generateCommandStrings:c,resetToDefault:p}}var d,e,f,g,h,i,j,k,l,m,n,o;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.basicNumberValidate,f=a.customValidate},function(a){g=a.default}],execute:function(){h=Object.freeze({TRAPEZOIDAL:"trapezoidal",GEAR:"gear"}),i="1e-12",j="100",k="100",l="0.001",m="1e12",n="27",o="1e-6"}}}),a.register("20",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({DEC_OUT_OF_MEMORY:"DEC_OUT_OF_MEMORY"}),a("default",c)}}}),a.register("5b",[],function(a,b){"use strict";var c,d,e,f,g,h;return{setters:[],execute:function(){c=document.location.search.substring(1).split("&").reduce(function(a,b){var c=b.split("=");return c[0]&&(a[c[0]]=!(c.length>1)||c[1]),a},{}),d=!!c.debug,e=!!c.websocket,f=function(){return new Worker(window.multisim.rootFolder+"simulationworker/simworker.js")},g=function(){var a=new Worker(window.multisim.rootFolder+"simulationworker/simworkersocket.js");return a.postMessage({command:"setserver",serveraddress:c.websocket}),a},h={create:e?g:f,simulatorSource:d?"xspicecontrol_debug.js":"xspicecontrol_release.js"},a("default",h)}}}),a.register("5c",[],function(a,b){"use strict";var c,d;return{setters:[],execute:function(){c=function(){return new Worker(window.multisim.rootFolder+"streamingworker/streamingworker.js")},d={create:c},a("default",d)}}}),a.register("5d",["5e"],function(a,b){"use strict";var c,d;return{setters:[function(a){c=a.ConnectionToElvisDevice,d=a.SignalingChannel}],execute:function(){a("default",function(){function a(a,b){try{a.sendCommand(b)}catch(b){a.disconnect()}}function b(b){b.sources.forEach(function(c){var d=p[c.connectionId],e=b.timeSpan/b.resolution,f=Math.round(1/e),g=b.timeSpan*Math.min(1,Math.max(0,b.triggerDelay)),h=1.1*b.timeSpan;d&&a(d,{scope:{scope:[{command:"configureTiming",sampleRate:f,acquisitionTimes:h,preTriggerTimes:g,samplingMode:"decimate"}]}})})}function e(a){var b={};if(a.length)try{!function(){var c=null;b=a.reduce(function(a,b){return c?a.channels[0].data||a.channels.forEach(function(a){if(!(a.binaryOffset+a.binaryLength<=b.byteLength))throw new Error("invalid data, chunk size "+a.binaryLength+" at offset "+a.binaryOffset+" is exceeding the buffer boundary at "+a.bytelength);switch(a.bufferDataType){case"F64":a.data=new Float64Array(b.buffer,a.binaryOffset,a.binaryLength/Float64Array.BYTES_PER_ELEMENT);break;case"F32":a.data=new Float32Array(b.buffer,a.binaryOffset,a.binaryLength/Float32Array.BYTES_PER_ELEMENT);break;case"U32":a.data=new Uint32Array(b.buffer,a.binaryOffset,a.binaryLength/Uint32Array.BYTES_PER_ELEMENT);break;case"I32":a.data=new Int32Array(b.buffer,a.binaryOffset,a.binaryLength/Int32Array.BYTES_PER_ELEMENT);break;case"U16":a.data=new Uint16Array(b.buffer,a.binaryOffset,a.binaryLength/Uint16Array.BYTES_PER_ELEMENT);break;case"I16":a.data=new Int16Array(b.buffer,a.binaryOffset,a.binaryLength/Int16Array.BYTES_PER_ELEMENT);break;case"U8":a.data=new Uint8Array(b.buffer,a.binaryOffset,a.binaryLength/Uint8Array.BYTES_PER_ELEMENT);break;case"I8":a.data=new Int8Array(b.buffer,a.binaryOffset,a.binaryLength/Int8Array.BYTES_PER_ELEMENT)}}):(c=JSON.parse(String.fromCharCode.apply(null,new Int8Array(b))),a.channels=[],Object.keys(c).forEach(function(b){var d=c[b];Object.keys(d).forEach(function(c){var e=d[c],f=v.instruments.find(function(a){return a.name===b}),g=f?f.channels.find(function(a){return"scope/"+a.name===c}):null;a.channels.push({name:c,binaryLength:e[0].binaryLength||0,binaryOffset:e[0].binaryOffset||0,data:null,bufferDataType:e[0].bufferDataType||"I16",state:e[0],requestData:g?g.channelRequestInfo:null})})})),a},{})}()}catch(a){b.error=a}else b.error=new Error("no chunks in the data block");return b.error||(b.channels=b.channels.map(function(a){var b=a.state.actualSampleFreq?1/a.state.actualSampleFreq:a.state.timeStepSize;return a.data=Array.from(a.data).map(function(a,c){return[c*b,a]}),a.state.triggerIndex=0,a})),b}function f(b,c){w=!1,u=c||function(){},b.sources.forEach(function(b){b.instruments.forEach(function(a){var b=v.instruments.find(function(b){return b.name===a.name});b&&(b.channels.forEach(function(a){a.enable=!1}),x.forEach(function(a){a.enable=!1}),a.channels.forEach(function(a){var c=b.channels.find(function(b){return b.name===a.name}),d=x.find(function(b){return b.name===a.name});c&&(c.channelRequestInfo=a,c.enable=!0),d&&(d.enable=!0)}))});var c=p[b.connectionId];c&&(s[b.connectionId]=b,a(c,{scope:{scope:[{command:"open"}]}}),a(c,{scope:{scope:[{command:"configureImmediateTrigger"}]}}),a(c,{scope:x.reduce(function(a,b){return a["scope/"+b.name]=[{command:"configureAnalogChannel",enable:b.enable,verticalRange:b.verticalRange,verticalOffset:b.verticalOffset,probeAttenuation:b.probeAttenuation,coupling:b.coupling}],a},{})}),a(c,{scope:{scope:[{command:"run"}]}}),s[b.connectionId]=z)}),u({event:"startStream",result:{}})}function g(){var a=t;return t={event:"data",data:{channels:[]}},a}function h(){Object.keys(s).forEach(function(a){i(a,s[a].id)})}function i(b,c){u({id:c,event:"end"}),delete s[b],w=!0;var d=p[b];d&&a(d,{scope:{scope:[{command:"stop"}]}})}function j(a,b,c){var d=function(a){return-1!==["scope"].indexOf(a.toLowerCase())},e=function(a){return-1!==["fgen"].indexOf(a.toLowerCase())},f=function(a){return-1!==["scope","fgen"].indexOf(a.toLowerCase())};b.device&&Array.isArray(b.device.device)&&b.device.device.forEach(function(b){switch(b.command){case"enumerate":!function(){var g=b.userData&&void 0!==b.userData.sourceID?b.userData.sourceID:-1,h=a.find(function(a){return a.id===g});h&&function(){var a=function(a){return h.instruments?h.instruments.find(function(b){return b.name===a}):null},g=function(a,b,c,d){var e=[];return Object.keys(a.channels).forEach(function(f){var g=a.channels[f],h=d?d.channels.find(function(a){return a.name===f}):null;g&&h&&(g.channelRequestInfo=h),e.push({name:f,input:b,output:c,channelInfo:h||void 0})}),e},i={instruments:[],device:b.deviceModel};Object.keys(b.instruments).forEach(function(c){if(f(c)){var h=b.instruments[c];i.instruments.push({name:c,numChans:h.numChans,channels:g(h,d(c),e(c),a(c))})}}),v=i,c(h.id,i,b)}()}()}})}function k(a,b,c){var d=new Uint8Array(a),e=new Uint32Array(d.subarray(0,4*(a.byteLength/4|0)));if(c=c||function(){},a.byteLength>=4&&a.byteLength>=e[0]){var f=new Uint32Array(a,0,e[0]/4),g=f[0],h=f[1],i=f[4],j=f[5],k=f[6];(!q||q.length<h)&&(q=new Uint8Array(h),r=i),q&&(q.set(d.subarray(g),k),--r&&j!==i-1||(r||j!==i-1?c(new Error("Frames were dropped")):b(q.buffer),q=null,r=0))}else c(new Error("No valid data"))}function l(a){var b="string"!=typeof a,c={json:null,chunks:null};b?w||k(a,function(a){if(a.byteLength){var b=String.fromCharCode.apply(null,new Uint8Array(a.slice(0,1)));if(isNaN(parseInt(b,16)))c.json=JSON.parse((new TextDecoder).decode(a));else{c.chunks=y(a);var d=e(c.chunks);d.error||(d.channels.forEach(function(a){var b=t.data.channels.findIndex(function(b){return b.name===a.name});-1===b?t.data.channels.push(a):t.data.channels[b]=a}),u({event:"dataavailable"}))}}else c.error=new Error("Data has no length")}):c.json=JSON.parse(a)}function m(a,b){b.sources.forEach(function(a){a.deviceID&&delete p[a.deviceID],a.onClose&&a.onClose()}),Object.keys(p).forEach(function(a){p[a]===b&&delete p[a]})}function n(b,e,f){b.map(function(a){return a.network?{network:a.network,deviceCode:a.deviceCode,id:e,onClose:a.onClose}:{usb:a.usb,windowName:"lobbybar proxy page",windowFeatures:"innerWidth=400, innerHeight=180",id:e,onClose:a.onClose}}).forEach(function(b){b.deviceID=b.network?b.network+"-"+b.deviceCode:b.usb;var g=p[b.deviceID];g||(g=b.network?new c(new d.WebSocket(b.network),b.deviceCode):new c(new d.MessageChannel(b.usb,null,"innerWidth=400, innerHeight=180"),"usb"),g.sources=[],p[b.deviceID]=g,g.onresponse=function(a){return j(g.sources,a,function(a,b){f(b.error?{id:a,error:b.error.toString()}:{id:a,result:b})})},g.ondata=function(a){return l(a)},g.onclose=function(a){return m(a,g)}),g.sources.find(function(a){return b.id===a.id})||g.sources.push(b),g.connect().then(function(){a(g,{device:{device:[{command:"open"},{command:"enumerate",userData:{sourceID:b.id}}]}})}).catch(function(a){f({id:e,error:"object"==typeof a?a.message:a})})})}function o(a,b){a.map(function(a){return a.network?{network:a.network,deviceCode:a.deviceCode,id:b}:{usb:a.usb,id:b}}).forEach(function(a){a.deviceID=a.network?a.network+"-"+a.deviceCode:a.usb;var b=p[a.deviceID];if(b){var c=b.sources.findIndex(function(b){return a.id===b.id});-1!==c&&(b.sources.splice(c,1),!b.sources.length&&b.connected&&b.disconnect())}})}var p={},q=null,r=0,s={},t={event:"data",data:{channels:[]}},u=function(){},v={},w=!1,x=[{name:"1",enable:!0,verticalRange:10,verticalOffset:0,probeAttenuation:"1x",coupling:"ac"},{name:"2",enable:!1,verticalRange:10,verticalOffset:0,probeAttenuation:"1x",coupling:"ac"},{name:"3",enable:!1,verticalRange:10,verticalOffset:0,probeAttenuation:"1x",coupling:"ac"},{name:"4",enable:!1,verticalRange:10,verticalOffset:0,probeAttenuation:"1x",coupling:"ac"}],y=function(a){var b=new Int8Array(a),c=[];if(b.length)try{for(var d=String.fromCharCode(b[0]),e=null,f=0,g="",h=0;h<b.length-1;h++){if(e=String.fromCharCode(b[h+1]),"\r"===d&&"\n"===e){if(f=parseInt(g,16),g="",0===f)break;if(!(h+2+f+2<b.length))throw new Error("Error in chunks, expected chunk length ("+f+") and offset ("+h+") exceeds buffer size of "+b.length);for(c.push(b.slice(h+2,h+2+f)),h+=2+f,e=String.fromCharCode(b[h+1]);"\r"===e||"\n"===e;)h++,e=String.fromCharCode(b[h+1])}else g+=d;d=e}}catch(a){console.log(a.toString()),c=[]}return c},z={deviceName:"elvisIII",doSetStreamWindow:b,doStartStream:f,stopStreaming:h,doEnd:i,disconnect:o,connect:n,getData:g,canUseForSource:function(a){return a.usb||a.network&&a.deviceCode}};return z}())}}}),a.register("5f",["4f","1f"],function(a,b){"use strict";function c(){function a(){switch(c){case e.THREE:k="0",l="0.8",m="2",n="3.3";break;case e.FIVE:k="0",l="0.8",m="2",n="5";break;case e.SIMPLE:k="0",l="2.49",m="2.5",n="5";break;case e.CUSTOM:k=g,l=h,m=i,n=j}}function b(){var a=[],b=void 0;return o.logicLevel===e.THREE?(b='set logicLevel = "3.3V"',a.push(b)):o.logicLevel===e.FIVE?(b='set logicLevel = "5V"',a.push(b)):o.logicLevel===e.SIMPLE?(b='set logicLevel = "Simplified"',a.push(b)):o.logicLevel===e.CUSTOM&&(b='set logicLevel = "Custom"',a.push(b)),b="set outputLow = "+o.outputLowValue,a.push(b),b="set inputLowThreshold = "+o.inputLowThresholdValue,a.push(b),b="set inputHighThreshold = "+o.inputHighThresholdValue,a.push(b),b="set outputHigh = "+o.outputHighValue,a.push(b),a}var c=f,k=void 0,l=void 0,m=void 0,n=void 0;a();var o=null;return o={get logicLevel(){return c},set logicLevel(b){c=b,a()},get outputLow(){return k},get outputLowValue(){return d(k)},set outputLow(a){k=""+a},get inputLowThreshold(){return l},get inputLowThresholdValue(){return d(l)},set inputLowThreshold(a){l=""+a},get inputHighThreshold(){return m},get inputHighThresholdValue(){return d(m)},set inputHighThreshold(a){m=""+a},get outputHigh(){return n},get outputHighValue(){return d(n)},set outputHigh(a){n=""+a},generateCommandStrings:b}}var d,e,f,g,h,i,j;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.ELogicFamily}],execute:function(){f=e.THREE,g="0",h="0.8",i="2",j="5"}}}),a.register("60",["1c","21","61","42","57","3c","3b","29","4e","53","54","56","58","59","5a","32","44","20","5b","5c","33","23","5d","5f","62","34"],function(a,b){"use strict";function c(a){return{handleData:function(b){var c={success:!0,error:null,errorCode:null};return b.channels.every(function(d,e){return d.requestData?c=a.setRelativeXChannelData(d.data,d.state.triggerIndex,[d.requestData.signalName],e===b.channels.length-1,null):(c.success=!1,c.error="Resulting channel data was not what we expected",c.errorCode=-1),c.success}),c}}}function d(a,b,d){var e=G.create(),f=c(a.dataManager);return e.onmessage=function(b){var c=b.data;switch(c.event){case"startStream":!c.error&&c.result?function(){var b=function b(){R&&(R=!1,N&&N.postMessage({command:"retrievedata"})),S=a.simState!==D.Stopped?S=window.requestAnimationFrame(b):null};S=window.requestAnimationFrame(b)}():d(c.error,c.url);break;case"end":window.cancelAnimationFrame(S),S=null;break;case"dataavailable":R=!0;break;case"data":var e=null;if(c.data&&(e=f.handleData(c.data)),e&&!e.success){if(a.stopSimulation(),e.errorCode!==E.DEC_OUT_OF_MEMORY)throw a.showErrorDialog(a.errDialog.errorMessages.ERR_UNKNOWN_ERROR),e.error?e.error:new Error(a.errDialog.errorMessages.ERR_UNKNOWN_ERROR);a.showErrorDialog(a.errDialog.errorMessages.ERR_OUT_OF_MEMORY),p.notifyTracker("memory-limit",{circuit_url:window.location.href,simulation_time:a.dataManager.getLimits().maxx})}break;case"stop":break;case"connect":var g=T.findIndex(function(a){return c.id===a.id});if(-1!==g){var h=T[g];T.splice(g,1),h.callback&&(c.error?h.callback({error:c.error}):h.callback(c.result))}}},e.onerror=function(a){console.log(a),N&&N.terminate(),N=null,d(new Error(a.message))},e}function e(a,b,d){var e=b.reduce(function(a,b){var c=a.find(function(a){return a.connectionId===b.connectionTarget.connectionId});if(!c){switch(b.source){case I.url:c={url:b.connectionTarget.url,connectionId:b.connectionTarget.connectionId,instruments:[],source:b.source};break;case I.network:c={network:b.connectionTarget.network,deviceCode:b.connectionTarget.deviceCode,connectionId:b.connectionTarget.connectionId,instruments:[],source:b.source};break;case I.usb:c={usb:b.connectionTarget.usb,connectionId:b.connectionTarget.connectionId,instruments:[],source:b.source}}a.push(c)}var d=c.instruments.find(function(a){return a.name===b.instrument});return d||(d={name:b.instrument,channels:[]},c.instruments.push(d)),b.xChannel||d.channels.find(function(a){return a.name===b.name})||d.channels.push({name:b.channel,signalName:b.signalName,trigger:b.trigger}),a},[]);O=e.filter(function(a){return a.source===I.url}),P=e.filter(function(a){return a.source===I.network||a.source===I.usb}),g(),N&&N.postMessage({command:"startStream",sources:O,single:d});var f=function(){},h=!1,i=null;J.doStartStream({sources:P,single:d},function(b){var d=function(b,c){a.listeners.notifyListeners(C.StreamErrored,{connected:!1,url:c,error:b})};switch(b.event){case"startStream":!b.error&&b.result?function(){var b=c(a.dataManager);f=function(){var c=J.getData(),d=null;if(c&&(d=b.handleData(c.data)),d&&!d.success){if(a.stopSimulation(),d.errorCode!==E.DEC_OUT_OF_MEMORY)throw a.showErrorDialog(a.errDialog.errorMessages.ERR_UNKNOWN_ERROR),d.error?d.error:new Error(a.errDialog.errorMessages.ERR_UNKNOWN_ERROR);a.showErrorDialog(a.errDialog.errorMessages.ERR_OUT_OF_MEMORY),p.notifyTracker("memory-limit",{circuit_url:window.location.href,simulation_time:a.dataManager.getLimits().maxx})}};var d=function a(){h&&(h=!1,f()),i=window.requestAnimationFrame(a)};i=window.requestAnimationFrame(d)}():d(b.message.error,b.message.url);break;case"end":f(),window.cancelAnimationFrame(i),i=null,f=function(){};break;case"dataavailable":h=!0}})}function f(){N&&N.postMessage({command:"stop"}),J.stopStreaming(),O=[],P=[]}function g(){N&&O.length&&N.postMessage({command:"setStreamWindow",triggerDelay:.1,timeSpan:Q.span,resolution:Q.resolution,sources:O}),P.length&&J.doSetStreamWindow({triggerDelay:.1,timeSpan:Q.span,resolution:Q.resolution,sources:P})}function h(a,b,c){if(b&&b>a){var d=b-a;c>0&&(Q.span!==d||Q.resolution!==c)&&(Q.span=d,Q.resolution=c,g())}}function i(a){N||(N=d(a,function(){},function(b,c){a.listeners.notifyListeners(C.StreamErrored,{connected:!1,url:c,error:b})}))}function j(a,b,c){function d(a){var b=a.shift(),c=a.length/2|0,d=0,e=[b],g=void 0;for(d=0;d<c;d++)g=r(f,a[2*d],a[2*d+1],d),e.push(g[0]),e.push(g[1]);return e}var f={LastPoint:[],Points:[],Set:[]},g=!1;return{outPBeginPlot:function(d,i,j){var k=d.split(","),l=k.map(function(a){return{signalName:a,displayName:"",signalIsExternal:!1,xChannelIndex:0,getExternalData:null}});switch(f.LastPoint=[],f.Points=[],g&&a.dataManager.addSweep("",!0),b()){case o.DC_SWEEP:if(j.source2Name&&j.useSource2){var m=(i.beginplotdata.params||"").split(/\s*,\s*/).map(function(a){return a.split("=")}).reduce(function(a,b){return 2===b.length&&(a[b[0].trim().toLowerCase()]=b[1].trim().replace(/'/g,"")),a},{}),p=m.param2.replace(/^[vi]/,"")+" = "+t(m.value,void 0,void 0,5,!0,!1,!0)+(/^v/.test(j.source2Name)?"V":"A");a.dataManager.addSweep(p,g)}break;case o.PARAM_SWEEP:switch(j.selectedAnalysisType){case o.DC:a.dataManager.addSweep("",!0);break;case o.Transient:case o.AC:var q=j.parameterName+" = "+(t(i.beginplotdata.params.split(/=/)[1],void 0,void 0,5,!0,!1,!0)+j.parameterUnits);a.dataManager.addSweep(q,g)}}c&&function(){var d=c();d&&d.probeData&&d.probeData.netlistVariableToProbeInstances&&k.forEach(function(a,b){var c=d.probeData.netlistVariableToProbeInstances.get(a);if(c){var e=c.size,f=0,g=0,h=0,i=!0,j=!1,k=void 0;try{for(var m,o=c.entries()[Symbol.iterator]();!(i=(m=o.next()).done);i=!0){var p=n(m.value,2),q=p[0];p[1]===L.digital&&(f++,g=q.getVoltageLevels().maxLowVoltage,h=q.getVoltageLevels().minHighVoltage)}}catch(a){j=!0,k=a}finally{try{!i&&o.return&&o.return()}finally{if(j)throw k}}if(f===e){var r=/^\$?(\w+)/,s=r.exec(a),t=d.netlist.nets.get(s[1]);l[b].needsConvertToDigital=!t.isDigital,l[b].inputLowThreshold=g,l[b].inputHighThreshold=h}else f>0&&l.push({signalName:a+"-!dprobe",displayName:"",signalIsExternal:!1,xChannelIndex:0,getExternalData:null,yChannelIndex:b,inputLowThreshold:g,inputHighThreshold:h})}}),d&&d.probeController&&function(){var c=d.probeController.getProbes(),f=b(),g={};c.forEach(function(a){if(d.probeController.getProbeEnableState(a)){var b=a.probeID,c=a.getExternalDataType();if(c===a.EXTERNAL_DATA_TYPE.EDT_FILE){var e=a.getExternalData();if(e&&void 0!==e.frequency){var h=function(){return a.getExternalData().frequency},i=function(){return a.getExternalData().mag||a.getExternalData().gain},j=function(){return a.getExternalData().phase};l.push({signalName:b+"_@DATA_Freq",displayName:"",signalIsExternal:!0,xChannelIndex:l.length,getExternalData:h}),l.push({signalName:b+"_@DATA",displayName:"",signalIsExternal:!0,xChannelIndex:l.length-1,getExternalData:i}),l.push({signalName:b+"_@DATA",displayName:"",signalIsExternal:!0,xChannelIndex:l.length-2,getExternalData:j})}else if(e&&void 0!==e.x){var k=function(){return a.getExternalData().x},m=function(){return a.getExternalData().y};l.push({signalName:b+"_@DATA_X",displayName:"",signalIsExternal:!0,xChannelIndex:l.length,getExternalData:k}),l.push({signalName:b+"_@DATA",displayName:"",signalIsExternal:!0,xChannelIndex:l.length-1,getExternalData:m})}}else if(c===a.EXTERNAL_DATA_TYPE.EDT_STREAM&&a.connectionState===H.CONNECTED){var n=a.getActiveChannel();n&&f===o.Interactive&&function(){var b=a.getDisplayVariableName()+"-"+n.instrument+"-"+n.channel;l.find(function(a){return a.signalName===b})||(l.push({signalName:b+"-x",displayName:"",signalIsExternal:!0,xChannelIndex:l.length,channelIndex:l.length,source:a.source,connectionTarget:a.connectionTarget,channel:n.channel,instrument:n.instrument,relativeX:n.relativeX,xChannel:!0}),l.push({signalName:b,displayName:"",signalIsExternal:!0,xChannelIndex:l.length-1,channelIndex:l.length,source:a.source,connectionTarget:a.connectionTarget,channel:n.channel,instrument:n.instrument,relativeX:n.relativeX,xChannel:!1}),g[a.connectionTarget.connectionId]||(l[l.length-1].trigger={level:0,fallingEdge:!1},g[a.connectionTarget.connectionId]=!0))}()}}});var i=l.filter(function(a){return a.source&&a.source!==I.file});i.length&&(f===o.Transient&&h(j.minXDisplayValue,j.maxXDisplayValue,4e3),e(a,i,f===o.Transient))}()}(),a.dataManager.initData(l),f.Set=[],g=!1},outPDataBlock:function(c,e){var f=a.dataManager;f.convertAnalogDataToDigitalData(c),f.addDigitalDataToDataBlock(c);var g=e.analysisType===o.AC||e.analysisType===o.PARAM_SWEEP&&e.selectedAnalysisType===o.AC;return f.appendData(c,function(a){return g?d(a):a},b())},outPData:function(b,c,d){var e=null;return 0===d&&f.Set.length&&(e=a.dataManager.appendData([f.Set]),f.Set=[]),f.Set.length||f.Set.push(b),f.Set.push(c),e},set isNewSimulation(a){g=a},get isNewSimulation(){return g}}}function k(a,b){var c=V.get(a).apply(this,b);return c.analysisType=a,c}function l(a,b){var c=u.i18n,d=a;switch(a){case o.Interactive:d=c.translate("Interactive").fetch();break;case o.Transient:d=c.translate("Transient").fetch();break;case o.AC:d=c.translate("AC Sweep").fetch();break;case o.DC:d=c.translate(b?"DC Op":"DC Operating Point").fetch();break;case o.DC_SWEEP:d=c.translate("DC Sweep").fetch();break;case o.PARAM_SWEEP:d=c.translate(b?"Parameter":"Parameter Sweep").fetch()}return d}function m(a,b,c,d,e,g,m){function n(a){a===D.Stopped&&(y=!1);var c={oldState:x,newState:a};x=a,b.notifyListeners(C.RunStateChanged,c)}var r=void 0,t=!1,u=document.location.search.substring(1).split("&").reduce(function(a,b){var c=b.split("=");return c[0]&&(a[c[0]]=!(c.length>1)||c[1]),a},{}),v=!!u.debugmessages,w=o.Interactive,x=D.Stopped,y=!1,z={get simState(){return x},get dataManager(){return a},get errDialog(){return g},get showErrorDialog(){return da},get stopSimulation(){return qa},get listeners(){return b},get activeDesign(){return c()}},A=j(z,function(){return w},c),G=!1,H=[],I=null,L=void 0,O=g,P=new Map,Q=function(){L&&(d.processCurrentMeasurementInfo(L,function(){}),L.netlistOutOfDate=!0)};a.dataUpdateListeners.addListener(a.EDataUpdateEvents.Stale,Q),a.dataUpdateListeners.addListener(a.EDataUpdateEvents.Refreshed,Q);var R=function(){G=!1,r&&r.terminate(),r=null,S(null,!0)},S=function(a,c){N||ta();var d=function(a){H.forEach(function(b){b(r&&G,a)}),H=[]};a&&-1===H.indexOf(a)&&H.push(a),r&&G?d():(r||(r=_(function(){G=!0,d()},function(a){G=!1,r.terminate(),r=null,d(a)})),c||b.notifyListeners(C.SimulatorLoadingBegin))};Object.keys(o).forEach(function(a){var b=k(o[a],null);b&&P.set(o[a],b)});var V=B(),W=K(),X=function(a){return P.get(a)},Y=function(a,b){var d="save ",f=c(),g=f?f.probeController:null;return g?function(){g.updateProbeSimulationVariables(a);var c=g.getAllNetlistVariables(!0);f&&b&&f.netlist.forEachNet(function(a){if(a.isDigital){var b="$"+a.name;c.includes(b)||c.push(b)}}),d+=c.join(" ")}():d="",f&&function(){var a=f.getAllInstances().filter(function(a){return a.activeModelID&&!a.excludedFromSimulation}),b=[];a.forEach(function(a){var c=e.getModelFromCache(a.activeModelID);c&&c.animationVariables&&function(){var d=a.designComponent.isMultiSection(),e=s(a.designComponent.refDes,d?a.sectionName:"",{});c.animationVariables.forEach(function(a){b.push(a+e)})}()}),b.length>0&&(d+=" "+b.join(" "))}(),d},Z=function(a){var b=X(a),c=void 0;if(b){c={initialize:U.concat(V.generateCommandStrings()).concat(W.generateCommandStrings()),start:b.generateCommandString(),selectedAnalysisType:b.selectedAnalysisType};var d=Y(void 0,a===o.Interactive);d&&(c.save=d)}return c},$=function(a){var b=X(a),c=!0;switch(a){case o.PARAM_SWEEP:var d=X(b.selectedAnalysisType);c=b.validate().allValid&&d.validate().allValid&&V.validate().allValid;break;default:c=b.validate().allValid&&V.validate().allValid}return c},_=function(a,b){var c=F.create();return c.onmessage=function(c){ga.call(this,c,a,b)},c.onerror=ja,c.postMessage({command:"initialize",path:document.location.href,id:"initialize",simsource:F.simulatorSource}),c},aa=function(){f(),b.notifyListeners(C.StopSimulation),n(D.Stopped),R()},ba=function(){b.notifyListeners(C.PauseSimulation)},ca=function(){b.notifyListeners(C.ResumeSimulation,null)},da=function(a){O.open(a)},ea=!1,fa=function(){t?(t=!1,r.postMessage({command:"retrievedata"})):ea=!0},ga=function(c,d,e){var g=c.data;switch(g.event){case"outpbeginplot":A.outPBeginPlot(g.names,g.data,X(w)),b.notifyListeners(C.SimulationRunning);break;case"outpendplot":window.cancelAnimationFrame(ka),ka=null,f(),n(D.Stopped),b.notifyListeners(C.StopSimulation);break;case"dataavailable":ea?(r.postMessage({command:"retrievedata"}),ea=!1):t=!0;break;case"outpdata":var h=null;if((h=g.data?A.outPDataBlock(g.data,X(w)):A.outPData(g.x,g.y,g.traceid))&&!h.success){if(qa(),h.errorCode!==E.DEC_OUT_OF_MEMORY)throw da(O.errorMessages.ERR_UNKNOWN_ERROR),h.error?h.error:new Error(O.errorMessages.ERR_UNKNOWN_ERROR);da(O.errorMessages.ERR_OUT_OF_MEMORY),p.notifyTracker("memory-limit",{circuit_url:window.location.href,simulation_time:a.getLimits().maxx})}break;case"timepointbatchsizechange":break;case"done":switch(g.id){case"initialize":"error"===g.result?e(g):(b.notifyListeners(C.SimulatorLoaded),r.postMessage({command:"debugmessages",value:v?255:0}),d());break;case"startsimulation":"success"===g.result?function(){n(D.Running);var a=function a(){t&&(t=!1,r.postMessage({command:"retrievedata"})),ka=x!==D.Stopped?ka=window.requestAnimationFrame(a):null};ka=window.requestAnimationFrame(a),r.postMessage({command:"nexttimepoints",id:"nexttimepoints"})}():b.notifyListeners(C.SimulationErrored,{errorType:"fatal",message:g.message});break;case"pausesimulation":"success"===g.result&&ba();break;case"resumesimulation":"success"===g.result&&ca();break;case"stopsimulation":"success"===g.result&&aa()}break;case"status":b.notifyListeners(C.SimulatorLoadStateChange,{message:g.message});break;case"message":case"debugmessage":b.notifyListeners(C.SimulationErrored,{errorType:"info",message:g.message});break;case"spiceerrormessage":"fatal"===g.errorType&&e(g.message),b.notifyListeners(C.SimulationErrored,{errorType:g.errorType,message:g.message});break;case"sendlists":ia(g.data)}},ha={netlist:null,simulationSettings:null,interactiveMode:!1},ia=function(a){a.pininfolist&&(L=a.pininfolist,d.processCurrentMeasurementInfo(a.pininfolist,function(b){var c={initialize:ha.simulationSettings.initialize.slice(0),start:ha.simulationSettings.start},d=Y(a.pininfolist,ha.interactiveMode);d&&c.initialize.push(d),la(b,c,ha.interactiveMode),L.netlistOutOfDate=!1}))},ja=function(a){console.log(a),n(D.Stopped),R(),b.notifyListeners(C.SimWorkerCrashed,{event:a})},ka=null,la=function(a,b,c){c?r.postMessage({command:"startsimulation",id:"startsimulation",netlist:a,spicecommands:b,intervalmode:!0,timeoutcount:1,timeouttime:0,timestepbatchsize:10}):r.postMessage({command:"runsimulation",id:"runsimulation",netlist:a,spicecommands:b})},ma=function(a,c,e){a?(b.notifyListeners(C.StartSimulation),ha.interactiveMode=e,ha.netlist=a,ha.simulationSettings=c,r.postMessage({command:"requestlists",id:"requestlists",netlist:a,lists:["pininfolist"],parameters:[d.buildPinInfoRequestString()]})):b.notifyListeners(C.SimulationErrored)},na=function(a,c,d){y=!0,A.isNewSimulation=!0;var e=function(){I=d,ma(a,c,d===o.Interactive||d===o.Transient||d===o.PARAM_SWEEP&&c.selectedAnalysisType===o.Transient)},f=function(){b.notifyListeners(C.SimWorkerCrashed),n(D.Stopped)};S(function(a,b){a?e():f(b)},!1)},oa=function(){x===D.Running&&(n(D.Paused),r?r.postMessage({command:"pausesimulation",id:"pausesimulation"}):aa())},pa=function(){x===D.Paused&&(n(D.Running),r?r.postMessage({command:"resumesimulation",id:"resumesimulation"}):aa())},qa=function(){n(D.Stopped),r?I===o.AC||I===o.PARAM_SWEEP&&X(I).selectedAnalysisType===o.AC?aa():r.postMessage({command:"stopsimulation",id:"stopsimulation"}):aa()},ra=function(a,b){r&&x!==D.Stopped&&function(){var c=Object.keys(a),d=0,e=0;c.forEach(function(c){var f=a[c];f.parameters.parameters.forEach(function(c){c.functionString?(d++,window.multisim.tryCatchAll(function(){q(c.functionString,f.parameters.variables,function(f){f.error?b(!1):(c.value=f,++e===d&&(r.postMessage({command:"changevalue",valueinfo:a}),b(!0)))})})):c.value=f.value})}),0===d&&(r.postMessage({command:"changevalue",valueinfo:a}),b(!0))}()},sa=function(a,b,c,d,e,f){ra([{device_name:a,model_name:b,instance_name:c,parameters:d,value:e}],f||function(){})},ta=function(){i(z)};ta();var ua={initialize:function(){S(null,!0)},listeners:b,startSimulation:na,pauseSimulation:oa,resumeSimulation:pa,stopSimulation:qa,get dataManager(){return a},get simulationState(){return x},get isInSimulation(){return y},get lastRunAnalysisType(){return I},get activeAnalysis(){return w},set activeAnalysis(a){a!==w&&(w=a,this.listeners.notifyListeners(C.ActiveAnalysisChanged,this))},get pinInfoList(){return L},clearPinInfo:function(){L=null},getSimulationSettings:X,get globalSimulationSettings(){return V},get documentDigitalSettings(){return W},generateSimulationCommands:Z,validateAnalysisSettings:$,notifySimulationSettingsUpdated:function(a){this.listeners.notifyListeners(C.SimulationSettingsChanged,{simulationController:this,changeSource:a})},notifySettingsFeedbackChanged:function(a){this.listeners.notifyListeners(C.SettingsFeedbackChanged,{simulationController:this,changeSource:a})},changeDeviceValues:ra,changeSingleDeviceValue:sa,set compParamToSweep(a){d.compParamToSweep=a},connectStreamingSource:function(a,b,c){a.url?(N||ta(),N?(T=T.filter(function(a){return a.id!=b}),T.push({callback:c,id:b}),N.postMessage({command:"connect",sources:[{url:a.url,id:b}]})):c({error:"Failed to create worker for streaming data."})):(a.network&&a.deviceCode||a.usb)&&(T=T.filter(function(a){return a.id!=b}),T.push({callback:c,id:b}),J.connect([a],b,function(a){var b=a,c=T.findIndex(function(a){return b.id===a.id});if(-1!==c){var d=T[c];T.splice(c,1),d.callback&&(b.error?d.callback({error:b.error}):d.callback(b.result))}}))},cancelConnectStreamingSource:function(a,b){a.url?N&&N.postMessage({command:"cancelConnect",sources:[{url:a.url,connectionId:a.connectionId}]}):(a.network&&a.deviceCode||a.usb)&&J.disconnect([a],b)},setStreamingDisplayWindow:h,getAnalysisText:l},va=new M(ua,c,m);return Object.assign(ua,{multisimDeviceController:va,ensureRetrieveNextData:fa}),ua}var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;return a("default",m),{setters:[function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default},function(a){r=a.complexToMagnitudePhase},function(a){s=a.formatRefDes},function(a){t=a.formatSimulationNumber},function(a){u=a.default},function(a){v=a.default},function(a){w=a.default},function(a){x=a.default},function(a){y=a.default},function(a){z=a.default},function(a){A=a.default},function(a){B=a.default},function(a){C=a.default},function(a){D=a.default},function(a){E=a.default},function(a){F=a.default},function(a){G=a.default},function(a){H=a.SOCKET_STATES},function(a){I=a.sourceType},function(a){J=a.default},function(a){K=a.default},function(a){L=a.default},function(a){M=a.MultisimDeviceController}],execute:function(){N=null,O=[],P=[],Q={span:1,resolution:2e3},R=!1,S=null,T=[],U=Object.freeze(["set reset-options","set trtol = 7","set convlimit","set dynamicdc","set inertialdelay","set suposc"]),V=new Map,V.set(o.AC,v),V.set(o.DC,w),V.set(o.Interactive,z),V.set(o.Transient,A),V.set(o.DC_SWEEP,x),V.set(o.PARAM_SWEEP,y)}}}),a.register("63",[],function(a,b){"use strict";function c(a,b,c){var d=[],e={wheel:"onMouseWheel",mousedown:"onMouseDown",touchstart:"onTouchStart",mouseup:"onMouseUp",touchend:"onTouchEnd",mousemove:"onMouseMove",contextmenu:"onContextMenu",pinchstart:"onPinchStart",pinch:"onPinch",pinchmove:"onPinchMove",pinchend:"onPinchEnd",panstart:"onPanStart",pan:"onPan",panend:"onPanEnd",press:"onPress",pressup:"onPressUp",tap:"onTap",doubletap:"onDoubleTap",rightclick:"onRightClick",keydown:"onKeyDown",keyup:"onKeyUp"};return{registerTool:function(b){return!(!b.onStart||!b.onStart(a,c))&&(d.push(b),!0)},unregisterLastTool:function(){d.pop()},dispatchAction:function(f){var g=!1;c.lastEvent=f,void 0!==f.event.clientX&&void 0!==f.event.clientY&&(c.lastLocation={x:f.event.clientX,y:f.event.clientY});var h=d[d.length-1];if(h)switch(f.eventName){case"mouseup":2==f.event.srcEvent.button&&h.onRightButtonUp?g=h.onRightButtonUp(f.event,a,b):h.onMouseUp&&(g=h.onMouseUp(f.event,a,b));break;default:var i=e[f.eventName];h[i]&&(g=h[i](f.event,a,b))}return g&&(f.event.srcEvent.preventDefault(),f.event.srcEvent.stopPropagation(),f.event.srcEvent.stopImmediatePropagation()),g},cancelAction:function(){var b=d[d.length-1];b.onCancel&&b.onCancel(a)},get activeTool(){return d[d.length-1]}}}return a("default",c),{setters:[],execute:function(){}}}),a.register("64",["29","3e"],function(a,b){"use strict";function c(a,b){var c=[],f=0,g=null,h=!1,i=!0,j=!0,k=function(b){a.verify(b.undo)&&b.undo()},l=function(b){a.verify(b.redo)&&b.redo()},m=function(b){a.verify(b.finalize)&&b.finalize()},n=function(a){g&&g&&g.steps.length?(c.splice(f,c.length-f),c.push(g),f=c.length,g=null,a?b.activeDesign.modified=!0:(this.undo(),c.splice(f,c.length-f)),this.undoCommand.enabled=this.canUndo(),this.redoCommand.enabled=this.canRedo()):(g=null,this.undoCommand.enabled=this.canUndo(),this.redoCommand.enabled=this.canRedo())},o={undoCommand:null,redoCommand:null,simulationContextHelper:null,performForceEnable:null,get inUndoRedo(){return h},get enabled(){return i},set enabled(a){i=a},get endActionAllowed(){return j},set endActionAllowed(a){j=a},clearBuffer:function(){c=[],f=0,this.undoCommand.enabled=this.canUndo(),this.redoCommand.enabled=this.canRedo()},setCommandForceEnable:function(a,b){a.forceEnable=b},canUndo:function(){var a=f>0;return this.performForceEnable&&this.setCommandForceEnable(this.undoCommand,a),a},canRedo:function(){var a=f<c.length;return this.performForceEnable&&this.setCommandForceEnable(this.redoCommand,a),a},hasValidAction:function(){return null!==g},startAction:function(a){var b=this;!g&&b.enabled&&(g={description:a,steps:[],finalizers:[]},b.simulationContextHelper.testContextEnabled()||function(){g.description=d.i18n.translate("changes made during simulation").fetch();var a=function a(){b.finishAction(!1),b.simulationContextHelper.testContextEnabled()&&b.simulationContextHelper.removeContextChangeListener(a)};b.simulationContextHelper.addContextChangeListener(a)}())},finishAction:function(a){a&&g&&g.steps.length?(g.steps.reverse().forEach(function(a){a.undo()}),g.finalizers.forEach(function(a){a.finalize()}),g=null):this.simulationContextHelper.testContextEnabled()&&j&&n.apply(this,[!0])},cancelAction:function(){n.apply(this,[!1])},addStep:function(b){this.enabled&&a.verify(g,"Make sure an action is started first")&&a.verify("function"==typeof b.redo)&&a.verify("function"==typeof b.undo)&&g.steps.push(b)},addFinalizer:function(b){this.enabled&&a.verify(g,"Make sure an action is started first")&&a.verify("function"==typeof b.finalize)&&g.finalizers.push(b)},undo:function(){h=!0;var a=this;window.multisim.tryCatchAll(function(){if(a.canUndo()){f--;for(var d=c[f],e=d.steps.length-1;e>=0;e--)k(d.steps[e]);d.finalizers.forEach(function(a){m(a)}),b.activeDesign.modified=!0}a.undoCommand.enabled=a.canUndo(),a.redoCommand.enabled=a.canRedo()}),h=!1},redo:function(){h=!0;var a=this;window.multisim.tryCatchAll(function(){if(a.canRedo()){for(var d=c[f],e=0;e<d.steps.length;e++)l(d.steps[e]);d.finalizers.forEach(function(a){m(a)}),f++,b.activeDesign.modified=!0}a.undoCommand.enabled=a.canUndo(),a.redoCommand.enabled=a.canRedo()}),h=!1},get undoDescription(){return c.length>0&&f>0?c[f-1].description:d.i18n.translate("Nothing to undo").fetch()},get redoDescription(){return f<c.length?c[f].description:d.i18n.translate("Nothing to redo").fetch()},initCommands:function(b,c,f,g){var h=this;h.simulationContextHelper=b.createCommandContextHelper({disable:[e.CC_SIMULATION]}),h.performForceEnable=g||!1,h.undoCommand=b.createCommandObject("undo",function(){var b=h.undoDescription,c=f();c&&c.selectioninterface.clearSelection(c,{event:null}),h.undo(),a.notify(d.i18n.translate("Undo %1$s").fetch(b))},!0),c.addKeyHandler("z",!0,!1,!1,!1,function(a){h.undoCommand.enabled&&h.undoCommand.startCommand(),a.preventDefault()},"undo"),h.redoCommand=b.createCommandObject("redo",function(){var b=h.redoDescription,c=f();c&&c.selectioninterface.clearSelection(c,{event:null}),h.redo(),a.notify(d.i18n.translate("Redo %1$s").fetch(b))},!0),c.addKeyHandler("y",!0,!1,!1,!1,function(a){h.redoCommand.enabled&&h.redoCommand.startCommand(),a.preventDefault()},"redo"),h.undoCommand.enabled=h.canUndo(),h.undoCommand.cancelActiveCommand=!0,h.undoCommand.contextHelper.contextDisable="all",h.redoCommand.enabled=h.canRedo(),h.redoCommand.cancelActiveCommand=!0,h.redoCommand.contextHelper.contextDisable="all"}};return window.multisim.tryCatchAll.hasOwnProperty("undoInfo")||Object.defineProperty(window.multisim.tryCatchAll,"undoInfo",{get:function(){var a=c.map(function(a){return a.description});return a[f-1]="*"+a[f],a.join("\n")}}),o}var d,e;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.ECommandContexts}],execute:function(){}}}),a.register("65",[],function(a,b){"use strict";function c(a){a.forceNarrow=!1,a.openDrawer()}function d(a){a.forceNarrow=!0}function e(a,b,e){a&&function(){var f=i.createCommandObject("hide"+e,function(){d(a)},!0),g=i.createCommandObject("show"+e,function(d,e){c(a),e&&void 0!==e.selected&&(b.selected=e.selected)},!0),j=function(){g.visible=a.narrow,g.enabled=a.narrow,f.visible=!a.narrow,f.enabled=!a.narrow};j(),a.addEventListener("paper-responsive-change",j),h.attachHandlerToToolbar(b,[])}()}function f(){}function g(a,b,c,d,g,j,k,l,m){h=a,i=b;var n=g,o=j,p=k,q=l;return n&&o&&(o.forceNarrow=!0,n.forceNarrow=!0,o.disableSwipe=!0,n.disableSwipe=!0,e(n,p,"rightpanel"),e(o,q,"leftpanel"),f(n)),p&&(p.attachSelectionListener(c.selectionChangeListener,m),p.attachActiveAnalysisChangeListener(d)),{}}var h,i;return a("default",g),{setters:[],execute:function(){h=null,i=null}}}),a.register("66",[],function(a,b){"use strict";function c(a){a=a||"";var b=document.createElement("div");return b.innerHTML=a.replace(/stroke-width="1"/g,"").replace(/stroke-width="0.5"/g,"").replace(/stroke="black"/g,"").replace(/fill="black"/g,""),b.getElementsByTagName("svg")[0]}function d(a,b,d){var e=5,f=new Map,g=new Map,h=[],i=0,j=function(c,d,e,h){a&&a.done(e);var i=null;try{h&&(i=c?h(c):c)}catch(a){console.log(a)}d&&b&&c&&c.length>0&&b.trySave(e,c),i?f.set(e,i):h&&(c?window.multisim.silentFail(new Error("resource "+e+" failed to load, status is "+this.statusText)):window.multisim.silentFail(new Error("resource "+e+" did not contain valid svg data")),i=null),g.has(e)&&(g.get(e).forEach(function(a){a(i)}),g.delete(e))},k=[],l=[],m=[],n=0,o=function(a){var b=l.findIndex(function(b){return b.path===a});if(b>=0){var c=l[b];l.splice(b,1),k.unshift(c)}else if((b=k.findIndex(function(b){return b.path===a}))>=0){var d=k[b];k.splice(b,1),k.unshift(d)}else m[a]=!0},p=function(){setTimeout(function(){var a=null;k.length>0?a=k.shift():l.length>0&&(a=l.shift()),a&&a.doFetch()},10)},q=function b(c,d,f,g,h){!h&&(l.length>0||k.length>0||n>=e)?function(){var a=c,e=d,h=f,i=function(){b(a,e,h,!1,!0)};m[a]||!g?k.unshift({path:a,doFetch:i}):l.unshift({path:a,doFetch:i})}():function(){n++;var b=new XMLHttpRequest;a&&a.startdo(c),b.onload=function(){n--,this.status<400?j(this.responseText,!0,c,f):(window.multisim.silentFail(new Error("resource failed to load. path: "+c+"\n"+this.responseText)),j(null,!0,c,null)),setTimeout(function(){p()},1)};var d=function(){n--,setTimeout(function(){p(),j(null,!0,c,null)},1)},e=function(){window.multisim.silentFail(new Error("resource request on error. path: "+c)),d()},h=function(){0===i&&window.multisim.silentFail(new Error("resource request timed out. path: "+c)),d(),i++},k=function(){window.multisim.silentFail(new Error("resource request aborted. path: "+c)),d()};if(b.onerror=e,b.ontimeout=h,b.onabort=k,c.match(/^resources/))b.open("get",window.multisim.rootFolder+c);else{var l="multisim-components-api-dev";(/www\.multisim\.com/.test(document.location.host)||/lvcloud-prod-k8s\.multisim\.com/.test(document.location.host))&&(l="multisim-components-api"),b.open("get","https://s3.amazonaws.com/"+l+"/"+c)}g&&(b.timeout=1e4),b.send()}()},r=function(a){var b=a;return b&&b.length>0&&"/"===b[0]&&(b=b.substring(1)),b};return{preloadSVGResource:function(a,b,c){return this.loadResource(a,b,null,c)},loadComponentResource:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];"ground"===a||"connector"===a?this.loadJSONResource("resources/components/"+a+".json.oecl",b,c,d):this.loadJSONResource("NI/en-US/components/"+a+".json.oecl",b,c,d)},loadModelResource:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d="NI/en-US/models/"+a+".json.oecl";this.loadJSONResource(d,b,c)},loadPackageResource:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d="NI/en-US/packages/"+a+".json.oecl";this.loadJSONResource(d,b,c)},loadSymbolResource:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];"com.ni.symb.ground_ansi"===a||"com.ni.symb.connector"===a?this.loadJSONResource("resources/symbols/"+a+".json.oecl",b,c,d):this.loadJSONResource("NI/en-US/symbols/"+a+".json.oecl",b,c,d)},loadLandpatternResource:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d="NI/en-US/landpatterns/"+a+".json.oecl";this.loadJSONResource(d,b,c)},loadDesktopExportResource:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d="NI/en-US/cdsexport/"+a+".json";this.loadJSONResource(d,b,c)},loadJSONResource:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.loadResource(a,b,JSON.parse,c)},loadSVGResource:function(a,b){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.loadResource(a,b,c,d)},isComponentLocalStoreEnabled:function(){return b&&b.isEnabled()},loadResource:function(a,c,e,h){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],k=r(a),l=c,m=e;if(f.has(k))l&&l(f.get(k));else if(d)l&&l(null);else{var n=g.get(k);n?l&&(n.push(l),h||o(k)):(g.set(k,l?[l]:[]),b?b.tryLoad(k,function(a){null!==a&&void 0!==a?j(a,!1,k,m):i?q(k,l,m,h,!1):l&&l(null)}):i?q(k,l,m,h,!1):l&&l(null))}},set resourceInfo(a){h=a},get resourceInfo(){return h}}}return a("default",d),{setters:[],execute:function(){}}}),a.register("67",[],function(a,b){"use strict";function c(a,b){var c=b||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB,d=window.multisim.versionInfo,e=4,f=!1,g="";d.isDevelopment?(e=1e6*e+Math.floor((new Date).getTime()/1e3/86400/5),g="ComponentLocalStore_DEBUG"):(e=1e6*e+100*(100*d.version.major+d.version.minor)+d.version.patch,g="ComponentLocalStore");var h="ComponentData",i=null,j={},k=function(a){var b=a.target.result,c=a.oldVersion,d=!1;if(c>0?e-c>=1e6?(console.log("Deleting local component store: "+h),b.deleteObjectStore(h),d=!0):function(){var b=a.target.transaction,c=b.objectStore(h),d=c.index("path"),e=[];d.openKeyCursor().onsuccess=function(a){var b=a.target.result;b?(b.key&&b.key.match(/^resources\/.*$/i)&&e.push(b.key),b.continue()):e.forEach(function(a){return c.delete(a)})}}():d=!0,d){console.log("Creating local component store: "+h);var f=b.createObjectStore(h,{keyPath:"key"});f.createIndex("path","path",{unique:!1}),f.createIndex("timestamp","timestamp",{unique:!1})}j={}},l=function(b,d){if(c)try{var e=c.open(g,b);e.onupgradeneeded=k,e.onsuccess=function(b){var c=b.target.result;return d?d(c):(i=c,f=!1,a&&a()),!0},e.onerror=function(b){return i=null,f=!0,console.log("Failed to open IndexedDB "+g),a&&a(),b.preventDefault(),!0}}catch(a){i=null,f=!0,console.log("No IndexedDB support found.")}else i=null,f=!0,console.log("No IndexedDB support found.")},m="/api/v1/comp-resource/NI/en-US/updates.json",n=new XMLHttpRequest;n.onreadystatechange=function(){var b=this;(this.status<400||405===this.status)&&this.readyState==this.HEADERS_RECEIVED?function(){var c=n.getResponseHeader("Last-Modified");405===b.status&&console.log("Server failed to return timestamp for updates.json"),l(e,function(b){var d=function(){var d=new XMLHttpRequest,e=function(){i=b,a&&a()};d.onload=function(){if(this.status<400)try{j=JSON.parse(this.responseText),void 0===c&&(c=(new Date).getTime());var a=b.transaction(h,"readwrite").objectStore(h).put({key:"updates",timestamp:c,path:"",value:this.responseText});a.onsuccess=e,a.onerror=function(a){return console.error("failed to save updates.json to IndexedDB"),e(),a.preventDefault(),!0}}catch(a){console.log("Error parsing updates.json"),e()}else console.log("Failed to load updates.json"),e()},d.onerror=function(){console.log("Failed to load updates.json"),e()},d.open("get",m),d.send()},e=b.transaction(h,"readonly").objectStore(h).get("updates");e.onsuccess=function(){if(e.result){var f=e.result.value,g=e.result.timestamp;j=JSON.parse(f),!c||new Date(c)>new Date(g)?d():(i=b,a&&a())}else d();return!0},e.onerror=function(a){return d(),a.preventDefault(),!0}})}():this.status>=400&&(console.log("opening indexedDB in offline mode"),l())},n.onerror=function(){console.log("opening indexedDB in offline mode"),l()},n.open("head",m),n.send();var o=function(a){return a};return{isEnabled:function(){return!f},trySave:function(a,b,c){var d=o(a);if(i&&!f){var e=new Date,g=e.getTime(),j=i.transaction(h,"readwrite").objectStore(h).put({key:d,timestamp:g,path:a,value:b});c&&(j.onsuccess=c),j.onerror=function(a){return console.error("FAIL: data "+d+" failed to cache to IndexedDB"),c&&c(),a.preventDefault(),!0}}},tryLoad:function(a,b,c){var e=this,g=o(a);f?b(null):function(){void 0===c&&(c=d.isDevelopment?1e4:100);var a=e;null===i&&c>0?setTimeout(function(){a.tryLoad(g,b,c-1)},d.isDevelopment?500:50):(0===c&&console.log("IndexedDB load error, no more retry iterations left"),i?function(){var a=i.transaction(h,"readonly").objectStore(h).get(g);a.onsuccess=function(){if(a.result){var c=a.result.value,d=a.result.timestamp,e=j&&j[g];new Date(e)>new Date(a.result.timestamp)?b(null,null):b(c,d)}else b(null,null);return!0},a.onerror=function(a){return console.error("Cache read error "+g+" in IndexedDB"),b(null),a.preventDefault(),!0}}():(console.log("No open database for cache query "+g),b(null)))}()}}}return a("default",c),{setters:[],execute:function(){}}}),a.register("68",["10","32"],function(a,b){"use strict";function c(a){function b(){h.notifyListeners(g,{finalFrame:!j}),j&&i(b)}function c(){j=!0,i(b)}function f(){j=!1}var g="animationFrameUpdate",h=d(),i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;null===i&&(i=function(a){return window.setTimeout(a,1e3/30)});var j=!1;return a.listeners.addListener(e.StartSimulation,c),a.listeners.addListener(e.PauseSimulation,f),a.listeners.addListener(e.ResumeSimulation,c),a.listeners.addListener(e.StopSimulation,f),{addListener:function(a){h.addListener(g,a)},removeListener:function(a){h.removeListener(g,a)}}}var d,e;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),a.register("69",["4f","42","29","50","45"],function(a,b){"use strict";function c(a,b,c,k){function l(){var b=c(),e=b.findInstance(this.contextGUID,this.templateGUID);if(e&&e.modelInstanceData&&e.modelInstanceData[e.activeModelID]){if(e.modelInstanceData[e.activeModelID][this.propertyName].string=this.oldValue,this.parseNumber){var f=d(this.oldValue);isNaN(f)||(e.modelInstanceData[e.activeModelID][this.propertyName].value=f)}"boolean"==typeof e.modelInstanceData[e.activeModelID][this.propertyName].state&&(e.modelInstanceData[e.activeModelID][this.propertyName].state=this.oldState),a.notifyListeners(j.INSTANCE_PROPERTY_CHANGED,{propertyName:this.propertyName,newValue:this.oldValue,newState:this.oldState,propertyInterface:v,contextGUID:this.contextGUID,templateGUID:this.templateGUID})}}function m(){var b=c(),e=b.findInstance(this.contextGUID,this.templateGUID);if(e&&e.modelInstanceData&&e.modelInstanceData[e.activeModelID]){if(e.modelInstanceData[e.activeModelID][this.propertyName].string=this.newValue,this.parseNumber){var f=d(this.newValue);isNaN(f)||(e.modelInstanceData[e.activeModelID][this.propertyName].value=f)}"boolean"==typeof e.modelInstanceData[e.activeModelID][this.propertyName].state&&(e.modelInstanceData[e.activeModelID][this.propertyName].state=this.newState),a.notifyListeners(j.INSTANCE_PROPERTY_CHANGED,{propertyName:this.propertyName,newValue:this.newValue,newState:this.newState,propertyInterface:v,contextGUID:this.contextGUID,templateGUID:this.templateGUID})}}function n(a,b,c,d){var f=a,j=void 0;void 0!==b&&null===(f=t.getModelInstanceProperty(a.activeModelID,b))&&(f=t.getModelDefinitionProperty(a.activeModelID,b)),f&&("XY"==f.propertyType?j=u(c):"simpleString"==f.propertyType||"string"==f.propertyType?j=h(c,f.name):(j=g(c,f.name),j.valid&&(j=i(c,f))),j&&(j.title=j.title||""),j&&j.valid&&f.validator?e(f.validator,{value:c},function(a){"string"==typeof a&&(a={title:"",valid:!1,errorMessage:"error in validate script: "+a,errorIndexes:[]}),j={title:j?j.title:"",valid:a.valid,errorMessage:a.errorMessage,errorIndexes:a.errorIndexes||[]},d(j)}):d(j))}function o(c,e,f,g){if(c&&c.modelInstanceData&&c.modelInstanceData[c.activeModelID]){var h=t.getModelInstanceProperty(c.activeModelID,e);if(h){if(b.addStep({undo:l,redo:m,oldValue:c.getInstanceVariableValue(c.activeModelID,e),newValue:f,oldState:c.getInstanceVariableState(c.activeModelID,e),newState:g,propertyName:e,contextGUID:c.contextGUID,templateGUID:c.templateGUID,parseNumber:s(h)}),c.modelInstanceData[c.activeModelID][e]={string:f},s(h)){var i=d(f);isNaN(i)||(c.modelInstanceData[c.activeModelID][e].value=i),"boolean"==typeof g&&(c.modelInstanceData[c.activeModelID][e].state=g)}a.notifyListeners(j.INSTANCE_PROPERTY_CHANGED,{propertyName:e,newValue:f,newState:g,propertyInterface:v,contextGUID:c.contextGUID,templateGUID:c.templateGUID})}}}function p(){var b=c(),e=b.findInstance(this.contextGUID,this.templateGUID);if(e&&e.modelDefinitionData&&e.modelDefinitionData[e.activeModelID]){if(e.modelDefinitionData[e.activeModelID][this.propertyName].string=this.oldValue,this.parseNumber){var f=d(this.oldValue);isNaN(f)||(e.modelDefinitionData[e.activeModelID][this.propertyName].value=f)}"boolean"==typeof e.modelDefinitionData[e.activeModelID][this.propertyName].state&&(e.modelDefinitionData[e.activeModelID][this.propertyName].value=this.oldState),a.notifyListeners(j.MODEL_PROPERTY_CHANGED,{propertyName:this.propertyName,newValue:this.oldValue,newState:this.oldState,propertyInterface:v,contextGUID:this.contextGUID,templateGUID:this.templateGUID})}}function q(){var b=c(),e=b.findInstance(this.contextGUID,this.templateGUID);if(e&&e.modelDefinitionData&&e.modelDefinitionData[e.activeModelID]){if(e.modelDefinitionData[e.activeModelID][this.propertyName].string=this.newValue,this.parseNumber){var f=d(this.newValue);isNaN(f)||(e.modelDefinitionData[e.activeModelID][this.propertyName].value=f)}"boolean"==typeof e.modelDefinitionData[e.activeModelID][this.propertyName].state&&(e.modelDefinitionData[e.activeModelID][this.propertyName].value=this.newState),a.notifyListeners(j.MODEL_PROPERTY_CHANGED,{propertyName:this.propertyName,newValue:this.newValue,newState:this.newState,propertyInterface:v,contextGUID:this.contextGUID,templateGUID:this.templateGUID})}}function r(c,e,f,g){if(c&&c.modelDefinitionData&&c.modelDefinitionData[c.activeModelID]){var h=t.getModelDefinitionProperty(c.activeModelID,e);if(h){if(b.addStep({undo:p,redo:q,oldValue:c.getModelVariableValue(c.activeModelID,e),newValue:f,oldState:c.getModelVariableState(c.activeModelID,e),newState:g,propertyName:e,contextGUID:c.contextGUID,templateGUID:c.templateGUID,parseNumber:s(h)}),c.modelDefinitionData[c.activeModelID][e]={string:f},s(h)){var i=d(f);isNaN(i)||(c.modelDefinitionData[c.activeModelID][e].value=i),"boolean"==typeof g&&(c.modelDefinitionData[c.activeModelID][e].state=g)}a.notifyListeners(j.MODEL_PROPERTY_CHANGED,{propertyName:e,newValue:f,newState:g,propertyInterface:v,contextGUID:c.contextGUID,templateGUID:c.templateGUID})}}}function s(a){return void 0===a.propertyType||"phase"===a.propertyType||"percent"===a.propertyType||"unitInterval"===a.propertyType}var t=k,u=function(a){var b=a.split("\n").filter(function(a){return a.trim().length}),c={valid:!0,title:b.slice(0,10).join("\n")+(b.length>10?"\n...":"")},e=[],g=0,h=2e3,i=10,j="";if(b.length>h&&(j=f.i18n.translate("The maximum number of supported Time/Voltage pairs is %1$s. Additional entries must be removed. ").fetch(h)),b.length){if(b.forEach(function(a,c){var f=!0;if(a){var h=a.trim().replace(/^\++/,"").trim();if(f=/^[+\.]?\d+[^\s]*((\s*,\s*)|(\s+))[+-\.]?\d+[^\s]*$/.test(h)&&c<2e3){var i=h.split(/\s/).map(function(a){return d(a)});f=g<=i[0],g=i[0]}f||(b[c]+=" <-- *",e.push(c))}else f=!1,b[c]+=" <-- *",e.push(c)},this),e.length){var k=Math.max(0,e[0]-5),l=(k>0?"...\n":"")+b.slice(k,k+10).join("\n")+(k+10<b.length?"\n...":"");c={valid:!1,errorMessage:j+"\n"+f.i18n.translate("Invalid entry on line %1$s.").ifPlural(e.length,"Invalid entry on lines %1$s%2$s.").fetch(e.map(function(a){return a+1}).slice(0,i).join(", "),e.length>i?"...":""),title:l,errorIndexes:e}}}else c={valid:!1,errorMessage:f.i18n.translate("At least one x y pair should exist.").fetch(),title:""};return c},v={EPropertyControllerEvents:j,propertyChangeListeners:a,changeInstanceProperty:o,isInstanceOrModelPropertyInvalid:n,changeModelProperty:r,isNumericProperty:s};return v}var d,e,f,g,h,i,j;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.basicNumberValidate,h=a.basicTextValidate,i=a.customPropertyValidation},function(a){j=a.default}],execute:function(){}}}),a.register("6a",[],function(a,b){"use strict";function c(){f.activeViewGetter()&&function(){f.listeners.removeListener(f.events.ACTIVEVIEWCHANGED,c);var a=f.activeViewGetter().sheetTemplateController.probeController;f.activeDesignGetter().probeController.getProbes().forEach(function(b){return a.connectStreamingProbe(b)})}()}function d(){f.listeners.addListener(f.events.ACTIVEVIEWCHANGED,c),c()}function e(a){return f=a,d}var f;return a("default",e),{setters:[],execute:function(){f=null}}}),a.register("6b",["1d","1e"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("DataExporterBase",e=function(){function a(b){c(this,a),this._exportData=b}return d(a,[{key:"getFileBlob",value:function(){throw new Error("Implement in derived class")}}]),a}()),a("DataExporterBase",e)}}}),a.register("6c",["1d","1e","26","27","6b","6d"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.DataExporterBase},function(a){h=a.Complex}],execute:function(){i=function(a,b,c,d,e){var f=e?d+" | "+e:d;return a?b+": "+f:"Y--Trace "+c+"::["+f+"]"},j=function(a){var b=[],c=!0,d=!1,e=void 0;try{for(var f,g=a.DataSet[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var j=f.value,k=!0,l=!1,m=void 0;try{for(var n,o=function(){var a=n.value;b.find(function(b){return b===a.Name})||b.push(a.Name)},p=j.Channels[Symbol.iterator]();!(k=(n=p.next()).done);k=!0)o()}catch(a){l=!0,m=a}finally{try{!k&&p.return&&p.return()}finally{if(l)throw m}}}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}var q=[],r=1,s=!0,t=!1,u=void 0;try{for(var v,w=function(){var b=v.value,c=!0,d=!1,e=void 0;try{for(var f,g=function(){var c=f.value,d=c.Channels.find(function(a){return a.Name===b}),e=[];q.push(e);var g=d.YValues[0]instanceof h;e.push("X--Trace "+r+"::["+a.AnalysisType+": "+d.XType.toUpperCase()+"]"),d.XValues.forEach(function(a){return e.push(a)}),g?function(){var a=[];q.push(a),a.push(i(!0,"Mag",r,d.Name,c.Name));var b=[];q.push(b),b.push(i(!0,"Phase",r,d.Name,c.Name)),d.YValues.forEach(function(c){a.push(c.Magnitude),b.push(c.Phase)})}():function(){var a=[];q.push(a),a.push(i(!1,d.YType,r,d.Name,c.Name)),d.YValues.forEach(function(b){return a.push(b)})}(),q.push([]),r++},j=a.DataSet[Symbol.iterator]();!(c=(f=j.next()).done);c=!0)g()}catch(a){d=!0,e=a}finally{try{!c&&j.return&&j.return()}finally{if(d)throw e}}},x=b[Symbol.iterator]();!(s=(v=x.next()).done);s=!0)w()}catch(a){t=!0,u=a}finally{try{!s&&x.return&&x.return()}finally{if(t)throw u}}return q.pop(),q},k=function(a){var b=[],c=[];c.push("Variable");var d=[];d.push(" Operating point value"),b.push(c),b.push(d);var e=a.DataSet[0],f=!0,g=!1,h=void 0;try{for(var i,j=e.Channels[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=i.value;c.push(k.Name),d.push(k.YValues[0])}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}return b},a("MultisimCsvDataExporter",l=function(a){function b(a){c(this,b);var d=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return d.delimiter=",",d.lineDelimiter="\n",d}return f(b,a),d(b,[{key:"getFileBlob",value:function(){var a=this;return new Promise(function(b){return b(new Blob([a.toString()],{type:"text/csv;charset=utf-8"}))})}},{key:"toString",value:function(){var a=this,b=void 0;b=1===this._exportData.DataSet.length&&this._exportData.DataSet[0].Channels.length>0&&this._exportData.DataSet[0].Channels.every(function(a){return 1===a.XValues.length})?k(this._exportData):j(this._exportData);for(var c=b.reduce(function(a,b){return a.length>b.length?a:b},[]).length,d="",e=function(c){d+=b.map(function(a){return 0===a.length?"":a.length>c?a[c]:0}).join(a.delimiter)+a.lineDelimiter},f=0;f<c;f++)e(f);return d}}]),b}(g)),a("MultisimCsvDataExporter",l)}}}),a.register("6e",["21","6c","6d","6f"],function(a,b){"use strict";function c(a){var b=a,c=function(a,b,c){var d=new h("");return a.forEach(function(a,e){var f=c.findIndex(function(b){return b.signalName===a});-1!==f&&d.Channels.push(new i(e,"TIME",[0],"",b[f]))}),d},j=function(a,b,c,d){var e=new h("");return a.forEach(function(a,g){var h=c.findIndex(function(b){return b.signalName===a});if(-1!==h)if(d){for(var j=[],k=0;k<b[h].length;k++)j.push(f.fromPolar(b[h][k],b[h+1][k]));e.Channels.push(new i(g,c[0].signalName.toUpperCase(),b[0],"",j))}else e.Channels.push(new i(g,c[0].signalName.toUpperCase(),b[0],"",b[h]))}),e},k=function(a,b,c,d,e){for(var f=[],g=0;g<b.length;g++){var h=j(a,b[g],d,e);h.Name=c[g],f.push(h)}return f},l=function(){var a=new Map,f=b.dataManager,h=!0,i=!1,l=void 0;try{for(var m,n=f.getSignalNames()[Symbol.iterator]();!(h=(m=n.next()).done);h=!0){var o=m.value,p=!0,q=!1,r=void 0;try{for(var s,t=o.displayNames[Symbol.iterator]();!(p=(s=t.next()).done);p=!0){var u=s.value;a.set(u,o.signalName)}}catch(a){q=!0,r=a}finally{try{!p&&t.return&&t.return()}finally{if(q)throw r}}}}catch(a){i=!0,l=a}finally{try{!h&&n.return&&n.return()}finally{if(i)throw l}}var v=f.getDataManagerAnalysis(),w=null;switch(v){case d.DC:w=[c(a,f.getRawData(),f.getSignalNames())];break;case d.AC:w=[j(a,f.getRawData(),f.getSignalNames(),!0)];break;case d.DC_SWEEP:var x=f.getSignalNames();x[0].signalName=x[0].signalName.replace(/^i.+/i,"current").replace(/^v.+/i,"voltage"),w=k(a,f.getRawSweepData(),f.getSweepNames(),x,!1);break;case d.PARAM_SWEEP:var y=b.getSimulationSettings(d.PARAM_SWEEP).selectedAnalysisType,z=f.getSignalNames();z[0].signalName=z[0].signalName.replace(/CKT_PARAM_(.+)/,"PARAM($1)"),w=k(a,f.getRawSweepData(),f.getSweepNames(),z,y===d.AC);break;default:w=[j(a,f.getRawData(),f.getSignalNames(),!1)]}return new e(new g(w,v)).toString()};return{toString:l}}var d,e,f,g,h,i;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.MultisimCsvDataExporter},function(a){f=a.Complex},function(a){g=a.ExchangeData,h=a.DataSet,i=a.DataChannel}],execute:function(){}}}),a.register("70",["21","4f","3d","22","2f","41","3c","29","71","23","1f"],function(a,b){"use strict";function c(a,b,c,s,t,u){var v="",w=[],x=t,y=c,z=a,A=b,B=function(a,b,c,d){var e=a.getObject(c.guid),f=null;if(!e)throw Error("Could not find an end object for the guid: '"+c.guid+"' for wire at "+d);if(e.pins&&c.pinid)f=b.wiringController.getWiringConnectDataForPin({templateGUID:c.guid,symbolPinID:c.pinid});else{if(!h(e))throw Error("End objects of wires should be either junctions or pins for wire at "+d);f=b.wiringController.getWiringConnectDataForJunction({templateGUID:c.guid})}return f},C=function(a,b){var c=[];return a.map(function(a,b){return a.sheetindex=b,a}).filter(function(a){return a.guid===b}).forEach(function(a){a.viewgroups.forEach(function(b,d){c.push({sheetindex:a.sheetindex,viewgroupindex:d,context:b.context,views:b.views})})}),c},D=function(a,b,c){b.forEach(function(b){if(!a.hasOwnProperty(b))throw new Error("the property: "+b+" was missing from "+c)})},E=function(a,b){var c=a,d=b.filter(function(b){return b.name===a});if(!d.length){if(d=b.filter(function(b){return b.name.toLowerCase()===a.toLowerCase()}),!d.length)throw new Error("a wire net ID: "+a+" was missing from the net list");x&&x.doMessage({type:x.notifications.ETypes.NT_WARNING,message:k.i18n.translate("Net ID %1$s converted to %2$s.").fetch(a,d[0].name),toast:!1,group:{name:"Loading file",info:{displayName:k.i18n.translate("Loading file").fetch(),timestamp:new Date}}}),c=d[0].name}return c},F=function(a,b){if(D(a,["name","sheetgroup"],"design"),b.name=a.name,b.topLevelTemplateGroup=z.getSheetGroup(a.sheetgroup),!b.topLevelTemplateGroup)throw new Error("The sheet group with the guid: "+a.sheetgroup+" was not found in the design");a.viewarea&&(s.areaState=a.viewarea),a.metadata&&(b.metadata={description:a.metadata.description,private:a.metadata.private,tags:a.metadata.tags.slice()}),b.copiedFrom=a.copiedFrom||null},G=function(a){if(a){D(a,["components","symbols","models"],"blueprints");for(var b in a.symbols)if(a.symbols.hasOwnProperty(b)){var c=a.symbols[b];if(!c)throw new Error("No graphical data was found for symbol: "+b);D(c,["id","svg","description","revisiondate"],"blueprints.symbols."+b);var d={fragment:c.fragment,description:c.description,id:c.id,strRevisionDate:c.revisiondate,svg:c.svg};c.resetFunction&&(d.resetFunction=c.resetFunction),c.animateFunction&&(d.animateFunction=c.animateFunction),c.symbolScript&&(d.symbolScript=c.symbolScript),A.addSymbolBlueprint(c.id,d)}for(var e in a.models)if(a.models.hasOwnProperty(e)){var f=a.models[e];if(!f)throw new Error("No model data was found for the model : "+e);D(f,["id","definitions","instances","strRevisionDate"],"blueprints.models."+e),A.addModelBlueprint(f.id,f)}if(a.packages)for(var g in a.packages)if(a.packages.hasOwnProperty(g)){var h=a.packages[g];if(!h)throw new Error("No package data was found for the package : "+g);D(h,["id","name","revisionDate","packageBlueprintRef","manufacturer","padLandMap"],"blueprints.packages."+g),A.addPackageBlueprint(h.id,h)}for(var i in a.components)if(a.components.hasOwnProperty(i)){var j=a.components[i];if(!j)throw new Error("No component information was found for component: "+i);D(j,["component"],"blueprints.components."+i),D(j.component,["connections","modelConfigurations","name","sections","symbolConfigurations"],"blueprints.components."+i+".component"),"Connector"===j.component.id&&(j.component.id="connector"),A.addComponentBlueprint(j.component.id,j.component)}}},H=function(a,b,c,d,e,f,h){function j(a){return d.filter(function(b){return b.name===a})[0].priority}if(!a)throw new Error("There should be at least one template");!function(){D(a,["guid","size"],"sheettemplates["+f+"].template");var k=b.map(function(a){return a.guid}),l=z.createSheet(e,a.guid,k,a.name),m=l.sheetTemplateController.sheetTemplate,n=C(c.sheets,a.guid),o=[];if(u&&u.dataPlotterDeleteDialog&&l.sheetTemplateController.initConfirmDialog(u.dataPlotterDeleteDialog),n.forEach(function(a){D(a,["context","views"],"viewinfo.sheets["+a.sheetindex+"].viewgroups["+a.viewgroupindex+"]");var b=l.viewControllers.filter(function(b){return b.context.guid===a.context}),c=1===b.length?b[0]:null;if(!c)throw new Error((b.length>1?"Too many controllers found for context: ":"No controller found for context: ")+a.context);a.views.forEach(function(b,d){var e="viewinfo.sheets["+a.sheetindex+"].viewgroups["+a.viewgroupindex+"].views["+d+"]";D(b,["guid"],e);var f=z.createView(l.sheetTemplateController,c,b.guid,a.context,u?u.schematicControls:null),g=f?f.viewObject:null;if(!g)throw new Error("Failed to create a view for "+e);var h={viewObject:g,view:b};o.push(h)})}),m.setSize(a.size),o.forEach(function(a){if(a.view.zoom&&a.viewObject.setZoom(a.view.zoom),a.view.center&&(a.viewObject.center=a.view.center),a.view.pan){var b={x:a.view.pan.left,y:a.view.pan.top},c=a.viewObject.contentToView({x:0,y:0});a.viewObject.offsetPan(b.x-c.x,b.y-c.y,!0)}}),a.visibility&&(a.visibility.hasOwnProperty("grid")&&m.setGridVisibility(a.visibility.grid),a.visibility.hasOwnProperty("netLabels")&&m.setNetLabelsVisibility(a.visibility.netLabels),a.visibility.hasOwnProperty("componentLabels")&&m.setComponentLabelsVisibility(a.visibility.componentLabels)),a.componentShortcuts){new Map(Object.entries(a.componentShortcuts)).forEach(function(a,b){a.forEach(function(a){m.addComponentShortcut(Number(b),a)})})}J(b,e,f,l,d,h);var p=e.netlist.removeEmptyNets;e.netlist.removeEmptyNets=function(){},window.multisim.tryCatchAll(function(){a.parts&&a.parts.forEach(function(a,c){var d="sheettemplates["+f+"].template.parts["+c+"]";D(a,["component","guid","matrix","children"],d);var g=A.getComponentFromCache(a.component);if(!g)throw new Error("No component blue print could be found for component: "+a.component+" for part "+d);var h=void 0,j=void 0;b.forEach(function(b){var c=e.findInstance(b.guid,a.guid);c.pinInstances&&c.pinInstances.forEach(function(a){e.netlistController.addPin(a)},this),h=c.sectionName,j=c.activeSymbolID},this);var k=l.sheetTemplateController.createTemplateComponent(a.guid,g,new i,j);D(a.matrix,["a","b","c","d","e","f"],d+".matrix"),k.matrix.setTransform(a.matrix.a,a.matrix.b,a.matrix.c,a.matrix.d,a.matrix.e,a.matrix.f),k.showSymbolPinNames=a.showSymbolPinNames,k.freshSymbolFlag=!0,l.sheetTemplateController.componentController.addTemplateSymbolPinsFromOECL(k,g,h,j),m.addObject(a.guid,k)}),a.connectors&&a.connectors.forEach(function(a,c){var d=this,g="sheettemplates["+f+"].template.connectors["+c+"]";D(a,["component","guid","matrix","symbol","children"],g),"Connector"===a.component&&(a.component="connector");var h=A.getComponentFromCache(a.component);if(!h)throw new Error("No blueprint could be found for connector: "+a.component+" for part "+g);!function(){var c=l.sheetTemplateController.createTemplateConnector(a.guid,h,new i);D(a.matrix,["a","b","c","d","e","f"],g+".matrix"),c.matrix.setTransform(a.matrix.a,a.matrix.b,a.matrix.c,a.matrix.d,a.matrix.e,a.matrix.f),c.symbol=A.getSymbolFromCache(a.symbol);var f=h.componentBlueprints[0].sections[0].name;l.sheetTemplateController.connectorController.addTemplateSymbolPinsFromOECL(c,h,f,h.symbolBlueprints[0].id),b.forEach(function(b){var c=e.findInstance(b.guid,a.guid);l.sheetTemplateController.connectorController.addInstanceSymbolPinsFromOECL(c,h,f,h.symbolBlueprints[0].id),c.pinInstances&&c.pinInstances.forEach(function(a){e.netlistController.addPin(a),e.netlistController.addConnectorLink(a),e.netlistController.connect(a,c.connectorHub,a)},this)},d),m.addObject(a.guid,c)}()}),a.junctions&&a.junctions.forEach(function(a,b){var c="sheettemplates["+f+"].template.junctions["+b+"]";D(a,["guid","position"],c),D(a.position,["x","y"],c+".position"),k.forEach(function(b){var c=l.sheetTemplateController.createJunctionInstance(b,a.guid);e.addInstance(b,a.guid,c)});var d=l.sheetTemplateController.createTemplateJunction(a.guid,{x:a.position.x,y:a.position.y});m.addObject(a.guid,d)}),a.wires&&a.wires.forEach(function(a,b){var c="sheettemplates["+f+"].template.wires["+b+"]";D(a,["guid","path","ends"],c),D(a.ends,["from","to"],c+".ends"),D(a.ends.from,["guid"],c+".ends.from"),D(a.ends.to,["guid"],c+".ends.to");var d=B(m,l.sheetTemplateController,a.ends.from,c+".ends.from"),g=B(m,l.sheetTemplateController,a.ends.to,c+".ends.to");if(d&&g){e.findInstancesOfTemplate(a.guid).forEach(function(a){var b=a.contextGUID,c=d.itemMap.get(b),f=g.itemMap.get(b),h=null;c.pinID||void 0!==e.netlistController.getTerminal(c)||e.netlistController.addJunction(c,{name:a.netName,priority:j(a.netName)}),f.pinID||void 0!==e.netlistController.getTerminal(f)||e.netlistController.addJunction(f,{name:a.netName,priority:j(a.netName)}),e.netlistController.addWire(a),e.netlistController.connect(c,f,a,a.netName),c.pin&&(h=m.getObject(c.pin.component.templateGUID).getSymbolPin(c.pin.pinID))&&h.changeConnectionState(!0),f.pin&&(h=m.getObject(f.pin.component.templateGUID).getSymbolPin(f.pin.pinID))&&h.changeConnectionState(!0)})}var h=l.sheetTemplateController.createTemplateWire(a.guid,a.path.map(function(a){return{x:a[0],y:a[1]}}));m.addObject(a.guid,h)}),a.probes&&(l.sheetTemplateController.probeController.probeSortByReference(a.probes),a.probes.forEach(function(a,b){var c="sheettemplates["+f+"].template.probes["+b+"]";D(a,["guid","matrix","children","probeType"],c),D(a.matrix,["a","b","c","d","e","f"],c+".matrix");var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.innerHTML=a.svg;var e=d.querySelector("g");if(!e){var g=document.createElement("div");if(g.innerHTML=a.svg,!(e=g.querySelector("g")))throw new Error("Failed to convert the graphical data for probe: "+a.guid)}var h=l.sheetTemplateController.createTemplateProbe(a.guid,{x:a.matrix.e,y:a.matrix.f},e,a.probeType);h.matrix.setTransform(a.matrix.a,a.matrix.b,a.matrix.c,a.matrix.d,a.matrix.e,a.matrix.f),h.disabled=a.disabled,h.vertical=a.vertical,m.addObject(a.guid,h)})),a.probeTexts&&a.probeTexts.forEach(function(a,b){var c="sheettemplates["+f+"].template.probeTexts["+b+"]";D(a,["guid","position","visibility"],c),D(a.position,["x","y"],c+".position");var d=l.sheetTemplateController.createTemplateProbeText(a.guid,a.position,a.visibility),h=void 0,i=void 0;a.parent&&(h=m.getObject(a.parent))&&(h.children.push(d),d.parent=h,i=e.findInstancesOfTemplate(a.guid),i.forEach(function(b){var c=e.findInstance(b.contextGUID,a.parent);c&&(c.children.push(b),b.parent=c)})),m.addObject(a.guid,d),a.parent&&(h=m.getObject(a.parent))&&(i=e.findInstancesOfTemplate(a.guid),i.forEach(function(b){var c=e.findInstance(b.contextGUID,a.parent);if(c){var f=o[0].viewObject.contentElement.getSingleObject(d.templateGUID);f.displayVoltage=(h.probeType===g.PROBE_VOLTAGE||h.probeType===g.PROBE_VOLTAGE_CURRENT)&&c.plot.showOnSchematic,f.displayCurrent=(h.probeType===g.PROBE_CURRENT||h.probeType===g.PROBE_VOLTAGE_CURRENT)&&c.plot.showOnSchematic,f.displayInstantaneous=c.displayInstantaneous,f.displayPeriodic=c.displayPeriodic,f.displayDc=c.displayDc,f.displayDigital=h.probeType===g.PROBE_DIGITAL}}))}),a.texts&&a.texts.forEach(function(a,b){var c="sheettemplates["+f+"].template.texts["+b+"]",d=null;if(a.matrix?(D(a,["guid","matrix","fontSize","visibility"],c),D(a.matrix,["a","b","c","d","e","f"],c),d=l.sheetTemplateController.createTemplateText(a.guid,{x:a.matrix.e,y:a.matrix.f},a.visibility,a.align||"center",a.standalone||!1,a.font||null),d.matrix.setTransform(a.matrix.a,a.matrix.b,a.matrix.c,a.matrix.d,a.matrix.e,a.matrix.f)):(D(a,["guid","position","fontSize","visibility"],c),D(a.position,["x","y"],c),d=l.sheetTemplateController.createTemplateText(a.guid,a.position,a.visibility,a.align||"center",a.standalone||!1,a.font||null)),a.parent){var g=m.getObject(a.parent);if(g){g.children.push(d),d.parent=g;e.findInstancesOfTemplate(a.guid).forEach(function(b){var c=e.findInstance(b.contextGUID,a.parent);c&&(c.children.push(b),b.parent=c)})}g.probeType&&(d.updateView=l.sheetTemplateController.probeIdTextViewControllerUpdateHandler)}m.addObject(a.guid,d)})}),e.netlist.removeEmptyNets=p,e.netlist.removeEmptyNets()}()},I=function(a,b,c,d,f,g,h){var i="sheettemplates["+d+"].instances["+c+"]";if(!a)throw new Error("No valid instance found at "+i);!function(){D(a,["guid"],i);var c=a.guid;a.componentsections&&a.componentsections.forEach(function(a,d){D(a,["refdes","name","guid","modelinstancedata"],i+".componentsections["+d+"]"),D(a.refdes,["prefix","number","postfix"],i+".componentsections["+d+"].refdes");var g=new j;g.prefix=a.refdes.prefix,g.number=a.refdes.number,g.postfix=a.refdes.postfix;var h=b.getDesignComponentByRefdes(g);if(!h)throw new Error("The component with refdes: "+g.toString()+" was not found in the design for "+i+".componentsections["+d+"].refdes");var k=f.sheetTemplateController.createSectionInstance(h,a.name,a.guid,c);k.modelInstanceData=A.initializeSectionModelInstanceVariables(h.oeclID);var l=A.getComponentFromCache(h.oeclID);f.sheetTemplateController.componentController.addInstanceSymbolPinsFromOECL(k,l,a.name,a.activesymbol);var m=function(a,b,c){var g=void 0,h=void 0;for(g in a)if(a.hasOwnProperty(g)){var j=b[g],k=a[g];for(h in k)if(k.hasOwnProperty(h)){D(k[h],["stringvalue"],i+".componentsections["+d+"].modelInstanceData."+g+"."+h),j[h]={string:k[h].stringvalue};var l=c(g,h);if(f.sheetTemplateController.propertyController.isNumericProperty(l)){var m=e(j[h].string);isNaN(m)||(j[h].value=m),k[h].hasOwnProperty("state")&&"boolean"==typeof k[h].state&&(j[h].state=k[h].state)}}}};m(a.modelinstancedata,k.modelInstanceData,A.getModelInstanceProperty),k.modelDefinitionData=A.initializeSectionModelDefinitionVariables(h.oeclID),m(a.modeldefinitiondata,k.modelDefinitionData,A.getModelDefinitionProperty),k.activePackageID=a.activepackage||k.activePackageID,!k.activePackageID&&k.designComponent&&k.designComponent.oeclComponentBlueprint&&k.designComponent.oeclComponentBlueprint.packageConfigurations.length&&(k.activePackageID=k.designComponent.oeclComponentBlueprint.packageConfigurations[0].id),k.activeModelID=a.activemodel||k.activeModelID,k.activeSymbolID=a.activesymbol||k.activeSymbolID,k.useDocumentLogicLevelSettings=!1!==a.usedocumentlogiclevelsettings,k.activePinTechnology=a.activetechnology||k.activePinTechnology,k.activePinRiseTime=a.activepinrisetime||k.activePinRiseTime,k.activePinFallTime=a.activepinfalltime||k.activePinFallTime,a.activepincustomlogicfamily?k.activePinCustomLogicFamily=new q(a.activepincustomlogicfamily.lowVoltage,a.activepincustomlogicfamily.maxLowVoltage,a.activepincustomlogicfamily.unknownVoltage,a.activepincustomlogicfamily.minHighVoltage,a.activepincustomlogicfamily.highVoltage):k.activePinCustomLogicFamily=q.getVoltageLevelForLogicFamily(r.CUSTOM),b.addInstance(c,a.guid,k)}),a.connectors&&function(){var d=new Map;a.connectors.forEach(function(a,e){D(a,["connectorID","guid"],i+".connectors["+e+"]");var g=void 0;d.has(a.connectorID)?g=d.get(a.connectorID):(g=b.createConnectorHub(a.connectorID,a.connectorType),d.set(a.connectorID,g),b.addConnectorHub(g));var h=f.sheetTemplateController.createConnectorInstance(c,a.guid,g);b.addInstance(c,a.guid,h)}),d.forEach(function(a,c){b.netlistController.addJunction(a,{name:c,priority:b.netlist.ENetPriorities.PRIORITY_CONNECTOR_NAMED})})}(),a.wires&&a.wires.forEach(function(a,d){D(a,["guid","net"],i+".wires["+d+"]");var e=f.sheetTemplateController.createWireInstance(E(a.net,g),c,a.guid);b.addInstance(c,a.guid,e)}),a.texts&&a.texts.forEach(function(a,d){D(a,["guid","variableName"],i+".texts["+d+"]");var e=f.sheetTemplateController.createTextInstance(c,a.guid,a.variableName);b.addInstance(c,a.guid,e)}),a.probes&&(a.probes.forEach(function(a,d){D(a,["guid","probeID"],i+".probes["+d+"]");var e=f.sheetTemplateController.createProbeInstance(c,a.guid,a.probeID,a.reversed||!1);if(a.plot&&(e.plot.weight=a.plot.weight||e.plot.weight,a.plot.color&&(e.plot.color={r:a.plot.color.r,g:a.plot.color.g,b:a.plot.color.b,a:a.plot.color.a}),e.plot.showOnSchematic=void 0===a.plot.showOnSchematic||a.plot.showOnSchematic,e.plot.showInGraph=void 0===a.plot.showInGraph||a.plot.showInGraph),e.displayInstantaneous=!1!==a.displayInstantaneous,e.displayPeriodic=!0===a.displayPeriodic,e.displayDc=!1!==a.displayDc,e.displayDigital=!1!==a.displayDigital,a.expression&&(e.expression=a.expression),e.source=a.source,a.file&&(e.file=a.file,e.fileChannelName=a.fileChannelName,e.fileSize=a.fileSize,e.fileChecksum=a.fileChecksum),a.url&&(e.url=a.url,e.externalURLDataCurrentChannelIndex=a.externalURLDataCurrentChannelIndex,e.urlChannelName=a.urlChannelName),a.network&&(e.network=a.network,e.externalNetworkDataCurrentChannelIndex=a.externalNetworkDataCurrentChannelIndex,e.networkChannelName=a.networkChannelName),a.usb&&(e.usb=a.usb,e.externalUsbDataCurrentChannelIndex=a.externalUsbDataCurrentChannelIndex,e.usbChannelName=a.usbChannelName),e.file&&e.file.length>0){var g=!1;h.forEach(function(a){a.templateGUIDs.forEach(function(b){b==e.templateGUID&&(e.externalData=a.externalData,g=void 0!==e.externalData&&e.externalData.length>0)})}),g||(e.fileError=k.i18n.translate("Reload file: ").fetch()+" "+e.file)}e.useDocumentLogicLevelSettings=!1!==a.usedocumentlogiclevelsettings,a.logicLevel&&(e.logicLevel=a.logicLevel),a.customLogicFamily&&(e.customLogicFamily=new q(a.customLogicFamily.lowVoltage,a.customLogicFamily.maxLowVoltage,a.customLogicFamily.unknownVoltage,a.customLogicFamily.minHighVoltage,a.customLogicFamily.highVoltage)),b.addInstance(c,a.guid,e),b.probeController.addProbe(e),f.sheetTemplateController.probeController.changeConnectName(e,e.source,e.source===p.url?e.url:e.source===p.network?e.network:e.source===p.usb?e.usb:"")}),a.probes.forEach(function(a){var d=b.findInstance(c,a.guid),e=a.probeRefs?a.probeRefs.map(function(a){return b.findInstance(c,a.templateGUID)}):[];d.probeRefs=e})),a.probeTexts&&a.probeTexts.forEach(function(a,d){D(a,["guid","variableName"],i+".probeTexts["+d+"]");var e=f.sheetTemplateController.createProbeTextInstance(c,a.guid,a.variableName);b.addInstance(c,a.guid,e)})}()},J=function(a,b,c,d,e,f){a.forEach(function(a,g){I(a,b,g,c,d,e,f)})},K=function(a,b,c,d,e){if(!(a.length>0))throw new Error("At least one item should exists in the 'sheettemplates'");a.forEach(function(a,f){D(a,["template","instances"],"sheettemplates["+f+"]"),H(a.template,a.instances,b,c,d,f,e)}),z.activateView(b.active)},L=function(a){if(!(a.length>0))throw new Error("No sheet group data was found in the file, 'sheetgroups' should have at least one item");a.forEach(function(a,b){D(a,["guid","sheets"],"sheetgroups["+b+"]"),z.createSheetGroup(a.guid)})},M=function(a,b){a&&a.forEach(function(a,c){D(a,["id","refdes"],"components["+c+"]");var d=A.getComponentFromCache(a.id);if(!d)throw new Error("A component with the id: "+a.id+" was not found in the blue prints");var e=new j;e.prefix=a.refdes.prefix,e.number=a.refdes.number,e.postfix=a.refdes.postfix,b.addDesignComponent(b.createDesignComponent(d,e))})},N=function(a,b,c){var d={};a.forEachNet(function(a){d[a.name]=O(a.objects.filter(function(a){return a.hasOwnProperty("pin")}).map(function(a){return{context:a.pin.parent.contextGUID,component:a.pin.parent.templateGUID,pin:a.pin.pinID}}))});var e=Object.keys(c).sort(),f=Object.keys(d).sort();if(e.length!==f.length||e.join(",")!==f.join(","))throw new Error("The list of loaded nets '"+e.join(",")+"' is different from the list of generated nets '"+f.join(",")+"'");for(var g=0;g<e.length;g++){var h=c[e[g]],i=d[f[g]],j=h.map(function(a){return[a.context,a.component,a.pin].join(":")}).join(","),k=i.map(function(a){return[a.context,a.component,a.pin].join(":")}).join(",");if(j!==k)throw new Error("The generated netpins: '"+k+"' do not match the loaded net pins: '"+j+"' for net: '"+e[g]+"'")}},O=function(a){return a.sort(function(a,b){return a.component>b.component?1:a.component<b.component?-1:a.pin>b.pin?1:a.pin<b.pin?-1:0}),a},P=function(a,b){var c={};return a.forEach(function(a){c[a.name]=O(a.objects),b.netlist.createNet({name:a.name,priority:a.priority,useInitialConditions:a.useInitialConditions,initialConditions:a.initialConditions,useNodeset:a.useNodeset,nodeset:a.nodeset})}),c},Q=function(a,b){if(a.common){var c=b.globalSimulationSettings;void 0!==a.common.abstol&&(c.abstol=a.common.abstol),void 0!==a.common.abstolenabled&&(c.abstolEnabled=a.common.abstolenabled),void 0!==a.common.itl1&&(c.itl1=a.common.itl1),void 0!==a.common.itl1enabled&&(c.itl1Enabled=a.common.itl1enabled),void 0!==a.common.itl4&&(c.itl4=a.common.itl4),void 0!==a.common.itl4enabled&&(c.itl4Enabled=a.common.itl4enabled),void 0!==a.common.method&&(c.method=a.common.method),void 0!==a.common.reltol&&(c.reltol=a.common.reltol),void 0!==a.common.reltolenabled&&(c.reltolEnabled=a.common.reltolenabled),void 0!==a.common.rshunt&&(c.rshunt=a.common.rshunt),void 0!==a.common.rshuntenabled&&(c.rshuntEnabled=a.common.rshuntenabled),void 0!==a.common.temperature&&(c.temperature=a.common.temperature),void 0!==a.common.temperatureenabled&&(c.temperatureEnabled=a.common.temperatureenabled),void 0!==a.common.vntol&&(c.vntol=a.common.vntol),void 0!==a.common.vntolenabled&&(c.vntolEnabled=a.common.vntolenabled)}if(a.interactive){var e=b.getSimulationSettings(d.Interactive);if(void 0!==a.interactive.tstop&&(e.stopTime=a.interactive.tstop),void 0!==a.interactive.initialconditions&&(e.initialConditions=a.interactive.initialconditions),void 0!==a.interactive.userdefinedtmax&&(e.userDefinedTMax=a.interactive.userdefinedtmax),void 0!==a.interactive.tmax&&(e.tMax=a.interactive.tmax),void 0!==a.interactive.userdefinedtstep&&(e.userDefinedTStep=a.interactive.userdefinedtstep),void 0!==a.interactive.tstep&&(e.tStep=a.interactive.tstep),void 0!==a.interactive.runName&&(e.runName=a.interactive.runName),void 0!==a.interactive.timeperdivision&&(e.timePerDivision=a.interactive.timeperdivision),void 0!==a.interactive.cursorType&&(e.cursorType=a.interactive.cursorType),void 0!==a.interactive.cursorSignals&&(e.cursorSignals=a.interactive.cursorSignals),void 0!==a.interactive.trigger){var f=e.trigger;e.trigger={delay:void 0!==a.interactive.trigger.delay?a.interactive.trigger.delay:f.delay,value:void 0!==a.interactive.trigger.value?a.interactive.trigger.value:f.value,valueString:void 0!==a.interactive.trigger.valuestring?a.interactive.trigger.valuestring:""+(void 0!==a.interactive.trigger.value?a.interactive.trigger.value:f.value),mode:void 0!==a.interactive.trigger.mode?a.interactive.trigger.mode:f.mode,edge:void 0!==a.interactive.trigger.edge?a.interactive.trigger.edge:f.edge,signal:void 0!==a.interactive.trigger.signal?a.interactive.trigger.signal:f.signal,probe:void 0!==a.interactive.trigger.probe?a.interactive.trigger.probe:f.probe,probeType:void 0!==a.interactive.trigger.probetype?a.interactive.trigger.probetype:f.probeType}}}if(a.transient){var g=b.getSimulationSettings(d.Transient);void 0!==a.transient.tstart&&(g.startTime=a.transient.tstart),void 0!==a.transient.tstop&&(g.stopTime=a.transient.tstop),void 0!==a.transient.initialconditions&&(g.initialConditions=a.transient.initialconditions),void 0!==a.transient.userdefinedtmax&&(g.userDefinedTMax=a.transient.userdefinedtmax),void 0!==a.transient.tmax&&(g.tMax=a.transient.tmax),void 0!==a.transient.userdefinedtstep&&(g.userDefinedTStep=a.transient.userdefinedtstep),void 0!==a.transient.tstep&&(g.tStep=a.transient.tstep),void 0!==a.transient.runName&&(g.runName=a.transient.runName),void 0!==a.transient.cursorType&&(g.cursorType=a.transient.cursorType),void 0!==a.transient.cursorSignals&&(g.cursorSignals=a.transient.cursorSignals)}if(a.acsweep){var h=b.getSimulationSettings(d.AC);void 0!==a.acsweep.fstart&&(h.startFrequency=a.acsweep.fstart),void 0!==a.acsweep.fstop&&(h.stopFrequency=a.acsweep.fstop),void 0!==a.acsweep.type&&(h.sweepType=a.acsweep.type),void 0!==a.acsweep.pointcount&&(h.pointCount=a.acsweep.pointcount),void 0!==a.acsweep.runName&&(h.runName=a.acsweep.runName),void 0!==a.acsweep.magnitudescale&&(h.magnitudeScaleType=a.acsweep.magnitudescale),void 0!==a.acsweep.cursorType&&(h.cursorType=a.acsweep.cursorType),void 0!==a.acsweep.cursorSignals&&(h.cursorSignals=a.acsweep.cursorSignals)}if(a.dcoperatingpoint){var i=b.getSimulationSettings(d.DC);void 0!==a.dcoperatingpoint.runName&&(i.runName=a.dcoperatingpoint.runName)}if(a.dcsweep){var j=b.getSimulationSettings(d.DC_SWEEP);void 0!==a.dcsweep.source1stepmode&&(j.source1StepMode=a.dcsweep.source1stepmode),void 0!==a.dcsweep.source2stepmode&&(j.source2StepMode=a.dcsweep.source2stepmode),void 0!==a.dcsweep.runName&&(j.runName=a.dcsweep.runName),void 0!==a.dcsweep.source1name&&(j.source1Name=a.dcsweep.source1name),void 0!==a.dcsweep.source1start&&(j.source1Start=a.dcsweep.source1start),void 0!==a.dcsweep.source1stop&&(j.source1Stop=a.dcsweep.source1stop),void 0!==a.dcsweep.source1step&&(j.source1Step=a.dcsweep.source1step),void 0!==a.dcsweep.usesource2&&(j.useSource2=a.dcsweep.usesource2),void 0!==a.dcsweep.source2name&&(j.source2Name=a.dcsweep.source2name),void 0!==a.dcsweep.source2start&&(j.source2Start=a.dcsweep.source2start),void 0!==a.dcsweep.source2stop&&(j.source2Stop=a.dcsweep.source2stop),void 0!==a.dcsweep.source2step&&(j.source2Step=a.dcsweep.source2step),void 0!==a.dcsweep.cursorType&&(j.cursorType=a.dcsweep.cursorType),void 0!==a.dcsweep.cursorSignals&&(j.cursorSignals=a.dcsweep.cursorSignals),void 0!==a.dcsweep.cursorSweeps&&(j.cursorSweeps=a.dcsweep.cursorSweeps)}if(a.paramsweep){var k=b.getSimulationSettings(d.PARAM_SWEEP);void 0!==a.paramsweep.paramStepMode&&(k.paramStepMode=a.paramsweep.paramStepMode),void 0!==a.paramsweep.selectedAnalysisType&&(k.selectedAnalysisType=a.paramsweep.selectedAnalysisType),void 0!==a.paramsweep.selectedSweepType&&(k.selectedSweepType=a.paramsweep.selectedSweepType),void 0!==a.paramsweep.componentName&&(k.componentName=a.paramsweep.componentName),void 0!==a.paramsweep.parameterName&&(k.parameterName=a.paramsweep.parameterName),void 0!==a.paramsweep.parameterFullName&&(k.parameterFullName=a.paramsweep.parameterFullName),void 0!==a.paramsweep.parameterUnits&&(k.parameterUnits=a.paramsweep.parameterUnits),void 0!==a.paramsweep.paramList&&(k.paramList=a.paramsweep.paramList),void 0!==a.paramsweep.runName&&(k.runName=a.paramsweep.runName),void 0!==a.paramsweep.paramStart&&(k.paramStart=a.paramsweep.paramStart),void 0!==a.paramsweep.paramStop&&(k.paramStop=a.paramsweep.paramStop),void 0!==a.paramsweep.paramStep&&(k.paramStep=a.paramsweep.paramStep),void 0!==a.paramsweep.cursorType&&(k.cursorType=a.paramsweep.cursorType),void 0!==a.paramsweep.cursorSignals&&(k.cursorSignals=a.paramsweep.cursorSignals),void 0!==a.paramsweep.cursorSweeps&&(k.cursorSweeps=a.paramsweep.cursorSweeps)}if(a.active&&(b.activeAnalysis=a.active),a.digital){var l=b.documentDigitalSettings;void 0!==a.digital.logicLevel&&(l.logicLevel=a.digital.logicLevel),void 0!==a.digital.outputLow&&(l.outputLow=a.digital.outputLow),void 0!==a.digital.outputHigh&&(l.outputHigh=a.digital.outputHigh),void 0!==a.digital.inputLowThreshold&&(l.inputLowThreshold=a.digital.inputLowThreshold),void 0!==a.digital.inputHighThreshold&&(l.inputHighThreshold=a.digital.inputHighThreshold)}b.notifySimulationSettingsUpdated(this)},R=function(a){a.probe&&z.activeDesign.probeController.setGlobalProbeSettings(a.probe.periodicenabled)},S=function(a,b){a&&a.simulation&&(R(a.simulation,b),Q(a.simulation,b))},T=function(a){var b=!1;try{var c=a;if(v="",w=[],a instanceof ArrayBuffer){for(var d="",e=new Uint8Array(a),f=new Uint8Array(a,0,8),g="",h=0;h<Math.min(8,f.length);h++)g+=String.fromCharCode(f[h]);var i="0";if(g.match(m)&&(i=g.substr(5,3)),parseFloat(i)<parseFloat(n)){for(var j=0;j<e.length;j++)d+=String.fromCharCode(e[j]);c=decodeURIComponent(window.escape(d)),v=JSON.parse(c),v.file&&v.file.identifier&&"webmultisim"===v.file.identifier&&(b=!0)}else{var k=8,p=new Uint32Array(a,k,1),q=p[0];k+=4;var r=new Uint8Array(a,k,q);for(k+=q;k%8!=0;)k+=1;d="";for(var s=0;s<r.length;s++)d+=String.fromCharCode(r[s]);if(c=decodeURIComponent(window.escape(d)),v=JSON.parse(c),v.file&&v.file.identifier&&"webmultisim"===v.file.identifier)for(b=!0;e.length>k+8;){for(var t=new Uint8Array(a,k,8),u="",x=0;x<t.length;x++)u+=String.fromCharCode(t[x]);if(!u.match(o))throw new Error("invalid msjs file format.");for(k+=8,p=new Uint32Array(a,k,1),q=p[0],k+=4,r=new Uint8Array(a,k,q),k+=q;k%8!=0;)k+=1;d="";for(var y=0;y<r.length;y++)d+=String.fromCharCode(r[y]);c=decodeURIComponent(window.escape(d));var z=JSON.parse(c);if(z.externalData){w.push(z);for(var A=k,B=0;B<z.externalData.length;B++){var C=z.externalData[B];switch(C.dataSize.length){case 2:var D=new Float64Array(a,A,C.dataSize[0]);C.x=D,A+=C.dataSize[0]*Float64Array.BYTES_PER_ELEMENT,D=new Float64Array(a,A,C.dataSize[1]),C.y=D,A+=C.dataSize[1]*Float64Array.BYTES_PER_ELEMENT;break;case 3:var E=new Float64Array(a,A,C.dataSize[0]);C.frequency=E,A+=C.dataSize[0]*Float64Array.BYTES_PER_ELEMENT,E=new Float64Array(a,A,C.dataSize[1]),C.phase=E,A+=C.dataSize[1]*Float64Array.BYTES_PER_ELEMENT,E=new Float64Array(a,A,C.dataSize[2]),C.sourceFormat==l.Multisim?C.mag=E:C.gain=E,A+=C.dataSize[2]*Float64Array.BYTES_PER_ELEMENT}}k=A,z.externalData.dataSize=null}}}}else v=JSON.parse(c),v.file&&v.file.identifier&&"webmultisim"===v.file.identifier&&(b=!0)}catch(a){b=!1}return b||(v="",w=[]),b};return{parseFileData:function(a,b,d){x&&x.clearGroups();var e={valid:!1,errorMessage:k.i18n.translate("Cannot read file.").fetch()};return window.multisim.tryCatchAll(function(){null!==window.multisim.tryCatchAll(function(){z.undoEnabled=!1;var a=z.createDesign(c);if(A.clearCache(),!a)throw new Error("failed to create design");!function(){D(v,["file","design","sheettemplates","sheetgroups","viewinfo","nets"],"webmultisim"),L(v.sheetgroups),F(v.design,a),G(v.blueprints,A),M(v.components,a);var c=P(v.nets,a);K(v.sheettemplates,v.viewinfo,v.nets,a,w),S(v.settings,y),N(a.netlist,A,c),z.sheets.forEach(function(a){a.sheetTemplateController.probeController.updateAllProbeState()}),e.valid=!0,e.errorMessage="",b&&b.design&&(b.design.metaData&&(a.metadata={private:!!b.design.metaData.private,description:b.design.metaData.description||a.metadata.description,tags:b.design.metaData.tags?b.design.metaData.tags.slice():a.metadata.tags}),a.username=b.design.username||"",a.guid=b.design.guid||null);var g=[],h=new Set(v.components.map(function(a){return a.id}));Object.keys(v.blueprints.components).filter(function(a){return"ground"!==a.toLowerCase()&&"connector"!==a.toLowerCase()}).forEach(function(a){h.has(a)||g.push(a)}),A.updateComponents(g,z,function(){a.netlistController.listener.notifyListeners(f.NE_NETSCHANGED,{netlist:a.netlist}),z.undoEnabled=!0,a.simulationController.dataManager.stale=!1,d(!0)})}()},this)&&(A.clearCache(),z.newDesign(c,u?u.schematicControls:null),z.undoEnabled=!0)},this),e},canReadThisFileType:T}}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.isTemplateJunction},function(a){i=a.default},function(a){j=a.RefDes},function(a){k=a.default},function(a){l=a.sourceFormatTypes,m=a.msjsFileMarkerHeader,n=a.msjsCurrentFileVersion,o=a.msjsFileDataPlotterSectionMarker},function(a){p=a.sourceType},function(a){q=a.LogicFamily,r=a.ELogicFamily}],execute:function(){}}}),a.register("72",[],function(a,b){"use strict";function c(a,b,c,d,e){var f=b,g=c,h=d,i=e,j=0,k="",l=[],m=function(a,b,c){b.forEach(function(b){if(!a.hasOwnProperty(b))throw new Error("the property: "+b+" was missing from "+c)}),k.dataChannels.forEach(function(a){a.signalIsExternal=!0})};return{canReadThisFileType:function(a,b){var c=!1;try{if((!b||".simdata"===b)&&a instanceof ArrayBuffer){for(var d="",e=new Uint32Array(a,0,1),f=e[0],g=new Uint8Array(a,4,f),h=0;h<g.length;h++)d+=String.fromCharCode(g[h]);var i=decodeURIComponent(window.escape(d));k=JSON.parse(i),j=4+f,k.numChannels>0&&k.pointsSaved>0&&k.pointsPerChannel>0&&(c=!0)}}catch(a){console.log(a)}return c||(k=""),c},parseFileData:function(a){try{if(k){var b=k.numChannels,c=k.pointsSaved,d=j;if(c>0)for(var e=0;e<b;e++){var f=new Float64Array(a,d,c);l.push(f),d+=c*Float64Array.BYTES_PER_ELEMENT}}}catch(a){console.log(a)}return{valid:!0,errorMessage:""}},loadDataIntoDataManager:function(){if(k&&l.length>0&&f)try{m(k,["activeAnalysis","dataSize","limits","numChannels","pointsPerChannel","pointsSaved","dataChannels"],"simParams"),i&&i.outputInterface&&i.outputInterface.initialize(k.activeAnalysis,f,g,h),a.initData(k.dataChannels,0),a.loadData(k,l)}catch(a){console.log(a),k=""}}}}return a("default",c),{setters:[],execute:function(){}}}),a.register("73",["1d","1e"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("DataImporterBase",e=function(){function a(){c(this,a)}return d(a,[{key:"fromBlob",value:function(){throw new Error("Implement in derived class")}}]),a}()),a("DataImporterBase",e)}}}),a.register("6f",["1d"],function(a,b){"use strict";var c,d,e,f;return{setters:[function(a){c=a.default}],execute:function(){a("ExchangeData",d=function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";c(this,a),this.DataSet=b,this.AnalysisType=d}),a("ExchangeData",d),a("DataSet",e=function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];c(this,a),this.Name=b,this.Channels=d}),a("DataSet",e),a("DataChannel",f=function a(b){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];c(this,a),this.Name=b,this.XType=d,this.XValues=e,this.YType=f,this.YValues=g}),a("DataChannel",f)}}}),a.register("74",["1d","1e","26","27","73","6f","6d","75","21"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.DataImporterBase},function(a){h=a.ExchangeData,i=a.DataSet,j=a.DataChannel},function(a){k=a.Complex},function(a){l=a.CsvParser},function(a){m=a.default}],execute:function(){n=Object.freeze({XVALUE_NOT_INCREASING:"XVALUE_NOT_INCREASING",NO_DATA:"NO_DATA",INVALID_FILE:"INVALID_FILE",NO_HEADERS:"NO_HEADERS",INVALID_HEADER:"INVALID_HEADER"}),a("Errors",o=n),a("Errors",o),p=/(?:X|Y)\-\-Trace\s\d+::\[(.*?)\]/,q=/(Mag:|Phase)/,r=function(a){var b=void 0,c=p.exec(a);if(c){if(b=c[1].trim(),b.indexOf(",")>=0){var d=b.split(","),e=d[0].trim(),f=d[1].split("|"),g=f[0].trim(),h=f[1].match(/\((.*?)\)/)[1];b=h+": "+e+" | "+g}}else{if(!a.match(q))throw new Error(n.INVALID_HEADER);b=a.replace(q,"").trim()}return b},s=function(a){var b=new i,c=!0,d=!1,e=void 0;try{for(var f,g=a.slice(1)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,k=new j;k.Name=h[0],k.XType="TIME",k.XValues=[0],k.YType=w(k.Name),k.YValues=[Number(h[1])],b.Channels.push(k)}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}return b},t=function(a){var b=[],c=!0,d=!1,e=void 0;try{for(var f,g=function(){var a=f.value,c=a.Name.split("|");a.Name=c[0].trim();var d=2===c.length?c[1].trim():"",e=b.find(function(a){return a.Name===d});e||(e=new i(d),b.push(e)),e.Channels.push(a)},h=a[Symbol.iterator]();!(c=(f=h.next()).done);c=!0)g()}catch(a){d=!0,e=a}finally{try{!c&&h.return&&h.return()}finally{if(d)throw e}}return b},u=function(a,b){for(var c=a[0],d=[],e=c.length,f=0,g=0;g<e;g++)if(""===c[g]){var h=g;d.push(v(f,h,a,b)),f=g+1}else if(g===e-1){var i=g+1;d.push(v(f,i,a,b)),f=g+1}return d},v=function(a,b,c,d){var e=c[0],f=c.slice(1),g=new j,h=x(e[a]);g.XType=h.xAxisType,g.Name=r(e[a+1]),g.YType=w(g.Name);for(var i=b-a==3,l=0,m=f[0],o=Number(m[a]),p=i?k.fromPolar(Number(m[a+1]),Number(m[a+2])):Number(m[a+1]),q=null,s=null,t=i?function(a){return 0===a.Magnitude&&0===a.Phase}:function(a){return 0===a},u=i?function(a,b){return a.Magnitude===b.Magnitude&&a.Phase===b.Phase}:function(a,b){return a===b},v=0;v<f.length;v++){m=v<f.length-1?f[v+1]:null;var y=q;q=o,o=m?Number(m[a]):null;var z=s;if(s=p,p=i?m?k.fromPolar(Number(m[a+1]),Number(m[a+2])):null:m?Number(m[a+1]):null,0===q&&t(s)&&y&&(!o||0!==o)){if(!o||f.slice(v).every(function(b){return"0"===b[a]}))break;throw new Error(n.XVALUE_NOT_INCREASING)}if(y&&q<y)throw new Error(n.XVALUE_NOT_INCREASING);d.decimate&&p&&z&&u(z,p)&&l<10?l++:(g.YValues.push(s),g.XValues.push(q),l=0)}return g},w=function(a){var b=a.substring(0,a.indexOf(" |")).replace(/ /g,""),c=a.substr(a.lastIndexOf(":")+1).trim(),d=c.indexOf(" | ");-1!==d&&(c=c.substr(0,d));var e=c.match(/^V\([^)]*[)]$/)||b.match(/^V\([^)]*[)]$/),f=c.match(/^V\([^)]*[)]-V\([^)]*[)]$/)||b.match(/^V\([^)]*[)]-V\([^)]*[)]$/),g=c.match(/^I\([^)]*[)]$/)||b.match(/^I\([^)]*[)]$/),h=c.match(/^-I\([^)]*[)]$/)||b.match(/^-I\([^)]*[)]$/);return e||f?"voltage":g||h?"current":"expression"},x=function(a){var b={analysisName:"",xAxisType:""};if(a.match(/^FREQUENCY/i))return b.analysisName=m.AC,b.xAxisType="frequency",b;if(!a.startsWith("X--Trace"))return b;var c=a.match(/X--Trace \d+::\[([^\]]*)\]/);if(c){var d=c[1],e=d.match(/(.+): (.+)/);if(e){var f=e[1],g=e[2].toLowerCase(),h=!1;for(var i in m)f===m[i]&&(h=!0);h&&(b.analysisName=f,b.xAxisType=g)}}return b},a("MultisimCsvDataImporter",y=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{decimate:!0};c(this,b);var d=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d._options=a,d}return f(b,a),d(b,[{key:"fromArray",value:function(a){if(a.length<2)throw new Error(n.NO_DATA);var b=void 0;if(!(a[0].length>1))throw new Error(n.NO_HEADERS);var c=a[0];if(c[0].match(/Variable/)&&c[1].match(/Operating point value/))b=new h([s(a)],m.DC);else{var d=x(c[0]);b=new h(t(u(a,this._options)),d.analysisName)}return b}},{key:"fromString",value:function(a){var b=l.fromString(a.trim());return this.fromArray(b)}},{key:"fromBlob",value:function(a){var b=this;return new Promise(function(c,d){var e=new FileReader;e.addEventListener("loadend",function(){try{var a=b.fromString(e.result);c(a)}catch(a){d(a.message)}}),e.readAsText(a,"utf-8")})}}]),b}(g)),a("MultisimCsvDataImporter",y)}}}),a.register("6d",["1d","1e"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("Complex",e=function(){function a(){c(this,a)}return d(a,[{key:"Magnitude",get:function(){throw new Error("Invalid State")}},{key:"Phase",get:function(){throw new Error("Invalid State")}},{key:"Real",get:function(){throw new Error("Invalid State")}},{key:"Imag",get:function(){throw new Error("Invalid State")}}],[{key:"fromRectangular",value:function(b,c){var d=new a;return Object.defineProperty(d,"Magnitude",{get:function(){return Math.sqrt(Math.pow(b,2)*Math.pow(c,2))}}),Object.defineProperty(d,"Phase",{get:function(){return 180*Math.atan(c/b)/Math.PI}}),Object.defineProperty(d,"Real",{get:function(){return b}}),Object.defineProperty(d,"Imag",{get:function(){return c}}),d}},{key:"fromPolar",value:function(b,c){var d=new a;return Object.defineProperty(d,"Magnitude",{get:function(){return b}}),Object.defineProperty(d,"Phase",{get:function(){return c}}),Object.defineProperty(d,"Real",{get:function(){return b*Math.cos(c*(Math.PI/180))}}),Object.defineProperty(d,"Imag",{get:function(){return b*Math.sin(c*(Math.PI/180))}}),d}}]),a}()),a("Complex",e)}}}),a.register("75",["1d","1e"],function(a,b){"use strict";function c(a,b){var c=[],d=[],e="",f=-1,g=void 0;c.push(d);for(var h=0;h<a.length;h++){var i=b(a[h]),j=a.length>h+1?b(a[h+1]):null;"\r"===i&&j&&"\n"===j||(h===f+1&&'"'===i?g=!0:g&&'"'===i?'"'===j?(e+=i,h++):(g=!1,j||d.push(e)):g||"\n"!==i?g||","!==i?g||j?e+=i:(f=h,e+=i,d.push(e),e=""):(f=h,d.push(e),e=""):(d.push(e),e="",f=h,j&&(d=[],c.push(d))))}return c}var d,e,f;return{setters:[function(a){d=a.default},function(a){e=a.default}],execute:function(){a("CsvParser",f=function(){function a(){d(this,a)}return e(a,null,[{key:"fromString",value:function(a){return c(a,function(a){return a})}},{key:"fromArrayBuffer",value:function(a){if("utf-8"!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8"))throw new Error("Not Implemented");var b=new Uint8Array(a);return b.length>=3&&239===b[0]&&187===b[1]&&191===b[2]&&(b=b.slice(3)),c(b,function(a){return String.fromCharCode(a)})}}]),a}()),a("CsvParser",f)}}}),a.register("76",["21","29","61","50","71","74","6d","75"],function(a,b){"use strict";function c(){var a=[],b=void 0,c=function(a,b){var c=[],e=void 0;e=a.AnalysisType?a.AnalysisType:1===a.DataSet.length&&a.DataSet[0].Channels.every(function(a){return 1===a.XValues.length})?d.DC:a.DataSet[0].Channels[0].YValues[0]instanceof l?d.AC:d.Transient;var f=!0,g=!1,j=void 0;try{for(var k,m=a.DataSet[Symbol.iterator]();!(f=(k=m.next()).done);f=!0){var n=k.value,o=!0,p=!1,q=void 0;try{for(var r,s=n.Channels[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var t=r.value,u=b?h(t.XValues):t.XValues;if(t.YValues[0]instanceof l){var v=t.YValues.map(function(a){return a.Magnitude}),w=t.YValues.map(function(a){return a.Phase});c.push({sourceFormat:i.Multisim,analysisType:e,name:n.Name?t.Name+" | "+n.Name:t.Name,dataSignalType:t.YType,xAxisType:t.XType,frequency:u,mag:b?h(v):v,phase:b?h(w):w})}else c.push({sourceFormat:i.Multisim,analysisType:e,name:n.Name?t.Name+" | "+n.Name:t.Name,dataSignalType:t.YType,xAxisType:t.XType,x:u,y:b?h(t.YValues):t.YValues})}}catch(a){p=!0,q=a}finally{try{!o&&s.return&&s.return()}finally{if(p)throw q}}}}catch(a){g=!0,j=a}finally{try{!f&&m.return&&m.return()}finally{if(g)throw j}}return c};return{canReadThisFileType:function(a,c){var d=!1;if(c&&".csv"!==c)return!1;try{if((b=a instanceof ArrayBuffer?m.fromArrayBuffer(a,"utf-8"):m.fromString(a))&&b[0]&&b[1]){var e=b[0].map(function(a){return a.trim()}),f=b[1].map(function(a){return a.trim()});f.every(function(a){var b=""!==a?g(a):{valid:!0};return""===a||b.valid})&&e.length===f.length&&(d=!0)}}catch(a){console.log(a)}return d},parseFileData:function(d,g,h,i){var l={valid:!0,errorMessage:""},m={decimate:i&&i.removeRedundantYValues},n=new j(m);try{var o=n.fromArray(b);a=c(o,i&&i.useFloat64Arrays)}catch(a){switch(l.valid=!1,a.message){case k.INVALID_HEADER:l.errorMessage=e.i18n.translate("Header information cannot be read.").fetch();break;case k.NO_DATA:l.errorMessage=e.i18n.translate("No data available.").fetch();break;case k.NO_HEADERS:l.errorMessage=e.i18n.translate("No header information available.").fetch();break;case k.XVALUE_NOT_INCREASING:l.errorMessage=e.i18n.translate("Time values must be increasing.").fetch();break;case k.INVALID_FILE:default:l.errorMessage=e.i18n.translate("Cannot read file.").fetch()}}return f.notifyTracker(l.valid?"Data Plotter: csv upload (Multisim)":"Data Plotter: failed csv upload (Multisim)"),l},loadDataIntoInstance:function(b){b&&a&&a.length>0&&(b.externalData=a)}}}var d,e,f,g,h,i,j,k,l,m;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.basicNumberValidate},function(a){h=a.toFloat64Array,i=a.sourceFormatTypes},function(a){j=a.MultisimCsvDataImporter,k=a.Errors},function(a){l=a.Complex},function(a){m=a.CsvParser}],execute:function(){}}}),a.register("77",["21","29","61","50","71","3b"],function(a,b){"use strict";function c(){function a(a,b,c,d){if(!(a.x.length<1)){var e=1.5*b;if(d)c-a.x[a.x.length-1]>=e&&(a.x.push(c-b),a.y.push(a.y[a.y.length-1]));else for(;c-a.x[a.x.length-1]>=e;)a.x.push(a.x[a.x.length-1]+b),a.y.push(a.y[a.y.length-1])}}var b=void 0,c=void 0;e.addReadyListener(function(a){b={Transient:a.i18n.translate("Oscilloscope").fetch(),AC:a.i18n.translate("Bode Analyzer").fetch()},c=[{analysisType:d.Transient,dataType:b.Transient,format:["Timestamp","Interval","Channel name","Unit"]},{analysisType:d.AC,dataType:b.AC,format:["Amplitude unit","Amplitude value","Frequency label","Frequency unit","Gain label","Gain unit","Phase label","Phase unit"]}]});var k=function(a){return a.trim().replace(/^"\s*(.*?)\s*"$/,"$1")},l=-1,m="",n=[];return{canReadThisFileType:function(a,b){var d=!1;if(b&&".csv"!==b)return!1;try{if(m=a,a instanceof ArrayBuffer){m=[];for(var e="",f=new Uint8Array(a),h="",i=0;i<f.length;i++)h=String.fromCharCode(f[i]),"\n"===h?(m.push(decodeURIComponent(window.escape(e))),e=""):e+=h}if(l=0,m&&m.length>1){for(var j=!1,n=0;l<c.length;l+=1){for(var o=c[l],p=!0,q=0;q<o.format.length;q+=1){for(var r=!1,s=0;!r&&s<Math.min(o.format.length,m.length);s+=1){var t=m[s].split(",").map(function(a){return k(a)});if(!t||t.length<2||g(t[0]).valid)break;o.format[q]===t[0]&&(n=Math.max(n,s),r=!0)}if(!r){p=!1;break}}if(p){j=!0;break}}if(j){(m.length>n?m[n+1].split(",").map(function(a){return a.trim()}):[]).every(function(a){var b=""!==a?g(a):{valid:!0};return""===a||b.valid})&&(d=!0)}}}catch(a){console.log(a)}return d||(l=-1,m=""),d},parseFileData:function(b,o,p,q){var r={valid:!0,errorMessage:""};n=[];try{if(m&&l>=0){for(var s=c[l],t=0;t<m.length;t+=1){var u=m[t].split(",").map(function(a){return k(a)});if(g(u[0]).valid)break;for(var v=0;v<u.length&&""!==u[v];v+=2){var w=Math.ceil(v/2);if(n.length<=w)switch(s.analysisType){case d.Transient:n.push({sourceFormat:i.Labview,analysisType:s.analysisType,dataType:s.dataType,dataSignalType:"voltage",Interval:1e-10,name:"",x:[],y:[]});break;case d.AC:n.push({sourceFormat:i.Labview,analysisType:s.analysisType,dataType:s.dataType,dataSignalType:"voltage",name:"",frequency:[],gain:[],phase:[]})}switch(s.analysisType){case d.Transient:switch(u[v]){case"Timestamp":n[w].Timestamp=u[v+1];break;case"Interval":n[w].Interval=parseFloat(u[v+1]);break;case"Channel name":n[w].name=u[v+1];break;case"Unit":n[w].Unit=u[v+1],n[w].dataSignalType="V"===n[w].Unit||"Volts"===n[w].Unit?"voltage":"current"}break;case d.AC:switch(u[v]){case"Amplitude unit":n[w].AmplitudeUnit=u[v+1],n[w].dataSignalType="V"===n[w].AmplitudeUnit||"Volts"===n[w].AmplitudeUnit?"voltage":"current";break;case"Amplitude value":n[w].AmplitudeValue=u[v+1],n[w].name=u[v+1];break;case"Frequency label":n[w].FrequencyLabel=u[v+1];break;case"Frequency unit":n[w].FrequencyUnit=u[v+1];break;case"Gain label":n[w].GainLabel=u[v+1];break;case"Gain unit":n[w].GainUnit=u[v+1];break;case"Phase label":n[w].PhaseLabel=u[v+1];break;case"Phase unit":n[w].PhaseUnit=u[v+1]}}}}var x=2*n.length;if(m.length>0)for(var y=t;y<m.length;y+=1){var z=m[y];if(r.valid&&"string"==typeof z&&z.length>0){var A=z.split(",").map(function(a){return a.trim()});if(A.length>1)for(var B=0,C=0;C<x&&B<A.length;B+=1){var D=A[B],E=void 0!==D&&""!==D?parseFloat(D):void 0;switch(s.analysisType){case d.Transient:void 0===E||(!n[C].x.length||E>n[C].x.slice(-1)[0]?(a(n[C],n[C].Interval,E,!0),n[C].x.push(E),n[C].y.push(parseFloat(A[B+1]))):r={valid:!1,errorMessage:e.i18n.translate("Time values must be increasing.").fetch()});break;case d.AC:if(void 0===E);else if(!n[C].frequency.length||E>n[C].frequency.slice(-1)[0]){n[C].frequency.push(E);var F=parseFloat(A[B+1]);"dB"===n[C].GainUnit&&(F=j(F)),n[C].gain.push(F),n[C].phase.push(parseFloat(A[B+2]))}else r={valid:!1,errorMessage:e.i18n.translate("Time values must be increasing.").fetch()};B+=1}C+=1,B+=1}else r={valid:!1,errorMessage:e.i18n.translate("Cannot read file.").fetch()}}}else r={valid:!1,errorMessage:e.i18n.translate("No data available.").fetch()}}else r={valid:!1,errorMessage:e.i18n.translate("Cannot read file.").fetch()};if(r.valid&&q&&!0===q.useFloat64Arrays)for(var G=0;G<n.length;G+=1){var H=n[G];switch(H.analysisType){case d.Transient:H.x=h(H.x),H.y=h(H.y);break;case d.AC:H.frequency=h(H.frequency),H.gain=h(H.gain),H.phase=h(H.phase)}}}catch(a){console.log(a),r={valid:!1,errorMessage:e.i18n.translate("Cannot read file.").fetch()}}return f.notifyTracker(r.valid?"Data Plotter: csv upload (LabView)":"Data Plotter: failed csv upload (LabView)"),r},loadDataIntoInstance:function(a){a&&n&&n.length>0&&(a.externalData=n)}}}var d,e,f,g,h,i,j;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.basicNumberValidate},function(a){h=a.toFloat64Array,i=a.sourceFormatTypes},function(a){j=a.convertFromDB}],execute:function(){}}}),a.register("78",["1d","1e"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){e=function(){function a(){c(this,a),this.mapKey1=new Map,this.mapKey2=new Map}return d(a,[{key:"addItem",value:function(a,b,c){this.mapKey1.has(a)?this.mapKey1.get(a).push(c):this.mapKey1.set(a,new Array(c)),this.mapKey2.has(b)?this.mapKey2.get(b).push(c):this.mapKey2.set(b,new Array(c))}},{key:"findKey1",value:function(a){return this.mapKey1.get(a)}},{key:"findKey2",value:function(a){return this.mapKey2.get(a)}},{key:"findItem",value:function(a,b){var c=void 0;if(this.mapKey1.has(a)&&this.mapKey2.has(b)){var d=this.mapKey1.get(a),e=this.mapKey2.get(b);if(d.length>0&&e.length>0)for(var f=0;f<d.length;++f)if(-1!==e.indexOf(d[f])){c=d[f];break}}return c}},{key:"hasItem",value:function(a,b){return void 0!==this.findItem(a,b)}},{key:"removeItem",value:function(a,b){if(this.mapKey1.has(a)&&this.mapKey2.has(b)){var c=this.mapKey1.get(a),d=this.mapKey2.get(b);if(c.length>0&&d.length>0)for(var e=0;e<c.length;++e){var f=d.indexOf(c[e]);if(-1!==f){c.splice(e,1),d.splice(f,1);break}}}}},{key:"getAllItems",value:function(){var a=[];return this.mapKey1.forEach(function(b){a=a.concat(b)},this),a}}]),a}(),a("default",e)}}}),a.register("79",[],function(a,b){"use strict";function c(){function a(a){return a&&f.has(a)}function b(b,c){var d=!1;if(a(b)&&a(c)&&!b.outNeighbours.has(c)){var e={from:b,to:c};d=!0,b.outNeighbours.set(c,e),c.inNeighbours.set(b,e)}return d}function c(b,c){var d=!1;return a(b)&&b.outNeighbours.has(c)&&(b.outNeighbours.delete(c),c.inNeighbours.delete(b),d=!0),d}function d(b,c){return a(b)?b.outNeighbours.get(c):void 0}function e(a,b,c,e,f){function g(a,c){if(!c.visited){var e=this.reverse?d(c,this.vertex):d(this.vertex,c);f&&c.pin&&c.pin.parent&&c.pin.parent.connectorHub&&c.pin.parent.connectorHub.connectorType===f?i(e)&&b(c):i(e)&&h.push(c)}}var h=[];e=e||[],h.push(a);for(var i="function"==typeof e?e:function(a){return-1==e.indexOf(a)},j=0,k=!0;k&&j<h.length;)h[j]&&(h[j].visited||(k=b(h[j]),h[j].outNeighbours.forEach(g,{vertex:h[j],reverse:!1}),c&&h[j].inNeighbours.forEach(g,{vertex:h[j],reverse:!0}),h[j].visited=!0)),++j;for(j=0;j<h.length;++j)h[j].visited=!1}var f=new Set;return{createVertex:function(){var a={inNeighbours:new Map,outNeighbours:new Map,visited:!1};return f.add(a),a},remove:function(a){var b=!1;return a&&0===a.inNeighbours.size&&0===a.outNeighbours.size&&(f.delete(a),b=!0),b},connect:b,disconnect:c,split:function(b,c,d){var e=!1;return a(b)&&b.outNeighbours.has(c)&&a(d)&&(e=!0,this.disconnect(b,c),this.connect(b,d),this.connect(d,c)),e},adjacent:function(b,c){return a(b)&&a(c)&&b.outNeighbours.has(c)},neighbours:function(b){var c=[];return a(b)&&b.outNeighbours.forEach(function(a,b){c.push(b)}),c},pathExists:function(b,c,d){var f=!1;return a(b)&&a(c)&&e(b,function(a){return a==c&&(f=!0),!f},!1,d),f},connected:function(a,b){var c=[];return e(a,function(a){return c.push(a),!0},!1,b),c},outDegree:function(b){return a(b)?b.outNeighbours.size:void 0},inDegree:function(b){return a(b)?b.inNeighbours.size:void 0},contains:a,traverse:function(a,b,c){e(a,b,!1,c)},getEdge:d,undirected:{adjacent:function(b,c){return a(b)&&a(c)&&(b.outNeighbours.has(c)||c.outNeighbours.has(b))},degree:function(b){return a(b)?b.outNeighbours.size+b.inNeighbours.size:void 0},pathExists:function(b,c,d){var f=!1;return a(b)&&a(c)&&e(b,function(a){return a==c&&(f=!0),!f},!0,d),f},traverse:function(a,b,c){e(a,b,!0,c)},connected:function(a,b,c){var d=[];return e(a,function(a){return d.push(a),!0},!0,b,c),d},neighbours:function(b){var c=[];return a(b)&&(b.outNeighbours.forEach(function(a,b){c.push(b)}),b.inNeighbours.forEach(function(a,b){-1===c.indexOf(b)&&c.push(b)})),c}}}}return a("default",c),{setters:[],execute:function(){}}}),a.register("7a",["79"],function(a,b){"use strict";function c(){function a(a){return a}function b(a){return a}function c(){return n.createVertex()}function e(b){return n.remove(a(b))}function f(a,b){var c={};return h(a,b,c)?c:null}function g(a){return o.has(a)?i(a):void 0}function h(b,c,d){var e=!1,f=a(b),g=a(c);if(d&&f&&g&&!o.has(d)){var h=n.getEdge(f,g);h||(n.connect(f,g),h=n.getEdge(f,g)),h&&(h.connectionInfo||(h.connectionInfo={links:new Set}),h.connectionInfo.links.add(d),o.set(d,h),e=!0)}return e}function i(a){var b=void 0,c=o.get(a);return c&&function(){b=[],c.connectionInfo.links.delete(a),o.delete(a);var d=c.from,e=c.to;0===c.connectionInfo.links.size&&n.disconnect(c.from,c.to),b.push([]);var f=!1;n.undirected.traverse(d,function(a){return b[0].push(a),a==e&&(f=!0),!0}),f||(b.push([]),n.undirected.traverse(e,function(a){return b[1].push(a),!0}))}(),b}function j(a){var b=o.get(a);return b?{from:b.from,to:b.to}:void 0}function k(b){var c=void 0;return b&&function(){c=[];var d=a(b);n.undirected.neighbours(d,!0).forEach(function(a){var b=n.getEdge(d,a);b&&b.connectionInfo.links.forEach(function(a){c.push(a)}),(b=n.getEdge(a,d))&&b.connectionInfo.links.forEach(function(a){c.push(a)})})}(),c}function l(b){return n.undirected.neighbours(a(b))}function m(b,c,d){var e=a(b),g=a(c),h=a(d),j=n.getEdge(e,h)||n.getEdge(h,e),k=n.getEdge(h,g)||n.getEdge(g,h);if(e!==h&&g!==h&&j&&k&&2===(j==k?j.connectionInfo.links.size:j.connectionInfo.links.size+k.connectionInfo.links.size)&&n.undirected.degree(h)===(j===k?1:2)){var l={removedLinks:[],newLink:null};return j.connectionInfo.links.forEach(function(a){i(a),l.removedLinks.push(a)}),j!==k&&k.connectionInfo.links.forEach(function(a){i(a),l.removedLinks.push(a)}),l.newLink=f(e,g),l}}var n=d(),o=new Map;return{createTerminal:c,removeTerminal:e,createLink:f,removeLink:g,connected:function(b){return 0!==n.undirected.degree(a(b))},numberOfConnections:function(b){return n.undirected.degree(a(b))},getTerminalsConnectedToTerminal:function(b,c,d){var e=[],f=new Map;c.forEach(function(a){if(-1==e.indexOf(a)){e.push(a);var b=o.get(a);f.set(b,(f.get(b)||0)+1)}});var g=[];return f.forEach(function(a,b){b.connectionInfo.links.size==a&&g.push(b)}),n.undirected.connected(a(b),g,d)},getLinkTerminals:j,merge:m,neighbours:l,forEachConnectedTerminal:function(c,d,e){var f=void 0;e&&(f=function(a){var b=!1;return a.connectionInfo.links.forEach(function(a){b=b||e(a)}),b});var g=a(c);g&&n.undirected.traverse(g,function(a){return d(b(a)),!0},f)},getConnectedLinks:k,forEachLink:function(b,c,d){var e=d?function(a){var b=!1;return a.connectionInfo&&a.connectionInfo.links&&a.connectionInfo.links.forEach(function(a){b=b||d(a)}),b}:function(){return!0},f=a(b);f&&n.undirected.traverse(f,function(a){return n.neighbours(a).forEach(function(b){var e=n.getEdge(a,b);e.connectionInfo&&e.connectionInfo.links&&e.connectionInfo.links.forEach(function(a){d&&!d(a)||c(a)})}),!0},e)}}}var d;return a("default",c),{setters:[function(a){d=a.default}],execute:function(){}}}),a.register("7b",["1d","1e"],function(a,b){"use strict";var c,d,e,f,g,h,i;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("ENetPriorities",e=Object.freeze({PRIORITY_USER_NAMED:2,PRIORITY_CONNECTOR_NAMED:1,PRIORITY_AUTO_NAMED:0})),a("ENetPriorities",e),f=function(){function a(b){c(this,a),this.objects=[],this.name=b.name,this.priority=b.priority,this.useInitialConditions=void 0!==b.useInitialConditions&&b.useInitialConditions,this.initialConditions=void 0!==b.initialConditions?b.initialConditions:"0",this.useNodeset=void 0!==b.useNodeset&&b.useNodeset,this.nodeset=void 0!==b.nodeset?b.nodeset:"0",this.isDigital=!1,this.pinLogicFamilies=[]}return d(a,[{key:"removeObject",value:function(a){for(var b=-1,c=0;c<this.objects.length;++c){if(this.objects[c]===a){b=c;break}}-1!=b&&this.objects.splice(b,1)}}]),a}(),g=function a(b,d){c(this,a),this.pin=b,this.netName=d},h=function a(b,d){c(this,a),this.junction=b,this.netName=d},i=function(){function a(){c(this,a),this.ENetPriorities=e,this.nets=new Map,this.objects=new Map}return d(a,[{key:"createNet",value:function(a){var b=void 0;return this.nets.has(a.name.toLowerCase())?b=this.nets.get(a.name.toLowerCase()):(b=new f(a),this.nets.set(b.name.toLowerCase(),b)),b}},{key:"getNet",value:function(a){return this.nets.get(a.toLowerCase())}},{key:"netExists",value:function(a){return this.nets.has(a.toLowerCase())}},{key:"deleteNet",value:function(a){if(this.nets.has(a.toLowerCase())&&this.nets.get(a.toLowerCase()).objects.length>0)throw new Error("remove all net objects before deleting a net");this.nets.delete(a.toLowerCase())}},{key:"renameNet",value:function(a,b){var c=!1,d=void 0;return!this.netExists(b)&&this.netExists(a)?(d=this.getNet(a),d.name=b,d.priority=e.PRIORITY_USER_NAMED,this.nets.set(b.toLowerCase(),d),this.nets.delete(a.toLowerCase()),d.objects.forEach(function(a){a.netName=b}),c=!0):this.netExists(a)&&a.toLowerCase()===b.toLowerCase()&&a!==b&&(d=this.getNet(a),d.name=b,d.objects.forEach(function(a){a.netName=b}),c=!0),c}},{key:"numNets",value:function(){return this.nets.size}},{key:"forEachNet",value:function(a){this.nets.forEach(a)}},{key:"removeEmptyNets",value:function(){var a=[];this.nets.forEach(function(b){0===b.objects.length&&a.push(b.name)}),a.forEach(function(a){this.deleteNet(a)},this)}},{key:"addToNet",value:function(a,b){var c=void 0,d=this.getNet(a);if(!d)throw new Error("create a net before adding items to it");c=b.parent&&b.pinID?new g(b,a):new h(b,a),d.objects.push(c),this.objects.set(b,c)}},{key:"remove",value:function(a){var b=this.objects.get(a);if(b){this.objects.delete(a);this.getNet(b.netName).removeObject(b)}}},{key:"getNetForItem",value:function(a){var b=void 0,c=this.objects.get(a);c&&(b=c.netName);var d=void 0;return b&&(d=this.getNet(b)),d}},{key:"getNetNameForItem",value:function(a){var b=void 0,c=this.objects.get(a);return c&&(b=c.netName),b}},{key:"getNextAvailableDefaultNetName",value:function(){for(var a=1;!0===this.nets.has(a.toString());)++a;return a.toString()}}],[{key:"isValidNetname",value:function(a){return/^[^#\\:;,()[\]{}$'"%<>"&`=\/~!\s]+$/.test(a)}}]),a}(),a("default",i)}}}),a.register("7c",["10","3b","7a","29","50","7b","3d"],function(a,b){"use strict";function c(a,b){function c(a){var b=p(a);return D.getNetNameForItem(b)}function m(a){return B.get(a)}function n(a,b){var c=!1;if(!a)throw new Error("Cannot add an undefined terminal");if(B.has(a))throw new Error("Object already added to the netlist controller");if(a&&!B.has(a)){var d=E.createTerminal();d[b]=a,d.connectable=a,B.set(a,d),c=!0}return c}function o(a){var b=void 0,c=void 0,d=!1;return B.has(a)?b=B.get(a):B.has(a.connectable)&&(b=a),b&&(c=b.connectable,E.removeTerminal(b),B.delete(c),d=!0),d}function p(a){return a?a.connectable:void 0}function q(a){var b=u(a);return E.getLinkTerminals(b)}function r(a,c){var d=m(a);b.addStep({undo:function(){D.addToNet(c,d.connectable),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D})},redo:function(){D.remove(d.connectable),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D})}})}function s(a,d,e){var f=m(d),g=m(e),h=q(a),i=h.from===f;v(a),w(i?g:h.from,i?h.to:g,a),y(i?g:h.from,i?h.to:g,a);var j=0,k=0,l=!1;if(E.forEachConnectedTerminal(B.from,function(a){return j++,a===B.to&&(l=!0),!l}),!l){E.forEachConnectedTerminal(B.to,function(){k++});var n={netName:c(f),priority:D.getNet(c(f)).priority},o={netName:D.getNextAvailableDefaultNetName(),priority:D.ENetPriorities.PRIORITY_AUTO_NAMED};I(B.from,B.to,j<k?o:n,j<k?n:o)}b.addStep({undo:function(){var a=m(this.oldTerminalDescriptor),b=m(this.newTerminalDescriptor),c=q(this.wire),d=c.from===b;v(this.wire),w(d?a:c.from,d?c.to:a,this.wire)},redo:function(){var a=m(this.oldTerminalDescriptor),b=m(this.newTerminalDescriptor),c=q(this.wire),d=c.from===a;v(this.wire),w(d?b:c.from,d?c.to:b,this.wire)},newTerminalDescriptor:e,oldTerminalDescriptor:d,wire:a})}function t(a){return a.wire}function u(a){for(var b in A)if(A[b].has(a))return A[b].get(a)}function v(a){var b=E.removeLink(u(a)),c=null;if(A.wireLinks.has(a))c=A.wireLinks;else{if(!A.connectorLinks.has(a))throw new Error("Cannot delete a link that is not in a link map");c=A.connectorLinks}return c.set(a,null),b&&C.notifyListeners(l.NE_DISCONNECT,b),b}function w(a,b,c){var d=null;if(A.wireLinks.has(c))d=A.wireLinks;else{if(!A.connectorLinks.has(c))throw new Error("Add the link to the netlist information before trying to connect things with it");d=A.connectorLinks}if(null!==d.get(c))throw new Error("Object already acting as a connection");var e=E.createLink(a,b);e&&(e.wire=c,d.set(c,e),C.notifyListeners(l.NE_CONNECT,{from:a,to:b}))}function x(b,c){var d=t(b);A.wireLinks.has(d)&&void 0!==d.netName&&d.netName!=c&&a.changeNetName(d.contextGUID,d.templateGUID,c)}function y(b,d,e,f){var g=c(b),h=c(d),i=f||null;return void 0===g&&void 0===h?(i=i||D.getNextAvailableDefaultNetName(),G(b.connectable,{name:i,priority:D.ENetPriorities.PRIORITY_AUTO_NAMED}),G(d.connectable,{name:i,priority:D.ENetPriorities.PRIORITY_AUTO_NAMED})):void 0!==g&&void 0===h?(G(d.connectable,{name:g}),i=g):void 0===g&&void 0!==h?(G(b.connectable,{name:h}),i=h):function(){var a=D.getNet(g),c=D.getNet(h),d=D.ENetPriorities.PRIORITY_AUTO_NAMED;if("0"===g||"0"===h)i="0";else if(a.priority>c.priority)i=f||g,d=a.priority;else if(c.priority>a.priority)i=f||h,d=c.priority;else{if(!f&&g!==h&&a.priority!==D.ENetPriorities.PRIORITY_AUTO_NAMED)throw new Error("Updating nets and ran into a conflict without a specified resolution");i=f||g}E.forEachConnectedTerminal(b,function(a){H(a.connectable),G(a.connectable,{name:i,priority:d})}),E.forEachLink(b,function(a){x(a,i)}),D.removeEmptyNets()}(),void 0!==e.netName&&a.changeNetName(e.contextGUID,e.templateGUID,i),i}function z(a,c,d,f){var l=!0,m="initialConditions"==f;m?(a.onValueChange=function(a){this.valid&&(b.startAction(g.i18n.translate("Change net initial conditions").fetch()),R(d.netName,a),b.finishAction(!1))},a.oninput=function(a){e(this.$.multisimTextInput,a)},a.validator=function(a,b){b(h(a,g.i18n.translate("Transient IC").fetch()))}):(a.validator=function(a,b){var c=i(a,g.i18n.translate("ID").fetch());this.disabled||l||(c.valid&&(c=j(function(){return"0"!==a},g.i18n.translate('Connect a ground symbol for net "0"').fetch())),c.valid&&(c=j(function(){return!d.netName||a.toLowerCase()===d.netName.toLowerCase()||!D.netExists(a)},g.i18n.translate("Net name %1$s already in use.").fetch(a))),c.valid&&(c=j(function(){return k.isValidNetname(a)},g.i18n.translate('Invalid net name "%1$s"').fetch(a)))),l=!1,b(c)},a.onValueChange=function(a){if(this.valid){b.startAction(g.i18n.translate("net ID change.").fetch()),S.renameNet(d.netName,a);var e=q(d);c().sheetTemplateController.wiringController.ensureConnectorIDsMatchNetName(e.from.connectable,a),b.finishAction(!1)}},a.oninput=function(){}),a.value=m?P(d.netName):d.netName}var A={wireLinks:new Map,connectorLinks:new Map},B=new Map,C=d(),D=a.netlist,E=f(),F=function(a,d,e,f){var g=m(a),h=m(d);w(g,h,e);var i=c(g),j=c(h),k=y(g,h,e,f);return b.addStep({undo:function(){v(this.wire);var a=this.oldNet1Name;E.forEachLink(m(this.from),function(b){x(b,a)}),a=this.oldNet2Name,E.forEachLink(m(this.to),function(b){x(b,a)})},redo:function(){w(m(this.from),m(this.to),this.wire);var a=this.newNetName;E.forEachLink(m(this.from),function(b){x(b,a)})},from:a,to:d,wire:e,oldNet1Name:i,oldNet2Name:j,newNetName:k}),k},G=function(a,c){if(!1===D.netExists(c.name)){if(void 0===c.priority)throw new Error("Got into a state where something was not passed into netlistController.addToNet correctly.");b.addStep({undo:function(){D.deleteNet(this.netProperties.name),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D})},redo:function(){D.createNet(this.netProperties),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D})},netProperties:c}),D.createNet(c),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D})}D.addToNet(c.name,a),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D}),b.addStep({undo:function(){D.remove(this.netItem),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D})},redo:function(){D.addToNet(this.netName,this.netItem),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D})},netName:c.name,netItem:a})},H=function(a){var c=D.getNetNameForItem(a);D.remove(a),b.addStep({undo:function(){D.addToNet(this.netName,this.netItem),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D})},redo:function(){D.remove(this.netItem),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D})},netName:c,netItem:a}),D.getNet(c)&&0===D.getNet(c).objects.length&&b.addStep({undo:function(){D.createNet({name:this.netName,priority:this.priority,useInitialConditions:this.useInitialConditions,initialConditions:this.initialConditions,useNodeset:this.useNodeset,nodeset:this.nodeset}),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D})},redo:function(){D.deleteNet(this.netName),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D})},netName:c,priority:D.getNet(c).priority,useInitialConditions:D.getNet(c).useInitialConditions,initialConditions:D.getNet(c).initialConditions,useNodeset:D.getNet(c).useNodeset,nodeset:D.getNet(c).nodeset}),D.removeEmptyNets(),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D})},I=function(b,d,e,f){function g(b,d){E.forEachConnectedTerminal(b,function(b){if((c(b)!==d.netName||0===E.numberOfConnections(b))&&(H(b.connectable),E.numberOfConnections(b)>0)){G(b.connectable,{name:d.netName,priority:d.priority});var e=E.getConnectedLinks(b);e&&e.forEach(function(b){A.wireLinks.has(b.wire)&&b.wire.netName!==d.netName&&a.changeNetName(b.wire.contextGUID,b.wire.templateGUID,d.netName)})}})}g(b,e),g(d,f)},J=function(a,d){var e=u(a),f=E.getLinkTerminals(e),g=p(f.from),h=p(f.to),i=c(f.from),j=[],k=[],n=!1;if(E.forEachConnectedTerminal(f.from,function(a){return j.push(a),a===f.to&&(n=!0),!n},function(b){return b.wire!==a}),n||E.forEachConnectedTerminal(f.to,function(a){k.push(a)},function(b){return b.wire!==a}),v(a),!n){var o={netName:i,priority:D.getNet(i).priority},q={netName:i,priority:D.getNet(i).priority};d?d({netContents:j.map(function(a){return a.connectable}),nameInfo:o},{netContents:k.map(function(a){return a.connectable}),nameInfo:q}):j.length<k.length?o={netName:D.getNextAvailableDefaultNetName(),priority:D.ENetPriorities.PRIORITY_AUTO_NAMED}:q={netName:D.getNextAvailableDefaultNetName(),priority:D.ENetPriorities.PRIORITY_AUTO_NAMED},I(f.from,f.to,o,q)}var r=c(f.from),s=c(f.to);return b.addStep({undo:function(){var a=m(this.from);w(a,m(this.to),this.wire);var b=this.oldNetName;E.forEachLink(a,function(a){x(a,b)}),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D})},redo:function(){v(this.wire)},from:g,to:h,wire:a,newNet1Name:r,newNet2Name:s,oldNetName:i}),f},K=function(a){var b=D.getNet(a);if(b)return b.useNodeset},L=function(a){var b=D.getNet(a);if(b)return b.nodeset},M=function(a,c){var d=D.getNet(a);d&&(b.addStep({undo:function(){var a=D.getNet(this.netName);a&&(a.useNodeset=this.oldUseNodeset,C.notifyListeners(l.NE_PROPSCHANGED,{netName:this.netName,netlistController:S}))},redo:function(){var a=D.getNet(this.netName);a&&(a.useNodeset=this.newUseNodeset,C.notifyListeners(l.NE_PROPSCHANGED,{netName:this.netName,netlistController:S}))},netName:a,oldUseNodeset:d.useNodeset,newUseNodeset:c}),d.useNodeset=c,C.notifyListeners(l.NE_PROPSCHANGED,{netName:a,netlistController:S}))},N=function(a,c){var d=D.getNet(a);d&&(b.addStep({undo:function(){var a=D.getNet(this.netName);a&&(a.nodeset=this.oldNodeset,C.notifyListeners(l.NE_PROPSCHANGED,{netName:this.netName,netlistController:S}))},redo:function(){var a=D.getNet(this.netName);a&&(a.nodeset=this.newNodeset,C.notifyListeners(l.NE_PROPSCHANGED,{netName:this.netName,netlistController:S}))},netName:a,oldNodeset:d.nodeset,newNodeset:c}),d.nodeset=c,C.notifyListeners(l.NE_PROPSCHANGED,{netName:a,netlistController:S}))},O=function(a){var b=D.getNet(a);if(b)return b.useInitialConditions},P=function(a){var b=D.getNet(a);if(b)return b.initialConditions},Q=function(a,c){var d=D.getNet(a);d&&(b.addStep({undo:function(){var a=D.getNet(this.netName);a&&(a.useInitialConditions=this.oldUseInitialConditions,C.notifyListeners(l.NE_PROPSCHANGED,{netName:this.netName,netlistController:S}))},redo:function(){var a=D.getNet(this.netName);a&&(a.useInitialConditions=this.newUseInitialConditions,C.notifyListeners(l.NE_PROPSCHANGED,{netName:this.netName,netlistController:S}))},netName:a,oldUseInitialConditions:d.useInitialConditions,newUseInitialConditions:c}),d.useInitialConditions=c,C.notifyListeners(l.NE_PROPSCHANGED,{netName:a,netlistController:S}))},R=function(a,c){var d=D.getNet(a);d&&(b.addStep({undo:function(){var a=D.getNet(this.netName);a&&(a.initialConditions=this.oldInitialConditions,C.notifyListeners(l.NE_PROPSCHANGED,{netName:this.netName,netlistController:S}))},redo:function(){var a=D.getNet(this.netName);a&&(a.initialConditions=this.newInitialConditions,C.notifyListeners(l.NE_PROPSCHANGED,{netName:this.netName,netlistController:S}))},netName:a,oldInitialConditions:d.initialConditions,newInitialConditions:c}),d.initialConditions=c,C.notifyListeners(l.NE_PROPSCHANGED,{netName:a,netlistController:S}))},S={get listener(){return C},addWire:function(a){if(A.wireLinks.has(a))throw new Error("Wire was already added to the netlist");A.wireLinks.set(a,null),b.addStep({undo:function(){A.wireLinks.delete(this.wire)},redo:function(){A.wireLinks.set(this.wire,null)},wire:a})},removeWire:function(a){if(null!==u(a))throw new Error("Disconnect before removing from the netlist");A.wireLinks.delete(a),b.addStep({undo:function(){A.wireLinks.set(this.wire,null)},redo:function(){A.wireLinks.delete(this.wire)},wire:a})},addConnectorLink:function(a){if(A.connectorLinks.has(a))throw new Error("Wire was already added to the netlist");A.connectorLinks.set(a,null),b.addStep({undo:function(){A.connectorLinks.delete(this.connectorLink)},redo:function(){A.connectorLinks.set(this.connectorLink,null)},wire:a})},removeConnectorLink:function(a){if(null!==u(a))throw new Error("Disconnect before removing from the netlist");A.connectorLinks.delete(a),b.addStep({undo:function(){A.connectorLinks.set(this.connectorLink,null)},redo:function(){A.connectorLinks.delete(this.connectorLink)},connectorLink:a})},addPin:function(a){n(a,"pin")&&b.addStep({undo:function(){o(this.pin)},redo:function(){n(this.pin,"pin")},pin:a})},addJunction:function(a,c){n(a,"junction")&&(c&&G(a,c),b.addStep({undo:function(){o(this.junction)},redo:function(){n(this.junction,"junction")},junction:a}))},removePin:function(a){o(a)&&(D.remove(a),b.addStep({undo:function(){n(this.pin,"pin")},redo:function(){o(this.pin)},pin:a}))},removeJunction:function(a){o(a)&&(D.remove(a),b.addStep({undo:function(){n(this.junction,"junction")},redo:function(){o(this.junction)},junction:a}))},connect:F,disconnect:J,getNetNameForPin:function(a){return D.getNetNameForItem(a)},getNetNameForJunction:function(a){return D.getNetNameForItem(a)},getNumberOfConnectionsForJunction:function(a){var b=m(a),c=E.getConnectedLinks(b);return c?c.length:0},getComponentPinsConnectedToTerminal:function(a,b,c){return E.getTerminalsConnectedToTerminal(a,b.map(function(a){return u(a)}),c).map(function(a){return a.pin&&a.pin.parent&&(void 0===a.pin.parent.connectorHub||a.pin.parent.connectorHub.connectorType===c)?a.pin:void 0}).filter(function(a){return a})},forEachWire:function(a,b){var c=m(a);c&&E.forEachLink(c,function(a){a.wire&&A.wireLinks.has(a.wire)&&b(a.wire)},function(a){return A.wireLinks.has(a.wire)})},getTerminal:m,changeWireTerminal:s,addSwappedJunctionUndoRedo:r,getWireTerminals:q,forEachConnectedTerminal:function(a,b,c){E.forEachConnectedTerminal(a,b,c)},getWires:function(a){var b=void 0,c=E.getConnectedLinks(m(a));return c&&(b=[],c.forEach(function(a){a.wire&&A.wireLinks.has(a.wire)&&b.push(a.wire)})),b},renameNet:function(c,d){function e(b,c){A.wireLinks.forEach(function(d,e){e.netName===b&&a.changeNetName(e.contextGUID,e.templateGUID,c)})}var f=D.getNet(c).priority;D.renameNet(c,d)&&(e(c,d),C.notifyListeners(l.NE_NETSCHANGED,{netlist:D}),b.addStep({undo:function(){this.netlist.renameNet(this.newName,this.oldName),this.netlist.getNet(this.oldName).priority=this.oldNamePriority,e(this.newName,this.oldName),C.notifyListeners(l.NE_NETSCHANGED,{netlist:this.netlist})},redo:function(){this.netlist.renameNet(this.oldName,this.newName),e(this.oldName,this.newName),C.notifyListeners(l.NE_NETSCHANGED,{netlist:this.netlist})},oldName:c,oldNamePriority:f,newName:d,netlist:D}))},forAllWires:function(a,b){A.wireLinks.forEach(function(c,d){d.netName===a&&b(d)})},useDCNodeset:K,getDCNodeset:L,netShouldUseNodeset:M,changeNetNodeset:N,useTransientInitialConditions:O,getTransientInitialConditions:P,netShouldUseInitialConditions:Q,changeNetInitialConditions:R,attachModifyInput:z};return S}var d,e,f,g,h,i,j,k,l;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.switchEnteredChars},function(a){f=a.default},function(a){g=a.default},function(a){h=a.basicNumberValidate,i=a.basicTextValidate,j=a.customValidate},function(a){k=a.default},function(a){l=a.default}],execute:function(){}}}),a.register("42",["28"],function(a,b){"use strict";function c(a,b,c){var h=null,i=function(a,b){var i=d();f.set(i,c),e.postMessage({code:""+a,parameters:b,ID:i}),h=window.setTimeout(function(){g.delete(i),f.get(i)({error:"Maximum execution time exceeded"}),f.delete(i),e&&e.terminate(),e=null},1e5),g.set(i,h)};e?i(a,b):(e=new Worker(window.multisim.rootFolder+"utilities/sandboxworker.js"),e.addEventListener("message",function(c){if("ready"==c.data)i(a,b);else{var d=c.data.ID;clearTimeout(g.get(d)),f.get(d)(c.data.result),g.delete(d),f.delete(d)}}),e.addEventListener("error",function(a){console.log(a),e&&e.terminate(),e=null}))}var d,e,f,g;return a("default",c),{setters:[function(a){d=a.default}],execute:function(){e=null,f=new Map,g=new Map}}}),a.register("7d",["42"],function(a,b){"use strict";function c(a,b){function c(a){if(a.designComponent){var b=a.designComponent.getModelBlueprint(a.activeModelID);b&&b.animationVariables&&b.animationVariables.length&&o.push({instance:a,functionResult:null})}}function e(a){var c=o.filter(function(b){return b.instance==a});o=o.filter(function(b){return b.instance!=a}),c.forEach(function(a){a.signalGenerator&&b.remove(a.signalGenerator)})}function f(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=void 0!==b[c].value?b[c].value:b[c].string)}function g(b,c){0===b.partUpdateQueue&&0===b.scriptResultQueue.length&&o.forEach(function(e){var g=e.instance;g.excludedFromSimulation||function(){var h=g.designComponent.getModelBlueprint(g.activeModelID),i=g.refdesString,j={};g.modelInstanceData&&g.activeModelID&&g.modelInstanceData[g.activeModelID]&&f(j,g.modelInstanceData[g.activeModelID]),g.modelDefinitionData&&g.activeModelID&&g.modelDefinitionData[g.activeModelID]&&f(j,g.modelDefinitionData[g.activeModelID]),h.animationVariables.forEach(function(b){var c=a.getLastValue(b+i);j[b.split(":")[0]]=c});var k=g.designComponent.getSymbolBlueprint(g.activeSymbolID);k&&(k.animateFunction||k.symbolScript)&&(b.partUpdateQueue++,k.animateFunction?d(k.animateFunction,j,function(a){e.functionResult={animation:a},a.error||b.scriptResultQueue.push(e),0===--b.partUpdateQueue&&c&&c()}):d(k.symbolScript,{parameters:j,reset:!1},function(a){e.functionResult=a,a.error||b.scriptResultQueue.push(e),0===--b.partUpdateQueue&&c&&c()}))}()})}function h(){q.scriptResultQueue.forEach(function(a){if(a.functionResult.animation){var c=p.sheets.reduce(function(a,b){return a.concat(b.viewControllers)},[]).filter(function(b){return b.context.guid==a.instance.contextGUID})[0]||null,d={contextGUID:a.instance.contextGUID,templateGUID:a.instance.templateGUID,styles:a.functionResult.animation};c&&c.animatedComponentUpdated(d)}a.functionResult.audio&&a.functionResult.audio.signal&&(a.signalGenerator=a.signalGenerator||b.createSignalGenerator(),a.signalGenerator&&(a.signalGenerator.frequency=a.functionResult.audio.signal.frequency,a.functionResult.audio.signal.on?a.signalGenerator.on():a.signalGenerator.off()))}),q.scriptResultQueue=[]}function i(a){a.finalFrame?(q={partUpdateQueue:0,scriptResultQueue:[]},g(q,h)):0===q.partUpdateQueue&&q.scriptResultQueue.length&&h()}function j(){a.dataUpdateListeners.removeListener(a.EDataUpdateEvents.AddData,m)}function k(a){a.addListener(i)}function l(a){a.removeListener(i)}function m(){g(q,null)}function n(){q={partUpdateQueue:0,scriptResultQueue:[]}}var o=[],p=null,q={partUpdateQueue:0,scriptResultQueue:[]};return a.dataUpdateListeners.addListener(a.EDataUpdateEvents.Initialized,n),a.dataUpdateListeners.addListener(a.EDataUpdateEvents.AddData,m),{destroyAnimatedPartController:j,setDesignController:function(a){p=a},attachToAnimationController:k,detachFromAnimationController:l,handleNewInstance:c,handleRemoveInstance:e}}var d;return a("default",c),{setters:[function(a){d=a.default}],execute:function(){}}}),a.register("7e",[],function(a,b){"use strict";function c(a){function b(){o()}function c(){}function d(){a.dataUpdateListeners.removeListener(a.EDataUpdateEvents.AddData,b)}var e=[],f=new Set,g=null,h="rgb(53, 105, 146)",i="rgb(67, 132, 183)",j="rgb(88, 177, 252)",k=function(a){a&&(f.has(a)||f.add(a))},l=function(a){a&&f.has(a)&&f.delete(a)},m=function(a,b,c){a.forEach(function(a){a.style.stroke=b,c&&(a.style.fill=b)})},n=function(){var a=g?g():void 0;a&&(e.length=0,f.forEach(function(b){var c=b.getAttachedNet(a);c&&c.objects.forEach(function(b){if(b&&b.junction){var d=b.junction,f=window.document.querySelectorAll(".juncPath"+d.templateGUID);f&&f.length>0&&(c.isDigital&&void 0!==c.pinLogicFamilies&&c.pinLogicFamilies.length>0?("interactive"===a.simulationController.activeAnalysis&&e.push({instance:d,net:c,setFill:!0,paths:Array.prototype.slice.call(f)}),m(f,i,!0)):m(f,"",!0))}});var d=window.document.querySelectorAll(".wirePath"+b.templateGUID);c&&c.isDigital&&void 0!==c.pinLogicFamilies&&c.pinLogicFamilies.length>0?d&&d.length>0&&("interactive"===a.simulationController.activeAnalysis&&e.push({instance:b,net:c,setFill:!1,paths:Array.prototype.slice.call(d)}),m(d,i,!1)):m(d,"",!0)}))},o=function(){e.forEach(function(b){var c=b.net,d=a.getLastValue("$"+c.name);if(b.lastValue!=d){b.lastValue=d;var e=b.paths;0==d?m(e,h,b.setFill):1==d?m(e,j,b.setFill):m(e,i,b.setFill)}})},p=function(a,b){g=b,a.addListener(o)},q=function(a){a.removeListener(o)};return a.dataUpdateListeners.addListener(a.EDataUpdateEvents.Initialized,c),a.dataUpdateListeners.addListener(a.EDataUpdateEvents.AddData,b),{destroyAnimatedWiresController:d,attachToAnimationController:p,detachFromAnimationController:q,handleNewInstance:k,handleRemoveInstance:l,updateAllWires:n}}return a("default",c),{setters:[],execute:function(){}}}),a.register("7f",["2d","15","3c","29","2f","30","22","62","80","81","82","33","23"],function(a,b){"use strict";function c(a,b){function c(a){b.probeData.probes.add(a),setTimeout(function(){ga(a)},0)}function d(a,c,d,e){var f=c;b.probeData.netlistVariableToProbeInstances.has(f)||b.probeData.netlistVariableToProbeInstances.set(f,new Map),b.probeData.netlistVariableToProbeInstances.get(f).set(a,d),b.probeData.probeInstanceToNetlistVariables.has(a)?b.probeData.probeInstanceToNetlistVariables.get(a).push(f):b.probeData.probeInstanceToNetlistVariables.set(a,[f]),a.signalDisplayName=e,a.mapDisplayNameToSignalTypes.set(e,d),a.mapSimulationVariableToDisplayName.set(f,e),a.mapDisplayNameToSimulationVariable.set(e,f)}function m(a){b.probeData.probes.delete(a),C(a),setTimeout(function(){if(ga(a),a.streamToMeasurementsLive){a.streamToMeasurementsLive=!1;if(!b.probeController.getProbes().find(function(a){return b.probeController.getProbeType(a)===l.PROBE_VOLTAGE&&a.streamToMeasurementsLive}))return void b.multisimDeviceController.disconnect()}},0)}function C(a){var c=b.probeData.probeInstanceToNetlistVariables.get(a);void 0!==c&&(c.forEach(function(c){b.probeData.netlistVariableToProbeInstances.get(c).delete(a),0===b.probeData.netlistVariableToProbeInstances.get(c).size&&b.probeData.netlistVariableToProbeInstances.delete(c)}),b.probeData.probeInstanceToNetlistVariables.delete(a)),a.signalDisplayName=void 0}function D(a){var c=[];return b.probeData.netlistVariableToProbeInstances.has(a)&&b.probeData.netlistVariableToProbeInstances.get(a).forEach(function(a,b){b.getExternalDataType()===b.EXTERNAL_DATA_TYPE.EDT_STREAM&&b.connectionState!==x.CONNECTED||c.push(b)}),c}function E(){var a=[];return b.probeData.probes.forEach(function(b){a.push(b)}),a}function F(a){var c=z?z():null,d="";if(c&&b){var e=c.sheetTemplateController.sheetTemplate.getObject(a.templateGUID);e&&(d=e.probeType)}return d}function G(a){var c=z?z():null,d=!0;if(c&&b){d=!c.sheetTemplateController.sheetTemplate.getObject(a.templateGUID).disabled}return d}function H(a){var c=[];return b.probeData.probeInstanceToNetlistVariables.has(a)&&(c=b.probeData.probeInstanceToNetlistVariables.get(a).slice()),c}function I(a){var c=[];return b.probeData.netlistVariableToProbeInstances.forEach(function(b,d){a&&d.match(/_@DATA/)||c.push(d)}),c}function J(a,c){var d=b.probeData.netlistVariableToProbeInstances.get(c);return d&&d.get(a)}function K(){b.probeData.netlistVariableToProbeInstances.clear(),b.probeData.probeInstanceToNetlistVariables.clear(),b.probeData.probesVarRefreshDisabled.clear()}function L(a,b,c){var d=b.getDirection();return d==f.D_UNKNOWN&&(d=c.directionFromEndPoint({x:b.connectionX,y:b.connectionY}))==f.D_UNKNOWN&&(d=b.component.getDirectionForPinConnectPoint({x:b.connectionX,y:b.connectionY})),a.reversed==(d==f.D_RIGHT||d==f.D_DOWN)}function M(a,b){var c=b.getObject(a.templateGUID);return!((c?c.probeType:"")===l.PROBE_REFERENCE||!a.probeRefs)&&1===a.probeRefs.length}function N(a,c,e,f){C(a);var g=A.getPinOnlyNets(b.netlist);f||(f=A.mapNetInfoToPins(g,e));var h=function(a){return a.probeType==l.PROBE_VOLTAGE||a.probeType==l.PROBE_VOLTAGE_CURRENT},k=function(a){return a.probeType==l.PROBE_CURRENT||a.probeType==l.PROBE_VOLTAGE_CURRENT},m=function(a){return a.probeType==l.PROBE_EXPRESSION},n=function(a){return a.probeType==l.PROBE_DATA},o=function(a){return a.probeType==l.PROBE_DIGITAL},p=function(a){var e=c.getObject(a.templateGUID);if(!e.disabled&&h(e)){var f=c.objectLookup.getObjectsAtPoint(e.matrix.e,e.matrix.f),g=f.filter(function(a){return j(a)});if(g.length>0){var i=b.findInstance(a.contextGUID,g[0].templateGUID);if(!i)throw new Error("wireInstance is "+String(i));var k="0"===i.netName?"0":"$"+i.netName.toLowerCase(),l=a.probeID+": V("+i.netName+")";if(M(a,c)){var m=a.probeRefs[0],n=c.getObject(m.templateGUID),o=c.objectLookup.getObjectsAtPoint(n.matrix.e,n.matrix.f),p=o.filter(function(a){return j(a)});if(p.length>0){var q=b.findInstance(m.contextGUID,p[0].templateGUID);if(!q)throw new Error("referenceWireInstance is "+String(q));k+="0"===q.netName?"":"-$"+q.netName.toLowerCase(),l+="-V("+q.netName+")"}}d(a,k,B.voltage,l)}}},u=function(a){var h=c.getObject(a.templateGUID);if(e&&!h.disabled&&k(h)){var l=c.objectLookup.getObjectsAtPoint(h.matrix.e,h.matrix.f),m=l.filter(function(a){return j(a)}),n=l.filter(function(c){var d=!1;if(i(c)){var e=b.findInstance(a.contextGUID,c.component.templateGUID);if(!e)throw new Error("componentInstance is "+String(e));d=!e.connectorHub}return d}),o=null,p=null;if(n.length>0){var q=b.findInstance(a.contextGUID,n[0].component.templateGUID);if(!q)throw new Error("componentInstance is "+String(q));var r=b.netlistController.getWires(q.getPinInstance(n[0].name));if(!r)throw new Error("pinWires is "+String(r));o=r.length?r[0]:null,p=o?c.getObjectAsTemplateWire(o.templateGUID):null;var s=A.createExpressionForPin(f,q,n[0],g,L(a,n[0],p),e.netlistOutOfDate);d(a,s.spiceExpression,B.current,a.probeID+": "+s.displayExpression)}else if(m.length>0){o=b.findInstance(a.contextGUID,m[0].templateGUID),p=o?c.getObjectAsTemplateWire(o.templateGUID):null;var t=A.createExpressionForWire(f,p,o,g,{x:h.matrix.e,y:h.matrix.f},a.reversed,b,e.netlistOutOfDate);d(a,t.spiceExpression,B.current,a.probeID+": "+t.displayExpression)}}},v=function(a){var b=c.getObject(a.templateGUID);if(n(b)){var e=a.probeID+": "+a.getExternalDataCurrentChannelName(),f="";switch(a.source){case y.file:f=a.probeID+"_@DATA";break;case y.url:case y.usb:case y.network:var g=a.getActiveChannel(),h=a.getDisplayVariableName();a.connectionState===x.CONNECTED&&g&&h&&(f=h+"-"+g.instrument+"-"+g.channel)}f&&d(a,f,a.getExternalDataSignalType(),e)}},w=function(a){var f=c.getObject(a.templateGUID);e&&!f.disabled&&m(f)&&function(){var c=r(a.expression),e=void 0!==a.transpiledExpression?a.transpiledExpression:c,f=s(b),g=function(a,c){var d=b.probeController.getNetlistVariablesForProbe(a);if(d&&d.length>0)return d[c&&2===d.length?1:0]},h=function(a,b){var c=g(a,b);if(c)return a.mapSimulationVariableToDisplayName.get(c)},i=t(c,f,g,h);if(a.displayExpression=i.displayExpression,e!==c&&(i=t(e,f,g,h)),a.spiceExpression=q(i.spiceExpression),a.displayExpression&&a.displayExpression.length>0&&a.spiceExpression&&a.spiceExpression.length>0){var j=a.probeID+": "+a.displayExpression;d(a,a.spiceExpression,B.expression,j)}}()},z=function(a){var e=c.getObject(a.templateGUID);if(!e.disabled&&o(e)){var f=c.objectLookup.getObjectsAtPoint(e.matrix.e,e.matrix.f),g=f.filter(function(a){return j(a)});if(g.length>0){var h=b.findInstance(a.contextGUID,g[0].templateGUID);if(!h)throw new Error("wireInstance is "+String(h));var i="0"===h.netName?"0":"$"+h.netName.toLowerCase(),k=a.probeID+": D("+h.netName+")";d(a,i,B.digital,k)}}};!1===b.probeData.probesVarRefreshDisabled.has(a)&&(p(a),u(a),w(a),v(a),z(a))}function O(a){K();var c=z?z():null;c&&b&&function(){var d=A.getPinOnlyNets(b.netlist),e=A.mapNetInfoToPins(d,a);b.probeData.probes.forEach(function(b){c.sheetTemplateController.sheetTemplate.getObject(b.templateGUID).probeType!=l.PROBE_EXPRESSION&&N(b,c.sheetTemplateController.sheetTemplate,a,e)}),b.probeData.probes.forEach(function(b){c.sheetTemplateController.sheetTemplate.getObject(b.templateGUID).probeType==l.PROBE_EXPRESSION&&N(b,c.sheetTemplateController.sheetTemplate,a,e)})}()}function P(){var a=z?z():null,b=[];if(a){a.sheetTemplateController.design.getAllProbeInstances().forEach(function(c){var d=a.sheetTemplateController.sheetTemplate.getObject(c.templateGUID);d.probeType!==l.PROBE_VOLTAGE&&d.probeType!==l.PROBE_VOLTAGE_CURRENT||b.push({varID:""+c.probeID.toLowerCase(),value:"v(#"+c.probeID+")",displayText:"v(#"+c.probeID+")",descriptiveText:"Voltage at "+c.probeID,type:"probe",disabled:d.disabled}),d.probeType!==l.PROBE_CURRENT&&d.probeType!==l.PROBE_VOLTAGE_CURRENT||b.push({varID:""+c.probeID.toLowerCase(),value:"i(#"+c.probeID+")",displayText:"i(#"+c.probeID+")",descriptiveText:"Current through "+c.probeID,type:"probe",disabled:d.disabled}),d.probeType===l.PROBE_DIGITAL&&b.push({varID:""+c.probeID.toLowerCase(),value:"v(#"+c.probeID+")",displayText:"v(#"+c.probeID+")",descriptiveText:"Digital at "+c.probeID,type:"probe",disabled:d.disabled})});a.sheetTemplateController.design.netlist.forEachNet(function(a){var c={length:0};"0"!==a.name&&(c=a.objects.filter(function(a){return a.hasOwnProperty("pin")&&a.pin.parent instanceof w}).map(function(a){return a.pin})),("0"===a.name||c.length>0)&&b.push({varID:""+a.name.toLowerCase(),value:"v("+a.name+")",displayText:"v("+a.name+")",descriptiveText:"Voltage on net "+a.name,type:"net"})})}return v.variables=b,b}function Q(a){var b={valid:!0},c=a.toLowerCase();return u.expressions.find(function(a){return a.value===c&&"constant"===a.type})||(b=n(h.i18n.translate("Unknown constant: %1s").fetch(a))),b}function R(a,b){var c={valid:!0},d=a.toLowerCase();if("v"!==d&&"i"!==d){var e=u.expressions.find(function(a){return a.value.slice(0,-1)===d&&"function"===a.type});e?e.numParams!=b&&(c=n(h.i18n.translate("Wrong number of arguments: %1s").fetch(e.displayText))):c=n(h.i18n.translate("Invalid function name: %1s").fetch(a))}return c}function S(a,b,c){var d={valid:!0},e=a.toLowerCase(),f=v.variables.filter(function(a){return a.varID===e&&"probe"===a.type});return f.length?(f.find(function(a){return a.value[0].toLowerCase()===b.toLowerCase()})||(d=n(h.i18n.translate("Mismatched probe type with function: %1s").fetch(b))),!0===c&&f.find(function(a){return!0===a.disabled})&&(d=n(h.i18n.translate('Probe "%1s" is disabled').fetch(a)))):d=n(h.i18n.translate("Unknown probe name: %1s").fetch(a)),d}function T(a,b,c){var d={valid:!0},e=2,f=2,g=u.expressions.find(function(b){return b.value===a});if(g?c?("+"!==a&&"-"!==a&&"!"!==a&&(d=n(h.i18n.translate("%1s cannot be used as a unary operator").fetch(a))),e=1,f=1):(e=parseInt(g.numParams,10),f=parseInt(g.numParams,10)):d=n(h.i18n.translate("Unknown operator: %1s").fetch(a)),b<e)d=n(h.i18n.translate("Missing second operand for operator %1s").fetch(a));else if(b>f){if(b>2)throw new Error("Too many values for operator");d=n(h.i18n.translate("Too many values for operator %1s").fetch(a))}return d}function U(a,b){var c={valid:!0};0===a.length&&(c=n(h.i18n.translate("Empty voltage/current expression").fetch()));var d=a.toLowerCase();return"i"===b.toLowerCase()&&(c=n(h.i18n.translate("Current only available through probes, use I(#PROBENAME)").fetch())),v.variables.find(function(a){return a.varID===d&&"net"===a.type})||(c=n(h.i18n.translate("Unknown net name: %1s").fetch(a))),c}function V(a){var c=void 0;b&&a&&b.probeController&&b.simulationController&&(c=b.getContextsOfTemplate(a.sheetGUID)),c&&function(){var d=[];c.forEach(function(c){a.getTemplateProbes().forEach(function(a){var d=b.findInstance(c,a.templateGUID);if(!d)throw new Error("probeInstance is "+String(d));d.DigitalDisplayOffset=void 0}),a.getTemplateProbes().filter(function(a){return a&&a.probeType===l.PROBE_DIGITAL&&!a.disabled}).forEach(function(a){var e=b.findInstance(c,a.templateGUID);if(!e)throw new Error("probeInstance is "+String(e));d.push(e)})});var e=new Map,f=0;d.forEach(function(a){var b=a.plot.color.r+","+a.plot.color.g+","+a.plot.color.b;if(e.has(b)){var c=e.get(b);a.indexInColorGroup=c.probes.length,c.probes.push(a)}else e.set(b,{groupNumber:f,probes:[a]}),a.indexInColorGroup=0,f++});var g=1,h=function(a){return g*(a-1)},i=h(d.length);e.forEach(function(a){a.probes.sort(function(a,b){return-a.probeID.localeCompare(b.probeID)}),a.probes.forEach(function(a){a.DigitalDisplayOffset=i,i-=g})})}()}function W(a){var c=null;return v.variables=this.createProbeVariableList(),b.probeData.probes.size>0&&b.probeData.probes.forEach(function(b){if(null===c||c.valid){var d=a.getObject(b.templateGUID);d.probeType===l.PROBE_EXPRESSION&&(c=p(b.expression,R,Q,S,U,T,d),c.valid?b.transpiledExpression=o(b.expression,c):(b.transpiledExpression=void 0,c.probeInstance=b,c.templateProbe=d))}}),null===c&&(c={valid:!0}),c}function X(b,c){if(b.probeID!=c){var d=z?z():null;d&&(a.startAction(h.i18n.translate("probe ID change.").fetch()),a.addStep({undo:ka,redo:la,oldProbeID:b.probeID,newProbeID:c,probeInstance:b,design:d.sheetTemplateController.design}),ja(b,c,d.sheetTemplateController.design),a.finishAction(!1))}}function Y(a,b){var c=ha.resourceInfo.filter(function(b){return"probe"==b.type&&b.additionalData.probeType===a});if(c.length>0){var d=c[0].icon;ha.loadSVGResource(d,function(a){a&&b(a.cloneNode(!0))})}}function Z(a){var c=b.probeData.probes.size>0;return c&&(c=!1,b.probeData.probes.forEach(function(b){var d=a.getObject(b.templateGUID);c=c||!d.disabled&&d.probeType!==l.PROBE_REFERENCE})),c}function $(a){var c=b.probeData.probes.size>0;return c&&(c=!1,b.probeData.probes.forEach(function(b){var d=a.getObject(b.templateGUID);c=c||!d.disabled&&d.probeType==l.PROBE_DATA})),c}function _(){return b.globalProbeSetting}function aa(a){b.globalProbeSetting=a}function ba(){var a=[],c=z().sheetTemplateController.sheetTemplate;return b.probeData.probes.forEach(function(b){c.getObject(b.templateGUID).probeType===l.PROBE_REFERENCE&&a.push(b)}),a}function ca(a){a=a||[];var c=null,d=ia.map(function(a){return{color:a,count:0}});return b.probeData.probes.forEach(function(a){var b=e.find(d,function(b){return e.isEqual(b.color,a.plot.color)});b&&b.count++}),a.forEach(function(a){var b=e.find(d,function(b){return e.isEqual(b.color,a)});b&&b.count++}),d.every(function(a){return c?a.count<c.count&&(c=a):c=a,0!==a.count}),c.color}function da(a){var b=[];return E().forEach(function(c){H(c).forEach(function(d){var e=J(c,d);e===a&&b.push(c.plot.ensureAxisRanges(e))})}),b}function ea(a){var c={min:void 0,max:void 0};return da(a).forEach(function(a){if(!a[b.simulationController.activeAnalysis])throw new Error("Range not found for "+b.simulationController.activeAnalysis);c.min=void 0!==c.min?void 0!==a[b.simulationController.activeAnalysis].minYDisplayValue?Math.min(c.min,a[b.simulationController.activeAnalysis].minYDisplayValue):c.min:a[b.simulationController.activeAnalysis].minYDisplayValue,c.max=void 0!==c.max?void 0!==a[b.simulationController.activeAnalysis].maxYDisplayValue?Math.max(c.max,a[b.simulationController.activeAnalysis].maxYDisplayValue):c.max:a[b.simulationController.activeAnalysis].maxYDisplayValue}),c}function fa(a,b,c){var d=!0,e=b();a.validator=function(a,b){var f=!0,i="";d||(f=g(a),f?a&&e&&a.toLowerCase()!==c.probeID.toLowerCase()&&(!1===e.sheetTemplateController.design.isProbeIDUsed(a)?f=!0:(f=!1,i=h.i18n.translate("Probe ID %1$s already in use.").fetch(a))):i=h.i18n.translate('Invalid probe ID "%1$s"').fetch(a)),d=!1,b({valid:f,errorMessage:i})},a.value=c.probeID,a.onValueChange=function(a){a&&this.valid&&X(c,a)},a.oninput=function(){}}function ga(a){a.streamToMeasurementsLive&&b.multisimDeviceController.sendStreamProbesInformation()}var ha=null,ia=Object.freeze([{r:0,g:184,b:8,a:1},{r:0,g:160,b:232,a:1},{r:0,g:18,b:255,a:1},{r:208,g:0,b:232,a:1},{r:182,g:182,b:182,a:1},{r:255,g:135,b:197,a:1},{r:106,g:20,b:255,a:1},{r:248,g:152,b:24,a:1},{r:248,g:224,b:24,a:1},{r:255,g:0,b:0,a:1}]),ja=function(a,b,c){a.probeID=b,c.listeners.notifyListeners(k.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]}),a.probeRefs.forEach(function(a){c.listeners.notifyListeners(k.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})}),ga(a)},ka=function(){ja(this.probeInstance,this.oldProbeID,this.design)},la=function(){ja(this.probeInstance,this.newProbeID,this.design)};return{addProbe:c,removeProbe:m,getGlobalProbeSettings:_,setGlobalProbeSettings:aa,getProbesForNetlistVariable:D,getProbes:E,getProbeType:F,getProbeEnableState:G,getNetlistVariablesForProbe:H,getAllNetlistVariables:I,getTypeOfNetlistVariable:J,updateProbeSimulationVariables:O,changeProbeID:X,get currentController(){return A},set resourceController(a){ha=a},get resourceController(){return ha},hasActiveProbes:Z,hasActiveDataProbes:$,getIconFor:Y,signalTypes:B,recommendedColors:ia,getNextColor:ca,refreshProbeVariables:N,getReferenceProbeInstances:ba,hasProbeReference:M,get referenceProbeColour(){return"rgba(119,123,128,1)"},getRangesForType:da,getExtremesForType:ea,attachModifyInput:fa,createProbeVariableList:P,validateConstant:Q,validateFunction:R,validateProbe:S,validateOperator:T,validateNet:U,validateProbes:W,updateAllProbeDigitalDisplayOffsets:V,clearProbeCaches:K,get design(){return b}}}function d(a,b){z=a,A=b}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;return{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.isValidRefDesString},function(a){h=a.default},function(a){i=a.isTemplateSymbolPin,j=a.isTemplateWire},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.makeValidationError,o=a.transpilePlotterExpression,p=a.validatePlotterExpression,q=a.makeSpiceExpressionFromNaturalExpression,r=a.cleanNaturalExpression,s=a.makeMapOfProbeIDToProbe,t=a.expandProbesInExpression},function(a){u=a.expressionsList,v=a.variableList},function(a){w=a.SectionInstance},function(a){x=a.SOCKET_STATES},function(a){y=a.sourceType}],execute:function(){z=null,A=null,B=m,C={create:c,initialize:d},a("default",C)}}}),a.register("83",["1d","1e","26","27","84"],function(a,b){"use strict";var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.BaseInstanceObject}],execute:function(){h=function(a){function b(a,d,f){c(this,b);var g=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));return g.connectorHub=f,g.children=[],g.pinInstances=new Map,g}return f(b,a),d(b,[{key:"clone",value:function(a){var b=a.createConnectorInstance(this.contextGUID,this.templateGUID,this.connectorHub);return this.pinInstances.forEach(function(a,c){b.addPinInstance(c)}),b}}]),b}(g),a("default",h)}}}),a.register("82",["26","27","1d","1e","84","3c","1f","32","30"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.BaseInstanceObject},function(a){h=a.formatRefDes},function(a){i=a.ELogicFamily,j=a.LogicFamily,k=a.DefaultLogicFamily},function(a){l=a.default},function(a){m=a.default}],execute:function(){a("DesignComponent",n=function(){function a(b,c){if(e(this,a),!b||!b.componentBlueprints||1!==b.componentBlueprints.length){throw new Error("Trying to create a design component from an invalid OECL component")}this.oeclComponent=b,this.sectionInstances=new Map,this.refDes=c}return f(a,[{key:"isUnused",value:function(){return 0===this.sectionInstances.size}},{key:"isMultiSection",value:function(){return this.oeclComponentBlueprint&&this.oeclComponentBlueprint.sections.length>1}},{key:"getModelBlueprint",value:function(a){var b=this.oeclComponent.simModelBlueprints.filter(function(b){return b.id==a});return b.length?b[0]:null}},{key:"getSymbolBlueprint",value:function(a){var b=this.oeclComponent.symbolBlueprints.filter(function(b){return b.id==a});return b.length?b[0]:null}},{key:"oeclID",get:function(){return this.oeclComponent.componentBlueprints[0].id}},{key:"oeclComponentBlueprint",get:function(){return this.oeclComponent.componentBlueprints[0]}}]),a}()),a("DesignComponent",n),a("SectionInstance",o=function(a){function b(a,d,f,g,h){e(this,b);var n=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,g,f));n.designComponent=a,n.sectionName=d,n.templateGUID=f,n.contextGUID=g,n.design=h,n.modelInstanceData=null,n.modelDefinitionData=null,n.activeModelID="",n.activeSymbolID="",n.activePackageID="",n.children=[],n.variableGetter=null,n.variableObjectGetter=null,n.excludedFromSimulation=!1,n.pinInstances=new Map,n.useDocumentLogicLevelSettings=!0,n.activePinTechnology=k,n.activePinCustomLogicFamily=j.getVoltageLevelForLogicFamily(i.CUSTOM),n.activePinRiseTime=0,n.activePinFallTime=0;var o=function(){if(n.useDocumentLogicLevelSettings&&n.design&&n.design.simulationController){var a=n.design.simulationController.documentDigitalSettings;if(n.activePinTechnology=a.logicLevel,n.activePinTechnology===i.CUSTOM){var b=new j(a.outputLowValue,a.inputLowThresholdValue,0,a.inputHighThresholdValue,a.outputHighValue);b.autoSetUnknownVoltage(),n.activePinCustomLogicFamily=b}n.design.listeners.notifyListeners(m.DESIGN_CHANGED,{contextGUID:n.contextGUID,added:[],modified:[n.templateGUID],removed:[]})}};return n.design&&n.design.simulationController&&n.design.simulationController.listeners&&n.design.simulationController.listeners.addListener(l.SimulationSettingsChanged,o),o(),n}return d(b,a),f(b,[{key:"clone",value:function(a,b){var c=a.createSectionInstance(b,this.sectionName,this.templateGUID,this.contextGUID,this.design);c.activeModelID=this.activeModelID,c.activeSymbolID=this.activeSymbolID,c.activePackageID=this.activePackageID,c.activePinTechnology=this.activePinTechnology,c.activePinRiseTime=this.activePinRiseTime,c.activePinFallTime=this.activePinFallTime,c.activePinCustomLogicFamily=this.activePinCustomLogicFamily.clone(),c.modelInstanceData={},c.modelDefinitionData={};for(var d in this.modelInstanceData)if(this.modelInstanceData.hasOwnProperty(d)){c.modelInstanceData[d]={};for(var e in this.modelInstanceData[d])if(this.modelInstanceData[d].hasOwnProperty(e)){c.modelInstanceData[d][e]={};for(var f in this.modelInstanceData[d][e])this.modelInstanceData[d][e].hasOwnProperty(f)&&(c.modelInstanceData[d][e][f]=this.modelInstanceData[d][e][f])}}for(var g in this.modelDefinitionData)if(this.modelDefinitionData.hasOwnProperty(g)){c.modelDefinitionData[g]={};for(var h in this.modelDefinitionData[g])if(this.modelDefinitionData[g].hasOwnProperty(h)){c.modelDefinitionData[g][h]={};for(var i in this.modelDefinitionData[g][h])this.modelDefinitionData[g][h].hasOwnProperty(i)&&(c.modelDefinitionData[g][h][i]=this.modelDefinitionData[g][h][i])}}return this.pinInstances.forEach(function(a,b){c.addPinInstance(b)},this),c}},{key:"getInstanceOrModelVariableValue",value:function(a,b,c){var d=void 0;return this.modelInstanceData&&this.modelInstanceData[a]&&this.modelInstanceData[a].hasOwnProperty(b)&&(d=c&&void 0!==this.modelInstanceData[a][b].value?this.modelInstanceData[a][b].value:this.modelInstanceData[a][b].string),d}},{key:"getInstanceVariableValue",value:function(a,b,c){var d=void 0;return this.modelInstanceData&&this.modelInstanceData[a]&&this.modelInstanceData[a].hasOwnProperty(b)&&(d=c&&void 0!==this.modelInstanceData[a][b].value?this.modelInstanceData[a][b].value:this.modelInstanceData[a][b].string),d}},{key:"getInstanceVariableState",value:function(a,b){var c=void 0;return this.modelInstanceData&&this.modelInstanceData[a]&&this.modelInstanceData[a].hasOwnProperty(b)&&"boolean"==typeof this.modelInstanceData[a][b].state&&(c=this.modelInstanceData[a][b].state),c}},{key:"getModelVariableValue",value:function(a,b,c){var d=void 0;return this.modelDefinitionData&&this.modelDefinitionData[a]&&this.modelDefinitionData[a].hasOwnProperty(b)&&(d=c&&void 0!==this.modelDefinitionData[a][b].value?this.modelDefinitionData[a][b].value:this.modelDefinitionData[a][b].string),d}},{key:"getModelVariableState",value:function(a,b){var c=void 0;return this.modelDefinitionData&&this.modelDefinitionData[a]&&this.modelDefinitionData[a].hasOwnProperty(b)&&"boolean"==typeof this.modelDefinitionData[a][b].state&&(c=this.modelDefinitionData[a][b].state),c}},{key:"getVoltageLevels",value:function(){return this.activePinTechnology===i.CUSTOM?this.activePinCustomLogicFamily:j.getVoltageLevelForLogicFamily(this.activePinTechnology)}},{key:"refdesString",get:function(){return h(this.designComponent.refDes,this.designComponent.isMultiSection()?this.sectionName:void 0,{})}}]),b}(g)),a("SectionInstance",o)}}}),a.register("85",["1d","1e","26","27","84"],function(a,b){"use strict";var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.BaseInstanceObject}],execute:function(){h=function(a){function b(a,d){return c(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d))}return f(b,a),d(b,[{key:"clone",value:function(a){return a.createJunctionInstance(this.contextGUID,this.templateGUID)}}]),b}(g),a("default",h)}}}),a.register("86",["1d","1e","26","27","84"],function(a,b){"use strict";var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.BaseInstanceObject}],execute:function(){h=function(a){function b(a,d,f,g){c(this,b);var h=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));return h.textOrVarName=f,h.parent=g,h.parent&&h.parent.children&&h.parent.children.push(h),h}return f(b,a),d(b,[{key:"clone",value:function(a){return a.createTextInstance(this.contextGUID,this.templateGUID,this.variableName,void 0)}},{key:"setText",value:function(a){this.parent||(this.textOrVarName=a)}},{key:"getText",value:function(){return(this.parent?this.parent.getVariableText(this.textOrVarName):this.textOrVarName)||""}},{key:"variableName",get:function(){return this.textOrVarName}}]),b}(g),a("default",h)}}}),a.register("87",["1d","1e","26","27","84"],function(a,b){"use strict";var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.BaseInstanceObject}],execute:function(){h=function(a){function b(a,d,f){c(this,b);var g=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,d,f));return g.netName=a,g.children=[],g}return f(b,a),d(b,[{key:"getAttachedNet",value:function(a){return a.netlist.getNet(this.netName)}},{key:"clone",value:function(a){return a.createWireInstance("",this.contextGUID,this.templateGUID)}}]),b}(g),a("default",h)}}}),a.register("48",["2d","10","29","61","78","7b","3c","7c","7d","7e","7f","30","22","83","82","85","23","86","87"],function(a,b){"use strict";function c(a,b){return a===b||null!==a&&null!==b&&a.toLowerCase()===b.toLowerCase()}function d(a){return a.getAllInstances().filter(function(a){return a instanceof B}).map(function(a){return a.probeID.toUpperCase()})}function e(a){var b={pinID:a,parent:this};return this.pinInstances.set(a,b),b}function f(a){var b=this.pinInstances.get(a);return this.pinInstances.delete(a),b}function g(a){return this.pinInstances.get(a)}function h(a){return this.variableGetter?this.variableGetter(a):""}function i(a){E=a}var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;return{setters:[function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.RefDes,q=a.formatRefDes},function(a){r=a.default},function(a){s=a.default},function(a){t=a.default},function(a){u=a.default},function(a){v=a.default},function(a){w=a.default},function(a){x=a.default},function(a){y=a.DesignComponent,z=a.SectionInstance},function(a){A=a.default},function(a){B=a.ProbeInstance},function(a){C=a.default},function(a){D=a.default}],execute:function(){E=null,F=function(a,b){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.animatedPartsController=s(b.dataManager,E.audioController),c&&(this.animatedWiresController=t(b.dataManager)),this.designComponents=[],this.connectorHubs=new Map,this.designName=null,this.designMetaData={description:null,private:!1,tags:[]},this.copiedFrom=null,this.owner=!0,this.hasSeenMetadata=!1,this.instancesMultimap=new n,this.templateToContextMap=new Map,this.listeners=k(),this.topLevelTemplateGroup=null,this.netlist=new o,this.netlistController=r(this,a),this.probeController=u.create(a,this),this.globalProbeFlag=!1,this.simulationController=b,this.multisimDeviceController=b.multisimDeviceController,this.projectID=null,this.guid=null,this.userName="",this._modified=!1,this.probeData={probes:new Set,netlistVariableToProbeInstances:new Map,probeInstanceToNetlistVariables:new Map,probesVarRefreshDisabled:new Map}},Object.defineProperty(F.prototype,"componentCount",{get:function(){return this.designComponents.filter(function(a){return null!==a}).length}}),Object.defineProperty(F.prototype,"modified",{get:function(){return this._modified},set:function(a){a!=this._modified&&(this._modified=a,this.listeners.notifyListeners(v.DESIGN_MODIFIED,this._modified))}}),Object.defineProperty(F.prototype,"name",{get:function(){return this.designName},set:function(a){var b=this.designName;b!==a&&(this.designName=a,this.modified=!0,this.listeners.notifyListeners(v.NAME_CHANGED,{oldname:b,newname:this.designName}))}}),Object.defineProperty(F.prototype,"metadata",{get:function(){return j.cloneDeep(this.designMetaData)},set:function(a){var b=this.designMetaData;j.isEqual(b,a)||(this.designMetaData=j.cloneDeep(a),this.modified=!0,this.listeners.notifyListeners(v.METADATA_CHANGED,{oldMetaData:b,newMetaData:this.designMetaData}))}}),Object.defineProperty(F.prototype,"defaultName",{get:function(){return l.locale?l.i18n.translate("Untitled Circuit").fetch():"Untitled Circuit"}}),Object.defineProperty(F.prototype,"globalProbeSetting",{get:function(){return this.globalProbeFlag},set:function(a){this.globalProbeFlag!==a&&(this.globalProbeFlag=a,this.listeners.notifyListeners(v.GLOBAL_PROBE_SETTINGS_CHANGED,{periodicEnabled:this.globalProbeFlag}))}}),F.prototype.canAddComponents=function(a,b){var c=this;E.fileDataController.getSubscriptionInfo(function(d){a(d.componentLimit>=c.componentCount+b)},18e5)},F.prototype.componentLimitExceededError=function(a,b){E.fileDataController.getSubscriptionInfo(function(c){E.upgradedialog.stringFreeAccount=a||l.i18n.translate("You have a free account with a maximum of %1$s components per circuit.").fetch(c.componentLimit),E.upgradedialog.stringNotLoggedIn=b||l.i18n.translate("Login to place more than %1$s components.").fetch(c.componentLimit),E.upgradedialog.loggedInStatus=c.logged_in,E.upgradedialog.open(),m.notifyTracker("component-limit",{circuit_url:window.location.href})})},F.prototype.findInstance=function(a,b){return this.instancesMultimap.findItem(a,b)},F.prototype.findInstancesInContext=function(a){return this.instancesMultimap.findKey1(a)||[]},F.prototype.findInstancesOfTemplate=function(a){return this.instancesMultimap.findKey2(a)||[]},F.prototype.addInstance=function(a,b,c){this.instancesMultimap.addItem(a,b,c),c instanceof z&&c.designComponent?(this.animatedPartsController.handleNewInstance(c),c.designComponent.sectionInstances.set(c.sectionName,c)):c instanceof D?this.animatedWiresController&&this.animatedWiresController.handleNewInstance(c):c instanceof x&&c.connectorHub&&c.connectorHub.connectors.push(c),this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a,added:[b],modified:[],removed:[]})},F.prototype.removeInstances=function(a,b){for(var c=0;c<b.length;++c){var d=b[c],e=this.instancesMultimap.findItem(a,d);e instanceof z?(this.animatedPartsController.handleRemoveInstance(e),e.designComponent.sectionInstances.delete(e.sectionName)):e instanceof D?this.animatedWiresController&&this.animatedWiresController.handleRemoveInstance(e):e instanceof x&&e.connectorHub.connectors.splice(e.connectorHub.connectors.indexOf(e),1),this.instancesMultimap.removeItem(a,d)}this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a,added:[],modified:[],removed:b})},F.prototype.getMainConnectorHub=function(a){return this.connectorHubs.get(a.toLowerCase())},F.prototype.addConnectorHub=function(a){var b=this.getMainConnectorHub(a.connectorID);b||(b={connectorID:a.connectorID},this.connectorHubs.set(a.connectorID.toLowerCase(),b)),b[a.connectorType]=a},F.prototype.removeConnectorHub=function(a){var b=this.getMainConnectorHub(a.connectorID);delete b[a.connectorType];var c=0;for(var d in b)b.hasOwnProperty(d)&&void 0!==b[d].connectors&&++c;0===c&&this.connectorHubs.delete(b.connectorID.toLowerCase())},F.prototype.getConnectorHub=function(a,b){var c=this.getMainConnectorHub(a),d=void 0;return c&&c.hasOwnProperty(b)&&(d=c[b]),d},F.prototype.addDesignComponent=function(a){this.designComponents.push(a)},F.prototype.removeDesignComponent=function(a){var b=this.designComponents.indexOf(a);-1!=b&&this.designComponents.splice(b,1)},F.prototype.getUnusedDesignComponents=function(){return this.designComponents.filter(function(a){return a.isUnused()})},F.prototype.getUnusedConnectorHubs=function(){var a=[];return this.connectorHubs.forEach(function(b){for(var c in b)b.hasOwnProperty(c)&&void 0!==b[c].connectors&&0===b[c].connectors.length&&a.push(b[c])}),a},F.prototype.getNumberOfComponents=function(){return this.designComponents.length},F.prototype.getDesignComponentByRefdes=function(a){var b=this.designComponents.filter(function(b){return b.refDes.prefix===a.prefix&&b.refDes.number===a.number&&b.refDes.postfix===a.postfix});return 1===b.length?b[0]:null},F.prototype.isComponentRefDesUsed=function(a,b,d,e){for(var f=!1,g=0;g<this.designComponents.length;++g){var h=this.designComponents[g];if(h!=d){if(c(h.refDes.prefix,a.prefix)&&h.refDes.number===a.number&&c(h.refDes.postfix,a.postfix)&&h.sectionInstances.has(b)){f=!0;break}var i=e||(d?d.oeclComponent:null);if(i){if(i.componentBlueprints.length>1)throw new Error("Error in isComponentRefDesUsed: more than one component blueprint found.");var j=i.componentBlueprints[0];if(j.sections&&j.sections.length>1)for(var k=0;k<j.sections.length;k++){var l=j.sections[k],m=q(a,l.name,{});if(c(m,h.refDes.prefix)){f=!0;break}}}var n=h.isMultiSection(),o=h.oeclComponent;if(o&&n){if(h.sectionInstances.length>1)throw new Error("Error in isComponentRefDesUsed: unsupported number of sections.");if(o.componentBlueprints.length>1)throw new Error("Error in isComponentRefDesUsed: more than one component blueprint found.");var p=o.componentBlueprints[0];if(p.sections)for(var r=0;r<p.sections.length;r++){var s=p.sections[r],t=q(h.refDes,s.name,{});if(c(t,a.prefix)){f=!0;break}}}}}return f},F.prototype.generateRefDesWithFirstAvailableNumber=function(a,b){var c=new p;c.prefix=a.prefix,c.postfix=a.postfix,c.number=null===a.number?"1":a.number;var d=this.designComponents.filter(function(b){var c=!1,d=!1,e=!1;return b.refDes.prefix===a.prefix?c=!0:b.refDes.prefix&&a.prefix&&b.refDes.prefix.toLowerCase()===a.prefix.toLowerCase()&&(c=!0),b.refDes.postfix===a.postfix?d=!0:b.refDes.postfix&&a.postfix&&b.refDes.postfix.toLowerCase()===a.postfix.toLowerCase()&&(d=!0),null!==b.refDes.number&&(null===a.number||b.refDes.number.length>=a.number.length&&0!==parseInt(b.refDes.number.substring(0,b.refDes.number.length-a.number.length),10))&&(e=!0),c&&d&&e}),e=[{value:c.number-1,string:""+(c.number-1)}].concat(d.map(function(a){return{value:parseInt(a.refDes.number,10),string:a.refDes.number}})).sort(function(a,b){return a.value-b.value}),f=null,g=function(a){var b=a.split(""),c=1,d=void 0;for(d=a.length-1;d>=0&&c;--d)b[d]=((parseInt(b[d],10)+1)%10).toString(),c="0"===b[d]?1:0;return(d<0&&c?"1":"")+b.join("")},h=!1;do{e.some(function(a,b,d){return b<d.length-1&&a.value+1>=c.number&&a.value+1<d[b+1].value&&(f=g(a.string)),null!==f}),null===f&&(f=0!==e.length?g(e[e.length-1].string):"1");var i=null!==a.number?a.number.length:0,j=Math.max(i-f.length,0),k=Math.pow(10,j).toString().substr(1);if(c.number=k+f,h=this.isComponentRefDesUsed(c,void 0,void 0,b)){var l=parseInt(c.number,10);e=e.concat({value:l,string:""+l}),e=e.sort(function(a,b){return a.value-b.value}),f=null}}while(h);return c},F.prototype.getAllProbeInstances=function(){return this.getAllInstances().filter(function(a){return a instanceof B}).map(function(a){return a})},F.prototype.getAllWireInstances=function(){return this.getAllInstances().filter(function(a){return a instanceof D})},F.prototype.getAllConnectorInstances=function(){return this.getAllInstances().filter(function(a){return a instanceof x})},F.prototype.getAllSectionInstances=function(){return this.getAllInstances().filter(function(a){return a instanceof z})},F.prototype.getAllJunctionInstances=function(){return this.getAllInstances().filter(function(a){return a instanceof A})},F.prototype.getAllTextAnnotationInstances=function(){return this.getAllInstances().filter(function(a){return a instanceof C&&!a.parent})},F.prototype.isProbeIDUsed=function(a){var b=a.toUpperCase();return 0!==d(this).filter(function(a){return a==b}).length},F.prototype.generateNextAvailableProbeID=function(a,b){var c=0,e=1,f="";if(b){var g=/\d+$/;f=b.replace(g,function(a){return c=a,""}),e=c.length}else f="PR",a===w.PROBE_REFERENCE?f="REF":a===w.PROBE_EXPRESSION?f="EXP":a===w.PROBE_DATA&&(f="DT");++c;for(var h=d(this),i=!1,j=function(){var a=f+c;0!==h.filter(function(b){return b==a}).length?++c:i=!0};!i;)j();var k=e-c.toString().length;return k=Math.max(0,k),c="0".repeat(k)+c,f+c},F.prototype.generateNextAvailableConnectorID=function(a){var b=void 0;if("0"===a)b=a;else{for(var c=1,d=!1;!d;)void 0!==this.netlist.getNet(a+c)?++c:d=!0;b=a+c}return b},F.prototype.changeNetName=function(a,b,c){var d=this.findInstance(a,b);if(d&&void 0!==d.netName){d.netName=c;var e=d.children?d.children.map(function(a){return a.templateGUID}):[];e.push(b),this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a,added:[],modified:e,removed:[]})}},F.prototype.changeConnectorIDs=function(a,b){for(var c=this,d=new Map,e=0;e<a.length;e++){var f=a[e],g=this.getConnectorHub(b,f.connectorHub.connectorType)||this.createConnectorHub(b,f.connectorHub.connectorType);f.connectorHub===g?g.connectorID=b:(f.connectorHub.connectors.splice(f.connectorHub.connectors.indexOf(f),1),f.connectorHub=g,g.connectors.push(f));var h=f.contextGUID,i=f.templateGUID;d.has(h)?d.get(h).push(i):d.set(h,[i])}d.forEach(function(a,b){c.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:b,added:[],modified:a,removed:[]})})},F.prototype.changeText=function(a,b){a.setText(b),this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},F.prototype.addContextForTemplate=function(a,b){this.templateToContextMap.has(a)?this.templateToContextMap.get(a).push(b):this.templateToContextMap.set(a,[b])},F.prototype.removeContextForTemplate=function(a,b){if(this.templateToContextMap.has(a)){var c=this.templateToContextMap.get(a),d=c.indexOf(b);-1!=d&&c.splice(d,1)}},F.prototype.getContextsOfTemplate=function(a){return this.templateToContextMap.get(a)},F.prototype.getAllInstances=function(){return this.instancesMultimap.getAllItems()},F.prototype.changeDesignComponentRefDes=function(a,b){a.refDes=b,a.sectionInstances.forEach(function(a){this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},this)},F.prototype.changeInstanceDesignComponent=function(a,b){b.sectionInstances.set(a.sectionName,a),a.designComponent.sectionInstances.delete(a.sectionName),a.designComponent=b,this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},F.prototype.changeInstanceDesignComponentPackage=function(a,b){a.activePackageID=b,this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},F.prototype.changeInstanceDesignComponentModel=function(a,b){a.activeModelID=b,this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},F.prototype.changeInstanceDesignComponentLogicLevel=function(a,b){a.activePinTechnology=b,this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},F.prototype.changeInstanceDesignComponentUseDocumentLogicLevelSettings=function(a,b){a.useDocumentLogicLevelSettings=b,this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},F.prototype.changeInstanceDesignComponentCustomLogicFamily=function(a,b){a.activePinCustomLogicFamily=b.clone(),this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},F.prototype.changeInstanceDesignComponentRiseTime=function(a,b){a.activePinRiseTime=b,this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},F.prototype.changeInstanceDesignComponentFallTime=function(a,b){a.activePinFallTime=b,this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},F.prototype.changeInstanceSymbol=function(a,b){a.activeSymbolID=b,this.listeners.notifyListeners(v.DESIGN_CHANGED,{contextGUID:a.contextGUID,added:[],modified:[a.templateGUID],removed:[]})},G=function(a,b){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new F(a,b,c)},F.prototype.createDesignComponent=function(a,b){return new y(a,b)},F.prototype.createSectionInstance=function(a,b,c,d){var i=new z(a,b,c,d,this);if(i.getVariableText=h,i.addPinInstance=e,i.removePinInstance=f,i.getPinInstance=g,a.sectionInstances.has(b)){var j="Component with refdes: "+q(a.refDes,{})+" already has an instance of section: "+b;throw new Error(j)}return a.sectionInstances.set(b,i),i},F.prototype.createConnectorHub=function(a,b){return{connectorID:a,connectorType:b,connectors:[]}},F.prototype.createConnectorInstance=function(a,b,c){var d=new x(a,b,c);return d.addPinInstance=e,d.getPinInstance=g,d.getVariableText=h,d},F.prototype.createWireInstance=function(a,b,c){var d=new D(a,b,c);return d.getVariableText=h,d},F.prototype.createJunctionInstance=function(a,b){return new A(a,b)},F.prototype.createTextInstance=function(a,b,c,d){return new C(a,b,c,d)},F.prototype.createProbeInstance=function(a,b,c,d){var e=new B(a,b,c,d,this);return e.EProbeTypes=w,e.getVariableText=h,e},F.prototype.createProbeTextInstance=function(a,b,c,d){return new C(a,b,c,d)},F.prototype.designNameValidator=function(a){var b=255,c=!!a&&!/^\s+$/.test(a)&&a.length<=b&&!/[\0\/\\\?\*<>:"\|]|^\.{1,2}$/.test(a);return{valid:c,errorMessage:c?null:/^\s*$/.test(a)||!a?l.i18n.translate("Circuit name must not be blank.").fetch():a.length>b?l.i18n.translate("Circuit name length must be less than %d characters.").fetch(b):l.i18n.translate("Circuit name must not contain %s").fetch('\\ / ? * < > : " |')}},H={createDesign:G,initialize:i},a("default",H)}}}),a.register("88",["2d","16","89","29","2f","43","8a","39","3e"],function(a,b){"use strict";function c(a){var b=a.viewObject.viewToContent({x:0,y:0}),c=a.viewObject.viewToContent({x:t,y:0});return Math.floor(a.svgToGrid({x:c.x-b.x,y:0}).x)}function d(a,b){var c=a.querySelector(".nims_wirePath"),d=null;return c&&function(){var a=c.getPathData(),e={x:0,y:0},f=a.map(function(a){switch(a.type){case"M":case"L":e={x:a.values[0],y:a.values[1]};break;case"m":case"l":e={x:e.x+a.values[0],y:e.y+a.values[1]};break;case"H":e={x:a.values[0],y:e.y};break;case"h":e={x:e.x+a.values[0],y:e.y};break;case"V":e={x:e.x,y:a.values[0]};break;case"v":e={x:e.x,y:a.values[0]+e.y};break;case"z":case"Z":e={x:f[0].x,y:f[0].y}}return e}),h=g(f,b);(d=h.point)&&h.distance>=10&&(d=null)}(),d}function e(a,b,e,g,t,w,x){function y(a,b){var c=a,f=!1;for(c&&c instanceof HTMLDivElement&&c.parentNode instanceof SVGElement&&(c=c.parentNode);c&&c instanceof SVGElement;){if(c.classList.contains("nims_symbol")||c.classList.contains("nims_wire")||c.classList.contains("nims_junction")||c.classList.contains("nims_probe")||c.classList.contains("nims_text")||p.isAdorner(c)||e.isPinLollipop(c)||e.isJunctionLollipop(c)){f=!0;break}c=c.parentNode}return f&&c.classList.contains("nims_wire")&&null===d(c,b)&&(f=!1),f?c:null}function z(a,c,d){var e=c.getAttribute("commandID"),f=c.getAttribute("componentGUID").split("_"),g=b.getCommandObject(e),h=null,i=null,j=null;switch(e){case"duplicateobject":h=k.i18n.translate("duplication.").fetch(),i=a.getSelection(!1),j=a.sheetTemplateController.sheetTemplate.getObject(i[0]),i.length>1||m(j)||o(j)?g.contextName=/^pan/.test(d.type)?"duplicateobject":"duplicatefixedobjectfloating":g.contextName=/^pan/.test(d.type)?"duplicateobject":"duplicateobjectfloating";break;case"deleteobject":h=k.i18n.translate("deletion.").fetch();break;case"flipobjecthorizontal":h=k.i18n.translate("flip.").fetch();break;case"addreferenceprobe":h=k.i18n.translate("add reference probe.").fetch();break;case"rotateobject":h=k.i18n.translate("rotation.").fetch();break;default:h=e}g&&g.startCommand(h,{view:a,sheetTemplateController:a.sheetTemplateController,selection:f}),p.removeActiveStyle(c)}function A(a){var c=b.getCommandObject("wire");c&&!b.activeContext&&c.startCommand(k.i18n.translate("wire placement.").fetch(),{startPoint:{x:a.connectionX,y:a.connectionY},item:{templateGUID:a.component.templateGUID,symbolPinID:a.name,connectType:r.PIN},wiringController:e,cancelInterface:t})}function B(a){var c=b.getCommandObject("wire");c&&!b.activeContext&&c.startCommand(k.i18n.translate("wire placement.").fetch(),{startPoint:{x:a.point.x,y:a.point.y},item:{templateGUID:a.templateGUID,connectType:r.JUNCTION},wiringController:e,cancelInterface:t})}function C(a,b,c){var d=b[0],e=y(d,a.viewObject.viewToContent({x:c.clientX,y:c.clientY}));e&&p.isAdorner(e)&&p.applyActiveStyle(e)}function D(a,b){a.classList.add("selectmode"),X=window.performance.now(),Y.active=!0,Y.selected=0,Y.rect=document.createElementNS("http://www.w3.org/2000/svg","rect"),Y.rect.classList.add("selectionbox"),Y.rect.style.fillOpacity=0,Y.rect.style.stroke="royalblue",Y.rect.style.strokeOpacity=.5,Y.rect.style.strokeWidth="1px",Y.startPoint=a.svgToGrid(a.viewObject.viewToContent(b)),Y.startPoint.x=Math.max(Math.min(Y.startPoint.x,a.sheetTemplateController.sheetTemplate.size.width-1),1),Y.startPoint.y=Math.max(Math.min(Y.startPoint.y,a.sheetTemplateController.sheetTemplate.size.height-1),1),Y.startPoint=a.gridToSvg(Y.startPoint),Y.endPoint=Y.startPoint,a.feedbackContent.appendChild(Y.rect);var c=a.sheetTemplateController,d=c.sheetTemplate;Y.objectLookup=d.objectLookup,Y.selected=0}function E(b,c){var d=b.svgToGrid(b.viewObject.viewToContent(c)),e=b.svgToGrid(Y.endPoint),f=b.svgToGrid(Y.startPoint);if(d.x!==e.x||d.y!==e.y){d.x=Math.max(Math.min(d.x,b.sheetTemplateController.sheetTemplate.size.width-1),1),d.y=Math.max(Math.min(d.y,b.sheetTemplateController.sheetTemplate.size.height-1),1);var g=[],h=void 0,i=void 0,j=void 0,k=void 0,l=void 0;for(h=Math.min(f.x,e.x);h<=Math.max(f.x,e.x);++h)for(i=Math.min(f.y,e.y);i<=Math.max(f.y,e.y);++i){l=!1,d.x<e.x?h<=e.x&&h>d.x&&h>f.x&&(l=!0):d.x>e.x&&h>=e.x&&h<d.x&&h<f.x&&(l=!0),d.y<e.y?i<=e.y&&i>d.y&&i>f.y&&(l=!0):d.y>e.y&&i>=e.y&&i<d.y&&i<f.y&&(l=!0);var m=Y.objectLookup.getObjectsAtPoint(h,i);if(l&&m)for(j=0;j<m.length;j++)(k=b.getSingleObject(m[j].templateGUID))&&-1===g.indexOf(k)&&g.push(k)}for(g.forEach(function(b){var c=Y.objects.indexOf(b);c>-1&&Y.objects.splice(c,1),a.isSelected(b)&&(b.classList.remove(a.Classes.SELECTED),a.isJunctionSelection(b)||Y.selected--)}),h=Math.min(f.x,d.x);h<=Math.max(f.x,d.x);h++)for(i=Math.min(f.y,d.y);i<=Math.max(f.y,d.y);i++){l=!1,d.x<e.x?h>=d.x&&h<e.x&&(l=!0):d.x>e.x&&h>e.x&&h<=d.x&&(l=!0),d.y<e.y?i>=d.y&&i<e.y&&(l=!0):d.y>e.y&&i>e.y&&i<=d.y&&(l=!0);var n=Y.objectLookup.getObjectsAtPoint(h,i);if(l&&n)for(j=0;j<n.length;j++)!(k=b.getSingleObject(n[j].templateGUID))||a.isSelected(k)||k.classList.contains("nims_text")&&!k.classList.contains("standalone")||-1!==Y.objects.indexOf(k)||(k.classList.add(a.Classes.SELECTED),Y.objects.push(k),a.isJunctionSelection(k)||Y.selected++)}Y.endPoint=b.gridToSvg(d),Y.rect.setAttribute("x",Y.endPoint.x>Y.startPoint.x?Y.startPoint.x+"px":Y.endPoint.x+"px"),Y.rect.setAttribute("y",Y.endPoint.y>Y.startPoint.y?Y.startPoint.y+"px":Y.endPoint.y+"px"),Y.rect.setAttribute("height",Math.max(Math.abs(Y.endPoint.y-Y.startPoint.y),1)+"px"),Y.rect.setAttribute("width",Math.max(Math.abs(Y.endPoint.x-Y.startPoint.x),1)+"px")}}function F(b){b.classList.remove("selectmode"),a.selectElements(Y.objects,b,{numSelected:Y.selected}),Y.objects=[],b.feedbackContent.removeChild(Y.rect),Y.active=!1,X=0}function G(a,b,c){window.performance.now()-X>1e3&&(X=0);var d=b();if(d){C(d,c(a.srcEvent.clientX,a.srcEvent.clientY),a)}return!1}function H(a,b,c){var d=b();if(d){var e=c(a.srcEvent.clientX,a.srcEvent.clientY),g=e[0],h=y(g,d.viewObject.viewToContent({x:a.clientX,y:a.clientY}));if(h){var i=d.sheetTemplateController.sheetTemplate.getObject(h.getAttribute("id"));if(i){var j=i.templateGUID,k=d.sheetTemplateController.getPropertiesForItem(d.contextGUID,j);f.find(k,function(a){return"button"===a.propertyType})&&!h.classList.contains("mouseover")&&h.classList.add("mouseover")}}}return!1}function I(){return!1}function J(a,b,c){window.performance.now()-X>1e3&&(X=0);var d=b();if(d){var e=c(a.srcEvent.touches[0].clientX,a.srcEvent.touches[0].clientY);e.length>0&&C(d,e,a)}return!1}function K(b,d,e){var f=d();return f&&!V&&function(){var d=f.sheetTemplateController,g=d.sheetTemplate,j=e(b.srcEvent.gesture.center.x,b.srcEvent.gesture.center.y),k={x:b.clientX,y:b.clientY},q=f.viewObject.viewToContent(k),r=f.svgToGrid(q),t=0,w=b.srcEvent.gesture.srcEvent.ctrlKey,x=b.srcEvent.gesture.srcEvent.shiftKey;(f.viewObject.inputEventsInterface.testEvent.isTouchStart(b)||f.viewObject.inputEventsInterface.testEvent.isTouchEnd(b))&&(t=c(f));var C=g.objectLookup.getObjectsAtPoint(r.x,r.y,t).filter(function(a){return!n(a)||!w&&!x});C.length||(C=j.map(function(a){var b=y(a,q),c=b?b.getAttribute("id"):null;return c?f.sheetTemplateController.sheetTemplate.getObject(c):null}).filter(function(a){return!!a}));var D=[],E=[];C.forEach(function(a){var b=f.getSingleObject(a.templateGUID);b&&!b.classList.contains("hidden")?D.push(b):E.push(a)});var F={event:b};if(j.length>0&&function(){var c=y(j[0],f.viewObject.viewToContent({x:b.clientX,y:b.clientY})),d=C.filter(function(a){return c&&a.templateGUID===c.id}),e=1===d.length&&m(d[0]);c&&p.isAdorner(c)?(z(f,c,b.srcEvent),D=[]):c&&e?(C=d,D=[c]):D.length||x||w||a.clearSelection(f,F,F)}(),D.length>0||C.length>0){D.length>1&&function(){var a=function(a,b){return Math.max(0,Math.min(a.right,b.right)-Math.max(a.left,b.left))*Math.max(0,Math.min(a.bottom,b.bottom)-Math.max(a.top,b.top))/(a.width*a.height)},c=t||5,d=f.viewObject.viewToContent({x:b.clientX-c,y:b.clientY-c}),e=f.viewObject.viewToContent({x:b.clientX+c,y:b.clientY+c}),g={left:d.x,top:d.y,right:e.x,bottom:e.y,width:e.x-d.x,height:e.y-d.y};D.sort(function(b,c){var d=i(b),e=i(c);return a(d,g)<a(e,g)})}();var G=D.length>0?y(D[0],f.viewObject.viewToContent({x:b.clientX,y:b.clientY})):null,H=[],I=[],J=u;if(x||w||function(){var a=[];D.forEach(function(b){var c=g.getObject(b.getAttribute("id"));o(c)||a.push(c)}),a=a.concat(E);for(var b=0;b<a.length;b++){var c=a[b];if(n(c)){J=b,I.push(c);break}if(l(c)&&h(r,{x:c.connectionX,y:c.connectionY})<=t){J=b,H.push(c);break}}}(),J<u)if(I.length>0){var K=d.wiringController.getNumberOfConnectionsForJunction(I[0].templateGUID);K<v&&B(I[0])}else H.length>0&&A(H[0]);else if(G)if(w)a.isSelected(G)?a.unselectElement(G,f,F):(G.getAttribute("parent")&&a.makeSelectionSilent(f.getSingleObject(G.getAttribute("parent"))),a.selectElement(G,f,F,!1));else if(x)G.getAttribute("parent")&&a.makeSelectionSilent(f.getSingleObject(G.getAttribute("parent"))),a.selectElement(G,f,F,!1);else{var L=a.getSelectedElements(f),M=!G.getAttribute("parent")&&1===L.length&&L[0]===G||G.getAttribute("parent")&&2===L.length&&(L[0]===G&&L[1]===f.getSingleObject(G.getAttribute("parent"))||L[1]===G&&L[0]===f.getSingleObject(G.getAttribute("parent")));M||a.clearSelectionSilent(f),G.getAttribute("parent")&&a.makeSelectionSilent(f.getSingleObject(G.getAttribute("parent"))),a.selectElement(G,f,F,M),f.sheetTemplateController.design.simulationController.isInSimulation&&s(f.getSelection(!1),f.sheetTemplateController,f.contextGUID)}}}(),!0}function L(b,c,d){var e=!1,f=c();if(f){var g=d(b.srcEvent.gesture.center.x,b.srcEvent.gesture.center.y);if(g.length>0){var h={x:b.clientX,y:b.clientY},i=y(g[0],f.viewObject.viewToContent(h));i?i&&p.isAdorner(i)?(z(f,i,b.srcEvent),e=!0):a.isSelected(i)?(a.unselectElement(i,f),X=window.performance.now(),e=!0):(i.getAttribute("parent")&&(a.makeSelectionSilent(f.getSingleObject(i.getAttribute("parent"))),e=!0),a.selectElement(i,f,{},!1)):(D(f,h),e=!0)}}return e}function M(a,b){var c=b();X=0;var d=!1;return c&&Y.active&&(F(c),d=!0),d}function N(d,f,i){var m=0!==X;return m||function(){var o=f(),r=o.sheetTemplateController,s=r.sheetTemplate,C={x:d.srcEvent.gesture.center.x-d.srcEvent.gesture.deltaX,y:d.srcEvent.gesture.center.y-d.srcEvent.gesture.deltaY},E=i(C.x,C.y),F=null,G=null,H=null,I=d.srcEvent.gesture,J=new Set;if(o.getSelection(!1).forEach(function(a){J.add(a)}),E.length>0){H=E[0];var K=o.viewObject.viewToContent({x:d.clientX-d.deltaX,y:d.clientY-d.deltaY});F=o.svgToGrid(K),F&&function(){var a=0;(o.viewObject.inputEventsInterface.testEvent.isTouchStart(d)||o.viewObject.inputEventsInterface.testEvent.isTouchEnd(d))&&(a=c(o)),G=s.objectLookup.getObjectsAtPoint(F.x,F.y,a);var b=[],e=[],f=void 0,g=0;if(G.forEach(function(c,d){n(c)?(J.has(c.templateGUID)&&g++,void 0===f&&(f=d),e.push(c)):l(c)?(J.has(c.component.templateGUID)&&g++,h(F,{x:c.connectionX,y:c.connectionY})<=a&&(void 0===f&&(f=d),b.push(c))):c.templateGUID&&J.has(c.templateGUID)&&g++}),g<2&&f<u)if(e.length>0){var i=r.wiringController.getNumberOfConnectionsForJunction(e[0].templateGUID);i<v&&B(e[0]),m=!0}else b.length>0&&(A(b[0]),m=!0)}()}var L=b.getCommandObject("moveselection");if(!m&&o&&!V&&L&&L.enabled&&(W={x:d.clientX-I.deltaX,y:d.clientY-I.deltaY},W=o.viewObject.viewToContent(W),H=null,E.length>0))if(F=o.svgToGrid(W),H=y(E[0],W),H&&e.isPinLollipop(H)&&(F=o.svgToGrid(j(H,{x:0,y:0}))),G=s.objectLookup.getObjectsAtPoint(F.x,F.y),G.forEach(function(b){!l(b)||H&&a.isSelected(H)||(H=o.getSingleObject(b.component.templateGUID))}),H){var M=p.isAdorner(H);if(m=!0,M)z(o,H,d.srcEvent);else{var N=void 0,O=!1,P=!1,Q=!1;a.isSelected(H)||(a.clearSelectionSilent(o),H.getAttribute("parent")&&a.makeSelectionSilent(o.getSingleObject(H.getAttribute("parent"))),a.selectElement(H,o,{},!1)),H.classList.contains("nims_text")?(O=!0,P=!H.getAttribute("parent")):H.classList.contains("nims_wire")&&(Q=!0),N=o.getSelection();var R=!1;if(Q&&N.length<2){R=!0;var S=r.design.findInstancesOfTemplate(N[0])[0],T=r.sheetTemplate.getObject(N[0]),U=r.netlistController.getWireTerminals(S);if(2==T.path.length&&U.from.junction&&U.to.junction){var X=r.netlistController.getWires(U.from.junction),Y=r.netlistController.getWires(U.to.junction);R=1!=X.length||1!=Y.length||X[0]!=Y[0]}}if(R){a.clearSelection(o),a.selectElement(H,o,{},!1),N=o.getSelection(),m=!1;var Z=b.getCommandObject("wiremove");Z.startCommand(k.i18n.translate("wire move.").fetch(),{startPoint:F,wireToMove:N[0]}),m=Z.active,o.viewObject.listeners.notifyListeners(o.viewObject.viewEvents.USER_ACTION_STARTED,{viewobject:o.viewObject,command:"move"})}else if(O&&!P||!I.srcEvent.ctrlKey&&!I.srcEvent.metaKey)O&&!P||function(){var c=o.getSelection();a.clearSelectionUnboundedItems(o);var d=new Set,f=o.getSelection();f.forEach(function(a){d.add(a)});var h=new Set;c.forEach(function(a){d.has(a)||h.add(a)});var i=function(){x.notifications.notify(k.i18n.translate("Could not move all objects in defined selection.").fetch(),x.notifications.ETypes.NT_INFO)},j={removalMsg:i,removedItems:h};if(f.length){var l=q(W,a,b,e,g,t,w,null,j);m=w.registerTool(l),o.viewObject.listeners.notifyListeners(o.viewObject.viewEvents.USER_ACTION_STARTED,{viewobject:o.viewObject,command:"move"})}else m=!0,i()}();else{a.clearSelectionUnboundedItems(o),N=o.getSelection();var $=b.getCommandObject("duplicateobject");$.startCommand(k.i18n.translate("duplication.").fetch(),{view:o,sheetTemplateController:o.sheetTemplateController,selection:o.getSelection(!1)})}}}else{var _=i(d.clientX,d.clientY),aa=I.srcEvent.ctrlKey;if(_.length>0&&aa){var ba={x:d.clientX,y:d.clientY};I.srcEvent.shiftKey||a.clearSelection(o),D(o,ba),m=!0}}}(),m}function O(a,b){var c=b();if(c){if(V)return!0;if(Y.active){return E(c,{x:a.clientX,y:a.clientY}),!0}}return!1}function P(a,b){X=0;var c=b();if(c){if(V)return V=!1,!0;if(Y.active)return F(c),!0}return!1}function Q(a,b,c){T(a,b,c)}function R(a,b){var c=b();if(c)switch(a.srcEvent.keyCode){case 16:c.classList.remove("shift_down");break;case 17:c.classList.remove("ctrl_down")}}function S(a,b){var c=b();if(c)switch(a.srcEvent.keyCode){case 16:c.classList.add("shift_down");break;case 17:c.classList.add("ctrl_down")}return!1}function T(){var a=b.getCommandObject("showrightpanel");return a.enabled&&a.startCommand(),!0}function U(a){var c=a.view.getSelection(!1),d={x:0,y:0};if(1===c.length&&a.view.sheetTemplateController.sheetTemplate.getObjectAsTemplateWire(c[0])){var e=a.extraData?a.extraData.event:null;if(e)d=a.view.svgToGrid(a.view.viewObject.viewToContent({x:e.clientX,y:e.clientY}));else{d=a.view.sheetTemplateController.sheetTemplate.getObjectAsTemplateWire(c[0]).getLongestSegmentCenterPoint(!0)}p.setAdornerPlacementRect({left:d.x-1,top:d.y-1,right:d.x+1,bottom:d.y+1})}else p.setAdornerPlacementRect(a.view.sheetTemplateController.sheetTemplate.getBoundingBoxForItems(c));a.view.sheetTemplateController.updateCommands(c,b),p.updateAdorners(c,a.view)}var V=!1,W=null,X=0,Y={active:!1,rect:null,startPoint:null,endPoint:null,objects:[],objectLookup:null,selected:0};return a.selectionChangeListener.addListener("select",U),a.selectionChangeListener.addListener("unselect",U),{onStart:function(){return!0},onTap:K,onPress:L,onPressUp:M,onPanStart:N,onPan:O,onPanEnd:P,onDoubleTap:Q,onMouseDown:G,onMouseMove:H,onMouseUp:I,onTouchStart:J,onKeyDown:S,onKeyUp:R}}var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return a("default",e),{setters:[function(a){f=a.default},function(a){g=a.constrainPointToPath,h=a.distancePointToPointSquared},function(a){i=a.fastBBox,j=a.getTotalTransformOfPoint},function(a){k=a.default},function(a){l=a.isTemplateSymbolPin,m=a.isTemplateProbe,n=a.isTemplateJunction,o=a.isTemplateText},function(a){p=a.default},function(a){q=a.default},function(a){r=a.default},function(a){s=a.updateToggleState}],execute:function(){t=10,u=3,v=4}}}),a.register("8b",[],function(a,b){"use strict";function c(a,b){a&&function(){var c=function(b){var c=a.querySelector("#"+b.commandID);c&&(c.disabled=!b.enabled,b.enabled?c.removeAttribute("disabled"):c.setAttribute("disabled",""),b.visible?c.style.display="":c.style.display="none",c.setAttribute("state",b.commandLogicState),b.active?(c.getAttribute("activeicon")&&c.setAttribute("icon",c.getAttribute("activeicon")),c.getAttribute("activetitle")&&c.setAttribute("title",c.getAttribute("activetitle")),c.classList.add("active")):(c.getAttribute("activeicon")&&c.getAttribute("defaulticon")&&c.setAttribute("icon",c.getAttribute("defaulticon")),c.getAttribute("activetitle")&&c.getAttribute("defaulttitle")&&c.setAttribute("title",c.getAttribute("defaulttitle")),c.classList.remove("active")))},d=function(d){var e=a.querySelectorAll("paper-icon-button:not([no-command])[control],paper-button:not([no-command])[control]"),f=function(){},g={};d.forEach(function(d){var e=a.querySelector("#"+d.commandID);e&&!b[d.commandID]&&(e.onclick=function(){d.active?d.stopCommand(!0):d.startCommand(e.getAttribute("title"))},!e.getAttribute("defaulticon")&&e.getAttribute("icon")&&e.setAttribute("defaulticon",e.getAttribute("icon")),!e.getAttribute("defaulttitle")&&e.getAttribute("title")&&e.setAttribute("defaulttitle",e.getAttribute("title")),d.addStateListener(c),c(d)),g[d.commandID]=!0});for(var h=0;h<e.length;h++)g[e[h].id]||(e[h].onclick=f,e[h].enabled=!1);b=g},f=function(){for(var b=a.querySelectorAll(":not(paper-icon-button):not(paper-button)[control]"),d=0;d<b.length;d++)b[d].visible?b[d].style.display="":b[d].style.display="none";e.forEach(function(a){c(a)})};e.addCommandChangeListener(d),d(e),e.addContextChangeListener(f),f()}()}function d(a){return e=a,{attachHandlerToToolbar:c}}var e;return a("default",d),{setters:[],execute:function(){e=null}}}),a.register("8c",["10"],function(a,b){"use strict";function c(a,b){function c(){o.doCancel()}function e(a,d,e,f,o){m&&this.doCancel(),b.addKeyHandler("escape",!1,!1,!1,!1,c,f),m=!0,n.visible=m,n.contextHelper.contextVisible="all",n.contextHelper.contextHidden=["duplicateobject","addobject","moveselection"],k=o,n.enabled=!0,g=a,j=f,h=d,i=e,l.notifyListeners("update")}function f(){b.removeKeyHandler("escape",c),k=null,n.enabled=!1,m=!1,n.visible=m,l.notifyListeners("update")}var g="Cancel",h="multisim:cancel",i=null,j="Cancel",k=null,l=d(),m=!1,n=a.createCommandObject("cancel",function(){k&&k(),k=null,l.notifyListeners("update")},!0);n.cancelActiveCommand=!0,n.visible=m;var o={addUpdateListener:function(a){l.addListener("update",a)},doCancel:function(){n&&n.enabled&&n.contextHelper&&n.contextHelper.testContextEnabled()&&n.startCommand()},activateCancel:e,deactivateCancel:f,canCancel:function(){return m},get cancelIcon(){return h},get cancelIconSrc(){return i},get cancelTitle(){return g},get cancelText(){return j}};return o}var d;return a("default",c),{setters:[function(a){d=a.default}],execute:function(){}}}),a.register("8d",["10"],function(a,b){"use strict";function c(){function a(){return c&&!!(c.requestFullscreen||c.webkitRequestFullscreen||c.mozRequestFullScreen||c.msRequestFullscreen)}function b(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}var c=null,e=d(),f=Object.freeze({FULLSCREEN_CHANGED:"fullscreen_changed"}),g=function(a){var b=a.requestFullscreen||a.webkitRequestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen;b&&b.call(a)},h=function(){var a=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;a&&a.call(document)},i=void 0;return{EFullScreenEvents:f,setFullscreenElement:function(b){c=b,i.enabled=a(),i.visible=a(),e.notifyListeners(f.FULLSCREEN_CHANGED,this)},listeners:e,canFullscreen:a,isFullScreen:b,moduleInit:function(a){var d=this;i=a.createCommandObject("fullscreen",function(){b()?h():g(c);var a=function(){e.notifyListeners(f.FULLSCREEN_CHANGED,d)};return document.addEventListener("webkitfullscreenchange",a),document.addEventListener("mozfullscreenchange",a),document.addEventListener("MSFullscreenChange",a),document.addEventListener("fullscreenchange",a),null},!0),i.enabled=!1}}}var d;return a("default",c),{setters:[function(a){d=a.default}],execute:function(){}}}),a.register("8e",["8f"],function(a,b){"use strict";function c(a){function b(a){var b=null;window.MouseEvent&&"function"==typeof window.MouseEvent?b=new window.MouseEvent("mouseup"):(b=document.createEvent("MouseEvent"),b.initMouseEvent("mouseup",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null)),a.dispatchEvent(b)}var c=[],e={};return{attachInputEvents:function(f){-1==c.indexOf(f)&&function(){c.push(f);var g=!1,h=function(c){var d=this.getBoundingClientRect(),e={x:c.clientX-d.left,y:c.clientY-d.top};g&&b(this),g=e.x>this.clientWidth||e.y>this.clientHeight,g?(c.stopPropagation(),c.stopImmediatePropagation(),document.addEventListener("mouseup",i),document.addEventListener("pointerup",i)):(d=this.getBoundingClientRect(),a.dispatchAction({eventName:"mousedown",event:{srcEvent:c,clientX:c.clientX-d.left,clientY:c.clientY-d.top}}))},i=function a(){g&&(g=!1,document.removeEventListener("mouseup",a),document.removeEventListener("pointerup",a))};f.addEventListener("mousedown",h),f.addEventListener("pointerdown",h),f.directEventHandlers={},f.handleEventDirect=function(a){f.directEventHandlers["handle"+a.type]&&f.directEventHandlers["handle"+a.type](a)};var j=function(a,b,c){a.addEventListener(b,c),a.directEventHandlers&&(a.directEventHandlers["handle"+b]=function(b){c.apply(a,[b])})},k=function(b){if(b.touches&&b.touches.length>0){var c=this.getBoundingClientRect();a.dispatchAction({eventName:"touchstart",event:{clientX:b.touches[0].clientX-c.left,clientY:b.touches[0].clientY-c.top,srcEvent:b}})}},l=function(b){var c=this.getBoundingClientRect();a.dispatchAction({eventName:"wheel",event:{srcEvent:b,clientX:b.clientX-c.left,clientY:b.clientY-c.top}}),b.preventDefault()},m=function(b){var c=this.getBoundingClientRect();a.dispatchAction({eventName:"mousemove",event:{clientX:b.clientX-c.left,clientY:b.clientY-c.top,srcEvent:b}})},n=function(b){var c=this.getBoundingClientRect();a.dispatchAction({eventName:"mouseup",event:{clientX:b.clientX-c.left,clientY:b.clientY-c.top,srcEvent:b}})},o=function(b){var c=this.getBoundingClientRect();a.dispatchAction({eventName:"contextmenu",event:{clientX:b.clientX-c.left,clientY:b.clientY-c.top,srcEvent:b}}),b.preventDefault()},p=function(b){a.dispatchAction({eventName:"keydown",event:{srcEvent:b}})},q=function(b){a.dispatchAction({eventName:"keyup",event:{srcEvent:b}})};new d.Manager(f,{domEvents:!0,recognizers:[[d.Pan,{direction:d.DIRECTION_ALL}],[d.Pinch,{enable:!0},["pan"]],[d.Tap,{time:499,threshold:9}],[d.Tap,{event:"doubletap",taps:2,threshold:9},["tap"]],[d.Press,{time:500,threshold:9}]]}).id="inputeventsinterfacefactory";var r=function(b){var c=f.getBoundingClientRect();a.dispatchAction({eventName:"pinchstart",event:{clientX:b.gesture.center.x-c.left,clientY:b.gesture.center.y-c.top,srcEvent:b}})},s=function(b){var c=f.getBoundingClientRect();a.dispatchAction({eventName:"pinch",event:{scale:b.gesture.scale,clientX:b.gesture.center.x-c.left,clientY:b.gesture.center.y-c.top,srcEvent:b}})},t=function(b){var c=f.getBoundingClientRect();a.dispatchAction({eventName:"pinchmove",event:{scale:b.gesture.scale,clientX:b.gesture.center.x-c.left,clientY:b.gesture.center.y-c.top,srcEvent:b}})},u=function(b){var c=f.getBoundingClientRect();a.dispatchAction({eventName:"pinchend",event:{clientX:b.gesture.center.x-c.left,clientY:b.gesture.center.y-c.top,srcEvent:b}})},v=function(b){if(g)b.stopPropagation(),b.stopImmediatePropagation();else{var c=f.getBoundingClientRect();a.dispatchAction({eventName:"panstart",event:{clientX:b.gesture.center.x-c.left,clientY:b.gesture.center.y-c.top,deltaX:b.gesture.deltaX,deltaY:b.gesture.deltaY,srcEvent:b}})}},w=function(b){if(g)b.stopPropagation(),b.stopImmediatePropagation();else{var c=f.getBoundingClientRect();a.dispatchAction({eventName:"pan",event:{clientX:b.gesture.center.x-c.left,clientY:b.gesture.center.y-c.top,deltaX:b.gesture.deltaX,deltaY:b.gesture.deltaY,srcEvent:b}})}},x=function(b){if(g)b.stopPropagation(),b.stopImmediatePropagation();else{var c=f.getBoundingClientRect();a.dispatchAction({eventName:"panend",event:{clientX:b.gesture.center.x-c.left,clientY:b.gesture.center.y-c.top,deltaX:b.gesture.deltaX,deltaY:b.gesture.deltaY,velocityX:b.gesture.velocityX,velocityY:b.gesture.velocityY,srcEvent:b}})}},y=function(b){if(g)b.stopPropagation(),b.stopImmediatePropagation();else{var c=f.getBoundingClientRect();a.dispatchAction({eventName:"press",event:{clientX:b.gesture.center.x-c.left,clientY:b.gesture.center.y-c.top,srcEvent:b}})}},z=function(b){if(g)b.stopPropagation(),b.stopImmediatePropagation();else{var c=f.getBoundingClientRect();a.dispatchAction({eventName:"pressup",event:{clientX:b.gesture.center.x-c.left,clientY:b.gesture.center.y-c.top,srcEvent:b}})}},A=function(b){if(g)b.stopPropagation(),b.stopImmediatePropagation();else{var c=f.getBoundingClientRect();b.gesture&&(b.gesture.srcEvent instanceof window.MouseEvent&&void 0!==window.TouchEvent&&e.event instanceof window.TouchEvent&&!(window.performance.now()-e.time>500)||a.dispatchAction({eventName:"tap",event:{clientX:b.gesture.center.x-c.left,clientY:b.gesture.center.y-c.top,srcEvent:b}}),e={event:b.gesture.srcEvent,time:window.performance.now()})}},B=function(b){if(g)b.stopPropagation(),b.stopImmediatePropagation();else{var c=f.getBoundingClientRect();a.dispatchAction({eventName:"doubletap",event:{clientX:b.gesture.center.x-c.left,clientY:b.gesture.center.y-c.top,srcEvent:b}})}};j(f,"touchstart",k),j(f,"wheel",l),j(f,"mousemove",m),j(f,"mouseup",n),j(f,"pointerup",n),j(f,"contextmenu",o),j(f,"pinchstart",r),j(f,"pinch",s),j(f,"pinchmove",t),j(f,"pinchend",u),j(f,"panstart",v),j(f,"pan",w),j(f,"panend",x),j(f,"press",y),j(f,"pressup",z),j(f,"tap",A),j(f,"doubletap",B),j(window,"keydown",p),j(window,"keyup",q)}()},testEvent:{isGesture:function(a){return!!(a&&a.srcEvent&&a.srcEvent.gesture)},isTouch:function(a){return!(!this.isGesture(a)||"touch"!=a.srcEvent.gesture.pointerType)},isTouchStart:function(a){return!(!this.isGesture(a)||!a.srcEvent.gesture.srcEvent||"touchstart"!==a.srcEvent.gesture.srcEvent.type)},isTouchEnd:function(a){return!(!this.isGesture(a)||!a.srcEvent.gesture.srcEvent||"touchend"!==a.srcEvent.gesture.srcEvent.type)},isPan:function(a){return!(!this.isTouch(a)||!/pan/i.test(a.srcEvent.type))}}}}var d;return a("default",c),{setters:[function(a){d=a.default}],execute:function(){}}}),a.register("8a",["41","29","2e","2f","38","90","91","92","22","3b"],function(a,b){"use strict";function c(a,b,c,s,t,u,v,w,x){function y(a){function d(a,b,c){var d=[],e=new Set,f=a.getSelection(!1);f.forEach(function(a){e.add(a)}),f.forEach(function(a){var f=b.sheetTemplate.getObject(a);k(f)?N.add(f):j(f)&&H.push(f),f.pins&&function(){var a=b.design.findInstancesOfTemplate(f.templateGUID)[0];f.pins.forEach(function(f){var g=a.getPinInstance(f.name),h=c.getWires(g);h.length?h.forEach(function(a){var f=c.getWireTerminals(a);f.from.connectable.pinID&&f.to.connectable.pinID&&e.has(f.from.connectable.parent.templateGUID)&&e.has(f.to.connectable.parent.templateGUID)&&(d.push(a.templateGUID),x&&x.removedItems.has(a.templateGUID)&&x.removedItems.delete(a.templateGUID),N.add(b.sheetTemplate.getObject(a.templateGUID)))}):S.push({pinInstance:g,pinTemplate:f})})}()}),a.selectioninterface.selectElements(d.map(function(b){return a.getSingleObject(b)}),a,{})}function f(a,b){b.forEach(function(b){var c=a.getSingleObject(b);a.selectioninterface.unselectElement(c,a,null)})}R=[];var n=a(),o=c.getCommandObject("moveselection"),v=!1;return n&&!I&&o&&o.enabled&&function(){var a=n.sheetTemplateController,c=a.sheetTemplate;d(n,a,a.netlistController),G=b.getSelectedElements(n);var j=G.map(function(a){return c.getObject(a.id)});L=a.wiringController.getReroutingInfo(j),L.forEach(function(b){x&&x.removedItems.has(b.wireGraphic.templateGUID)&&x.removedItems.delete(b.wireGraphic.templateGUID);var c=b.floatingTerminal.connectable;if(c.parent){var d=a.sheetTemplate.getObject(c.parent.templateGUID),e=d.pins.get(c.pinID),f={x:e.connectionX,y:e.connectionY},g=c!==b.to.connectable?b.to.connectable:b.from.connectable,h=void 0,i=void 0;if(g.parent){h=a.sheetTemplate.getObject(g.parent.templateGUID).pins.get(g.pinID),i={x:h.connectionX,y:h.connectionY}}else h=a.sheetTemplate.getObject(g.templateGUID),i=h.point;U.push({pinInstance:c,pinTemplate:f,validPoint:i})}});var k=a.design;k.getAllSectionInstances().concat(k.getAllConnectorInstances()).forEach(function(b){b.pinInstances.forEach(function(d){var e=a.netlistController.getWires(d),f=c.getObject(b.templateGUID).pins.get(d.pinID);X.potentialConnectionPointUnderPin({x:f.connectionX,y:f.connectionY},f,c)&&W.push(f),e.length||T.push({pinTemplate:f,pinInstance:d})})}),P=l(),P.size={cx:a.sheetTemplate.size.width+1,cy:a.sheetTemplate.size.height+1},P.drawHardOpenRect({x0:0,y0:0,x1:a.sheetTemplate.size.width,y1:a.sheetTemplate.size.height});var y=new Set;n.getSelection().forEach(function(b){y.add(a.sheetTemplate.getObject(b))}),L.length<=r&&L.forEach(function(a){y.add(a.wireGraphic)}),a.sheetTemplate.drawOnRouterMap(P,y),P.movingSelectedWires=!0,X.routerMap=P;var z=n.feedbackContent,A="http://www.w3.org/2000/svg";I=document.createElementNS(A,"g"),J=document.createElementNS(A,"g"),z.appendChild(I),z.appendChild(J),I.classList.add("dragging"),J.classList.add("nims_ghost_wire");var B=document.createElementNS(A,"rect");B.setAttribute("x",0),B.setAttribute("y",0),B.setAttribute("width",1),B.setAttribute("height",1),B.setAttribute("fill","transparent"),B.setAttribute("stroke","transparent"),L.length<=r&&L.forEach(function(a){a.feedbackPath=document.createElementNS(A,"path"),a.feedbackPath.classList.add("nims_wirePath"),J.appendChild(a.feedbackPath);var b=n.getSingleObject(a.wireGraphic.templateGUID);b.classList.contains("hidden")||(R.push(b),b.classList.add("hidden")),a.wireGraphic.children.forEach(function(a){var b=n.getSingleObject(a.templateGUID);b.classList.contains("hidden")||(R.push(b),b.classList.add("hidden"))})});var C=[];if(G.forEach(function(a){var b=a.getAttribute("id"),d=c.getObject(b);if(d.parent)C.push(d.templateGUID);else{var e=a.cloneNode(!0);if(a.classList.contains("hidden")||(R.push(a),a.classList.add("hidden")),I.appendChild(e),s.hideLollipopsForTemplateObject(n,b),d&&(d.children&&d.children.forEach(function(a){C.push(a.templateGUID)}),i(d)&&(M.set(d,e),d.probeType!==p.PROBE_EXPRESSION&&d.probeType!==p.PROBE_DATA))){e.appendChild(m.createGhostJunction({x:0,y:0},!0,n));var f=e.querySelector(".nims_graphics");if(f&&f.removeAttribute("disabled"),d.probeType===p.PROBE_DIGITAL){var g=e.querySelector("text");g&&(g.innerHTML=q.NoValue)}}}}),f(n,C),K={sheetTemplateController:a,templateGUIDs:n.getSelection(!1),offset:null},K.templateGUIDs.length){if(1===n.getSelection().length){var D=c.getObject(n.getSelection()[0]);if(Z=g(D)||h(D)){da=n,ea=n.gridToSvg({x:(D.rawBoundingBox.left+D.rawBoundingBox.right)/2,y:(D.rawBoundingBox.top+D.rawBoundingBox.bottom)/2});var E=t.getOrientation(D.matrix);$=E.rotateAngle,aa=_=E.isHorizFlip,ba=I.querySelector(".nims_symbol").getCTM().scale(1/n.viewObject.getZoomDecimal()),ca=n.viewObject.getZoom()}w&&(ja(da,ea,null,O),fa=!0)}C.forEach(function(a){var b=n.getSingleObject(a);if(b)if(b instanceof SVGElement){if("nims_zoom_independent_text_layer"!==b.parentNode.id){var c=b.cloneNode(!0);c.classList.add("nims_child_item"),I.appendChild(c)}b.classList.contains("hidden")||(R.push(b),b.classList.add("hidden"))}else b.classList.contains("hidden")||(R.push(b),b.classList.add("hidden"))}),n.classList.add("nims_object_dragging"),w||o.startCommand(e.i18n.translate("move.").fetch(),K),n.viewObject.listeners.notifyListeners(n.viewObject.viewEvents.USER_ACTION_STARTED,{viewobject:n.viewObject,command:"move"}),u.activateCancel(e.i18n.translate("Cancel move objects").fetch(),"multisim:cancel",null,e.i18n.translate("Cancel").fetch(),null),x&&x.removedItems.size&&x.removalMsg(),v=!0}R.forEach(function(b){var d=b.getAttribute("id"),e=a.sheetTemplate.getObject(d);e&&e.removeFromObjectLookup(c.objectLookup)})}(),v}function z(b,c){O=!0;var f=c();return f&&I&&function(){var g={x:b.clientX,y:b.clientY},h=f.gridToSvg(f.svgToGrid(f.viewObject.viewToContent(g)));Array.from(I.querySelectorAll(".nims_text.nims_child_item")).forEach(function(a){a.style.display="none"});var i={x:a.x,y:a.y};f.viewObject.inputEventsInterface.testEvent.isPan(b)&&(i.y+=60),h=t.calculateElementPos(I,c(),i,h),fa&&(h={x:0,y:0},fa=!1),I.setAttribute("transform","translate("+h.x+","+h.y+")");var j=f.sheetTemplateController;ga(g,f),setTimeout(function(){ga(g,f)},100),Y=null;var k=new Set;N.forEach(function(a){var b=Q.checkWireInterference(a.path.map(function(a){return{x:a.x+h.x/10,y:a.y+h.y/10}}),!1,f.sheetTemplateController,P);O=O&&!b.isOverlapping,O||(Y=function(){var a=b.angledWireOverPin?"You cannot start or end a wire on an angled wire.":"Cannot have overlapping wires.";f.wiringcontroller.notifications.notify(e.i18n.translate(a).fetch(),f.wiringcontroller.notifications.ETypes.NT_INFO)}),b.connectablePoints.forEach(function(a){if(k.has(a.pinTemplate)){var b=!1,c=H.filter(function(b){return b.point.x+h.x/10===a.pinTemplate.connectionX&&b.point.y+h.y/10===a.pinTemplate.connectionY});c.length&&(b=j.wiringController.getNumberOfConnectionsForJunction(c[0].templateGUID)>3),O=O&&c.length&&!b,b?Y=function(){f.wiringcontroller.notifications.notify(e.i18n.translate("No space left on junction.").fetch(),f.wiringcontroller.notifications.ETypes.NT_INFO)}:c.length||(Y=function(){f.wiringcontroller.notifications.notify(e.i18n.translate("Cannot connect to where one wire crosses over another.").fetch(),f.wiringcontroller.notifications.ETypes.NT_INFO)})}k.add(a.pinTemplate)})}),H.forEach(function(a){var b={x:a.point.x+h.x/10,y:a.point.y+h.y/10},c=P.getContent(b.x,b.y),d=(c===P.CONTENT.m_cellObstHorPin||c===P.CONTENT.m_cellObstVertPin)&&!T.some(function(a){return a.pinTemplate.connectionX==b.x&&a.pinTemplate.connectionY==b.y}),g=c===P.CONTENT.m_cellObstHor||c===P.CONTENT.m_cellObstVert||c===P.CONTENT.m_cellObstJunc||d||ia(j,c,b)||c===P.CONTENT.m_cellObstJunc||c===P.CONTENT.m_cellObstAngle;O=O&&!g,g&&(Y=function(){f.wiringcontroller.notifications.notify(e.i18n.translate("Cannot have overlapping wires.").fetch(),f.wiringcontroller.notifications.ETypes.NT_INFO)})}),ja(f,h,k,O),i=A(f),M.forEach(function(a,b){var c=j.probeController.getProbeStateAtPoint({x:b.matrix.e+i.x,y:b.matrix.f+i.y},b),e=j.probeController.getProbeStateBasedOnReference(b,c.disabled);c.disabled||e?a.classList.contains("probeGhostDisabled")||a.classList.add("probeGhostDisabled"):a.classList.remove("probeGhostDisabled");var g=f.sheetTemplateController.design.findInstance(f.contextGUID,b.templateGUID),h=b.matrix.clone(),k=a.querySelector(".arrow");if(k){var l=g.reversed?c.vertical?270:180:c.vertical?90:0,m=h.inverse().translate(b.matrix.e,b.matrix.f),n=new d;n.transform(m.a,m.b,m.c,m.d,m.e,m.f).rotateDeg(l),k.setAttribute("transform",n.toCSS())}}),da=f,ea=f.viewObject.viewToContent(g)}(),!0}function A(a){var b={x:0,y:0};if(I&&a){var c=I.transform.baseVal.getItem(0);b={x:c.matrix.e,y:c.matrix.f},b=a.svgToGrid(b)}return b}function B(a,e,f,g){var h=null;if(e()&&I&&!g&&z(a,e,f),e()&&(O||g))return I&&function(){X.removeGhostJunctions(),h=e(),h.classList.remove("nims_object_dragging"),h.viewObject.viewElement.classList.remove("nocursor"),h.viewObject.viewElement.classList.remove("invalid_position");var a=void 0;if(Z){var f=1/h.viewObject.getZoomDecimal(),i=I.querySelector(".nims_symbol").getCTM().scale(f),j=ba.e*(h.viewObject.getZoom()/ca),k=ba.f*(h.viewObject.getZoom()/ca);a=h.svgToGrid({x:Math.round((i.e-j)*f),y:Math.round((i.f-k)*f)});var l=(new d).transform(i.a,i.b,i.c,i.d,a.x,a.y);K.orientData={objectMatrix:l,flipStats:{isHorizFlip:_,startingFlip:aa}}}else a=A(h);I&&(I.parentNode.removeChild(I),I=null),J&&(J.parentNode.removeChild(J),J=null),g||function(){var d=h.getSelection(!1),e=h.sheetTemplateController,f=c.getCommandObject("moveselection");if(f){K.sheetTemplateController=e,K.templateGUIDs=d,K.offset=a,K.wireUpdateInfo=L.map(function(b){var c=void 0,d=void 0,f=void 0,g=void 0;return f=b.from.connectable.pinID?e.sheetTemplate.getObject(b.from.connectable.parent.templateGUID).getSymbolPin(b.from.connectable.pinID):e.sheetTemplate.getObject(b.from.connectable.templateGUID),g=b.to.connectable.pinID?e.sheetTemplate.getObject(b.to.connectable.parent.templateGUID).getSymbolPin(b.to.connectable.pinID):e.sheetTemplate.getObject(b.to.connectable.templateGUID),f&&(c=b.floatingTerminal===b.from?Z?V.get(b.from.connectable.pinID):{x:(f.connectionX||f.point.x)+a.x,y:(f.connectionY||f.point.y)+a.y}:{x:f.connectionX||f.point.x,y:f.connectionY||f.point.y}),g&&(d=b.floatingTerminal===b.to?Z?V.get(b.to.connectable.pinID):{x:(g.connectionX||g.point.x)+a.x,y:(g.connectionY||g.point.y)+a.y}:{x:g.connectionX||g.point.x,y:g.connectionY||g.point.y}),{templateWire:b.wireGraphic,fromPos:c,toPos:d,floatingTerminalDescriptor:b.floatingTerminalDescriptor,originalFloatPoint:b.floatingTerminal===b.from?{x:f.connectionX||f.point.x,y:f.connectionY||f.point.y}:{x:g.connectionX||g.point.x,y:g.connectionY||g.point.y}}}),K.routingBreakThreshold=r;var g=function(){w&&(f=c.getCommandObject(w)),f.stopCommand(),u.deactivateCancel(),R=[],1===G.length&&b.isJunctionSelection(G[0])&&b.clearSelection(h)};e.moveObjects(K),T=T.filter(function(a){var b=W.some(function(b){return b===a.pinTemplate}),c=S.some(function(b){return b.pinTemplate===a.pinTemplate});return!b||c}),X.doAutoConnect(h,g,T)}}()}(),h.viewObject.listeners.notifyListeners(h.viewObject.viewEvents.USER_ACTION_ENDED,{viewobject:h.viewObject,command:"move"}),h.viewObject.inputEventsInterface.testEvent.isTouch(a)&&h.viewObject.listeners.notifyListeners(h.viewObject.viewEvents.USER_ACTION_ENDED,{viewobject:h.viewObject,command:"pan"}),v.unregisterLastTool(),!0;!O&&Y&&Y()}function C(){return(w?c.getCommandObject(w):c.getCommandObject("moveselection")).stopCommand(!0),!0}function D(a){var b=a(),c=b.getSelection(!1),d=b.sheetTemplateController,e=d.sheetTemplate;B(null,a,null,!0),R.forEach(function(a){a.classList.remove("hidden");var b=a.getAttribute("id"),c=e.getObject(b);c&&c.addToObjectLookup(e.objectLookup)}),e.listeners.notifyListeners(f.SHEET_OBJECTS_CHANGED,{added:[],removed:[],modified:c}),u.deactivateCancel()}function E(a){Z&&($=($+a)%360,t.updateOrientation({didFlip:!1,didRotate:!0},I,ea,da,$,_,ja))}function F(){Z&&(_=!_,t.updateOrientation({didFlip:!0,didRotate:!1},I,ea,da,$,_,ja))}var G=null,H=[],I=null,J=null,K=null,L=null,M=new Map,N=new Set,O=!0,P=void 0,Q=n({},"",{}),R=[],S=[],T=[],U=[],V=void 0,W=[],X=o.createAutoConnectSubCommand(),Y=null,Z=!1,$=void 0,_=void 0,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=!1,ga=function(a,b){t.autoScroll(a,I,b)},ha=function(a,b){var c=a.viewObject,d=!0;V=new Map,Y=null;var e=b.querySelectorAll("[oecl\\:pinid]");return[].forEach.call(e,function(b){var e=b.getAttribute("oecl:pinid"),f=b.querySelector("[oecl\\:pin] line"),g=f.getTransformToElement(f.ownerSVGElement),h=c.contentElement.contentSVG.createSVGPoint(),i=h.matrixTransform(g),j=c.contentElement.svgToGrid(i);V.set(e,j);var k=!1;if(!U.some(function(a){return a.pinInstance.pinID===e})){var l=S.filter(function(a){return a.pinInstance.pinID===e})[0].pinTemplate;k=X.onPinPointMove({x:j.x,y:j.y},a,l),d=d&&!k.invalidPointMsg}k.invalidPointMsg&&(Y=k.invalidPointMsg)}),d},ia=function(a,b,c){var d=!1;if(b===P.CONTENT.m_cellObstFull){d=a.sheetTemplate.objectLookup.getObjectsAtPoint(c.x,c.y).filter(function(a){return k(a)}).length}return d},ja=function(a,b,c,d){O=d;var e=a.sheetTemplateController;X.removeGhostJunctions(),Z?O=O&&ha(a,I.querySelector(".nims_symbol")):S.forEach(function(c){var d=a.svgToGrid(b),e=X.onPinPointMove({x:c.pinTemplate.connectionX+d.x,y:c.pinTemplate.connectionY+d.y},a);O=O&&!e.invalidPointMsg,e.invalidPointMsg&&(Y=e.invalidPointMsg)}),c&&c.forEach(function(b){X.onPinPointMove({x:b.connectionX,y:b.connectionY},a)}),U.forEach(function(a){var c=Z?V.get(a.pinInstance.pinID):{x:a.pinTemplate.x+b.x/10,y:a.pinTemplate.y+b.y/10},d=P.getContent(c.x,c.y),f=d===P.CONTENT.m_cellFree||d===P.CONTENT.m_cellObstFull&&!ia(e,d,c)||a.validPoint.x===c.x&&a.validPoint.y===c.y;O=O&&f}),O?(I.classList.remove("wireOverlap"),J.classList.remove("wireOverlap"),a.viewObject.viewElement.classList.remove("nocursor"),a.viewObject.viewElement.classList.remove("invalid_position")):(I.classList.add("wireOverlap"),J.classList.add("wireOverlap"),a.viewObject.viewElement.classList.add("nocursor"),a.viewObject.viewElement.classList.add("invalid_position"),X.removeGhostJunctions()),L.length<=r&&L.forEach(function(c){var d=void 0,f=void 0,g=void 0,h=void 0,i=a.svgToGrid(b);g=c.from.connectable.pinID?e.sheetTemplate.getObject(c.from.connectable.parent.templateGUID).getSymbolPin(c.from.connectable.pinID):e.sheetTemplate.getObject(c.from.connectable.templateGUID),h=c.to.connectable.pinID?e.sheetTemplate.getObject(c.to.connectable.parent.templateGUID).getSymbolPin(c.to.connectable.pinID):e.sheetTemplate.getObject(c.to.connectable.templateGUID),g&&(d=c.floatingTerminal===c.from?Z?V.get(c.from.connectable.pinID):{x:(g.connectionX||g.point.x)+i.x,y:(g.connectionY||g.point.y)+i.y}:{x:g.connectionX||g.point.x,y:g.connectionY||g.point.y}),h&&(f=c.floatingTerminal===c.to?Z?V.get(c.to.connectable.pinID):{x:(h.connectionX||h.point.x)+i.x,y:(h.connectionY||h.point.y)+i.y}:{x:h.connectionX||h.point.x,y:h.connectionY||h.point.y}),c.feedbackPath.setAttribute("d",""),a.setWirePath(c.feedbackPath,[d,f])})};return{onStart:y,onPan:z,onMouseMove:z,onPanEnd:B,onTap:B,onRightButtonUp:C,onCancel:D,rotateComp:E,flipComp:F}}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.isTemplateComponent,h=a.isTemplateConnector,i=a.isTemplateProbe,j=a.isTemplateJunction,k=a.isTemplateWire},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.EDigitalProbeSymbolText}],execute:function(){r=1e3}}}),a.register("93",["41","89","2f","8a","92"],function(a,b){"use strict";function c(a,b,c){function k(a,b,c,d){var g=b.getGridSize(),h=g/2,i={x:((d.x-c.x+h)/g|0)*g,y:((d.y-c.y+h)/g|0)*g},j=f(a,{x:0,y:0}),k=e(a);k.left=i.x+(k.left-j.x),k.right=i.x+(k.right-j.x),k.top=i.y+(k.top-j.y),k.bottom=i.y+(k.bottom-j.y);var l=b.getSheetSize();l.width*=g,l.height*=g;var n=m(k,{x:1,y:1,x2:l.width-2,y2:l.height-2},b.getGridSize());return i.x+=n.x,i.y+=n.y,i}function l(a,b,c,d){var g=a.querySelector(".nims_graphics"),h=f(g,c),i=f(g,{x:0,y:0}),j=b.snapToGrid({x:d.x-h.x+i.x,y:d.y-h.y+i.y}),k=e(a);k.left=j.x+(k.left-i.x),k.right=j.x+(k.right-i.x),k.top=j.y+(k.top-i.y),k.bottom=j.y+(k.bottom-i.y);var l=b.getSheetSize();l.width*=b.getGridSize(),l.height*=b.getGridSize();var n=m(k,{x:1,y:1,x2:l.width-2,y2:l.height-2},b.getGridSize());return j.x+=n.x,j.y+=n.y,j}function m(a,b,c){var d=void 0,e={x:0,y:0};return a.right>b.x2&&(d=Math.ceil((a.right-b.x2)/c)*c,a.left-=d,a.right-=d,e.x-=d),a.bottom>b.y2&&(d=Math.ceil((a.bottom-b.y2)/c)*c,a.top-=d,a.bottom-=d,e.y-=d),a.left<b.x&&(d=Math.ceil((b.x-a.left)/c)*c,a.left+=d,a.right+=d,e.x+=d),a.top<b.y&&(d=Math.ceil((b.y-a.top)/c)*c,a.top+=d,a.bottom+=d,e.y+=d),e}function n(a,b,c){var d=20,f={left:0,top:0,right:c.viewObject.viewElement.clientWidth,bottom:c.viewObject.viewElement.clientHeight},g=e(b),h=c.viewObject.contentToView({x:g.left,y:g.top}),i=c.viewObject.contentToView({x:g.right,y:g.bottom}),j=i.x-h.x,k=i.y-h.y,l=f.right,m=f.bottom,n=k>m-2*d,o=j>l-2*d,p={x:0,y:0};return o?a.x<f.left+l/4?p.x=40*(l/4-h.x)/(l/4):a.x>f.right-l/4&&(p.x=40*(f.right-i.x-l/4)/(l/4)):h.x<f.left+40+d?p.x=d+40-h.x:i.x>f.right-d&&(p.x=f.right-i.x-d),n?a.y<f.top+m/4?p.y=40*(m/4-h.y)/(m/4):a.y>f.bottom-m/4&&(p.y=40*(f.bottom-i.y-m/4)/(m/4)):h.y<f.top+d?p.y=d-h.y:i.y>f.bottom-d&&(p.y=f.bottom-i.y-d),p}function o(a,b,c){if(b){var d=n(a,b,c);(d.x||d.y)&&c.viewObject.offsetPan(d.x,d.y,!0,!1)}}function p(a){var b=[Math.round(a.a),Math.round(a.b),Math.round(a.c),Math.round(a.d)].join(","),c=void 0,d=!1;switch(b){case"1,0,0,1":c=0,d=!1;break;case"0,1,-1,0":c=90,d=!1;break;case"-1,0,0,-1":c=180,d=!1;break;case"0,-1,1,0":c=270,d=!1;break;case"-1,0,0,1":c=0,d=!0;break;case"0,-1,-1,0":c=90,d=!0;break;case"1,0,0,-1":c=180,d=!0;break;case"0,1,1,0":c=270,d=!0}return{rotateAngle:c,isHorizFlip:d}}function q(a,b,c,e,f,g,h){var i=1/e.viewObject.getZoomDecimal(),j=b.querySelector(".nims_symbol"),k=j.getCTM().scale(i),m=b.getCTM().scale(i),n=(k.e-m.e)*i,o=(k.f-m.f)*i,q=(new d).transform(k.a,k.b,k.c,k.d,0,0),r=p(k),t=f-r.rotateAngle;if(t&&a.didRotate){var u=new d;u.rotateDeg(t),q=u.concat(q)}if(g!==r.isHorizFlip&&a.didFlip){var v=new d;v.flipX(),q=v.concat(q),s(j)}q.e=n,q.f=o;var w=q.toCSS();j.setAttribute("transform",w);var x=j.querySelector(".nims_graphics").getBBox(),y={x:x.x+x.width/2,y:x.y+x.height/2},z=l(j,e,y,c);n=z.x-m.e*i,o=z.y-m.f*i,q.e=n,q.f=o,w=q.toCSS(),j.setAttribute("transform",w),h(e,c,null,!0)}function r(d){var e=this,f=d.templateComponent,k=null,l=function(){var g=d.view.gridToSvg({x:(f.rawBoundingBox.left+f.rawBoundingBox.right)/2,y:(f.rawBoundingBox.top+f.rawBoundingBox.bottom)/2}),h=d.view.selectioninterface;h.clearSelectionUnboundedItems(d.view);var j=i(g,h,a,d.view.wiringcontroller,e,c,b,d.commandID);b.registerTool(j),d.view.viewObject.listeners.notifyListeners(d.view.viewObject.viewEvents.USER_ACTION_STARTED,{viewobject:d.view.viewObject,command:"move"})};if(g(f)||h(f)){j.createAutoConnectSubCommand().checkPinPositionAfterOrienting(d.templateGUID,d.sheetTemplateController)&&(k=l)}return k}function s(a){for(var b=a.querySelectorAll("text"),c=0;c<b.length;c++){var d=b[c].getBBox().width,e=b[c].transform.baseVal,f=e.getItem(0),g=e.getItem(1);if(0===g.angle){var h=d;"end"===b[c].getAttribute("text-anchor")&&(h=-1*d),"middle"===b[c].getAttribute("text-anchor")&&(h=0),e.replaceItem(e.createSVGTransformFromMatrix(f.matrix.translate(h,0).flipX()),0)}-90===g.angle&&e.replaceItem(e.createSVGTransformFromMatrix(f.matrix.translate(3,0).flipX()),0)}}return{calculateSymbolPos:l,calculateElementPos:k,calculateAutoScrollOffset:n,autoScroll:o,getOrientation:p,updateOrientation:q,initFloatMoveState:r,flipTextHorizontal:s}}var d,e,f,g,h,i,j;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.fastBBox,f=a.getTotalTransformOfPoint},function(a){g=a.isTemplateComponent,h=a.isTemplateConnector},function(a){i=a.default},function(a){j=a.default}],execute:function(){}}}),a.register("94",["10","2f"],function(a,b){"use strict";function c(){function a(a){return a.classList.contains(g.SELECTED)}function b(a){return a.classList.contains("nims_junction")}function c(c,d,e,f){a(c)&&!f||(e=e||{},e.reselect=f,c.classList.add(g.SELECTED),b(c)||(c.getAttribute("parent")||f||r++,q.notifyListeners("select",{selectionInterface:s,view:d,elements:[c],extraData:e})))}function h(c,d,e){c.forEach(function(c){a(c)||(c.classList.add(g.SELECTED),c.getAttribute("parent")||b(c)||r++)}),e=e||{},e.reselect=!1,e&&void 0!==e.numSelected&&(r+=e.numSelected,c.length||i(d)),q.notifyListeners("select",{selectionInterface:s,view:d,elements:c.filter(function(a){return!b(a)}),extraData:e})}function i(a){r=0,(a&&a.viewContent?Array.prototype.slice.call(a.viewContent.querySelectorAll("."+g.SELECTED)):[]).forEach(function(a){a.classList.remove(g.SELECTED)})}function j(c){a(c)||(c.classList.add(g.SELECTED),c.getAttribute("parent")||b(c)||r++)}function k(c,d,e){c&&a(c)&&(c.classList.remove(g.SELECTED),b(c)||(c.getAttribute("parent")||r--,q.notifyListeners("unselect",{selectionInterface:s,view:d,elements:l(d),extraData:e})))}function l(a){return Array.from(a&&a.viewContent?a.viewContent.querySelectorAll("."+g.SELECTED):[])}function m(a,b){var c=b.sheetTemplateController,d=c.wiringController.getNumberOfConnectionsForJunction(a.templateGUID);return c.netlistController.getWires(a).forEach(function(a){b.selectioninterface.isSelected(b.getSingleObject(a.templateGUID))&&d--}),d<2}function n(a,b){var c=a&&a.viewContent?a.viewContent.querySelectorAll("."+g.SELECTED+"."+g.WIRE+",."+g.SELECTED+"."+g.JUNCTION):[],d=a.sheetTemplateController,h=!1,i=new Set;a.getSelection(!1).forEach(function(a){i.add(a)});for(var j=new Set,l=c.length;l--;){var n=d.sheetTemplate.getObject(c[l].id);if(f(n)){var o=d.design.findInstancesOfTemplate(n.templateGUID)[0];if(o){var p=d.netlistController.getWireTerminals(o);p.from.junction&&j.add(p.from.junction),p.to.junction&&j.add(p.to.junction)}}}j.forEach(function(b){b&&!i.has(b.templateGUID)&&m(b,a)&&(a.selectUsingGUID(b.templateGUID),i.add(b.templateGUID),h=!0)});for(var q=c.length;q--;){var r=!1,s=d.sheetTemplate.getObject(c[q].id);if(f(s)){var t=d.design.findInstancesOfTemplate(s.templateGUID)[0];if(t){var u=d.netlistController.getWireTerminals(t),v=u.from.connectable.parent?u.from.connectable.parent.templateGUID:u.from.connectable.templateGUID,w=u.to.connectable.parent?u.to.connectable.parent.templateGUID:u.to.connectable.templateGUID;r=i.has(v)&&i.has(w)}}if(e(s)){var x=d.design.findInstancesOfTemplate(s.templateGUID)[0];x&&(r=m(x,a))}r||(h=!0,k(c[q],a,b))}return h}function o(a,b){for(var c=a&&a.viewContent?Array.prototype.slice.call(a.viewContent.querySelectorAll("."+g.SELECTED)).concat(Array.prototype.slice.call(a.zoomIndependentTextLayer.querySelectorAll("."+g.SELECTED))):[],d=0;d<c.length;d++)c[d].classList.remove(g.SELECTED);r=0,q.notifyListeners("unselect",{selectionInterface:s,view:a,elements:c,extraData:b})}function p(a,b){q.notifyListeners("select",{selectionInterface:s,view:a,elements:l(a),extraData:b})}var q=d(),r=0,s={Classes:g,isSelected:a,selectElement:c,selectElements:h,clearSelectionSilent:i,makeSelectionSilent:j,unselectElement:k,getSelectedElements:l,clearSelectionUnboundedItems:function(a,b){var c=void 0;do{c=n(a,b)}while(c)},clearSelection:o,isJunctionMovable:m,isJunctionSelection:b,fireSelectionListener:p,get selectionChangeListener(){return q},get numSelectedObjects(){return r},set numSelectedObjects(a){r=a}};return s}var d,e,f,g;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.isTemplateJunction,f=a.isTemplateWire}],execute:function(){g=Object.freeze({SELECTED:"nims_selected",WIRE:"nims_wire",JUNCTION:"nims_junction"})}}}),a.register("95",["10","29","21","96","3e"],function(a,b){"use strict";function c(a,b,c,k){var l=d(),m=a.querySelector("#nims_simoutputcontainer"),n=a.querySelector("#nims_viewscontainer"),o=function(){a.setAttribute("split",a.offsetWidth>a.offsetHeight?j.AO_HORIZONTAL:j.AO_VERTICAL),l.notifyListeners("resize",null)};o(),g.addResizeListener(a,o);var p=function(){m.hasAttribute("focus")&&!n.hasAttribute("focus")||(m.setAttribute("focus",""),m.querySelector("#simulationOutput").outputInterface.activate(),n.removeAttribute("focus")),l.notifyListeners("focus",{focus:"grapher"})},q=function(){!m.hasAttribute("focus")&&n.hasAttribute("focus")||(m.removeAttribute("focus"),n.setAttribute("focus",""),l.notifyListeners("focus",{focus:"schematic "}))},r=b.createCommandObject("grapherview",function(){m.setAttribute("active",""),n.removeAttribute("active"),p(),r.commandLogicState=r.ECommandLogicStates.CLS_ON,s.commandLogicState=r.ECommandLogicStates.CLS_OFF,t.commandLogicState=r.ECommandLogicStates.CLS_OFF;var a=b.getCommandObject("zoomin"),c=b.getCommandObject("zoomout");a&&(a.enabled=!1),c&&(c.enabled=!1),l.notifyListeners("state",i.AS_GRAPH)},!0);r.enabled=!0,r.contextHelper.contextDisable="all",r.contextHelper.contextEnable=[h.CC_SIMULATION,h.CC_EMBEDDED];var s=b.createCommandObject("splitview",function(){p(),q(),m.setAttribute("active",""),n.setAttribute("active",""),r.commandLogicState=r.ECommandLogicStates.CLS_OFF,s.commandLogicState=r.ECommandLogicStates.CLS_ON,t.commandLogicState=r.ECommandLogicStates.CLS_OFF;var a=b.getCommandObject("zoomin"),c=b.getCommandObject("zoomout");a&&(a.enabled=!0),c&&(c.enabled=!0),l.notifyListeners("state",i.AS_SPLIT)},!0);s.enabled=!0,s.contextHelper.contextDisable="all",s.contextHelper.contextEnable=[h.CC_SIMULATION,h.CC_EMBEDDED];var t=b.createCommandObject("schematicview",function(){m.removeAttribute("active"),m.removeAttribute("focus"),n.setAttribute("active",""),n.setAttribute("focus",""),l.notifyListeners("focus",{focus:"schematic "}),r.commandLogicState=r.ECommandLogicStates.CLS_OFF,s.commandLogicState=r.ECommandLogicStates.CLS_OFF,t.commandLogicState=r.ECommandLogicStates.CLS_ON;var a=b.getCommandObject("zoomin"),c=b.getCommandObject("zoomout");a&&(a.enabled=!0),c&&(c.enabled=!0),l.notifyListeners("state",i.AS_SCHEMATIC)},!0);t.enabled=!0,t.contextHelper.contextDisable="all",t.contextHelper.contextEnable=[h.CC_SIMULATION,h.CC_EMBEDDED],k.addKeyHandler("e",!0,!1,!1,!1,function(a){switch(u.areaState){case i.AS_GRAPH:s.startCommand(e.i18n.translate("Split").fetch());break;case i.AS_SCHEMATIC:r.startCommand(e.i18n.translate("Grapher").fetch());break;case i.AS_SPLIT:t.startCommand(e.i18n.translate("Schematic").fetch())}a.preventDefault()},"stopsimulation"),m.addEventListener("mousedown",p,!0),m.addEventListener("touchstart",p,!0),n.addEventListener("mousedown",q,!0),n.addEventListener("touchstart",q,!0),c.dataUpdateListeners.addListener(c.EDataUpdateEvents.AddData,function(a){t.commandLogicState===t.ECommandLogicStates.CLS_ON?a&&a.firstData&&a.activeAnalysis!==f.Interactive&&a.activeAnalysis!==f.DC&&r.startCommand():a&&a.firstData&&p()});var u={EAreaStates:i,EAreaOrientation:j,addResizeListener:function(a){l.addListener("resize",a)},removeResizeListener:function(a){l.removeListener("resize",a)},addFocusListener:function(a){l.addListener("focus",a)},removeFocusListener:function(a){l.removeListener("focus",a)},addStateListener:function(a){l.addListener("state",a)},removeStateListener:function(a){l.removeListener("state",a)},get focusArea(){return m.hasAttribute("focus")?i.AS_GRAPH:n.hasAttribute("focus")?i.AS_SCHEMATIC:null},get areaState(){return r.commandLogicState===t.ECommandLogicStates.CLS_ON?i.AS_GRAPH:s.commandLogicState===t.ECommandLogicStates.CLS_ON?i.AS_SPLIT:i.AS_SCHEMATIC},set areaState(a){switch(a){case i.AS_GRAPH:r.startCommand();break;case i.AS_SPLIT:s.startCommand();break;case i.AS_SCHEMATIC:t.startCommand()}},get areaOrientation(){return a.getAttribute("split")}};return u.areaState=i.AS_SCHEMATIC,u}var d,e,f,g,h,i,j;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.ECommandContexts}],execute:function(){i=Object.freeze({AS_GRAPH:"graph",AS_SPLIT:"split",AS_SCHEMATIC:"schematic"}),j=Object.freeze({AO_VERTICAL:"vertical",AO_HORIZONTAL:"horizontal"})}}}),a.register("49",["10","96"],function(a,b){"use strict";function c(){var a=!0,b=q.getCommandObject("grapherview");b&&b.commandLogicState===b.ECommandLogicStates.CLS_ON&&(a=!1),m.enabled=l&&l.getZoom()!=l.maxZoom&&a,n.enabled=l&&l.getZoom()!=l.minZoom&&a}function d(a,b,d){function g(){var a=!1;return 0===parseInt(d.contentContainer.style.left,10)&&0===parseInt(d.contentContainer.style.top,10)||(a=!0),a}function h(b){var c=a.getBoundingClientRect(),f=b.gesture.center.x-c.left,g=b.gesture.center.y-c.top;r=!0,this.classList.remove("dragging"),p=d.getZoom(),n={x:f,y:g},e(this),d.listeners.notifyListeners(j.USER_ACTION_STARTED,{viewobject:d,command:"zoom"})}function k(b){var c=a.getBoundingClientRect(),e=b.gesture.center.x-c.left,f=b.gesture.center.y-c.top;r=!0,d.offsetPan(e-n.x,f-n.y,!1,!1),n={x:e,y:f},d.setZoom(b.gesture.scale*p,e,f,!1,!1),q=d.getZoom()}function l(b){var e=a.getBoundingClientRect(),h=b.gesture.center.x-e.left,i=b.gesture.center.y-e.top,k=g();r=!0,d.offsetPan(h-n.x,i-n.y,!1,!1),n={x:h,y:i},d.setZoom(q,h,i,!0,!1),d.offsetPan(0,0,!0,!1),f(this),c(),d.listeners.notifyListeners(j.USER_ACTION_ENDED,{viewobject:d,command:"zoom"}),k&&d.listeners.notifyListeners(j.USER_ACTION_STARTED,{viewobject:d,command:"pan"})}function m(b){var e=new Date;switch(e.getTime()>s.getTime()+200&&(t=0),b.deltaMode){case i.DOM_DELTA_LINE:case i.DOM_DELTA_PAGE:t+=(b.wheelDelta||-b.deltaY)>=0?30:-30;break;case i.DOM_DELTA_PIXEL:t+=b.wheelDelta||-b.deltaY}if(s=e,Math.abs(t)>25){var f=a.getBoundingClientRect(),h=t>0?1.1:1/1.1,k=b.clientX-f.left,l=b.clientY-f.top;r=!0,d.listeners.notifyListeners(j.USER_ACTION_STARTED,{viewobject:d,command:"zoom"}),d.setZoom(h*d.getZoom(),k,l,!1,!1),d.setZoom(h*d.getZoom(),k,l,!0,!1),d.listeners.notifyListeners(j.USER_ACTION_ENDED,{viewobject:d,command:"zoom"}),g()&&(d.listeners.notifyListeners(j.USER_ACTION_STARTED,{viewobject:d,command:"pan"}),d.offsetPan(0,0,!0,!1)),c(),t%=25}}d.inputEventsInterface.attachInputEvents(a),d.inputEventsInterface.attachInputEvents(b);var n={x:0,y:0},p=100,q=100,r=!1;o=function(){var a=this.querySelector("schematic-view").viewObject.getScroll;a&&(a().left!=this.scrollLeft&&(this.scrollLeft=a().left),a().top!=this.scrollTop&&(this.scrollTop=a().top))};var s=new Date,t=0;a.addEventListener("touchmove",function(a){a.preventDefault()}),a.addEventListener("pinchstart",h),a.addEventListener("pinch",k),a.addEventListener("pinchend",l),a.addEventListener("wheel",m),b.addEventListener("wheel",m),a.addEventListener("panstart",function(b){var c=a.getBoundingClientRect(),f=b.gesture.center.x-c.left,g=b.gesture.center.y-c.top;r=!0,this.classList.remove("dragging"),this.classList.add("dragging"),n={x:f,y:g},e(this),d.listeners.notifyListeners(j.USER_ACTION_STARTED,{viewobject:d,command:"pan"})}),a.addEventListener("pan",function(b){if(this.classList.contains("dragging")){var c=a.getBoundingClientRect(),e=b.gesture.center.x-c.left,f=b.gesture.center.y-c.top;r=!0,d.offsetPan(e-n.x,f-n.y,!1,!1),n={x:e,y:f}}}),a.addEventListener("panend",function(b){var c=this;this.classList.contains("dragging")&&function(){var e=a.getBoundingClientRect(),h=b.gesture.center.x-e.left,i=b.gesture.center.y-e.top,k=b.gesture.velocityX,l=b.gesture.velocityY;if(k||l)!function(){r=!1;var a=Date.now(),b=150,e=20,m={x:k*e,y:l*e},o=function c(){if(!r){var e=Math.exp((a-Date.now())/b),f={x:m.x*e,y:m.y*e};if(Math.abs(f.x)>.5||Math.abs(f.y)>.5)d.offsetPan(m.x*e,m.y*e,!1,!1),window.requestAnimationFrame(c);else{var k=g();d.offsetPan(h-n.x,i-n.y,!0,!1),!1===k&&d.listeners.notifyListeners(j.USER_ACTION_ENDED,{viewobject:d,command:"pan"})}d.zoomIndependentListeners.notifyListeners(j.SCROLL,{viewobject:d,command:"scroll"})}};f(c),window.requestAnimationFrame(o)}();else{r=!0;var m=g();d.offsetPan(h-n.x,i-n.y,!0,!1),f(c),!1===m&&d.listeners.notifyListeners(j.USER_ACTION_ENDED,{viewobject:d,command:"pan"})}c.classList.remove("dragging")}()}),a.addEventListener("scroll",function(a){a.target.classList.contains("dragging")||d.listeners.notifyListeners(j.CHANGED,{view:d,contentlefttop:d.contentToView({x:d.viewElement.offsetLeft,y:d.viewElement.offsetTop}),final:!0})}),c()}function e(a){a.addEventListener("scroll",o)}function f(a){a.removeEventListener("scroll",o)}var g,h,i,j,k,l,m,n,o,p,q,r,s;return{setters:[function(a){g=a.default},function(a){h=a.default}],execute:function(){i=window.WheelEvent,j=Object.freeze({USER_ACTION_STARTED:"viewActionStarted",USER_ACTION_ENDED:"viewActionEnded",CHANGED:"viewChanged",RESIZE:"viewResized",SCROLL:"viewScrolled"}),k=[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,150,125,110,100,90,75,50,25,20,12.5,10],l=null,m=void 0,n=void 0,o=null,p=!0,q=void 0,r=function(a){q=a,m=a.createCommandObject("zoomin",function(){l&&(l.setZoom(1.1*l.getZoom(),l.viewElement.offsetWidth/2,l.viewElement.offsetHeight/2,!1,!1),l.setZoom(l.getZoom(),l.viewElement.offsetWidth/2,l.viewElement.offsetHeight/2,!0,!1),l.offsetPan(0,0,!0,!1),c())},!0),n=a.createCommandObject("zoomout",function(){l&&(l.setZoom(Math.round(l.getZoom()/1.1),l.viewElement.offsetWidth/2,l.viewElement.offsetHeight/2,!1,!1),l.setZoom(l.getZoom(),l.viewElement.offsetWidth/2,l.viewElement.offsetHeight/2,!0,!1),l.offsetPan(0,0,!0,!1),c())},!0)},s={viewEvents:j,moduleInit:r,create:function(a,b,i,m,n,o){function q(){var a={left:G.offsetLeft,top:G.offsetTop};G.classList.remove("animate"),a.left==G.offsetLeft&&a.top==G.offsetTop||L.listeners.notifyListeners(L.viewEvents.USER_ACTION_ENDED,{viewobject:L,command:"pan"})}function r(){G.classList.add("animate"),G.style.left="0",G.style.top="0"}function s(){y(a,H,G,b),D=1,L.setZoom(L.getZoom(),L.viewElement.offsetWidth/2,L.viewElement.offsetHeight/2,!0,!0),p?L.centerOnPoint(J):L.offsetPan(0,0,!0,!1),K=!1,L.listeners.notifyListeners(j.RESIZE,{width:L.viewElement.offsetWidth,height:L.viewElement.offsetHeight}),L.zoomIndependentListeners.notifyListeners(j.SCROLL,{viewobject:L,command:"scroll"})}function t(){K||(K=!0,window.requestAnimationFrame(s)),o&&o.handleResize()}function u(c){return{x:100*(c.x+a.scrollLeft-G.offsetLeft-b.offsetLeft)/A,y:100*(c.y+a.scrollTop-G.offsetTop-b.offsetTop)/A}}function v(c){return{x:c.x*A/100-a.scrollLeft+G.offsetLeft+b.offsetLeft,y:c.y*A/100-a.scrollTop+G.offsetTop+b.offsetTop}}function w(b){var c=a.getBoundingClientRect();return u({x:b.x-c.left,y:b.y-c.top})}function x(b){var c=a.getBoundingClientRect(),d=v(b);return{x:d.x+c.left,y:d.y+c.top}}function y(a,b,c,d){var e={left:d.offsetLeft-a.scrollLeft,top:d.offsetTop-a.scrollTop},f={cx:d.offsetWidth+a.offsetWidth|0,cy:d.offsetHeight+a.offsetHeight|0};c.style.width=f.cx+"px",c.style.height=f.cy+"px",b.style.width=c.style.width,b.style.height=c.style.height,d.style.left=(f.cx/2-d.offsetWidth/2|0)+"px",d.style.top=(f.cy/2-d.offsetHeight/2|0)+"px";var g=d.offsetLeft-e.left,h=d.offsetTop-e.top;a.scrollLeft=g,a.scrollTop=h,a.scrollLeft==g&&a.scrollTop==h||(c.style.left=(a.scrollLeft-g|0)+"px",c.style.top=(a.scrollTop-h|0)+"px"),d.nims_original.left=100*d.offsetLeft/A|0,d.nims_original.top=100*d.offsetTop/A|0}function z(){if(a.offsetWidth>0&&a.offsetHeight>0){var b={x:(a.offsetLeft+a.offsetLeft+a.offsetWidth)/2,y:(a.offsetTop+a.offsetTop+a.offsetHeight)/2};J=u(b)}}var A=100,B=1e3,C=10,D=0,E=a.scrollLeft,F=a.scrollTop,G=document.createElement("div"),H=document.createElement("div"),I=m,J={x:500,y:350};a.appendChild(H),a.style.overflow="auto",a.style.position="absolute",a.style.left="0",a.style.top="0",a.style.right="0",a.style.bottom="0",H.style.position="relative",H.style.overflow="hidden",H.classList.add("nims_view_RubberBandContainer"),H.appendChild(G),H.nims_original={left:0,top:0,width:H.offsetWidth,height:H.offsetHeight},G.style.position="absolute",G.style.left="0",G.style.top="0",G.classList.add("nims_view_contentcontainer"),G.appendChild(b),G.nims_original={left:0,top:0,width:G.offsetWidth,height:G.offsetHeight},b.style.position="absolute",b.nims_original={left:b.offsetLeft,top:b.offsetTop,width:b.offsetWidth,height:b.offsetHeight};var K=!1;window.addEventListener("resize",t),h.addResizeListener(a,t),y(a,H,G,b);var L={viewEvents:j,inputEventsInterface:i,get minZoom(){return C},get maxZoom(){return B},get guid(){return I},viewToContent:u,contentToView:v,screenToContent:w,contentToScreen:x,get commandInterface(){return n},get center(){return p?J:null},set center(a){J=a},getScroll:function(){return{left:E,top:F}},getZoom:function(){return A},getZoomDecimal:function(){return A/100},setZoom:function(c,d,e,f,g){if(q(),c!==A||f&&0!==D){var h=u({x:d,y:e});if(f)for(var i=0;i<k.length;i++)if(c>=k[i]){c>k[i]&&(c=D>0?k[Math.max(0,i-1)]:k[Math.min(k.length-1,i)]);break}var j=0|Math.min(B,Math.max(C,c));D=j-A||D,A=j,H.style.left=(H.nims_original.left*A/100|0)+"px",H.style.top=(H.nims_original.top*A/100|0)+"px",G.style.left=(G.nims_original.left*A/100|0)+"px",G.style.top=(G.nims_original.top*A/100|0)+"px",b.style.left=(b.nims_original.left*A/100|0)+"px",b.style.top=(b.nims_original.top*A/100|0)+"px",b.style.width=(b.nims_original.width*A/100|0)+"px",b.style.height=(b.nims_original.height*A/100|0)+"px",y(a,H,G,b);var l=v(h);this.offsetPan(d-l.x,e-l.y,!1,g)}},offsetPan:function(b,c,d,e){d&&this.active?G.classList.add("animate"):q(),b+=parseInt(G.style.left,10),c+=parseInt(G.style.top,10),G.style.left="0",G.style.top="0";var f=a.scrollLeft-b|0,g=a.scrollTop-c|0;a.scrollLeft=f,a.scrollTop=g,E=a.scrollLeft,F=a.scrollTop,a.scrollLeft==f&&a.scrollTop==g||(G.style.left=((0|a.scrollLeft)-f|0)+"px",G.style.top=((0|a.scrollTop)-g|0)+"px"),d?r():e||z(),this.listeners.notifyListeners(j.CHANGED,{view:this,contentlefttop:v({x:a.offsetLeft,y:a.offsetTop}),final:d})},animateZoomTo:function(c,d,e){q();var f=Date.now(),g=e||500,h={x:c.left+c.width/2,y:c.top+c.height/2,zoomfactor:100*Math.min(a.offsetWidth/c.width,a.offsetHeight/c.height)},i=u({x:a.offsetWidth/2,y:a.offsetHeight/2}),j=this,l=h.zoomfactor>this.getZoom()?function(a){return Math.pow(a,100/A)}:function(a){return Math.pow(a,A/100)},m=h.zoomfactor>this.getZoom()?function(a){return Math.pow(a,1/a)}:function(a){return Math.pow(a,Math.max(.1,.2-a*a))};if(i.zoomfactor=this.getZoom(),!d){for(var n=0;n<k.length;n++)if(h.zoomfactor>=k[n]){h.zoomfactor>k[n]&&(h.zoomfactor=k[Math.min(k.length-1,n)]);break}h.zoomfactor=0|Math.min(B,Math.max(C,h.zoomfactor))}d=d||r;var o=function c(){var e=(Date.now()-f)/g,k=void 0;if(e<1){A=i.zoomfactor+(h.zoomfactor-i.zoomfactor)*m(e),k=v({x:i.x+(h.x-i.x)*l(e),y:i.y+(h.y-i.y)*l(e)});var n=u({x:k.x,y:k.y});H.style.left=(H.nims_original.left*A/100|0)+"px",H.style.top=(H.nims_original.top*A/100|0)+"px",G.style.left=(G.nims_original.left*A/100|0)+"px",G.style.top=(G.nims_original.top*A/100|0)+"px",b.style.left=(b.nims_original.left*A/100|0)+"px",b.style.top=(b.nims_original.top*A/100|0)+"px",b.style.width=(b.nims_original.width*A/100|0)+"px",b.style.height=(b.nims_original.height*A/100|0)+"px",y(a,H,G,b);var o=v(n);j.offsetPan(a.offsetWidth/2-o.x,a.offsetHeight/2-o.y,!1,!1),window.requestAnimationFrame(c)}else k=v(h),j.setZoom(h.zoomfactor,k.x,k.y,!1,!1),d()};window.requestAnimationFrame(o)},centerOnPoint:function(b){if(a.offsetWidth>0&&a.offsetHeight>0){var c={x:(a.offsetLeft+a.offsetLeft+a.offsetWidth)/2,y:(a.offsetTop+a.offsetTop+a.offsetHeight)/2},d=v(b);this.offsetPan(c.x-d.x,c.y-d.y,!0,!1)}},centerContent:function(){b.offsetWidth>0&&b.offsetHeight>0&&a.offsetWidth>0&&a.offsetHeight>0&&this.centerOnPoint({x:b.offsetWidth/2,y:b.offsetHeight/2})},getContentSize:function(){return{cx:b.nims_original.width,cy:b.nims_original.height}},setContentSize:function(c,d){q();var e=this.getContentSize();b.nims_original.width=Math.min(1e6,Math.max(1,c)),b.nims_original.height=Math.min(1e6,Math.max(1,d)),b.style.width=(b.nims_original.width*this.getZoom()/100|0)+"px",b.style.height=(b.nims_original.height*this.getZoom()/100|0)+"px",y(a,H,G,b),this.offsetPan(0,0,!0,!1),"function"==typeof this.onContentSizeChange&&this.onContentSizeChange(this.getContentSize(),e),this.listeners.notifyListeners(j.CHANGED,{view:this,contentlefttop:v({x:a.offsetLeft,y:a.offsetTop}),final:!0})},onContentSizeChange:null,listeners:g(),zoomIndependentListeners:g(),activate:function(){l=this,c()},get active(){return l===this},get viewElement(){return a},get contentElement(){return b},get contentContainer(){return G},startEdgeScrollPrevention:function(){e(a)},stopEdgeScrollPrevention:function(){f(a)},getVisibleRectangle:function(){return{left:Math.max(0,a.scrollLeft-G.offsetLeft-b.offsetLeft),top:Math.max(0,a.scrollTop-G.offsetTop-b.offsetTop),right:Math.min(b.offsetWidth,a.offsetWidth+a.scrollLeft-G.offsetLeft-b.offsetLeft),bottom:Math.min(b.offsetHeight,a.offsetHeight+a.scrollTop-G.offsetTop-b.offsetTop)}},getViewPortRectangle:function(){var a=this.getVisibleRectangle(),b={x:100*a.left/A,y:100*a.top/A},c={x:100*a.right/A,y:100*a.bottom/A};return{left:b.x,top:b.y,right:c.x,bottom:c.y}}},M=null,N={transition:"transitionend",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var O in N)if(O in L.contentContainer.style){M=N[O];break}return M&&L.contentContainer.addEventListener(M,function(){L.listeners.notifyListeners(j.CHANGED,{view:L,contentlefttop:v({x:a.offsetLeft,y:a.offsetTop}),final:!0})},!1),L.centerContent(),d(a,L.contentElement.feedBack,L),L}},a("default",s)}}}),a.register("97",[],function(a,b){"use strict";function c(a){void 0===a&&(a=location.href);for(var b={},c=a.slice(a.indexOf("?")+1),d=c.split("&"),e=0;e<d.length;e++){var f=d[e],g=f.indexOf("=");if(g>-1){var h=decodeURIComponent(f.slice(0,g)),i=decodeURIComponent(f.slice(g+1));b[h]=i;var j=h.toLowerCase();j!==h&&(b[j]=i)}else if(f.length>0){var k=decodeURIComponent(f),l=!0;b[k]=l;var m=k.toLowerCase();m!==k&&(b[m]=l)}}return b}function d(a,b){return c(b)[a.toLowerCase()]}return a("loadSearchParameters",c),a("getURLParameter",d),{setters:[],execute:function(){a("default",c)}}}),a.register("98",[],function(a,b){"use strict";function c(a,b,c){for(var d=arguments.length,e=Array(d>3?d-3:0),f=3;f<d;f++)e[f-3]=arguments[f];window.SystemJS.import(b).then(function(d){if(d&&d[c]){try{a(d[c].apply(window,e))}catch(a){console.log(a)}window.SystemJS.delete(document.location.origin+b)}})}return a("default",c),{setters:[],execute:function(){}}}),a.register("99",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(a){return function(b){function c(a,b,c,d){var f=b&&b.prototype instanceof e?b:e,g=Object.create(f.prototype),h=new m(d||[]);return g._invoke=j(a,c,h),g}function d(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}function e(){}function f(){}function g(){}function h(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}function i(a){function b(c,e,f,g){var h=d(a[c],a,e);if("throw"!==h.type){var i=h.arg,j=i.value;return j&&"object"==typeof j&&r.call(j,"__await")?Promise.resolve(j.__await).then(function(a){b("next",a,f,g)},function(a){b("throw",a,f,g)}):Promise.resolve(j).then(function(a){i.value=a,f(i)},g)}g(h.arg)}function c(a,c){function d(){return new Promise(function(d,e){b(a,c,d,e)})}return e=e?e.then(d,d):d()}"object"==typeof process&&process.domain&&(b=process.domain.bind(b));var e;this._invoke=c}function j(a,b,c){var e=x;return function(f,g){if(e===z)throw new Error("Generator is already running");if(e===A){if("throw"===f)throw g;return o()}for(;;){var h=c.delegate;if(h){if("return"===f||"throw"===f&&h.iterator[f]===p){c.delegate=null;var i=h.iterator.return;if(i){var j=d(i,h.iterator,g);if("throw"===j.type){f="throw",g=j.arg;continue}}if("return"===f)continue}var j=d(h.iterator[f],h.iterator,g);if("throw"===j.type){c.delegate=null,f="throw",g=j.arg;continue}f="next",g=p;var k=j.arg;if(!k.done)return e=y,k;c[h.resultName]=k.value,c.next=h.nextLoc,c.delegate=null}if("next"===f)c.sent=c._sent=g;else if("throw"===f){if(e===x)throw e=A,g;c.dispatchException(g)&&(f="next",g=p)}else"return"===f&&c.abrupt("return",g);e=z;var j=d(a,b,c);if("normal"===j.type){e=c.done?A:y;var k={value:j.arg,done:c.done};if(j.arg!==B)return k;c.delegate&&"next"===f&&(g=p)}else"throw"===j.type&&(e=A,f="throw",g=j.arg)}}}function k(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function l(a){var b=a.completion||{};b.type="normal",delete b.arg,a.completion=b}function m(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(k,this),this.reset(!0)}function n(a){if(a){var b=a[t];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var c=-1,d=function b(){for(;++c<a.length;)if(r.call(a,c))return b.value=a[c],b.done=!1,b;return b.value=p,b.done=!0,b};return d.next=d}}return{next:o}}function o(){return{value:p,done:!0}}var p,q=Object.prototype,r=q.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},t=s.iterator||"@@iterator",u=s.toStringTag||"@@toStringTag",v="object"==typeof a,w=b.regeneratorRuntime;if(w)return void(v&&(a.exports=w));w=b.regeneratorRuntime=v?a.exports:{},w.wrap=c;var x="suspendedStart",y="suspendedYield",z="executing",A="completed",B={},C={};C[t]=function(){return this};var D=Object.getPrototypeOf,E=D&&D(D(n([])));E&&E!==q&&r.call(E,t)&&(C=E);var F=g.prototype=e.prototype=Object.create(C);f.prototype=F.constructor=g,g.constructor=f,g[u]=f.displayName="GeneratorFunction",w.isGeneratorFunction=function(a){var b="function"==typeof a&&a.constructor;return!!b&&(b===f||"GeneratorFunction"===(b.displayName||b.name))},w.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,g):(a.__proto__=g,u in a||(a[u]="GeneratorFunction")),a.prototype=Object.create(F),a},w.awrap=function(a){return{__await:a}},h(i.prototype),w.AsyncIterator=i,w.async=function(a,b,d,e){var f=new i(c(a,b,d,e));return w.isGeneratorFunction(b)?f:f.next().then(function(a){return a.done?a.value:f.next()})},h(F),F[u]="Generator",F.toString=function(){return"[object Generator]"},w.keys=function(a){var b=[];for(var c in a)b.push(c);return b.reverse(),function c(){for(;b.length;){var d=b.pop();if(d in a)return c.value=d,c.done=!1,c}return c.done=!0,c}},w.values=n,m.prototype={constructor:m,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.tryEntries.forEach(l),!a)for(var b in this)"t"===b.charAt(0)&&r.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=p)},stop:function(){this.done=!0;var a=this.tryEntries[0],b=a.completion;if("throw"===b.type)throw b.arg;return this.rval},dispatchException:function(a){function b(b,d){return f.type="throw",f.arg=a,c.next=b,!!d}if(this.done)throw a;for(var c=this,d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if("root"===e.tryLoc)return b("end");if(e.tryLoc<=this.prev){var g=r.call(e,"catchLoc"),h=r.call(e,"finallyLoc");if(g&&h){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else if(g){if(this.prev<e.catchLoc)return b(e.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return b(e.finallyLoc)}}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&r.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&("break"===a||"continue"===a)&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);var f=e?e.completion:{};return f.type=a,f.arg=b,e?this.next=e.finallyLoc:this.complete(f),B},complete:function(a,b){if("throw"===a.type)throw a.arg;"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=a.arg,this.next="end"):"normal"===a.type&&b&&(this.next=b)},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),l(c),B}},catch:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if("throw"===d.type){var e=d.arg;l(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){return this.delegate={iterator:n(a),resultName:b,nextLoc:c},B}}}("object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:this),a.exports}({exports:{}}))}}}),a.register("9a",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}if(!g.done)return Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)});a(h)}return d("next")})}})}}}),a.register("9b",["99","9a","1d","1e","22","21","9c","9d","9e","12","9f"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.generateMeasurementsLivePreconfigScopeUrl},function(a){j=a.default},function(a){k=a.checkLocalConnectionAsync},function(a){l=a.getDoNotTrack},function(a){m=a.isSupportedStreamingBrowser,n=a.streamingWarningMessage}],execute:function(){o=function(){function a(b){e(this,a);var c=b.designInstanceGetter,d=b.streamToMeasurementsDialog,f=b.simulationController,g=b.activeViewGetter,h=b.commandInterface;this.designInstanceGetter=c,this.streamToMeasurementsDialog=d,this.simulationController=f,this.activeViewGetter=g,this.commandInterface=h,this.multisimDeviceController=f.multisimDeviceController,this.checkFeatureDialog=d.$.checkFeature,this.checkFeatureDialog.browser=j.isChrome?"Chrome":"Safari",this.checkFeatureDialog.streamingWarning=n("Multisim Live"),this.checkFeatureDialog.addEventListener("neverShowDoNotTrackInSafari",function(a){a.detail.hide?localStorage.setItem("neverShowDoNotTrackInSafari","true"):localStorage.removeItem("neverShowDoNotTrackInSafari")})}return f(a,[{key:"_getVoltageProbes",value:function(){var a=this.designInstanceGetter().probeController;return a.getProbes().filter(function(b){return a.getProbeType(b)===g.PROBE_VOLTAGE&&0!==a.getNetlistVariablesForProbe(b).length})}},{key:"getDoNotTrack",value:function(){return l()}},{key:"isSupportedStreamingBrowser",value:function(){return m()}},{key:"doesNotSupportLocalConnection",value:function(){function a(){return b.apply(this,arguments)}var b=d(c.mark(function a(){var b;return c.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!j.isChrome){a.next=2;break}return a.abrupt("return",!1);case 2:return b=!1,a.prev=3,a.next=6,k();case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(3),b=!0;case 11:return a.abrupt("return",b);case 12:case"end":return a.stop()}},a,this,[[3,8]])}));return a}()},{key:"showDialogAsync",value:function(){function a(){return b.apply(this,arguments)}var b=d(c.mark(function a(){var b,d,e,f,g=this;return c.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.doesNotSupportLocalConnection();case 2:b=a.sent,d=this.getDoNotTrack(),e="yes"===d||"Safari"===this.checkFeatureDialog.browser&&"unknown"===d&&null===localStorage.getItem("neverShowDoNotTrackInSafari"),f=!m(),e||b||f?(this.checkFeatureDialog.showDoNotTrackEnabled=e,this.checkFeatureDialog.showNotSupportLocalConnection=b,this.checkFeatureDialog.showUnsupportedStreamingBrowserDialog=f,this.checkFeatureDialog.hideIgnoreToggle="unknown"!==d,this.checkFeatureDialog.$.ignoreToggle.checked=!1,this.checkFeatureDialog.open()):function(){var a=g._getVoltageProbes();g.streamToMeasurementsDialog.open(a),g.streamToMeasurementsDialog.addEventListener("closing",function(a){g.simulationController.isInSimulation&&g.simulationController.activeAnalysis!==h.Interactive&&(g.streamToMeasurementsDialog.$.promptDialog.analysisType=g.simulationController.activeAnalysis,a.preventDefault())},{once:!0}),g.streamToMeasurementsDialog.addEventListener("close",function(b){if(!b.detail.canceled){var c=g.activeViewGetter().sheetTemplateController;a.forEach(function(a){c.probeController.showStreamToMeasurementsLive(a,!0)}),g.simulationController.isInSimulation&&g.simulationController.activeAnalysis!==h.Interactive&&g.commandInterface.getCommandObject("stopsimulation").startCommand(),g.simulationController.activeAnalysis=h.Interactive,g.commandInterface.getCommandObject("runsimulation").startCommand();var d=i({multisimTabId:g.multisimDeviceController.getTimeStampId(),probes:b.detail.selectedVoltageProbeIDs});window.open(d,"_blank");try{track("Use new feature","preset scope opened")}catch(a){}}},{once:!0})}();case 7:case"end":return a.stop()}},a,this)}));return a}()}]),a}(),p=function(a){return new o(a)},a("default",p)}}}),a.register("a0",["3e","29","61","97","98","4f","28","4c","a1","17","9b"],function(a,b){"use strict";function c(a,b,c,d,e){c?v.getSubscriptionInfo(function(f){!c.hasSeenMetadata||c.designMetaData.private&&!f.canSavePrivate?(t.preferredName=d,t.open(b,e?e():null),a.$.file&&a.$.file.close()):b(!0)}):b(!1)}function d(a,b,c,d,h,O,P,Q,R,S){function T(a){a.$.modifiedfileconfirmdialog.init(y);var b=function(b){!I&&a.confirmCallback&&(I=a.confirmCallback,a.confirmCallback=null),I&&(I(b,L),I=null)};a.$.modifiedfileconfirmdialog.onOk=function(){b(K.CE_SECONDBUTTON)},a.$.modifiedfileconfirmdialog.onCancel=function(){b(K.CE_THIRDBUTTON)},a.firstButton=a.$.modifiedfileconfirmdialog.addButton(),a.firstButton.addEventListener("tap",function(){b(K.CE_FIRSTBUTTON)}),v.listeners.addListener(v.fileDataEvents.FDE_HOMELINKCHANGED,function(a){x=a})}function U(a,b){function c(b){I=b,a.$.modifiedfileconfirmdialog.open()}var d=r();d.modified?c(function(c,e){c!=K.CE_THIRDBUTTON&&(c==K.CE_FIRSTBUTTON?Z(a,!1,function(a,c){a&&c&&(d.modified=!1,b()),e&&e(a,c)},J):(d.modified=!1,b()))}):b()}function V(){ea.showDialogAsync()}function W(a,b){a.$.modifiedfileconfirmdialog.stringOK=b.i18n.translate("Discard").fetch(),a.firstButton.textContent=b.i18n.translate("Save").fetch(),a.$.modifiedfileconfirmdialog.label=b.i18n.translate("You have unsaved changes.").fetch()}function X(a){v.getSubscriptionInfo(function(b){if(b.userInfo.alias){r().userName=b.userInfo.alias}H.handleWaitStart({message:E}),g.notifyTracker("download-circuit",{circuit_url:window.location.href}),i(function(a){a&&a(),H.handleWaitStop({message:E})},"/api/v1/fetch-resource/exporters/uploaddownload.js","createSaveToDiskFunction",a)})}function Y(a,b,c,d){H.handleWaitStart({message:F}),g.notifyTracker("upload-circuit",{circuit_url:window.location.href}),i(function(a){a&&a(b),H.handleWaitStop({message:F})},"/api/v1/fetch-resource/exporters/uploaddownload.js","createLoadFromDiskFunction",a,Z,c,d)}function Z(a,b,c,d){q.activeAppMode!==e.CC_EMBEDDED&&function(){d.doCancel(),a.$.file&&a.$.file.close();var e=r();v.loggedIn(function(d){d?v.getSubscriptionInfo(function(d){d.userInfo.alias&&(e.userName=d.userInfo.alias),e.componentCount>d.componentLimit?(e.componentLimitExceededError(f.i18n.translate("You need a Premium account to save a circuit with more than %1$s components.").fetch(d.componentLimit),f.i18n.translate("Login to save a circuit with more than %1$s components.").fetch(d.componentLimit)),c&&c(!1,!1)):b||e&&!e.owner?M(a,e,c):N(a,null,!1,!0,function(a,b){c&&c(!a,b)})}):(u.open(e.name),c&&c(!1,!1))})}()}function $(){var a="ms14export";D.clearMessages(a),v.getSubscriptionInfo(function(b){if(b.userInfo.alias){r().userName=b.userInfo.alias}H.handleWaitStart({message:E}),g.notifyTracker("export-desktop",{circuit_url:window.location.href}),i(function(b){b?b(A.toString(!0),function(b){b.result?v.doSaveToDisk(b.result,r().name+".ms14"):b.error&&!b.silentError?D.doMessage({type:l.NT_ERROR,subtype:a,toast:!1,message:f.i18n.translate(b.error.message).fetch(),group:{name:"Export",info:{displayName:f.i18n.translate("Export").fetch(),timestamp:new Date}}}):(D.doMessage({type:l.NT_ERROR,subtype:a,toast:!1,message:f.i18n.translate("An unknown error occured while exporting the design.").fetch(),group:{name:"Export",info:{displayName:f.i18n.translate("Export").fetch(),timestamp:new Date}}}),window.multisim.silentFail(b.error)),H.handleWaitStop({message:E})}):H.handleWaitStop({message:E})},"/api/v1/fetch-resource/exporters/desktopmultisim.js","createSaveToDesktopFunction",j,k,n,m,z)})}function _(){var a=r(),b=a.name+".net",c=o(a,z,null,null,null,!0);v.doSaveToDisk(c,b)}function aa(){v.exportSVG()}function ba(){g.notifyTracker("export-schematicimage",{circuit_url:window.location.href}),v.createPNG(function(a){a&&v.doSaveToDisk(a,r().name+"-schematic.png")},["#nims_zoom_independent_text_layer"])}function ca(){var a=B,b=a?a.toString():"",c=r(),d=c.name+".csv";try{g.notifyTracker("export-simresults",{circuit_url:window.location.href}),v.doSaveToDisk(b,d)}catch(a){}}function da(){var a=C.getGraph(v,{x:1280,y:1024,background:"#fff"});if(a){var b=r(),c=b.name+"-Grapher.png";g.notifyTracker("export-graphimage",{circuit_url:window.location.href}),v.doSaveToDisk(a.data,c)}}q=a.commandInterface,r=b,s=a.activeViewGetter,t=c,u=d,v=a.fileDataController,w=a.simulationController,H=a.waitscreen,y=h,z=O,A=P,B=Q,C=R,J=a.cancelInterface,D=a.messageHandler;var ea=p({designInstanceGetter:r,streamToMeasurementsDialog:S,simulationController:w,activeViewGetter:s,commandInterface:q});return f.addReadyListener(function(a){E=a.i18n.translate("Downloading file ...").fetch(),F=a.i18n.translate("Uploading file ...").fetch(),G=a.i18n.translate("Saving file ...").fetch()}),{attachToolbar:T,showConfirmationDialog:U,showStreamToMeasurementsDialog:V,updateConfirmDialogStrings:W,downloadCircuitFile:X,uploadCircuitFile:Y,handleSaveOrSaveAs:Z,downloadAsDesktopMultisimFile:$,downloadSPICENetlist:_,downloadCircuitSVG:aa,downloadCircuitPNG:ba,downloadSimulationDataCSV:ca,downloadSimulationImagePNG:da,streamToMeasurementsController:ea}}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;return a("default",d),{setters:[function(a){e=a.ECommandContexts},function(a){f=a.default},function(a){g=a.default},function(a){h=a.getURLParameter},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.ENotifyType},function(a){m=a.EOeclVariableType,n=a.substituteOECLVariables},function(a){o=a.toString},function(a){p=a.default}],execute:function(){q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z=null,A=null,B=null,C=null,D=null,E="",F="",G="",H=null,I=null,J=null,K=Object.freeze({CE_FIRSTBUTTON:"first",CE_SECONDBUTTON:"second",CE_THIRDBUTTON:"third"}),L=function(a,b){H.handleWaitStop({message:G})},M=function(a,b,c){b&&function(){var d={hasSeenMetadata:b.hasSeenMetadata,copiedFrom:b.copiedFrom,projectID:b.projectID,guid:b.guid,userName:b.userName};b.hasSeenMetadata=!1,b.copiedFrom=b.projectID||b.copiedFrom,b.projectID=null,b.guid=null,v.getDefaultProjectName(b.name,function(e){N(a,e,!0,b.owner,function(a,e){a&&(b.hasSeenMetadata=d.hasSeenMetadata,b.copiedFrom=d.copiedFrom,b.projectID=d.projectID,b.guid=d.guid,b.userName=d.userName),c&&c(!a,e)})})}()},N=function(a,b,d,e,f){c(a,function(b){b?function(){var b=r(),c=[{postfix:"msjs",guid:"",type:"msjs",data:A.toString()||""}];H.handleWaitStart({message:G}),x&&(x.circuitdetails&&d?g.notifyTracker("copy-circuit",{circuit_url:window.location.href}):x.circuitdetails||g.notifyTracker("create-circuit",{circuit_url:window.location.href})),v.createCSSCache(),v.doSaveToServer(b,function(c,d,e,g,i){if(c===v.responseCodes.RC_UNAUTHORIZED)a.updateControlStates(v),f&&f(!0,!1),v.destroyCSSCache();else if(c===v.responseCodes.RC_OK||c===v.responseCodes.RC_CREATED){if(f&&f(!1,!1),!e&&!g&&!i){var j="";if(d&&d.cloud&&d.cloud.html_url){document.title=d.design.name,j=d.cloud.html_url+"open/",/^https?:\/\//i.test(j)&&document.location.protocol!==j.substring(0,document.location.protocol.length)&&(j=j.replace(/^https:/i,document.location.protocol).replace(/^http:/i,document.location.protocol));var k=h("iframeid");if(k&&window.parent&&window.multisim.browserDetect.isIFrame){var l={messagetype:"filesaved",iframeid:k,oldurl:document.location.protocol+"//"+document.location.host+document.location.pathname,newurl:j};window.parent.postMessage(JSON.stringify(l),"*")}document.location.search&&(j=""+j+document.location.search),j!==document.location.href&&window.history.pushState({pageTitle:d.design.name},"",j),b.projectID=d.design.id,b.guid=d.design.guid,b.owner=!0,window.requestInfo.owner=!0,a.updateControlStates(v);var m=[{postfix:"thumbnailcircuit",guid:"",type:"svg",data:C.getMiniPreviewSVG(v)||""},{postfix:"previewcircuit",guid:"",type:"html",data:C.getPreviewHTML(v)||""}],n=C.getGraph(v,{x:685,y:385,background:"transparent"}),o={postfix:"previewgraph.png",guid:"",type:"png"};n&&n.data&&n.hasData?(o.data=n.data,m.push(o)):b.projectID&&v.doDelete(function(){},b.projectID,b.guid,o);var p=C.getSimulationData(b.simulationController),q={postfix:"simdata",guid:"",type:"simdata"};p?(q.data=p,m.push(q)):b.projectID&&v.doDelete(function(){},b.projectID,b.guid,q),v.doSaveToServer(b,function(a,d,e,g,h,i){if(e||g||h)c!=v.responseCodes.RC_OK&&c!=v.responseCodes.RC_CREATED&&v.destroyCSSCache();else{i&&(i(),b.modified=!1),H.handleWaitStop({message:G});var j={background:"white"};C.getMiniPreviewPNG(v,function(a){if(a){var d=[{postfix:"pngthumbnailcircuit",guid:"",type:"png",data:a||""}];v.doSaveToServer(b,function(a,d,e,g,h){if(e||g||h)c!=v.responseCodes.RC_OK&&c!=v.responseCodes.RC_CREATED&&v.destroyCSSCache();else{var i={baseWidth:700,minWidth:350,minHeight:200,maxHeight:400,background:void 0};C.getMiniPreviewPNG(v,function(a){if(a){var c=[{postfix:"pngthumbnail",guid:"",type:"png",data:a||""}];v.doSaveToServer(b,function(){f&&f(!1,!0),v.destroyCSSCache()},c,null,!1)}else f&&f(!1,!0)},i)}},d,null,!1)}else f&&f(!1,!0)},j)}},m,null,!1)}}}else f&&f(!0,!1),v.destroyCSSCache()},c,null,!0)}():f&&f(!0,!1)},r(),b,function(){return d?e?a.stringSaveAsNewCircuit:a.stringSaveToMyCircuits:a.stringSaveCircuit})}}}}),a.register("a2",[],function(){return{setters:[],execute:function(){}}}),a.register("a3",[],function(){return{setters:[],execute:function(){}}}),a.register("a4",[],function(){return{setters:[],execute:function(){}}}),a.register("a5",["a7","a6","29","a4"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"dialog-designname",designInstanceGetter:null,resultCallback:null,properties:{preferredName:{type:String,value:null,notify:!0,observer:"_preferrednameChanged"}},_preferrednameChanged:function(){this.$.metapropertycontainer.preferredName=this.preferredName},reset:null,ready:function(){},open:function(a,b){var c=this;c.reset&&c.reset(),c.$.dialogchangename.open(),c.resultCallback=a||null,c.$.dialogchangename.addEventListener("iron-overlay-opened",function(){c.$.metapropertycontainer.preferredName=c.preferredName,c.$.metapropertycontainer.handleShow()}),c.$.dialogchangename.stringDialogTitle=b},initialize:function(a,b){var d=this;c.addReadyListener(function(a){d.$.dialogchangename.stringDialogTitle=a.i18n.translate("Name Circuit").fetch()}),d.$.dialogchangename.initialize(b),d.$.metapropertycontainer.initialize(a);var e=function(){d.$.metapropertycontainer.valid&&(d.$.metapropertycontainer.apply(a),d.resultCallback&&d.resultCallback(!0))},f=function(){d.resultCallback&&d.resultCallback(!1)};d.$.dialogchangename.onOK=e,d.$.dialogchangename.onCancel=f,d.$.metapropertycontainer.handleChange=function(){d.$.dialogchangename.okDisabled=!d.$.metapropertycontainer.valid},d.$.dialogchangename.okDisabled=!d.$.metapropertycontainer.valid,d.reset=function(){this.$.metapropertycontainer.reset(a)}}})}()}}}),a.register("a8",[],function(){return{setters:[],execute:function(){}}}),a.register("a9",["a7","a6","29","a8","50"],function(a,b){"use strict";var c,d;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){},function(a){d=a.basicTextValidate}],execute:function(){!function(){window.Polymer({is:"dialog-feedback",designInstanceGetter:null,resultCallback:null,properties:{},open:function(a){var b=this;b.$.dialogfeedback.open(),b.resultCallback=a||null},getValue:function(){return this.$.description.$.multisimTextInput.value},initialize:function(a,b){var e=this;e.$.dialogfeedback.initialize(b);var f=function(a){e.$.dialogfeedback.stringDialogTitle=a.i18n.translate("Send Feedback").fetch(),e.$.description.label=a.i18n.translate("Thank you for your feedback. What did you like? What can we do better?").fetch(),e.$.dialogfeedback.stringOK=a.i18n.translate("Send").fetch()};c.addReadyListener(f),f.weight=10;var g=function(){e.resultCallback&&e.resultCallback(!0)},h=function(){e.resultCallback&&e.resultCallback(!1)};e.$.dialogfeedback.onOK=g,e.$.dialogfeedback.onCancel=h,e.$.description.validator=function(a){var b=d(a);e.$.dialogfeedback.okDisabled=!b.valid}}})}()}}}),a.register("aa",[],function(){return{setters:[],execute:function(){}}}),a.register("ab",["a7","a6","29","aa"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"dialog-error",properties:{stringDialogMessage:{notify:!0,reflectToAttribute:!0,type:String,value:""},stringErrorURL:String,stringOutOfMemory:String,stringOutOfMemoryURL:String,stringUnknownError:String},errorMessages:Object.freeze({ERR_OUT_OF_MEMORY:"Simulator is out of memory.",ERR_UNKNOWN_ERROR:"An unknown simulation error occurred."}),open:function(a){switch(a){case this.errorMessages.ERR_OUT_OF_MEMORY:this.stringDialogMessage=this.stringOutOfMemory,this.stringErrorURL=this.stringOutOfMemoryURL;break;case this.errorMessages.ERR_UNKNOWN_ERROR:this.stringDialogMessage=this.stringUnknownError,this.stringErrorURL=null}this.$.dialogerror.open()},close:function(){this.$.dialogerror.close()},init:function(a){var b=this,d=b.$.dialogerror;d.initialize(a),d.removeButton("buttoncancel"),c.addReadyListener(function(a){b.stringOK=a.i18n.translate("Close").fetch(),b.stringDialogMessage="",b.stringOutOfMemory=a.i18n.translate(b.errorMessages.ERR_OUT_OF_MEMORY).fetch(),b.stringOutOfMemoryURL=a.i18n.translate('See <a href="http://digital.ni.com/express.nsf/bycode/ex585y" %s>Troubleshooting Tips</a> for more information.').fetch('target="_blank" rel="help"'),b.stringUnknownError=a.i18n.translate(b.errorMessages.ERR_UNKNOWN_ERROR).fetch()})}})}()}}}),a.register("ac",[],function(){return{setters:[],execute:function(){}}}),a.register("ad",["a7","a6","29","ac"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"dialog-logintosave",properties:{label:String},open:function(a){var b=this;c.addReadyListener(function(c){b.label=c.i18n.translate(b.dataController.apiMessages.AM_NOTAUTHORIZED_WRITE).fetch(a)}),b.$.dialoglogintosave.open()},initialize:function(a,b){var d=this;d.dataController=b,d.$.dialoglogintosave.initialize(a);var e=d.$.dialoglogintosave,f=e.addButton("Login");c.addReadyListener(function(a){f.innerHTML=a.i18n.translate("Login").fetch(),e.stringOK=a.i18n.translate("Sign up").fetch(),e.stringCancel=a.i18n.translate("Cancel").fetch()}),d.dataController.listeners.addListener(d.dataController.fileDataEvents.FDE_HOMELINKCHANGED,function(a){d.homeLinkInfo=a,f.addEventListener("tap",function(){d.homeLinkInfo&&window.open(d.homeLinkInfo.login)}),e.onOK=function(){d.homeLinkInfo&&window.open(d.homeLinkInfo.signup)}})}})}()}}}),a.register("ae",[],function(){return{setters:[],execute:function(){}}}),a.register("af",["a7","a6","29","ae"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"dialog-netmerge",properties:{mergedNetName:{reflectToAttribute:!0,type:String,value:""},net1:{notify:!0,reflectToAttribute:!0,type:String,value:""},net2:{notify:!0,reflectToAttribute:!0,type:String,value:""},stringDialogMessage:String},open:function(){this.$.dialogNetMerge.stringOK=this.net1,this.$.dialogNetMerge.stringCancel=this.net2,this.$.dialogNetMerge.open()},init:function(a){var b=this;this.$.dialogNetMerge.initialize(a),c.addReadyListener(function(a){b.$.dialogNetMerge.stringDialogTitle=a.i18n.translate("Select Merged Net Name").fetch(),b.stringDialogMessage=a.i18n.translate("You are merging two nets with defined net names. Select which name you want to use for the merged net.").fetch()})},attached:function(){var a=this;a.$.dialogNetMerge.onOK=function(){a.onSelectName&&a.onSelectName(a.net1)},a.$.dialogNetMerge.onCancel=function(){a.onSelectName&&a.onSelectName(a.net2)}}})}()}}}),a.register("b0",[],function(){return{setters:[],execute:function(){}}}),a.register("b1",["a7","a6","29","b0"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"dialog-split-connectors",properties:{mergedNetName:{reflectToAttribute:!0,type:String,value:""},stringDialogMessage:String},open:function(){this.$.dialogSplitConnectors.open()},init:function(a){var b=this;this.$.dialogSplitConnectors.initialize(a),c.addReadyListener(function(a){b.$.dialogSplitConnectors.stringDialogTitle=a.i18n.translate("Rename all connected connectors?").fetch(),b.$.dialogSplitConnectors.stringOK=a.i18n.translate("Yes").fetch(),b.$.dialogSplitConnectors.stringCancel=a.i18n.translate("No").fetch(),b.stringDialogMessage=a.i18n.translate("You are renaming a connector. Do you want to rename all other connectors with the same name as well?").fetch()})},attached:function(){var a=this;a.$.dialogSplitConnectors.onOK=function(){a.onYes&&a.onYes()},a.$.dialogSplitConnectors.onCancel=function(){a.onNo&&a.onNo()}}})}()}}}),a.register("b2",[],function(){return{setters:[],execute:function(){}}}),a.register("b3",["a7","a6","29","b2"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"dialog-upgrade",properties:{label:{notify:!0,reflectToAttribute:!0,type:String,value:""},loggedInStatus:!1,stringCancel:String,stringFreeAccount:String,stringNotLoggedIn:String},upgradeButton:null,loginButton:null,signupButton:null,homeLinkInfo:null,open:function(){var a=this,b=this.$.dialogupgrade;!0===a.loggedInStatus?""!==a.stringFreeAccount&&(a.label=a.stringFreeAccount,b.upgradeButton.removeAttribute("hidden"),b.signupButton.setAttribute("hidden",""),b.loginButton.setAttribute("hidden","")):""!==a.stringNotLoggedIn&&(a.label=a.stringNotLoggedIn,b.upgradeButton.setAttribute("hidden",""),b.signupButton.removeAttribute("hidden"),b.loginButton.removeAttribute("hidden")),this.$.dialogupgrade.open()},focus:function(){},init:function(a,b){var d=this,e=d.$.dialogupgrade;e.initialize(a),e.loginButton=e.addButton("Login"),e.signupButton=e.addButton("Sign up"),e.upgradeButton=e.addButton("Upgrade"),e.removeButton("buttonok"),c.addReadyListener(function(a){e.stringCancel=a.i18n.translate("Close").fetch(),e.loginButton.innerHTML=a.i18n.translate("Login").fetch(),e.signupButton.innerHTML=a.i18n.translate("Sign up").fetch(),e.upgradeButton.innerHTML=a.i18n.translate("Learn more").fetch()}),b.listeners.addListener(b.fileDataEvents.FDE_HOMELINKCHANGED,function(a){d.homeLinkInfo=a,d.$.dialogupgrade.loginButton.addEventListener("tap",function(){d.homeLinkInfo&&window.open(d.homeLinkInfo.login)}),d.$.dialogupgrade.signupButton.addEventListener("tap",function(){d.homeLinkInfo&&window.open(d.homeLinkInfo.signup)}),d.$.dialogupgrade.upgradeButton.addEventListener("tap",function(){d.homeLinkInfo&&window.open(d.homeLinkInfo.upgrade||"/","_blank")})})},attached:function(){}})}()}}}),a.register("b4",[],function(){return{setters:[],execute:function(){}}}),a.register("b5",["b6","a7","a6","29","21","b4"],function(a,b){"use strict";var c,d,e,f,g;return{setters:[function(a){c=a.default},function(a){},function(a){},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){g=Object.freeze((f={},c(f,e.Interactive,"Interactive"),c(f,e.Transient,"Transient"),c(f,e.AC,"AC Sweep"),c(f,e.DC,"DC Op"),c(f,e.DC_SWEEP,"DC Sweep"),c(f,e.PARAM_SWEEP,"Parameter"),f)),function(){window.Polymer({is:"dialog-prompt-stop-simulation",properties:{analysisType:{type:String,value:""}},_getContent:function(a){if(!d.i18n)return"";var b=d.i18n.translate(g[a]).fetch();return d.i18n.translate("Streaming works in the Interactive simulation mode only. Do you want to stop the %1s simulation and run an Interactive simulation to stream data?").fetch(b)},open:function(){this.$.dialog.open()},close:function(){this.$.dialog.close()},initialize:function(a){var b=this;this.$.dialog.initialize(a),d.addReadyListener(function(a){b.$.dialog.stringOK=a.i18n.translate("Switch to Interactive").fetch()})},ready:function(){var a=this;this.$.dialog.onOK=function(){a.dispatchEvent(new CustomEvent("close",{detail:{canceled:!1}}))},this.$.dialog.onCancel=function(){a.dispatchEvent(new CustomEvent("close",{detail:{canceled:!0}}))}}})}()}}}),a.register("b7",[],function(){return{setters:[],execute:function(){}}}),a.register("b8",["a7","a6","b9","29","b7"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"dialog-stream-to-measurements-step1",properties:{browser:{type:String,value:"Chrome"},streamingWarning:{type:String,value:""},showDoNotTrackEnabled:{type:Boolean,value:!1},showNotSupportLocalConnection:{type:Boolean,value:!1},showUnsupportedStreamingBrowserDialog:{type:Boolean,value:!1},hideIgnoreToggle:{type:Boolean,value:!0}},_getDisplayForIgnoreToggle:function(a,b,c){return c?"none":a&&!b?"block":"none"},_getDisplayForSafariInstruction:function(a){return"Safari"===a?"block":"none"},_getDisplayForChromeInstruction:function(a){return"Chrome"===a?"block":"none"},_getSafariNotTrackingEnabledDisplay:function(a){return a?"list-item":"none"},_getNotSupportLocalConnectionDisplay:function(a){return a?"list-item":"none"},_getSettingsDisplay:function(a){return a?"none":"block"},_getUnsupportedBrowserDisplay:function(a){return a&&(this.$.dialog.stringDialogTitle=""),a?"block":"none"},_getUnsupportedBrowserWarningMessage:function(a){return a},open:function(){this.$.dialog.open()},close:function(){this.$.dialog.close()},initialize:function(a){this.$.dialog.initialize(a)},ready:function(){var a=this,b=this;c.addReadyListener(function(a){b.$.dialog.stringDialogTitle=a.i18n.translate("Browser Configuration").fetch()}),this.$.dialog.$.buttoncancel.style.display="none",this.$.ignoreToggle.addEventListener("changed",function(){a.fire("neverShowDoNotTrackInSafari",{hide:a.$.ignoreToggle.checked})})}})}()}}}),a.register("ba",[],function(){return{setters:[],execute:function(){}}}),a.register("bb",["a7","a6","bc","b5","b8","29","ba"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"dialog-stream-to-measurements",properties:{stringNoProbe:String,stringNone:String},_getDropdowns:function(){return[this.$.channel1,this.$.channel2,this.$.channel3,this.$.channel4]},open:function(a){var b=!a||!a.length,c=[];b?c.push({value:"",displayText:this.stringNoProbe}):(c.push({value:"",displayText:this.stringNone}),a.forEach(function(a){c.push({value:a.probeID,displayText:a.probeID,icon:{id:"multisim:voltageprobe",color:a.getColorAsRGBAString()}})})),this._getDropdowns().forEach(function(a,d){var e=0===d;a.disabled=b,a.value=c[!b&&e?1:0].value,a.options=c}),this.$.dialog.okDisabled=b;try{track("found new feature","stream dialog")}catch(a){}this.$.dialog.open()},close:function(){this.$.dialog.close()},initialize:function(a){this.$.dialog.initialize(a),this.$.checkFeature.initialize(a),this.$.promptDialog.initialize(a)},ready:function(){var a=this,b=this;c.addReadyListener(function(a){b.$.dialog.stringDialogTitle=a.i18n.translate("Stream data to MeasurementsLive").fetch(),b.stringNoProbe=a.i18n.translate("No probes available").fetch(),b.stringNone=a.i18n.translate("None").fetch()});var d=function(){var c=b._getDropdowns().map(function(a){return a.value});a.dispatchEvent(new CustomEvent("close",{detail:{canceled:!1,selectedVoltageProbeIDs:c}}))};b.$.dialog.onOK=function(){a.dispatchEvent(new CustomEvent("closing",{cancelable:!0}))?d():(a.$.promptDialog.open(),new Promise(function(b,c){a.$.promptDialog.addEventListener("close",function(a){a.detail&&a.detail.canceled?c():b()},{once:!0})}).then(function(){d()}).catch(function(){a.dispatchEvent(new CustomEvent("close",{detail:{canceled:!0}}))}))},b.$.dialog.onCancel=function(){a.dispatchEvent(new CustomEvent("close",{detail:{canceled:!0}}))},b._getDropdowns().forEach(function(a){a.addEventListener("valueChanged",function(){return b._checkSelections()})})},_checkSelections:function(){this.$.dialog.okDisabled=!this._getDropdowns().find(function(a){return a.value})}})}()}}}),a.register("bd",[],function(){return{setters:[],execute:function(){}}}),a.register("be",["43","bd"],function(a,b){"use strict";var c;return{setters:[function(a){c=a.default},function(a){}],execute:function(){window.multisim=window.multisim||{},window.multisim.views=window.multisim.views||{},window.multisim.views.webComponents=window.multisim.views.webComponents||{},function(a){function b(a){var b=void 0;if(a){var c=a.split(" ");b={width:Number(c[0]),height:Number(c[1])}}return b}function d(a,b){return"0 0 "+a.width*b+" "+a.height*b}var e={width:100,height:70},f=10,g=null,h=null,i=Object.create(HTMLElement.prototype,{_selectioninterface:{writable:!0,value:null},createdCallback:{value:function(){this.classList.add("nims_schematic_view");var a=window.multisim.templates["base-view"],b=document.importNode(a.content,!0);this.appendChild(b),this.feedBack=this.querySelector(".nims_zoomindependedfeedback"),this.controls=this.querySelector(".nims_controls");var c=null;window.CustomEvent&&"function"==typeof window.CustomEvent?c=new window.CustomEvent("view-ready",{detail:{view:this},bubbles:!0}):(c=document.createEvent("CustomEvent"),c.initCustomEvent("view-ready",!0,!0,{view:this})),document.dispatchEvent(c)}},initialize:{value:function(b,e){g=b,h=e;var f=this.viewContent,i=this.viewContent.id;this.viewContent.id="";var j=f.cloneNode(!0);j.id=i;var k=f.nextSibling;k?f.parentNode.insertBefore(j,k):f.parentNode.appendChild(j),f.parentNode.removeChild(f);var l=document.createElementNS("http://www.w3.org/2000/svg","g");this.viewContent.appendChild(l),l.id="nims_schematic_objects_layer";var m=document.createElementNS("http://www.w3.org/2000/svg","g");this.viewContent.appendChild(m),m.id="nims_probe_layer";var n=this,o=null,p={};n.viewObject.viewElement.onscroll=function(){if(o?(clearTimeout(o),o=0):n.viewObject.listeners.notifyListeners(n.viewObject.viewEvents.USER_ACTION_STARTED,{viewobject:n.viewObject,command:"scroll"}),n.viewObject.zoomIndependentListeners.notifyListeners(n.viewObject.viewEvents.SCROLL,{viewobject:n.viewObject,command:"scroll"}),n.viewObject.contentElement.zoomDependentTextLayer){var b=n.viewObject.getZoom()/100;""!==n.viewObject.contentElement.zoomDependentTextLayer.style.transform||a.isFirefox?(n.viewObject.contentElement.zoomDependentTextLayer.style.zoom="100%",n.viewObject.contentElement.zoomDependentTextLayer.style.transform="scale("+b+","+b+")"):n.viewObject.contentElement.zoomDependentTextLayer.style.zoom&&(n.viewObject.contentElement.zoomDependentTextLayer.style.zoom=100*b+"%")}o=setTimeout(function(){n.contentSVG&&n.controlSVG&&(n.viewObject.listeners.notifyListeners(n.viewObject.viewEvents.USER_ACTION_ENDED,{viewobject:n.viewObject,command:"scroll"}),parseInt(n.viewObject.contentContainer.style.left,10)===n.viewObject.contentContainer.offsetLeft&&parseInt(n.viewObject.contentContainer.style.top,10)===n.viewObject.contentContainer.offsetTop||n.viewObject.listeners.notifyListeners(n.viewObject.viewEvents.USER_ACTION_STARTED,{viewobject:n.viewObject,command:"pan"}))},150)};var q=null,r={transition:"transitionend",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var s in r)if(s in n.viewObject.contentContainer.style){q=r[s];break}q&&n.viewObject.contentContainer.addEventListener(q,function(){n.viewObject.listeners.notifyListeners(n.viewObject.viewEvents.USER_ACTION_ENDED,{viewobject:n.viewObject,command:"pan"})},!1),n.viewObject.listeners.addListener(n.viewObject.viewEvents.USER_ACTION_STARTED,function(a){a&&"move"===a.command&&(n.viewObject.contentElement.zoomDependentTextLayer.style.visibility="hidden"),p[a.command]=!0,1===Object.keys(p).length&&(c.hideAdorners(n),n.updateSelectionDisplay(void 0,{update:!0,command:a.command}))}),n.viewObject.listeners.addListener(n.viewObject.viewEvents.USER_ACTION_ENDED,function(a){if(a&&"move"===a.command&&(n.viewObject.contentElement.zoomDependentTextLayer.style.visibility="inherit"),Object.keys(p).length>0&&(delete p[a.command],!Object.keys(p).length)){var b=a.viewobject.contentElement,d=b.sheetTemplateController.sheetTemplate.getBoundingBoxForItems(b.getSelection(!1));c.setAdornerPlacementRect(d),c.updateAdorners(b.getSelection(!1),b),n.updateSelectionDisplay(void 0,{update:!0,command:a.command}),o&&(clearTimeout(o),o=0)}});var t=this.controlSVG,u=d({width:n.viewObject.viewElement.offsetWidth,height:n.viewObject.viewElement.offsetHeight},1);t.setAttribute("viewBox",u),t.addEventListener("touchmove",function(a){a.preventDefault()}),n.viewObject.listeners.addListener(n.viewObject.viewEvents.RESIZE,function(a){var b=d({width:a.width,height:a.height},1);t.setAttribute("viewBox",b),t.style.width=a.width+"px",t.style.height=a.height+"px"})}},manipulationinterface:{writable:!0},inputeventsinterface:{writable:!0},updateSelectionDisplay:{value:function(a,b){var c=this,d=c.selectioninterface.getSelectedElements(c),e=c.controls;if(e){var f=e.querySelector("#nims_on_schematic_properties_panel");f&&f.handleSelectionChanged&&f.handleSelectionChanged(this,e,a,d,g,h,b)}}},selectioninterface:{set:function(a){var b=this,c=function(a){b.updateSelectionDisplay(void 0,a)};b._selectioninterface&&(b._selectioninterface.selectionChangeListener.removeListener("select",c),b._selectioninterface.selectionChangeListener.removeListener("unselect",c)),b._selectioninterface=a,b._selectioninterface&&(b._selectioninterface.selectionChangeListener.addListener("select",c),b._selectioninterface.selectionChangeListener.addListener("unselect",c))},get:function(){return this._selectioninterface}},zoomIndependedParent:{writable:!0},feedBack:{writable:!0},controls:{writable:!0},attachedCallback:{value:function(){var a=this,b=d(this.getSheetSize(),this.getGridSize());a.contentSVG.setAttribute("viewBox",b),a.zoomIndependedParent&&a.zoomIndependedParent.appendChild(a.feedBack),this.attached=!0}},detachedCallback:{value:function(){this.attached=!1,this.viewObject.viewElement.onscroll=null}},attributeChangedCallback:{value:function(a,c,e){switch(a){case"majorgridinterval":var f=this.getGridSize(),g=this.querySelector("#majorGrid"),h=this.querySelector("#majorGrid>path");g.setAttribute("width",e*f),g.setAttribute("height",e*f),h.setAttribute("d","M "+e*f+" 0 L 0 0 0 "+e*f);break;case"minorgrid":var i=this.querySelector("#minorGrid"),j=this.querySelector("#minorGrid>path");i.setAttribute("width",e),i.setAttribute("height",e),j.setAttribute("d","M "+e+" 0 L 0 0 0 "+e);break;case"sheetsize":var k=b(e),l=d(k,this.getGridSize());this.contentSVG.setAttribute("viewBox",l)}}},removeObjects:{value:function(a){a.forEach(function(a){var b=document.getElementById(a);null!==b&&b.parentNode.removeChild(b)},this)}},getSingleObject:{value:function(a){return document.getElementById(a)||null}},objectToFront:{value:function(a){var b=document.getElementById(a);b.parentNode.appendChild(b)}},getContentSize:{value:function(){var a=this.viewContent,b={top:0,left:0,right:1,bottom:1};if(a.hasChildNodes()){var c=a.getBBox();b={top:0,left:0,right:(c.width+c.x)/this.getGridSize()+.5|0,bottom:(c.height+c.y)/this.getGridSize()+.5|0}}return b}},getSheetSize:{value:function(){return b(this.getAttribute("sheetsize"))||e}},getGridSize:{value:function(){return this.getAttribute("minorgrid")||f}},snapToGrid:{value:function(a){var b=this.getGridSize(),c=b/2,d=a.x>=0?1:-1,e=a.y>=0?1:-1;return{x:((a.x+d*c)/b|0)*b,y:((a.y+e*c)/b|0)*b}}},svgToGrid:{value:function(a){var b=this.getGridSize();return{x:Math.round(a.x/b),y:Math.round(a.y/b)}}},gridToSvg:{value:function(a){var b=this.getGridSize();return{x:a.x*b,y:a.y*b}}},viewObject:{writable:!0,value:null},contentSVG:{get:function(){return this.querySelector("#nims_view")}},controlSVG:{get:function(){return this.feedBack.querySelector("#nims_control_layer")}},zoomIndependentTextLayer:{get:function(){return this.querySelector("#nims_zoom_independent_text_layer")}},zoomDependentTextLayer:{get:function(){return this.querySelector("#nims_zoom_dependent_text_layer")}},viewContent:{get:function(){return this.querySelector("#nims_view_content")}},schematicObjectsLayer:{get:function(){return this.querySelector("#nims_schematic_objects_layer")}},probeLayer:{get:function(){return this.querySelector("#nims_probe_layer")}},feedbackContent:{get:function(){return this.querySelector("#nims_feedback_content")}},hiddenContent:{get:function(){return this.querySelector("#nims_hidden_content")}},getSelection:{value:function(a){var b=[];return this.selectioninterface.getSelectedElements(this).forEach(function(c){c.getAttribute("parent")&&!a||b.push(c.id)}),b}},selectUsingGUID:{value:function(a){var b=this.getSingleObject(a);b&&this.selectioninterface.selectElement(b,this,{},!1)}},sheetTemplateController:{writable:!0,value:null},contextGUID:{writable:!0,value:null}});document.registerElement("base-view",i),this.baseViewPrototype=i}.apply(window.multisim.views.webComponents,[window.multisim.browserDetect])}}}),a.register("bf",[],function(){return{setters:[],execute:function(){}}}),a.register("c0",["89","31","be","bf"],function(a,b){"use strict";var c,d;return{setters:[function(a){c=a.fastBBox},function(a){d=a.default},function(a){},function(a){}],execute:function(){!function(){var a=window.multisim.views.webComponents.baseViewPrototype,b=Object.create(a,{super:{get:function(){return a}},createdCallback:{value:function(){this.super.createdCallback.call(this);var a=window.multisim.templates["schematic-view"],b=document.importNode(a.content,!0);this.appendChild(b)}},wiringcontroller:{writable:!0},initialize:{value:function(a,b){this.super.initialize.call(this,a,b)}},addComponent:{value:function(a){var b=this.schematicObjectsLayer,c=d(a.symbol,this.schematicObjectsLayer),e=a.matrix.clone();e.e=e.e*this.getGridSize(),e.f=e.f*this.getGridSize(),c.setAttribute("transform",e.toCSS()),c.setAttribute("id",a.templateGUID),a.model&&c.classList.add("model"),a.pcbpackage&&c.classList.add("package"),b.appendChild(c)}},addWire:{value:function(a){var b=this.schematicObjectsLayer,c=document.createElementNS("http://www.w3.org/2000/svg","g");c.setAttribute("id",a.guid),c.classList.add("nims_wire");var d=document.createElementNS("http://www.w3.org/2000/svg","path");c.appendChild(d),d.classList.add("nims_wireSelectionPath");var e=document.createElementNS("http://www.w3.org/2000/svg","path");c.appendChild(e),e.classList.add("nims_wirePath"),e.classList.add("wirePath"+a.guid),this.setWirePath(d,a.path),this.setWirePath(e,a.path),b.appendChild(c)}},createJunctionSymbol:{value:function(a){var b=document.createElementNS("http://www.w3.org/2000/svg","g"),c=this.gridToSvg(a.point);b.setAttribute("transform","translate("+c.x+" "+c.y+")"),b.setAttribute("id",a.guid),b.classList.add("nims_junction");var d=document.createElementNS("http://www.w3.org/2000/svg","circle");return d.setAttribute("cx",0),d.setAttribute("cy",0),d.setAttribute("r",2.5),d.classList.add("nims_junctionCircle"),d.classList.add("juncPath"+a.guid),b.appendChild(d),b}},addJunction:{value:function(a){this.schematicObjectsLayer.appendChild(this.createJunctionSymbol(a))}},updateWirePath:{value:function(a,b){var c=a.querySelector(".nims_wirePath"),d=a.querySelector(".nims_wireSelectionPath");c&&(c.setAttribute("d",""),this.setWirePath(c,b)),d&&(d.setAttribute("d",""),this.setWirePath(d,b))}},setWirePath:{value:function(a,b){var c=this;a.setAttribute("d",b.reduce(function(a,b,d){var e=c.gridToSvg(b);return a+(0===d?"M":"L")+e.x+","+e.y},""))}},getObjectBoundingBox:{value:function(a){var b=this.getSVGBoundingBox(a);return b&&(b.left=b.left/this.getGridSize(),b.top=b.top/this.getGridSize(),b.right=b.right/this.getGridSize(),b.bottom=b.bottom/this.getGridSize()),b}},getSVGBoundingBox:{value:function(a){var b=document.getElementById(a),c=null;return b&&function(){for(var a=b.ownerSVGElement,d=b,e=d.querySelector(".nims_graphics"),f=[],g=e.querySelectorAll("[oecl\\:pinid]"),h=0;h<g.length;h++){var i=g[h];f.push({parent:i.parentNode,pin:i}),i.parentNode.removeChild(i)}var j=e.getBBox(),k=b.getTransformToElement(b.parentNode),l=[a.createSVGPoint(),a.createSVGPoint(),a.createSVGPoint(),a.createSVGPoint()];l[0].x=j.x,l[0].y=j.y,l[1].x=j.x+j.width,l[1].y=j.y,l[2].x=j.x+j.width,l[2].y=j.y+j.height,l[3].x=j.x,l[3].y=j.y+j.height;var m=Number.MAX_VALUE,n=Number.MIN_VALUE,o=Number.MAX_VALUE,p=Number.MIN_VALUE;l.forEach(function(a){a=a.matrixTransform(k),m=Math.min(m,a.x),n=Math.max(n,a.x),o=Math.min(o,a.y),p=Math.max(p,a.y)}),c={left:m,top:o,right:n,bottom:p},f.forEach(function(a){a.parent.appendChild(a.pin)})}(),c}},getRawBoundingBox:{value:function(a){var b=document.getElementById(a),d=c(b);return d&&(d.left/=this.getGridSize(),d.top/=this.getGridSize(),d.right/=this.getGridSize(),d.bottom/=this.getGridSize()),d}},getRawBoundingBoxForNode:{value:function(a){var b=c(a);return b&&(b.left/=this.getGridSize(),b.top/=this.getGridSize(),b.right/=this.getGridSize(),b.bottom/=this.getGridSize()),b}}});document.registerElement("schematic-view",{prototype:b})}()}}}),a.register("c1",[],function(){return{setters:[],execute:function(){}}}),a.register("c2",[],function(){return{setters:[],execute:function(){}}}),a.register("c3",[],function(){return{setters:[],execute:function(){}}}),a.register("c4",[],function(){return{setters:[],execute:function(){}}}),a.register("c5",["a7","c8","c9","ca","c1","cb","cc","c2","c3","c6","c7","21","29","61","c4"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){!function(a){var b=null,f=null,g="",h=null,i=null,j=function(){var a=document.getElementById("exportmenu"),b=document.getElementById("gotomenu");a.classList.add("hide"),b.classList.add("hide"),document.querySelector("div.paper-menu-button:not(#trigger)").classList.remove("non-scrollable");for(var c=document.querySelectorAll("#filemenu .filebutton:not(#gohome)"),d=document.getElementById("exportseparator"),e=document.getElementById("gotoseparator"),f=0;f<c.length;f++)c[f].classList.remove("hide-main-menu");d.classList.remove("hide-main-menu"),e.classList.remove("hide-main-menu")},k=function(a,b){h.handleWaitStop({message:g})};window.Polymer({is:"panel-file-documents",properties:{stringFileMenuToolTip:String,stringSave:String,stringSaveToolTip:String,stringSaveAs:String,stringNewFile:String,stringDownload:String,stringDownloadasDesktopMultisim:String,stringDownloadSpiceNetlist:String,stringUpload:String,stringDownloadviewasSVG:String,stringDownloadviewasPNG:String,stringThePNGimagefilewasgenerated:String,stringDownloadPNGimage:String,stringCancel:String,stringSaveCircuit:String,stringSaveAsNewCircuit:String,stringSaveToMyCircuits:String,stringLoginToSave:String,stringLogout:String,stringSignUp:String,stringMyCircuits:String,stringCircuitDetails:String,stringPublicCircuits:String,stringFileHeading:String,stringGoToOptions:String,stringStreamTo:String,stringExportOptions:String,stringSimulationResultsHeading:String,stringDownloadDataAsCsv:String},cancelInterface:null,fileDataController:null,PNGdata:null,designInstanceGetter:null,homeLinkInfo:null,confirmCallback:null,confirmButtons:Object.freeze({CE_FIRSTBUTTON:"first",CE_SECONDBUTTON:"second",CE_THIRDBUTTON:"third"}),ready:function(){var c=this;if(a.isIE||a.isEdge){var f=function(a){if("touch"===a.pointerType){"a"===this.tagName.toLowerCase()&&this.setAttribute("target","_blank");var b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.dispatchEvent(b)}};c.$.newfile.addEventListener("pointerdown",f),c.$.gotologin.addEventListener("pointerdown",f),c.$.gotosignup.addEventListener("pointerdown",f),c.$.gotomycircuits.addEventListener("pointerdown",f),c.$.gotopubliccircuits.addEventListener("pointerdown",f),c.$.gotodetails.addEventListener("pointerdown",f),c.$.gohome.addEventListener("pointerdown",f)}var g=function(a){a.preventDefault();var b="A"===a.target.nodeName?a.target:a.target.parentElement,d=b.getAttribute("href");d&&c.filePanelController.showConfirmationDialog(c,function(){var a=void 0;switch(b.id){case"gohome":a="navigate-mshome";break;case"newfile":a="create-newschematic";break;case"gotomycircuits":a="navigate-mycircuits";break;case"gotopubliccircuits":a="navigate-publiccircuits";break;case"gotodetails":a="navigate-circuitdetails"}e.notifyTracker(a,{circuit_url:window.location.href}),window.multisim.browserDetect.isIFrame?window.open(d,"_blank"):window.location.href=d})},h=function(a){i&&i.doMessage({type:i.notifications.ETypes.NT_ERROR,message:d.i18n.translate("Failed to upload file: %1$s. The file data is invalid.").fetch(a),toast:!1,group:{name:"Uploading file",info:{displayName:d.i18n.translate("Uploading file").fetch(),timestamp:new Date}}})};c.$.save.addEventListener("tap",function(){c.filePanelController.handleSaveOrSaveAs(c,!1,k,c.cancelInterface)}),c.$.saveas.addEventListener("tap",function(){c.filePanelController.handleSaveOrSaveAs(c,!0,k,c.cancelInterface)}),c.$.loadfromdisk.addEventListener("tap",function(){this.value=null}),c.$.filebutton.addEventListener("tap",function(){c.updateControlStates(c.fileDataController)}),a.isSafari&&a.isIos?(c.$.savetodisk.addEventListener("tap",function(){b.close(),c.filePanelController.showConfirmationDialog(c,function(){c.filePanelController.downloadCircuitFile(c)})}),c.$.savedesktopmultisimtodisk.addEventListener("tap",function(){b.close(),c.filePanelController.showConfirmationDialog(c,c.filePanelController.downloadAsDesktopMultisimFile)}),c.$.savespicenetlisttodisk.addEventListener("tap",function(){b.close(),c.filePanelController.showConfirmationDialog(c,c.filePanelController.downloadSPICENetlist)}),c.$.exportsvg.addEventListener("tap",function(){b.close(),c.filePanelController.showConfirmationDialog(c,c.filePanelController.downloadCircuitSVG)}),c.$.generatepng.addEventListener("tap",function(){b.close(),c.filePanelController.showConfirmationDialog(c,c.filePanelController.downloadCircuitPNG)}),c.$.exportcsvdata.addEventListener("tap",function(){b.close(),c.filePanelController.showConfirmationDialog(c,c.filePanelController.downloadSimulationDataCSV)}),c.$.exportgraphimage.addEventListener("tap",function(){b.close(),c.filePanelController.showConfirmationDialog(c,c.filePanelController.downloadSimulationImagePNG)})):(a.isSafari?c.$.generatepng.addEventListener("tap",function(){b.close(),c.filePanelController.showConfirmationDialog(c,c.filePanelController.downloadCircuitPNG)}):c.$.generatepng.addEventListener("tap",function(){b.close(),c.filePanelController.downloadCircuitPNG()}),c.$.savetodisk.addEventListener("tap",function(){b.close(),c.filePanelController.downloadCircuitFile(c)}),c.$.savedesktopmultisimtodisk.addEventListener("tap",function(){b.close(),c.filePanelController.downloadAsDesktopMultisimFile()}),c.$.savespicenetlisttodisk.addEventListener("tap",function(){b.close(),c.filePanelController.downloadSPICENetlist()}),c.$.exportsvg.addEventListener("tap",function(){b.close(),c.filePanelController.downloadCircuitSVG()}),c.$.exportcsvdata.addEventListener("tap",function(){b.close(),c.filePanelController.downloadSimulationDataCSV()}),c.$.exportgraphimage.addEventListener("tap",function(){b.close(),c.filePanelController.downloadSimulationImagePNG()})),c.$.upload.addEventListener("change",function(a){c.filePanelController.uploadCircuitFile(c,a,b,h)}),c.$.newfile.addEventListener("tap",function(a){g(a)}),c.$.gotomycircuits.addEventListener("tap",function(a){g(a)}),c.$.gotopubliccircuits.addEventListener("tap",function(a){g(a)}),c.$.gotodetails.addEventListener("tap",function(a){g(a)}),c.$.gohome.addEventListener("tap",function(a){g(a)}),c.$.returnfromexportmenu.addEventListener("tap",function(a){a.preventDefault(),j()}),c.$.returnfromgotomenu.addEventListener("tap",function(a){a.preventDefault(),j()})},initialize:function(a,e,l,m,n){var o=a.fileDataController;f=a.commandInterface,i=a.messageHandler;var p=this;p.filePanelController=n,p.designInstanceGetter=e,p.multisimDesignExporter=l,p.$.logo.src=window.multisim.rootFolder+"resources/images/MultiSim_Live_Blue_Match_3.svg";var q=function(b,c){var d=a.responsiveWidth,e=document.body.offsetWidth,f=document.getElementById(b),g=document.getElementById(c),h=p.$.exportmenu,i=p.$.gotomenu,j=p.$.openexportoptions,k=p.$.opengotooptions;if(e>d){var l=j.getBoundingClientRect().top,m=k.getBoundingClientRect().top,n=p.$.filemenu.getBoundingClientRect().right;h.style.top=l+"px",i.style.top=m+"px",h.style.left=n+"px",i.style.left=n+"px",h.classList.remove("mobile-submenu"),i.classList.remove("mobile-submenu"),p.$.returnfromexportmenu.classList.add("hide-on-desktop"),p.$.returnfromgotomenu.classList.add("hide-on-desktop")}else{var o=p.querySelector("div.paper-menu-button:not(#trigger)"),q=o.getBoundingClientRect();h.classList.add("mobile-submenu"),i.classList.add("mobile-submenu"),o.classList.add("non-scrollable"),h.style.top=q.top+"px",i.style.top=q.top+"px",h.style.left=0,i.style.left=0,h.style.maxHeight=q.height-2*parseInt(window.getComputedStyle(h).paddingTop,0)-2+"px",i.style.maxHeight=q.height-2*parseInt(window.getComputedStyle(i).paddingTop,0)-2+"px";for(var r=window.Polymer.dom(p.root).querySelectorAll("#filemenu .filebutton:not(#gohome)"),s=p.$.exportseparator,t=p.$.gotoseparator,u=0;u<r.length;u++)r[u].classList.add("hide-main-menu");s.classList.add("hide-main-menu"),t.classList.add("hide-main-menu"),p.$.returnfromexportmenu.classList.remove("hide-on-desktop"),p.$.returnfromgotomenu.classList.remove("hide-on-desktop")}f.classList.remove("hide"),g.classList.add("hide")};p.$.openexportoptions.addEventListener("tap",function(a){a.preventDefault(),q("exportmenu","gotomenu")}),p.$.opengotooptions.addEventListener("tap",function(a){a.preventDefault(),q("gotomenu","exportmenu")}),p.$.openstreamdialog.addEventListener("tap",function(a){a.preventDefault(),p.$.file.close(),p.filePanelController.showStreamToMeasurementsDialog()}),d.addReadyListener(function(a){p.stringFileMenuToolTip=a.i18n.translate("File navigation menu").fetch(),p.stringSave=a.i18n.translate("Save").fetch(),p.stringSaveToolTip=a.i18n.translate("Save (Ctrl+S)").fetch(),p.stringSaveAs=a.i18n.translate("Save as").fetch(),p.stringLoginToSave=a.i18n.translate("Login to save").fetch(),p.stringLogout=a.i18n.translate("Logout").fetch(),p.stringSignUp=a.i18n.translate("Sign up").fetch(),p.stringNewFile=a.i18n.translate("New file").fetch(),p.stringDownload=a.i18n.translate("Download").fetch(),p.stringDownloadasDesktopMultisim=a.i18n.translate("Download as Desktop Multisim").fetch(),p.stringDownloadSpiceNetlist=a.i18n.translate("Download SPICE Netlist").fetch(),p.stringUpload=a.i18n.translate("Upload ...").fetch(),p.stringDownloadviewasSVG=a.i18n.translate("Download view as SVG").fetch(),p.stringDownloadviewasPNG=a.i18n.translate("Download image").fetch(),p.stringThePNGimagefilewasgenerated=a.i18n.translate("The PNG image file was generated.").fetch(),p.stringDownloadPNGimage=a.i18n.translate("Download PNG image").fetch(),p.stringCancel=a.i18n.translate("Cancel").fetch(),p.stringSaveCircuit=a.i18n.translate("Save Circuit").fetch(),p.stringSaveAsNewCircuit=a.i18n.translate("Save as new circuit").fetch(),p.stringSaveToMyCircuits=a.i18n.translate("Save copy to My Circuits").fetch(),p.stringMyCircuits=a.i18n.translate("My Circuits").fetch(),p.stringCircuitDetails=a.i18n.translate("Circuit details page").fetch(),p.stringPublicCircuits=a.i18n.translate("Public Circuits").fetch(),p.stringFileHeading=a.i18n.translate("Circuit File").fetch(),p.stringGoToOptions=a.i18n.translate("Go to").fetch(),p.stringStreamTo=a.i18n.translate("Stream to...").fetch(),p.stringExportOptions=a.i18n.translate("Export").fetch(),p.stringSimulationResultsHeading=a.i18n.translate("Simulation results").fetch(),p.stringDownloadDataAsCsv=a.i18n.translate("Download data").fetch(),p.stringDownloadDataAsImage=a.i18n.translate("Download image").fetch(),g=d.i18n.translate("Saving file ...").fetch(),p.filePanelController.updateConfirmDialogStrings(p,a)}),b=p.$.file,p.fileDataController=o,h=a.waitscreen,p.cancelInterface=a.cancelInterface,b.ignoreSelect=!0,b.addEventListener("paper-dropdown-close",function(){j()}),window.multisim.versionInfo.isInternal&&p.$.exportsvg.classList.remove("hide");var r=null,s=function(){p.$.exportcsvdata.classList.remove("hidden"),p.$.exportcsvdata.classList.remove("hide"),r.simulationController.activeAnalysis!==c.DC?(p.$.exportgraphimage.classList.remove("hidden"),p.$.exportgraphimage.classList.remove("hide")):(p.$.exportgraphimage.classList.add("hidden"),p.$.exportgraphimage.classList.add("hide"))};a.listeners.addListener(a.events.ACTIVEDESIGNCHANGED,function(a){var b=void 0;a.oldDesign&&(b=a.oldDesign.simulationController.dataManager,b.dataUpdateListeners.removeListener(b.EDataUpdateEvents.Initialized,s)),a.activeDesign&&(r=a.activeDesign,b=r.simulationController.dataManager,b.dataUpdateListeners.addListener(b.EDataUpdateEvents.Initialized,s))}),p.updateControlStates(p.fileDataController);var t=f.createCommandContextHelper({disable:"all"});t.addContextChangeListener(function(){var a=t.testContextEnabled();a?(p.$.loadfromdisk.removeAttribute("disabled"),p.$.newfile.removeAttribute("disabled"),p.$.gotomycircuits.removeAttribute("disabled"),p.$.gotodetails.removeAttribute("disabled"),p.$.gotopubliccircuits.removeAttribute("disabled"),p.$.newfile.setAttribute("href",document.location.origin+"/create"),p.homeLinkInfo&&(p.$.gotomycircuits.setAttribute("href",p.homeLinkInfo.mycircuits||"/"),p.$.gotodetails.setAttribute("href",p.homeLinkInfo.circuitdetails||"/"),p.$.gotopubliccircuits.setAttribute("href",p.homeLinkInfo.publiccircuits||"/"))):(p.$.loadfromdisk.setAttribute("disabled","disabled"),p.$.newfile.setAttribute("disabled","disabled"),p.$.gotomycircuits.setAttribute("disabled","disabled"),p.$.gotodetails.setAttribute("disabled","disabled"),p.$.gotopubliccircuits.setAttribute("disabled","disabled"),p.$.newfile.removeAttribute("href"),p.$.gotomycircuits.removeAttribute("href"),p.$.gotodetails.removeAttribute("href"),p.$.gotopubliccircuits.removeAttribute("href")),p.$.upload.disabled=!a}),m.addKeyHandler("s",!0,!1,!1,!1,function(a){a.preventDefault(),p.filePanelController.handleSaveOrSaveAs(p,!1,k,p.cancelInterface)},"save"),o.listeners.addListener(o.fileDataEvents.FDE_HOMELINKCHANGED,function(a){p.homeLinkInfo=a,p.$.gohome.setAttribute("href",document.location.origin+"/"),t.testContextEnabled()&&(p.$.newfile.setAttribute("href",document.location.origin+"/create"),p.homeLinkInfo&&(p.$.gotomycircuits.setAttribute("href",p.homeLinkInfo.mycircuits||"/"),p.$.gotodetails.setAttribute("href",p.homeLinkInfo.circuitdetails||"/"),p.$.gotopubliccircuits.setAttribute("href",p.homeLinkInfo.publiccircuits||"/"))),p.homeLinkInfo&&(p.$.gotologin.setAttribute("href",p.homeLinkInfo.login||"/"),p.$.gotologin.setAttribute("target","_blank"),p.$.gotosignup.setAttribute("href",p.homeLinkInfo.signup||"/"),p.$.gotosignup.setAttribute("target","_blank")),p.updateControlStates(p.fileDataController)})},updateControlStates:function(a){var b=this;b.$.save.classList.add("hidden"),b.$.saveas.classList.add("hidden"),b.$.newfile.classList.add("hidden"),b.$.gotomycircuits.classList.add("hidden"),b.homeLinkInfo&&b.homeLinkInfo.circuitdetails?b.$.gotodetails.classList.remove("hide"):b.$.gotodetails.classList.add("hide"),a.getSubscriptionInfo(function(a){a.canSavePrivate?(b.$.savetodisk.classList.remove("hide"),window.multisim.versionInfo.isInternal&&b.$.savespicenetlisttodisk.classList.remove("hide"),b.$.savedesktopmultisimtodisk.classList.remove("hide"),b.$.loadfromdisk.classList.remove("hide")):(b.$.savetodisk.classList.add("hide"),b.$.savedesktopmultisimtodisk.classList.add("hide"),b.$.savespicenetlisttodisk.classList.add("hide"),b.$.loadfromdisk.classList.add("hide"))}),a.loggedIn(function(a){a?(window.requestInfo&&window.requestInfo.owner?b.$.save.classList.remove("hide"):b.$.save.classList.add("hide"),b.$.gotologin.classList.add("hide"),b.$.gotosignup.classList.add("hide"),b.$.saveas.classList.remove("hide"),b.$.newfile.classList.remove("hide"),b.homeLinkInfo&&b.homeLinkInfo.mycircuits&&b.$.gotomycircuits.classList.remove("hide")):(b.$.gotologin.classList.remove("hide"),b.$.gotosignup.classList.remove("hide"),b.$.save.classList.add("hide"),b.$.saveas.classList.add("hide"),b.$.newfile.classList.add("hide"),b.$.gotomycircuits.classList.add("hide")),b.$.save.classList.remove("hidden"),b.$.saveas.classList.remove("hidden"),b.$.newfile.classList.remove("hidden"),b.$.gotomycircuits.classList.remove("hidden")})}})}(window.multisim.browserDetect)}}}),a.register("cd",[],function(){return{setters:[],execute:function(){}}}),a.register("ce",["a7","d0","c8","c9","cc","cb","8f","c5","29","30","21","c7","2d","cf","cd"],function(a,b){"use strict";var c,d,e,f,g,h,i;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){},function(a){g=a.default},function(a){h=a.sendmessagebyemail,i=a.feedback_email_address_list},function(a){}],execute:function(){!function(a,b){function j(a){var b=a.parentNode.offsetWidth,c=a.querySelectorAll("*[moveable]"),d=a.$.titlebar,e=a.$.maintoolbar,f=e.querySelector(".title"),g=a.querySelector("#moremenu"),h=a.querySelector("#topexportmenu"),i=a.querySelector("#helpmenu"),j=a.querySelector("#fullscreen"),k=window.multisim.browserDetect.isTankless;if(b<parseFloat(a.getAttribute("responsiveWidth")||"0")){for(var l=c.length-1;l>=0;l--){var m=c[l];m.parentNode!=g&&g.insertBefore(m,g.firstChild)}d.style.marginRight=e.style.width="138px",g.classList.remove("moreMenuArrowHidden"),g.classList.add("moreMenuArrowVisible"),j.disabled?(i.classList.remove("noniOSWideHelpArrow"),i.classList.remove("iOSWideHelpArrow"),i.classList.add("iOSThinHelpArrow"),h.classList.remove("noniOSWideHelpArrow"),h.classList.remove("iOSWideHelpArrowWithoutFullscreen"),h.classList.add("iOSThinHelpArrowWithoutFullscreen")):(i.classList.remove("noniOSWideHelpArrow"),i.classList.add("noniOSThinHelpArrow"),h.classList.remove("noniOSWideHelpArrow"),h.classList.remove("noniOSWideHelpArrowWithoutFullscreen"),h.classList.add("noniOSThinHelpArrow"))}else{for(var n=0;n<c.length;n++){var o=c[n];o.parentNode!=f.parentNode&&f.parentNode.insertBefore(o,f)}d.style.marginRight=e.style.width="270px",g.classList.remove("moreMenuArrowVisible"),g.classList.add("moreMenuArrowHidden"),j.disabled?(i.classList.remove("noniOSWideHelpArrow"),i.classList.remove("iOSThinHelpArrow"),i.classList.add("iOSWideHelpArrow"),h.classList.remove("noniOSWideHelpArrow"),h.classList.remove("iOSThinHelpArrowWithoutFullscreen"),h.classList.add("iOSWideHelpArrowWithoutFullscreen")):(i.classList.remove("noniOSThinHelpArrow"),i.classList.add("noniOSWideHelpArrow"),h.classList.remove("noniOSWideHelpArrow"),h.classList.remove("noniOSThinHelpArrow"),h.classList.add(k?"noniOSWideHelpArrowWithoutFullscreen":"noniOSWideHelpArrow"))}g.querySelector("paper-icon-button")?g.classList.remove("empty"):g.classList.add("empty")}function k(a,b){function c(a){d.icon=a.isFullScreen()?"fullscreen-exit":"fullscreen",d.title=a.isFullScreen()?"Exit full screen (F11)":"Full screen (F11)"}var d=a.$.fullscreen;b.listeners.addListener(b.EFullScreenEvents.FULLSCREEN_CHANGED,c),c(b)}function l(a,b){a.$.designtitle.addEventListener("focus",function(){try{setTimeout(function(){a.$.designtitle.select(),a.$.designtitle.setSelectionRange(0,a.$.designtitle.value.length)},0)}catch(a){console.log(a)}}),a.$.designtitle.addEventListener("change",function(){(m(this.value,a),b.activeDesign.designNameValidator(this.value).valid)?b.activeDesign.name=this.value.trim():m(b.activeDesign.name||b.activeDesign.defaultName,a);a.$.titleErrorMsg.textContent="",a.$$(".titleArea").classList.remove("invalid")}),a.$.designtitle.oninput=function(){var c=b.activeDesign.designNameValidator(this.value);c.valid?a.$$(".titleArea").classList.remove("invalid"):(a.$$(".titleArea").classList.add("invalid"),a.$.titleErrorMsg.textContent=c.errorMessage)},a.$.designtitle.addEventListener("keydown",function(c){27===c.keyCode?(m(b.activeDesign.name,a),document.body.focus()):13===c.keyCode&&document.body.focus()});var d=new c(a.$.designtitle,{cssProps:{}});d.on("tap",function(){a.$.openexport.close(),a.$.help.close(),a.querySelector("#file").close(),a.$.designtitle.style.width=a.$.hiddenspanarea.offsetWidth+50+"px"}),a.$.designtitle.onblur=function(){(m(this.value,a),b.activeDesign.designNameValidator(this.value.trim()).valid)?b.activeDesign.name=this.value.trim():m(b.activeDesign.name||b.activeDesign.defaultName,a);a.$.titleErrorMsg.textContent="",a.$$(".titleArea").classList.remove("invalid")},d.id="toolbar"}function m(a,b){var c=a.trim().substring(0,255);c!=b.$.designtitle.value&&(b.$.designtitle.value=c),b.$.hiddenspanarea.textContent=c,b.$.designtitle.style.width=b.$.hiddenspanarea.offsetWidth+5+"px"}document.addEventListener("mousedown",a.IronOverlayManagerClass.prototype._onCaptureClick.bind(a.IronOverlayManager),!0),a({is:"multisim-toolbar",properties:{stringrename:String,stringFullscreen:String,stringSetlanguage:String,stringmore:String,stringHelp:String,stringGettingStarted:String,stringModifiedIndicatorTitle:String,stringGiveFeedback:String,stringSupport:String,stringShortcutsAndTips:String,stringStreamToMeasurements:String,stringOpenExport:String,stringDownloadasDesktopMultisim:String,stringDownloadSpiceNetlist:String,stringDownloadviewasSVG:String,stringDownloadPNGimage:String,stringDownloadDataAsImage:String,stringDownloadDataAsCsv:String,stringFeedbackSubject:String},get filePanel(){return this.querySelector("panel-file-documents")},attached:function(){var a=this,c=null,d=null;window.CustomEvent&&"function"==typeof window.CustomEvent?d=new window.CustomEvent("toolbar-ready",{detail:this,bubbles:!0}):(d=document.createEvent("CustomEvent"),d.initCustomEvent("toolbar-ready",!0,!0,this)),document.dispatchEvent(d),window.addEventListener("resize",function(){j(a),c&&c()}),j(a),(b.isIE||b.isEdge)&&function(){var b=function(a){if("touch"===a.pointerType){"a"===this.tagName.toLowerCase()&&this.setAttribute("target","_blank");var b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.dispatchEvent(b)}};[].forEach.call(a.querySelectorAll("a.menuitem"),function(a){a.addEventListener("pointerdown",b,!1)})}(),a.$.more.addEventListener("click",function(b){var d=a.querySelector("#moremenu");c=function(b){var e=function(b){for(var c=!1;b&&!c;)c=b===d||b===a.$.more,b=b.parentNode;return c};b&&e(b.target)||(d.classList.add("hidden"),a.$.more.removeAttribute("active"),window.removeEventListener("mousedown",c),window.removeEventListener("touchstart",c),c=null)},d.classList.contains("hidden")?(d.classList.remove("hidden"),a.$.more.setAttribute("active",""),window.addEventListener("mousedown",c),window.addEventListener("touchstart",c)):c(),b.stopPropagation()})},initialize:function(a,c,j,n,o){var p=this;p.filePanelController=n;var q=p.$.openexport,r=p.$.moremenu;d.addReadyListener(function(a){p.stringrename=a.i18n.translate("Rename").fetch(),p.stringFullscreen=a.i18n.translate("Full screen (F11)").fetch(),p.stringSetlanguage=a.i18n.translate("Select language").fetch(),p.stringmore=a.i18n.translate("more").fetch(),p.stringHelp=a.i18n.translate("Help").fetch(),p.stringGettingStarted=a.i18n.translate("Getting started").fetch(),p.stringModifiedIndicatorTitle=a.i18n.translate("This design has been modified since the last save or load.").fetch(),p.stringGiveFeedback=a.i18n.translate("Send feedback").fetch(),p.stringSupport=a.i18n.translate("Support").fetch(),p.stringShortcutsAndTips=a.i18n.translate("Shortcuts and tips").fetch(),p.stringStreamToMeasurements=a.i18n.translate("Stream data to MeasurementsLive").fetch(),p.stringOpenExport=a.i18n.translate("Export").fetch(),p.stringDownloadasDesktopMultisim=a.i18n.translate("Download as Desktop Multisim").fetch(),p.stringDownloadSpiceNetlist=a.i18n.translate("Download SPICE Netlist").fetch(),p.stringDownloadviewasSVG=a.i18n.translate("Download view as SVG").fetch(),p.stringDownloadPNGimage=a.i18n.translate("Download PNG image").fetch(),p.stringDownloadDataAsImage=a.i18n.translate("Download image").fetch(),p.stringDownloadDataAsCsv=a.i18n.translate("Download data").fetch(),p.stringFeedbackSubject=a.i18n.translate("Feedback message from Multisim Live").fetch(),p.filePanelController.updateConfirmDialogStrings(p,a)}),p.$.feedbackbutton.addEventListener("click",function(){p.$.feedbackbutton.hasAttribute("disabled")||(p.$.help.close(),j.$.feedbackdialog&&j.$.feedbackdialog.open(function(a){if(a){var b=j.$.feedbackdialog.getValue(),c=new h(j,o),d={emails:i,subject:p.stringFeedbackSubject,message:b};c.sendEmail(d)}}))}),j.fileDataController.getSubscriptionInfo(function(a){a.authToken?p.$.feedbackbutton.removeAttribute("disabled"):p.$.feedbackbutton.setAttribute("disabled","true")}),a.attachHandlerToToolbar(p,p.previouslyhandledids),k(p,c);var s=function(a){a?p.$.modifiedindicator.classList.add("modified"):p.$.modifiedindicator.classList.remove("modified")},t=function(a){m(a.newname,p)};j.listeners.addListener(j.events.ACTIVEDESIGNCHANGED,function(a){a.activeDesign&&(s(a.activeDesign.modified),a.activeDesign.listeners.addListener(e.DESIGN_MODIFIED,s),a.activeDesign.listeners.addListener(e.NAME_CHANGED,t),d.addReadyListener(function(){m(a.activeDesign.name||a.activeDesign.defaultName,p)})),a.oldDesign&&(a.oldDesign.listeners.removeListener(e.DESIGN_MODIFIED,s),a.oldDesign.listeners.removeListener(e.NAME_CHANGED,t))}),l(p,j),p.updateControlStates=function(a){window.multisim.versionInfo.isInternal&&p.$.exportsvg.classList.remove("hide"),a.getSubscriptionInfo(function(a){a.canSavePrivate?(window.multisim.versionInfo.isInternal&&p.$.savespicenetlisttodisk.classList.remove("hide"),p.$.savedesktopmultisimtodisk.classList.remove("hide")):(p.$.savedesktopmultisimtodisk.classList.add("hide"),p.$.savespicenetlisttodisk.classList.add("hide"))})},p.updateControlStates(j.fileDataController),p.$.openexport.addEventListener("tap",function(){p.updateControlStates(j.fileDataController)}),p.lastSubscriptionInfo={},window.addEventListener("focus",function(){j.fileDataController.getSubscriptionInfo(function(a){g.isEqual(p.lastSubscriptionInfo,a)||(p.lastSubscriptionInfo=a,p.updateControlStates(j.fileDataController))})});var u=null,v=function(){p.$.exportcsvdata.classList.remove("hide"),u&&u.simulationController.activeAnalysis!==f.DC?p.$.exportgraphimage.classList.remove("hide"):p.$.exportgraphimage.classList.add("hide")};j.listeners.addListener(j.events.ACTIVEDESIGNCHANGED,function(a){var b=void 0;a.oldDesign&&(b=a.oldDesign.simulationController.dataManager,b.dataUpdateListeners.removeListener(b.EDataUpdateEvents.Initialized,v)),a.activeDesign&&(u=a.activeDesign,b=u.simulationController.dataManager,b.dataUpdateListeners.addListener(b.EDataUpdateEvents.Initialized,v))});var w=function(){q.close(),r.classList.add("hidden"),p.$.more.removeAttribute("active")};b.isSafari&&b.isIos?(p.$.savedesktopmultisimtodisk.addEventListener("tap",function(){w(),p.filePanelController.showConfirmationDialog(p,p.filePanelController.downloadAsDesktopMultisimFile)}),p.$.savespicenetlisttodisk.addEventListener("tap",function(){w(),p.filePanelController.showConfirmationDialog(p,p.filePanelController.downloadSPICENetlist)}),p.$.exportsvg.addEventListener("tap",function(){w(),p.filePanelController.showConfirmationDialog(p,p.filePanelController.downloadCircuitSVG)}),p.$.generatepng.addEventListener("tap",function(){w(),p.filePanelController.showConfirmationDialog(p,p.filePanelController.downloadCircuitPNG)}),p.$.exportcsvdata.addEventListener("tap",function(){w(),p.filePanelController.showConfirmationDialog(p,p.filePanelController.downloadSimulationDataCSV)}),p.$.exportgraphimage.addEventListener("tap",function(){w(),p.filePanelController.showConfirmationDialog(p,p.filePanelController.downloadSimulationImagePNG)})):(b.isSafari?p.$.generatepng.addEventListener("tap",function(){w(),p.filePanelController.showConfirmationDialog(p,p.filePanelController.downloadCircuitPNG)}):p.$.generatepng.addEventListener("tap",function(){w(),p.filePanelController.downloadCircuitPNG()}),p.$.savedesktopmultisimtodisk.addEventListener("tap",function(){w(),p.filePanelController.downloadAsDesktopMultisimFile()}),p.$.savespicenetlisttodisk.addEventListener("tap",function(){w(),p.filePanelController.downloadSPICENetlist()}),p.$.exportsvg.addEventListener("tap",function(){w(),p.filePanelController.downloadCircuitSVG()}),p.$.exportcsvdata.addEventListener("tap",function(){w(),p.filePanelController.downloadSimulationDataCSV()}),p.$.exportgraphimage.addEventListener("tap",function(){w(),p.filePanelController.downloadSimulationImagePNG()})),p.$.streamtomeasurements.addEventListener("tap",function(){return p.filePanelController.showStreamToMeasurementsDialog()})},previouslyhandledids:{writable:!0,value:{}}})}(window.Polymer,window.multisim.browserDetect)}}}),a.register("c9",[],function(){return{setters:[],execute:function(){}}}),a.register("11",["12"],function(a,b){"use strict";function c(a,b){var c=a,e={visible:null,hidden:null,enable:null,disable:null},f=function(){var a=c.activeContext,b=c.activeAppMode,d=!e.visible&&!e.hidden||!a&&!b&&(!e.visible||""===e.visible||Array.isArray(e.visible)&&-1!==e.visible.indexOf(""));return d||(d=!e.visible,d||(d="none"!==e.visible&&("all"===e.visible||-1!==e.visible.indexOf(a)||-1!==e.visible.indexOf(b))),!d||Array.isArray(e.visible)&&!Array.isArray(e.hidden)||(d=!e.hidden||"all"!==e.hidden&&("none"===e.hidden||-1===e.hidden.indexOf(a)&&-1===e.hidden.indexOf(b)))),d},g=function(){var a=c.activeContext,b=c.activeAppMode,d=!e.enable&&!e.disable||!a&&!b&&(!e.enable||""===e.enable||Array.isArray(e.enable)&&-1!==e.enable.indexOf[""]);return d||(d=!e.enable,d||(d="none"!==e.enable&&("all"===e.enable||-1!==e.enable.indexOf(a)||-1!==e.enable.indexOf(b))),!d||Array.isArray(e.enable)&&!Array.isArray(e.disable)||(d=!e.disable||"all"!==e.disable&&("none"===e.disable||-1===e.disable.indexOf(a)&&-1===e.disable.indexOf(b)))),d};return b&&d(e,b),{get contextVisible(){return e.visible},set contextVisible(a){e.visible=a},get contextHidden(){return e.hidden},set contextHidden(a){e.hidden=a},get contextEnable(){return e.enable},set contextEnable(a){e.enable=a},get contextDisable(){return e.disable},set contextDisable(a){e.disable=a},testContextVisible:f,testContextEnabled:g,addContextChangeListener:function(b){return a.addContextChangeListener(b)},removeContextChangeListener:function(b){return a.removeContextChangeListener(b)}}}var d;return a("default",c),{setters:[function(a){d=a.extend}],execute:function(){}}}),a.register("c8",[],function(){return{setters:[],execute:function(){}}}),a.register("d1",[],function(){return{setters:[],execute:function(){}}}),a.register("d2",[],function(){return{setters:[],execute:function(){}}}),a.register("a6",["a7","c8","d1","29","d2"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"multisim-dialog",resultCallback:null,properties:{stringOK:String,stringCancel:String,stringDialogTitle:String,okDisabled:{type:Boolean,value:!1,notify:!0,observer:"_okDisabledChanged"},onOK:{type:Function,value:null},onCancel:{type:Function,value:null}},_okDisabledChanged:function(){this.$.buttonok.disabled=this.okDisabled,this.$.buttonok.style.color=this.okDisabled?"#a8a8a8":"white"},ready:function(){},open:function(){this.$.dialog.open()},close:function(){this.$.dialog.close()},addButton:function(){var a=document.createElement("paper-button");return a.classList.add("multisim-dialog"),a.setAttribute("dialog-confirm",""),a.setAttribute("tab-index","0"),a.setAttribute("raised",""),this.$.buttons.insertBefore(a,this.$.buttonok),a},removeButton:function(a){var b=this.$.buttons.querySelector("#"+a);b&&b.parentNode.removeChild(b)},initialize:function(a){var b=this,d=function(a){27===a.keyCode&&b.stringCancel===c.i18n.translate("Cancel").fetch()&&(b.onCancel&&b.onCancel(),b.$.dialog.close())};b.$.dialog.addEventListener("iron-overlay-opened",function(){a.disabled=!0,b.addEventListener("keydown",d)}),b.$.dialog.addEventListener("iron-overlay-closed",function(){a.disabled=!1,b.removeEventListener("keydown",d)}),c.addReadyListener(function(a){b.stringOK=a.i18n.translate("OK").fetch(),b.stringCancel=a.i18n.translate("Cancel").fetch()}),b.$.buttonok.addEventListener("tap",function(){b.onOK&&b.onOK()}),b.$.buttoncancel.addEventListener("tap",function(){b.onCancel&&b.onCancel()}),window.addEventListener("resize",function(){b.$.dialog.style.left="auto",b.$.dialog.style.top="auto",b.$.dialog.refit()})}})}()}}}),a.register("d3",[],function(){return{setters:[],execute:function(){}}}),a.register("c7",["a7","a6","d3"],function(a,b){"use strict";return{setters:[function(a){},function(a){},function(a){}],execute:function(){!function(){window.Polymer({is:"dialog-confirmation",properties:{label:{notify:!0,reflectToAttribute:!0,type:String,value:""}},get stringOK(){return this.$.dialogconfirm.stringOK},set stringOK(a){this.$.dialogconfirm.stringOK=a},get stringCancel(){return this.$.dialogconfirm.stringCancel},set stringCancel(a){this.$.dialogconfirm.stringCancel=a},addButton:function(){return this.$.dialogconfirm.addButton()},open:function(){this.$.dialogconfirm.open()},close:function(){this.$.dialogconfirm.close()},init:function(a){this.$.dialogconfirm.initialize(a)},attached:function(){var a=this;a.$.dialogconfirm.onOK=function(){a.onOk&&a.onOk()},a.$.dialogconfirm.onCancel=function(){a.onCancel&&a.onCancel()}}})}()}}}),a.register("cf",["1d","1e","4d"],function(a,b){"use strict";var c,d,e,f,g;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){a("feedback_email_address_list",f="multisim.live.feedback@ni.com,ewbpremium@ni.com"),a("feedback_email_address_list",f),a("sendmessagebyemail",g=function(){function a(b,d){c(this,a),this._url="/api/v1/send-message-by-email",this._timeInterval=1e4,this._messageSubType="sendMessageByEmail",this._messageHandler=b.messageHandler,this._fileDataController=d}return d(a,[{key:"sendEmail",value:function(a){var b=this;return new Promise(function(c,d){var f=new XMLHttpRequest;f.onload=function(){if(200===f.status){var a=JSON.parse(f.responseText);a.error?d(a.error):c(a)}else d("SHARKTANK_UNKNOWN_ERROR")},f.onerror=function(){d("SHARKTANK_REQUEST_FAILED")},b._messageHandler.clearMessages(b._messageSubType),b._fileDataController.getSubscriptionInfo(function(c){f.open("POST",b._url,!0),f.setRequestHeader("Content-Type","application/json"),f.setRequestHeader(e.cloudConstants.keyauththoken,c.authToken),f.send(JSON.stringify({emails:a.emails,subject:a.subject,message:a.message}))},b._timeInterval)})}}]),a}()),a("sendmessagebyemail",g)}}}),a.register("d4",[],function(){return{setters:[],execute:function(){}}}),a.register("d5",["a7","c9","8f","d6","11","29","3e","21","c7","2d","cf","d4"],function(a,b){"use strict";var c,d,e,f,g,h,i,j;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){},function(a){d=a.default},function(a){e=a.default},function(a){f=a.ECommandContexts},function(a){g=a.default},function(a){},function(a){h=a.default},function(a){i=a.sendmessagebyemail,j=a.feedback_email_address_list},function(a){}],execute:function(){!function(a){function b(a,b){function c(){if(d&&b.canCancel()){b.cancelIconSrc?d.src=b.cancelIconSrc:d.icon=b.cancelIcon,d.title=b.cancelTitle;var a=d.querySelector(".button-text");a&&(a.textContent=b.cancelText||"")}}var d=a.querySelector("#cancel");b.addUpdateListener(c),c(b)}function k(a,b,c,d){var e=a.querySelector("active-analysis-selector");e&&e.init(b,c,d)}window.Polymer({is:"multisim-dynamictoolbar",properties:{stringleftpanel:String,stringRunSimulation:String,stringPauseSimulation:String,stringStopSimulation:String,stringCancel:String,stringSchematic:String,stringGrapher:String,stringSplit:String,stringsettings:String,stringSchematicViewTip:String,stringGrapherViewTip:String,stringSplitViewTip:String,stringEndWithConnector:String,stringEndWithGround:String,stringEndWithJunction:String,stringHelp:String,stringGettingStarted:String,stringGiveFeedback:String,stringSupport:String,stringShortcutsAndTips:String,stringOpenExport:String,stringDownloadasDesktopMultisim:String,stringDownloadSpiceNetlist:String,stringDownloadviewasSVG:String,stringDownloadPNGimage:String,stringDownloadDataAsImage:String,stringDownloadDataAsCsv:String,stringFeedbackSubject:String},ready:function(){var a=null;window.CustomEvent&&"function"==typeof window.CustomEvent?a=new window.CustomEvent("toolbar-ready",{detail:this,bubbles:!0}):(a=document.createEvent("CustomEvent"),a.initCustomEvent("toolbar-ready",!0,!0,this)),document.dispatchEvent(a)},updateShadows:function(){var a=this.$.scrollContainer;this.$$(".viewtabs").classList.remove("hiddenlabels"),(a.scrollLeft>2||a.scrollWidth-a.scrollLeft>a.parentNode.offsetWidth+2)&&this.$$(".viewtabs").classList.add("hiddenlabels"),a.scrollLeft>2?this.$$(".shadow.left").classList.remove("hidden"):this.$$(".shadow.left").classList.add("hidden"),a.scrollWidth-a.scrollLeft>a.parentNode.offsetWidth+2?this.$$(".shadow.right").classList.remove("hidden"):this.$$(".shadow.right").classList.add("hidden")},attached:function(){var a=this,b=a.$.scrollContainer,d=function(a){b.scrollLeft+=a};b.addEventListener("scroll",function(){a.updateShadows()}),b.addEventListener("wheel",function(a){d(a.deltaY)});var e=new c(a.$.scrollingToolBar,{recognizers:[[c.Pan,{direction:c.DIRECTION_HORIZONTAL}]]});e.id="dynamic-toolbar";var f=0;e.on("panstart",function(a){f=0,d(f-a.deltaX),f=a.deltaX}),e.on("pan",function(a){d(f-a.deltaX),f=a.deltaX}),e.on("panend",function(a){d(f-a.deltaX),f=a.deltaX}),setTimeout(function(){a.updateShadows()},1e3)},previouslyhandledids:{writable:!0,value:{}},handleResize:function(){this.updateShadows()},initialize:function(c,l,m,n,o,p,q){var r=this;r.filePanelController=p;var s=r.$.openexport;e.addReadyListener(function(a){r.stringleftpanel=a.i18n.translate("Open information pane").fetch(),r.stringRunSimulation=a.i18n.translate("Run simulation (Ctrl+R)").fetch(),r.stringPauseSimulation=a.i18n.translate("Pause simulation").fetch(),r.stringStopSimulation=a.i18n.translate("Stop simulation (Ctrl+.)").fetch(),r.stringCancel=a.i18n.translate("Cancel").fetch(),r.stringSchematic=a.i18n.translate("Schematic").fetch(),r.stringGrapher=a.i18n.translate("Grapher").fetch(),r.stringSplit=a.i18n.translate("Split").fetch(),r.stringSchematicViewTip=a.i18n.translate("Show schematic only (Ctrl+E to switch view)").fetch(),r.stringGrapherViewTip=a.i18n.translate("Show grapher only (Ctrl+E to switch view)").fetch(),r.stringSplitViewTip=a.i18n.translate("Show both schematic and grapher (Ctrl+E to switch view)").fetch(),r.stringRotate=a.i18n.translate("Rotate (Shift+R)").fetch(),r.stringFlip=a.i18n.translate("Flip/Mirror (Shift+M)").fetch(),r.stringEndWithConnector=a.i18n.translate("End wire with a connector (X)").fetch(),r.stringEndWithGround=a.i18n.translate("End wire with a ground (G)").fetch(),r.stringEndWithJunction=a.i18n.translate("End wire with a junction (J)").fetch(),r.stringHelp=a.i18n.translate("Help").fetch(),r.stringGettingStarted=a.i18n.translate("Getting started").fetch(),r.stringGiveFeedback=a.i18n.translate("Send feedback").fetch(),r.stringSupport=a.i18n.translate("Support").fetch(),r.stringShortcutsAndTips=a.i18n.translate("Shortcuts and tips").fetch(),r.stringOpenExport=a.i18n.translate("Export").fetch(),r.stringDownloadasDesktopMultisim=a.i18n.translate("Download as Desktop Multisim").fetch(),r.stringDownloadSpiceNetlist=a.i18n.translate("Download SPICE Netlist").fetch(),r.stringDownloadviewasSVG=a.i18n.translate("Download view as SVG").fetch(),r.stringDownloadPNGimage=a.i18n.translate("Download PNG image").fetch(),r.stringDownloadDataAsImage=a.i18n.translate("Download image").fetch(),r.stringDownloadDataAsCsv=a.i18n.translate("Download data").fetch(),r.stringsettings=a.i18n.translate("Open configuration pane").fetch(),r.stringFeedbackSubject=a.i18n.translate("Feedback message from Multisim Live").fetch(),r.$.runsimulation.setAttribute("activetitle",r.stringPauseSimulation),r.$.runsimulation.setAttribute("defaulttitle",r.stringRunSimulation),r.filePanelController.updateConfirmDialogStrings(r,a)}),r.$.feedbackbutton.addEventListener("click",function(){r.$.feedbackbutton.hasAttribute("disabled")||(r.$.help.close(),o.$.feedbackdialog&&o.$.feedbackdialog.open(function(a){if(a){var b=o.$.feedbackdialog.getValue(),c=new i(o,q),d={emails:j,subject:r.stringFeedbackSubject,message:b};c.sendEmail(d)}}))}),o.fileDataController.getSubscriptionInfo(function(a){a.authToken?r.$.feedbackbutton.removeAttribute("disabled"):r.$.feedbackbutton.setAttribute("disabled","true")}),c.attachHandlerToToolbar(this,this.previouslyhandledids),b(this,l);var t=d(n);t.contextHidden="all",t.contextVisible=["",f.CC_SIMULATION,f.CC_DUPLICATEOBJECT,f.CC_MOVESELECTION,f.CC_ADDOBJECT,f.CC_EMBEDDED],t.contextDisable="all",t.contextEnable=[f.CC_EMBEDDED],k(r,m,t,o),r.updateControlStates=function(a){window.multisim.versionInfo.isInternal&&r.$.exportsvg.classList.remove("hide"),a.getSubscriptionInfo(function(a){a.canSavePrivate?(window.multisim.versionInfo.isInternal&&r.$.savespicenetlisttodisk.classList.remove("hide"),r.$.savedesktopmultisimtodisk.classList.remove("hide")):(r.$.savedesktopmultisimtodisk.classList.add("hide"),r.$.savespicenetlisttodisk.classList.add("hide"))})},r.updateControlStates(o.fileDataController),r.$.openexport.addEventListener("tap",function(){r.updateControlStates(o.fileDataController)}),r.lastSubscriptionInfo={},window.addEventListener("focus",function(){o.fileDataController.getSubscriptionInfo(function(a){h.isEqual(r.lastSubscriptionInfo,a)||(r.lastSubscriptionInfo=a,r.updateControlStates(o.fileDataController))})});var u=null,v=function(){r.$.exportcsvdata.classList.remove("hide"),u&&u.simulationController.activeAnalysis!==g.DC?r.$.exportgraphimage.classList.remove("hide"):r.$.exportgraphimage.classList.add("hide")};o.listeners.addListener(o.events.ACTIVEDESIGNCHANGED,function(a){var b=void 0;a.oldDesign&&(b=a.oldDesign.simulationController.dataManager,b.dataUpdateListeners.removeListener(b.EDataUpdateEvents.Initialized,v)),a.activeDesign&&(u=a.activeDesign,b=u.simulationController.dataManager,b.dataUpdateListeners.addListener(b.EDataUpdateEvents.Initialized,v))});var w=function(){s.close(),s.classList.add("hide")};a.isSafari&&a.isIos?(r.$.savedesktopmultisimtodisk.addEventListener("tap",function(){w(),r.filePanelController.showConfirmationDialog(r,r.filePanelController.downloadAsDesktopMultisimFile)}),r.$.savespicenetlisttodisk.addEventListener("tap",function(){w(),r.filePanelController.showConfirmationDialog(r,r.filePanelController.downloadSPICENetlist)}),r.$.exportsvg.addEventListener("tap",function(){w(),r.filePanelController.showConfirmationDialog(r,r.filePanelController.downloadCircuitSVG)}),r.$.generatepng.addEventListener("tap",function(){w(),r.filePanelController.showConfirmationDialog(r,r.filePanelController.downloadCircuitPNG)}),r.$.exportcsvdata.addEventListener("tap",function(){w(),r.filePanelController.showConfirmationDialog(r,r.filePanelController.downloadSimulationDataCSV)}),r.$.exportgraphimage.addEventListener("tap",function(){w(),r.filePanelController.showConfirmationDialog(r,r.filePanelController.downloadSimulationImagePNG)})):(a.isSafari?r.$.generatepng.addEventListener("tap",function(){w(),r.filePanelController.showConfirmationDialog(r,r.filePanelController.downloadCircuitPNG)}):r.$.generatepng.addEventListener("tap",function(){w(),r.filePanelController.downloadCircuitPNG()}),r.$.savedesktopmultisimtodisk.addEventListener("tap",function(){w(),r.filePanelController.downloadAsDesktopMultisimFile()}),r.$.savespicenetlisttodisk.addEventListener("tap",function(){w(),r.filePanelController.downloadSPICENetlist()}),r.$.exportsvg.addEventListener("tap",function(){w(),r.filePanelController.downloadCircuitSVG()}),r.$.exportcsvdata.addEventListener("tap",function(){w(),r.filePanelController.downloadSimulationDataCSV()}),r.$.exportgraphimage.addEventListener("tap",function(){w(),r.filePanelController.downloadSimulationImagePNG()}))}})}(window.multisim.browserDetect)}}}),a.register("d7",[],function(){return{setters:[],execute:function(){}}}),a.register("d8",["8f","10","29","21","3b","96","52","44","2d","d7"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.ESimulationVariable,h=a.formatSimulationNumber,i=a.convertToDB},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){}],execute:function(){!function(){var a=null;window.Polymer({is:"simulation-output",outputInterface:null,properties:{stringNosimulationhasbeenrunyet:String,stringNeedProbeWarning:String,stringNode:String,stringResultPreview:String,stringValue:String,listeners:{type:Object,value:null}},attached:function(){var b=this;b.$.simoutputwindow.addEventListener("touchmove",function(a){a.preventDefault()});var d=b.$.table,n=b.$$(".container"),o=b.$$(".tableClientContainer"),p=null,q=null,r=b.$.graph,s=null,t=null,u=b.$.cursorTable,v=r.$.graphContainer,w=function(a,b){return b===f.AC||b===f.PARAM_SWEEP&&a.lastSweptAnalysis===f.AC},x=function(){n.style.height=o.clientHeight-37+"px",n.style.width=o.clientWidth+"px"};new c.Manager(b.$.simoutputwindow,{domEvents:!0,recognizers:[[c.Tap,{time:500}],[c.Tap,{event:"doubletap",taps:2},["tap"]]]}).id="simulation-output";var y=function(){var b=a.getCommandObject("showrightpanel");b.enabled&&b.startCommand()};b.$.simoutputwindow.addEventListener("dblclick",y),b.$.simoutputwindow.addEventListener("doubletap",y);var z=new c(u,{recognizers:[[c.Pan,{direction:c.DIRECTION_HORIZONTAL}]]});z.id="cursorTable";var A=0,B=function(a){u.scrollLeft+=a},C=function(){u.scrollLeft>2?u.parentElement.querySelector(".shadow.left").classList.remove("subdued"):u.parentElement.querySelector(".shadow.left").classList.add("subdued"),u.scrollWidth-u.scrollLeft>u.parentNode.offsetWidth+2?u.parentElement.querySelector(".shadow.right").classList.remove("subdued"):u.parentElement.querySelector(".shadow.right").classList.add("subdued")};z.on("panstart",function(a){A=0,B(A-a.deltaX),A=a.deltaX}),z.on("pan",function(a){B(A-a.deltaX),A=a.deltaX}),z.on("panend",function(a){B(A-a.deltaX),A=a.deltaX}),u.addEventListener("wheel",function(a){B(a.deltaY||0)}),u.addEventListener("scroll",function(){C()});var D=function(a){var b=p?p.getSignalNames():[];return b=b.slice(a==f.DC?0:1).map(function(a){return{signal:a.signalName}})},E=function(a){a?(u.classList.remove("hidden"),v.style.bottom=u.offsetHeight+"px"):(u.classList.add("hidden"),v.style.bottom="0")},F=function(){for(var a=u.querySelectorAll(".resizeContainer"),b=10,c=0;c<a.length;c++){var d=a[c],e=d.offsetWidth,f=d.firstElementChild.offsetWidth;Math.abs(e-f)>b&&(d.style.width=f+"px")}C()},G=function(a){var c=r.analysisSettings,d=new Set,f=!0;switch(a){case k.X:d.add("deltaY"),d.add("deltaYPhase");break;case k.Y:d.add("deltaX"),d.add("deltaXInv");break;case k.XY:break;case k.DISABLED:default:f=!1}w(c,q)?(d.add("deltaXInv"),b.stringDeltaYHeader=e.i18n.translate("Cursor Delta Y (Mag)").fetch(),b.stringDeltaYTip=e.i18n.translate("Cursor Y2 Mag - Y1 Mag").fetch()):(d.add("deltaYPhase"),b.stringDeltaYHeader=e.i18n.translate("Cursor Delta Y").fetch(),b.stringDeltaYTip=e.i18n.translate("Cursor Y2 - Y1").fetch());var g=u.querySelectorAll(".msTableHeader, .msTableCol");d=Array.from(d);for(var h=function(a){var b=g[a];d.some(function(a){return b.classList.contains(a)})?b.classList.add("hidden"):b.classList.remove("hidden")},i=0;i<g.length;i++)h(i);E(f)},H=function(a,c){var d=r.analysisSettings,g=d.cursorType,h=void 0,j=void 0,n=void 0,o=void 0,p=void 0,t=void 0,u="- - -";if(g!=k.DISABLED&&0!=c.length){var v=d.cursor1,x=d.cursor2,y=c[0].points,z=c[1].points,A=v.showIntersections,B=x.showIntersections,C=y[v.snapToPlot],D=z[x.snapToPlot];if((g===k.Y||g===k.XY)&&(g===k.Y&&(h=C?v.formatNum(C.y,C.dataSeries.yUnit):null,j=D?x.formatNum(D.y,D.dataSeries.yUnit):null),C&&D&&C.dataSeries.yUnit===D.dataSeries.yUnit)){var E="dB"==C.dataSeries.yUnit?i(C.y):C.y,G="dB"==D.dataSeries.yUnit?i(D.y):D.y,H=G-E,I=v.formatNum(H,C.dataSeries.yUnit,!0);q===f.AC&&"phase"===C.dataSeries.yaxis.type?t=I:p=I}if(g===k.X||g===k.XY){var J=q===f.Interactive&&s.simulationController.simulationState===l.Running;if(C&&(J&&(C=m.assign({},C),C.x-=C.dataSeries.xaxis.min),h=v.formatIntersectionData(C)),D&&(J&&(D=m.assign({},D),D.x-=D.dataSeries.xaxis.min),j=x.formatIntersectionData(D)),C&&D&&C.dataSeries.xUnit===D.dataSeries.xUnit){var K=D.x-C.x;n=v.formatNum(K,C.dataSeries.xUnit),o=K?v.formatNum(1/K,C.dataSeries.xInvUnit):null}}if(w(d,q)){var L=y[A[1]],M=z[B[1]],N=L?v.formatNum(L.y,L.dataSeries.yUnit):null,O=M?x.formatNum(M.y,M.dataSeries.yUnit):null;if(L&&M&&L.dataSeries.yUnit===M.dataSeries.yUnit){var P=M.y-L.y;t=v.formatNum(P,L.dataSeries.yUnit)}var Q="∠";h=h&&N?h.trim()+" "+Q+N:h,j=j&&O?j.trim()+" "+Q+O:j}b.stringCursor1Value=h||u,b.stringCursor2Value=j||u,b.stringDeltaXValue=n||u,b.stringDeltaXInvValue=o||u,b.stringDeltaYValue=p||u,b.stringDeltaYPhaseValue=t||u,C&&D&&(b.stringCursor1Header=C.dataSeries.sweepName?e.i18n.translate("Cursor 1").fetch()+", "+C.dataSeries.sweepName:e.i18n.translate("Cursor 1").fetch(),b.stringCursor2Header=D.dataSeries.sweepName?e.i18n.translate("Cursor 2").fetch()+", "+D.dataSeries.sweepName:e.i18n.translate("Cursor 2").fetch())}F()},I=function(a){a===r.analysisSettings.cursor1?b.$.cursor1ColorBox.style.backgroundColor=a.color:b.$.cursor2ColorBox.style.backgroundColor=a.color};b.outputInterface={initialize:function(a,c,e,g){if(q=a,s=c?c():null,t=e?e():null,a!=f.DC)r.initializeGraphs(a,c,g);else{r.destroyGraphs();b.$$("iframe")||(j.addResizeListener(d,x),x())}},set datamanager(a){if(a!==p){var c=function(){b.outputInterface.updateDisplay(!1)},d=function(){b.outputInterface.initializeNames()};p&&p.dataUpdateListeners&&(p.dataUpdateListeners.removeListener(p.EDataUpdateEvents.AddData,c),p.dataUpdateListeners.removeListener(p.EDataUpdateEvents.Initialized,d)),p=a,p.dataUpdateListeners&&(p.dataUpdateListeners.addListener(p.EDataUpdateEvents.AddData,c),p.dataUpdateListeners.addListener(p.EDataUpdateEvents.Initialized,d))}},get datamanager(){return p},initializeNames:function(){var a=p?p.getSignalNames():[];E(!1),b.$.nodatainfo.classList.add("hidden");var c=!0,e=!1,g=void 0;try{for(var h,i=a[Symbol.iterator]();!(c=(h=i.next()).done);c=!0){var j=h.value,k=s.probeController.getProbesForNetlistVariable(j.signalName);j.displayNames=[];var l=!0,m=!1,n=void 0;try{for(var o,t=k[Symbol.iterator]();!(l=(o=t.next()).done);l=!0){var u=o.value,v=u.mapSimulationVariableToDisplayName.get(j.signalName);j.displayNames.push(v),j.displayName=v}}catch(a){m=!0,n=a}finally{try{!l&&t.return&&t.return()}finally{if(m)throw n}}}}catch(a){e=!0,g=a}finally{try{!c&&i.return&&i.return()}finally{if(e)throw g}}q==f.DC?(d.classList.remove("hidden"),r.classList.add("hidden"),this.initializeTable(a,s.simulationController.getSimulationSettings(q).runName)):(r.classList.remove("hidden"),d.classList.add("hidden"),r.title=s.simulationController.getSimulationSettings(q).runName,r.setCursorUpdatesHandler(H),r.initializeNames(a,p.sweepName),b.$$(".infomessage > span").innerHTML=b.stringNeedProbeWarning)},updateDisplay:function(a){p&&(q==f.DC?b.outputInterface.updateDataRows():(s.probeController.hasActiveProbes(t.sheetTemplateController.sheetTemplate)?(r.classList.remove("hidden"),b.$.nodatainfo.classList.add("hidden")):(b.$.nodatainfo.classList.remove("hidden"),r.classList.add("hidden")),r.updateDisplay(a)))},resetDisplay:function(){b.$.nodatainfo.classList.remove("hidden"),r.classList.add("hidden"),b.$$(".infomessage > span").innerHTML=b.stringNosimulationhasbeenrunyet},initializeTable:function(a,c){var d=this,e=b.$$("#table table.msOutputTable tbody"),f=b.$.tabletitle;f&&(f.textContent=c),e&&function(){for(var b=e.firstChild;b;)e.removeChild(b),b=e.firstChild;void 0!==d.mapDisplayNameToSimulationVariable&&null!==c||(d.mapDisplayNameToSignalTypes=new Map,d.mapDisplayNameToSimulationVariable=new Map),d.mapDisplayNameToSimulationVariable.clear(),d.mapDisplayNameToSignalTypes.clear();var c=d.mapDisplayNameToSimulationVariable,f=d.mapDisplayNameToSignalTypes,g=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],f=document.createElement("tr"),g=document.createElement("td"),h=document.createElement("td");g.classList.add("msTableCol"),h.classList.add("msTableCol"),g.textContent=b,f.signal=a,f.probe=c||"n/a",f.appendChild(g),f.appendChild(h),e.appendChild(f),d||f.setAttribute("hidden","")};a.forEach(function(a){var b=a.signalName;if(a.signalIsExternal)if(a.displayNames&&a.displayNames.length>0){var d=!0,e=!1,h=void 0;try{for(var i,j=a.displayNames[Symbol.iterator]();!(d=(i=j.next()).done);d=!0){var k=i.value;g(a.signalName,k||a.signalName)}}catch(a){e=!0,h=a}finally{try{!d&&j.return&&j.return()}finally{if(e)throw h}}}else a.displayName&&g(a.signalName,name||a.signalName);else{s.probeController.getProbesForNetlistVariable(b).forEach(function(d){var e=d.mapSimulationVariableToDisplayName.get(b);c.set(e,b);var h=d.mapDisplayNameToSignalTypes.get(e);f.set(e,h),g(a.signalName,e,d.probeID,d.plot.showInGraph)})}})}()},updateDataRows:function(){for(var a=this,c=b.querySelectorAll("#table table.msOutputTable tr"),d=p.getSignalNames(),e=p.getRawData(),f=function(b){var f=c[b],i=f.children,j=i[0].textContent,k=-1,l="unknown",m=g.Unknown;if(a.mapDisplayNameToSimulationVariable&&a.mapDisplayNameToSimulationVariable.size){var n=a.mapDisplayNameToSimulationVariable.has(j)?a.mapDisplayNameToSimulationVariable.get(j):j;k=d.map(function(a){return a.signalName}).indexOf(n),l=a.mapDisplayNameToSignalTypes.has(j)?a.mapDisplayNameToSignalTypes.get(j):"unknown","voltage"===l?m=g.Voltage:"current"===l&&(m=g.Current)}else k=d.findIndex(function(a){return a.displayName===j||a.displayNames.includes(j)});-1!=k&&(i[1].textContent=h(e[k][0],m,void 0,5))},i=0;i<c.length;++i)f(i);x()},activate:function(){var a=function(){var a=D(q);return q==f.DC?{analysisSettings:s.simulationController.getSimulationSettings(q),type:q,signals:a,isSignalInGraph:function(a,c){for(var d=!1,e=b.querySelectorAll("#table table.msOutputTable tr"),f=0;f<e.length;f++)if(e[f].signal==a&&e[f].probe==c){d=!0;break}return d},isVisible:function(a,c){for(var d=!1,e=b.querySelectorAll("#table table.msOutputTable tr"),f=0;f<e.length;f++)if(e[f].signal==a&&e[f].probe==c){d=!e[f].hasAttribute("hidden");break}return d},setVisible:function(a,c,d,e){for(var f=!1,g=b.querySelectorAll("#table table.msOutputTable tr"),h=0;h<g.length;h++)g[h].signal==a&&g[h].probe==c&&(e?g[h].removeAttribute("hidden"):g[h].setAttribute("hidden",""));return f}}:{analysisSettings:r.analysisSettings,type:q,signals:a,isSignalInGraph:function(a,b,c){return r.isSignalInGraph(a,b,c)},isVisible:function(a,b,c){return r.isSignalVisible(a,b,c)},setVisible:function(a,b,c,d,e){r.setSignalVisibility(a,b,c,d,e)},setCursorType:function(a){r.setCursorType(a),G(a)},setCursorSignal:function(a,b,c,d){r.setCursorSignal(a,b,c,d),I(a)},getYAxisAutoscaleValues:function(a,b){return r.getYAxisAutoscaleValues(a,b)}}};b.listeners.notifyListeners("activate",a)}}},init:function(b,c,f){var g=this;g.listeners=d(),a=b,e.addReadyListener(function(a){g.stringNosimulationhasbeenrunyet=a.i18n.translate("Waiting for data").fetch(),g.stringNeedProbeWarning=a.i18n.translate("Place Probe to See Trace Data").fetch(),g.stringNode=a.i18n.translate("Signal").fetch(),g.stringValue=a.i18n.translate("Value").fetch(),g.stringCursor1Header=a.i18n.translate("Cursor 1").fetch(),g.stringCursor2Header=a.i18n.translate("Cursor 2").fetch(),g.stringDeltaXHeader=a.i18n.translate("Cursor Delta X").fetch(),g.stringDeltaXInvHeader=a.i18n.translate("Cursor Delta X Inverse").fetch(),g.stringDeltaYHeader=a.i18n.translate("Cursor Delta Y").fetch(),g.stringDeltaYPhaseHeader=a.i18n.translate("Cursor Delta Y (Phase)").fetch(),g.stringDeltaXTip=a.i18n.translate("Cursor X2 - X1").fetch(),g.stringDeltaXInvTip=a.i18n.translate("Cursor 1/(X2 - X1)").fetch(),g.stringDeltaYTip=a.i18n.translate("Cursor Y2 - Y1").fetch(),g.stringDeltaYPhaseTip=a.i18n.translate("Cursor Y2 Phase - Y1 Phase").fetch(),g.stringResultPreview=a.i18n.translate("Preview image. Simulate to update results.").fetch()}),this.$.graph.initControl(this,c,f)},setOverlay:function(a){a&&a.projectID&&a.guid&&(this.$.datapreview.parentElement.classList.remove("hidden"),this.$.datapreview.src="/api/v1/projects/"+a.projectID+"/items/"+a.guid.toLowerCase()+"-previewgraphpng/file/")},removeOverlay:function(){this.$.datapreview.parentElement.classList.add("hidden"),this.$.datapreview.src=""}})}()}}}),a.register("ca",[],function(){return{setters:[],execute:function(){}}}),a.register("d9",[],function(){return{setters:[],execute:function(){}}}),a.register("da",["a7","ca","cc","2d","c6","21","29","32","44","d9"],function(a,b){"use strict";var c,d,e,f,g;return{setters:[function(a){},function(a){},function(a){},function(a){c=a.default},function(a){},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){}],execute:function(){(function(){window.Polymer({is:"grapher-miniproperties",properties:{stringTriggerState:String,stringSingle:String,stringAuto:String,stringNormal:String,stringNone:String,stringTriggerMode:String},ready:function(){},handleTriggered:null,handleAutoTriggered:null,handleWaitingTriggered:null,handleNoTrigger:null,handlePaused:null,handleStopped:null,detachTriggerListeners:function(a){a.triggerListeners&&(a.triggerListeners.removeListener(null,this.handleTriggered),a.triggerListeners.removeListener(null,this.handleAutoTriggered),a.triggerListeners.removeListener(null,this.handleWaitingTriggered),a.triggerListeners.removeListener(null,this.handleNoTrigger),a.triggerListeners.removeListener(null,this.handlePaused),a.triggerListeners.removeListener(null,this.handleStopped))},attachTriggerListeners:function(a){a.triggerListeners&&(a.triggerListeners.addListener(a.ETriggerStates.TS_TRIGGERED,this.handleTriggered),a.triggerListeners.addListener(a.ETriggerStates.TS_AUTO_TRIGGERED,this.handleAutoTriggered),a.triggerListeners.addListener(a.ETriggerStates.TS_WAITING,this.handleWaitingTriggered),a.triggerListeners.addListener(a.ETriggerStates.TS_NONE,this.handleNoTrigger),a.triggerListeners.addListener(a.ETriggerStates.TS_PAUSED,this.handlePaused),a.triggerListeners.addListener(a.ETriggerStates.TS_STOPPED,this.handleStopped))},initialize:function(a,b){var h={WAITING:"",NONE:"",TRIGGERED:"",AUTOTRIGGERED:"",PAUSED:"",STOPPED:""},i=this,j=null;i.$.triggermodeselect.addEventListener("tap",function(a){a.gesture&&(a.stopPropagation(),a.preventDefault())});var k=null,l=null,m=function(){return l&&l.type==d.Interactive&&l.analysisSettings};i.handleTriggered=function(a){i.stringTriggerState=h.TRIGGERED,i.$.edgeicons.classList.add("triggered"),i.$.edgeiconbackground.style.backgroundColor=a.signalColor,l&&l.analysisSettings.trigger.mode==l.analysisSettings.triggerModes.TM_STOP&&(i.$.trigger.active=i.$.trigger.disabled=!1)},i.handleAutoTriggered=function(a){i.stringTriggerState=h.AUTOTRIGGERED,i.$.edgeicons.classList.add("triggered"),i.$.edgeiconbackground.style.backgroundColor=a.signalColor},i.handleWaitingTriggered=function(){i.stringTriggerState=h.WAITING,i.$.edgeicons.classList.remove("triggered"),i.$.edgeiconbackground.style.backgroundColor="transparent"},i.handleNoTrigger=function(){i.stringTriggerState=h.NONE,i.$.edgeicons.classList.remove("triggered"),i.$.edgeiconbackground.style.backgroundColor="transparent"},i.handlePaused=function(){j=i.stringTriggerState,i.stringTriggerState=h.PAUSED},this.handleStopped=function(){i.stringTriggerState=h.STOPPED};var n=function(){if(m()){var a=l.analysisSettings.trigger;if(!this.disabled){switch(this.id){case"trigger":case"single":a.mode=l.analysisSettings.triggerModes.TM_SINGLE;break;case"auto":a.mode=l.analysisSettings.triggerModes.TM_AUTO;break;case"normal":a.mode=l.analysisSettings.triggerModes.TM_NORMAL;break;case"none":a.mode=l.analysisSettings.triggerModes.TM_NONE}c.isEqual(l.analysisSettings.trigger,a)||(l.analysisSettings.trigger=a,b.notifySimulationSettingsUpdated(i))}}i.$.triggermodes.close()},o=function(a){if(l=a,m()){switch(i.$.trigger.active=i.$.trigger.disabled=!0,a.analysisSettings.trigger.mode){case a.analysisSettings.triggerModes.TM_STOP:i.$.trigger.active=i.$.trigger.disabled=!1;case a.analysisSettings.triggerModes.TM_SINGLE:i.stringTriggerMode=i.stringSingle;break;case a.analysisSettings.triggerModes.TM_AUTO:i.stringTriggerMode=i.stringAuto;break;case a.analysisSettings.triggerModes.TM_NORMAL:i.stringTriggerMode=i.stringNormal;break;case a.analysisSettings.triggerModes.TM_NONE:i.stringTriggerMode=i.stringNone}if(i.$.rising.setAttribute("hidden",""),i.$.falling.setAttribute("hidden",""),i.$.either.setAttribute("hidden",""),a.analysisSettings.trigger.mode!==a.analysisSettings.triggerModes.TM_NONE)switch(a.analysisSettings.trigger.edge){case a.analysisSettings.triggerEdges.TE_RISING:i.$.rising.removeAttribute("hidden");break;case a.analysisSettings.triggerEdges.TE_FALLING:i.$.falling.removeAttribute("hidden");break;case a.analysisSettings.triggerEdges.TE_BOTH:i.$.either.removeAttribute("hidden")}}};a.listeners.addListener("activate",function(a){k=a;var b=k();o(b)}),b.dataManager.dataUpdateListeners.addListener(b.dataManager.EDataUpdateEvents.AddData,function(a){a.firstData&&k&&o(k())}),b.listeners.addListener(f.SimulationSettingsChanged,function(){k&&o(k())}),b.listeners.addListener(f.RunStateChanged,function(a){a.oldState===g.Paused&&a.newState===g.Running&&(i.stringTriggerState=j),k&&o(k())}),i.addEventListener("doubletap",function(a){a.cancelBubble=!0}),i.$.single.addEventListener("tap",n),i.$.auto.addEventListener("tap",n),i.$.normal.addEventListener("tap",n),i.$.none.addEventListener("tap",n),i.$.trigger.addEventListener("tap",n),e.addReadyListener(function(a){h.WAITING=a.i18n.translate("Waiting for trigger").fetch(),h.NONE=a.i18n.translate("No trigger").fetch(),h.TRIGGERED=a.i18n.translate("Triggered").fetch(),h.AUTOTRIGGERED=a.i18n.translate("Auto triggered").fetch(),h.PAUSED=a.i18n.translate("Paused").fetch(),h.STOPPED=a.i18n.translate("Stopped").fetch(),i.stringSingle=a.i18n.translate("Single").fetch(),i.stringAuto=a.i18n.translate("Auto").fetch(),i.stringNormal=a.i18n.translate("Normal").fetch(),i.stringNone=a.i18n.translate("None").fetch()})}})}).apply(this)}}}),function(){var b=a.amdDefine;!function(a,b){"use strict";"object"==typeof c&&"object"==typeof c.exports?c.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,c){"use strict";function d(a,b){b=b||aa;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}function e(a){var b=!!a&&"length"in a&&a.length,c=na.type(a);return"function"!==c&&!na.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}function f(a,b,c){if(na.isFunction(b))return na.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return na.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(xa.test(b))return na.filter(b,a,c);b=na.filter(b,a)}return na.grep(a,function(a){return fa.call(b,a)>-1!==c&&1===a.nodeType})}function g(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function h(a){var b={};return na.each(a.match(Ca)||[],function(a,c){b[c]=!0}),b}function i(a){return a}function j(a){throw a}function k(a,b,c){var d;try{a&&na.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&na.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}function l(){aa.removeEventListener("DOMContentLoaded",l),a.removeEventListener("load",l),na.ready()}function m(){this.expando=na.expando+m.uid++}function n(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Ka,"-$&").toLowerCase(),"string"==typeof(c=a.getAttribute(d))){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:Ja.test(c)?JSON.parse(c):c)}catch(a){}Ia.set(a,b,c)}else c=void 0;return c}function o(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return na.css(a,b,"")},i=h(),j=c&&c[3]||(na.cssNumber[b]?"":"px"),k=(na.cssNumber[b]||"px"!==j&&+i)&&Ma.exec(na.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do{f=f||".5",k/=f,na.style(a,b,k+j)}while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function p(a){var b,c=a.ownerDocument,d=a.nodeName,e=Qa[d];return e||(b=c.body.appendChild(c.createElement(d)),e=na.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),Qa[d]=e,e)}function q(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=Ha.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&Oa(d)&&(e[f]=p(d))):"none"!==c&&(e[f]="none",Ha.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}function r(a,b){var c=void 0!==a.getElementsByTagName?a.getElementsByTagName(b||"*"):void 0!==a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&na.nodeName(a,b)?na.merge([a],c):c}function s(a,b){for(var c=0,d=a.length;c<d;c++)Ha.set(a[c],"globalEval",!b||Ha.get(b[c],"globalEval"))}function t(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if((f=a[n])||0===f)if("object"===na.type(f))na.merge(m,f.nodeType?[f]:f);else if(Va.test(f)){for(g=g||l.appendChild(b.createElement("div")),h=(Sa.exec(f)||["",""])[1].toLowerCase(),i=Ua[h]||Ua._default,g.innerHTML=i[1]+na.htmlPrefilter(f)+i[2],k=i[0];k--;)g=g.lastChild;na.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));for(l.textContent="",n=0;f=m[n++];)if(d&&na.inArray(f,d)>-1)e&&e.push(f);else if(j=na.contains(f.ownerDocument,f),g=r(l.appendChild(f),"script"),j&&s(g),c)for(k=0;f=g[k++];)Ta.test(f.type||"")&&c.push(f);return l}function u(){return!0}function v(){return!1}function w(){try{return aa.activeElement}catch(a){}}function x(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)x(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),!1===e)e=v;else if(!e)return a;return 1===f&&(g=e,e=function(a){return na().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=na.guid++)),a.each(function(){na.event.add(this,b,e,d,c)})}function y(a,b){return na.nodeName(a,"table")&&na.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function z(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function A(a){var b=bb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function B(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(Ha.hasData(a)&&(f=Ha.access(a),g=Ha.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)na.event.add(b,e,j[e][c])}Ia.hasData(a)&&(h=Ia.access(a),i=na.extend({},h),Ia.set(b,i))}}function C(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Ra.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function D(a,b,c,e){b=da.apply([],b);var f,g,h,i,j,k,l=0,m=a.length,n=m-1,o=b[0],p=na.isFunction(o);if(p||m>1&&"string"==typeof o&&!la.checkClone&&ab.test(o))return a.each(function(d){var f=a.eq(d);p&&(b[0]=o.call(this,d,f.html())),D(f,b,c,e)});if(m&&(f=t(b,a[0].ownerDocument,!1,a,e),g=f.firstChild,1===f.childNodes.length&&(f=g),g||e)){for(h=na.map(r(f,"script"),z),i=h.length;l<m;l++)j=f,l!==n&&(j=na.clone(j,!0,!0),i&&na.merge(h,r(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,na.map(h,A),l=0;l<i;l++)j=h[l],Ta.test(j.type||"")&&!Ha.access(j,"globalEval")&&na.contains(k,j)&&(j.src?na._evalUrl&&na._evalUrl(j.src):d(j.textContent.replace(cb,""),k))}return a}function E(a,b,c){for(var d,e=b?na.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||na.cleanData(r(d)),d.parentNode&&(c&&na.contains(d.ownerDocument,d)&&s(r(d,"script")),d.parentNode.removeChild(d));return a}function F(a,b,c){var d,e,f,g,h=a.style;return c=c||fb(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||na.contains(a.ownerDocument,a)||(g=na.style(a,b)),!la.pixelMarginRight()&&eb.test(g)&&db.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function G(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function H(a){if(a in kb)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=jb.length;c--;)if((a=jb[c]+b)in kb)return a}function I(a,b,c){var d=Ma.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function J(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=na.css(a,c+Na[f],!0,e)),d?("content"===c&&(g-=na.css(a,"padding"+Na[f],!0,e)),"margin"!==c&&(g-=na.css(a,"border"+Na[f]+"Width",!0,e))):(g+=na.css(a,"padding"+Na[f],!0,e),"padding"!==c&&(g+=na.css(a,"border"+Na[f]+"Width",!0,e)));return g}function K(a,b,c){var d,e=!0,f=fb(a),g="border-box"===na.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=F(a,b,f),(d<0||null==d)&&(d=a.style[b]),eb.test(d))return d;e=g&&(la.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+J(a,b,c||(g?"border":"content"),e,f)+"px"}function L(a,b,c,d,e){return new L.prototype.init(a,b,c,d,e)}function M(){mb&&(a.requestAnimationFrame(M),na.fx.tick())}function N(){return a.setTimeout(function(){lb=void 0}),lb=na.now()}function O(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=Na[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function P(a,b,c){for(var d,e=(S.tweeners[b]||[]).concat(S.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function Q(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&Oa(a),r=Ha.get(a,"fxshow");c.queue||(g=na._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,na.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],nb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;p=!0}n[d]=r&&r[d]||na.style(a,d)}if((i=!na.isEmptyObject(b))||!na.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=r&&r.display,null==j&&(j=Ha.get(a,"display")),k=na.css(a,"display"),"none"===k&&(j?k=j:(q([a],!0),j=a.style.display||j,k=na.css(a,"display"),q([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===na.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(r?"hidden"in r&&(p=r.hidden):r=Ha.access(a,"fxshow",{display:j}),f&&(r.hidden=!p),p&&q([a],!0),m.done(function(){p||q([a]),Ha.remove(a,"fxshow");for(d in n)na.style(a,d,n[d])})),i=P(p?r[d]:0,d,m),d in r||(r[d]=i.start,p&&(i.end=i.start,i.start=0))}}function R(a,b){var c,d,e,f,g;for(c in a)if(d=na.camelCase(c),e=b[d],f=a[c],na.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=na.cssHooks[d])&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function S(a,b,c){var d,e,f=0,g=S.prefilters.length,h=na.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=lb||N(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:na.extend({},b),opts:na.extend(!0,{specialEasing:{},easing:na.easing._default},c),originalProperties:b,originalOptions:c,startTime:lb||N(),duration:c.duration,tweens:[],createTween:function(b,c){var d=na.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(R(k,j.opts.specialEasing);f<g;f++)if(d=S.prefilters[f].call(j,a,k,j.opts))return na.isFunction(d.stop)&&(na._queueHooks(j.elem,j.opts.queue).stop=na.proxy(d.stop,d)),d;return na.map(k,P,j),na.isFunction(j.opts.start)&&j.opts.start.call(a,j),na.fx.timer(na.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function T(a){return a.getAttribute&&a.getAttribute("class")||""}function U(a,b,c,d){var e;if(na.isArray(b))na.each(b,function(b,e){c||Ab.test(a)?d(a,e):U(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==na.type(b))d(a,b);else for(e in b)U(a+"["+e+"]",b[e],c,d)}function V(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Ca)||[];if(na.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function W(a,b,c,d){function e(h){var i;return f[h]=!0,na.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Mb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function X(a,b){var c,d,e=na.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&na.extend(!0,a,d),a}function Y(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Z(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(!(g=j[i+" "+f]||j["* "+f]))for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){!0===g?g=j[e]:!0!==j[e]&&(f=h[0],k.unshift(h[1]));break}if(!0!==g)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(a){return{state:"parsererror",error:g?a:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function $(a){return na.isWindow(a)?a:9===a.nodeType&&a.defaultView}var _=[],aa=a.document,ba=Object.getPrototypeOf,ca=_.slice,da=_.concat,ea=_.push,fa=_.indexOf,ga={},ha=ga.toString,ia=ga.hasOwnProperty,ja=ia.toString,ka=ja.call(Object),la={},ma="3.1.0",na=function(a,b){return new na.fn.init(a,b)},oa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pa=/^-ms-/,qa=/-([a-z])/g,ra=function(a,b){return b.toUpperCase()};na.fn=na.prototype={jquery:ma,constructor:na,length:0,toArray:function(){return ca.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:ca.call(this)},pushStack:function(a){var b=na.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return na.each(this,a)},map:function(a){return this.pushStack(na.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(ca.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:ea,sort:_.sort,splice:_.splice},na.extend=na.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||na.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(na.isPlainObject(d)||(e=na.isArray(d)))?(e?(e=!1,f=c&&na.isArray(c)?c:[]):f=c&&na.isPlainObject(c)?c:{},g[b]=na.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},na.extend({expando:"jQuery"+(ma+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===na.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=na.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==ha.call(a))&&(!(b=ba(a))||"function"==typeof(c=ia.call(b,"constructor")&&b.constructor)&&ja.call(c)===ka)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?ga[ha.call(a)]||"object":typeof a},globalEval:function(a){d(a)},camelCase:function(a){return a.replace(pa,"ms-").replace(qa,ra)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(e(a))for(c=a.length;d<c&&!1!==b.call(a[d],d,a[d]);d++);else for(d in a)if(!1===b.call(a[d],d,a[d]))break;return a},trim:function(a){return null==a?"":(a+"").replace(oa,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(e(Object(a))?na.merge(c,"string"==typeof a?[a]:a):ea.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:fa.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d=[],e=0,f=a.length,g=!c;e<f;e++)!b(a[e],e)!==g&&d.push(a[e]);return d},map:function(a,b,c){var d,f,g=0,h=[];if(e(a))for(d=a.length;g<d;g++)null!=(f=b(a[g],g,c))&&h.push(f);else for(g in a)null!=(f=b(a[g],g,c))&&h.push(f);return da.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),na.isFunction(a))return d=ca.call(arguments,2),e=function(){return a.apply(b||this,d.concat(ca.call(arguments)))},e.guid=a.guid=a.guid||na.guid++,e},now:Date.now,support:la}),"function"==typeof Symbol&&(na.fn[Symbol.iterator]=_[Symbol.iterator]),na.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){ga["[object "+b+"]"]=b.toLowerCase()});var sa=function(a){function b(a,b,c,d){var e,f,g,h,i,j,k,m=b&&b.ownerDocument,o=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==o&&9!==o&&11!==o)return c;if(!d&&((b?b.ownerDocument||b:P)!==H&&G(b),b=b||H,J)){if(11!==o&&(i=ra.exec(a)))if(e=i[1]){if(9===o){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(m&&(g=m.getElementById(e))&&N(b,g)&&g.id===e)return c.push(g),c}else{if(i[2])return $.apply(c,b.getElementsByTagName(a)),c;if((e=i[3])&&w.getElementsByClassName&&b.getElementsByClassName)return $.apply(c,b.getElementsByClassName(e)),c}if(w.qsa&&!U[a+" "]&&(!K||!K.test(a))){if(1!==o)m=b,k=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(va,wa):b.setAttribute("id",h=O),j=A(a),f=j.length;f--;)j[f]="#"+h+" "+n(j[f]);k=j.join(","),m=sa.test(a)&&l(b.parentNode)||b}if(k)try{return $.apply(c,m.querySelectorAll(k)),c}catch(a){}finally{h===O&&b.removeAttribute("id")}}}return C(a.replace(ha,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>x.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[O]=!0,a}function e(a){var b=H.createElement("fieldset");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)x.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return function(b){return"label"in b&&b.disabled===a||"form"in b&&b.disabled===a||"form"in b&&!1===b.disabled&&(b.isDisabled===a||b.isDisabled!==!a&&("label"in b||!ya(b))!==a)}}function k(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a){return a&&void 0!==a.getElementsByTagName&&a}function m(){}function n(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=R++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e)}:function(b,c,i){var j,k,l,m=[Q,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(l=b[O]||(b[O]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===Q&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function r(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function s(a,b,c,e,f,g){return e&&!e[O]&&(e=s(e)),f&&!f[O]&&(f=s(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||q(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?p:r(p,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=r(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=r(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function t(a){for(var b,c,d,e=a.length,f=x.relative[a[0].type],g=f||x.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=x.relative[a[h].type])k=[o(p(k),c)];else{if(c=x.filter[a[h].type].apply(null,a[h].matches),c[O]){for(d=++h;d<e&&!x.relative[a[d].type];d++);return s(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ha,"$1"),c,h<d&&t(a.slice(h,d)),d<e&&t(a=a.slice(d)),d<e&&n(a))}k.push(c)}return p(k)}function u(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],q=[],s=D,t=d||f&&x.find.TAG("*",j),u=Q+=null==s?1:Math.random()||.1,v=t.length;for(j&&(D=g===H||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===H||(G(k),h=!J);m=a[l++];)if(m(k,g||H,h)){i.push(k);break}j&&(Q=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,q,g,h);if(d){if(n>0)for(;o--;)p[o]||q[o]||(q[o]=Y.call(i));q=r(q)}$.apply(i,q),j&&!d&&q.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(Q=u,D=s),p};return e?d(g):g}var v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O="sizzle"+1*new Date,P=a.document,Q=0,R=0,S=c(),T=c(),U=c(),V=function(a,b){return a===b&&(F=!0),0},W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ea="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+da+"))|)"+ca+"*\\]",fa=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ea+")*)|.*)\\)|)",ga=new RegExp(ca+"+","g"),ha=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ia=new RegExp("^"+ca+"*,"+ca+"*"),ja=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),ka=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),la=new RegExp(fa),ma=new RegExp("^"+da+"$"),na={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da+"|[*])"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,qa=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,ta=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),ua=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},va=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,wa=function(a,b){return b?"\0"===a?"�":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},xa=function(){G()},ya=o(function(a){return!0===a.disabled},{dir:"parentNode",next:"legend"});try{$.apply(X=_.call(P.childNodes),P.childNodes),X[P.childNodes.length].nodeType}catch(a){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}w=b.support={},z=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},G=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:P;return d!==H&&9===d.nodeType&&d.documentElement?(H=d,I=H.documentElement,J=!z(H),P!==H&&(c=H.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),w.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),w.getElementsByTagName=e(function(a){return a.appendChild(H.createComment("")),!a.getElementsByTagName("*").length}),w.getElementsByClassName=qa.test(H.getElementsByClassName),w.getById=e(function(a){return I.appendChild(a).id=O,!H.getElementsByName||!H.getElementsByName(O).length}),w.getById?(x.find.ID=function(a,b){if(void 0!==b.getElementById&&J){var c=b.getElementById(a);return c?[c]:[]}},x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){return a.getAttribute("id")===b}}):(delete x.find.ID,x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){var c=void 0!==a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),x.find.TAG=w.getElementsByTagName?function(a,b){return void 0!==b.getElementsByTagName?b.getElementsByTagName(a):w.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},x.find.CLASS=w.getElementsByClassName&&function(a,b){if(void 0!==b.getElementsByClassName&&J)return b.getElementsByClassName(a)},L=[],K=[],(w.qsa=qa.test(H.querySelectorAll))&&(e(function(a){I.appendChild(a).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&K.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||K.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+O+"-]").length||K.push("~="),a.querySelectorAll(":checked").length||K.push(":checked"),a.querySelectorAll("a#"+O+"+*").length||K.push(".#.+[+~]")}),e(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=H.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&K.push("name"+ca+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&K.push(":enabled",":disabled"),I.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&K.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),K.push(",.*:")})),(w.matchesSelector=qa.test(M=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&e(function(a){w.disconnectedMatch=M.call(a,"*"),M.call(a,"[s!='']:x"),L.push("!=",fa)}),K=K.length&&new RegExp(K.join("|")),L=L.length&&new RegExp(L.join("|")),b=qa.test(I.compareDocumentPosition),N=b||qa.test(I.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=b?function(a,b){if(a===b)return F=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c||(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!w.sortDetached&&b.compareDocumentPosition(a)===c?a===H||a.ownerDocument===P&&N(P,a)?-1:b===H||b.ownerDocument===P&&N(P,b)?1:E?aa(E,a)-aa(E,b):0:4&c?-1:1)}:function(a,b){if(a===b)return F=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===H?-1:b===H?1:e?-1:f?1:E?aa(E,a)-aa(E,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===P?-1:i[d]===P?1:0},H):H},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==H&&G(a),c=c.replace(ka,"='$1']"),w.matchesSelector&&J&&!U[c+" "]&&(!L||!L.test(c))&&(!K||!K.test(c)))try{var d=M.call(a,c);if(d||w.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(a){}return b(c,H,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==H&&G(a),N(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==H&&G(a);var c=x.attrHandle[b.toLowerCase()],d=c&&W.call(x.attrHandle,b.toLowerCase())?c(a,b,!J):void 0;return void 0!==d?d:w.attributes||!J?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.escape=function(a){return(a+"").replace(va,wa)},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(F=!w.detectDuplicates,E=!w.sortStable&&a.slice(0),a.sort(V),F){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return E=null,a},y=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=y(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=y(b);return c},x=b.selectors={cacheLength:50,createPseudo:d,match:na,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ta,ua),a[3]=(a[3]||a[4]||a[5]||"").replace(ta,ua),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return na.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&la.test(c)&&(b=A(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ta,ua).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&S(a,function(a){return b.test("string"==typeof a.className&&a.className||void 0!==a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ga," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[Q,n,t];break}}else if(s&&(m=b,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n),!1===t)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[Q,t]),m!==b)););return(t-=e)===d||t%d==0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=x.pseudos[a]||x.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[O]?f(c):f.length>1?(e=[a,a,"",c],x.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=B(a.replace(ha,"$1"));return e[O]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ta,ua),function(b){return(b.textContent||b.innerText||y(b)).indexOf(a)>-1}}),lang:d(function(a){return ma.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ta,ua).toLowerCase(),function(b){var c;do{if(c=J?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(c=c.toLowerCase())===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===I},focus:function(a){return a===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:j(!1),disabled:j(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!x.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[c<0?c+b:c]}),even:k(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},x.pseudos.nth=x.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[v]=h(v);for(v in{submit:!0,reset:!0})x.pseudos[v]=i(v);return m.prototype=x.filters=x.pseudos,x.setFilters=new m,A=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=T[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=x.preFilter;h;){d&&!(e=ia.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ja.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ha," ")}),h=h.slice(d.length));for(g in x.filter)!(e=na[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):T(a,i).slice(0)},B=b.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=A(a)),c=b.length;c--;)f=t(b[c]),f[O]?d.push(f):e.push(f);f=U(a,u(e,d)),f.selector=a}return f},C=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,k=!d&&A(a=j.selector||a);if(c=c||[],1===k.length){if(f=k[0]=k[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&w.getById&&9===b.nodeType&&J&&x.relative[f[1].type]){if(!(b=(x.find.ID(g.matches[0].replace(ta,ua),b)||[])[0]))return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=na.needsContext.test(a)?0:f.length;e--&&(g=f[e],!x.relative[h=g.type]);)if((i=x.find[h])&&(d=i(g.matches[0].replace(ta,ua),sa.test(f[0].type)&&l(b.parentNode)||b))){if(f.splice(e,1),!(a=d.length&&n(f)))return $.apply(c,d),c;break}}return(j||B(a,k))(d,b,!J,c,!b||sa.test(a)&&l(b.parentNode)||b),c},w.sortStable=O.split("").sort(V).join("")===O,w.detectDuplicates=!!F,G(),w.sortDetached=e(function(a){return 1&a.compareDocumentPosition(H.createElement("fieldset"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),w.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);na.find=sa,na.expr=sa.selectors,na.expr[":"]=na.expr.pseudos,na.uniqueSort=na.unique=sa.uniqueSort,na.text=sa.getText,na.isXMLDoc=sa.isXML,na.contains=sa.contains,na.escapeSelector=sa.escape;var ta=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&na(a).is(c))break;d.push(a)}return d},ua=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},va=na.expr.match.needsContext,wa=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,xa=/^.[^:#\[\.,]*$/;na.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?na.find.matchesSelector(d,a)?[d]:[]:na.find.matches(a,na.grep(b,function(a){return 1===a.nodeType}))},na.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(na(a).filter(function(){for(b=0;b<d;b++)if(na.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)na.find(a,e[b],c);return d>1?na.uniqueSort(c):c},filter:function(a){return this.pushStack(f(this,a||[],!1))},not:function(a){return this.pushStack(f(this,a||[],!0))},is:function(a){return!!f(this,"string"==typeof a&&va.test(a)?na(a):a||[],!1).length}});var ya,za=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(na.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||ya,"string"==typeof a){if(!(d="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:za.exec(a))||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof na?b[0]:b,na.merge(this,na.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:aa,!0)),wa.test(d[1])&&na.isPlainObject(b))for(d in b)na.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=aa.getElementById(d[2]),e&&(this[0]=e,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):na.isFunction(a)?void 0!==c.ready?c.ready(a):a(na):na.makeArray(a,this)}).prototype=na.fn,ya=na(aa);var Aa=/^(?:parents|prev(?:Until|All))/,Ba={children:!0,contents:!0,next:!0,prev:!0};na.fn.extend({has:function(a){var b=na(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(na.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&na(a);if(!va.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&na.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?na.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?fa.call(na(a),this[0]):fa.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(na.uniqueSort(na.merge(this.get(),na(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),na.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ta(a,"parentNode")},parentsUntil:function(a,b,c){return ta(a,"parentNode",c)},next:function(a){return g(a,"nextSibling")},prev:function(a){return g(a,"previousSibling")},nextAll:function(a){return ta(a,"nextSibling")},prevAll:function(a){return ta(a,"previousSibling")},nextUntil:function(a,b,c){return ta(a,"nextSibling",c)},prevUntil:function(a,b,c){return ta(a,"previousSibling",c)},siblings:function(a){return ua((a.parentNode||{}).firstChild,a)},children:function(a){return ua(a.firstChild)},contents:function(a){return a.contentDocument||na.merge([],a.childNodes)}},function(a,b){na.fn[a]=function(c,d){var e=na.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=na.filter(d,e)),this.length>1&&(Ba[a]||na.uniqueSort(e),Aa.test(a)&&e.reverse()),this.pushStack(e)}});var Ca=/\S+/g;na.Callbacks=function(a){a="string"==typeof a?h(a):na.extend({},a);var b,c,d,e,f=[],g=[],i=-1,j=function(){for(e=a.once,d=b=!0;g.length;i=-1)for(c=g.shift();++i<f.length;)!1===f[i].apply(c[0],c[1])&&a.stopOnFalse&&(i=f.length,c=!1);a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},k={add:function(){return f&&(c&&!b&&(i=f.length-1,g.push(c)),function b(c){na.each(c,function(c,d){na.isFunction(d)?a.unique&&k.has(d)||f.push(d):d&&d.length&&"string"!==na.type(d)&&b(d)})}(arguments),c&&!b&&j()),this},remove:function(){return na.each(arguments,function(a,b){for(var c;(c=na.inArray(b,f,c))>-1;)f.splice(c,1),c<=i&&i--}),this},has:function(a){return a?na.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},na.extend({Deferred:function(b){var c=[["notify","progress",na.Callbacks("memory"),na.Callbacks("memory"),2],["resolve","done",na.Callbacks("once memory"),na.Callbacks("once memory"),0,"resolved"],["reject","fail",na.Callbacks("once memory"),na.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},catch:function(a){return e.then(null,a)},pipe:function(){var a=arguments;return na.Deferred(function(b){na.each(c,function(c,d){var e=na.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&na.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){function f(b,c,d,e){return function(){var h=this,k=arguments,l=function(){var a,l;if(!(b<g)){if((a=d.apply(h,k))===c.promise())throw new TypeError("Thenable self-resolution");l=a&&("object"==typeof a||"function"==typeof a)&&a.then,na.isFunction(l)?e?l.call(a,f(g,c,i,e),f(g,c,j,e)):(g++,l.call(a,f(g,c,i,e),f(g,c,j,e),f(g,c,i,c.notifyWith))):(d!==i&&(h=void 0,k=[a]),(e||c.resolveWith)(h,k))}},m=e?l:function(){try{l()}catch(a){na.Deferred.exceptionHook&&na.Deferred.exceptionHook(a,m.stackTrace),b+1>=g&&(d!==j&&(h=void 0,k=[a]),c.rejectWith(h,k))}};b?m():(na.Deferred.getStackHook&&(m.stackTrace=na.Deferred.getStackHook()),a.setTimeout(m))}}var g=0;return na.Deferred(function(a){c[0][3].add(f(0,a,na.isFunction(e)?e:i,a.notifyWith)),c[1][3].add(f(0,a,na.isFunction(b)?b:i)),c[2][3].add(f(0,a,na.isFunction(d)?d:j))}).promise()},promise:function(a){return null!=a?na.extend(a,e):e}},f={};return na.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=ca.call(arguments),f=na.Deferred(),g=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?ca.call(arguments):c,--b||f.resolveWith(d,e)}};if(b<=1&&(k(a,f.done(g(c)).resolve,f.reject),"pending"===f.state()||na.isFunction(e[c]&&e[c].then)))return f.then();for(;c--;)k(e[c],g(c),f.reject);return f.promise()}});var Da=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;na.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Da.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},na.readyException=function(b){a.setTimeout(function(){throw b})};var Ea=na.Deferred();na.fn.ready=function(a){return Ea.then(a).catch(function(a){na.readyException(a)}),this},na.extend({isReady:!1,readyWait:1,holdReady:function(a){a?na.readyWait++:na.ready(!0)},ready:function(a){(!0===a?--na.readyWait:na.isReady)||(na.isReady=!0,!0!==a&&--na.readyWait>0||Ea.resolveWith(aa,[na]))}}),na.ready.then=Ea.then,"complete"===aa.readyState||"loading"!==aa.readyState&&!aa.documentElement.doScroll?a.setTimeout(na.ready):(aa.addEventListener("DOMContentLoaded",l),a.addEventListener("load",l));var Fa=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===na.type(c)){e=!0;for(h in c)Fa(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,na.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(na(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ga=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};m.uid=1,m.prototype={cache:function(a){var b=a[this.expando];return b||(b={},Ga(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[na.camelCase(b)]=c;else for(d in b)e[na.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][na.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){na.isArray(b)?b=b.map(na.camelCase):(b=na.camelCase(b),b=b in d?[b]:b.match(Ca)||[]),c=b.length;for(;c--;)delete d[b[c]]}(void 0===b||na.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!na.isEmptyObject(b)}};var Ha=new m,Ia=new m,Ja=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ka=/[A-Z]/g;na.extend({hasData:function(a){return Ia.hasData(a)||Ha.hasData(a)},data:function(a,b,c){return Ia.access(a,b,c)},removeData:function(a,b){Ia.remove(a,b)},_data:function(a,b,c){return Ha.access(a,b,c)},_removeData:function(a,b){Ha.remove(a,b)}}),na.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=Ia.get(f),1===f.nodeType&&!Ha.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=na.camelCase(d.slice(5)),n(f,d,e[d])));Ha.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){Ia.set(this,a)}):Fa(this,function(b){var c;if(f&&void 0===b){if(void 0!==(c=Ia.get(f,a)))return c;if(void 0!==(c=n(f,a)))return c}else this.each(function(){Ia.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Ia.remove(this,a)})}}),na.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=Ha.get(a,b),c&&(!d||na.isArray(c)?d=Ha.access(a,b,na.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=na.queue(a,b),d=c.length,e=c.shift(),f=na._queueHooks(a,b),g=function(){na.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return Ha.get(a,c)||Ha.access(a,c,{empty:na.Callbacks("once memory").add(function(){Ha.remove(a,[b+"queue",c])})})}}),na.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?na.queue(this[0],a):void 0===b?this:this.each(function(){var c=na.queue(this,a,b);na._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&na.dequeue(this,a)})},dequeue:function(a){return this.each(function(){na.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=na.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)(c=Ha.get(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var La=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ma=new RegExp("^(?:([+-])=|)("+La+")([a-z%]*)$","i"),Na=["Top","Right","Bottom","Left"],Oa=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&na.contains(a.ownerDocument,a)&&"none"===na.css(a,"display")},Pa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Qa={};na.fn.extend({show:function(){return q(this,!0)},hide:function(){return q(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Oa(this)?na(this).show():na(this).hide()})}});var Ra=/^(?:checkbox|radio)$/i,Sa=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ta=/^$|\/(?:java|ecma)script/i,Ua={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ua.optgroup=Ua.option,Ua.tbody=Ua.tfoot=Ua.colgroup=Ua.caption=Ua.thead,Ua.th=Ua.td;var Va=/<|&#?\w+;/;!function(){var a=aa.createDocumentFragment(),b=a.appendChild(aa.createElement("div")),c=aa.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),la.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",la.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Wa=aa.documentElement,Xa=/^key/,Ya=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Za=/^([^.]*)(?:\.(.+)|)/;na.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ha.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),e&&na.find.matchesSelector(Wa,e),c.guid||(c.guid=na.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return void 0!==na&&na.event.triggered!==b.type?na.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(Ca)||[""],j=b.length;j--;)h=Za.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=na.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=na.event.special[n]||{},k=na.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&na.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&!1!==l.setup.call(a,d,o,g)||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),na.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ha.hasData(a)&&Ha.get(a);if(q&&(i=q.events)){for(b=(b||"").match(Ca)||[""],j=b.length;j--;)if(h=Za.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=na.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&!1!==l.teardown.call(a,o,q.handle)||na.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)na.event.remove(a,n+b[j],c,d,!0);na.isEmptyObject(i)&&Ha.remove(a,"handle events")}},dispatch:function(a){var b,c,d,e,f,g,h=na.event.fix(a),i=new Array(arguments.length),j=(Ha.get(this,"events")||{})[h.type]||[],k=na.event.special[h.type]||{};for(i[0]=h,b=1;b<arguments.length;b++)i[b]=arguments[b];if(h.delegateTarget=this,!k.preDispatch||!1!==k.preDispatch.call(this,h)){for(g=na.event.handlers.call(this,h,j),b=0;(e=g[b++])&&!h.isPropagationStopped();)for(h.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!h.rnamespace.test(f.namespace)||(h.handleObj=f,h.data=f.data,void 0!==(d=((na.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,i))&&!1===(h.result=d)&&(h.preventDefault(),h.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,h),h.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(!0!==i.disabled||"click"!==a.type)){for(d=[],c=0;c<h;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?na(e,this).index(i)>-1:na.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},addProp:function(a,b){Object.defineProperty(na.Event.prototype,a,{enumerable:!0,configurable:!0,get:na.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[na.expando]?a:new na.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==w()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===w()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&na.nodeName(this,"input"))return this.click(),!1},_default:function(a){return na.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},na.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},na.Event=function(a,b){if(!(this instanceof na.Event))return new na.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?u:v,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&na.extend(this,b),this.timeStamp=a&&a.timeStamp||na.now(),this[na.expando]=!0},na.Event.prototype={constructor:na.Event,isDefaultPrevented:v,isPropagationStopped:v,isImmediatePropagationStopped:v,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=u,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=u,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=u,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},na.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&Xa.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&Ya.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},na.event.addProp),na.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){na.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||na.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),na.fn.extend({on:function(a,b,c,d){return x(this,a,b,c,d)},one:function(a,b,c,d){return x(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,na(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return!1!==b&&"function"!=typeof b||(c=b,b=void 0),!1===c&&(c=v),this.each(function(){na.event.remove(this,a,c,b)})}});var $a=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,_a=/<script|<style|<link/i,ab=/checked\s*(?:[^=]|=\s*.checked.)/i,bb=/^true\/(.*)/,cb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;na.extend({htmlPrefilter:function(a){return a.replace($a,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=na.contains(a.ownerDocument,a);if(!(la.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||na.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;d<e;d++)C(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;d<e;d++)B(f[d],g[d]);else B(a,h);return g=r(h,"script"),g.length>0&&s(g,!i&&r(a,"script")),h},cleanData:function(a){for(var b,c,d,e=na.event.special,f=0;void 0!==(c=a[f]);f++)if(Ga(c)){if(b=c[Ha.expando]){if(b.events)for(d in b.events)e[d]?na.event.remove(c,d):na.removeEvent(c,d,b.handle);c[Ha.expando]=void 0}c[Ia.expando]&&(c[Ia.expando]=void 0)}}}),na.fn.extend({detach:function(a){return E(this,a,!0)},remove:function(a){return E(this,a)},text:function(a){return Fa(this,function(a){return void 0===a?na.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return D(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){y(this,a).appendChild(a)}})},prepend:function(){return D(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=y(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return D(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return D(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(na.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return na.clone(this,a,b)})},html:function(a){return Fa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!_a.test(a)&&!Ua[(Sa.exec(a)||["",""])[1].toLowerCase()]){a=na.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(na.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(a){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return D(this,arguments,function(b){var c=this.parentNode;na.inArray(this,a)<0&&(na.cleanData(r(this)),c&&c.replaceChild(b,this))},a)}}),na.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){na.fn[a]=function(a){for(var c,d=[],e=na(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),na(e[g])[b](c),ea.apply(d,c.get());return this.pushStack(d)}});var db=/^margin/,eb=new RegExp("^("+La+")(?!px)[a-z%]+$","i"),fb=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(h){h.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Wa.appendChild(g);var b=a.getComputedStyle(h);c="1%"!==b.top,f="2px"===b.marginLeft,d="4px"===b.width,h.style.marginRight="50%",e="4px"===b.marginRight,Wa.removeChild(g),h=null}}var c,d,e,f,g=aa.createElement("div"),h=aa.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",la.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h),na.extend(la,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),d},pixelMarginRight:function(){return b(),e},reliableMarginLeft:function(){return b(),f}}))}();var gb=/^(none|table(?!-c[ea]).+)/,hb={position:"absolute",visibility:"hidden",display:"block"},ib={letterSpacing:"0",fontWeight:"400"},jb=["Webkit","Moz","ms"],kb=aa.createElement("div").style;na.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=F(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=na.camelCase(b),i=a.style;if(b=na.cssProps[h]||(na.cssProps[h]=H(h)||h),g=na.cssHooks[b]||na.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];f=typeof c,"string"===f&&(e=Ma.exec(c))&&e[1]&&(c=o(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(na.cssNumber[h]?"":"px")),la.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c))}},css:function(a,b,c,d){var e,f,g,h=na.camelCase(b);return b=na.cssProps[h]||(na.cssProps[h]=H(h)||h),g=na.cssHooks[b]||na.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=F(a,b,d)),"normal"===e&&b in ib&&(e=ib[b]),""===c||c?(f=parseFloat(e),!0===c||isFinite(f)?f||0:e):e}}),na.each(["height","width"],function(a,b){na.cssHooks[b]={get:function(a,c,d){if(c)return!gb.test(na.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?K(a,b,d):Pa(a,hb,function(){return K(a,b,d)})},set:function(a,c,d){var e,f=d&&fb(a),g=d&&J(a,b,d,"border-box"===na.css(a,"boxSizing",!1,f),f);return g&&(e=Ma.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=na.css(a,b)),I(a,c,g)}}}),na.cssHooks.marginLeft=G(la.reliableMarginLeft,function(a,b){if(b)return(parseFloat(F(a,"marginLeft"))||a.getBoundingClientRect().left-Pa(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),na.each({margin:"",padding:"",border:"Width"},function(a,b){na.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+Na[d]+b]=f[d]||f[d-2]||f[0];return e}},db.test(a)||(na.cssHooks[a+b].set=I)}),na.fn.extend({css:function(a,b){return Fa(this,function(a,b,c){var d,e,f={},g=0;if(na.isArray(b)){for(d=fb(a),e=b.length;g<e;g++)f[b[g]]=na.css(a,b[g],!1,d);return f}return void 0!==c?na.style(a,b,c):na.css(a,b)},a,b,arguments.length>1)}}),na.Tween=L,L.prototype={constructor:L,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||na.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(na.cssNumber[c]?"":"px")},cur:function(){var a=L.propHooks[this.prop];return a&&a.get?a.get(this):L.propHooks._default.get(this)},run:function(a){var b,c=L.propHooks[this.prop];return this.options.duration?this.pos=b=na.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=na.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){na.fx.step[a.prop]?na.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[na.cssProps[a.prop]]&&!na.cssHooks[a.prop]?a.elem[a.prop]=a.now:na.style(a.elem,a.prop,a.now+a.unit)}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},na.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},na.fx=L.prototype.init,na.fx.step={};var lb,mb,nb=/^(?:toggle|show|hide)$/,ob=/queueHooks$/;na.Animation=na.extend(S,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return o(c.elem,a,Ma.exec(b),c),c}]},tweener:function(a,b){na.isFunction(a)?(b=a,a=["*"]):a=a.match(Ca);for(var c,d=0,e=a.length;d<e;d++)c=a[d],S.tweeners[c]=S.tweeners[c]||[],S.tweeners[c].unshift(b)},prefilters:[Q],prefilter:function(a,b){b?S.prefilters.unshift(a):S.prefilters.push(a)}}),na.speed=function(a,b,c){var d=a&&"object"==typeof a?na.extend({},a):{complete:c||!c&&b||na.isFunction(a)&&a,duration:a,easing:c&&b||b&&!na.isFunction(b)&&b};return na.fx.off||aa.hidden?d.duration=0:d.duration="number"==typeof d.duration?d.duration:d.duration in na.fx.speeds?na.fx.speeds[d.duration]:na.fx.speeds._default,null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){na.isFunction(d.old)&&d.old.call(this),d.queue&&na.dequeue(this,d.queue)},d},na.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Oa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=na.isEmptyObject(a),f=na.speed(b,c,d),g=function(){var b=S(this,na.extend({},a),f);(e||Ha.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=na.timers,g=Ha.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ob.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||na.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=Ha.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=na.timers,g=d?d.length:0;for(c.finish=!0,na.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),na.each(["toggle","show","hide"],function(a,b){var c=na.fn[b];na.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(O(b,!0),a,d,e)}}),na.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){na.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),na.timers=[],na.fx.tick=function(){var a,b=0,c=na.timers;for(lb=na.now();b<c.length;b++)(a=c[b])()||c[b]!==a||c.splice(b--,1);c.length||na.fx.stop(),lb=void 0},na.fx.timer=function(a){na.timers.push(a),a()?na.fx.start():na.timers.pop()},na.fx.interval=13,na.fx.start=function(){mb||(mb=a.requestAnimationFrame?a.requestAnimationFrame(M):a.setInterval(na.fx.tick,na.fx.interval))},na.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame(mb):a.clearInterval(mb),mb=null},na.fx.speeds={slow:600,fast:200,_default:400},na.fn.delay=function(b,c){return b=na.fx?na.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=aa.createElement("input"),b=aa.createElement("select"),c=b.appendChild(aa.createElement("option"));a.type="checkbox",la.checkOn=""!==a.value,la.optSelected=c.selected,a=aa.createElement("input"),a.value="t",a.type="radio",la.radioValue="t"===a.value}();var pb,qb=na.expr.attrHandle;na.fn.extend({attr:function(a,b){return Fa(this,na.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){na.removeAttr(this,a)})}}),na.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return void 0===a.getAttribute?na.prop(a,b,c):(1===f&&na.isXMLDoc(a)||(e=na.attrHooks[b.toLowerCase()]||(na.expr.match.bool.test(b)?pb:void 0)),void 0!==c?null===c?void na.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=na.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!la.radioValue&&"radio"===b&&na.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(Ca);if(e&&1===a.nodeType)for(;c=e[d++];)a.removeAttribute(c)}}),pb={set:function(a,b,c){return!1===b?na.removeAttr(a,c):a.setAttribute(c,c),c}},na.each(na.expr.match.bool.source.match(/\w+/g),function(a,b){var c=qb[b]||na.find.attr;qb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=qb[g],qb[g]=e,e=null!=c(a,b,d)?g:null,qb[g]=f),e}});var rb=/^(?:input|select|textarea|button)$/i,sb=/^(?:a|area)$/i;na.fn.extend({prop:function(a,b){return Fa(this,na.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[na.propFix[a]||a]})}}),na.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&na.isXMLDoc(a)||(b=na.propFix[b]||b,e=na.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=na.find.attr(a,"tabindex");return b?parseInt(b,10):rb.test(a.nodeName)||sb.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),la.optSelected||(na.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),na.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){na.propFix[this.toLowerCase()]=this});var tb=/[\t\r\n\f]/g;na.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(na.isFunction(a))return this.each(function(b){na(this).addClass(a.call(this,b,T(this)))});if("string"==typeof a&&a)for(b=a.match(Ca)||[];c=this[i++];)if(e=T(c),d=1===c.nodeType&&(" "+e+" ").replace(tb," ")){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=na.trim(d),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(na.isFunction(a))return this.each(function(b){na(this).removeClass(a.call(this,b,T(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(Ca)||[];c=this[i++];)if(e=T(c),d=1===c.nodeType&&(" "+e+" ").replace(tb," ")){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=na.trim(d),e!==h&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):na.isFunction(a)?this.each(function(c){na(this).toggleClass(a.call(this,c,T(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=na(this),f=a.match(Ca)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else void 0!==a&&"boolean"!==c||(b=T(this),b&&Ha.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||!1===a?"":Ha.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+T(c)+" ").replace(tb," ").indexOf(b)>-1)return!0;return!1}});var ub=/\r/g,vb=/[\x20\t\r\n\f]+/g;na.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=na.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,na(this).val()):a,null==e?e="":"number"==typeof e?e+="":na.isArray(e)&&(e=na.map(e,function(a){return null==a?"":a+""})),(b=na.valHooks[this.type]||na.valHooks[this.nodeName.toLowerCase()])&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return(b=na.valHooks[e.type]||na.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ub,""):null==c?"":c)}}}),na.extend({valHooks:{option:{get:function(a){var b=na.find.attr(a,"value");return null!=b?b:na.trim(na.text(a)).replace(vb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&!c.disabled&&(!c.parentNode.disabled||!na.nodeName(c.parentNode,"optgroup"))){if(b=na(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=na.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=na.inArray(na.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),na.each(["radio","checkbox"],function(){na.valHooks[this]={set:function(a,b){if(na.isArray(b))return a.checked=na.inArray(na(a).val(),b)>-1}},la.checkOn||(na.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var wb=/^(?:focusinfocus|focusoutblur)$/;na.extend(na.event,{trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||aa],n=ia.call(b,"type")?b.type:b,o=ia.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||aa,3!==d.nodeType&&8!==d.nodeType&&!wb.test(n+na.event.triggered)&&(n.indexOf(".")>-1&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[na.expando]?b:new na.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:na.makeArray(c,[b]),l=na.event.special[n]||{},e||!l.trigger||!1!==l.trigger.apply(d,c))){if(!e&&!l.noBubble&&!na.isWindow(d)){for(i=l.delegateType||n,wb.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||aa)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(Ha.get(g,"events")||{})[b.type]&&Ha.get(g,"handle"),k&&k.apply(g,c),(k=j&&g[j])&&k.apply&&Ga(g)&&(b.result=k.apply(g,c),!1===b.result&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&!1!==l._default.apply(m.pop(),c)||!Ga(d)||j&&na.isFunction(d[n])&&!na.isWindow(d)&&(h=d[j],h&&(d[j]=null),na.event.triggered=n,d[n](),na.event.triggered=void 0,h&&(d[j]=h)),b.result}},simulate:function(a,b,c){var d=na.extend(new na.Event,c,{type:a,isSimulated:!0});na.event.trigger(d,null,b)}}),na.fn.extend({trigger:function(a,b){return this.each(function(){na.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return na.event.trigger(a,b,c,!0)}}),na.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){na.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),na.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),la.focusin="onfocusin"in a,la.focusin||na.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){na.event.simulate(b,a.target,na.event.fix(a))};na.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=Ha.access(d,b);e||d.addEventListener(a,c,!0),Ha.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=Ha.access(d,b)-1;e?Ha.access(d,b,e):(d.removeEventListener(a,c,!0),Ha.remove(d,b))}}});var xb=a.location,yb=na.now(),zb=/\?/;na.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(a){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||na.error("Invalid XML: "+b),c};var Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;na.param=function(a,b){var c,d=[],e=function(a,b){var c=na.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(na.isArray(a)||a.jquery&&!na.isPlainObject(a))na.each(a,function(){e(this.name,this.value)});else for(c in a)U(c,a[c],b,e);return d.join("&")},na.fn.extend({serialize:function(){return na.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=na.prop(this,"elements");return a?na.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!na(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!Ra.test(a))}).map(function(a,b){var c=na(this).val();return null==c?null:na.isArray(c)?na.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}});var Eb=/%20/g,Fb=/#.*$/,Gb=/([?&])_=[^&]*/,Hb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ib=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Jb=/^(?:GET|HEAD)$/,Kb=/^\/\//,Lb={},Mb={},Nb="*/".concat("*"),Ob=aa.createElement("a");Ob.href=xb.href,na.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xb.href,type:"GET",isLocal:Ib.test(xb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":na.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?X(X(a,na.ajaxSettings),b):X(na.ajaxSettings,a)},ajaxPrefilter:V(Lb),ajaxTransport:V(Mb),ajax:function(b,c){function d(b,c,d,h){var j,m,n,u,v,w=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(u=Y(o,x,d)),u=Z(o,u,x,j),j?(o.ifModified&&(v=x.getResponseHeader("Last-Modified"),v&&(na.lastModified[f]=v),(v=x.getResponseHeader("etag"))&&(na.etag[f]=v)),204===b||"HEAD"===o.type?w="nocontent":304===b?w="notmodified":(w=u.state,m=u.data,n=u.error,j=!n)):(n=w,!b&&w||(w="error",b<0&&(b=0))),x.status=b,x.statusText=(c||w)+"",j?r.resolveWith(p,[m,w,x]):r.rejectWith(p,[x,w,n]),x.statusCode(t),t=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[x,o,j?m:n]),s.fireWith(p,[x,w]),l&&(q.trigger("ajaxComplete",[x,o]),--na.active||na.event.trigger("ajaxStop")))}"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=na.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?na(p):na.event,r=na.Deferred(),s=na.Callbacks("once memory"),t=o.statusCode||{},u={},v={},w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h)for(h={};b=Hb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=v[a.toLowerCase()]=v[a.toLowerCase()]||a,u[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)x.always(a[x.status]);else for(b in a)t[b]=[t[b],a[b]];return this},abort:function(a){var b=a||w;return e&&e.abort(b),d(0,b),this}};if(r.promise(x),o.url=((b||o.url||xb.href)+"").replace(Kb,xb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(Ca)||[""],null==o.crossDomain){j=aa.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ob.protocol+"//"+Ob.host!=j.protocol+"//"+j.host}catch(a){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=na.param(o.data,o.traditional)),W(Lb,o,c,x),k)return x;l=na.event&&o.global,l&&0==na.active++&&na.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Jb.test(o.type),f=o.url.replace(Fb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Eb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(zb.test(f)?"&":"?")+o.data,delete o.data),!1===o.cache&&(f=f.replace(Gb,""),n=(zb.test(f)?"&":"?")+"_="+yb+++n),o.url=f+n),o.ifModified&&(na.lastModified[f]&&x.setRequestHeader("If-Modified-Since",na.lastModified[f]),na.etag[f]&&x.setRequestHeader("If-None-Match",na.etag[f])),(o.data&&o.hasContent&&!1!==o.contentType||c.contentType)&&x.setRequestHeader("Content-Type",o.contentType),x.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Nb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)x.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(!1===o.beforeSend.call(p,x,o)||k))return x.abort();if(w="abort",s.add(o.complete),x.done(o.success),x.fail(o.error),e=W(Mb,o,c,x)){if(x.readyState=1,l&&q.trigger("ajaxSend",[x,o]),k)return x;o.async&&o.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},o.timeout));try{k=!1,e.send(u,d)}catch(a){if(k)throw a;d(-1,a)}}else d(-1,"No Transport");return x},getJSON:function(a,b,c){return na.get(a,b,c,"json")},getScript:function(a,b){return na.get(a,void 0,b,"script")}}),na.each(["get","post"],function(a,b){na[b]=function(a,c,d,e){return na.isFunction(c)&&(e=e||d,d=c,c=void 0),na.ajax(na.extend({url:a,type:b,dataType:e,data:c,success:d},na.isPlainObject(a)&&a))}}),na._evalUrl=function(a){return na.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},na.fn.extend({wrapAll:function(a){var b;return this[0]&&(na.isFunction(a)&&(a=a.call(this[0])),b=na(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return na.isFunction(a)?this.each(function(b){na(this).wrapInner(a.call(this,b))}):this.each(function(){var b=na(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=na.isFunction(a);return this.each(function(c){na(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){na(this).replaceWith(this.childNodes)}),this}}),na.expr.pseudos.hidden=function(a){return!na.expr.pseudos.visible(a)},na.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},na.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(a){}};var Pb={0:200,1223:204},Qb=na.ajaxSettings.xhr();la.cors=!!Qb&&"withCredentials"in Qb,la.ajax=Qb=!!Qb,na.ajaxTransport(function(b){var c,d;if(la.cors||Qb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Pb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(a){if(c)throw a}},abort:function(){c&&c()}}}),na.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),na.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return na.globalEval(a),a}}}),na.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),na.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=na("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),aa.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Rb=[],Sb=/(=)\?(?=&|$)|\?\?/;na.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Rb.pop()||na.expando+"_"+yb++;return this[a]=!0,a}}),na.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=!1!==b.jsonp&&(Sb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Sb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=na.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Sb,"$1"+e):!1!==b.jsonp&&(b.url+=(zb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||na.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?na(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Rb.push(e)),g&&na.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),la.createHTMLDocument=function(){var a=aa.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),na.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var d,e,f;return b||(la.createHTMLDocument?(b=aa.implementation.createHTMLDocument(""),d=b.createElement("base"),d.href=aa.location.href,b.head.appendChild(d)):b=aa),e=wa.exec(a),f=!c&&[],e?[b.createElement(e[1])]:(e=t([a],b,f),f&&f.length&&na(f).remove(),na.merge([],e.childNodes))},na.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=na.trim(a.slice(h)),a=a.slice(0,h)),na.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&na.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?na("<div>").append(na.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},na.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){na.fn[b]=function(a){return this.on(b,a)}}),na.expr.pseudos.animated=function(a){return na.grep(na.timers,function(b){return a===b.elem}).length},na.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=na.css(a,"position"),l=na(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=na.css(a,"top"),i=na.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),na.isFunction(b)&&(b=b.call(a,c,na.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},na.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){na.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=$(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===na.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),na.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+na.css(a[0],"borderTopWidth",!0),left:d.left+na.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-na.css(c,"marginTop",!0),left:b.left-d.left-na.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===na.css(a,"position");)a=a.offsetParent;return a||Wa})}}),na.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;na.fn[a]=function(d){return Fa(this,function(a,d,e){var f=$(a);if(void 0===e)return f?f[b]:a[d];f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e},a,d,arguments.length)}}),na.each(["top","left"],function(a,b){na.cssHooks[b]=G(la.pixelPosition,function(a,c){if(c)return c=F(a,b),eb.test(c)?na(a).position()[b]+"px":c})}),na.each({Height:"height",Width:"width"},function(a,b){na.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){na.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(!0===e||!0===f?"margin":"border");return Fa(this,function(b,c,e){var f;return na.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?na.css(b,c,h):na.style(b,c,e,h)},b,g?e:void 0,g)}})}),na.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),na.parseJSON=JSON.parse,"function"==typeof b&&b.amd&&b("db",[],function(){return na})&&b("jquery",["db"],function(a){return a});var Tb=a.jQuery,Ub=a.$;return na.noConflict=function(b){return a.$===na&&(a.$=Ub),b&&a.jQuery===na&&(a.jQuery=Tb),na},c||(a.jQuery=a.$=na),na})}(),a.registerDynamic("dc",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){!function(a){a.color={},a.color.make=function(b,c,d,e){var f={};return f.r=b||0,f.g=c||0,f.b=d||0,f.a=null!=e?e:1,f.add=function(a,b){for(var c=0;c<a.length;++c)f[a.charAt(c)]+=b;return f.normalize()},f.scale=function(a,b){for(var c=0;c<a.length;++c)f[a.charAt(c)]*=b;return f.normalize()},f.toString=function(){return f.a>=1?"rgb("+[f.r,f.g,f.b].join(",")+")":"rgba("+[f.r,f.g,f.b,f.a].join(",")+")"},f.normalize=function(){function a(a,b,c){return b<a?a:b>c?c:b}return f.r=a(0,parseInt(f.r),255),f.g=a(0,parseInt(f.g),255),f.b=a(0,parseInt(f.b),255),f.a=a(0,f.a,1),f},f.clone=function(){return a.color.make(f.r,f.b,f.g,f.a)},f.normalize()},a.color.extract=function(b,c){var d;do{if(""!=(d=b.css(c).toLowerCase())&&"transparent"!=d)break;b=b.parent()}while(b.length&&!a.nodeName(b.get(0),"body"));return"rgba(0, 0, 0, 0)"==d&&(d="transparent"),a.color.parse(d)},a.color.parse=function(c){var d,e=a.color.make;if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))return e(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10));if(d=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10),parseFloat(d[4]));if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))return e(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]));if(d=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]),parseFloat(d[4]));if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))return e(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16));if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))return e(parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16));var f=a.trim(c).toLowerCase();return"transparent"==f?e(255,255,255,0):(d=b[f]||[0,0,0],e(d[0],d[1],d[2]))};var b={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(a){function b(b,c){var d=c.children("."+b)[0];if(null==d&&(d=document.createElement("canvas"),d.className=b,a(d).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(c),!d.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");d=window.G_vmlCanvasManager.initElement(d)}this.element=d;var e=this.context=d.getContext("2d"),f=window.devicePixelRatio||1,g=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;this.pixelRatio=f/g,this.resize(c.width(),c.height()),this.textContainer=null,this.text={},this._textCache={}}function c(c,e,f,g){function h(a,b){b=[qa].concat(b);for(var c=0;c<a.length;++c)a[c].apply(this,b)}function i(){for(var c={Canvas:b},d=0;d<g.length;++d){var e=g[d];e.init(qa,c),e.options&&a.extend(!0,ea,e.options)}}function j(b){a.extend(!0,ea,b),b&&b.colors&&(ea.colors=b.colors),null==ea.xaxis.color&&(ea.xaxis.color=a.color.parse(ea.grid.color).scale("a",.22).toString()),null==ea.yaxis.color&&(ea.yaxis.color=a.color.parse(ea.grid.color).scale("a",.22).toString()),null==ea.xaxis.tickColor&&(ea.xaxis.tickColor=ea.grid.tickColor||ea.xaxis.color),null==ea.yaxis.tickColor&&(ea.yaxis.tickColor=ea.grid.tickColor||ea.yaxis.color),null==ea.grid.borderColor&&(ea.grid.borderColor=ea.grid.color),null==ea.grid.tickColor&&(ea.grid.tickColor=a.color.parse(ea.grid.color).scale("a",.22).toString());var d,e,f,g=c.css("font-size"),i=g?+g.replace("px",""):13,j={style:c.css("font-style"),size:Math.round(.8*i),variant:c.css("font-variant"),weight:c.css("font-weight"),family:c.css("font-family")};for(f=ea.xaxes.length||1,d=0;d<f;++d)e=ea.xaxes[d],e&&!e.tickColor&&(e.tickColor=e.color),e=a.extend(!0,{},ea.xaxis,e),ea.xaxes[d]=e,e.font&&(e.font=a.extend({},j,e.font),e.font.color||(e.font.color=e.color),e.font.lineHeight||(e.font.lineHeight=Math.round(1.15*e.font.size)));for(f=ea.yaxes.length||1,d=0;d<f;++d)e=ea.yaxes[d],e&&!e.tickColor&&(e.tickColor=e.color),e=a.extend(!0,{},ea.yaxis,e),ea.yaxes[d]=e,e.font&&(e.font=a.extend({},j,e.font),e.font.color||(e.font.color=e.color),e.font.lineHeight||(e.font.lineHeight=Math.round(1.15*e.font.size)));for(ea.xaxis.noTicks&&null==ea.xaxis.ticks&&(ea.xaxis.ticks=ea.xaxis.noTicks),ea.yaxis.noTicks&&null==ea.yaxis.ticks&&(ea.yaxis.ticks=ea.yaxis.noTicks),ea.x2axis&&(ea.xaxes[1]=a.extend(!0,{},ea.xaxis,ea.x2axis),ea.xaxes[1].position="top",null==ea.x2axis.min&&(ea.xaxes[1].min=null),null==ea.x2axis.max&&(ea.xaxes[1].max=null)),ea.y2axis&&(ea.yaxes[1]=a.extend(!0,{},ea.yaxis,ea.y2axis),ea.yaxes[1].position="right",null==ea.y2axis.min&&(ea.yaxes[1].min=null),null==ea.y2axis.max&&(ea.yaxes[1].max=null)),ea.grid.coloredAreas&&(ea.grid.markings=ea.grid.coloredAreas),ea.grid.coloredAreasColor&&(ea.grid.markingsColor=ea.grid.coloredAreasColor),ea.lines&&a.extend(!0,ea.series.lines,ea.lines),ea.points&&a.extend(!0,ea.series.points,ea.points),ea.bars&&a.extend(!0,ea.series.bars,ea.bars),null!=ea.shadowSize&&(ea.series.shadowSize=ea.shadowSize),null!=ea.highlightColor&&(ea.series.highlightColor=ea.highlightColor),d=0;d<ea.xaxes.length;++d)q(ka,d+1).options=ea.xaxes[d];for(d=0;d<ea.yaxes.length;++d)q(la,d+1).options=ea.yaxes[d];for(var k in pa)ea.hooks[k]&&ea.hooks[k].length&&(pa[k]=pa[k].concat(ea.hooks[k]));h(pa.processOptions,[ea])}function k(a){da=l(a),r(),s()}function l(b){for(var c=[],d=0;d<b.length;++d){var e=a.extend(!0,{},ea.series);null!=b[d].data?(e.data=b[d].data,delete b[d].data,a.extend(!0,e,b[d]),b[d].data=e.data):e.data=b[d],c.push(e)}return c}function m(a,b){var c=a[b+"axis"];return"object"==typeof c&&(c=c.n),"number"!=typeof c&&(c=1),c}function n(){return a.grep(ka.concat(la),function(a){return a})}function o(a){var b,c,d={};for(b=0;b<ka.length;++b)(c=ka[b])&&c.used&&(d["x"+c.n]=c.c2p(a.left));for(b=0;b<la.length;++b)(c=la[b])&&c.used&&(d["y"+c.n]=c.c2p(a.top));return void 0!==d.x1&&(d.x=d.x1),void 0!==d.y1&&(d.y=d.y1),d}function p(a){var b,c,d,e={};for(b=0;b<ka.length;++b)if((c=ka[b])&&c.used&&(d="x"+c.n,null==a[d]&&1==c.n&&(d="x"),null!=a[d])){e.left=c.p2c(a[d]);break}for(b=0;b<la.length;++b)if((c=la[b])&&c.used&&(d="y"+c.n,null==a[d]&&1==c.n&&(d="y"),null!=a[d])){e.top=c.p2c(a[d]);break}return e}function q(b,c){return b[c-1]||(b[c-1]={n:c,direction:b==ka?"x":"y",options:a.extend(!0,{},b==ka?ea.xaxis:ea.yaxis)}),b[c-1]}function r(){var b,c=da.length,d=-1;for(b=0;b<da.length;++b){var e=da[b].color;null!=e&&(c--,"number"==typeof e&&e>d&&(d=e))}c<=d&&(c=d+1);var f,g=[],h=ea.colors,i=h.length,j=0;for(b=0;b<c;b++)f=a.color.parse(h[b%i]||"#666"),b%i==0&&b&&(j=j>=0?j<.5?-j-.2:0:-j),g[b]=f.scale("rgb",1+j);var k,l=0;for(b=0;b<da.length;++b){if(k=da[b],null==k.color?(k.color=g[l].toString(),++l):"number"==typeof k.color&&(k.color=g[k.color].toString()),null==k.lines.show){var n,o=!0;for(n in k)if(k[n]&&k[n].show){o=!1;break}o&&(k.lines.show=!0)}null==k.lines.zero&&(k.lines.zero=!!k.lines.fill),k.xaxis=q(ka,m(k,"x")),k.yaxis=q(la,m(k,"y"))}}function s(){function b(a,b,c){b<a.datamin&&b!=-s&&(a.datamin=b),c>a.datamax&&c!=s&&(a.datamax=c)}var c,d,e,f,g,i,j,k,l,m,o,p,q=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,s=Number.MAX_VALUE;for(a.each(n(),function(a,b){b.datamin=q,b.datamax=r,b.used=!1}),c=0;c<da.length;++c)g=da[c],g.datapoints={points:[]},h(pa.processRawData,[g,g.data,g.datapoints]);for(c=0;c<da.length;++c){if(g=da[c],o=g.data,!(p=g.datapoints.format)){if(p=[],p.push({x:!0,number:!0,required:!0}),p.push({y:!0,number:!0,required:!0}),g.bars.show||g.lines.show&&g.lines.fill){var t=!!(g.bars.show&&g.bars.zero||g.lines.show&&g.lines.zero);p.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:t}),g.bars.horizontal&&(delete p[p.length-1].y,p[p.length-1].x=!0)}g.datapoints.format=p}if(null==g.datapoints.pointsize){g.datapoints.pointsize=p.length,j=g.datapoints.pointsize,i=g.datapoints.points;var u=g.lines.show&&g.lines.steps;for(g.xaxis.used=g.yaxis.used=!0,d=e=0;d<o.length;++d,e+=j){m=o[d];var v=null==m;if(!v)for(f=0;f<j;++f)k=m[f],l=p[f],l&&(l.number&&null!=k&&(k=+k,isNaN(k)?k=null:k==1/0?k=s:k==-1/0&&(k=-s)),null==k&&(l.required&&(v=!0),null!=l.defaultValue&&(k=l.defaultValue))),i[e+f]=k;if(v)for(f=0;f<j;++f)k=i[e+f],null!=k&&(l=p[f],!1!==l.autoscale&&(l.x&&b(g.xaxis,k,k),l.y&&b(g.yaxis,k,k))),i[e+f]=null;else if(u&&e>0&&null!=i[e-j]&&i[e-j]!=i[e]&&i[e-j+1]!=i[e+1]){for(f=0;f<j;++f)i[e+j+f]=i[e+f];i[e+1]=i[e-j+1],e+=j}}}}for(c=0;c<da.length;++c)g=da[c],h(pa.processDatapoints,[g,g.datapoints]);for(c=0;c<da.length;++c){g=da[c],i=g.datapoints.points,j=g.datapoints.pointsize,p=g.datapoints.format;var w=q,x=q,y=r,z=r;for(d=0;d<i.length;d+=j)if(null!=i[d])for(f=0;f<j;++f)k=i[d+f],(l=p[f])&&!1!==l.autoscale&&k!=s&&k!=-s&&(l.x&&(k<w&&(w=k),k>y&&(y=k)),l.y&&(k<x&&(x=k),k>z&&(z=k)));if(g.bars.show){var A;switch(g.bars.align){case"left":A=0;break;case"right":A=-g.bars.barWidth;break;default:A=-g.bars.barWidth/2}g.bars.horizontal?(x+=A,z+=A+g.bars.barWidth):(w+=A,y+=A+g.bars.barWidth)}b(g.xaxis,w,y),b(g.yaxis,x,z)}a.each(n(),function(a,b){b.datamin==q&&(b.datamin=null),b.datamax==r&&(b.datamax=null)})}function t(){c.css("padding",0).children().filter(function(){return!a(this).hasClass("flot-overlay")&&!a(this).hasClass("flot-base")}).remove(),"static"==c.css("position")&&c.css("position","relative"),fa=new b("flot-base",c),ga=new b("flot-overlay",c),ia=fa.context,ja=ga.context,ha=a(ga.element).unbind();var d=c.data("plot");d&&(d.shutdown(),ga.clear()),c.data("plot",qa)}function u(){ea.grid.hoverable&&(ha.mousemove(T),ha.bind("mouseleave",U)),ea.grid.clickable&&ha.click(V),h(pa.bindEvents,[ha])}function v(){sa&&clearTimeout(sa),ha.unbind("mousemove",T),ha.unbind("mouseleave",U),ha.unbind("click",V),h(pa.shutdown,[ha])}function w(a){function b(a){return a}var c,d,e=a.options.transform||b,f=a.options.inverseTransform;"x"==a.direction?(c=a.scale=na/Math.abs(e(a.max)-e(a.min)),d=Math.min(e(a.max),e(a.min))):(c=a.scale=oa/Math.abs(e(a.max)-e(a.min)),c=-c,d=Math.max(e(a.max),e(a.min))),a.p2c=e==b?function(a){return(a-d)*c}:function(a){return(e(a)-d)*c},a.c2p=f?function(a){return f(d+a/c)}:function(a){return d+a/c}}function x(a){for(var b=a.options,c=a.ticks||[],d=b.labelWidth||0,e=b.labelHeight||0,f=d||("x"==a.direction?Math.floor(fa.width/(c.length||1)):null),g=a.direction+"Axis "+a.direction+a.n+"Axis",h="flot-"+a.direction+"-axis flot-"+a.direction+a.n+"-axis "+g,i=b.font||"flot-tick-label tickLabel",j=0;j<c.length;++j){var k=c[j];if(k.label){var l=fa.getTextInfo(h,k.label,i,null,f);d=Math.max(d,l.width),e=Math.max(e,l.height)}}a.labelWidth=b.labelWidth||d,a.labelHeight=b.labelHeight||e}function y(b){var c=b.labelWidth,d=b.labelHeight,e=b.options.position,f="x"===b.direction,g=b.options.tickLength,h=ea.grid.axisMargin,i=ea.grid.labelMargin,j=!0,k=!0,l=!0,m=!1;a.each(f?ka:la,function(a,c){c&&(c.show||c.reserveSpace)&&(c===b?m=!0:c.options.position===e&&(m?k=!1:j=!1),m||(l=!1))}),k&&(h=0),null==g&&(g=l?"full":5),isNaN(+g)||(i+=+g),f?(d+=i,"bottom"==e?(ma.bottom+=d+h,b.box={top:fa.height-ma.bottom,height:d}):(b.box={top:ma.top+h,height:d},ma.top+=d+h)):(c+=i,"left"==e?(b.box={left:ma.left+h,width:c},ma.left+=c+h):(ma.right+=c+h,b.box={left:fa.width-ma.right,width:c})),b.position=e,b.tickLength=g,b.box.padding=i,b.innermost=j}function z(a){"x"==a.direction?(a.box.left=ma.left-a.labelWidth/2,a.box.width=fa.width-ma.left-ma.right+a.labelWidth):(a.box.top=ma.top-a.labelHeight/2,a.box.height=fa.height-ma.bottom-ma.top+a.labelHeight)}function A(){var b,c=ea.grid.minBorderMargin;if(null==c)for(c=0,b=0;b<da.length;++b)c=Math.max(c,2*(da[b].points.radius+da[b].points.lineWidth/2));var d={left:c,right:c,top:c,bottom:c};a.each(n(),function(a,b){b.reserveSpace&&b.ticks&&b.ticks.length&&("x"===b.direction?(d.left=Math.max(d.left,b.labelWidth/2),d.right=Math.max(d.right,b.labelWidth/2)):(d.bottom=Math.max(d.bottom,b.labelHeight/2),d.top=Math.max(d.top,b.labelHeight/2)))}),ma.left=Math.ceil(Math.max(d.left,ma.left)),ma.right=Math.ceil(Math.max(d.right,ma.right)),ma.top=Math.ceil(Math.max(d.top,ma.top)),ma.bottom=Math.ceil(Math.max(d.bottom,ma.bottom))}function B(){var b,c=n(),d=ea.grid.show;for(var e in ma){var f=ea.grid.margin||0;ma[e]="number"==typeof f?f:f[e]||0}h(pa.processOffset,[ma]);for(var e in ma)"object"==typeof ea.grid.borderWidth?ma[e]+=d?ea.grid.borderWidth[e]:0:ma[e]+=d?ea.grid.borderWidth:0;if(a.each(c,function(a,b){var c=b.options;b.show=null==c.show?b.used:c.show,b.reserveSpace=null==c.reserveSpace?b.show:c.reserveSpace,C(b)}),d){var g=a.grep(c,function(a){return a.show||a.reserveSpace});for(a.each(g,function(a,b){D(b),E(b),F(b,b.ticks),x(b)}),b=g.length-1;b>=0;--b)y(g[b]);A(),a.each(g,function(a,b){z(b)})}na=fa.width-ma.left-ma.right,oa=fa.height-ma.bottom-ma.top,a.each(c,function(a,b){w(b)}),d&&K(),R()}function C(a){var b=a.options,c=+(null!=b.min?b.min:a.datamin),d=+(null!=b.max?b.max:a.datamax),e=d-c;if(0==e){var f=0==d?1:.01;null==b.min&&(c-=f),null!=b.max&&null==b.min||(d+=f)}else{var g=b.autoscaleMargin;null!=g&&(null==b.min&&(c-=e*g)<0&&null!=a.datamin&&a.datamin>=0&&(c=0),null==b.max&&(d+=e*g)>0&&null!=a.datamax&&a.datamax<=0&&(d=0))}a.min=c,a.max=d}function D(b){var c,e=b.options;c="number"==typeof e.ticks&&e.ticks>0?e.ticks:.3*Math.sqrt("x"==b.direction?fa.width:fa.height);var f=(b.max-b.min)/c,g=-Math.floor(Math.log(f)/Math.LN10),h=e.tickDecimals;null!=h&&g>h&&(g=h);var i,j=Math.pow(10,-g),k=f/j;if(k<1.5?i=1:k<3?(i=2,k>2.25&&(null==h||g+1<=h)&&(i=2.5,++g)):i=k<7.5?5:10,i*=j,null!=e.minTickSize&&i<e.minTickSize&&(i=e.minTickSize),b.delta=f,b.tickDecimals=Math.max(0,null!=h?h:g),b.tickSize=e.tickSize||i,"time"==e.mode&&!b.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(b.tickGenerator||(b.tickGenerator=function(a){var b,c=[],e=d(a.min,a.tickSize),f=0,g=Number.NaN;do{b=g,g=e+f*a.tickSize,c.push(g),++f}while(g<a.max&&g!=b);return c},b.tickFormatter=function(a,b){var c=b.tickDecimals?Math.pow(10,b.tickDecimals):1,d=""+Math.round(a*c)/c;if(null!=b.tickDecimals){var e=d.indexOf("."),f=-1==e?0:d.length-e-1;if(f<b.tickDecimals)return(f?d:d+".")+(""+c).substr(1,b.tickDecimals-f)}return d}),a.isFunction(e.tickFormatter)&&(b.tickFormatter=function(a,b){return""+e.tickFormatter(a,b)}),null!=e.alignTicksWithAxis){var l=("x"==b.direction?ka:la)[e.alignTicksWithAxis-1];if(l&&l.used&&l!=b){var m=b.tickGenerator(b);if(m.length>0&&(null==e.min&&(b.min=Math.min(b.min,m[0])),null==e.max&&m.length>1&&(b.max=Math.max(b.max,m[m.length-1]))),b.tickGenerator=function(a){var b,c,d=[];for(c=0;c<l.ticks.length;++c)b=(l.ticks[c].v-l.min)/(l.max-l.min),b=a.min+b*(a.max-a.min),d.push(b);return d},!b.mode&&null==e.tickDecimals){var n=Math.max(0,1-Math.floor(Math.log(b.delta)/Math.LN10)),o=b.tickGenerator(b);o.length>1&&/\..*0$/.test((o[1]-o[0]).toFixed(n))||(b.tickDecimals=n)}}}}function E(b){var c=b.options.ticks,d=[];null==c||"number"==typeof c&&c>0?d=b.tickGenerator(b):c&&(d=a.isFunction(c)?c(b):c);var e,f;for(b.ticks=[],e=0;e<d.length;++e){var g=null,h=d[e];"object"==typeof h?(f=+h[0],h.length>1&&(g=h[1])):f=+h,null==g&&(g=b.tickFormatter(f,b)),isNaN(f)||b.ticks.push({v:f,label:g})}}function F(a,b){a.options.autoscaleMargin&&b.length>0&&(null==a.options.min&&(a.min=Math.min(a.min,b[0].v)),null==a.options.max&&b.length>1&&(a.max=Math.max(a.max,b[b.length-1].v)))}function G(){fa.clear(),h(pa.drawBackground,[ia]);var a=ea.grid;a.show&&a.backgroundColor&&I(),a.show&&!a.aboveData&&J();for(var b=0;b<da.length;++b)h(pa.drawSeries,[ia,da[b]]),L(da[b]);h(pa.draw,[ia]),a.show&&a.aboveData&&J(),fa.render(),X()}function H(a,b){for(var c,d,e,f,g=n(),h=0;h<g.length;++h)if(c=g[h],c.direction==b&&(f=b+c.n+"axis",a[f]||1!=c.n||(f=b+"axis"),a[f])){d=a[f].from,e=a[f].to;break}if(a[f]||(c="x"==b?ka[0]:la[0],d=a[b+"1"],e=a[b+"2"]),null!=d&&null!=e&&d>e){var i=d;d=e,e=i}return{from:d,to:e,axis:c}}function I(){ia.save(),ia.translate(ma.left,ma.top),ia.fillStyle=ca(ea.grid.backgroundColor,oa,0,"rgba(255, 255, 255, 0)"),ia.fillRect(0,0,na,oa),ia.restore()}function J(){var b,c,d,e;ia.save(),ia.translate(ma.left,ma.top);var f=ea.grid.markings;if(f)for(a.isFunction(f)&&(c=qa.getAxes(),c.xmin=c.xaxis.min,c.xmax=c.xaxis.max,c.ymin=c.yaxis.min,c.ymax=c.yaxis.max,f=f(c)),b=0;b<f.length;++b){var g=f[b],h=H(g,"x"),i=H(g,"y");if(null==h.from&&(h.from=h.axis.min),null==h.to&&(h.to=h.axis.max),null==i.from&&(i.from=i.axis.min),null==i.to&&(i.to=i.axis.max),!(h.to<h.axis.min||h.from>h.axis.max||i.to<i.axis.min||i.from>i.axis.max)){h.from=Math.max(h.from,h.axis.min),h.to=Math.min(h.to,h.axis.max),i.from=Math.max(i.from,i.axis.min),i.to=Math.min(i.to,i.axis.max);var j=h.from===h.to,k=i.from===i.to;if(!j||!k)if(h.from=Math.floor(h.axis.p2c(h.from)),h.to=Math.floor(h.axis.p2c(h.to)),i.from=Math.floor(i.axis.p2c(i.from)),i.to=Math.floor(i.axis.p2c(i.to)),j||k){var l=g.lineWidth||ea.grid.markingsLineWidth,m=l%2?.5:0;ia.beginPath(),ia.strokeStyle=g.color||ea.grid.markingsColor,ia.lineWidth=l,j?(ia.moveTo(h.to+m,i.from),ia.lineTo(h.to+m,i.to)):(ia.moveTo(h.from,i.to+m),ia.lineTo(h.to,i.to+m)),ia.stroke()}else ia.fillStyle=g.color||ea.grid.markingsColor,ia.fillRect(h.from,i.to,h.to-h.from,i.from-i.to)}}c=n(),d=ea.grid.borderWidth;for(var o=0;o<c.length;++o){var p,q,r,s,t=c[o],u=t.box,v=t.tickLength;if(t.show&&0!=t.ticks.length){for(ia.lineWidth=1,"x"==t.direction?(p=0,q="full"==v?"top"==t.position?0:oa:u.top-ma.top+("top"==t.position?u.height:0)):(q=0,p="full"==v?"left"==t.position?0:na:u.left-ma.left+("left"==t.position?u.width:0)),t.innermost||(ia.strokeStyle=t.options.color,ia.beginPath(),r=s=0,"x"==t.direction?r=na+1:s=oa+1,1==ia.lineWidth&&("x"==t.direction?q=Math.floor(q)+.5:p=Math.floor(p)+.5),ia.moveTo(p,q),ia.lineTo(p+r,q+s),ia.stroke()),ia.strokeStyle=t.options.tickColor,ia.beginPath(),b=0;b<t.ticks.length;++b){var w=t.ticks[b].v;r=s=0,isNaN(w)||w<t.min||w>t.max||"full"==v&&("object"==typeof d&&d[t.position]>0||d>0)&&(w==t.min||w==t.max)||("x"==t.direction?(p=t.p2c(w),s="full"==v?-oa:v,"top"==t.position&&(s=-s)):(q=t.p2c(w),r="full"==v?-na:v,"left"==t.position&&(r=-r)),1==ia.lineWidth&&("x"==t.direction?p=Math.floor(p)+.5:q=Math.floor(q)+.5),ia.moveTo(p,q),ia.lineTo(p+r,q+s))}ia.stroke()}}d&&(e=ea.grid.borderColor,"object"==typeof d||"object"==typeof e?("object"!=typeof d&&(d={top:d,right:d,bottom:d,left:d}),"object"!=typeof e&&(e={top:e,right:e,bottom:e,left:e}),d.top>0&&(ia.strokeStyle=e.top,ia.lineWidth=d.top,ia.beginPath(),ia.moveTo(0-d.left,0-d.top/2),ia.lineTo(na,0-d.top/2),ia.stroke()),d.right>0&&(ia.strokeStyle=e.right,ia.lineWidth=d.right,ia.beginPath(),ia.moveTo(na+d.right/2,0-d.top),ia.lineTo(na+d.right/2,oa),ia.stroke()),d.bottom>0&&(ia.strokeStyle=e.bottom,ia.lineWidth=d.bottom,ia.beginPath(),ia.moveTo(na+d.right,oa+d.bottom/2),ia.lineTo(0,oa+d.bottom/2),ia.stroke()),d.left>0&&(ia.strokeStyle=e.left,ia.lineWidth=d.left,ia.beginPath(),ia.moveTo(0-d.left/2,oa+d.bottom),ia.lineTo(0-d.left/2,0),ia.stroke())):(ia.lineWidth=d,ia.strokeStyle=ea.grid.borderColor,ia.strokeRect(-d/2,-d/2,na+d,oa+d))),ia.restore()}function K(){a.each(n(),function(a,b){var c,d,e,f,g,h=b.box,i=b.direction+"Axis "+b.direction+b.n+"Axis",j="flot-"+b.direction+"-axis flot-"+b.direction+b.n+"-axis "+i,k=b.options.font||"flot-tick-label tickLabel";if(fa.removeText(j),b.show&&0!=b.ticks.length)for(var l=0;l<b.ticks.length;++l)c=b.ticks[l],!c.label||c.v<b.min||c.v>b.max||("x"==b.direction?(f="center",d=ma.left+b.p2c(c.v),"bottom"==b.position?e=h.top+h.padding:(e=h.top+h.height-h.padding,g="bottom")):(g="middle",e=ma.top+b.p2c(c.v),"left"==b.position?(d=h.left+h.width-h.padding,f="right"):d=h.left+h.padding),fa.addText(j,d,e,c.label,k,null,null,f,g))})}function L(a){a.lines.show&&M(a),a.bars.show&&P(a),a.points.show&&N(a)}function M(a){function b(a,b,c,d,e){var f=a.points,g=a.pointsize,h=null,i=null;ia.beginPath();for(var j=g;j<f.length;j+=g){var k=f[j-g],l=f[j-g+1],m=f[j],n=f[j+1];if(null!=k&&null!=m){if(l<=n&&l<e.min){if(n<e.min)continue;k=(e.min-l)/(n-l)*(m-k)+k,l=e.min}else if(n<=l&&n<e.min){if(l<e.min)continue;m=(e.min-l)/(n-l)*(m-k)+k,n=e.min}if(l>=n&&l>e.max){if(n>e.max)continue;k=(e.max-l)/(n-l)*(m-k)+k,l=e.max}else if(n>=l&&n>e.max){if(l>e.max)continue;m=(e.max-l)/(n-l)*(m-k)+k,n=e.max}if(k<=m&&k<d.min){if(m<d.min)continue;l=(d.min-k)/(m-k)*(n-l)+l,k=d.min}else if(m<=k&&m<d.min){if(k<d.min)continue;n=(d.min-k)/(m-k)*(n-l)+l,m=d.min}if(k>=m&&k>d.max){if(m>d.max)continue;l=(d.max-k)/(m-k)*(n-l)+l,k=d.max}else if(m>=k&&m>d.max){if(k>d.max)continue;n=(d.max-k)/(m-k)*(n-l)+l,m=d.max}k==h&&l==i||ia.moveTo(d.p2c(k)+b,e.p2c(l)+c),h=m,i=n,ia.lineTo(d.p2c(m)+b,e.p2c(n)+c)}}ia.stroke()}function c(a,b,c){for(var d=a.points,e=a.pointsize,f=Math.min(Math.max(0,c.min),c.max),g=0,h=!1,i=1,j=0,k=0;;){if(e>0&&g>d.length+e)break;g+=e;var l=d[g-e],m=d[g-e+i],n=d[g],o=d[g+i];if(h){if(e>0&&null!=l&&null==n){k=g,e=-e,i=2;continue}if(e<0&&g==j+e){ia.fill(),h=!1,e=-e,i=1,g=j=k+e;continue}}if(null!=l&&null!=n){if(l<=n&&l<b.min){if(n<b.min)continue;m=(b.min-l)/(n-l)*(o-m)+m,l=b.min}else if(n<=l&&n<b.min){if(l<b.min)continue;o=(b.min-l)/(n-l)*(o-m)+m,n=b.min}if(l>=n&&l>b.max){if(n>b.max)continue;m=(b.max-l)/(n-l)*(o-m)+m,l=b.max}else if(n>=l&&n>b.max){if(l>b.max)continue;o=(b.max-l)/(n-l)*(o-m)+m,n=b.max}if(h||(ia.beginPath(),ia.moveTo(b.p2c(l),c.p2c(f)),h=!0),m>=c.max&&o>=c.max)ia.lineTo(b.p2c(l),c.p2c(c.max)),ia.lineTo(b.p2c(n),c.p2c(c.max));else if(m<=c.min&&o<=c.min)ia.lineTo(b.p2c(l),c.p2c(c.min)),ia.lineTo(b.p2c(n),c.p2c(c.min));else{var p=l,q=n;m<=o&&m<c.min&&o>=c.min?(l=(c.min-m)/(o-m)*(n-l)+l,m=c.min):o<=m&&o<c.min&&m>=c.min&&(n=(c.min-m)/(o-m)*(n-l)+l,o=c.min),m>=o&&m>c.max&&o<=c.max?(l=(c.max-m)/(o-m)*(n-l)+l,m=c.max):o>=m&&o>c.max&&m<=c.max&&(n=(c.max-m)/(o-m)*(n-l)+l,o=c.max),l!=p&&ia.lineTo(b.p2c(p),c.p2c(m)),ia.lineTo(b.p2c(l),c.p2c(m)),ia.lineTo(b.p2c(n),c.p2c(o)),n!=q&&(ia.lineTo(b.p2c(n),c.p2c(o)),ia.lineTo(b.p2c(q),c.p2c(o)))}}}}ia.save(),ia.translate(ma.left,ma.top),ia.lineJoin="round";var d=a.lines.lineWidth,e=a.shadowSize;if(d>0&&e>0){ia.lineWidth=e,ia.strokeStyle="rgba(0,0,0,0.1)";var f=Math.PI/18;b(a.datapoints,Math.sin(f)*(d/2+e/2),Math.cos(f)*(d/2+e/2),a.xaxis,a.yaxis),ia.lineWidth=e/2,b(a.datapoints,Math.sin(f)*(d/2+e/4),Math.cos(f)*(d/2+e/4),a.xaxis,a.yaxis)}ia.lineWidth=d,ia.strokeStyle=a.color;var g=Q(a.lines,a.color,0,oa);g&&(ia.fillStyle=g,c(a.datapoints,a.xaxis,a.yaxis)),d>0&&b(a.datapoints,0,0,a.xaxis,a.yaxis),ia.restore()}function N(a){function b(a,b,c,d,e,f,g,h){for(var i=a.points,j=a.pointsize,k=0;k<i.length;k+=j){var l=i[k],m=i[k+1];null==l||l<f.min||l>f.max||m<g.min||m>g.max||(ia.beginPath(),l=f.p2c(l),m=g.p2c(m)+d,"circle"==h?ia.arc(l,m,b,0,e?Math.PI:2*Math.PI,!1):h(ia,l,m,b,e),ia.closePath(),c&&(ia.fillStyle=c,ia.fill()),ia.stroke())}}ia.save(),ia.translate(ma.left,ma.top);var c=a.points.lineWidth,d=a.shadowSize,e=a.points.radius,f=a.points.symbol;if(0==c&&(c=1e-4),c>0&&d>0){var g=d/2;ia.lineWidth=g,ia.strokeStyle="rgba(0,0,0,0.1)",b(a.datapoints,e,null,g+g/2,!0,a.xaxis,a.yaxis,f),ia.strokeStyle="rgba(0,0,0,0.2)",b(a.datapoints,e,null,g/2,!0,a.xaxis,a.yaxis,f)}ia.lineWidth=c,ia.strokeStyle=a.color,b(a.datapoints,e,Q(a.points,a.color),0,!1,a.xaxis,a.yaxis,f),ia.restore()}function O(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q,r,s,t;j?(s=q=r=!0,p=!1,l=c,m=a,o=b+d,n=b+e,m<l&&(t=m,m=l,l=t,p=!0,q=!1)):(p=q=r=!0,s=!1,l=a+d,m=a+e,n=c,(o=b)<n&&(t=o,o=n,n=t,s=!0,r=!1)),m<g.min||l>g.max||o<h.min||n>h.max||(l<g.min&&(l=g.min,p=!1),m>g.max&&(m=g.max,q=!1),n<h.min&&(n=h.min,s=!1),o>h.max&&(o=h.max,r=!1),l=g.p2c(l),n=h.p2c(n),m=g.p2c(m),o=h.p2c(o),f&&(i.fillStyle=f(n,o),i.fillRect(l,o,m-l,n-o)),k>0&&(p||q||r||s)&&(i.beginPath(),i.moveTo(l,n),p?i.lineTo(l,o):i.moveTo(l,o),r?i.lineTo(m,o):i.moveTo(m,o),q?i.lineTo(m,n):i.moveTo(m,n),s?i.lineTo(l,n):i.moveTo(l,n),i.stroke()))}function P(a){function b(b,c,d,e,f,g){for(var h=b.points,i=b.pointsize,j=0;j<h.length;j+=i)null!=h[j]&&O(h[j],h[j+1],h[j+2],c,d,e,f,g,ia,a.bars.horizontal,a.bars.lineWidth)}ia.save(),ia.translate(ma.left,ma.top),ia.lineWidth=a.bars.lineWidth,ia.strokeStyle=a.color;var c;switch(a.bars.align){case"left":c=0;break;case"right":c=-a.bars.barWidth;break;default:c=-a.bars.barWidth/2}var d=a.bars.fill?function(b,c){return Q(a.bars,a.color,b,c)}:null;b(a.datapoints,c,c+a.bars.barWidth,d,a.xaxis,a.yaxis),ia.restore()}function Q(b,c,d,e){var f=b.fill;if(!f)return null;if(b.fillColor)return ca(b.fillColor,d,e,c);var g=a.color.parse(c);return g.a="number"==typeof f?f:.4,g.normalize(),g.toString()}function R(){if(null!=ea.legend.container?a(ea.legend.container).html(""):c.find(".legend").remove(),ea.legend.show){for(var b,d,e=[],f=[],g=!1,h=ea.legend.labelFormatter,i=0;i<da.length;++i)b=da[i],b.label&&(d=h?h(b.label,b):b.label)&&f.push({label:d,color:b.color});if(ea.legend.sorted)if(a.isFunction(ea.legend.sorted))f.sort(ea.legend.sorted);else if("reverse"==ea.legend.sorted)f.reverse();else{var j="descending"!=ea.legend.sorted;f.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=j?1:-1})}for(var i=0;i<f.length;++i){var k=f[i];i%ea.legend.noColumns==0&&(g&&e.push("</tr>"),e.push("<tr>"),g=!0),e.push('<td class="legendColorBox"><div style="border:1px solid '+ea.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+k.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+k.label+"</td>")}if(g&&e.push("</tr>"),0!=e.length){var l='<table style="font-size:smaller;color:'+ea.grid.color+'">'+e.join("")+"</table>";if(null!=ea.legend.container)a(ea.legend.container).html(l);else{var m="",n=ea.legend.position,o=ea.legend.margin;null==o[0]&&(o=[o,o]),"n"==n.charAt(0)?m+="top:"+(o[1]+ma.top)+"px;":"s"==n.charAt(0)&&(m+="bottom:"+(o[1]+ma.bottom)+"px;"),"e"==n.charAt(1)?m+="right:"+(o[0]+ma.right)+"px;":"w"==n.charAt(1)&&(m+="left:"+(o[0]+ma.left)+"px;");var p=a('<div class="legend">'+l.replace('style="','style="position:absolute;'+m+";")+"</div>").appendTo(c);if(0!=ea.legend.backgroundOpacity){var q=ea.legend.backgroundColor;null==q&&(q=ea.grid.backgroundColor,q=q&&"string"==typeof q?a.color.parse(q):a.color.extract(p,"background-color"),q.a=1,q=q.toString());var r=p.children();a('<div style="position:absolute;width:'+r.width()+"px;height:"+r.height()+"px;"+m+"background-color:"+q+';"> </div>').prependTo(p).css("opacity",ea.legend.backgroundOpacity)}}}}}function S(a,b,c){var d,e,f,g=ea.grid.mouseActiveRadius,h=g*g+1,i=null;for(d=da.length-1;d>=0;--d)if(c(da[d])){var j=da[d],k=j.xaxis,l=j.yaxis,m=j.datapoints.points,n=k.c2p(a),o=l.c2p(b),p=g/k.scale,q=g/l.scale;if(f=j.datapoints.pointsize,k.options.inverseTransform&&(p=Number.MAX_VALUE),l.options.inverseTransform&&(q=Number.MAX_VALUE),j.lines.show||j.points.show)for(e=0;e<m.length;e+=f){var r=m[e],s=m[e+1];if(null!=r&&!(r-n>p||r-n<-p||s-o>q||s-o<-q)){var t=Math.abs(k.p2c(r)-a),u=Math.abs(l.p2c(s)-b),v=t*t+u*u;v<h&&(h=v,i=[d,e/f])}}if(j.bars.show&&!i){var w,x;switch(j.bars.align){case"left":w=0;break;case"right":w=-j.bars.barWidth;break;default:w=-j.bars.barWidth/2}for(x=w+j.bars.barWidth,e=0;e<m.length;e+=f){var r=m[e],s=m[e+1],y=m[e+2];null!=r&&((da[d].bars.horizontal?n<=Math.max(y,r)&&n>=Math.min(y,r)&&o>=s+w&&o<=s+x:n>=r+w&&n<=r+x&&o>=Math.min(y,s)&&o<=Math.max(y,s))&&(i=[d,e/f]))}}}return i?(d=i[0],e=i[1],f=da[d].datapoints.pointsize,{datapoint:da[d].datapoints.points.slice(e*f,(e+1)*f),dataIndex:e,series:da[d],seriesIndex:d}):null}function T(a){ea.grid.hoverable&&W("plothover",a,function(a){return 0!=a.hoverable})}function U(a){ea.grid.hoverable&&W("plothover",a,function(a){return!1})}function V(a){W("plotclick",a,function(a){return 0!=a.clickable})}function W(a,b,d){var e=ha.offset(),f=b.pageX-e.left-ma.left,g=b.pageY-e.top-ma.top,h=o({left:f,top:g});h.pageX=b.pageX,h.pageY=b.pageY;var i=S(f,g,d);if(i&&(i.pageX=parseInt(i.series.xaxis.p2c(i.datapoint[0])+e.left+ma.left,10),i.pageY=parseInt(i.series.yaxis.p2c(i.datapoint[1])+e.top+ma.top,10)),ea.grid.autoHighlight){for(var j=0;j<ra.length;++j){var k=ra[j];k.auto!=a||i&&k.series==i.series&&k.point[0]==i.datapoint[0]&&k.point[1]==i.datapoint[1]||$(k.series,k.point)}i&&Z(i.series,i.datapoint,a)}c.trigger(a,[h,i])}function X(){var a=ea.interaction.redrawOverlayInterval;if(-1==a)return void Y();sa||(sa=setTimeout(Y,a))}function Y(){sa=null,ja.save(),ga.clear(),ja.translate(ma.left,ma.top);var a,b;for(a=0;a<ra.length;++a)b=ra[a],b.series.bars.show?ba(b.series,b.point):aa(b.series,b.point);ja.restore(),h(pa.drawOverlay,[ja])}function Z(a,b,c){if("number"==typeof a&&(a=da[a]),"number"==typeof b){var d=a.datapoints.pointsize;b=a.datapoints.points.slice(d*b,d*(b+1))}var e=_(a,b);-1==e?(ra.push({series:a,point:b,auto:c}),X()):c||(ra[e].auto=!1)}function $(a,b){if(null==a&&null==b)return ra=[],void X();if("number"==typeof a&&(a=da[a]),"number"==typeof b){var c=a.datapoints.pointsize;b=a.datapoints.points.slice(c*b,c*(b+1))}var d=_(a,b);-1!=d&&(ra.splice(d,1),X())}function _(a,b){for(var c=0;c<ra.length;++c){var d=ra[c];if(d.series==a&&d.point[0]==b[0]&&d.point[1]==b[1])return c}return-1}function aa(b,c){var d=c[0],e=c[1],f=b.xaxis,g=b.yaxis,h="string"==typeof b.highlightColor?b.highlightColor:a.color.parse(b.color).scale("a",.5).toString();if(!(d<f.min||d>f.max||e<g.min||e>g.max)){var i=b.points.radius+b.points.lineWidth/2;ja.lineWidth=i,ja.strokeStyle=h;var j=1.5*i;d=f.p2c(d),e=g.p2c(e),ja.beginPath(),"circle"==b.points.symbol?ja.arc(d,e,j,0,2*Math.PI,!1):b.points.symbol(ja,d,e,j,!1),ja.closePath(),ja.stroke()}}function ba(b,c){var d,e="string"==typeof b.highlightColor?b.highlightColor:a.color.parse(b.color).scale("a",.5).toString(),f=e;switch(b.bars.align){case"left":d=0;break;case"right":d=-b.bars.barWidth;break;default:d=-b.bars.barWidth/2}ja.lineWidth=b.bars.lineWidth,ja.strokeStyle=e,O(c[0],c[1],c[2]||0,d,d+b.bars.barWidth,function(){return f},b.xaxis,b.yaxis,ja,b.bars.horizontal,b.bars.lineWidth)}function ca(b,c,d,e){if("string"==typeof b)return b;for(var f=ia.createLinearGradient(0,d,0,c),g=0,h=b.colors.length;g<h;++g){var i=b.colors[g];if("string"!=typeof i){var j=a.color.parse(e);null!=i.brightness&&(j=j.scale("rgb",i.brightness)),null!=i.opacity&&(j.a*=i.opacity),i=j.toString()}f.addColorStop(g/(h-1),i)}return f}var da=[],ea={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},fa=null,ga=null,ha=null,ia=null,ja=null,ka=[],la=[],ma={left:0,right:0,top:0,bottom:0},na=0,oa=0,pa={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},qa=this;qa.setData=k,qa.setupGrid=B,qa.draw=G,qa.getPlaceholder=function(){return c},qa.getCanvas=function(){return fa.element},qa.getPlotOffset=function(){return ma},qa.width=function(){return na},qa.height=function(){return oa},qa.offset=function(){var a=ha.offset();return a.left+=ma.left,a.top+=ma.top,a},qa.getData=function(){return da},qa.getAxes=function(){var b={};return a.each(ka.concat(la),function(a,c){c&&(b[c.direction+(1!=c.n?c.n:"")+"axis"]=c)}),b},qa.getXAxes=function(){return ka},qa.getYAxes=function(){return la},qa.c2p=o,qa.p2c=p,qa.getOptions=function(){return ea},qa.highlight=Z,qa.unhighlight=$,qa.triggerRedrawOverlay=X,qa.pointOffset=function(a){return{left:parseInt(ka[m(a,"x")-1].p2c(+a.x)+ma.left,10),top:parseInt(la[m(a,"y")-1].p2c(+a.y)+ma.top,10)}},qa.shutdown=v,qa.destroy=function(){v(),c.removeData("plot").empty(),da=[],ea=null,fa=null,ga=null,ha=null,ia=null,ja=null,ka=[],la=[],pa=null,ra=[],qa=null},qa.resize=function(){var a=c.width(),b=c.height();fa.resize(a,b),ga.resize(a,b)},qa.hooks=pa,i(qa),j(f),t(),k(e),B(),G(),u();var ra=[],sa=null}function d(a,b){return b*Math.floor(a/b)}var e=Object.prototype.hasOwnProperty;a.fn.detach||(a.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),b.prototype.resize=function(a,b){if(a<=0||b<=0)throw new Error("Invalid dimensions for plot, width = "+a+", height = "+b);var c=this.element,d=this.context,e=this.pixelRatio;this.width!=a&&(c.width=a*e,c.style.width=a+"px",this.width=a),this.height!=b&&(c.height=b*e,c.style.height=b+"px",this.height=b),d.restore(),d.save(),d.scale(e,e)},b.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},b.prototype.render=function(){var a=this._textCache;for(var b in a)if(e.call(a,b)){var c=this.getTextLayer(b),d=a[b];c.hide();for(var f in d)if(e.call(d,f)){var g=d[f];for(var h in g)if(e.call(g,h)){for(var i,j=g[h].positions,k=0;i=j[k];k++)i.active?i.rendered||(c.append(i.element),i.rendered=!0):(j.splice(k--,1),i.rendered&&i.element.detach());0==j.length&&delete g[h]}}c.show()}},b.prototype.getTextLayer=function(b){var c=this.text[b];return null==c&&(null==this.textContainer&&(this.textContainer=a("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),c=this.text[b]=a("<div></div>").addClass(b).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),c},b.prototype.getTextInfo=function(b,c,d,e,f){var g,h,i,j;if(c=""+c,g="object"==typeof d?d.style+" "+d.variant+" "+d.weight+" "+d.size+"px/"+d.lineHeight+"px "+d.family:d,h=this._textCache[b],null==h&&(h=this._textCache[b]={}),i=h[g],null==i&&(i=h[g]={}),null==(j=i[c])){var k=a("<div></div>").html(c).css({position:"absolute","max-width":f,top:-9999}).appendTo(this.getTextLayer(b));"object"==typeof d?k.css({font:g,color:d.color}):"string"==typeof d&&k.addClass(d),j=i[c]={width:k.outerWidth(!0),height:k.outerHeight(!0),element:k,positions:[]},k.detach()}return j},b.prototype.addText=function(a,b,c,d,e,f,g,h,i){var j=this.getTextInfo(a,d,e,f,g),k=j.positions;"center"==h?b-=j.width/2:"right"==h&&(b-=j.width),"middle"==i?c-=j.height/2:"bottom"==i&&(c-=j.height);for(var l,m=0;l=k[m];m++)if(l.x==b&&l.y==c)return void(l.active=!0);l={active:!0,rendered:!1,element:k.length?j.element.clone():j.element,x:b,y:c},k.push(l),l.element.css({top:Math.round(c),left:Math.round(b),"text-align":h})},b.prototype.removeText=function(a,b,c,d,f,g){if(null==d){var h=this._textCache[a];if(null!=h)for(var i in h)if(e.call(h,i)){var j=h[i];for(var k in j)if(e.call(j,k))for(var l,m=j[k].positions,n=0;l=m[n];n++)l.active=!1}}else for(var l,m=this.getTextInfo(a,d,f,g).positions,n=0;l=m[n];n++)l.x==b&&l.y==c&&(l.active=!1)},a.plot=function(b,d,e){return new c(a(b),d,e,a.plot.plugins)},a.plot.version="0.8.3",a.plot.plugins=[],a.fn.plot=function(b,c){return this.each(function(){a.plot(this,b,c)})}}(jQuery)}(),e()}),a.registerDynamic("dd",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){!function(a){"use strict";function b(b){function f(a){return c(a,{name:a.name||"unnamed "+x.length,position:a.position||{relativeX:.5,relativeY:.5},x:0,y:0,show:!0,selected:!1,highlighted:!1,mode:"xy",showIntersections:!1,showIntersectionLabel:a.showIntersections||!1,showLabel:!1,showAnchorLabel:a.drawAnchor||!1,showValuesRelativeToSeries:void 0,color:"gray",fontSize:"10px",fontFamily:"sans-serif",fontStyle:"",fontWeight:"",anchorLabelColor:"white",lineWidth:1,movable:!0,fullHeight:!1,drawAnchor:!1,mouseButton:"left",mouseCursors:{},dashes:1,intersectionColor:a.color||"darkgray",intersectionLabelPosition:"bottom-right"})}function g(a){p(a)}function h(a){o(a)}function i(a){var c=b.offset(),d=Math.max(0,Math.min(a.originalEvent.touches[0].pageX-c.left,b.width())),e=Math.max(0,Math.min(a.originalEvent.touches[0].pageY-c.top,b.height())),f=A(x);if(f)f.selected=!1,b.getPlaceholder().children().css("cursor",z.default),f.x=d,f.y=e,f.position.relativeX=f.x/b.width(),f.position.relativeY=f.y/b.height(),b.triggerRedrawOverlay();else{var g,h,i=1/0;B(x).forEach(function(c){c.movable&&(w(a,b,c)&&c.mouseDistance<i&&("y"==c.mode||void 0===c.snapToPlot)&&(g=c,h="y",i=c.mouseDistance),v(a,b,c)&&c.mouseDistance<i&&(g=c,h="x",i=c.mouseDistance),u(a,b,c)&&(g=c,h="xy"))}),g&&(g.selected=!0,g.dragmode=h,b.getPlaceholder().children().css("cursor",z.panCursor),b.triggerRedrawOverlay(),b.getPlaceholder().trigger("cursorSelected"),a.stopPropagation())}}function k(a){var c=b.offset(),d=Math.max(0,Math.min(a.pageX-c.left,b.width())),e=Math.max(0,Math.min(a.pageY-c.top,b.height())),f=A(x);if(f)f.selected=!1,b.getPlaceholder().children().css("cursor",z.default),f.x=d,f.y=e,f.position.relativeX=f.x/b.width(),f.position.relativeY=f.y/b.height(),b.triggerRedrawOverlay();else{var g,h,i=1/0;if(B(x).forEach(function(c){c.movable&&(w(a,b,c)&&c.mouseDistance<i&&("y"==c.mode||void 0===c.snapToPlot)&&(g=c,h="y",i=c.mouseDistance),v(a,b,c)&&c.mouseDistance<i&&(g=c,h="x",i=c.mouseDistance),u(a,b,c)&&(g=c,h="xy"))}),g){if(!C(g,a.button))return;g.selected=!0,g.dragmode=h,b.getPlaceholder().children().css("cursor",z.panCursor),b.triggerRedrawOverlay(),a.stopPropagation(),b.getPlaceholder().trigger("cursorSelected")}}}function o(a){var c=b.offset(),d=Math.max(0,Math.min(a.originalEvent.changedTouches[0].pageX-c.left,b.width())),e=Math.max(0,Math.min(a.originalEvent.changedTouches[0].pageY-c.top,b.height())),f=A(x);f&&(f.selected=!1,-1!==f.dragmode.indexOf("x")&&(f.x=d,f.position.relativeX=f.x/b.width()),-1!==f.dragmode.indexOf("y")&&(f.y=e,f.position.relativeY=f.y/b.height()),b.getPlaceholder().children().css("cursor",z.default),b.triggerRedrawOverlay())}function p(a){var c=b.offset(),d=Math.max(0,Math.min(a.pageX-c.left,b.width())),e=Math.max(0,Math.min(a.pageY-c.top,b.height())),f=A(x);if(f){if(!C(f,a.button))return;f.selected=!1,-1!==f.dragmode.indexOf("x")&&(f.x=d,f.position.relativeX=f.x/b.width()),-1!==f.dragmode.indexOf("y")&&(f.y=e,f.position.relativeY=f.y/b.height()),b.getPlaceholder().children().css("cursor",z.default),b.triggerRedrawOverlay()}}function r(a){var c=b.offset(),d=Math.max(0,Math.min(a.originalEvent.touches[0].pageX-c.left,b.width())),e=Math.max(0,Math.min(a.originalEvent.touches[0].pageY-c.top,b.height())),f=A(x);if(f)-1!==f.dragmode.indexOf("x")&&(f.x=d,f.position.relativeX=f.x/b.width()),-1!==f.dragmode.indexOf("y")&&(f.y=e,f.position.relativeY=f.y/b.height()),b.triggerRedrawOverlay(),a.stopPropagation(),a.preventDefault();else{var g=1/0;B(x).forEach(function(c){c.movable&&(u(a,b,c)?(c.highlighted||(c.highlighted=!0,b.triggerRedrawOverlay()),b.getPlaceholder().children().css("cursor",z.mouseOverCursorManipulator)):v(a,b,c)&&c.mouseDistance<g?(c.highlighted||(c.highlighted=!0,b.triggerRedrawOverlay()),g=c.mouseDistance,b.getPlaceholder().children().css("cursor",z.mouseOverCursorVerticalLine)):w(a,b,c)&&c.mouseDistance<g&&("y"==c.mode||void 0===c.snapToPlot)?(c.highlighted||(c.highlighted=!0,b.triggerRedrawOverlay()),g=c.mouseDistance,b.getPlaceholder().children().css("cursor",z.mouseOverCursorHorizontalLine)):c.highlighted&&(c.highlighted=!1,b.getPlaceholder().children().css("cursor",z.default),b.triggerRedrawOverlay()))})}}function s(a){var c=b.offset(),d=Math.max(0,Math.min(a.pageX-c.left,b.width())),e=Math.max(0,Math.min(a.pageY-c.top,b.height())),f=A(x);if(f)-1!==f.dragmode.indexOf("x")&&(f.x=d,f.position.relativeX=f.x/b.width()),-1!==f.dragmode.indexOf("y")&&(f.y=e,f.position.relativeY=f.y/b.height()),b.triggerRedrawOverlay(),a.stopPropagation();else{var g=1/0;B(x).forEach(function(c){c.movable&&(u(a,b,c)?(c.highlighted||(c.highlighted=!0,b.triggerRedrawOverlay()),b.getPlaceholder().children().css("cursor",z.mouseOverCursorManipulator)):v(a,b,c)&&c.mouseDistance<g?(c.highlighted||(c.highlighted=!0,b.triggerRedrawOverlay()),g=c.mouseDistance,b.getPlaceholder().children().css("cursor",z.mouseOverCursorVerticalLine)):w(a,b,c)&&c.mouseDistance<g&&("y"==c.mode||void 0===c.snapToPlot)?(c.highlighted||(c.highlighted=!0,b.triggerRedrawOverlay()),g=c.mouseDistance,b.getPlaceholder().children().css("cursor",z.mouseOverCursorHorizontalLine)):c.highlighted&&(c.highlighted=!1,b.getPlaceholder().children().css("cursor",z.default),b.triggerRedrawOverlay()))})}}function t(a,b){var c,d,e=a.c2p({left:b.x,top:b.y}),f={cursor:b.name,x:e.x,y:e.y,points:[]},g=a.getData();for(c=0;c<g.length;++c){var h=g[c],i="x"+h.xaxis.n,j="y"+h.yaxis.n;if("y"!=b.mode)if(e[i]<h.xaxis.min||e[i]>h.xaxis.max||e[j]<h.yaxis.min||e[j]>h.yaxis.max)f.points.push(null);else{for(d=0;d<h.data.length&&!(h.data[d]&&h.data[d][0]>e[i]);++d);var k,l=h.data[d-1],m=h.data[d];if(l&&l[0]===e[i])f.points.push({x:l[0],y:l[1],dataSeries:h});else if(void 0!==l&&void 0!==m){var n=function(a){return a},o=h.yaxis.options.transform||n,p=h.yaxis.options.inverseTransform||n,q=h.xaxis.options.transform||n,r=(o(m[1])-o(l[1]))/(q(m[0])-q(l[0])),s=o(l[1]),t=q(e[i])-q(l[0]);k=p(s+r*t),f.points.push({x:e[i],y:k,leftPoint:l,rightPoint:m,dataSeries:h})}else f.points.push(null)}else f.points.push({x:e[i],y:e[j],dataSeries:h})}return f}var x=[],y=[],z={default:"default",mouseOverCursorVerticalLine:"col-resize",mouseOverCursorHorizontalLine:"row-resize",mouseOverCursorManipulator:"pointer",panCursor:"move"};b.mouseCursors=z,b.hooks.processOptions.push(function(a){a.getOptions().cursors.forEach(function(b){a.addCursor(b)})}),b.getCursors=function(){return x},b.addCursor=function(c){var e=f(c);return d(b,e,c.position),x.push(e),a.extend(b.mouseCursors,c.mouseCursors),b.triggerRedrawOverlay(),e},b.removeCursor=function(a){var c=x.indexOf(a);-1!==c&&x.splice(c,1),b.triggerRedrawOverlay()},b.setCursor=function(a,e){var f=x.indexOf(a);-1!==f&&(c(e,x[f]),d(b,x[f],x[f].position),b.triggerRedrawOverlay())},b.setMultipleCursors=function(a,e){if(a.length===e.length){for(var f=0;f<a.length;f++){var g=x.indexOf(a[f]);-1!==g&&(c(e[f],x[g]),d(b,x[g],x[g].position))}b.triggerRedrawOverlay()}},b.getIntersections=function(a){var b=x.indexOf(a);return-1!==b?x[b].intersections:[]};var A=function(a){var b;return a.forEach(function(a){a.selected&&(b||(b=a))}),b},B=function(a){return a.filter(function(a){return a.show})},C=function(a,b){switch(a.mouseButton){case"all":return!0;case"left":return 0===b;case"middle":return 1===b;case"right":return 2===b;default:return!0}};b.hooks.bindEvents.push(function(a,b){b.mousedown(k),b.mouseup(p),b.mousemove(s),a.getPlaceholder().bind("mousemove",s),a.getPlaceholder().bind("mousedown",k),a.getPlaceholder().bind("mouseup",p),a.getPlaceholder().bind("mouseleave",g),b.bind("touchstart",i),b.bind("touchmove",r),b.bind("touchend",o),a.getPlaceholder().bind("touchmove",r),a.getPlaceholder().bind("touchstart",i),a.getPlaceholder().bind("touchend",o),a.getPlaceholder().bind("touchleave",h)}),b.hooks.drawOverlay.push(function(a,b){y=[],x.forEach(function(c){var f;if(d(a,c,c.position),f=t(a,c),e(a,c,f),c.intersections=f,f.target=c,y.push(f),c.show){var g=a.getPlotOffset();b.save(),c.fullHeight?b.translate(g.left,0):b.translate(g.left,g.top),n(a,b,c),j(a,b,c),l(a,b,c),m(a,b,c),"none"!==c.symbol&&q(a,b,c),b.restore()}}),a.getPlaceholder().trigger("cursorupdates",[y])}),b.hooks.shutdown.push(function(a,b){b.unbind("mousedown",k),b.unbind("mouseup",p),b.unbind("mousemove",s),b.unbind("cursorupdates"),a.getPlaceholder().unbind("mousemove",s),a.getPlaceholder().unbind("mousedown",k),a.getPlaceholder().unbind("mouseup",p),a.getPlaceholder().unbind("mouseleave",g),b.unbind("touchstart",i),b.unbind("touchmove",r),b.unbind("touchend",o),a.getPlaceholder().unbind("touchleave",h),a.getPlaceholder().unbind("touchmove",r),a.getPlaceholder().unbind("touchstart",i),a.getPlaceholder().unbind("touchend",o)})}function c(a,b){return Object.keys(a).forEach(function(c){b[c]=a[c]}),b}function d(a,b,c){var d;if(c){var e=a.getData()[b.snapToPlot||0];d=e?{top:e.yaxis.p2c(c.y),left:e.xaxis.p2c(c.x)}:a.p2c(c);var f=c.relativeX*a.width(),g=c.relativeY*a.height();void 0!==c.relativeX?(b.x=Math.max(0,Math.min(f,a.width())),void 0===c.relativeY?b.y=Math.max(0,Math.min(d.top,a.height())):b.y=Math.max(0,Math.min(g,a.height()))):void 0!==c.relativeY?(b.x=Math.max(0,Math.min(d.left,a.width())),b.y=Math.max(0,Math.min(g),a.height())):(b.x=Math.max(0,Math.min(d.left,a.width())),b.y=Math.max(0,Math.min(d.top,a.height())))}}function e(a,b,c){if("y"!=b.mode&&void 0!==b.snapToPlot){var e=c.points[b.snapToPlot];e&&(d(a,b,{x:e.x,y:e.y}),c.y=e.y)}}function f(a,b,c,d){var e=a.width(),f=a.height(),g="left",h=Number(b.fontSize.substring(0,b.fontSize.length-2)),i=b.y,j=b.x;return j>e/2?(j-=y.labelPadding,g="right"):j+=y.labelPadding,i>f/2?i-=y.labelPadding*(d-c)+h*(d-1-c):i+=y.labelPadding*(c+1)+h*(c+1),{x:j,y:i,textAlign:g}}function g(a){return("number"==typeof a.showValuesRelativeToSeries?1:0)+(a.showLabel?1:0)}function h(a){return 0}function i(a){return a.showLabel?1:0}function j(a,b,c){if(c.showLabel){b.beginPath();var d=(Number(c.fontSize.substring(0,c.fontSize.length-2)),f(a,c,h(c),g(c)));b.fillStyle=c.color,b.textAlign=d.textAlign,b.font=c.fontStyle+" "+c.fontWeight+" "+c.fontSize+" "+c.fontFamily,b.fillText(c.name,d.x,d.y),b.textAlign="left",b.stroke()}}function k(a,b,c,d,e,f,g,h,i,j,k){var l=Number(j.substring(0,j.length-2)),m=c,n=d,o=a.measureText(b).width;switch(e){case"left":m=c-o-y.iRectSize,n=d;break;case"bottom-left":m=c-o-y.iRectSize,n=d+l;break;case"top-left":m=c-o-y.iRectSize,n=d-y.iRectSize;break;case"top-right":m=c+y.iRectSize,n=d-y.iRectSize,m+o>f&&(m=c-o-y.iRectSize);break;case"right":m=c+y.iRectSize,n=d,m+o>f&&(m=c-o-y.iRectSize);break;case"bottom-right":default:m=c+y.iRectSize,n=d+l,m+o>f&&(m=c-o-y.iRectSize)}m<0||m>f||n<0||n>g||(a.textBaseline="middle",a.font=h+" "+i+" "+j+" "+k,a.fillText(b,m,n))}function l(b,c,d){if(d.showIntersections&&r(d)){if(void 0===d.intersections)return;c.beginPath(),c.strokeStyle=a.color.parse(d.intersectionColor).scale("a",.5).toString(),c.fillStyle=d.intersectionColor,c.lineWidth=3;var e=6;d.intersections.points.forEach(function(a,f){if(a&&("object"!=typeof d.showIntersections||-1!==d.showIntersections.indexOf(f))){var g={left:a.dataSeries.xaxis.p2c(a.x),top:a.dataSeries.yaxis.p2c(a.y)},h=b.width(),i=b.height();if(!(g.left<0||g.left>h||g.top<0||g.top>i)&&(c.moveTo(g.left-e,g.top),c.lineTo(g.left,g.top-e),c.lineTo(g.left+e,g.top),c.lineTo(g.left,g.top+e),c.closePath(),d.showIntersectionLabel)){var j;j="function"==typeof d.formatIntersectionData?d.formatIntersectionData(a):a.y.toFixed(2),k(c,j,g.left,g.top,d.intersectionLabelPosition,h,i,d.fontStyle,d.fontWeight,d.fontSize,d.fontFamily)}}}),c.stroke()}}function m(a,b,c){if("number"==typeof c.showValuesRelativeToSeries){b.beginPath();var d=a.getData(),e=d[c.showValuesRelativeToSeries],h=e.xaxis,j=e.yaxis,k=h.c2p(c.x).toFixed(2)+", "+j.c2p(c.y).toFixed(2),l=f(a,c,i(c),g(c));b.fillStyle=c.color,b.textAlign=l.textAlign,b.font=c.fontStyle+" "+c.fontWeight+" "+c.fontSize+" "+c.fontFamily,b.fillText(k,l.x,l.y),b.textAlign="left",b.stroke()}}function n(a,b,c){var d=a.height();if(0!==c.lineWidth){if(c.fullHeight){d=a.getCanvas().height}var e=c.lineWidth%2?.5:0;if(b.strokeStyle=c.color,b.lineWidth=c.lineWidth,b.lineJoin="round",b.beginPath(),-1!==c.mode.indexOf("x")){var f=Math.floor(c.x)+e;if(c.dashes<=0)b.moveTo(f,0),b.lineTo(f,d);else for(var g=2*c.dashes-1,h=d/g,i=0;i<g;i+=2)b.moveTo(f,h*i),b.lineTo(f,h*(i+1))}if(-1!==c.mode.indexOf("y")){var j=!0;if("xy"===c.mode&&(c.showIntersections?Array.isArray(c.showIntersections)&&!c.showIntersections.some(function(a){return c.intersections.points[a]})?j=!1:c.intersections.points.some(function(a){return a})||(j=!1):j=!1),j){var k=Math.floor(c.y)+e;if(c.dashes<=0)b.moveTo(0,k),b.lineTo(a.width(),k);else for(var g=2*c.dashes-1,h=a.width()/g,i=0;i<g;i+=2)b.moveTo(h*i,k),b.lineTo(h*(i+1),k)}}b.stroke(),c.drawAnchor&&p(a,b,c)}}function o(a,b,c,d){a.fillStyle=b.anchorLabelColor,a.font=b.fontStyle+" "+b.fontWeight+" "+b.fontSize+" "+b.fontFamily,a.fillText(b.name,c,d)}function p(a,b,c){a.height();if(0!==c.lineWidth){if(c.fullHeight){a.getCanvas().height}if(b.fillStyle=c.color,b.strokeStyle="white",b.lineWidth=2,b.beginPath(),-1!==c.mode.indexOf("x")){var d=Math.floor(c.x);b.moveTo(d,0),b.lineTo(d+19,-11),b.lineTo(d+19,-22),b.arc(d+10,-22,9,0,1.5*Math.PI,!0),b.lineTo(d-10,-31),b.arc(d-10,-22,9,1.5*Math.PI,Math.PI,!0),b.lineTo(d-19,-11),b.closePath(),b.stroke(),b.fill(),c.showAnchorLabel&&o(b,c,d-10,-11)}if(-1!==c.mode.indexOf("y")&&"xy"!==c.mode){var e=Math.floor(c.y);b.moveTo(0,e),b.lineTo(-11,e-19),b.lineTo(-22,e-19),b.arc(-22,e-10,9,1.5*Math.PI,Math.PI,!0),b.lineTo(-31,e+10),b.arc(-22,e+10,9,Math.PI,Math.PI/2,!0),b.lineTo(-11,e+19),b.closePath(),b.stroke(),b.fill(),c.showAnchorLabel&&o(b,c,-27,e+5)}}}function q(a,b,c){var d=c.lineWidth%2?.5:0;b.beginPath(),c.highlighted?b.strokeStyle="orange":b.strokeStyle=c.color,c.symbol&&a.drawSymbol&&a.drawSymbol[c.symbol]?(b.fillStyle="white",b.fillRect(Math.floor(c.x)+d-(y.symbolSize/2+1),Math.floor(c.y)+d-(y.symbolSize/2+1),y.symbolSize+2,y.symbolSize+2),a.drawSymbol[c.symbol](b,Math.floor(c.x)+d,Math.floor(c.y)+d,y.symbolSize/2,0)):b.fillRect(Math.floor(c.x)+d-y.symbolSize/2,Math.floor(c.y)+d-y.symbolSize/2,y.symbolSize,y.symbolSize),b.stroke()}function r(a){return-1!==a.mode.indexOf("x")}function s(a){return-1!==a.mode.indexOf("y")}function t(a){var b,c;return window.TouchEvent&&a.originalEvent instanceof TouchEvent?a.originalEvent.touches.length>0?(b=a.originalEvent.touches[0].pageX,c=a.originalEvent.touches[0].pageY):(b=a.originalEvent.changedTouches[0].pageX,c=a.originalEvent.changedTouches[0].pageY):(b=a.pageX,c=a.pageY),[b,c]}function u(a,b,c){var d=b.offset(),e=t(a)[0],f=t(a)[1],g=e-d.left,h=f-d.top,i=y.symbolSize+y.mouseGrabMargin;return g>c.x-i&&g<c.x+i&&h>c.y-i&&h<c.y+i&&"none"!==c.symbol}function v(a,b,c){var d=b.offset(),e=t(a)[0],f=t(a)[1],g=e-d.left,h=f-d.top,i=c.drawAnchor?-1*y.anchorMargin:0;return c.mouseDistance=Math.abs(g-c.x),r(c)&&g>c.x-y.mouseGrabMargin&&g<c.x+y.mouseGrabMargin&&h>i&&h<b.height()}function w(a,b,c){var d=b.offset(),e=t(a)[0],f=t(a)[1],g=e-d.left,h=f-d.top,i=c.drawAnchor?-1*y.anchorMargin:0;return c.mouseDistance=Math.abs(h-c.y),s(c)&&h>c.y-y.mouseGrabMargin&&h<c.y+y.mouseGrabMargin&&g>i&&g<b.width()}var x={cursors:[]},y={iRectSize:8,symbolSize:8,mouseGrabMargin:20,anchorMargin:40,textHeight:10,labelPadding:15};Object.freeze({ONLY:"only",TOP:"top",BOTTOM:"bottom"});a.plot.plugins.push({init:b,options:x,name:"cursors",version:"0.1"})}(jQuery)}(),e()}),a.registerDynamic("de",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){!function(a){function b(a,b,c){var d={square:function(a,b,c,d,e){var f=d*Math.sqrt(Math.PI)/2;a.rect(b-f,c-f,f+f,f+f)},diamond:function(a,b,c,d,e){var f=d*Math.sqrt(Math.PI/2);a.moveTo(b-f,c),a.lineTo(b,c-f),a.lineTo(b+f,c),a.lineTo(b,c+f),a.lineTo(b-f,c)},triangle:function(a,b,c,d,e){var f=d*Math.sqrt(2*Math.PI/Math.sin(Math.PI/3)),g=f*Math.sin(Math.PI/3);a.moveTo(b-f/2,c+g/2),a.lineTo(b+f/2,c+g/2),e||(a.lineTo(b,c-g/2),a.lineTo(b-f/2,c+g/2))},cross:function(a,b,c,d,e){var f=d*Math.sqrt(Math.PI)/2;a.moveTo(b-f,c-f),a.lineTo(b+f,c+f),a.moveTo(b-f,c+f),a.lineTo(b+f,c-f)}},e=b.points.symbol;d[e]&&(b.points.symbol=d[e])}function c(a){a.hooks.processDatapoints.push(b)}a.plot.plugins.push({init:c,name:"symbols",version:"1.0"})}(jQuery)}(),e()}),a.registerDynamic("df",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){!function(a){function b(b,f){var h=f.Canvas;null==c&&(d=h.prototype.getTextInfo,e=h.prototype.addText,c=h.prototype.render),h.prototype.render=function(){if(!b.getOptions().canvas)return c.call(this);var a=this.context,d=this._textCache;a.save(),a.textBaseline="middle";for(var e in d)if(g.call(d,e)){var f=d[e];for(var h in f)if(g.call(f,h)){var i=f[h],j=!0;for(var k in i)if(g.call(i,k)){var l=i[k],m=l.positions,n=l.lines;j&&(a.fillStyle=l.font.color,a.font=l.font.definition,j=!1);for(var o,p=0;o=m[p];p++)if(o.active)for(var q,r=0;q=o.lines[r];r++)a.fillText(n[r].text,q[0],q[1]);else m.splice(p--,1);0==m.length&&delete i[k]}}}a.restore()},h.prototype.getTextInfo=function(c,e,f,g,h){if(!b.getOptions().canvas)return d.call(this,c,e,f,g,h);var i,j,k,l;if(e=""+e,i="object"==typeof f?f.style+" "+f.variant+" "+f.weight+" "+f.size+"px "+f.family:f,j=this._textCache[c],null==j&&(j=this._textCache[c]={}),k=j[i],null==k&&(k=j[i]={}),null==(l=k[e])){var m=this.context;if("object"!=typeof f){var n=a("<div>&nbsp;</div>").css("position","absolute").addClass("string"==typeof f?f:null).appendTo(this.getTextLayer(c));f={lineHeight:n.height(),style:n.css("font-style"),variant:n.css("font-variant"),weight:n.css("font-weight"),family:n.css("font-family"),color:n.css("color")},f.size=n.css("line-height",1).height(),n.remove()}i=f.style+" "+f.variant+" "+f.weight+" "+f.size+"px "+f.family,l=k[e]={width:0,height:0,positions:[],lines:[],font:{definition:i,color:f.color}},m.save(),m.font=i;for(var o=(e+"").replace(/<br ?\/?>|\r\n|\r/g,"\n").split("\n"),p=0;p<o.length;++p){var q=o[p],r=m.measureText(q);l.width=Math.max(r.width,l.width),l.height+=f.lineHeight,l.lines.push({text:q,width:r.width,height:f.lineHeight})}m.restore()}return l},h.prototype.addText=function(a,c,d,f,g,h,i,j,k){if(!b.getOptions().canvas)return e.call(this,a,c,d,f,g,h,i,j,k);var l=this.getTextInfo(a,f,g,h,i),m=l.positions,n=l.lines;d+=l.height/n.length/2,d="middle"==k?Math.round(d-l.height/2):"bottom"==k?Math.round(d-l.height):Math.round(d),window.opera&&window.opera.version().split(".")[0]<12&&(d-=2);for(var o,p=0;o=m[p];p++)if(o.x==c&&o.y==d)return void(o.active=!0);o={active:!0,lines:[],x:c,y:d},m.push(o);for(var q,p=0;q=n[p];p++)"center"==j?o.lines.push([Math.round(c-q.width/2),d]):"right"==j?o.lines.push([Math.round(c-q.width),d]):o.lines.push([Math.round(c),d]),d+=q.height}}var c,d,e,f={canvas:!0},g=Object.prototype.hasOwnProperty;a.plot.plugins.push({init:b,options:f,name:"canvas",version:"1.0"})}(jQuery)}(),e()}),a.registerDynamic("e0",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){!function(a){function b(e){var j,k=this,l=e.data||{};if(l.elem)k=e.dragTarget=l.elem,e.dragProxy=i.proxy||k,e.cursorOffsetX=l.pageX-l.left,e.cursorOffsetY=l.pageY-l.top,e.offsetX=e.pageX-e.cursorOffsetX,e.offsetY=e.pageY-e.cursorOffsetY;else if(i.dragging||l.which>0&&e.which!=l.which||a(e.target).is(l.not))return;switch(e.type){case"mousedown":return a.extend(l,a(k).offset(),{elem:k,target:e.target,pageX:e.pageX,pageY:e.pageY}),g.add(document,"mousemove mouseup",b,l),f(k,!1),i.dragging=null,!1;case!i.dragging&&"mousemove":if(d(e.pageX-l.pageX)+d(e.pageY-l.pageY)<l.distance)break;e.target=l.target,!1!==(j=c(e,"dragstart",k))&&(i.dragging=k,i.proxy=e.dragProxy=a(j||k)[0]);case"mousemove":if(i.dragging){if(j=c(e,"drag",k),h.drop&&(h.drop.allowed=!1!==j,h.drop.handler(e)),!1!==j)break;e.type="mouseup"}case"mouseup":g.remove(document,"mousemove mouseup",b),i.dragging&&(h.drop&&h.drop.handler(e),c(e,"dragend",k)),f(k,!0),i.dragging=i.proxy=l.elem=!1}return!0}function c(b,c,d){b.type=c;var e=a.event.dispatch.call(d,b);return!1!==e&&(e||b.result)}function d(a){return Math.pow(a,2)}function e(){return!1===i.dragging}function f(a,b){a&&(a.unselectable=b?"off":"on",a.onselectstart=function(){return b},a.style&&(a.style.MozUserSelect=b?"":"none"))}a.fn.drag=function(a,b,c){return b&&this.bind("dragstart",a),c&&this.bind("dragend",c),a?this.bind("drag",b||a):this.trigger("drag")};var g=a.event,h=g.special,i=h.drag={not:":input",distance:0,which:1,dragging:!1,setup:function(c){c=a.extend({distance:i.distance,which:i.which,not:i.not},c||{}),c.distance=d(c.distance),g.add(this,"mousedown",b,c),this.attachEvent&&this.attachEvent("ondragstart",e)},teardown:function(){g.remove(this,"mousedown",b),this===i.dragging&&(i.dragging=i.proxy=!1),f(this,!0),this.detachEvent&&this.detachEvent("ondragstart",e)}};h.dragstart=h.dragend={setup:function(){},teardown:function(){}}}(jQuery),function(a){function b(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=0,g=0,b=a.event.fix(c);return b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),g=e,void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(g=0,f=-1*e),void 0!==c.wheelDeltaY&&(g=c.wheelDeltaY/120),void 0!==c.wheelDeltaX&&(f=-1*c.wheelDeltaX/120),d.unshift(b,e,f,g),(a.event.dispatch||a.event.handle).apply(this,d)}var c=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var d=c.length;d;)a.event.fixHooks[c[--d]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery),function(a){function b(b){function c(a,c){var d=b.offset();d.left=a.pageX-d.left,d.top=a.pageY-d.top,c?b.zoomOut({center:d}):b.zoom({center:d})}function d(a,d){a.preventDefault();var e=b.getOptions().zoom.frameRate;if(!n&&e)return n=setTimeout(function(){c(a,d<0),n=null},1/e*1e3),!1}function e(a){if(1!=a.which)return!1;var c=b.getPlaceholder().css("cursor");c&&(j=c),b.getPlaceholder().css("cursor",b.getOptions().pan.cursor),k=a.pageX,l=a.pageY}function f(a){var c=b.getOptions().pan.frameRate;!m&&c&&(m=setTimeout(function(){b.pan({left:k-a.pageX,top:l-a.pageY}),k=a.pageX,l=a.pageY,m=null},1/c*1e3))}function g(a){m&&(clearTimeout(m),m=null),b.getPlaceholder().css("cursor",j),b.getOptions().pan.frameRate&&b.pan({left:k-a.pageX,top:l-a.pageY})}function h(a,b){var h=a.getOptions();h.zoom.interactive&&(b[h.zoom.trigger](c),b.mousewheel(d)),h.pan.interactive&&(b.bind("dragstart",{distance:10},e),b.bind("drag",f),b.bind("dragend",g))}function i(a,b){b.unbind(a.getOptions().zoom.trigger,c),b.unbind("mousewheel",d),b.unbind("dragstart",e),b.unbind("drag",f),b.unbind("dragend",g),m&&clearTimeout(m)}var j="default",k=0,l=0,m=null,n=null;b.zoomOut=function(a){a||(a={}),a.amount||(a.amount=b.getOptions().zoom.amount),a.amount=1/a.amount,b.zoom(a)},b.zoom=function(c){c||(c={});var d=c.center,e=c.amount||b.getOptions().zoom.amount,f=b.width(),g=b.height();d||(d={left:f/2,top:g/2});var h=d.left/f,i=d.top/g,j={x:{min:d.left-h*f/e,max:d.left+(1-h)*f/e},y:{min:d.top-i*g/e,max:d.top+(1-i)*g/e}};a.each(b.getAxes(),function(a,b){var c=b.options,d=j[b.direction].min,f=j[b.direction].max,g=c.zoomRange,h=c.panRange;if(!1!==g){if(d=b.c2p(d),f=b.c2p(f),d>f){var i=d;d=f,f=i}h&&(null!=h[0]&&d<h[0]&&(d=h[0]),null!=h[1]&&f>h[1]&&(f=h[1]));var k=f-d;c.transform&&(k=c.transform(f)-c.transform(d)),g&&(null!=g[0]&&k<g[0]&&e>1||null!=g[1]&&k>g[1]&&e<1)||(c.min=d,c.max=f)}}),b.setupGrid(),b.draw(),c.preventEvent||b.getPlaceholder().trigger("plotzoom",[b,c])},b.pan=function(c){var d={x:+c.left,y:+c.top};isNaN(d.x)&&(d.x=0),isNaN(d.y)&&(d.y=0),a.each(b.getAxes(),function(a,b){var c,e,f,g,h=b.options,i=d[b.direction],j=h.panRange;j&&(null!==j[0]&&(f=b.p2c(j[0])-b.p2c(b.min),i<f&&(i=f)),null!==j[1]&&(g=b.p2c(j[1])-b.p2c(b.max),i>g&&(i=g))),c=b.c2p(b.p2c(b.min)+i),e=b.c2p(b.p2c(b.max)+i),!1!==j&&(h.min=c,h.max=e)}),b.setupGrid(),b.draw(),c.preventEvent||b.getPlaceholder().trigger("plotpan",[b,c])},b.hooks.bindEvents.push(h),b.hooks.shutdown.push(i)}var c={xaxis:{zoomRange:null,panRange:null},zoom:{interactive:!1,trigger:"dblclick",amount:1.5,frameRate:20},pan:{interactive:!1,cursor:"move",frameRate:20}};a.plot.plugins.push({init:b,options:c,name:"navigate",version:"1.3"})}(jQuery)}(),e()}),a.registerDynamic("e1",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){!function(a){function b(){return!!document.createElement("canvas").getContext}function c(){return!!b()&&"function"==typeof document.createElement("canvas").getContext("2d").fillText}function d(){var a=document.createElement("div");return void 0!==a.style.MozTransition||void 0!==a.style.OTransition||void 0!==a.style.webkitTransition||void 0!==a.style.transition}function e(a,b,c,d,e){this.axisName=a,this.position=b,this.padding=c,this.plot=d,this.opts=e,this.width=0,this.height=0}function f(a,b,c,d,f){e.prototype.constructor.call(this,a,b,c,d,f)}function g(a,b,c,d,f){e.prototype.constructor.call(this,a,b,c,d,f),this.elem=null}function h(a,b,c,d,e){g.prototype.constructor.call(this,a,b,c,d,e)}function i(a,b,c,d,e){h.prototype.constructor.call(this,a,b,c,d,e),this.requiresResize=!1}function j(b){b.hooks.processOptions.push(function(b,e){if(e.axisLabels.show){var j=!1,k={};b.hooks.draw.push(function(b,e){var l=!1;j?(j=!1,a.each(b.getAxes(),function(a,c){var d=c.options||b.getOptions()[a];d&&d.axisLabel&&c.show&&k[a].draw(c.box)})):(a.each(b.getAxes(),function(a,e){var j=e.options||b.getOptions()[a];if(a in k&&(e.labelHeight=e.labelHeight-k[a].height,e.labelWidth=e.labelWidth-k[a].width,j.labelHeight=e.labelHeight,j.labelWidth=e.labelWidth,k[a].cleanup(),delete k[a]),j&&j.axisLabel&&e.show){l=!0;var m=null;if(j.axisLabelUseHtml||"Microsoft Internet Explorer"!=navigator.appName)m=j.axisLabelUseHtml||!d()&&!c()&&!j.axisLabelUseCanvas?g:j.axisLabelUseCanvas||!d()?f:h;else{var n=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(n)&&(rv=parseFloat(RegExp.$1)),m=rv>=9&&!j.axisLabelUseCanvas&&!j.axisLabelUseHtml?h:j.axisLabelUseCanvas||j.axisLabelUseHtml?j.axisLabelUseCanvas?f:g:i}var o=void 0===j.axisLabelPadding?2:j.axisLabelPadding;k[a]=new m(a,e.position,o,b,j),k[a].calculateSize(),j.labelHeight=e.labelHeight+k[a].height,j.labelWidth=e.labelWidth+k[a].width}}),l&&(j=!0,b.setupGrid(),b.draw()))})}})}var k={axisLabels:{show:!0}};e.prototype.cleanup=function(){},f.prototype=new e,f.prototype.constructor=f,f.prototype.calculateSize=function(){this.opts.axisLabelFontSizePixels||(this.opts.axisLabelFontSizePixels=14),this.opts.axisLabelFontFamily||(this.opts.axisLabelFontFamily="sans-serif");this.opts.axisLabelFontSizePixels,this.padding,this.opts.axisLabelFontSizePixels,this.padding;"left"==this.position||"right"==this.position?(this.width=this.opts.axisLabelFontSizePixels+this.padding,this.height=0):(this.width=0,this.height=this.opts.axisLabelFontSizePixels+this.padding)},f.prototype.draw=function(a){this.opts.axisLabelColour||(this.opts.axisLabelColour="black");var b=this.plot.getCanvas().getContext("2d");b.save(),b.font=this.opts.axisLabelFontSizePixels+"px "+this.opts.axisLabelFontFamily,b.fillStyle=this.opts.axisLabelColour;var c,d,e=b.measureText(this.opts.axisLabel).width,f=this.opts.axisLabelFontSizePixels,g=0;"top"==this.position?(c=a.left+a.width/2-e/2,d=a.top+.72*f):"bottom"==this.position?(c=a.left+a.width/2-e/2,d=a.top+a.height-.72*f):"left"==this.position?(c=a.left+.72*f,d=a.height/2+a.top+e/2,g=-Math.PI/2):"right"==this.position&&(c=a.left+a.width-.72*f,d=a.height/2+a.top-e/2,g=Math.PI/2),b.translate(c,d),b.rotate(g),b.fillText(this.opts.axisLabel,0,0),b.restore()},g.prototype=new e,g.prototype.constructor=g,g.prototype.calculateSize=function(){var b=a('<div class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(b),this.labelWidth=b.outerWidth(!0),this.labelHeight=b.outerHeight(!0),b.remove(),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelWidth+this.padding:this.height=this.labelHeight+this.padding},g.prototype.cleanup=function(){this.elem&&this.elem.remove()},g.prototype.draw=function(b){this.plot.getPlaceholder().find("#"+this.axisName+"Label").remove(),this.elem=a('<div id="'+this.axisName+'Label" " class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem),"top"==this.position?(this.elem.css("left",b.left+b.width/2-this.labelWidth/2+"px"),this.elem.css("top",b.top+"px")):"bottom"==this.position?(this.elem.css("left",b.left+b.width/2-this.labelWidth/2+"px"),this.elem.css("top",b.top+b.height-this.labelHeight+"px")):"left"==this.position?(this.elem.css("top",b.top+b.height/2-this.labelHeight/2+"px"),this.elem.css("left",b.left+"px")):"right"==this.position&&(this.elem.css("top",b.top+b.height/2-this.labelHeight/2+"px"),this.elem.css("left",b.left+b.width-this.labelWidth+"px"))},h.prototype=new g,h.prototype.constructor=h,h.prototype.calculateSize=function(){g.prototype.calculateSize.call(this),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelHeight+this.padding:this.height=this.labelHeight+this.padding},h.prototype.transforms=function(a,b,c){var d={"-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""};if(0!=b||0!=c){var e=" translate("+b+"px, "+c+"px)";d["-moz-transform"]+=e,d["-webkit-transform"]+=e,d["-o-transform"]+=e,d["-ms-transform"]+=e}if(0!=a){var f=" rotate("+a+"deg)";d["-moz-transform"]+=f,d["-webkit-transform"]+=f,d["-o-transform"]+=f,d["-ms-transform"]+=f}var g="top: 0; left: 0; ";for(var h in d)d[h]&&(g+=h+":"+d[h]+";");return g+=";"},h.prototype.calculateOffsets=function(a){var b={x:0,y:0,degrees:0};return"bottom"==this.position?(b.x=a.left+a.width/2-this.labelWidth/2,b.y=a.top+a.height-this.labelHeight):"top"==this.position?(b.x=a.left+a.width/2-this.labelWidth/2,b.y=a.top):"left"==this.position?(b.degrees=-90,b.x=a.left-this.labelWidth/2+this.labelHeight/2,b.y=a.height/2+a.top):"right"==this.position&&(b.degrees=90,b.x=a.left+a.width-this.labelWidth/2-this.labelHeight/2,b.y=a.height/2+a.top),b.x=Math.round(b.x),b.y=Math.round(b.y),b},h.prototype.draw=function(b){this.plot.getPlaceholder().find("."+this.axisName+"Label").remove();var c=this.calculateOffsets(b);this.elem=a('<div class="axisLabels '+this.axisName+'Label" style="position:absolute; '+this.transforms(c.degrees,c.x,c.y)+'">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem)},i.prototype=new h,i.prototype.constructor=i,i.prototype.transforms=function(a,b,c){var d="";if(0!=a){for(var e=a/90;e<0;)e+=4;d+=" filter: progid:DXImageTransform.Microsoft.BasicImage(rotation="+e+"); ",this.requiresResize="right"==this.position}return 0!=b&&(d+="left: "+b+"px; "),0!=c&&(d+="top: "+c+"px; "),d},i.prototype.calculateOffsets=function(a){var b=h.prototype.calculateOffsets.call(this,a);return"top"==this.position?b.y=a.top+1:"left"==this.position?(b.x=a.left,b.y=a.height/2+a.top-this.labelWidth/2):"right"==this.position&&(b.x=a.left+a.width-this.labelHeight,b.y=a.height/2+a.top-this.labelWidth/2),b},i.prototype.draw=function(a){h.prototype.draw.call(this,a),this.requiresResize&&(this.elem=this.plot.getPlaceholder().find("."+this.axisName+"Label"),this.elem.css("width",this.labelWidth),this.elem.css("height",this.labelHeight))},a.plot.plugins.push({init:j,options:k,name:"axisLabels",version:"2.0"})}(jQuery)}(),e()}),a.register("e2",[],function(){return{setters:[],execute:function(){}}}),a.register("e3",["2d","10","29","21","51","22","52","3b","32","62"],function(a,b){"use strict";function c(a,b){var c=void 0;if(a)switch(b){case a.signalTypes.voltage:c=h.i18n.translate("Voltage (V)").fetch();break;case a.signalTypes.current:c=h.i18n.translate("Current (A)").fetch();break;case a.signalTypes.expression:c="Expression";break;case a.signalTypes.digital:c=h.i18n.translate("Digital").fetch()}if(!c)switch(b){case"magnitude":c=h.i18n.translate("Magnitude").fetch();break;case"phase":c=h.i18n.translate("Phase (°)").fetch();break;case null:case void 0:c=null}return c||b}function d(a,b){var c="";if(a)switch(b){case a.signalTypes.voltage:c="V";break;case a.signalTypes.current:c="A";break;case a.signalTypes.expression:c="";break;case a.signalTypes.digital:c="digital"}return c}function e(a,b){function e(b,c){b.subGraphs.forEach(function(d){var e=!1,f=a.dataManager.getLimits(),g=d.getOptions().xaxes[0];c&&(!ta.minXDisplayValue&&0!==ta.minXDisplayValue||g.min===ta.minXDisplayValue?void 0===ta.minXDisplayValue&&(e=!0,isNaN(f.minx)||(g.panRange[0]=g.min=f.minx)):(g.panRange[0]=Math.min(f.minx,ta.minXDisplayValue),g.min=ta.minXDisplayValue,e=!0),ta.maxXDisplayValue&&g.max!==ta.maxXDisplayValue?(g.panRange[1]=Math.max(f.maxx,ta.maxXDisplayValue),g.zoomRange[1]=Math.max(f.maxx-f.minx,ta.maxXDisplayValue-ta.minXDisplayValue),g.max=ta.maxXDisplayValue,e=!0):void 0===ta.maxXDisplayValue&&(e=!0,isNaN(f.maxx)||(g.panRange[1]=g.max=f.maxx,g.zoomRange[1]=f.maxx-f.minx))),d.getYAxes().forEach(function(a){var c=void 0,d=void 0;ta.analysisType===i.AC||ta.analysisType===i.PARAM_SWEEP&&ta.lastSweptAnalysis===i.AC?("phase"===a.options.type?(c=void 0!==ta.minPhaseDisplayValue?ta.minPhaseDisplayValue:c,d=void 0!==ta.maxPhaseDisplayValue?ta.maxPhaseDisplayValue:d):"magnitude"===a.options.type&&(c=void 0!==ta.minMagnitudeDisplayValue?ta.minMagnitudeDisplayValue:c,d=void 0!==ta.maxMagnitudeDisplayValue?ta.maxMagnitudeDisplayValue:d),ta.grapherMagnitudeScaleType!==va&&(e=!0)):b.probeController.getRangesForType(a.options.signalType).forEach(function(a){c=void 0!==a[ta.analysisType].minYDisplayValue?a[ta.analysisType].minYDisplayValue:c,d=void 0!==a[ta.analysisType].maxYDisplayValue?a[ta.analysisType].maxYDisplayValue:d},this),(void 0!==c&&c!==a.options.min||void 0===c&&void 0!==a.options.min)&&(void 0===c&&void 0!==a.options.min&&(a.min=void 0),a.options&&a.options.signalType===k.PROBE_DIGITAL&&void 0===a.options.min&&(c=Math.min(c,-.1)),a.options.min=c,e=!0),(void 0!==d&&d!==a.options.max||void 0===d&&void 0!==a.options.max)&&(void 0===d&&void 0!==a.options.max&&(a.max=void 0),a.options&&a.options.signalType===k.PROBE_DIGITAL&&void 0===a.options.max&&(d=Math.max(d+1,3)),a.options.max=d,e=!0)}),e&&c&&(d.resize(),b.update(g.min,g.max))})}function y(a){var b=!1;a.subGraphs.forEach(function(c){ta.minXActual=c.getXAxes()[0].min,ta.maxXActual=c.getXAxes()[0].max,c.getYAxes().forEach(function(c){ta.analysisType===i.AC||ta.analysisType===i.PARAM_SWEEP&&ta.lastSweptAnalysis===i.AC?"phase"===c.options.type?(isNaN(ta.minPhaseActual)||isNaN(c.min)||isNaN(ta.maxPhaseActual)||isNaN(c.max)||(b=b||ta.minPhaseActual!==c.min||ta.maxPhaseActual!==c.max),ta.minPhaseActual=c.min,ta.maxPhaseActual=c.max):"magnitude"===c.options.type&&(isNaN(ta.minMagnitudeActual)||isNaN(c.min)||isNaN(ta.maxMagnitudeActual)||isNaN(c.max)||(b=b||ta.minMagnitudeActual!==c.min||ta.maxMagnitudeActual!==c.max),ta.minMagnitudeActual=c.min,ta.maxMagnitudeActual=c.max):a.probeController.getRangesForType(c.options.signalType).forEach(function(a){isNaN(a[ta.analysisType].minYActual)||isNaN(c.min)||isNaN(a[ta.analysisType].maxYActual)||isNaN(c.max)||(b=b||a[ta.analysisType].minYActual!==c.min||a[ta.analysisType].maxYActual!==c.max),a[ta.analysisType].minYActual=c.min,a[ta.analysisType].maxYActual=c.max},this)})}),b&&a.simulationController.notifySettingsFeedbackChanged(a)}function z(a){var b=!1;a.subGraphs.forEach(function(c){c.getYAxes().forEach(function(c){ta.analysisType===i.AC||ta.analysisType===i.PARAM_SWEEP&&ta.lastSweptAnalysis===i.AC?"phase"===c.options.type?(void 0===c.options.min&&c.min!==ta.minPhaseDisplayValue&&(ta.minPhaseDisplay=c.min,b=!0),void 0===c.options.max&&c.max!==ta.maxPhaseDisplayValue&&(ta.maxPhaseDisplay=c.max,b=!0)):"magnitude"===c.options.type&&(void 0===c.options.min&&c.min!==ta.minMagnitudeDisplayValue&&(ta.minMagnitudeDisplay=c.min,b=!0),void 0===c.options.max&&c.max!==ta.maxMagnitudeDisplayValue&&(ta.maxMagnitudeDisplay=c.max,b=!0)):a.probeController.getRangesForType(c.options.signalType).forEach(function(a){void 0===c.options.min&&c.min!==a[ta.analysisType].minYDisplayValue&&(a[ta.analysisType].minYDisplay=c.min,b=!0),void 0===c.options.max&&c.max!==a[ta.analysisType].maxYDisplayValue&&(a[ta.analysisType].maxYDisplay=c.max,b=!0)},this)})}),b&&a.simulationController.notifySimulationSettingsUpdated(a)}function A(a){xa=a.signals.find(function(b){return b.simulatorName===a.activeAnalysisSettings.trigger.signal})}function B(a,b,c){var d=void 0,e=a;c!==a&&(c>a?(d=Math.floor(Math.log2(c/a)),e=c/Math.pow(2,d)):(d=Math.ceil(Math.log2(a/c)),e=c*Math.pow(2,d)));var f=Math.floor(Math.log2(b/c));return{max:c*Math.pow(2,f),min:e}}function C(a,b,c){var d=Math.log2(b/a),e=d;if(d!==c){var f=d/c;f=f>1?Math.ceil(f):1,e=f}return e}function D(a,b,c,d){var e=20*Math.log10(Math.max(r,b)/Math.max(r,a)),f=e;if(e!==c){var g=e/c*d;g=g>1?Math.ceil(g):1,f=g}return f}function E(a,b,c,d){var e=void 0,f=void 0,g=void 0,h=void 0;if(0===a.min||0===a.max)throw new Error("min and/or max is 0 for a logarithmic axis for values min: "+a.min+" and max: "+a.max);var i=Math.max(a.min,1e-300),k=Math.max(a.max,1e-300),l=function(a,b){return Math.pow(a,b)},m=void 0,n=1;switch(b){case j.DECADE:e=Math.ceil(Math.log10(k)),f=Math.floor(Math.log10(i)),g=10;break;case j.OCTAVE:e=Math.ceil(Math.log2(k)),f=Math.floor(Math.log2(i)),g=2,m=B(a.min,a.max,2),h=C(m.min,m.max,8);break;case j.DECIBEL:for(var o=20*Math.log10(k),p=20*Math.log10(i),q=0,r=0;r<=d;r++){50*Math.pow(10,-r)>o-p&&(q=r)}n=Math.pow(10,q||0),e=Math.ceil(n*o),f=Math.floor(n*p),h=D(i,k,10,n)}var s=[],t=void 0;if(b===j.DECIBEL){var u=(1+(e/h|0))*h;for(t=(f/h|0)*h;t<u;t+=h)s.push(Math.pow(10,t/(20*n)))}else for(t=f;t<=e;++t)if(b===j.DECADE)for(var v=1;v<10&&(s.push(v*l(g,t)),t!==e);++v);else if(t%h==0&&s.push(l(g,t)),t===e)break;return s}function F(a,b){return b=b||{show:!0,axisLabelColour:"#777b80"},b.inverseTransform=null,b.tickFormatter=function(){return""},b.ticks=function(b){for(var c=[],d=Math.max(b.min,1e-300),e=0;e<=10;e++)c.push(d+a.activeAnalysisSettings.timePerDivision*e);return c},b.transform=null,b.axisLabelFontFamily=a.fontFamily,b}function G(a){var b=a-Math.floor(a);return b>.5?b="1":0===b&&(b="0"),b}function H(a){var b=(a-Math.floor(a))/(1-x);return b=b<.01?"0":b>.99?"1":b.toFixed(2)}function I(a){for(var b=Math.min(a.min,0),c=Math.min(a.max,100),d=[],e=Math.floor(b);e<c;e++)d.push(e),d.push(e+(1-x));return d}function J(a,b,c){return c=K(a,b,c),c.ticks=function(b){return I(b,a)},c}function K(a,b,c){return c=c||{show:!0,axisLabelColour:"#777b80"},c.inverseTransform=null,c.tickFormatter=function(a,b){if(b.options&&b.options.signalType===k.PROBE_DIGITAL)return G(a);var c=n(a),d=Math.ceil(void 0!==b.tickSize?Math.log10(b.tickSize):3),e=Math.max(3,1+Math.ceil(Math.log10(Math.abs(c.modifiedValue)))+Math.max(0,-(c.siPrefixPow+d)));return m(a,void 0,!0,e,!0,!1)},c.ticks=null,c.transform=null,c.axisLabelFontFamily=b,c}function L(a,b,c){return c=c||{show:!0,axisLabelColour:"#777b80"},c.inverseTransform=function(a){return Math.pow(2,a)},c.tickFormatter=function(a,b){if(a>=b.min&&a<=b.max)return m(a,void 0,!0,3,!0,!1)},c.ticks=function(b){return E(b,j.OCTAVE,a)},c.transform=function(a){return Math.log2(Math.max(r,a))},c.axisLabelFontFamily=b,c}function M(a){var b=function(a,b,c){return"digital"!==b?m("dB"!==b||c?a:o(a),void 0,void 0,5,!0,!0,!0)+(b||""):H(a)},c=function(a){return b(a.x,a.dataSeries.xUnit)+", "+b(a.y,a.dataSeries.yUnit)},d={name:"",position:{relativeX:.5,relativeY:.5},mode:"xy",showIntersections:!0,showLabel:!1,showIntersectionLabel:!1,showAnchorLabel:!0,drawAnchor:!0,showValuesRelativeToSeries:void 0,anchorLabelColor:"white",color:"rgba(0,184,8,1)",symbol:"none",fontFamily:"'Lato', Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:"15px",snapToPlot:0,mouseCursors:{default:"",panCursor:"url("+window.multisim.rootFolder+"resources/move.cur), move"},formatNum:b,formatIntersectionData:c};return f.assign(d,a)}function N(a,b){var c=a.cursors,d=b||a.cursorType,e=c[d];if(e.forEach(function(a){a.intersections=null}),0===e.length){var f=null,g=null,h={relativeX:.33,relativeY:.33},i={relativeX:.66,relativeY:.66},j="C1",k="C2";switch(d){case l.X:case l.Y:case l.XY:f={name:j,mode:d,position:h},g={name:k,mode:d,position:i};break;default:throw new Error("Illegal Cursor Type: "+d)}e=[M(f),M(g)],c[d]=e}return e}function O(a,b,c){var d=2,e=Math.pow(10,d);return c=c||{show:!0,axisLabelColour:"#777b80"},c.inverseTransform=function(a){return Math.pow(10,a/20)},c.tickFormatter=function(a){return(Math.round(20*e*Math.log10(Math.max(r,a)))/e).toString()},c.ticks=function(b){return E(b,j.DECIBEL,a,d)},c.transform=function(a){return 20*Math.log10(Math.max(r,a))},c.axisLabelFontFamily=b,c}function P(a,b,c){return c=c||{show:!0,axisLabelColour:"#777b80"},c.inverseTransform=function(a){return Math.pow(10,a)},c.tickFormatter=function(a){return 1==a/Math.pow(10,Math.floor(Math.log10(Math.max(r,a))))?m(a,void 0,!0,3,!0,!1):""},c.ticks=function(b){return E(b,j.DECADE,a)},c.transform=function(a){return Math.log10(Math.max(r,a))},c.axisLabelFontFamily=b,c}function Q(){return{canvas:w,axisLabels:{show:!0},crosshair:{mode:"xy"},cursors:[],grid:{autoHighlight:!0,borderWidth:1,borderColor:"#B0B2B4",clickable:!0,hoverable:!0,margin:{top:45,left:5,bottom:0,right:5},minBorderMargin:0,show:!0,tickColor:"#E8E8E8",mouseActiveRadius:10},hooks:{},legend:{show:!0},pan:{interactive:!0,cursor:"ew-resize",frameRate:1/0},selection:{mode:"x"},zoom:{interactive:!0,trigger:"submit"}}}function R(a,b,c){if(c.lines&&c.lines.dashStyle)switch(c.lines.dashStyle){case ya.SOLID:b.setLineDash([]);break;case ya.DASH:b.setLineDash([5+c.lines.lineWidth]);break;case ya.DOT:b.setLineDash([1,2*c.lines.lineWidth]),b.lineCap="round";break;case ya.DASH_DOT:var d=5+c.lines.lineWidth,e=2*c.lines.lineWidth;b.setLineDash([d,e,1,e]);break;case ya.DOT5DASH:var f=5+c.lines.lineWidth,g=2*c.lines.lineWidth,h=1;b.setLineDash([f,g,h,g,h,g,h,g,h,g,h,g]);break;case ya.DASH5DOT:var i=5+c.lines.lineWidth,j=2*c.lines.lineWidth;b.setLineDash([5*(i+j),j,1,j])}}function S(a,b){b.setLineDash([]),b.lineCap="butt"}function T(a,b,d){return V(a,b,f.merge(d,{xAxisLabel:c(null,h.i18n.translate("Time (s)").fetch()),xAxisConfig:K(b.fontFamily),startValue:a.startTimeValue,stopValue:a.stopTimeValue,zoomRange:[1e-15,a.stopTimeValue-a.startTimeValue]}))}function U(a,b,c){var d=b.container?b.container.parentElement.closest(".legendwrapper"):null;d||(d=document.createElement("div"),d.style.position="absolute",d.classList.add("legendwrapper","grapher-object"),d.innerHTML=v,a.graphContainer.appendChild(d),b.container=d.querySelector(".legendcontainer")),d.querySelector(".sweepinfo").style.display=c.parentSweepSettings?"block":"none";var e=function(a){var b="",c=document.createElement("div");return c.innerHTML=a,Array.from(c.childNodes).forEach(function(a){b+="#text"===a.nodeName?"<span>"+a.textContent+"</span>":a.outerHTML}),b};if(c.parentSweepSettings){var f=c.parentSweepSettings.selectedSweepType===j.LIST?c.parentSweepSettings.sortedParamListValues[0]:c.parentSweepSettings.paramStartValue,g=c.parentSweepSettings.selectedSweepType===j.LIST?c.parentSweepSettings.sortedParamListValues[c.parentSweepSettings.sortedParamListValues-1]:c.parentSweepSettings.paramStopValue,i=""+(m(f,void 0,void 0,void 0,!0,void 0,!0)+(c.parentSweepSettings.parameterUnits?c.parentSweepSettings.parameterUnits:"")),k=""+(m(g,void 0,void 0,void 0,!0,void 0,!0)+(c.parentSweepSettings.parameterUnits?c.parentSweepSettings.parameterUnits:""));d.querySelector("."+t.SLT_SWEEPTEXT).innerHTML=h.i18n.translate("Sweep").fetch(),d.querySelector("."+t.SLT_SWEEPPARAMETER).innerHTML=e(c.parentSweepSettings.componentName+": "+c.parentSweepSettings.parameterName),d.querySelector("."+t.SLT_SWEEPSTART).innerHTML=h.i18n.translate("Start").fetch()+": "+i,d.querySelector("."+t.SLT_SWEEPSTOP).innerHTML=h.i18n.translate("Stop").fetch()+": "+k}}function V(a,b,c){var d=c.xAxisConfig;d.labelHeight=25,d.axisLabel=a.xAxisName=c.xAxisLabel,d.axisLabelUseCanvas=w;var e=c.startValue,f=c.stopValue;d.panRange=[e,f],d.zoomRange=c.zoomRange,d.min=e,d.max=f||void 0;var g=K(b.fontFamily);g.labelWidth=50,g.panRange=!1,g.zoomRange=!1,g.boundary={min:a.minValidY,max:a.maxValidY,minRange:wa};var h=Q();return h.xaxes=[d],h.yaxes=[g],h.series={shadowSize:0,lines:{lineWidth:2}},h.legend.labelFormatter=function(a,b){return u.replace(/\$type/g,"").replace(/\$style/g,b.lines.dashStyle).replace(/\(\$label\)/g,a).replace(/\$color/g,b.color)},U(b,h.legend,c),h.hooks.drawSeries=R,h.hooks.drawBackground=function(a,c){b.drawBackground(c),S(a,c)},h.hooks.draw=S,h}function W(a,b){var c=void 0;switch(a.mapDisplayNameToSignalTypes.has(b)?a.mapDisplayNameToSignalTypes.get(b):"unknown"){case k.PROBE_VOLTAGE:c=ya.SOLID;break;case k.PROBE_CURRENT:c=ya.DOT;break;case k.PROBE_DIGITAL:c=ya.SOLID;break;default:c=ya.DASH}return c}function X(a,b){return V(a,b,{xAxisLabel:c(null,h.i18n.translate("Time (s)").fetch()),xAxisConfig:F(b),startValue:0,stopValue:null,zoomRange:[null,null]})}function Y(a,b,d){var e=a.startFrequencyValue,f=a.stopFrequencyValue,g=a.sweepType,i=Da.get(g).call(this,a,b.fontFamily);i.labelHeight=25,i.axisLabel=c(null,h.i18n.translate("Frequency (Hz)").fetch()),i.axisLabelUseCanvas=w,i.panRange=[e,f],i.zoomRange=[1,f-e],i.min=e,i.max=f;var j=Da.get(a.grapherMagnitudeScaleType).call(this,a,b.fontFamily);j.labelWidth=50,j.panRange=!1,j.zoomRange=!1,j.axisLabelUseCanvas=w,j.axisLabel=c(null,h.i18n.translate("Magnitude").fetch()),j.boundary={min:a.minValidMagnitude,max:a.maxValidMagnitude,minRange:wa},j.type="magnitude";var k=K(b.fontFamily);k.labelWidth=50,k.panRange=!1,k.zoomRange=!1,k.position="right",k.axisLabelUseCanvas=w,k.tickLength=0,k.boundary={min:a.minValidPhase,max:a.maxValidPhase,minRange:wa},k.axisLabel=c(null,h.i18n.translate("Phase (°)").fetch()),k.type="phase";var l=Q();return l.xaxes=[i],l.yaxes=[j,k],l.series={shadowSize:0,lines:{lineWidth:2}},l.hooks.drawSeries=[R],l.hooks.drawBackground=[function(a,c){b.drawBackground(c),S(a,c)}],l.hooks.draw=S,l.legend.labelFormatter=function(a,b){return u.replace(/\$type/g,1===b.yaxis.n?"Mag: ":"Phase: ").replace(/\$style/g,b.lines.dashStyle).replace(/\(\$label\)/g,a).replace(/\$color/g,b.color)},U(b,l.legend,d),l.hooks.bindEvents=[],l.hooks.shutdown=[],_(l,b),aa(l,b),l}function Z(a,b){var c=a.useSource2&&/^v/.test(a.source2Name),d=a.useSource2?{selectedSweepType:"linear",paramStartValue:a.source2StartValue,paramStopValue:a.source2StopValue,parameterUnits:c?"V":"A",componentName:a.source2Name.replace(/^[vi]/g,""),parameterName:h.i18n.translate(c?"Voltage (V)":"Current (A)").fetch()}:void 0;return V(a,b,{xAxisConfig:Da.get(j.LINEAR).call(this,a,b.fontFamily),xAxisLabel:a.source1Name.replace(/^[vi]/g,"")+" "+h.i18n.translate(/^v/.test(a.source1Name)?"Voltage (V)":"Current (A)").fetch(),sweepType:j.LINEAR,startValue:a.source1StartValue,stopValue:a.source1StopValue,zoomRange:[1e-15,a.source1StopValue-a.source1StartValue],parentSweepSettings:d})}function $(b,c){var d=void 0;switch(b.lastSweptAnalysis){case i.AC:d=Y(a.getSimulationSettings(i.AC),c,{parentSweepSettings:b});break;case i.Transient:d=T(a.getSimulationSettings(i.Transient),c,{parentSweepSettings:b});break;case i.DC:var e=void 0,f=void 0;if(b.selectedSweepType!==j.LIST)e=b.paramStartValue,f=b.paramStopValue;else{var g=b.sortedParamListValues;e=g[0],f=g[g.length-1]}d=V(b,c,{xAxisConfig:Da.get(b.selectedSweepType).call(this,b,c.fontFamily),xAxisLabel:b.componentName+" "+b.parameterName.replace(/<[^>]+>/g,"")+(b.parameterUnits?" ("+b.parameterUnits+")":""),sweepType:b.selectedSweepType,startValue:e,stopValue:f,zoomRange:[1e-15,f-e]})}return d}function _(a,b){function c(a,c,d){qa(c,function(a){a.direction===d.direction&&(a.options.tickLength=a===d?"full":0)}),b.resize()}function d(a){a.getPlaceholder().bind("axisClick",c)}function e(a){a.getPlaceholder().unbind("axisClick",c)}a.hooks.bindEvents.push(d),a.hooks.shutdown.push(e)}function aa(a,b){function c(a,c,d){d&&a.data.plot&&function(){var b=d.series.yaxis;qa(a.data.plot,function(a){a.direction===b.direction&&(a.options.tickLength=a===b?"full":0)})}(),b.resize()}function d(a){a.getPlaceholder().bind("plotclick",{plot:a},c)}function e(a){a.getPlaceholder().unbind("plotclick",c)}a.hooks.bindEvents.push(d),a.hooks.shutdown.push(e)}function ba(a){var b=Math.abs(a.max-a.min),c=1e-12,d=!1;if(Math.abs(b)<c){var e=(a.max+a.min)/2,f=e<0?-1:1,g=Math.pow(10,Math.floor(Math.log10(Math.max(c,e*f)))),h=Math.max(c/2,.005*g);a.min=e-h,a.max=e+h;var i=Math.ceil(a.max/g),j=Math.floor(a.min/g);a.max=i*g,a.min=j*g,d=!0}return d}function ca(a,b,c){return c===a.map(function(a){return{signalType:a,priority:Ba.get(a)}}).sort(function(a,b){return a.priority-b.priority})[0].signalType?"left":"right"}function da(a,b,c){oa(a,b,c,{xUnit:function(){return"s"},xInvUnit:function(){return"Hz"},sweepName:function(){},data:function(a,b){return a[b.dataIndex]}})}function ea(a){var b=n(a.activeAnalysisSettings.timePerDivision);a.subGraphs.forEach(function(d){d.getOptions().xaxes[0].axisLabel=c(null,h.i18n.translate("%s/div").fetch((a.activeAnalysisSettings.timePerDivision*Math.pow(10,b.siPrefixPow)).toFixed(0)+b.siPrefix+"s")),d.resize()})}function fa(a){a._useQuantifiedZoom=!0;var b=F(a);a.subGraphs.forEach(function(a){a.getOptions().xaxes[0]=f.assign(a.getOptions().xaxes[0],b)}),a.resize()}function ga(a){a._useQuantifiedZoom=!1;var b=K(a.fontFamily);b.axisLabel=c(null,h.i18n.translate("Time (s)").fetch()),a.subGraphs.forEach(function(a){a.getOptions().xaxes[0]=f.assign(a.getOptions().xaxes[0],b)}),a.resize()}function ha(a,b){for(var c=b.DigitalDisplayOffset,d=1-x,e=[],f=0;f<a.length;f++)e.push([a[f][0],a[f][1]*d+c]);return e}function ia(b,f,h){var i=Object.freeze({TS_TRIGGERED:"triggered",TS_AUTO_TRIGGERED:"auto triggered",TS_WAITING:"waiting",TS_NONE:"none",TS_PAUSED:"paused",TS_STOPPED:"stopped"}),j=g();b.lastDataLimit=0;var k=10;b._useQuantifiedZoom=!0;var l=0,m=0,n=0,o=0,q=0,r=.001,s=h.trigger,t=!1,u=null,v=0,x=function(){if(l=0,m=0,n=0,o=0,q=0,r=h.timePerDivision,s=h.trigger,h.trigger.mode===h.triggerModes.TM_STOP){var a=h.trigger;a.mode=h.triggerModes.TM_SINGLE,h.trigger=a}t=!1},B=function(){s.mode===h.trigger.mode&&s.edge===h.trigger.edge&&s.signal===h.trigger.signal&&s.value===h.trigger.value&&r===h.timePerDivision||s.mode===h.triggerModes.TM_SINGLE&&h.trigger.mode!==h.triggerModes.TM_STOP||(l=m,s=h.trigger)},C=function(){j.notifyListeners(i.TS_PAUSED,{}),ga(b)},D=function(){fa(b)},E=function c(){j.notifyListeners(i.TS_STOPPED,{}),a.dataManager.dataUpdateListeners.removeListener(a.dataManager.EDataUpdateEvents.Initialized,x),a.listeners.removeListener(p.PauseSimulation,C),a.listeners.removeListener(p.ResumeSimulation,D),a.listeners.removeListener(p.StopSimulation,c),a.listeners.removeListener(p.SimulationErrored,F),a.listeners.removeListener(p.SimWorkerCrashed,c),h.removeFeedbackChangeListener(B),ga(b)},F=function(a){"fatal"===a.errorType&&E()};a.dataManager.dataUpdateListeners.addListener(a.dataManager.EDataUpdateEvents.Initialized,x),a.listeners.addListener(p.PauseSimulation,C),a.listeners.addListener(p.ResumeSimulation,D),a.listeners.addListener(p.StopSimulation,E),a.listeners.addListener(p.SimulationErrored,F),a.listeners.addListener(p.SimWorkerCrashed,E),h.addFeedbackChangeListener(B);var G=null;b.update=function(c,e){var g=this;u={};var p=[],r=a.dataManager.getLimits(),s=null;isNaN(r.maxx)||isNaN(r.minx)||isNaN(r.maxy)||isNaN(r.miny)||(b._useQuantifiedZoom?function(){var g=!1;if(m=r.maxx,r.maxx>=h.timePerDivision*k&&b.subGraphs.forEach(function(a){for(var c=a.getYAxes(),d=0;d<c.length;d++){var e=c[d];void 0!==e.options.min&&void 0!==e.options.max||z(b)}}),G&&l<r.maxx-h.timePerDivision*k||!G&&l<r.maxx){G&&(clearTimeout(G),G=null),q=void 0!==e&&null!==e?e:Math.max(h.timePerDivision*k,isNaN(r.maxx)?0:r.maxx),q=Math.ceil(q/h.timePerDivision)*h.timePerDivision,o=void 0!==c&&null!==c&&e?c:Math.max(0,q-h.timePerDivision*k);var v=null;if(h.trigger.mode!==h.triggerModes.TM_NONE){if(j.notifyListeners(i.TS_WAITING,{}),v=a.dataManager.getTriggerPoint(l,h.trigger.edge!==h.triggerEdges.TE_FALLING,h.trigger.edge!==h.triggerEdges.TE_RISING,h.trigger.value,h.trigger.signal)){if(o=v,q=o+h.timePerDivision*k,h.trigger.mode!==h.triggerModes.TM_SINGLE&&h.trigger.mode!==h.triggerModes.TM_STOP)l=Math.max(q,isNaN(r.maxx)?0:r.maxx);else if(h.trigger.mode!==h.triggerModes.TM_STOP){m=l;var w=h.trigger;w.mode=h.triggerModes.TM_STOP,h.trigger=w}j.notifyListeners(i.TS_TRIGGERED,{signalColor:xa&&xa.probe&&xa.probe?xa.probe.getColorAsRGBAString():"transparent"})}else if(h.trigger.mode===h.triggerModes.TM_AUTO)v=a.dataManager.getTriggerPoint(l,h.trigger.edge!==h.triggerEdges.TE_FALLING,h.trigger.edge!==h.triggerEdges.TE_RISING,null,h.trigger.signal),v&&(o=v,q=o+h.timePerDivision*k,l=Math.max(q,isNaN(r.maxx)?0:r.maxx)),j.notifyListeners(i.TS_AUTO_TRIGGERED,{signalColor:xa&&xa.probe&&xa.probe?xa.probe.getColorAsRGBAString():"transparent"});else if(h.trigger.mode===h.triggerModes.TM_STOP){var x=h.trigger;x.mode=h.triggerModes.TM_SINGLE,h.trigger=x}v||(l=isNaN(r.maxx)?0:r.maxx,g=h.trigger.mode!==h.triggerModes.TM_AUTO)}else j.notifyListeners(i.TS_NONE,{}),l=isNaN(r.maxx)?0:r.maxx;G=setTimeout(function(){G=null},50)}else g=t,o=n,q=o+h.timePerDivision*k;t=g,n=o,s=a.dataManager.getData(o,q,null,null,u),b.signals.forEach(function(a){if(a.visible){var b=a.probe,c=void 0;c=void 0===b.DigitalDisplayOffset?s[a.dataIndex]:ha(s[a.dataIndex],b);var e={label:a.displayName,data:c,lines:{lineWidth:b.plot.weight,dashStyle:W(b,a.displayName)},color:g?b.getColorAsRGBAString(.3):b.getColorAsRGBAString(),yaxis:a.axis,xUnit:"s",xInvUnit:"Hz",yUnit:d(f,a.variableType)};a.flotSeriesIndex=p.length,p.push(e)}}),b.subGraphs.forEach(function(a){a.getOptions().xaxes[0].zoomRange[0]=null,a.getOptions().xaxes[0].zoomRange[1]=h.maxTimePerDivision*k,a.getOptions().xaxes[0].panRange[1]=h.maxTimePerDivision*k,a.getOptions().xaxes[0].min=o,a.getOptions().xaxes[0].max=q,a.setData(p),a.setupGrid(),a.draw()}),b.lastDataLimit!==r.maxx&&(b.lastDataLimit=r.maxx,b.updateFeedback(r.maxx)),b.drawTitle()}():function(){u={},o=void 0!==c&&null!==c?c:g.subGraphs[0].getXAxes()[0].min,q=void 0!==e&&null!==e?e:g.subGraphs[0].getXAxes()[0].max;var h=!1;(q-o>=b.lastDataLimit||null===q)&&(isNaN(r.maxx)||(q=r.maxx,h=!0)),s=a.dataManager.getData(o,q,null,null,u);var i=1/0;b.signals.length>0&&s.length>0&&s[0].forEach(function(a,b){0!==b&&(i=Math.min(i,a[0]-s[0][b][0]))}),b.signals.forEach(function(a){if(a.visible){var b=a.probe,c=void 0;c=void 0===b.DigitalDisplayOffset?s[a.dataIndex]:ha(s[a.dataIndex],b);var e={label:a.displayName,data:c,lines:{lineWidth:b.plot.weight,dashStyle:W(b,a.displayName)},color:b.getColorAsRGBAString(),yaxis:a.axis,xUnit:"s",xInvUnit:"Hz",yUnit:d(f,a.variableType)};a.flotSeriesIndex=p.length,p.push(e)}}),b.subGraphs.forEach(function(a){a.getOptions().xaxes[0].zoomRange[0]=null!==i&&!isNaN(i)&&isFinite(i)?i*za:null,a.getOptions().xaxes[0].zoomRange[1]=r.maxx,a.getOptions().xaxes[0].panRange[1]=r.maxx,h&&(a.getOptions().xaxes[0].max=r.maxx),a.setData(p),a.setupGrid(),a.draw()}),b.lastDataLimit=r.maxx,b.drawTitle(),z(b)}()),y(b)},b.setSignals=function(d){var g=new Set;d.forEach(function(a,c){ka(a,b,c),f.getProbesForNetlistVariable(a).forEach(function(d){b.signals.push({simulatorName:a,displayName:Aa(d,a),dataIndex:c,probe:d,variableType:f.getTypeOfNetlistVariable(d,a)||null,visible:d.plot.showInGraph,canShow:!0,type:"default"}),g.add(f.getTypeOfNetlistVariable(d,a))})}),b.signalTypes=[f.signalTypes.voltage,f.signalTypes.current,f.signalTypes.expression,f.signalTypes.power,f.signalTypes.digital,null].filter(function(a){return g.has(a)}),A(b);var i=b.signalTypes.map(function(a){var d=void 0;return d=a===f.signalTypes.digital?J(b.fontFamily):K(b.fontFamily),d.labelWidth=50,d.panRange=!1,d.zoomRange=!1,d.alignTicksWithAxis=null,d.axisLabelUseCanvas=w,d.axisLabel=c(f,a),d.position=ca(b.signalTypes,f,a),d.boundary={min:h.minValidY,max:h.maxValidY,minRange:wa},d.signalType=a,d});b.signals.forEach(function(a){a.axis=b.signalTypes.indexOf(a.variableType)+1});var j=b.graphConfig;return j.yaxes=i,j.hooks.processDatapoints=function(c,d){var e=u&&null!==u.maxx?u:a.dataManager.getLimits(),f=b.signals.filter(function(a){return a.axis===d.yaxis.n}),g=f.reduce(function(a,b){return{min:Math.min(a.min,e.serieslimits[b.dataIndex].miny),max:Math.max(a.max,e.serieslimits[b.dataIndex].maxy)}},{min:1/0,max:-1/0});d.yaxis.options.autoscaleMargin=ba(g)?0:.02,d.yaxis.datamin=g.min,d.yaxis.datamax=g.max},e(b,!1),j},b.resize=function(){var c=0;b.subGraphs.forEach(function(a){var d=a.getPlaceholder()[0].parentNode.offsetWidth||10;a.getPlaceholder()[0].style.width=d+"px",a.getPlaceholder()[0].style.height=(a.getPlaceholder()[0].parentNode.offsetHeight||10)+"px",c=Math.max(c,d),b._useQuantifiedZoom&&ea(b),a.resize()}),a.dataManager&&a.dataManager.getDecimationTarget()!==c&&a.dataManager.setDecimationTarget(c),a.setStreamingDisplayWindow(b.subGraphs[0].getOptions().xaxes[0].min,b.subGraphs[0].getOptions().xaxes[0].max,c),b._useQuantifiedZoom?b.update(null,null):b.update(b.subGraphs[0].getOptions().xaxes[0].min,b.subGraphs[0].getOptions().xaxes[0].max)},Object.defineProperty(b,"activeAnalysisSettings",{get:function(){return h}}),Object.defineProperty(b,"simulationController",{get:function(){return a}}),Object.defineProperty(b,"probeController",{get:function(){return f}}),Object.defineProperty(b,"useQuantifiedZoom",{get:function(){return this._useQuantifiedZoom}}),Object.defineProperty(b,"divisions",{get:function(){return k}}),Object.defineProperty(b,"triggerListeners",{get:function(){return j}}),Object.defineProperty(b,"ETriggerStates",{get:function(){return i}}),Object.defineProperty(b,"titleRightMargin",{set:function(a){v=a},get:function(){return v}})}function ja(a,b,c){la(a,b,c,{sweepName:function(){},magnitudeData:function(a,b){return a.magnitude[b.dataIndex]},phaseData:function(a,b){return a.phase[b.dataIndex]}})}function ka(a,b,c){var d=a.indexOf("!dprobe");-1!==d&&function(){var e=a.substring(0,d-1);b.signals.filter(function(a){return a.simulatorName===e&&a.variableType===q.digital}).forEach(function(a){a.dataIndex=c})}()}function la(c,d,e,f){var g=null,i=[],k=null,l=new Map;l.set(j.LINEAR,h.i18n.translate("Linear").fetch()),l.set(j.OCTAVE,h.i18n.translate("Octave").fetch()),l.set(j.LOGARITHMIC,h.i18n.translate("Logarithmic").fetch()),l.set(j.DECIBEL,h.i18n.translate("dB").fetch()),c.update=function(m,n){var o=void 0,p=[],q=null,t=void 0!==m?m:this.subGraphs[0].getOptions().xaxes[0].min,u=void 0!==n?n:this.subGraphs[0].getOptions().xaxes[0].max,v=function(a,b,c){for(var d=0,e=0;e<a.length;e++){var f=a[e];0!==f.length?(d%2?(c.push(f),c.push(null),b.push(null)):b.push(f),d++):(c.push(null),b.push(null))}};a.dataManager.sweepCount<2?(o={magnitude:[],phase:[]},v(a.dataManager.getData(t,u,null,function(a){return Math.log10(Math.max(r,a))}),o.magnitude,o.phase)):o=new Map(a.dataManager.getSweepData(t,u,null,function(a){return Math.log10(Math.max(r,a))}).map(function(a){var b=[],c=[];return v(a.data,b,c),[a.name,{magnitude:b,phase:c}]}));var w=a.dataManager.getLimits(),x=e.grapherMagnitudeScaleType===j.LINEAR,z="";k!==e.grapherMagnitudeScaleType&&(b.clearMessages("zero_mag_warning"),i=[],g=null,k=e.grapherMagnitudeScaleType),c.signals.length&&c.signals.forEach(function(a){if("magnitude"===a.type){var c=a.dataIndex;!x&&(0===w.serieslimits[c].miny||0===w.serieslimits[c].maxy||w.serieslimits[c].miny<0&&w.serieslimits[c].maxy>0||w.serieslimits[c].miny<0&&"positive"===z||w.serieslimits[c].miny>0&&"negative"===z)?(a.canShow=!1,null===g&&(g=new Date),i[a.displayName]||(i[a.displayName]=a.displayName,b.doMessage({type:b.notifications.ETypes.NT_WARNING,subtype:"zero_mag_warning",message:h.i18n.translate("The magnitude %1s can only be displayed using a linear scale and so has been removed from the simulation results.").fetch(a.displayName),toast:!1,group:{name:"simulation_output_scale_incompatible"+g.getTime(),info:{displayName:h.i18n.translate("AC Sweep").fetch(),timestamp:g}}}))):(z||(z=w.serieslimits[a.dataIndex].miny>0?"positive":"negative"),a.canShow=!0)}});var A=c.signals.filter(function(a){return"magnitude"===a.type&&a.canShow&&a.visible}).reduce(function(a,b){return{min:Math.min(a.min,w.serieslimits[b.dataIndex].miny),max:Math.max(a.max,w.serieslimits[b.dataIndex].maxy)}},{min:s,max:r});A.min>A.max&&(A.min=r,A.max=10*A.min);var B=c.subGraphs[0].getOptions().yaxes[0],C="";B=Da.get(e.grapherMagnitudeScaleType).call(this,e,c.fontFamily,B),C=l.get(e.grapherMagnitudeScaleType),B.boundary={min:e.minValidMagnitude,max:e.maxValidMagnitude,minRange:wa},va=e.grapherMagnitudeScaleType;var D=(void 0===B.min||isNaN(B.min))&&(void 0===B.max||isNaN(B.max));B.min=D?A.min:B.min,B.max=D?A.max:B.max,B.axisLabel=h.i18n.translate("Magnitude%1s").fetch(" ("+C+")");var E=new Set;c.signals.forEach(function(a){if("magnitude"===a.type&&a.visible&&a.canShow){var b=a.probe;q={sweepName:f.sweepName(a),label:E.has(a.displayName)?null:a.displayName,data:f.magnitudeData(o,a),lines:{lineWidth:b.plot.weight,dashStyle:W(b,a.displayName)},color:b.getColorAsRGBAString(),xUnit:"Hz",xInvUnit:"s"},e.grapherMagnitudeScaleType===j.DECIBEL&&(q.yUnit="dB"),E.add(a.displayName),a.flotSeriesIndex=p.length,p.push(q)}}),x||(B.autoscaleMargin=0,D&&(B.min=Math.pow(10,Math.floor(Math.log10(Math.max(r,B.min)))),B.max=Math.pow(10,Math.ceil(Math.log10(Math.max(r,B.max))))),B.min===B.max&&(B.min/=10,B.max*=10));var F=new Set;c.signals.forEach(function(a){if("phase"===a.type&&a.visible){var b=a.probe,c=d.getTypeOfNetlistVariable(b,a.simulatorName);q={sweepName:f.sweepName(a),label:F.has(a.displayName)?null:a.displayName,data:f.phaseData(o,a),lines:{lineWidth:b.plot.weight,dashStyle:c===d.signalTypes.current?ya.DOT5DASH:c===d.signalTypes.voltage?ya.DASH5DOT:ya.DASH_DOT},color:b.getColorAsRGBAString(),yaxis:2,xUnit:"Hz",xInvUnit:"s",yUnit:"°"},F.add(a.displayName),a.flotSeriesIndex=p.length,p.push(q)}}),c.subGraphs[0].setData(p),c.subGraphs[0].setupGrid(),c.subGraphs[0].draw(),c.drawTitle(),y(c)},c.setSignals=function(b,e){return b.forEach(function(a,f){ka(a,c,f),d.getProbesForNetlistVariable(a).forEach(function(g){var h=f>0&&b[f-1]===a;c.signals.push({simulatorName:a,displayName:Aa(g,a),dataIndex:h?f-1:f,probe:g,visible:g.plot.showInGraph,canShow:!0,type:h?"phase":"magnitude",sweepName:e,variableType:d.getTypeOfNetlistVariable(g,a)||null})})}),c.graphConfig.hooks.processDatapoints=function(b){var d=a.dataManager.getLimits(),e=c.signals.filter(function(a){return"magnitude"===a.type}).reduce(function(a,b){return{min:Math.min(a.min,d.serieslimits[b.dataIndex].miny),max:Math.max(a.max,d.serieslimits[b.dataIndex].maxy)}},{min:1/0,max:-1/0}),f=c.signals.filter(function(a){return"phase"===a.type}).reduce(function(a,b){return{min:Math.min(a.min,d.serieslimits[b.dataIndex+1].miny),max:Math.max(a.max,d.serieslimits[b.dataIndex+1].maxy)}},{min:1/0,max:-1/0}),g=b.getYAxes()[0],h=b.getYAxes()[1];g.datamin=e.min,g.datamax=e.max,g.type="magnitude",g.options.type=g.type,h.datamin=f.min,h.datamax=f.max,h.type="phase",h.options.type=h.type},c.graphConfig},c.resize=function(){var b=0,d=c.subGraphs[0].getPlaceholder()[0].parentNode.offsetWidth||10;c.subGraphs[0].getPlaceholder()[0].style.width=d+"px",c.subGraphs[0].getPlaceholder()[0].style.height=(c.subGraphs[0].getPlaceholder()[0].parentNode.offsetHeight||10)+"px",b=Math.max(b,d),c.subGraphs[0].resize(),a.dataManager&&a.dataManager.getDecimationTarget()!==b&&a.dataManager.setDecimationTarget(b),c.update(c.subGraphs[0].getOptions().xaxes[0].min,c.subGraphs[0].getOptions().xaxes[0].max)},Object.defineProperty(c,"activeAnalysisSettings",{get:function(){return e}}),Object.defineProperty(c,"simulationController",{get:function(){return a}}),Object.defineProperty(c,"probeController",{get:function(){return d}})}function ma(a,b,c){var d=/^v/.test(c.source1Name)?"V":"A";oa(a,b,c,{xUnit:function(){return d},sweepName:function(a){return a.sweepName},data:function(a,b){return a instanceof Map?a.get(b.sweepName).data[b.dataIndex]:a[b.dataIndex]},xInvUnit:function(){return"("+d+")⁻¹"}})}function na(a,b,c){var d=void 0;c.lastSweptAnalysis!==i.AC?function(){var e=void 0,f=void 0;c.lastSweptAnalysis!==i.DC?(e="s",f="Hz"):(e=c.parameterUnits,f="("+e+")⁻¹"),d={xUnit:function(){return e},xInvUnit:function(){return f},sweepName:function(a){return a.sweepName},data:function(a,b){return a instanceof Map?a.get(b.sweepName).data[b.dataIndex]:a[b.dataIndex]}},oa(a,b,c,d)}():(d={sweepName:function(a){return a.sweepName},magnitudeData:function(a,b){return a instanceof Map?a.get(b.sweepName).magnitude[b.dataIndex]:a.magnitude[b.dataIndex]},phaseData:function(a,b){return a instanceof Map?a.get(b.sweepName).phase[b.dataIndex]:a.phase[b.dataIndex]}},la(a,b,c,d))}function oa(b,f,g,h){b.lastDataLimit=0,b.update=function(c,e){var g=[],i=b.activeAnalysisSettings.minXDisplay=void 0!==c?c:this.subGraphs[0].getOptions().xaxes[0].min,j=b.activeAnalysisSettings.maxXDisplay=void 0!==e?e:this.subGraphs[0].getOptions().xaxes[0].max,k=a.dataManager.sweepCount<2?a.dataManager.getData(i,j):new Map(a.dataManager.getSweepData(i,j).map(function(a){return[a.name,a]})),l=a.dataManager.getLimits(),m=new Set;b.signals.forEach(function(a){if(a.visible&&h.data(k,a).length){var b=a.probe,c=void 0;c=void 0===b.DigitalDisplayOffset?h.data(k,a):ha(h.data(k,a),b);var e={sweepName:h.sweepName(a),label:m.has(a.displayName)?null:a.displayName,data:c,lines:{lineWidth:b.plot.weight,dashStyle:W(b,a.displayName)},color:b.getColorAsRGBAString(),yaxis:a.axis,xUnit:h.xUnit(),xInvUnit:h.xInvUnit?h.xInvUnit():"",yUnit:d(f,a.variableType)};"digital"!==a.variableType||e.label||(e.legendLabel=a.displayName),m.add(a.displayName),a.flotSeriesIndex=g.length,g.push(e)}}),b.subGraphs.forEach(function(a){a.getOptions().xaxes[0].zoomRange[0]=1e-15,a.setData(g),a.setupGrid(),a.draw()}),b.lastDataLimit!==l.maxx&&(b.lastDataLimit=l.maxx,b.updateFeedback(l.maxx)),b.drawTitle(),y(b)},b.setSignals=function(d,h){var i=new Set;d.forEach(function(a,c){ka(a,b,c),f.getProbesForNetlistVariable(a).forEach(function(d){b.signals.push({simulatorName:a,displayName:Aa(d,a),dataIndex:c,probe:d,variableType:f.getTypeOfNetlistVariable(d,a)||null,visible:d.plot.showInGraph,canShow:!0,type:"default",sweepName:h}),i.add(f.getTypeOfNetlistVariable(d,a))})}),b.signalTypes=[f.signalTypes.voltage,f.signalTypes.current,f.signalTypes.expression,f.signalTypes.power,f.signalTypes.digital,null].filter(function(a){return i.has(a)});var j=b.signalTypes.map(function(a){var d=void 0;return d=a===f.signalTypes.digital?J(b.fontFamily):K(b.fontFamily),d.labelWidth=50,d.panRange=!1,d.zoomRange=!1,d.alignTicksWithAxis=null,d.axisLabelUseCanvas=w,d.axisLabel=c(f,a),d.position=ca(b.signalTypes,f,a),d.signalType=a,d.boundary={min:g.minValidY,max:g.maxValidY,minRange:wa},d});b.signals.forEach(function(a){a.axis=b.signalTypes.indexOf(a.variableType)+1});var k=b.graphConfig;return k.yaxes=j,k.hooks.processDatapoints=function(c,d){var e=a.dataManager.getLimits(),f=b.signals.filter(function(a){return a.axis===d.yaxis.n}),g=f.reduce(function(a,b){return{min:Math.min(a.min,isNaN(e.serieslimits[b.dataIndex].miny)?a.min:e.serieslimits[b.dataIndex].miny),max:Math.max(a.max,isNaN(e.serieslimits[b.dataIndex].maxy)?a.max:e.serieslimits[b.dataIndex].maxy)}},{min:1/0,max:-1/0});ba(g),d.yaxis.datamin=g.min,d.yaxis.datamax=g.max},e(b,!1),k},b.resize=function(){var c=0;b.subGraphs.forEach(function(a){var b=a.getPlaceholder()[0].parentNode.offsetWidth||10;a.getPlaceholder()[0].style.width=b+"px",a.getPlaceholder()[0].style.height=(a.getPlaceholder()[0].parentNode.offsetHeight||10)+"px",c=Math.max(c,b),a.resize()}),a.dataManager&&a.dataManager.getDecimationTarget()!==c&&a.dataManager.setDecimationTarget(c),b.update(b.subGraphs[0].getOptions().xaxes[0].min,b.subGraphs[0].getOptions().xaxes[0].max)},Object.defineProperty(b,"activeAnalysisSettings",{get:function(){return g}}),Object.defineProperty(b,"simulationController",{get:function(){return a}}),Object.defineProperty(b,"probeController",{get:function(){return f}})}function pa(b,c,d){var f=a.getSimulationSettings(b),g={signals:[],subGraphs:[],title:"",backgroundColor:null,fontFamily:null,applyRangeToAxes:function(){e(this,!1)},cursorUpdatesHandler:function(){},graphContainer:d},h=0,i=null,j=null;g.setBackgroundColor=function(a){this.backgroundColor=a},g.drawBackground=function(a){this.backgroundColor&&(a.fillStyle=this.backgroundColor,a.fillRect(0,0,a.canvas.width,a.canvas.height))},g.setCursors=function(a){var b=g.subGraphs[0],c=b.getCursors();f.cursorType!==l.DISABLED&&0!==c.length&&f.activeCursors.forEach(function(a){return b.removeCursor(a)}),a!==l.DISABLED&&function(){var c=N(f,a);c.forEach(function(a,d){c[d]=b.addCursor(a)})}()},g.setCursorUpdatesHandler=function(a){this.cursorUpdatesHandler=a},g.drawTitle=function(){var a=function(a,b,c){var d=j;if(h!==c||i!==b){h=c,i=b,d=b;var e=a.measureText(b).width,f="…",g=a.measureText(f).width;if(e>c&&e>g){for(var k=d.length;e>=c-g&&k>0;)d=d.substring(0,k),e=a.measureText(d).width,k--;d+=f}j=d}return d};g.subGraphs.forEach(function(b){var c=b.getCanvas().getBoundingClientRect(),d=b.getCanvas(),e=d.getContext("2d"),f=b.offset().left-c.left;e.fillStyle="#777b80",e.font="20px "+g.fontFamily,e.textAlign="left";var h=f+b.width(),i=c.right-(g.titleRightMargin||0)-c.left;e.fillText(a(e,g.title,Math.min(i,h)-f),f,25)}),g.drawLegend()};var k=document.getElementById("analysisFeedback"),n=window.performance.now();return k instanceof HTMLElement&&(g.fontFamily=window.getComputedStyle(k).fontFamily),g.updateFeedback=function(a){var b=window.performance.now();if(!isNaN(a)&&k&&b-n>20){n=b;var c=m(a,void 0,!1,5);k.innerHTML=c+"s"}},g.drawLegend=function(){g.subGraphs.forEach(function(a){var b=a.getCanvas(),c=b.getContext("2d"),d=b.closest("#graphContainer").querySelector(".legendwrapper");if(d){var e=d.querySelector("table");e&&function(){c.save(),d.style.visibility="hidden";var a=d.querySelector(".sweepinfo"),b=d,f=d,g=f.getBoundingClientRect(),h={left:f.offsetLeft,top:f.offsetTop,width:f.offsetWidth,height:f.offsetHeight};c.fillStyle=window.getComputedStyle(b).backgroundColor,c.fillRect(h.left,h.top,h.width,h.height);var i={x:g.left-h.left,y:g.top-h.top},j=function(a){var b=a.getBoundingClientRect();return{left:b.left-i.x,top:b.top-i.y,right:b.left-i.x+b.width,bottom:b.top-i.y+b.height,width:b.width,height:b.height}};if(a&&"none"!==a.style.display){Array.from(a.querySelectorAll("div")).forEach(function(a){if(a.textContent){var b=Array.from(a.children);b.length||b.push(a),b.forEach(function(a){var b=j(a),d=window.getComputedStyle(a);c.save(),c.textAlign=d.textAlign,c.textBaseline="top",c.font=d.fontStyle+" "+d.fontSize+" "+d.fontFamily,c.fillStyle=d.color,c.globalAlpha=d.opacity,c.fillText(a.textContent,b.left,b.top),c.restore()})}})}for(var k=e.querySelectorAll("tr"),l=0;l<k.length;l++){var m=k[l],n=m.querySelector(".legendLabel");if(n){var o=n.querySelector("div:first-child"),p=o.getAttribute("class"),q=n.querySelector("path"),r=q.getAttribute("stroke"),s=n.querySelector("div > div:last-child"),t=j(s),u=j(n.querySelector("svg")),v=window.getComputedStyle(s);switch(c.save(),c.strokeStyle=r,c.lineWidth=2,p){case ya.SOLID:c.setLineDash([]);break;case ya.DASH:c.setLineDash([5,2]);break;case ya.DOT:c.setLineDash([2]);break;case ya.DASH_DOT:var w=5,x=2;c.setLineDash([w,x,2,x,w]);break;case ya.DASH5DOT:var y=2;c.setLineDash([2,y,20,y]);break;case ya.DOT5DASH:var z=2,A=2;c.setLineDash([5,z,A,z,A,z,A,z])}c.beginPath(),c.moveTo(u.left+1,u.top+10),c.lineTo(u.left+20,u.top+10),c.stroke(),c.textAlign=v.textAlign,c.textBaseline="top",c.font=v.fontSize+" "+v.fontFamily,c.fillStyle=v.color,c.fillText(s.textContent,t.left,t.top),c.restore()}}c.restore()}()}})},Ca.get(b).call(this,g,c,f),ta=f,ua=g,g}function qa(a,b){var c=a.getYAxes();c&&c.forEach(function(a){b(a)})}function ra(){ua=null}function sa(a){w=a}var ta=null,ua=null,va=null,wa=1e-11,xa=null;a.listeners.addListener(p.SimulationSettingsChanged,function(a){ua&&(e(ua,!a||a.changeSource!==ua),ua.activeAnalysisSettings.analysisType===i.Interactive&&A(ua))});var ya=Object.freeze({SOLID:"solid",DASH:"dash",DOT:"dot",DASH_DOT:"dash_dot",DOT5DASH:"dot5dash",DASH5DOT:"dash5dot"}),za=10,Aa=function(b,c){return b&&b.mapSimulationVariableToDisplayName&&b.mapSimulationVariableToDisplayName.has(c)?b.mapSimulationVariableToDisplayName.get(c):a&&a.dataManager?a.dataManager.cleanUpSpiceSignalName(c):c},Ba=new Map([[k.PROBE_VOLTAGE,0],[k.PROBE_CURRENT,1],[k.PROBE_EXPRESSION,2],[k.PROBE_DIGITAL,3]]),Ca=new Map;Ca.set(i.AC,function(a,b,c){a.graphConfig=Y(c,a,{}),ja(a,b,c)}),Ca.set(i.Transient,function(a,b,c){a.graphConfig=T(c,a,{}),da(a,b,c)}),Ca.set(i.Interactive,function(a,b,c){a.graphConfig=X(c,a),ia(a,b,c)}),Ca.set(i.DC_SWEEP,function(a,b,c){a.graphConfig=Z(c,a),ma(a,b,c)}),Ca.set(i.PARAM_SWEEP,function(a,b,c){a.graphConfig=$(c,a),na(a,b,c)});var Da=new Map;return Da.set(j.DECADE,P),Da.set(j.OCTAVE,L),Da.set(j.LINEAR,K),Da.set(j.LIST,K),Da.set(j.DECIBEL,O),Da.set(j.LOGARITHMIC,P),{createGraphObjectForAnalysis:pa,resetGrapherObject:ra,setCanvasModeLabels:sa}}var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;return a("default",e),{setters:[function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.formatSimulationNumber,n=a.findBestSIUnitPrefix,o=a.convertToDB},function(a){p=a.default},function(a){q=a.default}],execute:function(){r=1e-16,s=1e12,t=Object.freeze({SLT_SWEEPTEXT:"sweeptext",SLT_SWEEPPARAMETER:"sweepparameter",SLT_SWEEPSTART:"sweepstart",SLT_SWEEPSTOP:"sweepstop"}),u='<div class="$style"><div class="msLegendColorBox"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="M 1 10 L 20 10" stroke="$color" fill="none"/></svg></div><div>$type($label)<div></div>',v='<div class="grapher-object sweepinfo"><div class="grapher-object '+t.SLT_SWEEPTEXT+'"></div><div class="grapher-object '+t.SLT_SWEEPPARAMETER+'"></div><div class="grapher-object '+t.SLT_SWEEPSTART+'"></div><div class="grapher-object '+t.SLT_SWEEPSTOP+'"></div></div><div class="grapher-object legendcontainer"></div>',w=!0,a("marginBetweenDigitalSignals",x=.3),a("marginBetweenDigitalSignals",x)}}}),a.register("e4",["da","db","dc","dd","de","df","e0","e1","8f","21","3b","96","16","e2","e3"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.default},function(a){e=a.findBestSIUnitPrefix,f=a.formatSimulationNumber},function(a){g=a.default},function(a){h=a.distancePointToPointSquared,i=a.distanceToLineSegmentSquared,j=a.getProjectedPointOnLineSegment},function(a){},function(a){k=a.marginBetweenDigitalSignals}],execute:function(){!function(a){var b=function(b,g,l,m,n){function o(){return b.getCursors().some(function(a){return a.highlighted})}function p(){document.getElementById("tooltip")&&n.classList.remove("tooltip")}function q(a){var b=a.axis.p2c(a.axis.options.boundary.min)-a.axis.p2c(a.axis.options.boundary.max),c=a.axis.options.boundary,d=a.axis.p2c(c.max),e=a.axis.p2c(c.min),f={min:a.axis.options.min,max:a.axis.options.max},g=a.axis.p2c(f.max),h=a.axis.p2c(f.min);if(a.axis.options.max-a.axis.options.min<c.minRange){var i=(c.minRange-(a.axis.options.max-a.axis.options.min))/2;f.max+=i,f.min-=i,f.min<a.axis.options.boundary.min&&(f.min=a.axis.options.boundary.min,f.max=f.min+c.minRange),f.max>a.axis.options.boundary.max&&(f.max=a.axis.options.boundary.max,f.min=f.max-c.minRange),g=a.axis.p2c(f.max),h=a.axis.p2c(f.min)}if(h-g>b){var j=(h-g-b)/2;g+=j,h-=j,f.max=a.axis.c2p(g),f.min=a.axis.c2p(h)}if(g<d){var k=d-g;g+=k,h+=k,f.max=c.max,f.min=a.axis.c2p(h)}if(h>e){var l=h-e;g-=l,h-=l,f.max=a.axis.c2p(g),f.min=c.min}f.max>a.axis.options.boundary.max?(a.axis.options.max=Math.min(f.max,a.axis.options.boundary.max),a.axis.options.min>a.axis.options.max-c.minRange&&(a.axis.options.min=a.axis.options.max-c.minRange)):a.axis.options.max=f.max,f.min<a.axis.options.boundary.min?(a.axis.options.min=Math.max(f.min,a.axis.options.boundary.min),a.axis.options.max<a.axis.options.min+c.minRange&&(a.axis.options.max=a.axis.options.min+c.minRange)):a.axis.options.min=f.min}function r(a,c){p(),b.unhighlight();var d=void 0===a.axis.max?a.axis.options.max:a.axis.max,e=void 0===a.axis.min?a.axis.options.min:a.axis.min;a.axis.options.max=a.axis.c2p(a.axis.p2c(d)+c),a.axis.options.min=a.axis.c2p(a.axis.p2c(e)+c),q(a),D(b),C(b)}function s(a,c){p(),b.unhighlight();var d=void 0===a.axis.max?a.axis.options.max:a.axis.max,e=void 0===a.axis.min?a.axis.options.min:a.axis.min,f=(a.axis.p2c(d)-a.centerPoint)/c+a.centerPoint,g=(a.axis.p2c(e)-a.centerPoint)/c+a.centerPoint;a.axis.options.max=a.axis.c2p(f),a.axis.options.min=a.axis.c2p(g),q(a),D(b),C(b)}function t(a,c){p(),b.unhighlight();var d=l.getBoundingClientRect(),e={amount:c,center:{left:a.x-d.left,top:a.y-d.top}};b.zoom(e)}function u(a){p(),b.unhighlight();var c=w(a.center);if(!U()||a.scale/T<1/1.5||a.scale/T>1.5){var d=1+(a.scale-T)/T;c&&"y"===c.axis.direction?s(c,d):t(a.center,d),T=a.scale}}function v(a){T=1,u(a)}function w(a){var c=g.getBoundingClientRect(),d=null,e=void 0,f=void 0,h=void 0,i=b.getYAxes().concat(b.getXAxes());for(e=0;e<i.length;e++)if(f=i[e],h={left:f.box.left,top:f.box.top,width:f.box.width,height:f.box.height},h.left+=c.left,h.top+=c.top,a.x>=h.left&&a.x<=h.left+h.width&&a.y>=h.top&&a.y<=h.top+h.height){d={axis:f,centerPoint:"y"===f.direction?a.y-b.offset().top:a.x-b.offset().left};break}return d}function x(a){p(),b.unhighlight();var c={x:a.clientX,y:a.clientY},d=w(c);if(d&&"y"===d.axis.direction){var e=b.getOptions().zoom.frameRate;if(e){var f=window.performance.now(),g=function(){Y=window.performance.now(),s(d,a.deltaY<0?1.5:1/1.5),X&&(clearTimeout(X),X=null)};!window.isFinite(e)||f-Y>1e3/e?g():(X&&clearTimeout(X),X=setTimeout(g,1200/e))}a.preventDefault(),a.stopImmediatePropagation()}else d&&"x"===d.axis.direction&&t(c,a.deltaY<0?1.5:1/1.5)}function y(a){Z=0,$=0,(_=w(a.center))||z(a)}function z(a){p(),b.unhighlight(),_&&"y"===_.axis.direction?r(_,$-a.deltaY):b.pan({left:Z-a.deltaX,top:$-a.deltaY}),Z=a.deltaX,$=a.deltaY}function A(a,b){var c=window.performance.now(),d=m.activeAnalysisSettings;if(U()){if(c-aa>100){aa=c;var e=b.getAxes(),f=d.timePerDivision;(e.xaxis.max-e.xaxis.min)/m.divisions<d.timePerDivision?d.setNextLowerTimePerDivision():(e.xaxis.max-e.xaxis.min)/m.divisions>d.timePerDivision&&d.setNextHigherTimePerDivision(),f!==d.timePerDivision&&(n.first=!0,b.resize(),m.update(null,null))}}else D(b),C(b);m.simulationController.setStreamingDisplayWindow(m.subGraphs[0].getOptions().xaxes[0].min,m.subGraphs[0].getOptions().xaxes[0].max,m.subGraphs[0].getPlaceholder()[0].parentNode.offsetWidth||10)}function B(a,b){U(),D(b),C(b)}function C(a){var b=m.activeAnalysisSettings;b.minXDisplay=void 0!==a.getXAxes()[0].min?ba(a.getXAxes()[0].min):void 0,b.maxXDisplay=void 0!==a.getXAxes()[0].max?ba(a.getXAxes()[0].max):void 0,m.activeAnalysisSettings.analysisType===d.AC||m.activeAnalysisSettings.analysisType===d.PARAM_SWEEP&&m.activeAnalysisSettings.selectedAnalysisType===d.AC?a.getYAxes().forEach(function(a){"phase"===a.type?(m.activeAnalysisSettings.minPhaseDisplay=void 0!==a.options.min?ba(a.options.min):void 0,m.activeAnalysisSettings.maxPhaseDisplay=void 0!==a.options.max?ba(a.options.max):void 0):(m.activeAnalysisSettings.minMagnitudeDisplay=void 0!==a.options.min?ba(a.options.min):void 0,m.activeAnalysisSettings.maxMagnitudeDisplay=void 0!==a.options.max?ba(a.options.max):void 0)}):a.getYAxes().forEach(function(a){m.probeController.getRangesForType(a.options.signalType).forEach(function(b){b[m.activeAnalysisSettings.analysisType].minYDisplay=void 0!==a.options.min?ba(a.options.min):void 0,b[m.activeAnalysisSettings.analysisType].maxYDisplay=void 0!==a.options.max?ba(a.options.max):void 0})}),m.simulationController.notifySimulationSettingsUpdated(m),n.first=!0}function D(a){a.resize(),m.update(a.getXAxes()[0].min,a.getXAxes()[0].max)}function E(c,d){var e=document.getElementById("tooltip"),g=5,h=e.parentNode.getBoundingClientRect(),i=b.getPlotOffset(),j=d.pageX-h.left,l=d.pageY-h.top,m=0,o="",p=void 0;if(d&&d.series&&d.series.yaxis&&d.series.yaxis.options&&"digital"===d.series.yaxis.options.signalType){var q=(d.datapoint[1]-Math.floor(d.datapoint[1]))/(1-k);d.series.label?o=d.series.label.split(":")[0]+" ":d.series.legendLabel&&(o=d.series.legendLabel.split(":")[0]+" "),m=""+(q<.01?"0":q>.99?"1":q.toFixed(2)),p=""}else p=d.series.yUnit?d.series.yUnit:"",m=f("dB"==d.series.yUnit?20*Math.log10(d.datapoint[1]):d.datapoint[1],void 0,void 0,5,!0,!0,!0);var r=f(d.datapoint[0],void 0,void 0,5,!0,!0,!0),s=d.series.sweepName?"<b>"+d.series.sweepName+"</b><br>":"";a(e).html(""+s+o+"("+(r+(d.series.xUnit?d.series.xUnit:""))+", "+(m+p)+")"),n.classList.add("tooltip");var t=a(e).width(),u=a(e).height();j+t>h.width?j-=t+g:j+=g,l+u>h.height-i.bottom?l-=u+g:l+=g,a(e).css({top:l,left:j})}function F(a,c,d){for(var e=a.getData(),f=b.getOptions().grid.mouseActiveRadius,g=f*f+1,k=null,l=e.length-1;l>=0;--l){var m=e[l],n=m.xaxis,o=m.yaxis,p=m.datapoints.points,q=n.c2p(c),r=o.c2p(d),s=n.options.inverseTransform?Number.MAX_VALUE:f/n.scale,t=o.options.inverseTransform?Number.MAX_VALUE:f/o.scale,u=m.datapoints.pointsize;if(m.lines.show&&p.length>=2*u)for(var v=0;v<p.length-u;v+=u){var w=p[v],x=p[v+1],y=p[v+u],z=p[v+u+1];if(null!==w&&null!==y){var A=Math.min(w,y),B=Math.min(x,z),C=Math.max(w,y),D=Math.max(x,z);if(q<=C+s&&q>=A-s&&r<=D+t&&r>=B-t){var E=i({x:n.p2c(w),y:o.p2c(x)},{x:n.p2c(y),y:o.p2c(z)},{x:c,y:d});if(E<g){g=E;var F=j({x:n.p2c(w),y:o.p2c(x)},{x:n.p2c(y),y:o.p2c(z)},{x:c,y:d});k=[l,(h({x:n.p2c(w),y:o.p2c(x)},F)<h({x:n.p2c(y),y:o.p2c(z)},F)?v:v+u)/u]}}}}}var G=null;if(k){var H=k[0],I=k[1],J=e[H].datapoints.pointsize;G={datapoint:e[H].datapoints.points.slice(I*J,(I+1)*J),dataIndex:I,series:e[H],seriesIndex:H}}return G}function G(a,b,c,d){if(!d){var e=a.getPlaceholder().offset();d=F(a,c.pageX-e.left-a.getPlotOffset().left,c.pageY-e.top-a.getPlotOffset().top),d&&(d.pageX=parseInt(d.series.xaxis.p2c(d.datapoint[0])+e.left+a.getPlotOffset().left,10),d.pageY=parseInt(d.series.yaxis.p2c(d.datapoint[1])+e.top+a.getPlotOffset().top,10),a.highlight(d.series,d.datapoint,b.type))}return d}function H(a,c,d){d=G(b,a,c,d),ca||(d&&V&&!o()?E(c,d):(n.classList.remove("tooltip"),b.unhighlight()))}function I(a,c,d){n.classList.remove("tooltip"),b.unhighlight(),d=G(b,a,c,null),d?(ca=!0,b.getOptions().grid.hoverable=!1):(ca=!1,b.getOptions().grid.hoverable=!0),d&&!o()&&ca&&E(c,d)}function J(a){var c=b.getPlotOffset(),d=b.getPlaceholder(),e=d[0].getBoundingClientRect();!ca&&(a.clientX<e.left+c.left||a.clientX>e.right-c.right||a.clientY<e.top+c.top||a.clientY>e.bottom-c.bottom)?p():V=!0}function K(a){a.touches&&a.touches.length&&J(a.touches[0])}function L(){V=!0}function M(){ca||(V=!1,p())}function N(){setTimeout(function(){b.getOptions().grid.autoHighlight=!0,b.getOptions().grid.hoverable=!0,b.getOptions().grid.clickable=!0,b.getOptions().pan.frameRate=1/0,W.on("panstart",y),W.on("pan",z),W.on("panend",z),a(g).on("plotpan",B)},0),document.removeEventListener("mouseup",N),document.removeEventListener("touchstart",N)}function O(){p(),b.unhighlight(),b.getOptions().grid.hoverable=!1,b.getOptions().grid.clickable=!1,b.getOptions().grid.autoHighlight=!1,b.getOptions().pan.frameRate=null,W.stop(),W.off("panstart",y),W.off("pan",z),W.off("panend",z),a(g).off("plotpan",B),document.addEventListener("mouseup",N),document.addEventListener("touchstart",N)}if(b.getOptions().legend.container){var P=b.getPlotOffset(),Q=b.getOptions().legend.container.closest(".legendwrapper"),R=b.getOptions().legend.margin;R[0]||(R=[R,R]);var S=b.getOptions().legend.position;"n"===S.charAt(0)?Q.style.top=R[1]+P.top+"px":"s"===S.charAt(0)&&(Q.style.bottom=R[1]+P.bottom+"px"),"e"===S.charAt(1)?Q.style.right=R[0]+P.right+"px":"w"===S.charAt(1)&&(Q.style.left=R[0]+P.left+"px"),Q.parentElement.appendChild(Q)}var T=void 0,U=function(){return m.useQuantifiedZoom||!1},V=!1,W=new c(g,{recognizers:[[c.Pan,{direction:c.DIRECTION_ALL}],[c.Pinch,{enable:!0},["pan"]]]});W.id="grapher-object",W.on("pinchstart",v),W.on("pinch",u),W.on("pinchend",u);var X=null,Y=window.performance.now();g.addEventListener("wheel",x);var Z=void 0,$=void 0,_=null;W.on("panstart",y),W.on("pan",z),W.on("panend",z);var aa=window.performance.now(),ba=function(a){var b=e(a),c=Math.min(6,Math.max(3,1+Math.ceil(Math.log10(Math.abs(b.modifiedValue)))+Math.max(0,-b.siPrefixPow)));return f(a,void 0,!0,c,!0,!1)},ca=!1;a(g).bind("plotzoom",A),a(g).bind("plotpan",B),a(g).bind("plothover",H),a(g).bind("plotclick",I),a(g).bind("cursorSelected",O),a(g).bind("cursorupdates",m.cursorUpdatesHandler),g.addEventListener("mouseenter",L),g.addEventListener("mouseleave",M),g.addEventListener("mousemove",J),g.addEventListener("touchstart",K),b.hooks.shutdown.push(function(){p(),W.off("pinchstart",v),W.off("pinch",u),W.off("pinchend",u),W.off("panstart",y),W.off("pan",z),W.off("panend",z),a(g).unbind("plotzoom",A),a(g).unbind("plotpan",B),a(g).unbind("plothover",H),a(g).unbind("plotclick",I),a(g).unbind("cursorupdates",m.cursorUpdatesHandler),a(g).unbind("cursorSelected",O),document.removeEventListener("mouseup",N),document.removeEventListener("touchstart",N),g.removeEventListener("mouseenter",L),g.removeEventListener("mouseleave",M),g.removeEventListener("mousemove",J),g.removeEventListener("touchstart",K),g.removeEventListener("wheel",x)})},l=function(c,d,e,f,g){var h=document.createElement("div");h.style.height=e,h.style.width="100%",h.classList.add("graphdiv"),c.appendChild(h),window.multisim.tryCatchAll(function(){var e=a.plot(h,[],f);d.subGraphs.push(e),b(e,h,c,d,g)},this)},m=function(b){b.getPlaceholder().children(".axisTarget").remove(),a.each(b.getAxes(),function(c,d){if(d.show){var e=d.box;a("<div class='axisTarget axisDirection"+d.direction+"' style='position:absolute; left:"+e.left+"px; top:"+e.top+"px; width:"+e.width+"px; height:"+e.height+"px'></div>").appendTo(b.getPlaceholder()).on("click touchstart",function(){a(this).trigger("axisClick",[b,d])})}})};window.Polymer({is:"grapher-object",properties:{graphController:{type:Object,value:null},graphers:{type:Array,value:function(){return[]}},analysisSettings:{type:Object,value:null},title:{type:String,value:"",observer:"_titleChanged"},first:{type:Boolean,value:!1}},attached:function(){},initControl:function(a,b,c){this.$.triggerminiproperties.initialize(a,b,c)},_titleChanged:function(){this.graphers.forEach(function(a){a.title=this.title,a.resize()},this)},destroyGraphs:function(){var a=this.$$(".container"),b=this;if(b.graphers.length>0){g.removeResizeListener(a),b.graphers.forEach(function(a){b.$.triggerminiproperties.detachTriggerListeners(a),a.subGraphs.forEach(function(a){a.destroy()})});for(var c=a.firstChild;c;)a.removeChild(c),c=a.firstChild;b.graphers=[],b.graphController.resetGrapherObject()}},initializeGraphs:function(a,b,c){var e=this;e.graphController=c;var f=function(){e.graphers.forEach(function(a){a.resize(),a.subGraphs.forEach(function(a){m(a)})})},h=e.$$(".container");e.destroyGraphs();var i=b?b():null;e.createGraph(h,a,i),g.addResizeListener(h,f),a===d.Interactive?(e.$.triggerminiproperties.removeAttribute("hidden"),e.graphers.forEach(function(a){e.$.triggerminiproperties.attachTriggerListeners(a),a.titleRightMargin=e.$.triggerminiproperties.offsetWidth})):(e.$.triggerminiproperties.setAttribute("hidden",""),e.graphers.forEach(function(a){a.titleRightMargin=0}))},createGraph:function(a,b,c){var d=this,e=d.graphController.createGraphObjectForAnalysis(b,c.probeController,a);if(Array.isArray(e.graphConfig)){e.graphConfig.forEach(function(b,c,f){l(a,e,100/f.length+"%",b,d)});for(var f=a.querySelectorAll(".graphDiv .legendLabel"),g=0;g<f.length;g++)f[g].style.width=f[g].offsetWidth+"px"}else l(a,e,"100%",e.graphConfig,d);d.analysisSettings=c.simulationController.getSimulationSettings(b),d.graphers.push(e),d._titleChanged()},initializeNames:function(c,d){var e=this;e.graphers.forEach(function(f){var g=c.map(function(a){return a.signalName}),h=f.setSignals(g,d);f.subGraphs.forEach(function(c,d){f.subGraphs[d]=a.plot(c.getCanvas().parentElement,[],h),b(f.subGraphs[d],c.getCanvas().parentElement,c.getCanvas().parentElement.parentElement,f,e)}),f.applyRangeToAxes()}),e._titleChanged(),e.first=!0},updateDisplay:function(a){var b=this;this.graphers.forEach(function(c){c.update(),(b.first||a)&&c.subGraphs.forEach(function(a){m(a)})}),(this.first||a)&&(this._titleChanged(),this.first=!1)},isSignalInGraph:function(a,b,c){var d=[];return this.graphers.forEach(function(e){d=d.concat(e.signals.filter(function(d){return d.simulatorName===a&&d.probe.probeID===b&&d.type===c&&d.canShow}))}),d.length>0},isSignalVisible:function(a,b,c){var d=[];return this.graphers.forEach(function(e){d=d.concat(e.signals.filter(function(d){return d.simulatorName===a&&d.probe.probeID===b&&d.type===c}))}),!!d.length&&d[0].visible},setSignalVisibility:function(a,b,c,d,e){var f=this;this.graphers.forEach(function(e){e.signals.forEach(function(e){e.simulatorName===a&&e.probe.probeID===b&&e.type===c&&(e.visible=d)})}),this.updateDisplay(!0),this.graphers.forEach(function(a){a.subGraphs.forEach(function(a){return a.getCursors().forEach(function(a,b){a.signal&&f.setCursorSignal(a,a.signal.signalName,a.signal.probe,e[b])})})})},setCursorType:function(a){this.graphers.forEach(function(b){return b.setCursors(a)})},setCursorUpdatesHandler:function(a){this.graphers.forEach(function(b){return b.setCursorUpdatesHandler(a)})},setCursorSignal:function(a,b,c,e){var f=this.analysisSettings.cursorSweeps&&this.analysisSettings.numSweeps>1;this.graphers.forEach(function(g){a.showIntersections=[];var h={magnitude:[],phase:[],default:[]};g.signals.forEach(function(d){d.simulatorName===b&&d.probe.templateGUID===c&&(d.visible&&(a.showIntersections.push(d.flotSeriesIndex),h[d.type].push(d.flotSeriesIndex)),a.intersectionColor=a.color=d.probe.getColorAsRGBAString())}),a.snapToPlot=a.showIntersections[0],f&&(g.activeAnalysisSettings.analysisType===d.PARAM_SWEEP&&g.activeAnalysisSettings.lastSweptAnalysis===d.AC?(a.snapToPlot=h.magnitude.length?h.magnitude[e]:h.phase[e],a.showIntersections=[].concat(h.magnitude.length?h.magnitude[e]:[],h.phase.length?h.phase[e]:[])):(a.snapToPlot=a.showIntersections[e],a.showIntersections=[a.showIntersections[e]])),g.subGraphs.forEach(function(a){return a.triggerRedrawOverlay()})})},getYAxisAutoscaleValues:function(a,b){var c=[],d=void 0,e=void 0;return this.graphers.forEach(function(f){d={},e=f.subGraphs[0].getXAxes()[0],d=a.getLimits(e.min,e.max);var g=f.signals.filter(function(a){return a.visible&&a.variableType===b});c[f.title]=g.reduce(function(a,b){return{min:Math.min(a.min,d.serieslimits[b.dataIndex-1].miny),max:Math.max(a.max,d.serieslimits[b.dataIndex-1].maxy)}},{min:1/0,max:-1/0})}),c},screenShot:function(a,b){var c=this.$$(".graphdiv"),d=null;if(c){var e=null;b&&(e={x:c.offsetWidth,y:c.offsetHeight},c.parentNode.style.width=b.x+"px",c.parentNode.style.height=b.y+"px",c.style.width=b.x+"px",c.style.height=b.y+"px",this.graphers.forEach(function(a){a.setBackgroundColor(b.background&&"transparent"!==b.background?b.background:null)}),this.updateDisplay(!0));var f=this.$$("canvas.flot-base");d=f?a.createPNGFromCanvas(f,"application/octet-stream"):null,e&&(c.parentNode.style.width=null,c.parentNode.style.height=null,c.style.width=e.x+"px",c.style.height=e.y+"px",this.graphers.forEach(function(a){a.setBackgroundColor(null)}),this.updateDisplay(!0))}return d}})}(window.jQuery)}}}),a.register("e5",[],function(){return{setters:[],execute:function(){}}}),a.register("e6",[],function(){return{setters:[],execute:function(){}}}),a.register("e7",[],function(){return{setters:[],execute:function(){}}}),a.register("e8",["a7","12","e7"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){c=a.domSanitize},function(a){}],execute:function(){!function(){window.Polymer({is:"multiline-ellipsis",properties:{html:{type:String,value:"",observer:"_htmlChanged"},height:{type:String,value:"38px",observer:"_htmlChanged"}},_htmlChanged:function(){var a=this.$.sizetest,b=this.$.realitem;a.innerHTML=c(this.html),b.innerHTML=c(this.html),b.style.height=this.height,""!==b.style.height&&(a.style.maxHeight=Number(b.style.height.replace(/(.*?)(\%|(px))/gi,"$1"))+1+b.style.height.replace(/(.*?)(\%|(px))/gi,"$2")),setTimeout(function(){a.clientHeight>b.clientHeight&&""!==b.style.height&&function(){var c=a.textContent+"…",d=[];d.push(0);for(var e=0;e<c.length;e++)" "===c[e]&&d.push(e);var f=d.length;!function e(){c.length>1&&(f>1?(f-=1,c=c.substring(0,d[f])+"…"):c=c.substring(0,c.length-2)+"…",a.textContent=c,setTimeout(function(){a.clientHeight>b.clientHeight?e():b.textContent=a.textContent},1))}()}()},1)}})}()}}}),a.register("e9",[],function(){return{setters:[],execute:function(){}}}),a.register("ea",["a7","e9","eb","29"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){},function(a){c=a.default}],execute:function(){window.Polymer({is:"search-result-details",properties:{componentData:{reflectToAttribute:!1,type:Object,value:null,notify:!0,observer:"_componentDataChanged"},componentDetails:{reflectToAttribute:!0,type:Array,value:[],notify:!0},hasManufacturer:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0},manufacturerLabel:{type:String},partNumberLabel:{type:String},packageNameLabel:{type:String},modelsLabel:{type:String}},_componentDataChanged:function(){var a=this;this.componentDetails=[],this.componentData&&function(){var b=a.componentData.componentBlueprints[0],c=new Map;b.packageConfigurations.forEach(function(b){c.has(b.manufacturer)||c.set(b.manufacturer,{manufacturer:"",partNumbers:[],models:[]}),c.get(b.manufacturer).partNumbers.push({manufacturer:b.manufacturer,partNumber:b.partNumber,packageName:a.componentData.packageBlueprints.find(function(a){return a.id===b.manufacturerPackageRef}).name})}),a.componentData.simModelBlueprints.forEach(function(a){c.forEach(function(b,c){""!==a.manufacturer&&a.manufacturer!==c||b.models.push(a.name)})}),c.forEach(function(b,c){a.push("componentDetails",{manufacturer:c,partNumbers:b.partNumbers,models:b.models.join(", ")})}),a.componentDetails.length>0?a.hasManufacturer=!0:a.push("componentDetails",{manufacturer:"",partNumbers:[],models:a.componentData.simModelBlueprints.map(function(a){return a.name}).join(", ")}),a.fire("populated")}()},attached:function(){var a=this;c.addReadyListener(function(){a.manufacturerLabel=c.i18n.translate("Manufacturer: ").fetch(),a.modelsLabel=c.i18n.translate("Model(s): ").fetch(),a.partNumberLabel=c.i18n.translate("Part Number").fetch(),a.packageNameLabel=c.i18n.translate("Package").fetch()})}})}}}),a.register("ec",["a7","ed","e6","ee","e8","ea","29"],function(a,b){"use strict";var c,d;return{setters:[function(a){},function(a){c=a.SearchResultEvent},function(a){},function(a){},function(a){},function(a){},function(a){d=a.default}],execute:function(){window.Polymer({is:"search-result",properties:{item:{reflectToAttribute:!0,type:Object,value:null,notify:!0,observer:"_valueChanged"},detailsLoading:{reflectToAttribute:!1,type:Boolean,value:!0,notify:!0},detailsLoadingString:{type:String}},_valueChanged:function(){var a=this;a.item&&(a.item.addEventListener(c.symbolChanged,function(){a.item.symbolSvg&&a.updateSymbol()}),a.item.addEventListener(c.componentDataChanged,function(){a.$.searchResultDetails.componentData=a.item.componentData,a.detailsLoading=!1}),a.item.symbolSvg&&a.updateSymbol())},updateSymbol:function(){var a=this.item.symbolSvg.cloneNode(!0);a.setAttribute("width","100%"),a.setAttribute("height","100%");var b=a.getAttribute("viewBox").split(" "),c=Math.max(b[2],b[3]),d=30,e=1,f=Math.max(e,c*e/d);a.querySelector("g").style.strokeWidth=f,this.$.iconContainer.innerHTML=a.outerHTML},attached:function(){var a=this,b=this;b.$.iconContainer.addEventListener("click",function(a){a.stopPropagation(),a.preventDefault()});var c=function(a){a.detail.opened?(b.item.componentData||(b.detailsLoading=!0,b.item.loadComponentDetails()),b.$.shortDescriptionTextContainer.style.display="none"):b.$.shortDescriptionTextContainer.style.display=""},e=function(){b.$.drawer.opened&&setTimeout(function(){b.$.drawer._scrollIntoView(!1)},1)};b.$.drawer.addEventListener("opened",c),b.$.searchResultDetails.addEventListener("populated",e),d.addReadyListener(function(){a.detailsLoadingString=d.i18n.translate("Loading data...").fetch()})}})}}}),a.register("ef",["1b","a7","8f","e5","ec","eb","ee","29"],function(a,b){"use strict";var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){},function(a){d=a.default},function(a){},function(a){},function(a){},function(a){},function(a){e=a.default}],execute:function(){a("SearchWarningStatus",f=Object.freeze({None:0,TOO_SHORT:1,FREE:2,SEARCH_ERROR:3,SCROLL_ERROR:4})),a("SearchWarningStatus",f),g=2,h=function(a){var b={anyShort:!1,allShort:!0},c=a.split(/\s+/),d=!0,e=!1,f=void 0;try{for(var h,i=c[Symbol.iterator]();!(d=(h=i.next()).done);d=!0){h.value.length<g?b.anyShort=!0:b.allShort=!1}}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return b},window.Polymer({is:"control-search",properties:{searchFunction:{reflectToAttribute:!1,type:Function,value:null},scrollFunction:{reflectToAttribute:!1,type:Function,value:null},placeResultFunction:{reflectToAttribute:!1,type:Function,value:null},dragResultFunction:{reflectToAttribute:!1,type:Function,value:null},displayArea:{reflectToAttribute:!1,type:Object,value:{left:0,top:0,right:100,bottom:100},observer:"_displayAreaChanged"},searchResults:{reflectToAttribute:!1,type:Array,value:null},totalResults:{reflectToAttribute:!1,type:Number,value:-1,observer:"_totalResultsChanged"},searchStatus:{reflectToAttribute:!1,type:Number,value:0,observer:"_handleStateChanged"},stringSearchWarning:String,stringShowMore:String,stringNumberOfResults:String,lastSearchText:String,searchTimer:Number,touchMode:Boolean},observers:["_displayedResultsChanged(searchResults.splices)"],_handleStateChanged:function(){switch(this.searchStatus){case f.TOO_SHORT:this.stringSearchWarning=e.i18n.translate("Search terms must contain at least %s characters.").fetch(g);break;case f.FREE:this.stringSearchWarning=e.i18n.translate('<a href="/saml2/login/" target="blank">Log in</a> to a premium account for advanced search. <a href="http://digital.ni.com/express.nsf/bycode/exwxnx" target="_blank">Don\'t have one?</a>').fetch();break;case f.SEARCH_ERROR:this.stringSearchWarning=e.i18n.translate("Search service unavailable. Offline search used.").fetch();break;case f.SCROLL_ERROR:this.stringSearchWarning=e.i18n.translate("Search service unavailable. Try again later.").fetch();break;default:this.stringSearchWarning=null}},_displayAreaChanged:function(){this.putInValidPosition()},_displayedResultsChanged:function(){this.searchResults?(this.$.resultcontainer.style.display="block",0!=this.totalResults&&this.searchResults.length<this.totalResults?this.$.nextPage.style.display="block":this.$.nextPage.style.display="none"):this.$.resultcontainer.style.display="none",this.putInValidPosition()},_totalResultsChanged:function(){e.i18n&&(this.stringNumberOfResults=e.i18n.translate("%d result").ifPlural(this.totalResults,"%d results").fetch(this.totalResults))},performSearch:function(a){var b=this;if(a=a.trim(),b.lastSearchText!==a){if(b.lastSearchText=a,b.searchResults=null,b.totalResults=0,b.searchStatus=f.None,b.searchFunction&&a.length>0){var c=h(a);c.anyShort&&(b.searchStatus=f.TOO_SHORT),c.allShort?b.searchResults=[]:(b.$.searchingIndicator.style.display="block",b.searchFunction(a,function(a){a&&a.total>0?(b.totalResults=a.total,b.searchResults=a.hits):b.searchResults=[],b.$.searchingIndicator.style.display="none"}))}b.searchTimer=null}},nextPage:function(){var a=this;a.scrollFunction&&a.searchResults.length<a.totalResults&&(a.$.pagingIndicator.style.display="block",a.scrollFunction(function(b){a.push.apply(a,["searchResults"].concat(c(b.hits))),a.$.pagingIndicator.style.display="none"}))},putInValidPosition:function(){if(this.displayArea){var a=this.$.resultcontainer.getBoundingClientRect(),b=this.displayArea.bottom-a.top;this.$.resultcontainer.style.height="auto",this.$.resultcontainer.style.maxHeight=b-36+"px"}},attached:function(){var a=this,b=null,c=null,e=!0;this.addEventListener("touchmove",function(a){a.preventDefault()}),new d(a.$.nextPage,{recognizers:[[d.Tap]]}).on("tap",function(){a.nextPage()}),new d(a.$["control-search-div"],{recognizers:[[d.Tap]]}).on("tap",function(b){a.$.input.touchMode="touch"===b.pointerType});var f=new d.Manager(a.$.resultcontainer,{domEvents:!0});f.id="control-search";var g=new d.Tap({event:"singletap",taps:1}),h=new d.Tap({event:"doubletap",taps:2});g.requireFailure(h);var i=new d.Pan({direction:d.DIRECTION_HORIZONTAL}),j=new d.Pan({event:"panVertical",direction:d.DIRECTION_VERTICAL});f.add([h,g,i,j]);var k=function(b){for(var c=b;!c.hasAttribute("search-result-tile")&&!c.tagName.match(/control-search/i);)c=c.parentNode;var d=null;if(c.hasAttribute("search-result-tile")){for(;!c.tagName.match(/search-result/i)&&!c.tagName.match(/control-search/i);)c=c.parentNode;c.tagName.match(/search-result/i)&&a.searchResults&&a.searchResults.forEach(function(a){a===c.item&&(d=a)})}return d},l=function(b){for(var c=a.querySelectorAll(".searchResultsDrawer"),d=0;d<c.length;d++)c[d].toggleOpenOnClick=b};f.on("panstart",function(b){var c=k(b.target);c&&a.dragResultFunction&&a.dragResultFunction(a.$.resultcontainer,c)}),f.on("singletap",function(b){var c=k(b.target);c&&a.placeResultFunction&&!b.target.tagName.match(/^a$/i)&&a.placeResultFunction(c)}),f.on("singletap",function(b){var c=k(b.target);c&&a.placeResultFunction&&!b.target.tagName.match(/^a$/i)&&a.placeResultFunction(c)}),f.on("doubletap",function(b){var c=k(b.target);c&&a.placeResultFunction&&!b.target.tagName.match(/^a$/i)&&a.placeResultFunction(c)}),f.on("panVerticalstart",function(c){l(!1),b=null,e=!0;var d=a.$.resultcontainer.getBoundingClientRect();Math.abs(c.deltaY)>Math.abs(c.deltaX)&&c.center.x<a.$.resultcontainer.clientWidth+d.left&&(c.deltaY>0&&a.$.resultcontainer.scrollTop>0||c.deltaY<0&&a.$.resultcontainer.scrollHeight-(a.$.resultcontainer.scrollTop+a.$.resultcontainer.offsetHeight)>0)&&(b=a.$.resultcontainer.scrollTop,a.$.resultcontainer.isScrolling=!0)}),f.on("panVertical",function(d){null!==b&&(c=b-d.deltaY,a.$.resultcontainer.scrollTop=c)}),f.on("panVerticalend",function(d){null!==b&&function(){var f=window.performance.now(),g=150,h=20,i=-d.velocityY*h,j=function(){b=null,e=!0,a.$.resultcontainer.isScrolling=!1},k=function b(){if(!e){var d=Math.exp((f-window.performance.now())/g),h=i*d;Math.abs(h)>.5?(c+=h,a.$.resultcontainer.scrollTop=c,window.requestAnimationFrame(b)):j()}};Math.abs(d.velocityY)>0?(e=!1,window.requestAnimationFrame(k)):null!==b&&j()}(),setTimeout(function(){l(!0)},1)}),a.$.resultcontainer.addEventListener("scroll",function(){null!==b?a.$.resultcontainer.scrollTop=c:c=a.$.resultcontainer.scrollTop}),a.$.input.addEventListener("input",function(){a.searchTimer&&clearTimeout(a.searchTimer),a.searchTimer=setTimeout(a.performSearch.bind(a,a.$.input.value),1e3)}),a.$.input.addEventListener("keydown",function(b){13===b.keyCode&&(a.searchTimer&&clearTimeout(a.searchTimer),a.performSearch(a.$.input.value),a.touchMode&&a.blur())})},initialize:function(){this.stringShowMore=e.i18n.translate("Show additional search results").fetch()},focus:function(){var a=this;a.$.input.focus(),a.lastSearchText="";try{this.$.input.setSelectionRange(0,this.$.input.value.length)}catch(a){console.log(a)}},setFocusForAppend:function(){this.$.input.focus(),this.$.input.value.endsWith(" ")||(this.$.input.value+=" "),this.$.input.setSelectionRange(this.$.input.value.length,this.$.input.value.length)},blur:function(){this.$.input.blur()}})}}}),a.register("ed",["1d","1e"],function(a,b){"use strict";var c,d,e,f;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("SearchResultEvent",e=Object.freeze({symbolChanged:"symbolChanged",componentDataChanged:"componentDataChanged"})),a("SearchResultEvent",e),a("SearchResult",f=function(){function a(b){c(this,a),this._componentAPI=b,this._handlers=new Map,this._handlers.set(e.symbolChanged,[]),this._handlers.set(e.componentDataChanged,[])}return d(a,[{key:"addEventListener",value:function(a,b){this._handlers.get(a).push(b)}},{key:"_notify",value:function(a){var b=this._handlers.get(a),c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){(0,f.value)()}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}}},{key:"loadComponentDetails",value:function(){var a=this;"component"===this.type?this._componentAPI.getComponent(this.id,function(b){a.componentData=b},function(){},!1):this.componentData=null}},{key:"id",get:function(){return this._id},set:function(a){this._id=a}},{key:"type",get:function(){return this._type},set:function(a){this._type=a}},{key:"subType",get:function(){return this._subType},set:function(a){this._subType=a}},{key:"symbolPath",get:function(){return this._symbolPath},set:function(a){this._symbolPath=a}},{key:"name",get:function(){return this._name},set:function(a){this._name=a}},{key:"description",get:function(){return this._description},set:function(a){this._description=a}},{key:"sortKeys",get:function(){return this._sortKeys},set:function(a){this._sortKeys=a}},{key:"symbolSvg",get:function(){return this._symbolSvg},set:function(a){this._symbolSvg=a,this._notify(e.symbolChanged)}},{key:"componentData",get:function(){return this._componentData},set:function(a){this._componentData=a,this._notify(e.componentDataChanged)}}]),a}()),a("SearchResult",f)}}}),a.register("f0",["1d","1e","4d","ed","22"],function(a,b){"use strict";var c,d,e,f,g,h,i;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.SearchResult},function(a){g=a.default}],execute:function(){a("CloudSearchController",h=function(){function a(b,d,e){c(this,a),this._componentAPI=b,this._resourceController=d,this._fileDataController=e,this._searchEndpoint="/api/v1/comp-search",this._timeInterval=18e5,this._savedSearch=null,this._finalItem=null}return d(a,[{key:"_formatResults",value:function(b){var c=this,d={total:0,hits:[]};if(b.hits&&b.hits.total>0){d.total=b.hits.total;var e=!0,g=!1,h=void 0;try{for(var i,j=function(){var b=i.value,e=a._getTypes(b._source.id),g=new f(c._componentAPI);g.id=b._source.id,g.type=e.type,g.subType=e.subType,g.name=b._source.name,g.description=b._source.description,g.sortKeys=b.sort;var h=b._source.children.find(function(a){return 1===a.type});h&&c._resourceController&&(g.symbolPath=h.serverPath,"component"===g.type||"connector"===g.type?c._componentAPI.getSymbol(h.id,function(a){a&&a.svgSymbol&&(g.symbolSvg=a.svgSymbol)},function(){},!0,c._resourceController.isComponentLocalStoreEnabled()):c._resourceController.loadSVGResource(g.symbolPath,function(a){g.symbolSvg=a})),d.hits.push(g)},k=b.hits.hits[Symbol.iterator]();!(e=(i=k.next()).done);e=!0)j()}catch(a){g=!0,h=a}finally{try{!e&&k.return&&k.return()}finally{if(g)throw h}}}return d}},{key:"performSearch",value:function(a){var b=this;return new Promise(function(c,d){var f=new XMLHttpRequest;f.onload=function(){if(200===f.status){var e=JSON.parse(f.responseText);if(e.error)d(e.error);else{var g=b._formatResults(e.searchResults);b._savedSearch=a,b._finalItem=g.hits[g.hits.length-1],c(g)}}else d("SHARKTANK_UNKNOWN_ERROR")},f.onerror=function(){d("SHARKTANK_REQUEST_FAILED")},b._fileDataController.getSubscriptionInfo(function(c){"premium"===c.subscription?(f.open("POST",b._searchEndpoint,!0),f.setRequestHeader("Content-Type","application/json"),f.setRequestHeader(e.cloudConstants.keyauththoken,c.authToken),f.send(JSON.stringify({searchTerms:a,score:"",uid:""}))):d("PREMIUM_STATUS_REQUIRED")},b._timeInterval)})}},{key:"nextPage",value:function(){var a=this;return new Promise(function(b,c){a._savedSearch&&a._finalItem&&function(){var d=new XMLHttpRequest;d.onload=function(){if(200===d.status){var e=JSON.parse(d.responseText);if(e.error)c(e.error);else{var f=a._formatResults(e.searchResults);a._finalItem=f.hits[f.hits.length-1],b(f)}}else c("SHARKTANK_UNKNOWN_ERROR")},d.onerror=function(){c("SHARKTANK_REQUEST_FAILED")},a._fileDataController.getSubscriptionInfo(function(b){"premium"===b.subscription?(d.open("POST",a._searchEndpoint,!0),d.setRequestHeader("Content-Type","application/json"),d.setRequestHeader(e.cloudConstants.keyauththoken,b.authToken),d.send(JSON.stringify({searchTerms:a._savedSearch,score:a._finalItem.sortKeys[0],uid:a._finalItem.sortKeys[1]}))):c("PREMIUM_STATUS_REQUIRED")},a._timeInterval)}()})}}],[{key:"_getTypes",value:function(a){var b={type:null,subType:null};switch(a){case"ground":case"connector":b.type="connector";break;case"junction":b.type="junction";break;case"voltage":b.type="probe",b.subType=g.PROBE_VOLTAGE;break;case"current":b.type="probe",b.subType=g.PROBE_CURRENT;break;case"voltage_and_current":b.type="probe",b.subType=g.PROBE_VOLTAGE_CURRENT;break;case"reference":b.type="probe",b.subType=g.PROBE_REFERENCE;break;case"expression":b.type="probe",b.subType=g.PROBE_EXPRESSION;break;case"data":b.type="probe",b.subType=g.PROBE_DATA;break;case"text_annotation":b.type="annotation";break;case"digital":b.type="probe",b.subType=g.PROBE_DIGITAL;break;default:b.type="component"}return b}}]),a}()),a("CloudSearchController",h),a("PaletteSearchController",i=function(){function a(b,d,e){c(this,a),this._componentAPI=b,this._resourceController=d,this._palette=e}return d(a,[{key:"_formatResults",value:function(a){var b=this,c={total:0,hits:[]};a&&a.length>0&&(c.total=a.length);var d=!0,e=!1,g=void 0;try{for(var h,i=function(){var a=h.value,d=new f(b._componentAPI);d.id=a.item.additionalData.componentID,d.type=a.item.type,d.subType=a.item.additionalData.probeType,d.name=a.resultText,d.description="",d.symbolPath=a.icon,"component"===a.item.type||"connector"===a.item.type?b._componentAPI.getSymbol(a.icon,function(a){a&&a.svgSymbol&&(d.symbolSvg=a.svgSymbol)},function(){},!0,b._resourceController.isComponentLocalStoreEnabled()):b._resourceController.loadSVGResource(a.icon,function(a){d.symbolSvg=a}),c.hits.push(d)},j=a[Symbol.iterator]();!(d=(h=j.next()).done);d=!0)i()}catch(a){e=!0,g=a}finally{try{!d&&j.return&&j.return()}finally{if(e)throw g}}return c}},{key:"performSearch",value:function(a){var b=this;return new Promise(function(c){b._palette.searchFunction(a,function(a){var d=b._formatResults(a);b._total=d.total,c(d)},!1)})}},{key:"nextPage",value:function(){var a=this;return new Promise(function(b){b({total:a._total,hits:[]})})}}]),a}()),a("PaletteSearchController",i)}}}),a.register("f1",[],function(){return{setters:[],execute:function(){}}}),a.register("f2",["a7","cc","ef","2d","8f","10","29","3e","f0","f1"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k;return{setters:[function(a){},function(a){},function(a){c=a.SearchWarningStatus},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.ECommands,i=a.ECommandContexts},function(a){j=a.CloudSearchController,k=a.PaletteSearchController},function(a){}],execute:function(){!function(a){function b(a){var b=g.locale||"en";return"string"==typeof a.title?a.title.replace(/\u00AD/g,""):a.title.i18n[b].replace(/\u00AD/g,"")}function l(a){var b=g.locale||"en";return"string"==typeof a.title?a.title:a.title.i18n[b]}function m(a,b){var c=b.cloneNode(!0);c.setAttribute("width",M),c.setAttribute("height",M);var d=c.getAttribute("viewBox").split(" "),e=Math.max(d[2],d[3]),f=30,g=1,h=Math.max(g,e*g/f);c.querySelector("g").style.strokeWidth=h,window.Polymer.dom(a.$.imageContainer).appendChild(c)}function n(a){if(a&&a.gesture){a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault();var b=this.definition.additionalData.searchText,c=this.palette.$.searchcontrol;c.$.input.value=b,c.handleSearchClick(a),c.performSearch(b),c.setFocusForAppend()}}function o(a){var b=this;a&&a.gesture&&function(){var c=b;c.expanded=!c.expanded,a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault();var d=function(){document.removeEventListener("mousedown",e,!0),document.removeEventListener("touchstart",e,!0)},e=function(a){c.palette.contains(a.target)||(c.expanded=!1,d())};if(c.expanded){for(var f=c,g=null;f;)/object-palette-tile/i.test(f.nodeName)&&(g=f),f=f.parentNode;c.querySelector("object-palette-popout").putInValidPosition(g),document.addEventListener("mousedown",e,!0),document.addEventListener("touchstart",e,!0)}else d();a.gesture.srcEvent.preventDefault()}()}function p(a){var b=this.activeViewGetter();if(!b)throw new Error("Active view is "+String(b));b.viewObject.viewElement.handleEventDirect(a),a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault()}function q(a){var b=null;window.PointerEvent&&"function"==typeof window.PointerEvent?b=new window.PointerEvent("pointerdown",a):window.MouseEvent&&"function"==typeof window.MouseEvent?b=new window.MouseEvent("mousedown",a):window.PointerEvent?(b=document.createEvent("PointerEvent"),b.initPointerEvent("pointerdown",a.bubbles,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget,a.clientX,a.clientY,1,1,255,0,0,0,0,0,0,!0),a.target.dispatchEvent(b),b=document.createEvent("PointerEvent"),b.initPointerEvent("pointerup",a.bubbles,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget,a.clientX,a.clientY,1,1,255,0,0,0,0,0,0,!0)):(b=document.createEvent("MouseEvent"),b.initMouseEvent("mousedown",a.bubbles,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget)),a.target.dispatchEvent(b),N=null}function r(a){this.palette.isPlacing=!1;var b=this.activeViewGetter();if(!b)throw new Error("Active view is "+String(b));b.viewObject.viewElement.handleEventDirect(a),b.viewObject.viewElement.removeEventListener("mouseup",O),b.viewObject.viewElement.removeEventListener("pointerup",O),this.removeEventListener("pan",p),this.removeEventListener("panend",r),a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault(),N=null}function s(a,b){if(b&&b.gesture&&b.gesture.center&&b.gesture.srcEvent&&b.gesture.srcEvent.currentTarget){var c=a.activeViewGetter();if(!c)throw new Error("Active view is "+String(c));var d=c.viewObject.viewElement,e={left:0,top:0},f=d.getBoundingClientRect(),g={x:0,y:0};g=void 0!==window.TouchEvent&&b.gesture.srcEvent instanceof window.TouchEvent||"touch"==b.gesture.srcEvent.pointerType?{x:120,y:80}:{x:e.left+b.gesture.center.x-f.left,y:e.top+b.gesture.center.y-f.top},a.palette.applicationState.lastLocation=g}}function t(a,b,c,d){var e=!1,f=c||a;if(a&&a.addProbeCommand){e=!0,a.hideAllTopLevelFolders(null),a.addProbeCommand.active&&a.addProbeCommand.stopCommand(!0),a.addProbeCommand.contextName=/^pan/.test(d)?i.CC_ADDOBJECT:i.CC_ADDPROBEFLOATING,a.addProbeCommand.startCommand(g.i18n.translate("probe placement.").fetch(),{symbolFile:b.additionalData.probeSymbol,probeType:b.additionalData.probeType}),O=function(){f.removeEventListener("pan",p),f.removeEventListener("panend",r),this.removeEventListener("mouseup",O),this.removeEventListener("pointerup",O)},f.addEventListener("pan",p),f.addEventListener("panend",r);var h=f.activeViewGetter();if(!h)throw new Error("Active view is "+String(h));h.viewObject.viewElement.addEventListener("mouseup",O),h.viewObject.viewElement.addEventListener("pointerup",O)}return e}function u(a){a&&a.gesture&&(s(this,a),t(this.palette,this.definition,this,a.type)&&(a.stopPropagation(),a.stopImmediatePropagation(),this.deactiveDragArea&&this.deactiveDragArea()))}function v(a){N&&(N!=this?("folder"==N.definition.type&&"probe"!=N.definition.subtype||"probe"!=N.definition.type)&&G.apply(N,[a]):function(){var b=N;b&&!C(b)&&function(){var c=function a(c){this.removeEventListener("mouseup",a),this.removeEventListener("pointerup",a),b.palette.isPlacing&&(q(c),b.palette.isPlacing=!1)};b.palette.isPlacing=!0;var d=b.activeViewGetter();if(!d)throw new Error("Active view is "+String(d));d.viewObject.viewElement.addEventListener("mouseup",c),d.viewObject.viewElement.addEventListener("pointerup",c),u.call(b,a)}()}())}function w(a,b,c,d){var e=!1,f=c||a;if(a&&a.addTextAnnotationCommand){a.hideAllTopLevelFolders(null),a.addTextAnnotationCommand.active&&a.addTextAnnotationCommand.stopCommand(!0),a.addTextAnnotationCommand.contextName=/^pan/.test(d)?i.CC_ADDOBJECT:i.CC_ADDTEXTFLOATING,a.addTextAnnotationCommand.startCommand(g.i18n.translate("text annotation placement.").fetch()),e=!0,O=function(){f.removeEventListener("pan",p),f.removeEventListener("panend",r),this.removeEventListener("mouseup",O),this.removeEventListener("pointerup",O)},f.addEventListener("pan",p),f.addEventListener("panend",r);var h=f.activeViewGetter();if(!h)throw new Error("Active view is "+String(h));h.viewObject.viewElement.addEventListener("mouseup",O),h.viewObject.viewElement.addEventListener("pointerup",O)}return e}function x(a){a&&a.gesture&&(a.gesture.center&&s(this,a),w(this.palette,this.definition,this,a.type)&&(a.stopPropagation(),a.stopImmediatePropagation(),this.deactiveDragArea&&this.deactiveDragArea()))}function y(a){N&&(N!=this?("folder"==N.definition.type&&"annotation"!=N.definition.subtype||"annotation"!=N.definition.type)&&G.apply(N,[a]):function(){var b=N;b&&!C(b)&&function(){var c=function a(c){this.removeEventListener("mouseup",a),this.removeEventListener("pointerup",a),b.palette.isPlacing&&(q(c),b.palette.isPlacing=!1)};b.palette.isPlacing=!0;var d=b.activeViewGetter();if(!d)throw new Error("Active view is "+String(d));d.viewObject.viewElement.addEventListener("mouseup",c),d.viewObject.viewElement.addEventListener("pointerup",c),x.call(b,a)}()}())}function z(a,b,c,d){var e=!1,f=c||a;if(a&&a.addJunctionCommand&&(!a.addJunctionCommand.active||a.addJunctionCommand.contextName!==i.CC_WIRING)){a.hideAllTopLevelFolders(null),a.addJunctionCommand.active&&a.addJunctionCommand.stopCommand(!0),a.addJunctionCommand.contextName=/^pan/.test(d)?i.CC_ADDOBJECT:i.CC_ADDJUNCTIONFLOATING,a.addJunctionCommand.startCommand(g.i18n.translate("junction placement.").fetch()),e=!0,O=function(){f.removeEventListener("pan",p),f.removeEventListener("panend",r),this.removeEventListener("mouseup",O),this.removeEventListener("pointerup",O)},f.addEventListener("pan",p),f.addEventListener("panend",r);var h=f.activeViewGetter();if(!h)throw new Error("Active view is "+String(h));h.viewObject.viewElement.addEventListener("mouseup",O),h.viewObject.viewElement.addEventListener("pointerup",O)}return e}function A(a){a&&a.gesture&&(a.gesture.center&&s(this,a),z(this.palette,this.definition,this,a.type)&&(a.stopPropagation(),a.stopImmediatePropagation(),this.deactiveDragArea&&this.deactiveDragArea()))}function B(a){N&&(N!=this?("folder"==N.definition.type&&"annotation"!=N.definition.subtype||"annotation"!=N.definition.type)&&G.apply(N,[a]):function(){var b=N;b&&!C(b)&&function(){var c=function a(c){this.removeEventListener("mouseup",a),this.removeEventListener("pointerup",a),b.palette.isPlacing&&(q(c),b.palette.isPlacing=!1)};b.palette.isPlacing=!0;var d=b.activeViewGetter();if(!d)throw new Error("Active view is "+String(d));d.viewObject.viewElement.addEventListener("mouseup",c),d.viewObject.viewElement.addEventListener("pointerup",c),A.call(b,a)}()}())}function C(a){var b=a.palette&&a.palette.isScrolling||a.parentContainer&&a.parentContainer.isScrolling;if(!b&&a.palette)for(var c=a.parentNode;!b&&c&&c!=a.palette;)c.isScrolling&&(b=!0),c=c.parentNode;return b}function D(a,b,c,d){var e=!1,f=c||a;if(a&&a.addComponentCommand){a.hideAllTopLevelFolders(null),a.addComponentCommand.active&&a.addComponentCommand.stopCommand(!0);var h="folder"===b.type?b.subtype:b.type,j="connector"===h?g.i18n.translate("connector placement.").fetch():g.i18n.translate("component placement.").fetch();if(h&&"folder"!=h){var k=f.activeViewGetter();if(!k)throw new Error("Active view is "+String(k));a.addComponentCommand.contextName=/^pan/.test(d)?i.CC_ADDOBJECT:i.CC_ADDOBJECTFLOATING,a.addComponentCommand.startCommand(j,{type:h,additionalData:b.additionalData,sheetTemplateController:k?k.sheetTemplateController:null}),e=!0,O=function(){f.removeEventListener("pan",p),f.removeEventListener("panend",r),this.removeEventListener("mouseup",O),this.removeEventListener("pointerup",O)},f.addEventListener("pan",p),f.addEventListener("panend",r),k.viewObject.viewElement.addEventListener("mouseup",O),k.viewObject.viewElement.addEventListener("pointerup",O)}}return e}function E(a,b){var c=!1,d=b.command;return d&&(d.active&&d.stopCommand(!0),d.contextName=b.context,b.commandOptions?d.startCommand(b.commandText,b.commandOptions):d.startCommand(b.commandText),c=!0),c}function F(a){a&&a.gesture&&(a.gesture.center&&s(this,a),D(this.palette,this.definition,this,a.type)&&(a.stopPropagation(),a.stopImmediatePropagation(),this.deactiveDragArea&&this.deactiveDragArea()))}function G(a){N&&(N!=this?("folder"==N.definition.type&&"probe"==N.definition.subtype||"probe"==N.definition.type)&&v.apply(N,[a]):function(){var b=N;if(b){var c=b.getBoundingClientRect(),d={x:a.gesture.center.x-a.gesture.deltaX,y:a.gesture.center.y-a.gesture.deltaY};!C(b)&&d.x>=c.left&&d.x<=c.right&&d.y>=c.top&&d.y<=c.bottom&&function(){b.palette.isPlacing=!0;var c=b.activeViewGetter();if(!c)throw new Error("Active view is "+String(c));var d=c.viewObject.viewElement,e=function a(c){d.removeEventListener("mouseup",a),d.removeEventListener("pointerup",a),b.palette.isPlacing&&(q(c),b.palette.isPlacing=!1)};d.addEventListener("mouseup",e),d.addEventListener("pointerup",e),F.call(b,a)}()}}())}function H(a){var b=this.getBoundingClientRect(),c=a.touches&&a.touches.length?{x:a.touches[0].clientX,y:a.touches[0].clientY}:{x:a.clientX,y:a.clientY};c.x>=b.left&&c.x<=b.right&&c.y>=b.top&&c.y<=b.bottom&&!this.hasAttribute("expanded")&&(N=this)}function I(a,b,c){a.length&&function(){var d=[];a.forEach(function(a){var e=document.createElement("object-palette-popout");e.initialize(a.parentDefinition,b.resourceController),a.parentDefinition.children&&function(){var f=function(a){return g.i18n.translate("'%s' to place").fetch(a)};a.parentDefinition.children.forEach(function(g){var h=J(g,b,e,a.level+1,c,d),i=g.additionalData;switch(g.type){case"annotation":case"probe":break;case"junction":h.title=f("J");break;case"connector":switch(i.componentID){case"ground":h.title=f("G");break;case"connector":h.title=f("X")}break;case"component":switch(i.componentID){case"aa9ae9b1-d94c-9621-4dab-31e9d4d9eb1f":h.title=f("R");break;case"a9941f5d-05d9-90a2-123b-793860a4f820":h.title=f("C");break;case"d1b31403-63c9-80b0-8c9c-d36b04112b6b":h.title=f("L");break;case"8f20ea5c-830d-229d-f215-b2cdd64e0e82":h.title=f("O");break;case"1f6a304b-9dcd-a268-95a3-3190a412a673":h.title=f("V");break;case"065f2fc0-1ad3-6bc9-59a9-9070092bbe63":h.title=f("I")}}h.querySelector("#textContainer").textContent=l(g),e.addChildContent(h)})}(),a.parentItem.addChildContent(e)}),I(d,b,c)}()}function J(a,b,c,d,e,f){var g=document.createElement("object-palette-tile");return g.initialize(a),g.resourceController=b.resourceController,g.componentAPI=b.componentAPI,g.palette=b,g.parentContainer=c,g.activeViewGetter=e,g.imagesrc=a.icon,g.level=d,g.displayArea=b.displayArea,a.subtype&&g.classList.add(a.subtype),g.classList.add(a.type),"search"===a.type?(g.addEventListener("tap",n),g.addEventListener("press",n),g.addEventListener("doubletap",n),f.push({parentDefinition:a,parentItem:g,level:d})):"folder"===a.type?(g.addEventListener("tap",o),g.addEventListener("press",o),g.addEventListener("doubletap",o),f.push({parentDefinition:a,parentItem:g,level:d}),"probe"===a.subtype?g.addEventListener("panstart",v):"connector"===a.subtype||"component"===a.subtype?g.addEventListener("panstart",G):"annotation"===a.subtype&&g.addEventListener("panstart",y)):"probe"===a.type?(g.addEventListener("tap",u),g.addEventListener("press",u),g.addEventListener("panstart",v)):"component"===a.type||"connector"===a.type?(g.addEventListener("tap",F),g.addEventListener("press",F),g.addEventListener("panstart",G)):"annotation"===a.type?(g.addEventListener("tap",x),g.addEventListener("press",x),g.addEventListener("panstart",y)):"junction"===a.type&&(g.addEventListener("tap",A),g.addEventListener("press",A),g.addEventListener("panstart",B)),g.addEventListener("touchstart",H),g.addEventListener("mousedown",H),g}function K(a,b){var c=a.groups.reduce(function(a,b){return a.concat(b)},[]),d=c.length;do{d=c.length,c=c.reduce(function(a,b){var c=a;return"folder"===b.type?c=a.concat(b.children):c.push(b),c},[])}while(d!==c.length);b.resourceInfo=c}function L(a,b){var c=!1;return a.isSchematicActive()&&a.searchFunction(b,function(b){if(b.length){var d=b[0],e=null;switch(d.item.type){case"junction":e=z;break;case"probe":e=t;break;case"connector":case"component":e=D;break;case"annotation":e=w}e&&(c=e(a,d.item,null))}},!0),c}var M="100%",N=null,O=null;window.Polymer({is:"object-palette-tile",properties:{definition:{notify:!1,reflectToAttribute:!1,type:Object,value:null},expanded:{notify:!0,observer:"_expandedChanged",reflectToAttribute:!0,type:Boolean,value:!1},imagesrc:{notify:!0,observer:"_imagesrcChanged",reflectToAttribute:!0,type:String,value:""},level:{notify:!1,reflectToAttribute:!0,type:Number,value:0},palette:{notify:!1,reflectToAttribute:!1,type:Object,value:null},parentContainer:{notify:!1,reflectToAttribute:!1,type:Object,value:null},resourceController:{reflectToAttribute:!1,type:Object,value:null},componentAPI:{reflectToAttribute:!1,type:Object,value:null},title:{notify:!0,observer:"_titleChanged",reflectToAttribute:!0,type:String,value:""},activeViewGetter:{notify:!1,reflectToAttribute:!1,type:Function,value:null},displayArea:{reflectToAttribute:!1,type:Object,value:{left:0,top:0,right:100,bottom:100},observer:"_displayAreaChanged"}},attached:function(){var a=this,b=a.$$(".dragarea"),c=function(c){var d=b.getBoundingClientRect();c.clientX>=d.left&&c.clientX<=d.right&&c.clientY>=d.top&&c.clientY<=d.bottom&&function(){var c=function c(){document.removeEventListener("mouseup",c),document.removeEventListener("pointerup",c),document.removeEventListener("touchend",c),b.classList.remove("active"),b.style.top=null,b.style.left=null,a.deactiveDragArea=null};document.addEventListener("mouseup",c),document.addEventListener("pointerup",c),document.addEventListener("touchend",c),b.classList.add("active"),a.deactiveDragArea=c}()};this.addEventListener("mousedown",c),this.addEventListener("pointerdown",c),this.addEventListener("touchstart",c)},_displayAreaChanged:function(){if(this.expanded){for(var a=this,b=null;a;)/object-palette-tile/i.test(a.nodeName)&&(b=a),a=a.parentNode;this.querySelector("object-palette-popout").putInValidPosition(b),this.querySelector("object-palette-popout").displayArea=this.displayArea}},_expandedChanged:function(){if(this.expanded)this.parentContainer&&(this.parentContainer.hideAllFolders(this),this.parentContainer.childExpanded=!0);else{var a=this.querySelectorAll("[child-expanded]"),b=void 0;for(b=0;b<a.length;b++)a[b].childExpanded=!1;for(a=this.querySelectorAll("[expanded]"),b=0;b<a.length;b++)a[b].expanded=!1}},_imagesrcChanged:function(){var a=this;if(a.imagesrc){"component"===a.definition.type||"connector"==a.definition.type||"folder"===a.definition.type&&("component"===a.definition.subtype||"connector"===a.definition.subtype)?a.componentAPI.getSymbol(a.imagesrc,function(b){b&&b.svgSymbol&&m(a,b.svgSymbol)},function(){},!0):a.resourceController.loadSVGResource(a.imagesrc,function(b){b&&m(a,b)})}},_titleChanged:function(){for(var a=window.Polymer.dom(this.$.textContainer);a.firstChild;)a.removeChild(a.firstChild);var b=document.createTextNode(this.title);a.appendChild(b)},addChildContent:function(a){a&&window.Polymer.dom(this.$.childContent).appendChild(a)},deactiveDragArea:null,initialize:function(a){this.definition=a}}),window.Polymer({is:"object-palette-popout",properties:{childExpanded:{notify:!0,observer:"_childExpandedChanged",reflectToAttribute:!0,type:Boolean,value:!1},popoutParent:{reflectToAttribute:!1,type:Object,value:null},displayArea:{reflectToAttribute:!1,type:Object,value:{left:0,top:0,right:100,bottom:100},observer:"_displayAreaChanged"},isScrolling:{reflectToAttribute:!1,type:Boolean,value:!1}},attached:function(){var a=this,b=a.$.scrollContainer,c=null,d=function(a){b.scrollTop+=a,c=b.scrollTop};b.addEventListener("wheel",function(a){var c=b.getBoundingClientRect();a.clientX<=c.right&&a.clientX>=c.left&&a.clientY>=c.top&&a.clientY<=c.bottom&&d(a.deltaY)});var f=new e(a.$.childContainer,{recognizers:[[e.Pan,{direction:e.DIRECTION_VERTICAL,threshold:15}]]});f.id="object-palette-verticalscroll";var g=0,h=function(){c!=b.scrollTop&&(b.scrollTop=c)},i=function(){b.addEventListener("scroll",h)},j=function(){b.removeEventListener("scroll",h)};f.on("panstart",function(c){b.clientHeight<b.scrollHeight&&(i(),a.isScrolling=!0,g=0,d(g-c.deltaY),g=c.deltaY)}),f.on("pan",function(b){a.isScrolling&&(d(g-b.deltaY),g=b.deltaY)}),f.on("panend",function(b){a.isScrolling&&(j(),d(g-b.deltaY),g=b.deltaY,a.isScrolling=!1)})},_childExpandedChanged:function(){this.putInValidPosition(this.popoutParent),this.childExpanded?this.$.titleSpan.parentNode.classList.add("button"):this.$.titleSpan.parentNode.classList.remove("button")},_displayAreaChanged:function(){for(var a=this.$.childContainer.children,b=0;b<a.length;b++)a[b].querySelector("object-palette-tile").displayArea=this.displayArea},hideAllFolders:function(a){this.childExpanded=!1;for(var b=0;b<this.$.childContainer.children.length;++b){var c=this.$.childContainer.children[b].querySelector("object-palette-tile");c&&c!=a&&c.expanded&&(c.expanded=!1)}},addChildContent:function(a){if(a){var b=document.createElement("div");b.classList.add("itemContainer"),b.appendChild(a),window.Polymer.dom(this.$.childContainer).appendChild(b)}},initialize:function(a){var c=this,d=document.createTextNode(b(a));window.Polymer.dom(c.$.titleSpan).appendChild(d);var e=function(a){a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault()};c.$.backarrow.addEventListener("tap",function(){for(var a=c.parentNode;a&&!/object-palette-popout/i.test(a.nodeName);)a=a.parentNode;a&&a.hideAllFolders(null)}),c.addEventListener("tap",e),c.addEventListener("press",e),c.addEventListener("doubletap",e)},putInValidPosition:function(a){if(a){var b=0,c=5,d=15,e=this.$$(".abovearrow"),f=this.$$(".trianglearea .arrow");this.style.position="absolute";for(var g=this.$.childContainer,h=this.$.scrollContainer,i=this.$$(".popoutheader"),j=g.children,k=10,l=0;l<j.length;l++)k=Math.max(k,j[l].offsetWidth);var m=window.getComputedStyle(g),n=parseInt(m.getPropertyValue("padding-left"),10),o=parseInt(m.getPropertyValue("padding-right"),10),p=parseInt(m.getPropertyValue("margin-left"),10),q=parseInt(m.getPropertyValue("margin-right"),10),r=parseInt(m.getPropertyValue("border-left-width"),10),s=parseInt(m.getPropertyValue("border-right-width"),10);this.$.popout.style.width=this.childExpanded?null:Math.min(6,Math.max(j.length,1))*k+n+o+p+q+r+s+30+"px",this.popoutParent=a,this.$.popout.style.left=this.childExpanded?null:a.$.childContent.offsetWidth+"px",this.$.popout.style.top=this.childExpanded?null:b+"px",this.$.popout.style.height=null,this.$.popout.style.maxWidth=null,this.$.popout.style.maxHeight=null,h.style.maxHeight=null,void 0!==e.style.webkitFlex?e.style.webkitFlex=null:void 0!==e.style.flex&&(e.style.flex=null);var t=this.$.popout.getBoundingClientRect();this.style.position="fixed";var u=this.$.popout.getBoundingClientRect();b=t.top-u.top,this.$.popout.style.top=b+"px",this.childExpanded&&(this.$.popout.style.height=0),t=this.$.popout.getBoundingClientRect();var v={left:t.left,top:a.displayArea.top,bottom:a.displayArea.bottom,right:a.displayArea.right};if(this.childExpanded)this.$.popout.style.maxWidth="auto";else{var w=v.right-v.left-c-d,x=v.bottom-v.top-2*c;w=(w/k|0)*k,this.$.popout.style.maxWidth=w+"px",this.$.popout.style.maxHeight=x+"px",h.style.maxHeight=x-i.offsetHeight+"px"}var y=this.$.popout.getBoundingClientRect(),z=f.getBoundingClientRect(),A=!1;if(y.bottom>v.bottom){var B=v.bottom+3-y.height;A=B-y.top>-32;b+=Math.min(-32,B-y.top),this.$.popout.style.top=b+"px"}var C=this.$.popout.getBoundingClientRect();if(C.top<v.top){var D=v.top+3;b+=A?Math.max(32,D-C.top):D-C.top,this.$.popout.style.top=b+"px"}C=this.$.popout.getBoundingClientRect();var E=f.getBoundingClientRect(),F=z.top-E.top;F=Math.min(F,C.height-(E.bottom-E.top)-2),void 0!==e.style.webkitFlex?e.style.webkitFlex="0 0 "+F+"px":void 0!==e.style.flex&&(e.style.flex="0 0 "+F+"px"),h.offsetHeight<h.scrollHeight&&!this.childExpanded?(h.classList.add("showbar"),Math.abs(h.clientWidth-h.offsetWidth)<3&&h.classList.remove("showbar")):h.classList.remove("showbar")}}}),window.Polymer({is:"object-palette",properties:{paletteDefinition:{reflectToAttribute:!1,type:Object,value:null},displayArea:{reflectToAttribute:!1,type:Object,value:{left:0,top:0,right:150,bottom:150}},childExpanded:{reflectToAttribute:!0,type:Boolean,value:!1},isPlacing:{reflectToAttribute:!1,type:Boolean,value:!1},isScrolling:{reflectToAttribute:!1,type:Boolean,value:!1},scrollable:{reflectToAttribute:!0,type:Boolean,value:!1},activeViewGetter:{reflectToAttribute:!1,type:Function,value:null},listeners:{reflectToAttribute:!1,type:Object,value:null},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},viewAreaControl:{reflectToAttribute:!1,type:Object,value:null},isPremium:{type:Boolean,value:!1}},isSchematicActive:function(){return this.viewAreaControl.focusArea==this.viewAreaControl.EAreaStates.AS_SCHEMATIC},searchFunction:function(a,c,d){var e=this,f=null;a=d?a:a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")||"";var g=b;a&&function(){var b=new RegExp(a,"gi");f=[];var c=function a(c){c.forEach(function(c){if(c)switch(b.lastIndex=0,c.type){case"folder":a(c.children);break;case"probe":case"junction":case"connector":case"component":case"annotation":var d=g(c);b.test(d)&&f.push({resultText:d,icon:c.icon,item:c,lastIndex:b.lastIndex})}})};e.paletteDefinition&&c(e.paletteDefinition.groups),f.sort(function(a,b){return a.lastIndex-b.lastIndex})}(),c(f)},attached:function(){var a=this,b=a.$.scrollContainer,c=function(c){b.scrollTop+=c;for(var d=0;d<a.$.groupContainer.children.length;++d)a.$.groupContainer.children[d].displayArea={top:a.$.groupContainer.children[d].displayArea.top,bottom:a.$.groupContainer.children[d].displayArea.bottom,right:a.$.groupContainer.children[d].displayArea.right,left:a.$.groupContainer.children[d].displayArea.left}};b.addEventListener("scroll",function(){a.updateShadows(!1)}),b.addEventListener("wheel",function(a){var d=b.getBoundingClientRect();a.clientX<=d.right&&a.clientX>=d.left&&a.clientY>=d.top&&a.clientY<=d.bottom&&c(a.deltaY)});var d=new e(a.$.scrollingPalette,{recognizers:[[e.Pan,{direction:e.DIRECTION_VERTICAL,threshold:15}]]});d.id="object-palette-verticalscroll2";var f=0,g=function(a){for(var b=a,c=!1;b&&!c;)c=/^object-palette-popout$/i.test(b.nodeName),b=b.parentNode;return c};d.on("panstart",function(b){a.isPlacing||g(b.target)||!a.scrollable||(a.isScrolling=!0,f=0,c(f-b.deltaY),f=b.deltaY)}),d.on("pan",function(b){a.isScrolling&&(c(f-b.deltaY),f=b.deltaY)}),d.on("panend",function(b){a.isScrolling&&(c(f-b.deltaY),f=b.deltaY,a.isScrolling=!1)}),setTimeout(function(){a.updateShadows(!0)},1e3);var h=function(){return a.$.groupContainer.children.length?a.$.groupContainer.children[0].offsetHeight:32};a.$.scrollup.addEventListener("tap",function(a){a&&a.gesture&&c(-h())}),a.$.scrolldown.addEventListener("tap",function(a){a&&a.gesture&&c(h())}),new e.Manager(a.$.paletteContainer,{domEvents:!0,recognizers:[[e.Pan,{direction:e.DIRECTION_ALL,threshold:30}],[e.Tap,{time:1500,threshold:9}],[e.Press,{time:1500}],[e.Tap,{event:"doubletap",taps:2},["tap"]]]}).id="object-palette-placecomponent";var i=function(a){for(var b=a;b&&!(b.hasOwnProperty("offsetHeight")&&b.hasOwnProperty("scrollHeight")&&(b.offsetHeight<b.scrollHeight||b.offsetWidth<b.scrollWidth));)b=b.parentNode;return b};a.$.palette.addEventListener("touchmove",function(a){i(a.target)||a.preventDefault()}),a.$.palette.addEventListener("contextmenu",function(a){a.preventDefault()});var j=function(b){a.hideAllFolders(a.$.searchbutton);var c=function(){a.$.searchcontainer.classList.remove("active"),a.$.searchcontrol.blur();var b=a.activeViewGetter();if(!b)throw new Error("Active view is "+String(b));b.focus()},d=function(){document.removeEventListener("mousedown",e,!0),document.removeEventListener("touchstart",e,!0)},e=function(b){a.contains(b.target)||(c(),d())};return a.$.searchcontainer.classList.contains("active")?(c(),d()):(a.$.searchcontainer.classList.add("active"),a.$.searchcontrol.touchMode=!(b instanceof MouseEvent),a.$.searchcontrol.focus(),a.$.searchcontrol.putInValidPosition(),document.addEventListener("mousedown",e,!0),document.addEventListener("touchstart",e,!0)),b.preventDefault(),b.cancelBubble=!0,!1};a.$.searchcontrol.handleSearchClick=j,a.$.searchbutton.addEventListener("mousedown",j),a.$.searchbutton.addEventListener("touchstart",j)},addPaletteLoadedListener:function(a){this.listeners.addListener("paletteloaded",a),this.paletteDefinition&&a(this)},removePaletteLoadedListener:function(a){this.listeners.removeListener("paletteloaded",a)},initialize:function(b,e,l,m,n,o,p,q,r,s,t,u){function v(a,b,c){var d={};switch(b.type){case"junction":d.command=G.addJunctionCommand,d.context=c?i.CC_ADDOBJECT:i.CC_ADDJUNCTIONFLOATING,d.commandText=g.i18n.translate("junction placement.").fetch();break;case"connector":d.command=G.addComponentCommand,d.context=c?i.CC_ADDOBJECT:i.CC_ADDOBJECTFLOATING,d.commandText=g.i18n.translate("connector placement.").fetch(),d.commandOptions={type:b.type,additionalData:{componentID:b.id},sheetTemplateController:a.sheetTemplateController};break;case"component":d.command=G.addComponentCommand,d.context=c?i.CC_ADDOBJECT:i.CC_ADDOBJECTFLOATING,d.commandText=g.i18n.translate("component placement.").fetch(),d.commandOptions={type:b.type,additionalData:{componentID:b.id},sheetTemplateController:a.sheetTemplateController};break;case"annotation":d.command=G.addTextAnnotationCommand,d.context=c?i.CC_ADDOBJECT:i.CC_ADDTEXTFLOATING,d.commandText=g.i18n.translate("text annotation placement.").fetch();break;case"probe":d.command=G.addProbeCommand,d.context=c?i.CC_ADDOBJECT:i.CC_ADDPROBEFLOATING,d.commandText=g.i18n.translate("probe placement.").fetch(),d.commandOptions={symbolFile:b.symbolPath,probeType:b.subType};break;case"search":d=null}d&&E(a,d)}this.listeners=f(),this.addProbeCommand=l.getCommandObject(h.C_ADDPROBE),this.addTextAnnotationCommand=l.getCommandObject(h.C_ADDTEXTANNOTATION),this.addComponentCommand=l.getCommandObject(h.C_ADDOBJECT),this.addJunctionCommand=l.getCommandObject(h.C_ADDJUNCTION),this.viewAreaControl=r,this.applicationState=e;var w=null,x=null,y=function(a){return window.multisim.versionInfo.isInternal&&"internal"===a},z=function a(b,c){return b.forEach(function(b){"folder"===b.type&&(b.children=a(b.children,c))}),b.filter(function(a){return("folder"!==a.type||a.children.length)&&(!a.tier||-1!==c.tiers.indexOf(a.tier)||y(a.tier))})},A=function a(c){b.isComponentLocalStoreEnabled()&&c.forEach(function(c){"folder"===c.type?a(c.children):"component"===c.type||"connector"===c.type?u.getComponent(c.additionalData.componentID,function(){},function(){},!0):"probe"===c.type?b.preloadSVGResource(c.additionalData.probeSymbol,null,!1):"search"===c.type&&b.preloadSVGResource(c.icon,null,!1)})},B=function a(c,d){var e=d+1;if(b.isComponentLocalStoreEnabled()){for(var f=0;f<c.length;f++){var g=c[f];"folder"===g.type&&a(g.children,e)}for(var h=0;h<c.length;h++){var i=e<=2,j=c[h];"component"===j.type||"connector"===j.type||"folder"===j.type&&"component"===j.subtype?u.getSymbol(j.icon,function(){},function(){},!i):"folder"!==j.type&&"search"!==j.type&&j.icon&&j.icon.length&&b.preloadSVGResource(j.icon,null,!i)}}},C=function(a,c){a&&a.groups&&(K(a,b),a.groups=z(a.groups,c.components),G.resetPalette(a,p),A(a.groups,0),B(a.groups,0),t.done("loadcomponents"),G.listeners.notifyListeners("paletteloaded",G))},D=function(a){G.isPremium="premium"===a.subscription,C(d.cloneDeep(x),a)},F=function(a){g.addReadyListener(function(){x=a,s.getSubscriptionInfo(function(a){D(a)})})};s.listeners.addListener(s.fileDataEvents.FDE_SUBSCRIPTION_CHANGED,D);var G=this;G.resourceController=b,G.componentAPI=u;var H=new j(u,b,s),I=new k(u,b,G);G.$.searchcontrol.placeResultFunction=function(a){if(a){v(G.activeViewGetter(),a,!1),G.$.searchcontainer.classList.remove("active"),G.$.searchcontrol.blur();var b=G.activeViewGetter();if(!b)throw new Error("Active view is "+String(b));b.focus()}},G.$.searchcontrol.dragResultFunction=function(a,b){if(b){var c=G.activeViewGetter();if(!c)throw new Error("Active view is "+String(c));c.viewObject&&function(){var d=c.viewObject.viewElement;d&&function(){var e=function(a){d.handleEventDirect(a),a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault()},f=function b(c){d.handleEventDirect(c),a.removeEventListener("pan",e),a.removeEventListener("panend",b),c.stopPropagation(),c.stopImmediatePropagation(),c.preventDefault()};a.addEventListener("pan",e),a.addEventListener("panend",f),v(c,b,!0),G.$.searchcontainer.classList.remove("active"),G.$.searchcontrol.blur(),c.focus()}()}()}},G.$.searchcontrol.scrollFunction=function(a){G.isPremium&&H.nextPage().then(function(b){return a(b)}).catch(function(){G.$.searchcontrol.searchStatus=c.SCROLL_ERROR})},G.$.searchcontrol.searchFunction=function(a,b){G.isPremium?H.performSearch(a).then(function(a){b(a)}).catch(function(d){G.$.searchcontrol.searchStatus="PREMIUM_STATUS_REQUIRED"===d?c.FREE:c.SEARCH_ERROR,I.performSearch(a).then(function(a){b(a)},!1)}):(G.$.searchcontrol.searchStatus=c.FREE,I.performSearch(a).then(function(a){b(a)}))};var J=new XMLHttpRequest;try{w&&F(w)}catch(a){console.log(a)}try{J.onload=function(){(w=JSON.parse(J.responseText))&&F(w)}}catch(a){console.log(a)}q.addKeyHandler("j",!1,!1,!1,!1,function(a){L(G,"^junction")&&a.preventDefault()}),q.addKeyHandler("r",!1,!1,!1,!1,function(a){L(G,"^resistor$")&&a.preventDefault()}),q.addKeyHandler("l",!1,!1,!1,!1,function(a){L(G,"^inductor$")&&a.preventDefault()}),q.addKeyHandler("c",!1,!1,!1,!1,function(a){L(G,"^capacitor$")&&a.preventDefault()}),q.addKeyHandler("o",!1,!1,!1,!1,function(a){L(G,"^5 terminal opamp$")&&a.preventDefault()}),q.addKeyHandler("v",!1,!1,!1,!1,function(a){L(G,"^ac voltage$")&&a.preventDefault()}),q.addKeyHandler("i",!1,!1,!1,!1,function(a){L(G,"^ac current$")&&a.preventDefault()}),q.addKeyHandler("g",!1,!1,!1,!1,function(a){L(G,"^ground$")&&a.preventDefault()}),q.addKeyHandler("x",!1,!1,!1,!1,function(a){L(G,"^connector$")&&a.preventDefault()});var M=window.multisim.versionInfo.version,N=M.major.toString()+"."+M.minor.toString()+"."+M.patch.toString();J.open("GET",a.rootFolder+"resources/palette.json?v="+N),J.send(),G.$.searchcontrol.initialize()},resetPalette:function(a,b){this.activeViewGetter=b,this.paletteDefinition=a,this.$.groupContainer.innerHTML="",this.$.searchbutton.title=g.i18n.translate("Search for component").fetch();var c=[];a.groups.forEach(function(a){var d=J(a,this,this,0,b,c);d.title=l(a),d.querySelector("#textContainer").textContent="",window.Polymer.dom(this.$.groupContainer).appendChild(d)},this),this.updateDisplayArea(this.displayArea),I(c,this,b)},hideAllTopLevelFolders:function(a){if(this.$.searchbutton!=a){this.$.searchcontainer.classList.remove("active"),this.$.searchcontrol.blur();var b=this.activeViewGetter();if(!b)throw new Error("Active view is "+String(b));b.focus()}for(var c=0;c<this.$.groupContainer.children.length;++c){var d=this.$.groupContainer.children[c];d&&d!=a&&(d.expanded=!1)}},hideAllFolders:function(a){this.hideAllTopLevelFolders(a)},putInValidPosition:function(a){var b=this.$.scrollContainer,c=this.$.scrollingPalette,d=this.$.searchcontainer,e=b.scrollTop,f={top:a.top+20,left:a.left,right:a.right,bottom:a.bottom-20},g=function(a){for(var b=0;b<this.$.paletteContainer.children.length;b++)this.$.paletteContainer.children[b].classList.contains("button")&&(a?this.$.paletteContainer.children[b].classList.remove("hidden"):this.$.paletteContainer.children[b].classList.add("hidden"))};this.$.paletteContainer.style.height=null,this.$.paletteContainer.style.maxHeight=f.bottom-f.top+"px",this.$.paletteContainer.style.top=null,this.$.scrollablepalettewrap.style.position=null,this.scrollable=!1,g.apply(this,[!1]);var h=this.$.paletteContainer.offsetTop,i=this.$.paletteContainer.getBoundingClientRect();d.offsetHeight+c.offsetHeight>f.bottom-f.top&&(this.$.paletteContainer.style.height=d.offsetHeight+c.offsetHeight+"px",this.$.scrollablepalettewrap.style.position="absolute",g.apply(this,[!0]),this.scrollable=!0),i=this.$.paletteContainer.getBoundingClientRect(),i.bottom>f.bottom&&(h-=i.bottom-f.bottom,this.$.paletteContainer.style.top=h+"px"),i=this.$.paletteContainer.getBoundingClientRect(),i.top<f.top&&(this.$.paletteContainer.style.top="20px"),b.scrollTop=e,this.updateShadows(!0)},updateShadows:function(b){var c=this.$.scrollContainer,d=!1;c.scrollTop>3?(this.$$(".shadow.top").classList.remove("hidden"),d|=!1!==this.$.scrollup.disabled,this.$.scrollup.disabled=!1):(this.$$(".shadow.top").classList.add("hidden"),d|=!0!==this.$.scrollup.disabled,this.$.scrollup.disabled=!0),c.scrollHeight-c.scrollTop>c.parentNode.offsetHeight+3?(this.$$(".shadow.bottom").classList.remove("hidden"),d|=!1!==this.$.scrolldown.disabled,this.$.scrolldown.disabled=!1):(this.$$(".shadow.bottom").classList.add("hidden"),d|=!0!==this.$.scrolldown.disabled,this.$.scrolldown.disabled=!0);var e=this;a.browserDetect&&a.browserDetect.isOldIE&&(d||b)&&(e.$.scrollup.querySelector("iron-icon").classList.add("hidden"),e.$.scrolldown.querySelector("iron-icon").classList.add("hidden"),setTimeout(function(){e.$.scrollup.querySelector("iron-icon").classList.remove("hidden"),e.$.scrolldown.querySelector("iron-icon").classList.remove("hidden")},10))},updateDisplayArea:function(a){var b=a;if(this.putInValidPosition(b),this.$.searchcontrol.displayArea=b,this.displayArea=b,this.scrollable){var c=this.$.scrollup.parentNode.getBoundingClientRect(),d=this.$.scrolldown.parentNode.getBoundingClientRect();b={left:b.left,top:c.top-3,right:b.right,bottom:d.bottom-3}}for(var e=0;e<this.$.groupContainer.children.length;++e)this.$.groupContainer.children[e].displayArea=b},_disabledChanged:function(){this.disabled?this.$.paletteContainer.classList.add("disabled"):(this.$.paletteContainer.classList.remove("disabled"),this.updateDisplayArea(this.displayArea))}})}(window.multisim)}}}),a.register("f3",[],function(){return{setters:[],execute:function(){}}}),a.register("f4",[],function(){return{setters:[],execute:function(){}}}),a.register("f5",["a7","f3","f4"],function(a,b){"use strict";return{setters:[function(a){},function(a){},function(a){}],execute:function(){!function(){function a(a){var b=a.max||100,c=a.min||0,e=a.step||1,f=b-c,g=0;g=f/e;var h=a.$.sliderobject.getBoundingClientRect();a.style.minWidth=g+h.width+4+"px",a._setFactor(g/f),a._setOffset(c*a.factor),d(a)}function b(a){a.$.valueindicator.style.minWidth=a.value*a.factor-a.offset+"px",a.$.valueindicator.style.maxWidth=a.value*a.factor-a.offset+"px"}function c(a,b){var c=a.$.sliderobject.getBoundingClientRect();a.value=(b+a.offset-c.width/2-2)/a.factor,d(a),a._notifyValueChanged(!0)}function d(a){var c=Math.max(a.min,Math.min(a.max,a.value));if(a.step){c=Math.round(c/a.step)*a.step}c!=a.value&&(a.value=c),b(a)}var e=!1;window.Polymer({is:"multisim-slider",properties:{value:{reflectToAttribute:!0,type:Number,value:0,notify:!0,observer:"_valueChanged"},min:{reflectToAttribute:!0,type:Number,value:0,notify:!0,observer:"_minChanged"},max:{reflectToAttribute:!0,type:Number,value:100,notify:!0,observer:"_maxChanged"},step:{reflectToAttribute:!0,type:Number,value:1,notify:!0,observer:"_stepChanged"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},dragging:{type:Boolean,value:!1,readOnly:!0},factor:{type:Number,value:1,readOnly:!0},offset:{type:Number,value:0,readOnly:!0}},_valueChanged:function(){d(this)},_maxChanged:function(){a(this)},_minChanged:function(){a(this)},_stepChanged:function(){a(this)},_disabledChanged:function(){},_commandContextHelper:null,set commandContextHelper(a){var b=this,c=function(){var a=b._commandContextHelper.testContextEnabled();a==b.contextDisabled&&(b.contextDisabled=!a)};a!=b._commandContextHelper&&(b._commandContextHelper&&b._commandContextHelper.removeContextChangeListener(c),b._commandContextHelper=a,b._commandContextHelper&&b._commandContextHelper.addContextChangeListener(c)),c()},get inUpdate(){return e},set inUpdate(a){e=a},get commandContextHelper(){return this._commandContextHelper},_attached:!1,attached:function(){var d=this;a(d),d._attached||function(){d._attached=!0;var a=function(a){var b=d.$.sliderrail.getBoundingClientRect();if(a.gesture){for(var e=a.gesture.target;e&&e!=d.$.sliderobject;)e=e.parentNode;e||c(d,a.gesture.center.x-b.left)}};d.$.valueindicator.addEventListener("tap",a),d.$.rightvalueindicator.addEventListener("tap",a);var e=function(a){a.gesture&&(a.stopPropagation(),d.dragging||d._trackStart(a),d.value=Math.max(d.min,Math.min(d.max,d._startValue+a.gesture.deltaX/d.factor)),b(d),d._notifyValueChanged(!1))},f=function a(b){b.gesture&&(b.stopPropagation(),d.$.sliderobject.classList.remove("dragging"),d._setDragging(!1),d._notifyValueChanged(!0),window.removeEventListener("pan",e),window.removeEventListener("panend",a))};d.$.sliderrailcontainer.addEventListener("panstart",function(a){var b=d.$.sliderobject.getBoundingClientRect();if(a.gesture){var c={x:a.gesture.center.x-a.gesture.deltaX,y:a.gesture.center.y-a.gesture.deltaY};c.x>=b.left&&c.x<b.right&&c.y>=b.top&&c.y<b.bottom&&(a.stopPropagation(),d.$.sliderobject.classList.add("dragging"),d._setDragging(!0),d._startValue=d.value,window.addEventListener("pan",e),window.addEventListener("panend",f))}})}()},_notifyValueChanged:function(a){this.onValueChange&&(e=!0,this.onValueChange(this.value,a),e=!1)}})}()}}}),a.register("f6",["f7"],function(a,b){"use strict";function c(a,b){var c=b||d(),g=!1,h={},i=function(a,b,c,d,e){var g="";if("number"==typeof a){var h=f[a];h&&(g=h.key)}else a&&(g=a.toLowerCase());return g?(b?"Ctrl+":"")+(c?"Shift+":"")+(d?"Alt+":"")+(e?"Meta+":"")+g:""},j=function(a,b,d,e,f,g,j,k){var l=i(b,d,e,f,g)+(a?"":"up");if(l){var m=h[k];m||(m={name:k,keys:{}},h[k]=m),m.keys[l]=l,c.addListener(l,j)}return l},k=function(a,b,c,d,e,f,g){return j(!0,a,b,c,d,e,f,g)},l=function(a,b,c,d,e,f,g){return j(!1,a,b,c,d,e,f,g)},m=function(a,b){c.removeListener(a,b);for(var d in h)if(h.hasOwnProperty(d))for(var e in h[d].keys)h[d].keys.hasOwnProperty(e)&&!c.getEventListeners(e).length&&delete h[d].keys[e]},n={addKeyHandler:k,addKeyUpHandler:l,removeKeyHandler:m,get disabled(){return g},set disabled(a){g=a}};(!a.tabIndex||a.tabIndex<0)&&(a.tabIndex=0),a.addEventListener("focus",function(){e=a.getAttribute("guid")});var o=function(){for(var a=document.activeElement;a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a};return window.addEventListener("keydown",function(b){if(!g){var d=o(),h=d;if(!(h instanceof window.HTMLInputElement))for(;h&&h!==a;)h=h.parentNode;if((d===document.body||null===d)&&e===a.getAttribute("guid")||d===a||h===a){var j=i(b.keyCode||b.key,b.ctrlKey,b.shiftKey,b.altKey,b.metaKey);void 0===b.key&&(b.key=f[b.keyCode]?f[b.keyCode].key:void 0),c.notifyListeners(j,b)}}}),window.addEventListener("keyup",function(b){if(!g){var d=document.activeElement;if(!(d instanceof window.HTMLInputElement))for(;d&&d!==a;)d=d.parentNode;if((document.activeElement===document.body||null===document.activeElement)&&e===a.getAttribute("guid")||document.activeElement===a||d===a){var h=i(b.keyCode||b.key,b.ctrlKey,b.shiftKey,b.altKey,b.metaKey);void 0===b.key&&(b.key=f[b.keyCode]?f[b.keyCode].key:void 0),c.notifyListeners(h+"up",b)}}}),n}var d,e,f;return a("default",c),{setters:[function(a){d=a.default}],execute:function(){e=null,f=Object.freeze({8:{key:"backspace"},9:{key:"tab"},13:{key:"enter"},16:{key:"shift"},17:{key:"control"},18:{key:"alt"},19:{key:"pause"},20:{key:"capsLock"},27:{key:"escape"},32:{key:"space"},33:{key:"pageup"},34:{key:"pagedown"},35:{key:"end"},36:{key:"home"},37:{key:"arrowleft"},38:{key:"arrowup"},39:{key:"arrowright"},40:{key:"arrowdown"},44:{key:"printscreen"},45:{key:"insert"},46:{key:"delete"},48:{key:"0"},49:{key:"1"},50:{key:"2"},51:{key:"3"},52:{key:"4"},53:{key:"5"},54:{key:"6"},55:{key:"7"},56:{key:"8"},57:{key:"9"},65:{key:"a"},66:{key:"b"},67:{key:"c"},68:{key:"d"},69:{key:"e"},70:{key:"f"},71:{key:"g"},72:{key:"h"},73:{key:"i"},74:{key:"j"},75:{key:"k"},76:{key:"l"},77:{key:"m"},78:{key:"n"},79:{key:"o"},80:{key:"p"},81:{key:"q"},82:{key:"r"},83:{key:"s"},84:{key:"t"},85:{key:"u"},86:{key:"v"},87:{key:"w"},88:{key:"x"},89:{key:"y"},90:{key:"z"},91:{key:"os",pos:"left"},92:{key:"os",pos:"right"},93:{key:"contextmenu"},96:{key:"0",pos:"numpad"},97:{key:"1",pos:"numpad"},98:{key:"2",pos:"numpad"},99:{key:"3",pos:"numpad"},100:{key:"4",pos:"numpad"},101:{key:"5",pos:"numpad"},102:{key:"6",pos:"numpad"},103:{key:"7",pos:"numpad"},104:{key:"8",pos:"numpad"},105:{key:"9",pos:"numpad"},106:{key:"*",pos:"numpad"},107:{key:"+",pos:"numpad"},109:{key:"-",pos:"numpad"},110:{key:".",pos:"numpad"},111:{key:"/",pos:"numpad"},112:{key:"f1"},113:{key:"f2"},114:{key:"f3"},115:{key:"f4"},116:{key:"f5"},117:{key:"f6"},118:{key:"f7"},119:{key:"f8"},120:{key:"f9"},121:{key:"f10"},122:{key:"f11"},123:{key:"f12"},144:{key:"numlock"},145:{key:"scrolllock"},186:{key:";"},187:{key:"="},188:{key:","},189:{key:"-"},190:{key:"."},191:{key:"/"},192:{key:"`"},219:{key:"["},220:{key:"\\"},221:{key:"]"},222:{key:"'"},226:{key:"\\"}})}}}),a.register("f8",[],function(){return{setters:[],execute:function(){}}}),a.register("f9",["a7","45","f5","4f","3b","f6","f8"],function(a,b){"use strict";var c,d,e,f,g;return{setters:[function(a){},function(a){c=a.default},function(a){},function(a){d=a.default},function(a){e=a.formatSimulationNumber,f=a.switchEnteredChars},function(a){g=a.default},function(a){}],execute:function(){!function(){function a(a,b){b?a.setAttribute("disabled","disabled"):a.removeAttribute("disabled")}function b(){this.$.slidercenter.focus()}window.Polymer({is:"multisim-property-slider",properties:{value:{reflectToAttribute:!1,type:Number,value:"",notify:!0,observer:"_valueChanged"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},refdes:{reflectToAttribute:!1,type:String,value:""},varname:{type:String,value:"",observer:"_varnameChanged"},unit:{type:String,value:""},sign:{type:String,value:"+/-"},showSignToggle:{reflectToAttribute:!0,type:Boolean,value:!0},showMagnitudeControls:{reflectToAttribute:!0,type:Boolean,value:!0},siPrefix:{type:Boolean,value:!0},precision:{type:Number,value:3},wholeNumbers:{type:Boolean,value:!1},stringID:String},_varnameChanged:function(a){this.$.varname.innerHTML=a},_makeFormatedValueString:function(a){var b=d(this._formatedValueString),c=void 0!==a?a:this.value;return b!==c&&(this._formatedValueString=this.wholeNumbers?(0|c).toString():e(c,void 0,void 0,this.precision,this.siPrefix)),this._formatedValueString},_notifyValueChanged:function(a){var c=this;if(this.onValueChange){if(this._formatedValueString=this._formatedValueString.trim(),!this._lockedRange){for(;"-"==this._formatedValueString.charAt(0)||"+"==this._formatedValueString.charAt(0);)this._formatedValueString=this._formatedValueString.substring(1);this.signValue<0&&(this._formatedValueString="-"+this._formatedValueString)}this._validate(this._formatedValueString),this.onValueChange(this._formatedValueString,!0,a,function(a){a?c.$.valuetext.classList.add("invalid"):c.$.valuetext.classList.remove("invalid")}),b.call(this)}},_disabledChanged:function(){a(this.$.slider,this.disabled)},_sign:1,_lockedRange:!1,set signValue(a){this._sign=a},get signValue(){return this._sign},_formatedValueString:"",clearRange:function(){this._lockedRange=!1,this.$.slider.max=100,this.$.slider.min=0,this.$.slider.step=1},clampValue:null,setRange:function(a,b,c){this.$.slider.min=a,this.$.slider.max=b,this.$.slider.step=c,this._lockedRange=!0},displayInputFieldValue:function(a){this.$.valuetext.classList.remove("invalid"),"string"==typeof a&&(this._formatedValueString=a);var b=d(""+a);if(!isNaN(b)){var c=b;if(this.signValue=b>=0?1:-1,b*=this.signValue,this._lockedRange)b=this.clampValue?this.clampValue(b):Math.max(Math.min(Math.abs(b),this.$.slider.max),this.$.slider.min);else{var e=Math.floor(Math.log(b)/Math.LN10),f=Math.pow(10,e+1);f===b&&(f*=10),0===f&&(f=1),this.$.slider.max=f,this.$.slider.step=f/200}this.value=b*this.signValue,this._valueChanged(),this._makeFormatedValueString(),c!=b&&this._notifyValueChanged(!0)}},_setValue:function(a,b,c,e,f){"string"==typeof a&&(this._formatedValueString=a);var g=d(""+a);if(!c&&f&&(g=this.clampValue?this.clampValue(g):Math.max(Math.min(Math.abs(g),this.$.slider.max),this.$.slider.min)*this.signValue),!this.$.slider.inUpdate){if(this.$.slider.inUpdate=!0,!isNaN(g)){if(this.signValue=g>=0?1:-1,g*=this.signValue,c){if(b&&(b=Math.abs(b)),null===b||isNaN(b)||b<g){var h=Math.floor(Math.log(g)/Math.LN10);b=Math.pow(10,h+1),b===g&&(b*=10),0===b&&(b=1)}this.$.slider.max=b,this.$.slider.step=b/200}this.value=g*this.signValue,this._valueChanged(),this._makeFormatedValueString(),this._notifyValueChanged(e)}this.$.slider.inUpdate=!1}},_commandContextHelper:null,set commandContextHelper(b){var c=this,d=function(){var b=c._commandContextHelper.testContextEnabled();b==c.contextDisabled&&(c.contextDisabled=!b,a(c.$.slider,c.disabled||c.contextDisabled))};b!=c._commandContextHelper&&(c._commandContextHelper&&c._commandContextHelper.removeContextChangeListener(d),c._commandContextHelper=b,c._commandContextHelper&&c._commandContextHelper.addContextChangeListener(d)),d()},get commandContextHelper(){return this._commandContextHelper},propertyController:null,templateGuildOfPropertyForCallback:null,contextGuidOfPropertyForCallback:null,propertyNameForCallback:null,setPropertyController:function(a,b,d,e,f){var g=this;this.templateGuildOfPropertyForCallback=e,this.contextGuidOfPropertyForCallback=d,this.propertyNameForCallback=f,null===this.propertyController&&function(){g.propertyController=b;var d=g,e=function(a){d.propertyValueChanged(a)};b.propertyChangeListeners.addListener(c.INSTANCE_PROPERTY_CHANGED,e),b.propertyChangeListeners.addListener(c.MODEL_PROPERTY_CHANGED,e),a.listeners.addListener("activeDesignChanged",function(a){a.oldDesign&&(b.propertyChangeListeners.removeListener(c.INSTANCE_PROPERTY_CHANGED,e),b.propertyChangeListeners.removeListener(c.MODEL_PROPERTY_CHANGED,e))})}()},propertyValueChanged:function(a){this.templateGuildOfPropertyForCallback===a.templateGUID&&this.contextGuidOfPropertyForCallback===a.contextGUID&&this.propertyNameForCallback===a.propertyName&&this._setValue(a.newValue,null,!this._lockedRange,!1,!1)},attached:function(){var a=this,b=this;this.$.slider.onValueChange||function(){a.$.slider.onValueChange=function(a,c){this.inUpdate=!0,b.value=b.showSignToggle?a*b.signValue:a,b._notifyValueChanged(c),this.inUpdate=!1};var c=g(b.$.slidercenter),d=window.navigator.userAgent.toLowerCase(),e=d.indexOf("android")>-1,h=function(a,c){var d=null,e=function(){d&&(clearInterval(d),d=null,f(!0,!1))},f=function(b,d){c.apply(a,[b,d])};a.addEventListener("tap",function(a){a&&a.gesture&&(e(),f(!0,!0),a.stopPropagation())}),a.addEventListener("press",function(a){a&&a.gesture&&(e(),f(!1,!0),d=setInterval(function(){var a=b.value;f(!1,!0),b.value==a&&e()},50));var c=function a(){return e(),window.removeEventListener("mouseup",a),window.removeEventListener("touchend",a),!1};window.addEventListener("mouseup",c),window.addEventListener("touchend",c)},!0)};e?(a.$.valuetext.addEventListener("touchstart",function(a){this._blockTaps=!0,b.$.valuetext.focus(),a.preventDefault()}),a.$.valuetext.onclick=function(a){a.preventDefault(),a.stopPropagation()}):a.$.valuetext.onclick=function(a){b.$.valuetext.focus(),a.preventDefault(),a.stopPropagation()},a.$.valuetext.addEventListener("touchend",function(a){b.$.valuetext.focus(),b.$.valuetext.dispatchEvent(new window.MouseEvent("click")),a.preventDefault(),a.stopPropagation()});var i=function(a,c){b.showMagnitudeControls&&(c?b._setValue(10*b.value,10*b.$.slider.max,!b._lockedRange,a,!0):b._setValue(b.value,b.$.slider.max,!b._lockedRange,a,!0))},j=function(a,c){b.showMagnitudeControls&&(c?b._setValue(b.value/10,b.$.slider.max/10,!b._lockedRange,a,!0):b._setValue(b.value,b.$.slider.max,!b._lockedRange,a,!0))},k=function(a,c){if(c){var d=b.showSignToggle?1:b.signValue,e=Math.round(b.value*b.signValue/b.$.slider.step-d)*b.$.slider.step,f=Math.max(b.$.slider.min,e)*b.signValue;b._setValue(f,null,!1,a,!0)}else b._setValue(b.value,null,!1,a,!0)},l=function(a,c){if(c){var d=b.showSignToggle?1:b.signValue,e=Math.round(b.value*b.signValue/b.$.slider.step+d)*b.$.slider.step,f=Math.min(b.$.slider.max,e)*b.signValue;b._setValue(f,null,!1,a,!0)}else b._setValue(b.value,null,!1,a,!0)};h(a.$.times10button,i),h(a.$.div10button,j),h(a.$.decbutton,k),h(a.$.incbutton,l),c.addKeyHandler("arrowright",!1,!1,!1,!1,function(){l(!1,!0)},"increment"),c.addKeyHandler("arrowleft",!1,!1,!1,!1,function(){k(!1,!0)},"decrement"),c.addKeyHandler("arrowup",!1,!1,!1,!1,function(){i(!1,!0)},"multiply10"),c.addKeyHandler("arrowdown",!1,!1,!1,!1,function(){j(!1,!0)},"divide10"),c.addKeyHandler("arrowrightup",!1,!1,!1,!1,function(){l(!0,!1)},"increment"),c.addKeyHandler("arrowleftup",!1,!1,!1,!1,function(){k(!0,!1)},"decrement"),c.addKeyHandler("arrowupup",!1,!1,!1,!1,function(){i(!0,!1)},"multiply10"),c.addKeyHandler("arrowdownup",!1,!1,!1,!1,function(){j(!0,!1)},"divide10"),a.$.slidercenter.addEventListener("mousedown",function(){this.focus()}),a.$.slidercenter.addEventListener("touchstart",function(){this.focus()}),a.$.valuetext.addEventListener("keydown",function(a){13==a.keyCode&&b._setValue(b.$.valuetext.value,null,!b._lockedRange,!0,!0)}),a.$.valuetext.addEventListener("panstart",function(a){a.stopPropagation()}),a.$.valuetext.onfocus=function(){this.selectionStart=0,this.selectionEnd=b.$.valuetext.value.length,this.isPresentlySelected=!0},a.$.valuetext.onblur=function(){this.isPresentlySelected=!1,b._setValue(b.$.valuetext.value,null,!b._lockedRange,!0,!0),b._setValue(b._formatedValueString,null,!b._lockedRange,!0,!0)},a.$.valuetext.oninput=function(){f(b.$.valuetext,b.$.valuetext.value),b._validate(b.$.valuetext.value)},a.$.signbutton.addEventListener("tap",function(a){a&&a.gesture&&b._setValue(-1*b.value,b.$.slider.max,!b._lockedRange,!0,!0)}),a.$["multisim-slider-wrapper"].addEventListener("tap",function(){b._lockedRange&&b._setValue(b.value,b.$.slider.max,!b._lockedRange,!0,!0)})}()},_valueChanged:function(){var a=this._makeFormatedValueString();this.$.valuetext.value!==a&&(this.$.valuetext.value=a),this.$.slider.value!==this.value&&this.showSignToggle?this.$.slider.value=this.value*this.signValue:this.$.slider.value=this.value},_validate:function(a){var b=this;this.onValueChange&&this.onValueChange(a,!1,void 0,function(a){a?b.$.valuetext.classList.add("invalid"):b.$.valuetext.classList.remove("invalid")})},activate:b})}()}}}),a.register("fa",[],function(){return{setters:[],execute:function(){}}}),a.register("fb",["a7","2d","f9","29","3c","2f","3e","30","44","45","fa"],function(a,b){"use strict";var c,d,e,f,g,h,i,j;return{setters:[function(a){},function(a){c=a.default},function(a){},function(a){d=a.default},function(a){e=a.formatRefDes},function(a){f=a.isTemplateText},function(a){g=a.ECommandContexts},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){}],execute:function(){!function(a,b){a({is:"on-schematic-properties-panel",properties:{disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},doReposition:{writable:!0,value:null},updateRefdes:{writable:!0,value:null},_previousSelectedPropertyApplyObject:{writable:!0,value:null},_previousSelectClearTimer:{writable:!0,value:null},_myOffset:{writable:!0,value:{x:0,y:0}},textEditEnabled:{type:Boolean,reflectToAttribute:!0,value:!1},multiline:{type:Boolean,reflectToAttribute:!0,value:!1},sliderEnabled:{type:Boolean,reflectToAttribute:!0,value:!1},stringID:String,stringValue:String},_disabledChanged:function(){},_commandContextHelper:null,set commandContextHelper(a){var b=this,c=function(){var a=b._commandContextHelper.testContextEnabled();a==b.contextDisabled&&(b.contextDisabled=!a)};a!=b._commandContextHelper&&(b._commandContextHelper&&b._commandContextHelper.removeContextChangeListener(c),b._commandContextHelper=a,b._commandContextHelper&&b._commandContextHelper.addContextChangeListener(c)),c()},handlePropertyValueChanged:null,handleDesignChange:null,templateGuildOfPropertyForCallback:null,contextGuidOfPropertyForCallback:null,propertyNameForCallback:null,handleSelectionChanged:function(a,k,l,m,n,o,p){var q=this,r=null;q.handleDesignChange&&a.sheetTemplateController.design.listeners.removeListener(h.DESIGN_CHANGED,this.handleDesignChange),q.handleDesignChange=function(){if(p){var b=c.clone(p);b.update=!0,q.handleSelectionChanged(a,k,l,m,n,o,b)}},a.sheetTemplateController.design.listeners.addListener(h.DESIGN_CHANGED,this.handleDesignChange),d.addReadyListener(function(a){q.stringID=a.i18n.translate("ID").fetch()+":",q.stringValue=a.i18n.translate("Text").fetch()});var s=function(a){a.gesture&&(a.stopPropagation(),q._myOffset={x:r.x+a.gesture.deltaX,y:r.y+a.gesture.deltaY},q.doReposition())},t=function a(b){b.gesture&&(b.stopPropagation(),q.classList.remove("dragging"),r=null,window.removeEventListener("pan",s),window.removeEventListener("panend",a),q.sliderEnabled&&q.$.slider.activate())},u=function(a){if(a.gesture){var b=q.getBoundingClientRect(),c={x:a.gesture.center.x-a.gesture.deltaX,y:a.gesture.center.y-a.gesture.deltaY};c.x>=b.left&&c.x<b.right&&c.y>=b.top&&c.y<b.bottom&&(a.stopPropagation(),q.classList.add("dragging"),r={x:q._myOffset.x,y:q._myOffset.y},window.addEventListener("pan",s),window.addEventListener("panend",t))}},v=void 0,w=void 0,x=void 0,y=void 0,z=void 0,A=void 0,B=void 0,C=void 0,D=void 0,E=!1,F=o.commandInterface.activeAppMode===g.CC_EMBEDDED,G=a.sheetTemplateController,H=a.sheetTemplateController.design.simulationController.simulationState!==i.Stopped||"simulation"===l,I=p&&p.update,J=function(a,b,c,d,e){a.value=c.getInstanceOrModelVariable(b.contextGUID,d,e,!1),q.templateGuildOfPropertyForCallback=d,q.contextGuidOfPropertyForCallback=b.contextGUID,q.propertyNameForCallback=e,a.validator=function(a,f){c.isInstanceOrModelPropertyInvalid(b.contextGUID,d,e,a,function(a){f({valid:!a||!a.errorMessage,errorMessage:a?a.errorMessage:null})})},a.onValueChange=function(a){var f=c.undo.endActionAllowed;window.multisim.tryCatchAll(function(){c.undo.endActionAllowed=!0,c.isInstanceOrModelPropertyInvalid(b.contextGUID,d,e,a,function(f){if(f&&!f.errorMessage&&(f=null),!f){(c.getInstanceOrModelVariable(b.contextGUID,d,e)!==a||c.undo.hasValidAction())&&c.changeInstanceOrModelVariable(b.contextGUID,d,e,a,!0)}})}),c.undo.endActionAllowed=f}};if(q.handlePropertyValueChanged||function(){var b=function(a){q.templateGuildOfPropertyForCallback===a.templateGUID&&q.contextGuidOfPropertyForCallback===a.contextGUID&&q.propertyNameForCallback===a.propertyName&&(q.$.valuetext.value=a.newValue)};q.handlePropertyValueChanged=b,a.sheetTemplateController.propertyController.propertyChangeListeners.addListener(j.INSTANCE_PROPERTY_CHANGED,b),a.sheetTemplateController.propertyController.propertyChangeListeners.addListener(j.MODEL_PROPERTY_CHANGED,b),o.listeners.addListener(o.events.ACTIVEDESIGNCHANGED,function(c){c.oldDesign&&(a.sheetTemplateController.propertyController.propertyChangeListeners.removeListener(j.INSTANCE_PROPERTY_CHANGED,b),a.sheetTemplateController.propertyController.propertyChangeListeners.removeListener(j.MODEL_PROPERTY_CHANGED,b))})}(),m&&1===m.length||2===m.length){var K=m[0],L=2===m.length?m[1]:null,M=a.sheetTemplateController.sheetTemplate.getObject(K.id),N=L?a.sheetTemplateController.sheetTemplate.getObject(L.id):null,O=null,P=null;if(z=f(M)?M:N&&f(N)?N:null,z&&(z===M?(O=a.querySelector('[id="'+m[0].getAttribute("parent")+'"]'),P=O?a.sheetTemplateController.sheetTemplate.getObject(O.id):null,2===m.length&&P!==N?z=null:x=K):N&&(O=a.querySelector('[id="'+m[1].getAttribute("parent")+'"]'),P=O?a.sheetTemplateController.sheetTemplate.getObject(O.id):null,P!==M?z=null:x=L)),I||(p&&p.elements&&1===p.elements.length&&p.extraData&&p.extraData.reselect&&p.elements[0].classList.contains("textshowadorners")?(Array.from(a.querySelectorAll(".textshowadorners")).forEach(function(a){a.classList.remove("textshowadorners")}),Array.from(a.querySelectorAll(".textshowedit")).forEach(function(a){a.classList.remove("textshowedit")}),p.elements[0].classList.add("textshowedit")):(Array.from(a.querySelectorAll(".textshowadorners")).forEach(function(a){a.classList.remove("textshowadorners")}),Array.from(a.querySelectorAll(".textshowedit")).forEach(function(a){a.classList.remove("textshowedit")}),x?x.classList.add("textshowadorners"):p&&p.elements&&1===p.elements.length&&p.elements[0].classList.add("textshowadorners"))),z){A=a.sheetTemplateController.design.findInstancesOfTemplate(z.templateGUID);var Q=null;if(A&&A.length>0&&A[0]&&A[0].variableName&&(Q=A[0].variableName),Q){var R=z?z.parent||P:null;R&&(v=G?G.getInstanceOrModelVariable(a.contextGUID,R.templateGUID,Q,!0):null,w=G?G.getInstanceOrModelVariable(a.contextGUID,R.templateGUID,Q,!1):null,D=G?G.getInstanceOrModelProperty(a.contextGUID,R.templateGUID,Q,!1):null,C=O,y=Q,B=R)}}if(void 0===v&&z&&H&&void 0===y&&z.children)for(var S=0;S<z.children.length;S++)if(A=a.sheetTemplateController.design.findInstancesOfTemplate(z.children[S].templateGUID),A&&A.length>0&&A[0]&&A[0].variableName&&(y=A[0].variableName),y&&(z=z.children[S],x=a.getSingleObject(z.templateGUID),B=z?z.parent:null)){v=G?G.getInstanceOrModelVariable(a.contextGUID,B.templateGUID,y,!0):null;break}}if((a.sheetTemplateController.design.simulationController.simulationState!==i.Stopped||"simulation"===l)&&B){var T=a.sheetTemplateController.design.findInstance(a.contextGUID,B.templateGUID);if(T&&T.modelInstanceData&&T.modelInstanceData[T.activeModelID]){var U=a.sheetTemplateController.componentAPI,V=U.getModelInstanceProperty(T.activeModelID,y);null===V&&(V=U.getModelDefinitionProperty(T.activeModelID,y)),V&&V.spiceParameters&&V.spiceParameters.length||(y=null)}}q.doReposition&&(o.commandInterface.getCommandObject("deleteobject").enabled=!0,k.parentNode.classList.remove("visibleonschematicproperties"),k.parentNode.classList.remove("childtextselected"),a.viewObject.listeners.removeListener(a.viewObject.viewEvents.CHANGED,q.doReposition),q.updateRefdes&&a.sheetTemplateController.design.listeners.removeListener(h.DESIGN_CHANGED,q.updateRefdes),q.removeEventListener("panstart",u),q.doReposition=null,q.updateRefdes=null,q._previousSelectClearTimer=setTimeout(function(){q._previousSelectedPropertyApplyObject=null,q._previousSelectClearTimer=null},1e3));var W=C&&q._previousSelectedPropertyApplyObject===C||q._previousSelectedPropertyApplyObject===z;if((y||z&&!C)&&m){W||(q._myOffset={x:0,y:0}),q.doReposition=function(){var a=v?(C||x).getBoundingClientRect():x.getBoundingClientRect(),b=x.getBoundingClientRect(),c=k.getBoundingClientRect(),d=q.getBoundingClientRect();q.style.position="absolute";var e=(a.left+a.right)/2-c.left,f=0;q.style.left=y?e-d.width/2+q._myOffset.x+"px":a.left-c.left+q._myOffset.x+"px",v?(f=Math.max(a.bottom,b.bottom)-c.top,q.style.top=f+q._myOffset.y+"px"):(f=Math.min(a.top,b.top)-c.top-d.height,q.style.top=f+q._myOffset.y+"px")},q.doReposition(),q.addEventListener("panstart",u),a.viewObject.listeners.addListener(a.viewObject.viewEvents.CHANGED,q.doReposition);var X=["initialConditions","Expression"];if(v||H||!y||F&&!X.find(function(a){return a===y})){if(v){E=!0,q.classList.remove("nomaxwidth"),q.sliderEnabled=!0,q.textEditEnabled=!1,q.$.slider.unit=D?D.units:"",q.$.slider.varname=D?(D.fullName||D.name||"")+":":"",q._previousSelectClearTimer&&clearTimeout(q._previousSelectClearTimer),W||(q._myOffset={x:0,y:0}),q.updateRefdes=function(){var b=q.$.slider.refdes;if(C){var c=a.sheetTemplateController.design.findInstance(a.contextGUID,C.id);if(c&&c.designComponent){var d=c.designComponent.isMultiSection();b=e(c.designComponent.refDes,d?c.sectionName:void 0,{})}}else b="";b!==q.$.slider.refdes&&(q.$.slider.refdes=b)},B&&q.$.slider.setPropertyController(o,a.sheetTemplateController.propertyController,a.contextGUID,B.templateGUID,y);var Y=function(b,c,d,e){var f=G.undo.endActionAllowed;window.multisim.tryCatchAll(function(){G.undo.endActionAllowed=d,G.isInstanceOrModelPropertyInvalid(a.contextGUID,B.templateGUID,y,b,function(f){if(f&&!f.errorMessage&&(f=null),!f&&c){(G.getInstanceOrModelVariable(a.contextGUID,B.templateGUID,y)!==b||G.undo.hasValidAction()&&d)&&G.changeInstanceOrModelVariable(a.contextGUID,B.templateGUID,y,b,!0)}e(f)})}),G.undo.endActionAllowed=f};q.$.slider.onValueChange=Y,D&&"phase"===D.propertyType?(q.$.slider.setRange(-180,180,2),q.$.slider.showSignToggle=!1,q.$.slider.showMagnitudeControls=!1,q.$.slider.$$(".slider-container").classList.remove("allControlsShown"),q.$.slider.$.signbutton.classList.remove("controlShown"),q.$.slider.$.times10button.classList.remove("controlShown"),q.$.slider.$.div10button.classList.remove("controlShown"),q.$.slider.siPrefix=!1,q.$.slider.precision=3,q.$.slider.wholeNumbers=!0,q.$.slider.clampValue=function(a){var b=a;return(b<-180||b>180)&&(b%=360,b>180&&(b-=360),b<-180&&(b+=360),n.notify(d.i18n.translate("The value %1$s was changed to the equivalent value %2$s.").fetch(a,b),n.ETypes.NT_INFO)),b}):D&&"percent"===D.propertyType?(q.$.slider.setRange(0,100,.5),q.$.slider.showSignToggle=!1,q.$.slider.showMagnitudeControls=!1,q.$.slider.$$(".slider-container").classList.remove("allControlsShown"),q.$.slider.$.signbutton.classList.remove("controlShown"),q.$.slider.$.times10button.classList.remove("controlShown"),q.$.slider.$.div10button.classList.remove("controlShown"),q.$.slider.siPrefix=!1,q.$.slider.precision=3,q.$.slider.wholeNumbers=!1,q.$.slider.clampValue=null):D&&"unitInterval"===D.propertyType?(q.$.slider.setRange(0,1,.005),q.$.slider.showSignToggle=!1,q.$.slider.showMagnitudeControls=!1,q.$.slider.$$(".slider-container").classList.remove("allControlsShown"),q.$.slider.$.signbutton.classList.remove("controlShown"),q.$.slider.$.times10button.classList.remove("controlShown"),q.$.slider.$.div10button.classList.remove("controlShown"),q.$.slider.siPrefix=!1,q.$.slider.precision=4,q.$.slider.wholeNumbers=!1,q.$.slider.clampValue=null):(q.$.slider.clearRange(),q.$.slider.showSignToggle=!0,q.$.slider.showMagnitudeControls=!0,q.$.slider.$$(".slider-container").classList.add("allControlsShown"),q.$.slider.$.signbutton.classList.add("controlShown"),q.$.slider.$.times10button.classList.add("controlShown"),q.$.slider.$.div10button.classList.add("controlShown"),q.$.slider.siPrefix=!0,q.$.slider.precision=3,q.$.slider.wholeNumbers=!1,q.$.slider.clampValue=null),q.$.slider.displayInputFieldValue(v)}else if(z&&!C&&!F&&(I||(b.isSafari&&b.isIos?(q.$.multilinevaluetext.select(),q.$.multilinevaluetext.focus()):setTimeout(function(){q.$.multilinevaluetext.select(),q.$.multilinevaluetext.focus()},500)),q.textEditEnabled=!0,q.multiline=!0,q.sliderEnabled=!1,q.doReposition(),q.classList.add("nomaxwidth"),q.stringID=q.stringValue,x.classList.contains("textshowedit"))){q._previousSelectClearTimer&&clearTimeout(q._previousSelectClearTimer),E=!0;var Z=a.sheetTemplateController.design.findInstance(a.contextGUID,z.templateGUID);a.sheetTemplateController.textController.attachModifyInput(this.$.multilinevaluetext,function(){return a},Z)}}else if(I||(q.multiline=D&&"string"===D.propertyType,b.isSafari&&b.isIos?q.multiline?(q.$.multilinevaluetext.select(),q.$.multilinevaluetext.focus()):(q.$.valuetext.focus(),q.$.valuetext.select()):setTimeout(function(){q.multiline?(q.$.multilinevaluetext.select(),q.$.multilinevaluetext.focus()):(q.$.valuetext.focus(),q.$.valuetext.select())},500)),q.classList.remove("nomaxwidth"),q.textEditEnabled=!0,q.sliderEnabled=!1,q.doReposition(),x.classList.contains("textshowedit"))switch(q._previousSelectClearTimer&&clearTimeout(q._previousSelectClearTimer),y){case"refdes":if(C){var $=a.sheetTemplateController.design.findInstance(a.contextGUID,C.id);E=!0,a.sheetTemplateController.componentController.attachModifyInput(this.$.valuetext,void 0,function(){return a},$)}break;case"connectorID":if(C){var _=a.sheetTemplateController.design.findInstance(a.contextGUID,C.id);E=!a.sheetTemplateController.design.getConnectorHub(_.connectorHub.connectorID,"ground"),a.sheetTemplateController.connectorController.attachModifyInput(this.$.valuetext,function(){return a},_,o.$.splitConnectorDialog)}break;case"probeID":if(C){var aa=a.sheetTemplateController.design.findInstance(a.contextGUID,C.id);E=!0,a.sheetTemplateController.design.probeController.attachModifyInput(this.$.valuetext,function(){return a},aa)}break;case"netName":if(C){var ba=a.sheetTemplateController.design.findInstance(a.contextGUID,C.id);E=!a.sheetTemplateController.design.getConnectorHub(ba.netName,"ground"),a.sheetTemplateController.design.netlistController.attachModifyInput(this.$.valuetext,function(){return a},ba,y)}break;case"initialConditions":if(C){this.stringID=d.i18n.translate("Transient IC").fetch()+":";var ca=a.sheetTemplateController.design.findInstance(a.contextGUID,C.id);E=!0,a.sheetTemplateController.design.netlistController.attachModifyInput(this.$.valuetext,function(){return a},ca,y)}break;default:C&&w&&(q.multiline&&q.classList.add("nomaxwidth"),this.stringID=D?(D.fullName||D.name||"")+":":"",E=!0,J(q.multiline?q.$.multilinevaluetext:this.$.valuetext,a,G,B.templateGUID,y))}if(q.updateRefdes&&(q.updateRefdes(),a.sheetTemplateController.design.listeners.addListener(h.DESIGN_CHANGED,q.updateRefdes)),!W){var da={x:q.offsetLeft,y:q.offsetTop},ea=a.viewObject.viewElement.getBoundingClientRect(),fa=q.getBoundingClientRect();fa.right>ea.right&&(q.style.left=q.offsetLeft-(fa.right-ea.right)+"px"),fa.bottom>ea.bottom&&(q.style.top=q.offsetTop-(fa.bottom-ea.bottom)+"px"),fa=q.getBoundingClientRect(),fa.left<ea.left+40&&(q.style.left=q.offsetLeft-(fa.left-(ea.left+40))+"px"),fa.top<ea.top&&(q.style.top=q.offsetTop-(fa.top-ea.top)+"px"),q._myOffset={x:q.offsetLeft-da.x,y:q.offsetTop-da.y}}z&&C&&k.parentNode.classList.add("childtextselected"),E&&(k.parentNode.classList.add("visibleonschematicproperties"),q.sliderEnabled&&p&&"scroll"!==p.command&&q.$.slider.activate(),o.commandInterface.getCommandObject("deleteobject").enabled=!1),q._previousSelectedPropertyApplyObject=C||z}},get commandContextHelper(){return this._commandContextHelper},attached:function(){var a=this;a.addEventListener("tap",function(b){b.stopPropagation(),b.preventDefault(),a.sliderEnabled&&!a.$.slider.$.valuetext.isPresentlySelected&&a.$.slider.activate()}),a.addEventListener("doubletap",function(a){a.stopPropagation(),a.preventDefault()}),a.addEventListener("press",function(a){a.stopPropagation(),a.preventDefault()}),a.addEventListener("touchmove",function(b){for(var c=b.target;c&&c!=a.$.valuetext&&c!=a.$.multilinevaluetext;)c=c.parentNode;c||b.preventDefault()})}})}(window.Polymer,window.multisim.browserDetect)}}}),a.register("fc",[],function(){return{setters:[],execute:function(){}}}),a.register("fd",[],function(){return{setters:[],execute:function(){}}}),a.register("fe",[],function(){return{setters:[],execute:function(){}}}),a.register("b6",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a})}}}),a.register("ff",["b6","21"],function(a,b){"use strict";var c,d,e,f;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){f=Object.freeze((e={},c(e,d.DC_SWEEP,!0),c(e,d.PARAM_SWEEP,!0),e)),a("default",f)}}}),a.register("100",[],function(){return{setters:[],execute:function(){}}}),a.register("d6",["a7","bc","21","ff","29","32","3e","100"],function(a,b){"use strict";var c,d,e,f,g;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.ECommandContexts},function(a){}],execute:function(){!function(){window.Polymer({is:"active-analysis-selector",properties:{contextHelper:{reflectToAttribute:!1,type:Object,value:null},abbreviated:{reflectToAttribute:!0,type:Boolean,value:!1},readonly:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_readonlyChanged"}},_readonlyChanged:function(){this.$.analysisSelect.readonly=this.readonly},get visible(){return!this.contextHelper||this.contextHelper.testContextVisible()},init:function(a,b,h){this.readonly=h.commandInterface.activeAppMode===g.CC_EMBEDDED;var i=this;i.contextHelper=b;var j=function(b){e.addReadyListener(function(){var e="premium"===b.subscription||h.commandInterface.activeAppMode===g.CC_EMBEDDED;i.$.analysisSelect.options=Object.keys(c).filter(function(a){return!d[c[a]]||e}).map(function(b){return{value:c[b],displayText:a.getAnalysisText(c[b],i.abbreviated)}}),d[i.$.analysisSelect.value]&&!e&&(i.$.analysisSelect.value=c.Interactive)})};h.fileDataController.listeners.addListener(h.fileDataController.fileDataEvents.FDE_SUBSCRIPTION_CHANGED,j),h.fileDataController.getSubscriptionInfo(j),i.$.analysisSelect.commandContextHelper=b,i.$.analysisSelect.onValueChange=function(){a.activeAnalysis=i.$.analysisSelect.value},a.listeners.addListener(f.ActiveAnalysisChanged,function(a){i.$.analysisSelect.value=a.activeAnalysis}),i.$.analysisSelect.value=a.activeAnalysis}})}()}}}),a.register("101",[],function(){return{setters:[],execute:function(){}}}),a.register("102",["a7","51","106","103","104","bc","105","21","3b","29","32","101"],function(a,b){"use strict";var c,d,e,f,g;return{setters:[function(a){},function(a){c=a.default},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){d=a.default},function(a){e=a.switchEnteredChars},function(a){f=a.default},function(a){g=a.default},function(a){}],execute:function(){!function(a){function b(a,b){a.$.startFrequency.value=b.startFrequency,a.$.stopFrequency.value=b.stopFrequency,a.$.sweepTypeSelector.value=b.sweepType,a.$.points.value=b.pointCount,a.$.runName.value=b.runName,a.$.magnitudeScale.value=b.magnitudeScaleType}function h(a){a.$.startFrequency.validate(),a.$.stopFrequency.validate(),a.$.points.validate(),a.$.runName.validate()}a({is:"ac-sweep-settings",behaviors:[a.InitializeHelp],properties:{simulationController:{reflectToAttribute:!1,type:Object,value:null},stringName:String,stringFrequencies:String,stringSweepConfiguration:String,stringStart:String,stringStop:String,stringPointsperdecade:String,stringMagnitudeScale:String},init:function(a,i){var j=this;f.addReadyListener(function(a){j.stringName=a.i18n.translate("Name").fetch(),j.stringFrequencies=a.i18n.translate("Frequencies").fetch(),j.stringSweepConfiguration=a.i18n.translate("Sweep configuration").fetch(),j.stringStart=a.i18n.translate("Start frequency").fetch(),j.stringStop=a.i18n.translate("Stop frequency").fetch(),j.stringPointsperdecade=a.i18n.translate("Points per decade").fetch(),j.stringMagnitudeScale=a.i18n.translate("Vertical scale").fetch()}),j.simulationController=a,j.settingsModel=a.getSimulationSettings(d.AC),j.$.startFrequency.validator=function(a,b){var c=j.settingsModel.validate(j);j.$.startFrequency.title=j.settingsModel.startFrequencyValue,b({valid:c.startFrequency,errorMessage:c.startFrequencyError})},j.$.stopFrequency.validator=function(a,b){var c=j.settingsModel.validate(j);j.$.stopFrequency.title=j.settingsModel.stopFrequencyValue,b({valid:c.stopFrequency,errorMessage:c.stopFrequencyError})},j.$.points.validator=function(a,b){var c=j.settingsModel.validate(j);j.$.points.title=j.settingsModel.pointCountValue,b({valid:c.pointCount,errorMessage:c.pointCountError})},j.$.startFrequency.commandContextHelper=i.createCommandContextHelper({disable:"all"}),j.$.stopFrequency.commandContextHelper=i.createCommandContextHelper({disable:"all"}),j.$.points.commandContextHelper=i.createCommandContextHelper({disable:"all"}),j.$.magnitudeScale.commandContextHelper=i.createCommandContextHelper({disable:"all"});var k=function(a){e(this.$.multisimTextInput,a),j.settingsModel.startFrequency=a,h(j),j.simulationController.notifySimulationSettingsUpdated(j)};j.$.startFrequency.onValueChange=k,j.$.startFrequency.oninput=k;var l=function(a){e(this.$.multisimTextInput,a),j.settingsModel.stopFrequency=a,h(j),j.simulationController.notifySimulationSettingsUpdated(j)};j.$.stopFrequency.onValueChange=l,j.$.stopFrequency.oninput=l;var m=function(a){e(this.$.multisimTextInput,a),j.settingsModel.pointCount=a,j.simulationController.notifySimulationSettingsUpdated(j)};j.$.points.onValueChange=m,j.$.points.oninput=m,j.$.sweepTypeSelector.options=[{value:c.DECADE,displayText:f.i18n.translate("Decade").fetch()},{value:c.LINEAR,displayText:f.i18n.translate("Linear").fetch()},{value:c.OCTAVE,displayText:f.i18n.translate("Octave").fetch()}],j.$.sweepTypeSelector.onValueChange=function(){j.settingsModel.sweepType=this.value,j.$.points.label="linear"==this.value?f.i18n.translate("Points").fetch():f.i18n.translate("Points per "+this.value).fetch(),j.simulationController.notifySimulationSettingsUpdated(j)};var n=i.createCommandContextHelper({disable:"all"});j.$.sweepTypeSelector.commandContextHelper=n,j.$.magnitudeScale.options=[{value:c.LOGARITHMIC,displayText:f.i18n.translate("Logarithmic").fetch()},{value:c.LINEAR,displayText:f.i18n.translate("Linear").fetch()},{value:c.DECIBEL,displayText:f.i18n.translate("Decibel").fetch()},{value:c.OCTAVE,displayText:f.i18n.translate("Octave").fetch()}],j.$.magnitudeScale.onValueChange=function(){j.settingsModel.magnitudeScaleType=this.value,j.simulationController.notifySimulationSettingsUpdated(j)},j.$.runName.validator=function(a,b){var c=j.settingsModel.validate(j);b({valid:c.simName,errorMessage:c.simNameError})};var o=function(a){j.settingsModel.runName=a,j.simulationController.notifySimulationSettingsUpdated(j)};j.$.runName.oninput=o,j.$.runName.onValueChange=o,j.$.runName.validate(),j.$.runName.commandContextHelper=i.createCommandContextHelper({disable:"all"}),j.settingsChangeListener=function(a){a.changeSource!=j&&b(j,j.settingsModel)},j.simulationController.listeners.addListener(g.SimulationSettingsChanged,j.settingsChangeListener),b(j,j.settingsModel),j.behaviors[0]._initializeHelpAsync(j,window.multisim.rootFolder+"resources/help_en/help-simulation-settings.json")},detached:function(){var a=this,b=a.settingsChangeListener;b&&(a.simulationController.listeners.removeListener(g.SimulationSettingsChanged,b),a.settingsChangeListener=null)}})}(window.Polymer)}}}),a.register("107",[],function(){return{setters:[],execute:function(){}}}),a.register("108",["b9","29","30","107"],function(a,b){"use strict";var c,d;return{setters:[function(a){},function(a){c=a.default},function(a){d=a.default},function(a){}],execute:function(){!function(){function a(a,b){a.$.globalProbeToggle.checked=b.probeController.getGlobalProbeSettings()}window.Polymer({is:"global-probe-settings",properties:{stringIncludePeriodic:String},initialize:function(b){var e=this;c.addReadyListener(function(a){e.stringIncludePeriodic=a.i18n.translate("Include periodic").fetch()}),e.$.globalProbeToggle.onValueChange=function(a){b.activeDesign.probeController.setGlobalProbeSettings(a)};var f=function(){a(e,b.activeDesign)};b.activeDesign.listeners.addListener(d.GLOBAL_PROBE_SETTINGS_CHANGED,f),b.listeners.addListener(b.events.ACTIVEDESIGNCHANGED,function(b){b.oldDesign&&b.oldDesign.listeners.removeListener(d.GLOBAL_PROBE_SETTINGS_CHANGED,f),b.activeDesign&&(b.activeDesign.listeners.addListener(d.GLOBAL_PROBE_SETTINGS_CHANGED,f),a(e,b.activeDesign))}),a(e,b.activeDesign)}})}()}}}),a.register("109",[],function(){return{setters:[],execute:function(){}}}),a.register("10a",["a7","106","103","104","b9","bc","108","105","21","3b","29","32","109"],function(a,b){"use strict";var c,d,e,f;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.switchEnteredChars},function(a){e=a.default},function(a){f=a.default},function(a){}],execute:function(){!function(a){function b(a){a.settingsModel.userDefinedTMax?(a.$.tmax.disabled=!1,a.$.tmax.value=a.settingsModel.tMax):(a.$.tmax.disabled=!0,a.$.tmax.value=e.i18n.translate("Automatic").fetch())}function g(a){a.settingsModel.userDefinedTStep?(a.$.tstep.disabled=!1,a.$.tstep.value=a.settingsModel.tStep):(a.$.tstep.disabled=!0,a.$.tstep.value=e.i18n.translate("Automatic").fetch())}function h(a){a.$.endTime.validate(),a.$.tmax.validate(),a.$.tstep.validate()}function i(a,c){a.$.endTime.value=c.stopTime,a.$.initialConditionsSelector.value=c.initialConditions,a.$.toggleTMax.checked=c.userDefinedTMax,b(a),a.$.toggleTStep.checked=c.userDefinedTStep,g(a),a.$.runName.value=c.runName,h(a)}a({is:"interactive-settings",behaviors:[a.InitializeHelp],properties:{simulationController:{reflectToAttribute:!1,type:Object,value:null},stringName:String,stringInitialConditions:String,stringMaximumTimeStep:String,stringInitialTimeStep:String,stringProbeMeasurements:String,stringStartTime:String,stringEndTime:String,stringTimeStep:String},init:function(a,j){var k=this;e.addReadyListener(function(a){k.stringName=a.i18n.translate("Name").fetch(),k.stringInitialConditions=a.i18n.translate("Initial conditions").fetch(),k.stringMaximumTimeStep=a.i18n.translate("Maximum time step").fetch(),k.stringInitialTimeStep=a.i18n.translate("Initial time step").fetch(),k.stringProbeMeasurements=a.i18n.translate("Probe measurements").fetch(),k.stringStartTime=a.i18n.translate("Start time").fetch(),k.stringEndTime=a.i18n.translate("End time").fetch(),k.stringTimeStep=a.i18n.translate("Time step").fetch()}),k.simulationController=a,k.settingsModel=a.getSimulationSettings(c.Interactive),k.$.endTime.label=e.i18n.translate("End time").fetch(),k.$.endTime.validator=function(a,b){var c=k.settingsModel.validate(k);k.$.endTime.title=k.settingsModel.stopTimeValue,b({valid:c.stopTime,errorMessage:c.stopTimeError})},k.$.endTime.commandContextHelper=j.createCommandContextHelper({disable:"all"});var l=function(a){d(this.$.multisimTextInput,a),k.settingsModel.stopTime=a,h(k),k.simulationController.notifySimulationSettingsUpdated(k)};k.$.endTime.onValueChange=l,k.$.endTime.oninput=l,k.$.initialConditionsSelector.options=[{value:k.settingsModel.initialConditionsEnum.AUTOMATIC,displayText:e.i18n.translate("Determine automatically").fetch()},{value:k.settingsModel.initialConditionsEnum.CALCDC,displayText:e.i18n.translate("DC bias point").fetch()},{value:k.settingsModel.initialConditionsEnum.USER,displayText:e.i18n.translate("User defined").fetch()}];var m=j.createCommandContextHelper({disable:"all"});k.$.initialConditionsSelector.commandContextHelper=m,k.$.initialConditionsSelector.onValueChange=function(){k.settingsModel.initialConditions=this.value,k.simulationController.notifySimulationSettingsUpdated(k)},k.$.toggleTMax.onValueChange=function(){k.settingsModel.userDefinedTMax=this.checked,b(k),h(k),k.simulationController.notifySimulationSettingsUpdated(k)},k.$.toggleTMax.label=e.i18n.translate("Manual time step").fetch(),k.$.toggleTMax.commandContextHelper=j.createCommandContextHelper({disable:"all"}),k.$.tmax.label=e.i18n.translate("Time step").fetch(),k.$.tmax.validator=function(a,b){var c=k.settingsModel.validate(k);k.$.tmax.title=k.settingsModel.tMaxValue,b({valid:c.tMax,errorMessage:c.tMaxError})},k.$.tmax.commandContextHelper=j.createCommandContextHelper({disable:"all"});var n=function(a){d(this.$.multisimTextInput,a),k.settingsModel.tMax=a,h(k),k.simulationController.notifySimulationSettingsUpdated(k)};k.$.tmax.onValueChange=n,k.$.tmax.oninput=n,k.$.toggleTStep.onValueChange=function(){k.settingsModel.userDefinedTStep=this.checked,g(k),h(k),k.simulationController.notifySimulationSettingsUpdated(k)},k.$.toggleTStep.label=e.i18n.translate("Manual time step").fetch(),k.$.toggleTStep.commandContextHelper=j.createCommandContextHelper({disable:"all"}),k.$.tstep.label=e.i18n.translate("Time step").fetch(),k.$.tstep.validator=function(a,b){var c=k.settingsModel.validate(k);k.$.tstep.title=k.settingsModel.tStepValue,b({valid:c.tStep,errorMessage:c.tStepError})},k.$.tstep.commandContextHelper=j.createCommandContextHelper({disable:"all"});var o=function(a){d(this.$.multisimTextInput,a),k.settingsModel.tStep=a,h(k),k.simulationController.notifySimulationSettingsUpdated(k)};k.$.tstep.onValueChange=o,k.$.tstep.oninput=o,k.$.runName.validator=function(a,b){var c=k.settingsModel.validate(k);b({valid:c.simName,errorMessage:c.simNameError})};var p=function(a){k.settingsModel.runName=a,k.simulationController.notifySimulationSettingsUpdated(k)};k.$.runName.oninput=p,k.$.runName.onValueChange=p,k.$.runName.validate(),k.$.runName.commandContextHelper=j.createCommandContextHelper({disable:"all"}),k.settingsChangeListener=function(a){a.changeSource!=k&&i(k,k.settingsModel)},k.simulationController.listeners.addListener(f.SimulationSettingsChanged,k.settingsChangeListener),i(k,k.settingsModel),k.behaviors[0]._initializeHelpAsync(k,window.multisim.rootFolder+"resources/help_en/help-simulation-settings.json")},detached:function(){var a=this,b=a.settingsChangeListener;b&&(a.simulationController.listeners.removeListener(f.SimulationSettingsChanged,b),a.settingsChangeListener=null)}})}(window.Polymer)}}}),a.register("10b",[],function(){return{setters:[],execute:function(){}}}),a.register("10c",["a7","106","104","105","21","29","32","10b"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){!function(a){function b(a,b){a.$.runName.value=b.runName}a({is:"dc-op-settings",behaviors:[a.InitializeHelp],properties:{simulationController:{reflectToAttribute:!1,type:Object,value:null},stringName:String},init:function(a,f){var g=this;g.simulationController=a,d.addReadyListener(function(a){g.stringName=a.i18n.translate("Name").fetch()}),g.settingsModel=a.getSimulationSettings(c.DC),g.$.runName.validator=function(a,b){var c=g.settingsModel.validate(g);b({valid:c.simName,errorMessage:c.simNameError})};var h=function(a){g.settingsModel.runName=a,g.simulationController.notifySimulationSettingsUpdated(g)};g.$.runName.oninput=h,g.$.runName.onValueChange=h,g.$.runName.validate(),g.$.runName.commandContextHelper=f.createCommandContextHelper({disable:"all"}),g.settingsChangeListener=function(a){a.changeSource!=g&&b(g,g.settingsModel)},g.simulationController.listeners.addListener(e.SimulationSettingsChanged,g.settingsChangeListener),b(g,g.settingsModel),g.behaviors[0]._initializeHelpAsync(g,window.multisim.rootFolder+"resources/help_en/help-simulation-settings.json")},detached:function(){var a=this,b=a.settingsChangeListener;b&&(a.simulationController.listeners.removeListener(e.SimulationSettingsChanged,b),a.settingsChangeListener=null)}})}(window.Polymer)}}}),a.register("10d",[],function(){return{setters:[],execute:function(){}}}),a.register("10e",["a7","106","103","104","b9","bc","105","21","3b","29","32","10d"],function(a,b){"use strict";var c,d,e,f;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.switchEnteredChars},function(a){e=a.default},function(a){f=a.default},function(a){}],execute:function(){!function(a){function b(a){a.settingsModel.userDefinedTMax?(a.$.tmax.disabled=!1,a.$.tmax.value=a.settingsModel.tMax):(a.$.tmax.disabled=!0,a.$.tmax.value=e.i18n.translate("Automatic").fetch())}function g(a){a.settingsModel.userDefinedTStep?(a.$.tstep.disabled=!1,a.$.tstep.value=a.settingsModel.tStep):(a.$.tstep.disabled=!0,a.$.tstep.value=e.i18n.translate("Automatic").fetch())}function h(a){a.$.startTime.validate(),a.$.endTime.validate(),a.$.tmax.validate(),a.$.tstep.validate()}function i(a,c){a.$.startTime.value=c.startTime,a.$.endTime.value=c.stopTime,a.$.initialConditionsSelector.value=c.initialConditions,a.$.toggleTMax.checked=c.userDefinedTMax,b(a),a.$.toggleTStep.checked=c.userDefinedTStep,g(a),a.$.runName.value=c.runName,h(a)}a({is:"transient-settings",behaviors:[a.InitializeHelp],properties:{simulationController:{reflectToAttribute:!1,type:Object,value:null},stringName:String,stringInitialConditions:String,stringMaximumTimeStep:String,stringInitialTimeStep:String,stringStartTime:String,stringEndTime:String},init:function(a,j){var k=this;e.addReadyListener(function(a){k.stringName=a.i18n.translate("Name").fetch(),k.stringInitialConditions=a.i18n.translate("Initial conditions").fetch(),k.stringMaximumTimeStep=a.i18n.translate("Maximum time step").fetch(),k.stringInitialTimeStep=a.i18n.translate("Initial time step").fetch(),k.stringStartTime=a.i18n.translate("Start time").fetch(),k.stringEndTime=a.i18n.translate("End time").fetch()}),k.simulationController=a,k.settingsModel=a.getSimulationSettings(c.Transient),k.$.startTime.label=e.i18n.translate("Start time").fetch(),k.$.endTime.label=e.i18n.translate("End time").fetch(),k.$.startTime.validator=function(a,b){var c=k.settingsModel.validate(k);k.$.startTime.title=k.settingsModel.startTimeValue,b({valid:c.startTime,errorMessage:c.startTimeError})},k.$.startTime.commandContextHelper=j.createCommandContextHelper({disable:"all"});var l=function(a){d(this.$.multisimTextInput,a),k.settingsModel.startTime=a,h(k),k.simulationController.notifySimulationSettingsUpdated(k)};k.$.startTime.onValueChange=l,k.$.startTime.oninput=l,k.$.endTime.validator=function(a,b){var c=k.settingsModel.validate(k);k.$.endTime.title=k.settingsModel.stopTimeValue,b({valid:c.stopTime,errorMessage:c.stopTimeError})},k.$.endTime.commandContextHelper=j.createCommandContextHelper({disable:"all"});var m=function(a){d(this.$.multisimTextInput,a),k.settingsModel.stopTime=a,h(k),k.simulationController.notifySimulationSettingsUpdated(k)};k.$.endTime.onValueChange=m,k.$.endTime.oninput=m,k.$.initialConditionsSelector.options=[{value:k.settingsModel.initialConditionsEnum.AUTOMATIC,displayText:e.i18n.translate("Determine automatically").fetch()},{value:k.settingsModel.initialConditionsEnum.CALCDC,displayText:e.i18n.translate("DC bias point").fetch()},{value:k.settingsModel.initialConditionsEnum.USER,displayText:e.i18n.translate("User defined").fetch()}];var n=j.createCommandContextHelper({disable:"all"});k.$.initialConditionsSelector.commandContextHelper=n,k.$.initialConditionsSelector.onValueChange=function(){k.settingsModel.initialConditions=this.value,k.simulationController.notifySimulationSettingsUpdated(k)},k.$.toggleTMax.onValueChange=function(){k.settingsModel.userDefinedTMax=this.checked,b(k),h(k),k.simulationController.notifySimulationSettingsUpdated(k)},k.$.toggleTMax.label=e.i18n.translate("Manual time step").fetch(),k.$.toggleTMax.commandContextHelper=j.createCommandContextHelper({disable:"all"}),k.$.tmax.label=e.i18n.translate("Time step").fetch(),k.$.tmax.validator=function(a,b){var c=k.settingsModel.validate(k);k.$.tmax.title=k.settingsModel.tMaxValue,b({valid:c.tMax,errorMessage:c.tMaxError})},k.$.tmax.commandContextHelper=j.createCommandContextHelper({disable:"all"});var o=function(a){d(this.$.multisimTextInput,a),k.settingsModel.tMax=a,h(k),k.simulationController.notifySimulationSettingsUpdated(k)};k.$.tmax.onValueChange=o,k.$.tmax.oninput=o,k.$.toggleTStep.onValueChange=function(){k.settingsModel.userDefinedTStep=this.checked,g(k),h(k),k.simulationController.notifySimulationSettingsUpdated(k)},k.$.toggleTStep.label=e.i18n.translate("Manual time step").fetch(),k.$.toggleTStep.commandContextHelper=j.createCommandContextHelper({disable:"all"}),k.$.tstep.label=e.i18n.translate("Time step").fetch(),k.$.tstep.validator=function(a,b){var c=k.settingsModel.validate(k);k.$.tstep.title=k.settingsModel.tStepValue,b({valid:c.tStep,errorMessage:c.tStepError})},k.$.tstep.commandContextHelper=j.createCommandContextHelper({disable:"all"});var p=function(a){d(this.$.multisimTextInput,a),k.settingsModel.tStep=a,h(k),k.simulationController.notifySimulationSettingsUpdated(k)};k.$.tstep.onValueChange=p,k.$.tstep.oninput=p,k.$.runName.validator=function(a,b){var c=k.settingsModel.validate(k);b({valid:c.simName,errorMessage:c.simNameError})};var q=function(a){k.settingsModel.runName=a,k.simulationController.notifySimulationSettingsUpdated(k)};k.$.runName.oninput=q,k.$.runName.onValueChange=q,k.$.runName.validate(),k.$.runName.commandContextHelper=j.createCommandContextHelper({disable:"all"}),k.settingsChangeListener=function(a){a.changeSource!=k&&i(k,k.settingsModel)},k.simulationController.listeners.addListener(f.SimulationSettingsChanged,k.settingsChangeListener),i(k,k.settingsModel),k.behaviors[0]._initializeHelpAsync(k,window.multisim.rootFolder+"resources/help_en/help-simulation-settings.json")},detached:function(){var a=this,b=a.settingsChangeListener;b&&(a.simulationController.listeners.removeListener(f.SimulationSettingsChanged,b),a.settingsChangeListener=null)}})}(window.Polymer)}}}),a.register("10f",[],function(){return{setters:[],execute:function(){}}}),a.register("110",["a7","106","103","104","b9","bc","105","21","3b","3c","29","55","30","32","10f"],function(a,b){"use strict";var c,d,e,f,g,h,i;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.switchEnteredChars},function(a){e=a.formatRefDes},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){}],execute:function(){!function(a){function b(a){a.$.source1.validate(),a.$.source1Start.validate(),a.$.source1Stop.validate(),a.$.source1Increment.validate(),a.$.source1Points.validate(),a.$.source2.validate(),a.$.source2Start.validate(),a.$.source2Stop.validate(),a.$.source2Increment.validate(),a.$.source2Points.validate()}function j(a){a.$.useSource2.checked?a.$.source2depended.classList.add("active"):a.$.source2depended.classList.remove("active"),a.$.source1Increment.disabled=a.$.source1IncrementOrPoints.value!=g.SM_INCREMENT,a.$.source1Points.disabled=a.$.source1IncrementOrPoints.value!=g.SM_POINTS,a.$.source2Increment.disabled=a.$.source2IncrementOrPoints.value!=g.SM_INCREMENT,a.$.source2Points.disabled=a.$.source2IncrementOrPoints.value!=g.SM_POINTS}function k(a,c,d){[{control:a.$.runName,update:function(){a.$.runName.value=c.runName}},{control:a.$.source1Start,update:function(){a.$.source1Start.value=c.source1Start}},{control:a.$.source1Stop,update:function(){a.$.source1Stop.value=c.source1Stop}},{control:a.$.source1Increment,update:function(){a.$.source1Increment.value=c.source1Increment}},{control:a.$.source1Points,update:function(){a.$.source1Points.value=c.source1Points}},{control:a.$.source1IncrementOrPoints,update:function(){a.$.source1IncrementOrPoints.value=c.source1StepMode}},{control:a.$.useSource2,update:function(){a.$.useSource2.checked=c.useSource2}},{control:a.$.source2Start,update:function(){a.$.source2Start.value=c.source2Start}},{control:a.$.source2Stop,update:function(){a.$.source2Stop.value=c.source2Stop}},{control:a.$.source2Increment,update:function(){a.$.source2Increment.value=c.source2Increment}},{control:a.$.source2Points,update:function(){a.$.source2Points.value=c.source2Points}},{control:a.$.source2IncrementOrPoints,update:function(){a.$.source2IncrementOrPoints.value=c.source2StepMode}}].filter(function(a){return a.control!=d}).forEach(function(a){a.update()}),b(a),j(a)}a({is:"dcsweep-settings",behaviors:[a.InitializeHelp],properties:{simulationController:{reflectToAttribute:!1,type:Object,value:null},stringName:String,stringStart:String,stringStop:String,stringIncrement:String,stringPoints:String,stringSource1:String,stringSource:String,stringUseSource2:String,stringSupplyIncrement:String,stringSupplyPoints:String},init:function(a,b,j){function l(){var a=p.find(function(a){return a.spicename==o.$.source1.value}),b=p.find(function(a){return a.spicename==o.$.source2.value}),c=a?a.units:"",d=b?b.units:"";o.$.source1Start.units=c,o.$.source1Stop.units=c,o.$.source1Increment.units=c,o.$.source2Start.units=d,o.$.source2Stop.units=d,o.$.source2Increment.units=d}function m(){var a=p.map(function(a){return{value:a.spicename,displayText:a.refdes,units:a.units,templateGUID:a.instance.templateGUID}}),b=o.$.source1.options.filter(function(a){return a.value===o.$.source1.value})[0],c=o.$.source2.options.filter(function(a){return a.value===o.$.source2.value})[0];if(o.$.source1.options=a,o.$.source2.options=a,o.$.source1.value=o.settingsModel.source1Name,!o.$.source1.options.find(function(a){return a.value==o.settingsModel.source1Name})){var d=b?o.$.source1.options.find(function(a){return a.templateGUID==b.templateGUID}):null;d?o.$.source1.value=d.value:o.$.source1.options.length?o.$.source1.value=o.$.source1.options[0].value:(o.$.source1.value="",o.$.source1.$$("#value").innerHTML=f.i18n.translate("Not available").fetch()),o.settingsModel.source1Name=o.$.source1.value}if(o.$.source2.value=o.settingsModel.source2Name,!o.$.source2.options.find(function(a){return a.value==o.settingsModel.source2Name})||o.$.source2.options.length<=1){if(o.$.source2.options.length<=1)o.$.source2.value="",o.$.source2.$$("#value").innerHTML=f.i18n.translate("Not available").fetch();else{var e=c?o.$.source2.options.find(function(a){return a.templateGUID==c.templateGUID}):null;if(e)o.$.source2.value=e.value;else for(var g=0;g<o.$.source2.options.length&&(o.$.source2.value=o.$.source2.options[g].value,o.$.source2.value==o.$.source1.value);g++);}o.settingsModel.source2Name=o.$.source2.value}k(o,o.settingsModel,null),l()}function n(){p=j.activeDesign.designComponents.reduce(function(a,b){return b.sectionInstances.forEach(function(b){a.push(b)}),a},[]).filter(function(a){var b=a.designComponent.oeclComponent.simModelBlueprints.find(function(b){return b.id==a.activeModelID});return b.instances.length&&b.instances[0].instance&&/^[vi]/i.test(b.instances[0].instance.trim())}).map(function(a){var b=a.designComponent.oeclComponent.simModelBlueprints.find(function(b){return b.id==a.activeModelID}),c=e(a.designComponent.refDes,a.designComponent.isMultiSection()?a.sectionName:"",{}),d=b.instances[0].instance.replace("{0}",c).split(/\s+/)[0];return{refdes:c,instance:a,spicename:d,units:/^i/i.test(b.instances[0].instance)?"A":"V"}}),m()}var o=this,p=[];j.listeners.addListener(j.events.ACTIVEDESIGNCHANGED,function(a){a.oldDesign&&a.oldDesign.listeners.removeListener(h.DESIGN_CHANGED,n),a.activeDesign&&a.activeDesign.listeners.addListener(h.DESIGN_CHANGED,n)}),j.activeDesign&&j.activeDesign.listeners.addListener(h.DESIGN_CHANGED,n),f.addReadyListener(function(a){o.stringName=a.i18n.translate("Name").fetch(),o.stringStart=a.i18n.translate("Start value").fetch(),o.stringStop=a.i18n.translate("Stop value").fetch(),o.stringIncrement=a.i18n.translate("Increment").fetch(),o.stringPoints=a.i18n.translate("Points").fetch(),o.stringSource1=a.i18n.translate("Source 1").fetch(),o.stringSource=a.i18n.translate("Source").fetch(),o.stringUseSource2=a.i18n.translate("Use Source 2").fetch(),o.stringSupplyIncrement=a.i18n.translate("Set step size in increments").fetch(),o.stringSupplyPoints=a.i18n.translate("Set number of points to step").fetch(),o.$.source1Stop.label=o.stringStop,o.$.source1Start.label=o.stringStart,o.$.source1.label=o.stringSource,o.$.source1Increment.label=o.stringIncrement,o.$.source1Points.label=o.stringPoints,o.$.useSource2.label=o.stringUseSource2,o.$.source2.label=o.stringSource,o.$.source2Start.label=o.stringStart,o.$.source2Stop.label=o.stringStop,o.$.source2Increment.label=o.stringIncrement,o.$.source2Points.label=o.stringPoints}),o.simulationController=a,o.settingsModel=a.getSimulationSettings(c.DC_SWEEP),o.$.source1IncrementOrPoints.options=[{value:g.SM_INCREMENT,displayText:o.stringSupplyIncrement},{value:g.SM_POINTS,displayText:o.stringSupplyPoints}],o.$.source2IncrementOrPoints.options=[{value:g.SM_INCREMENT,displayText:o.stringSupplyIncrement},{value:g.SM_POINTS,displayText:o.stringSupplyPoints}];var q=b.createCommandContextHelper({disable:"all"});o.$.runName.commandContextHelper=q,o.$.source1Start.commandContextHelper=q,o.$.source1Stop.commandContextHelper=q,o.$.source1Increment.commandContextHelper=q,o.$.source1Points.commandContextHelper=q,o.$.source2Start.commandContextHelper=q,o.$.source2Stop.commandContextHelper=q,o.$.source2Increment.commandContextHelper=q,o.$.source2Points.commandContextHelper=q,o.$.runName.oninput=o.$.runName.onValueChange=function(a){o.settingsModel.runName=a,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this)},o.$.runName.validator=function(a,b){var c=o.settingsModel.validate(o);b({valid:c.runName,errorMessage:c.runNameError})},o.$.source1.onValueChange=function(){o.settingsModel.source1Name=this.value,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this),l()},o.$.source1.validator=function(a,b){var c=o.settingsModel.validate(o);b({valid:c.source1Name,errorMessage:c.source1NameError})},o.$.source1Start.oninput=o.$.source1Start.onValueChange=function(a){d(this.$.multisimTextInput,a),o.settingsModel.source1Start=a,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this)},o.$.source1Start.validator=function(a,b){var c=o.settingsModel.validate(o);this.title=o.settingsModel.source1StartValue,b({valid:c.source1Start,errorMessage:c.source1StartError})},o.$.source1Stop.oninput=o.$.source1Stop.onValueChange=function(a){d(this.$.multisimTextInput,a),o.settingsModel.source1Stop=a,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this)},o.$.source1Stop.validator=function(a,b){var c=o.settingsModel.validate(o);this.title=o.settingsModel.source1StopValue,b({valid:c.source1Stop,errorMessage:c.source1StopError})},o.$.source1IncrementOrPoints.onValueChange=function(a){o.settingsModel.source1StepMode=a,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this)},o.$.source1Increment.oninput=o.$.source1Increment.onValueChange=function(a){d(this.$.multisimTextInput,a),o.settingsModel.source1Step=a,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this)},o.$.source1Increment.validator=function(a,b){var c=o.settingsModel.validate(o);this.title=o.settingsModel.source1Increment,b({valid:o.settingsModel.source1StepMode==g.SM_POINTS||c.source1Step,errorMessage:c.source1StepError})},o.$.source1Points.oninput=o.$.source1Points.onValueChange=function(a){d(this.$.multisimTextInput,a),o.settingsModel.source1Step=a,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this)},o.$.source1Points.validator=function(a,b){var c=o.settingsModel.validate(o);this.title=o.settingsModel.source1Points,b({valid:o.settingsModel.source1StepMode==g.SM_INCREMENT||c.source1Step,errorMessage:c.source1StepError})},o.$.useSource2.onValueChange=function(){o.settingsModel.useSource2=this.checked,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this)},o.$.source2.onValueChange=function(){o.settingsModel.source2Name=this.value,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this),l()},o.$.source2.validator=function(a,b){var c=o.settingsModel.validate(o);b({valid:c.source2Name,errorMessage:c.source2NameError})},o.$.source2Start.oninput=o.$.source2Start.onValueChange=function(a){d(this.$.multisimTextInput,a),o.settingsModel.source2Start=a,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this)},o.$.source2Start.validator=function(a,b){var c=o.settingsModel.validate(o);this.title=o.settingsModel.source2StartValue,b({valid:c.source2Start,errorMessage:c.source2StartError})},o.$.source2Stop.oninput=o.$.source2Stop.onValueChange=function(a){d(this.$.multisimTextInput,a),o.settingsModel.source2Stop=a,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this)},o.$.source2Stop.validator=function(a,b){var c=o.settingsModel.validate(o);this.title=o.settingsModel.source2StopValue,b({valid:c.source2Stop,errorMessage:c.source2StopError})},o.$.source2IncrementOrPoints.onValueChange=function(a){o.settingsModel.source2StepMode=a,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this)},o.$.source2Increment.oninput=o.$.source2Increment.onValueChange=function(a){d(this.$.multisimTextInput,a),o.settingsModel.source2Step=a,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this)},o.$.source2Increment.validator=function(a,b){var c=o.settingsModel.validate(o);this.title=o.settingsModel.source2Increment,b({valid:o.settingsModel.source2StepMode==g.SM_POINTS||c.source2Step,errorMessage:c.source2StepError})},o.$.source2Points.oninput=o.$.source2Points.onValueChange=function(a){d(this.$.multisimTextInput,a),o.settingsModel.source2Step=a,o.simulationController.notifySimulationSettingsUpdated(o),k(o,o.settingsModel,this)},o.$.source2Points.validator=function(a,b){var c=o.settingsModel.validate(o);this.title=o.settingsModel.source2Points,b({valid:o.settingsModel.source2StepMode==g.SM_INCREMENT||c.source2Step,errorMessage:c.source2StepError})},o.settingsChangeListener=function(a){a.changeSource!=o&&(k(o,o.settingsModel,null),n())},o.simulationController.listeners.addListener(i.SimulationSettingsChanged,o.settingsChangeListener),k(o,o.settingsModel,null),n(),o.behaviors[0]._initializeHelpAsync(o,window.multisim.rootFolder+"resources/help_en/help-simulation-settings.json")},detached:function(){var a=this,b=a.settingsChangeListener;b&&(a.simulationController.listeners.removeListener(i.SimulationSettingsChanged,b),a.settingsChangeListener=null)}})}(window.Polymer)}}}),a.register("111",[],function(){return{setters:[],execute:function(){}}}),a.register("112",["1b","a7","106","103","104","b9","bc","105","21","51","45","3b","3c","29","55","30","32","113","111"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n;return{setters:[function(a){c=a.default},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.switchEnteredChars,h=a.formatSimulationNumber},function(a){i=a.formatRefDes},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.fitUnitLabel},function(a){}],execute:function(){!function(a){function b(a){a.$.componentSelect.validate(),a.$.parameterSelect.validate(),a.$.paramList.validate(),a.$.paramStart.validate(),a.$.paramStop.validate(),a.$.paramIncrement.validate(),a.$.paramPoints.validate()}function o(a){var b=j.i18n.translate.bind(j.i18n),c=!a.$.componentSelect.value||!a.$.parameterSelect.value;switch(a.$.sweepType.value){case e.LINEAR:a.$.paramPoints.label=b("Points").fetch(),a.$.listSection.classList.remove("active"),a.$.linearSection.classList.add("active"),a.$.rangeSection.classList.add("active");break;case e.DECADE:a.$.paramPoints.label=b("Points per decade").fetch(),a.$.listSection.classList.remove("active"),a.$.linearSection.classList.remove("active"),a.$.rangeSection.classList.add("active");break;case e.OCTAVE:a.$.paramPoints.label=b("Points per octave").fetch(),a.$.listSection.classList.remove("active"),a.$.linearSection.classList.remove("active"),a.$.rangeSection.classList.add("active");break;case e.LIST:a.$.listSection.classList.add("active"),a.$.linearSection.classList.remove("active"),a.$.rangeSection.classList.remove("active")}a.$.paramIncrement.disabled=a.$.paramIncrementOrPoints.value!=k.SM_INCREMENT||c,a.$.paramPoints.disabled=a.$.paramIncrementOrPoints.value!=k.SM_POINTS||c,a.$.paramStart.disabled=c,a.$.paramStop.disabled=c,a.$.paramList.disabled=c}function p(a,c,d){[{control:a.$.runName,update:function(){a.$.runName.value=c.runName}},{control:a.$.paramStart,update:function(){a.$.paramStart.value=h(c.paramStart)}},{control:a.$.paramStop,update:function(){a.$.paramStop.value=h(c.paramStop)}},{control:a.$.paramIncrement,update:function(){a.$.paramIncrement.value=h(c.paramIncrement)}},{control:a.$.paramPoints,update:function(){a.$.paramPoints.value=c.paramPoints}},{control:a.$.paramIncrementOrPoints,update:function(){a.$.paramIncrementOrPoints.value=c.paramStepMode}},{control:a.$.analysisTypeSelect,update:function(){a.$.analysisTypeSelect.value=c.selectedAnalysisType}},{control:a.$.sweepType,update:function(){a.$.sweepType.value=c.selectedSweepType}},{control:a.$.paramList,update:function(){a.$.paramList.value=c.paramList}}].filter(function(a){return a.control!=d}).forEach(function(a){a.update()}),b(a),o(a)}a({is:"paramsweep-settings",behaviors:[a.InitializeHelp],properties:{simulationController:{reflectToAttribute:!1,type:Object,value:null},stringAnalysisType:String,stringComponent:String,stringComponentType:String,stringParameter:String,stringFullParamName:String,stringSweepType:String,stringValueList:String,stringName:String,stringStart:String,stringStop:String,stringIncrement:String,stringPoints:String,stringSupplyIncrement:String,stringSupplyPoints:String},init:function(a,b,h,o){function q(){var a=A.get(y.settingsModel.componentName)?A.get(y.settingsModel.componentName).get(y.settingsModel.parameterName):null,b=y.settingsModel.parameterUnits=a?a.units:"";y.settingsModel.parameterFullName=a?a.descriptiveText:"",y.$.paramStart.$.unitText.style.fontSize="14px",y.$.paramStart.units=b,n(y.$.paramStart);var c=y.$.paramStart.$.unitText.style.fontSize;[y.$.paramStop,y.$.paramIncrement,y.$.paramList].forEach(function(a){a.units=b,a.$.unitText.style.fontSize=c})}function r(a,b){var c=void 0,d=void 0;if(z.get(a)&&A.get(a)){var e=z.get(a).instance,f=A.get(a),g=f.get(b).isInstanceVar?e.getInstanceVariableValue(e.activeModelID,b,!0):e.getModelVariableValue(e.activeModelID,b,!0),h=g?2*g:1;g<h?(c=g,d=h):(c=h,d=g)}else c=1,d=2;y.settingsModel.paramStart=c,y.settingsModel.paramStop=d,y.settingsModel.paramStep=y.settingsModel.paramStepMode===k.SM_POINTS?2:d-c}function s(a){var b=new Set,d=o;if(a&&a.activeModelID){var e=d.getInstanceForModelID(a.activeModelID);e&&e.variables.forEach(function(c){var e="toggleParam"!==c.type||a.getInstanceVariableState(a.activeModelID,c.name);d.userCanModifyVariable(c)&&e&&B.isNumericProperty(c)&&b.add(c)});var f=d.getDefinitionForModelID(a.activeModelID);f&&f.variables.forEach(function(c){var e="toggleParam"!==c.type||a.getModelVariableState(a.activeModelID,c.name);d.userCanModifyVariable(c)&&e&&B.isNumericProperty(c)&&b.add(c)})}return[].concat(c(b)).sort(function(a,b){return a.name.toLowerCase()<b.name.toLowerCase()?-1:a.name.toLowerCase()>b.name.toLowerCase()?1:0})}function t(){var a=[].concat(c(z.values())).sort(function(a,b){return a.refdes.toLowerCase()<b.refdes.toLowerCase()?-1:a.refdes.toLowerCase()>b.refdes.toLowerCase()?1:0}).map(function(a){return{value:a.refdes,displayText:a.refdes,templateGUID:a.instance.templateGUID}}),b=y.$.componentSelect,d=y.$.parameterSelect,e=b.options.filter(function(a){return a.value===b.value})[0];if(b.options=a,b.value=y.settingsModel.componentName,d.options=A.get(y.settingsModel.componentName)?[].concat(c(A.get(y.settingsModel.componentName).values())):[],d.value=y.settingsModel.parameterName,z.has(y.settingsModel.componentName)){y.stringComponentType=z.get(y.settingsModel.componentName).type;var f=A.get(y.settingsModel.componentName),g=void 0;f.has(y.settingsModel.parameterName)?g=f.get(y.settingsModel.parameterName).descriptiveText:(d.value=y.settingsModel.parameterName=f.values().next().value.value,g=f.values().next().value.descriptiveText,r(b.value,d.value)),y.stringFullParamName=g}else{var h=e?a.find(function(a){return a.templateGUID==e.templateGUID}):null;if(h)b.value=h.value,y.stringComponentType=z.get(h.value).type,d.options=[].concat(c(A.get(h.value).values()));else{if(b.options.length){var i=b.options[0].value;b.value=i,y.stringComponentType=z.get(i).type;var j=A.get(i);d.options=[].concat(c(j.values())),d.value=j.values().next().value.value,y.stringFullParamName=j.values().next().value.descriptiveText}else b.value="",b.$.value.innerHTML=D("Not available").fetch(),y.stringComponentType="",b.options=[],d.options=[],d.value="",d.$.value.innerHTML=D("Not available").fetch(),y.stringFullParamName="";r(b.value,d.value)}y.settingsModel.componentName=b.value,y.settingsModel.parameterName=d.value}p(y,y.settingsModel,null),q()}function u(){A.clear(),z.clear(),h.activeDesign.designComponents.reduce(function(a,b){return b.sectionInstances.forEach(function(b){a.push(b)}),a},[]).forEach(w),t()}function v(a){var b=a.designComponent.oeclComponent.simModelBlueprints.find(function(b){return b.id==a.activeModelID}),c=i(a.designComponent.refDes,a.designComponent.isMultiSection()?a.sectionName:"",{});return{refdes:c,spiceInstance:b.instances[0].instance.replace("{0}",c).split(/\s+/)[0]}}function w(a){var b=new Map;if(s(a).forEach(function(a){b.set(a.name,{value:a.name,displayText:a.name,units:a.units,descriptiveText:a.fullName!==a.name?a.fullName:void 0,isInstanceVar:a.isInstanceVar,parameterObject:a})}),b.size){var c=v(a);A.set(c.refdes,b),z.set(c.refdes,{refdes:c.refdes,instance:a,type:a.designComponent.oeclComponent.componentBlueprints[0].name,spicename:c.spiceInstance})}}function x(a){if(void 0!==a.newState){var b=h.activeDesign.findInstance(a.contextGUID,a.templateGUID),c=v(b);a.newState?w(b):(A.get(c.refdes).delete(a.propertyName),A.get(c.refdes).size||(A.delete(c.refdes),z.delete(c.refdes))),t()}}var y=this,z=new Map,A=new Map,B=h.propertyController,C=B.propertyChangeListeners,D=j.i18n.translate.bind(j.i18n);h.listeners.addListener(h.events.ACTIVEDESIGNCHANGED,function(a){a.oldDesign&&(a.oldDesign.listeners.removeListener(l.DESIGN_CHANGED,u),C.removeListener(f.MODEL_PROPERTY_CHANGED,x),C.removeListener(f.INSTANCE_PROPERTY_CHANGED,x)),a.activeDesign&&(a.activeDesign.listeners.addListener(l.DESIGN_CHANGED,u),C.addListener(f.MODEL_PROPERTY_CHANGED,x),C.addListener(f.INSTANCE_PROPERTY_CHANGED,x))}),h.activeDesign&&(h.activeDesign.listeners.addListener(l.DESIGN_CHANGED,u),C.addListener(f.MODEL_PROPERTY_CHANGED,x),C.addListener(f.INSTANCE_PROPERTY_CHANGED,x)),j.addReadyListener(function(){y.stringAnalysisType=D("Analysis type").fetch(),y.stringComponent=D("Component").fetch(),y.stringParameter=D("Parameter").fetch(),y.stringSweepType=D("Sweep type").fetch(),y.stringValueList=D("Value list").fetch(),y.stringComponentType="",y.stringFullParamName="",y.stringName=D("Name").fetch(),y.stringStart=D("Start value").fetch(),y.stringStop=D("Stop value").fetch(),y.stringIncrement=D("Increment").fetch(),y.stringPoints=D("Points").fetch(),y.stringSupplyIncrement=D("Set step size in increments").fetch(),y.stringSupplyPoints=D("Set number of points to step").fetch(),y.$.sweepType.label=y.stringSweepType,y.$.paramList.label=y.stringValueList,y.$.paramStop.label=y.stringStop,y.$.paramStart.label=y.stringStart,y.$.paramIncrement.label=y.stringIncrement,y.$.paramPoints.label=y.stringPoints}),y.settingsModel=a.getSimulationSettings(d.PARAM_SWEEP),y.settingsModel.availableParameters=A,y.simulationController=y.settingsModel.simulationController=a,y.$.analysisTypeSelect.options=[{value:d.Transient,displayText:a.getAnalysisText(d.Transient)},{value:d.AC,displayText:a.getAnalysisText(d.AC)},{value:d.DC,displayText:a.getAnalysisText(d.DC)}],y.$.sweepType.options=[{value:e.LINEAR,displayText:D("Linear").fetch()},{value:e.DECADE,displayText:D("Decade").fetch()},{value:e.OCTAVE,displayText:D("Octave").fetch()},{value:e.LIST,displayText:D("List").fetch()}],y.$.paramIncrementOrPoints.options=[{value:k.SM_INCREMENT,displayText:y.stringSupplyIncrement},{value:k.SM_POINTS,displayText:y.stringSupplyPoints}];var E=b.createCommandContextHelper({disable:"all"});y.$.runName.commandContextHelper=E,y.$.paramStart.commandContextHelper=E,y.$.paramStop.commandContextHelper=E,y.$.paramIncrement.commandContextHelper=E,y.$.paramPoints.commandContextHelper=E,y.$.runName.oninput=y.$.runName.onValueChange=function(a){y.settingsModel.runName=a,y.simulationController.notifySimulationSettingsUpdated(y),p(y,y.settingsModel,this)},y.$.runName.validator=function(a,b){var c=y.settingsModel.validate(y);b({valid:c.runName,errorMessage:c.runNameError})},y.$.paramStart.oninput=y.$.paramStart.onValueChange=function(a){g(this.$.multisimTextInput,a),y.settingsModel.paramStart=a,y.simulationController.notifySimulationSettingsUpdated(y),p(y,y.settingsModel,this)},y.$.paramStart.validator=function(a,b){var c=y.settingsModel.validate(y);this.title=y.settingsModel.paramStartValue,b({valid:c.paramStart,errorMessage:c.paramStartError})},y.$.paramStop.oninput=y.$.paramStop.onValueChange=function(a){g(this.$.multisimTextInput,a),y.settingsModel.paramStop=a,y.simulationController.notifySimulationSettingsUpdated(y),p(y,y.settingsModel,this)},y.$.paramStop.validator=function(a,b){var c=y.settingsModel.validate(y);this.title=y.settingsModel.paramStopValue,b({valid:c.paramStop,errorMessage:c.paramStopError})},y.$.paramIncrementOrPoints.onValueChange=function(a){y.settingsModel.paramStepMode=a,y.simulationController.notifySimulationSettingsUpdated(y),p(y,y.settingsModel,this)},y.$.paramIncrement.oninput=y.$.paramIncrement.onValueChange=function(a){g(this.$.multisimTextInput,a),y.settingsModel.paramStep=a,y.simulationController.notifySimulationSettingsUpdated(y),p(y,y.settingsModel,this)},y.$.paramIncrement.validator=function(a,b){var c=y.settingsModel.validate(y);this.title=y.settingsModel.paramIncrement,b({valid:y.settingsModel.paramStepMode==k.SM_POINTS||c.paramStep,errorMessage:c.paramStepError})},y.$.paramPoints.oninput=y.$.paramPoints.onValueChange=function(a){g(this.$.multisimTextInput,a),y.settingsModel.paramStep=a,y.simulationController.notifySimulationSettingsUpdated(y),p(y,y.settingsModel,this)},y.$.paramPoints.validator=function(a,b){var c=y.settingsModel.validate(y);this.title=y.settingsModel.paramPoints,b({valid:y.settingsModel.paramStepMode==k.SM_INCREMENT||c.paramStep,errorMessage:c.paramStepError})},y.$.analysisTypeSelect.onValueChange=function(a){y.settingsModel.selectedAnalysisType=a,y.simulationController.notifySimulationSettingsUpdated(y),p(y,y.settingsModel,this)},y.$.sweepType.onValueChange=function(a){y.settingsModel.selectedSweepType=a,a!==e.OCTAVE&&a!==e.DECADE||(y.settingsModel.paramStepMode=k.SM_POINTS),y.simulationController.notifySimulationSettingsUpdated(y),p(y,y.settingsModel,this)},y.$.componentSelect.onValueChange=function(a){if(y.settingsModel.componentName!==a){y.settingsModel.componentName=a,y.stringComponentType=z.get(a).type;var b=A.get(a);y.$.parameterSelect.options=[].concat(c(b.values())),y.$.parameterSelect.value=b.values().next().value.value,y.settingsModel.parameterName=y.$.parameterSelect.value,y.stringFullParamName=b.values().next().value.descriptiveText,r(y.settingsModel.componentName,y.settingsModel.parameterName),y.simulationController.notifySimulationSettingsUpdated(y),p(y,y.settingsModel,this),q()}},y.$.componentSelect.validator=function(a,b){var c=y.settingsModel.validate(y);b({valid:c.componentName,errorMessage:c.componentNameError})},y.$.parameterSelect.onValueChange=function(a){if(y.settingsModel.parameterName!==a){y.settingsModel.parameterName=a;var b=A.get(y.settingsModel.componentName);y.stringFullParamName=b.get(a).descriptiveText,y.simulationController.notifySimulationSettingsUpdated(y),r(y.settingsModel.componentName,y.settingsModel.parameterName),p(y,y.settingsModel,this),q()}},y.$.parameterSelect.validator=function(a,b){var c=y.settingsModel.validate(y);b({valid:c.parameterName,errorMessage:c.parameterNameError})},y.$.paramList.onValueChange=y.$.paramList.onInput=function(a){g(this.$.multisimTextInput,a),y.settingsModel.paramList=a,y.simulationController.notifySimulationSettingsUpdated(y),p(y,y.settingsModel,this)},y.$.paramList.validator=function(a,b){var c=y.settingsModel.validate(y);this.title=y.settingsModel.paramList,b({valid:c.paramListValues,errorMessage:c.paramListValuesError})},y.settingsChangeListener=function(a){a.changeSource!=y&&(p(y,y.settingsModel,null),u())},y.simulationController.listeners.addListener(m.SimulationSettingsChanged,y.settingsChangeListener),p(y,y.settingsModel,null),u(),y.behaviors[0]._initializeHelpAsync(y,window.multisim.rootFolder+"resources/help_en/help-simulation-settings.json")},detached:function(){var a=this,b=a.settingsChangeListener;b&&(a.simulationController.listeners.removeListener(m.SimulationSettingsChanged,b),a.settingsChangeListener=null)}})}(window.Polymer)}}}),a.register("114",[],function(){return{setters:[],execute:function(){}}}),a.register("115",["a7","fe","cc","d6","102","10a","10c","10e","110","112","104","c6","bc","21","29","32","105","114"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){},function(a){}],execute:function(){!function(a){a({is:"analysis-settings",behaviors:[a.InitializeHelp],properties:{simulationController:{reflectToAttribute:!1,type:Object,value:null},stringRunSimulation:String},init:function(b,f){function g(a){var d=a.activeAnalysis;if(o!==d){switch(o=d,n&&j.removeChild(n),d){case c.AC:n=document.createElement("ac-sweep-settings"),n.init(l,k);break;case c.DC:n=document.createElement("dc-op-settings"),n.init(l,k);break;case c.Interactive:n=document.createElement("interactive-settings"),n.init(l,k);break;case c.Transient:n=document.createElement("transient-settings"),n.init(l,k);break;case c.DC_SWEEP:n=document.createElement("dcsweep-settings"),n.init(l,k,b);break;case c.PARAM_SWEEP:n=document.createElement("paramsweep-settings"),n.init(l,k,b,f)}n.setAttribute("hascontexthelp",""),j.appendChild(n)}}var h=this,i=h.$.selector,j=a.dom(h.$.settingsContainer),k=b.commandInterface,l=b.simulationController,m=k.createCommandContextHelper({disable:"all"});i.init(l,m,b),h.simulationController=l,d.addReadyListener(function(a){h.stringRunSimulation=a.i18n.translate("Start simulation").fetch()});var n=null,o=null;l.listeners.addListener(e.ActiveAnalysisChanged,g,10),g(l),h.$.runSimulation.commandContextHelper=k.createCommandContextHelper({disable:"all"}),h.$.runSimulation.handleclick=function(){var a=k.getCommandObject("runsimulation");a&&a.enabled&&a.startCommand(d.i18n.translate("Run simulation (Ctrl+R)").fetch())},h.behaviors[0]._initializeHelpAsync(h,window.multisim.rootFolder+"resources/help_en/help-simulation-settings.json")}})}(window.Polymer)}}}),a.register("116",[],function(){return{setters:[],execute:function(){}}});a.register("117",["a7","106","c6","bc","104","103","105","29","3b","32","116"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.switchEnteredChars},function(a){e=a.default},function(a){}],execute:function(){!function(){function a(a){a.$.reltol.value=a.settingsModel.reltol}function b(a){a.$.vntol.value=a.settingsModel.vntol}function f(a){a.$.abstol.value=a.settingsModel.abstol}function g(a){a.$.itl1.value=a.settingsModel.itl1}function h(a){a.$.itl4.value=a.settingsModel.itl4}function i(a){a.$.temp.value=a.settingsModel.temperature}function j(a){a.$.rshunt.disabled=!a.settingsModel.rshuntEnabled,a.$.rshunt.value=a.settingsModel.rshunt}function k(a){a.$.reltol.validate(),a.$.vntol.validate(),a.$.abstol.validate(),a.$.itl1.validate(),a.$.itl4.validate(),a.$.temp.validate(),a.$.rshunt.validate()}function l(c,d){a(c),b(c),f(c),g(c),h(c),i(c),c.$.rshuntToggle.checked=d.rshuntEnabled,j(c),c.$.methodSelector.value=d.method,k(c)}window.Polymer({is:"global-simulation-settings",behaviors:[window.Polymer.InitializeHelp],ready:function(){},properties:{stringRELTOL:String,stringVNTOL:String,stringABSTOL:String,stringITL1:String,stringITL4:String,stringMethod:String,stringTemp:String,stringInsertShuntResistance:String,stringRSHUNT:String,stringResettodefault:String},initialize:function(a,b,f){var g=this;c.addReadyListener(function(a){g.stringRELTOL=a.i18n.translate("RELTOL").fetch(),g.stringVNTOL=a.i18n.translate("VNTOL").fetch(),g.stringABSTOL=a.i18n.translate("ABSTOL").fetch(),g.stringITL1=a.i18n.translate("ITL1").fetch(),g.stringITL4=a.i18n.translate("ITL4").fetch(),g.stringMethod=a.i18n.translate("Method").fetch(),g.stringTemp=a.i18n.translate("Temp").fetch(),g.stringInsertShuntResistance=a.i18n.translate("Insert shunt resistance").fetch(),g.stringRSHUNT=a.i18n.translate("RSHUNT").fetch(),g.stringResettodefault=a.i18n.translate("Reset to default").fetch()}),g.simulationController=a,g.settingsModel=a.globalSimulationSettings;var h=function(a){d(this.$.multisimTextInput,a);var b=a;g.settingsModel.reltol=b,k(g),g.simulationController.notifySimulationSettingsUpdated(g)};g.$.reltol.onValueChange=h,g.$.reltol.oninput=h,g.$.reltol.validator=function(a,b){var c=g.settingsModel.validate(g);g.$.reltol.title=g.settingsModel.reltolValue,b({valid:c.reltol,errorMessage:c.reltolError})},g.$.reltol.commandContextHelper=b.createCommandContextHelper({disable:"all"});var i=function(a){d(this.$.multisimTextInput,a);var b=a;g.settingsModel.vntol=b,k(g),g.simulationController.notifySimulationSettingsUpdated(g)};g.$.vntol.onValueChange=i,g.$.vntol.oninput=i,g.$.vntol.validator=function(a,b){var c=g.settingsModel.validate(g);g.$.vntol.title=g.settingsModel.vntolValue,b({valid:c.vntol,errorMessage:c.vntolError})},g.$.vntol.commandContextHelper=b.createCommandContextHelper({disable:"all"});var m=function(a){d(this.$.multisimTextInput,a);var b=a;g.settingsModel.abstol=b,k(g),g.simulationController.notifySimulationSettingsUpdated(g)};g.$.abstol.onValueChange=m,g.$.abstol.oninput=m,g.$.abstol.validator=function(a,b){var c=g.settingsModel.validate(g);g.$.abstol.title=g.settingsModel.abstolValue,b({valid:c.abstol,errorMessage:c.abstolError})},g.$.abstol.commandContextHelper=b.createCommandContextHelper({disable:"all"});var n=function(a){d(this.$.multisimTextInput,a);var b=a;g.settingsModel.itl1=b,k(g),g.simulationController.notifySimulationSettingsUpdated(g)};g.$.itl1.onValueChange=n,g.$.itl1.oninput=n,g.$.itl1.validator=function(a,b){var c=g.settingsModel.validate(g);g.$.itl1.title=g.settingsModel.itl1Value,b({valid:c.itl1,errorMessage:c.itl1Error})},g.$.itl1.commandContextHelper=b.createCommandContextHelper({disable:"all"});var o=function(a){d(this.$.multisimTextInput,a);var b=a;g.settingsModel.itl4=b,k(g),g.simulationController.notifySimulationSettingsUpdated(g)};g.$.itl4.onValueChange=o,g.$.itl4.oninput=o,g.$.itl4.validator=function(a,b){var c=g.settingsModel.validate(g);g.$.itl4.title=g.settingsModel.itl4Value,b({valid:c.itl4,errorMessage:c.itl4Error})},g.$.itl4.commandContextHelper=b.createCommandContextHelper({disable:"all"});var p=function(a){d(this.$.multisimTextInput,a);var b=a;g.settingsModel.temperature=b,k(g),g.simulationController.notifySimulationSettingsUpdated(g)};g.$.temp.onValueChange=p,g.$.temp.oninput=p,g.$.temp.validator=function(a,b){var c=g.settingsModel.validate(g);g.$.temp.title=g.settingsModel.temperatureValue,b({valid:c.temperature,errorMessage:c.temperatureError})},g.$.temp.commandContextHelper=b.createCommandContextHelper({disable:"all"}),g.$.rshuntToggle.onValueChange=function(){g.settingsModel.rshuntEnabled=this.checked,j(g),k(g),g.simulationController.notifySimulationSettingsUpdated(g)},g.$.rshuntToggle.commandContextHelper=b.createCommandContextHelper({disable:"all"});var q=function(a){d(this.$.multisimTextInput,a);var b=a;g.settingsModel.rshunt=b,k(g),g.simulationController.notifySimulationSettingsUpdated(g)};g.$.rshunt.onValueChange=q,g.$.rshunt.oninput=q,g.$.rshunt.validator=function(a,b){var c=g.settingsModel.validate(g);g.$.rshunt.title=g.settingsModel.rshuntValue,b({valid:c.rshunt,errorMessage:c.rshuntError})},g.$.rshunt.commandContextHelper=b.createCommandContextHelper({disable:"all"}),c.addReadyListener(function(){g.$.methodSelector.options=[{value:g.settingsModel.integrationMethodEnum.TRAPEZOIDAL,displayText:c.i18n.translate("Trapezoidal").fetch()},{value:g.settingsModel.integrationMethodEnum.GEAR,displayText:c.i18n.translate("Gear").fetch()}]});var r=b.createCommandContextHelper({disable:"all"});g.$.methodSelector.commandContextHelper=r,g.$.methodSelector.onValueChange=function(){g.settingsModel.method=this.value,g.simulationController.notifySimulationSettingsUpdated(g)},g.$.resetButton.handleclick=function(){f.open(),f.onOk=function(){g.settingsModel.resetToDefault(),l(g,g.settingsModel),f.onOk=null,g.simulationController.notifySimulationSettingsUpdated(g)}},g.$.resetButton.commandContextHelper=b.createCommandContextHelper({disable:"all"}),g.simulationController.listeners.addListener(e.SimulationSettingsChanged,function(a){a.changeSource!=g&&l(g,g.settingsModel)}),l(g,g.settingsModel),g.behaviors[0]._initializeHelpAsync(g,window.multisim.rootFolder+"resources/help_en/help-simulator-options.json")}})}()}}}),a.register("118",[],function(){return{setters:[],execute:function(){}}}),a.register("119",["a7","106","104","b9","105","118","32"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default}],execute:function(){!function(){function a(a,b){a.$.outputVoltageLow.value=b.outputLow,a.$.inputThresholdLow.value=b.inputLowThreshold,a.$.inputThresholdHigh.value=b.inputHighThreshold,a.$.outputVoltageHigh.value=b.outputHigh,a.$.logicLevelSelector.value=b.logicLevel}window.Polymer({is:"document-digital-settings",behaviors:[window.Polymer.InitializeHelp],ready:function(){},initialize:function(b,d){var e=this;this.simulationController=b,this.settingsModel=b.documentDigitalSettings;var f=this.$.globalLogicLevel;f.$.useDocumentLogicLevelSettings.style.display="none",f.$.useDocumentLogicLevelSettingsInfo.style.display="none",f.$.logicLevelSelector.commandContextHelper=d.createCommandContextHelper({disable:"all"}),f.$.logicLevelSelector.onValueChange=function(b){e.settingsModel.logicLevel=b,a(f,e.settingsModel),e.simulationController.notifySimulationSettingsUpdated(e)};var g=function(a){e.settingsModel.outputLow=a,e.simulationController.notifySimulationSettingsUpdated(e)};f.$.outputVoltageLow.onValueChange=g,f.$.outputVoltageLow.commandContextHelper=d.createCommandContextHelper({disable:"all"});var h=function(a){e.settingsModel.inputLowThreshold=a,e.simulationController.notifySimulationSettingsUpdated(e)};f.$.inputThresholdLow.onValueChange=h,f.$.inputThresholdLow.commandContextHelper=d.createCommandContextHelper({disable:"all"});var i=function(a){e.settingsModel.inputHighThreshold=a,e.simulationController.notifySimulationSettingsUpdated(e)};f.$.inputThresholdHigh.onValueChange=i,f.$.inputThresholdHigh.commandContextHelper=d.createCommandContextHelper({disable:"all"});var j=function(a){e.settingsModel.outputHigh=a,e.simulationController.notifySimulationSettingsUpdated(e)};f.$.outputVoltageHigh.onValueChange=j,f.$.outputVoltageHigh.commandContextHelper=d.createCommandContextHelper({disable:"all"}),this.simulationController.listeners.addListener(c.SimulationSettingsChanged,function(b){b.changeSource!=e&&a(f,e.settingsModel)}),a(f,this.settingsModel),this.behaviors[0]._initializeHelpAsync(this,window.multisim.rootFolder+"resources/help_en/help-object.json")}})}()}}}),a.register("11a",["1d","1e","2d"],function(a,b){"use strict";var c,d,e,f;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){f=function(){function a(b,d){c(this,a),this.width=b+1,this.height=d+1,this.cols=[],this.cols.length=this.width}return d(a,[{key:"getObjectsAtPoint",value:function(a,b,c){c=c||0;var d=[],f=1,g=0,h=-1,i=void 0,j=0,k=0;for(f=0;f<(2*c+1)*(2*c+1);++f)a+j<this.width&&b+k<this.height&&a+j>=0&&b+k>=0&&this.cols[a+j]&&this.cols[a+j][b+k]&&(d=d.concat(this.cols[a+j][b+k])),(j==k||j<0&&j===-k||j>0&&j===1-k)&&(i=g,g=-1*h,h=i),j+=g,k+=h;return e.uniq(d)}},{key:"updateSize",value:function(a,b){this.width=a+1,this.height=b+1,this.cols.length=this.width,this.cols.forEach(function(a){a&&(a.length=this.height)},this)}},{key:"addObjectAtPoint",value:function(a,b,c){a<this.width&&b<this.height&&(this.cols[a]||(this.cols[a]=[],this.cols[a].length=this.height),this.cols[a][b]||(this.cols[a][b]=[]),this.cols[a][b].push(c))}},{key:"addObjectAlongLine",value:function(a,b,c){var d=void 0,e=void 0;if(a.x===b.x){if(a.x<this.width&&a.y<this.height&&b.y<this.height)for(d=a.x,this.cols[d]||(this.cols[d]=[],this.cols[d].length=this.height),e=Math.min(a.y,b.y);e<=Math.max(a.y,b.y);++e)this.cols[d][e]||(this.cols[d][e]=[]),-1===this.cols[d][e].indexOf(c)&&this.cols[d][e].push(c)}else if(a.y===b.y){if(a.y<this.height&&a.x<this.width&&b.x<this.width)for(e=a.y,d=Math.min(a.x,b.x);d<=Math.max(a.x,b.x);++d)this.cols[d]||(this.cols[d]=[],this.cols[d].length=this.height),this.cols[d][e]||(this.cols[d][e]=[]),-1===this.cols[d][e].indexOf(c)&&this.cols[d][e].push(c)}else{var f=a.x>b.x?b:a,g=a.x>b.x?a:b,h=(g.y-f.y)/(g.x-f.x);for(d=f.x;d<=g.x;++d)(0|(e=f.y+h*(d-f.x)))===e&&(this.cols[d]||(this.cols[d]=[],this.cols[d].length=this.height),this.cols[d][e]||(this.cols[d][e]=[]),-1===this.cols[d][e].indexOf(c)&&this.cols[d][e].push(c))}}},{key:"addObjectOnBox",value:function(a,b){if(a.left<this.width&&a.right>0&&a.top<this.height&&a.bottom>0)for(var c=Math.max(0,Math.min(a.left,a.right)),d=Math.min(this.width-2,Math.max(a.left,a.right)),e=Math.max(0,Math.min(a.top,a.bottom)),f=Math.min(this.height-2,Math.max(a.top,a.bottom)),g=c;g<=d;++g){this.cols[g]||(this.cols[g]=[],this.cols[g].length=this.height);for(var h=e;h<=f;++h)this.cols[g][h]||(this.cols[g][h]=[]),-1===this.cols[g][h].indexOf(b)&&this.cols[g][h].push(b)}}},{key:"removeObjectAtPoint",value:function(a,b,c){if(a<this.width&&b<this.height&&this.cols[a]&&this.cols[a][b]){var d=this.cols[a][b].indexOf(c);d>=0&&this.cols[a][b].splice(d,1)}}},{key:"removeObjectAlongLine",value:function(a,b,c){var d=void 0,e=void 0,f=void 0;if(a.x===b.x){if(a.x<this.width&&a.y<this.height&&b.y<this.height&&(d=a.x,this.cols[d]))for(e=Math.min(a.y,b.y);e<=Math.max(a.y,b.y);++e)this.cols[d][e]&&(f=this.cols[d][e].indexOf(c))>=0&&this.cols[d][e].splice(f,1)}else if(a.y===b.y){if(a.y<this.height&&a.x<this.width&&b.x<this.width)for(e=a.y,d=Math.min(a.x,b.x);d<=Math.max(a.x,b.x);++d)this.cols[d]&&this.cols[d][e]&&(f=this.cols[d][e].indexOf(c))>=0&&this.cols[d][e].splice(f,1)}else{var g=a.x>b.x?b:a,h=a.x>b.x?a:b,i=(h.y-g.y)/(h.x-g.x);for(d=g.x;d<=h.x;++d)(0|(e=g.y+i*(d-g.x)))===e&&this.cols[d]&&this.cols[d][e]&&(f=this.cols[d][e].indexOf(c))>=0&&this.cols[d][e].splice(f,1)}}},{key:"removeObjectOnBox",value:function(a,b){if(a.left<this.width&&a.right<this.width&&a.top<this.height&&a.bottom<this.height)for(var c=Math.min(a.left,a.right),d=Math.max(a.left,a.right),e=Math.min(a.top,a.bottom),f=Math.max(a.top,a.bottom),g=c;g<=d;++g)for(var h=e;h<=f;++h)if(this.cols[g]&&this.cols[g][h]){var i=this.cols[g][h].indexOf(b);-1!==i&&this.cols[g][h].splice(i,1)}}}]),a}(),a("default",f)}}}),a.register("11b",["1d","1e"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){e=function(){function a(b,d,e){c(this,a),this.templateGUID=b,this.point={x:d.x,y:d.y},this.visible=e}return d(a,[{key:"clone",value:function(a){return a.createTemplateProbeText(this.templateGUID,this.point,this.visible)}},{key:"addToObjectLookup",value:function(){}},{key:"removeFromObjectLookup",value:function(){}},{key:"drawOnRouterMap",value:function(){}},{key:"updateBoundingBox",value:function(){}},{key:"getBoundingBox",value:function(){return{left:0,top:0,right:0,bottom:0}}}]),a}(),a("default",e)}}}),a.register("47",["1d","1e","10","11a","2e","22","11c","11d","11e","11f","11b","120","121","2f"],function(a,b){"use strict";function c(a,b){var c=[];return a.forEach(function(a){b(a)&&c.push(a)}),c}function d(){y=[]}function e(a){var b=[],c={get guid(){return a},get length(){return b.length},getTemplate:function(a){return a>=0&&a<b.length?b[a]:null},addSheetTemplate:function(a){b.includes(a)||b.push(a),a.sheetGroup=this},removeSheetTemplate:function(a){b=b.filter(function(b){return b!==a}),a.sheetGroup===this&&(a.sheetGroup=null)},forEach:function(a){b.forEach(a)}};return y.push(c),c}function f(){return y}var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return a("destroyAllTemplateSheetGroups",d),a("createSheetTemplateGroup",e),a("getSheetGroups",f),{setters:[function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default},function(a){r=a.default},function(a){s=a.default},function(a){t=a.isTemplateText,u=a.isTemplateWire,v=a.isTemplateJunction,w=a.isTemplateProbe,x=a.isTemplateComponent}],execute:function(){y=[],a("SheetTemplate",z=function(){function a(b){g(this,a),this.sheetGUID=b,this.listeners=i(),this.sheetGroup=null,this.gridVisibility=!0,this.netLabelsVisibility=!0,this.componentLabelsVisibility=!0,this.size={width:100,height:70},this.schematicObjects=new Map,this.objectLookup=new j(this.size.width,this.size.height),this._sheetName="",this.componentShortcuts=new Map([[1,[]],[2,[]],[3,[]],[4,[]],[5,[]],[6,[]],[7,[]],[8,[]],[9,[]],[0,[]]])}return h(a,[{key:"updateConnections",value:function(a){this.listeners.notifyListeners(k.CONNECTIONS_CHANGED,a)}},{key:"getMinSize",value:function(){var b={width:1,height:1},c=!0,d=!0,e=null;return this.schematicObjects.forEach(function(a){var f=a.getBoundingBox();null!==e&&f.right>e.right&&!t(a)?(e=null,c=!0):null!==e&&f.right>e.right&&t(a)?(e=f,c=!1):f.right>b.width&&!t(a)?(e=null,c=!0):f.right>b.width&&(e=f,c=!1),null!==e&&f.bottom>e.bottom&&!t(a)?(e=null,d=!0):null!==e&&f.bottom>e.bottom&&t(a)?(e=f,d=!1):f.bottom>b.height&&!t(a)?(e=null,d=!0):f.bottom>b.height&&(e=f,d=!1),b.width=Math.max(b.width,f.right),b.height=Math.max(b.height,f.bottom)}),d&&this.schematicObjects.size>0&&b.height++,c&&this.schematicObjects.size>0&&b.width++,{width:Math.max(b.width,a.getEmptyMinSize().width),height:Math.max(b.height,a.getEmptyMinSize().height)}}},{key:"allowSize",value:function(a){var b=this.getMinSize();return a.width>0&&a.height>0&&(!b||b.width<=a.width&&b.height<=a.height)}},{key:"setSize",value:function(a){if(isNaN(a.width)||isNaN(a.height))throw new Error("Sizes must be numeric");var b=this.allowSize(a);return b&&(this.size={width:a.width,height:a.height},this.objectLookup.updateSize(this.size.width,this.size.height),this.listeners.notifyListeners(k.SHEET_PROPERTIES_CHANGED)),b}},{key:"addObject",value:function(a,b){this.schematicObjects.set(a,b),b.addToObjectLookup(),this.listeners.notifyListeners(k.SHEET_OBJECTS_CHANGED,{added:[a],removed:[],modified:[]})}},{key:"moveObjects",value:function(a,b,c){if(c&&c.objectMatrix){var d=this.schematicObjects.get(a[0]);d.removeFromObjectLookup(!0);var e=d.matrix.e,f=d.matrix.f;d.matrix=c.objectMatrix.clone(),d.matrix.e=e,d.matrix.f=f,d.offset(b),d.addToObjectLookup(),d.hadBeenFlipped=c.flipStats.isHorizFlip!==c.flipStats.startingFlip}else a.forEach(function(a){if(this.schematicObjects.has(a)){var c=this.schematicObjects.get(a);c.removeFromObjectLookup(!0),c.offset(b),c.addToObjectLookup()}},this);this.listeners.notifyListeners(k.SHEET_OBJECTS_CHANGED,{added:[],removed:[],modified:a})}},{key:"rotateObject",value:function(a,b){if(this.schematicObjects.has(a)){var c=this.schematicObjects.get(a);c&&c.rotate&&c.rotate(b)}this.listeners.notifyListeners(k.SHEET_OBJECTS_CHANGED,{added:[],removed:[],modified:[a]})}},{key:"flipObjectHorizontal",value:function(a){if(this.schematicObjects.has(a)){var b=this.schematicObjects.get(a);b&&b.flipHorizontal&&b.flipHorizontal()}this.listeners.notifyListeners(k.SHEET_OBJECTS_CHANGED,{added:[],removed:[],modified:[a]})}},{key:"updateWirePath",value:function(a,b){a&&(a.removeFromObjectLookup(),a.path=b.slice(),a.addToObjectLookup(),this.listeners.notifyListeners(k.SHEET_OBJECTS_CHANGED,{added:[],modified:[a.templateGUID],removed:[]}))}},{key:"changeComponentSymbolPinLabelVisibility",value:function(a,b){var c=this.getObject(a);c&&(c.showSymbolPinNames=b,this.listeners.notifyListeners(k.SHEET_OBJECTS_CHANGED,{added:[],modified:[c.templateGUID],removed:[]}))}},{key:"changeComponentLabelVisibility",value:function(a,b,c){var d=this;b&&b.children.length>0&&function(){var e=[];b.children.forEach(function(d,f){if(t(d)){a.findInstancesOfTemplate(d.templateGUID).forEach(function(a){"refdes"===a.textOrVarName&&(b.children[f].visible=c,e.push(b.children[f].templateGUID))})}}),d.listeners.notifyListeners(k.SHEET_OBJECTS_CHANGED,{added:[],modified:e,removed:[]})}()}},{key:"changeWireLabelVisibility",value:function(a,b){var c=this;a&&a.children.length>0&&function(){var d=[];a.children.forEach(function(a){t(a)&&(a.visible=b,d.push(a.templateGUID))}),c.listeners.notifyListeners(k.SHEET_OBJECTS_CHANGED,{added:[],modified:d,removed:[]})}()}},{key:"changeWirePropertyVisibility",value:function(a,b,c){var d=[];c&&t(c)&&(c.visible=b,d.push(c.templateGUID)),this.listeners.notifyListeners(k.SHEET_OBJECTS_CHANGED,{added:[],modified:d,removed:[]})}},{key:"changeProbeState",value:function(a,b){a&&(a.disabled=b.disabled,a.vertical=b.vertical,this.listeners.notifyListeners(k.SHEET_OBJECTS_CHANGED,{added:[],modified:[a.templateGUID],removed:[]}))}},{key:"updateProbeInstanceState",value:function(a){a&&this.listeners.notifyListeners(k.SHEET_OBJECTS_CHANGED,{added:[],modified:[a.templateGUID],removed:[]})}},{key:"addComponentShortcut",value:function(a,b){a>=0&&a<=9&&this.componentShortcuts.get(a).push(b)}},{key:"removeComponentShortcut",value:function(a){for(var b=0;b<=9;b++)this.componentShortcuts.set(b,this.componentShortcuts.get(b).filter(function(b){return b!=a}))}},{key:"removeObjects",value:function(a){a.templateGUIDs.forEach(function(a){if(this.schematicObjects.has(a)){this.schematicObjects.get(a).removeFromObjectLookup(!0)}this.removeComponentShortcut(a),this.schematicObjects.delete(a)},this),this.listeners.notifyListeners(k.SHEET_OBJECTS_CHANGED,{added:[],removed:a.templateGUIDs,modified:[]})}},{key:"getBoundingBox",value:function(a){var b=null;return this.schematicObjects.has(a)&&(b=this.schematicObjects.get(a).getBoundingBox()),b}},{key:"getBoundingBoxForItems",value:function(a){var b=null;return a.forEach(function(a){var c=this.getBoundingBox(a);c&&(b?(c.left<b.left&&(b.left=c.left),c.right>b.right&&(b.right=c.right),c.top<b.top&&(b.top=c.top),c.bottom>b.bottom&&(b.bottom=c.bottom)):(b={},b.left=c.left,b.right=c.right,b.top=c.top,b.bottom=c.bottom))},this),b}},{key:"setItemBoundingBox",value:function(a,b){this.schematicObjects.has(a)&&this.schematicObjects.get(a).updateBoundingBox(b)}},{key:"changeTextLocation",value:function(a,b){t(a)&&(a.point={x:b.x,y:b.y},this.listeners.notifyListeners(k.SHEET_OBJECTS_CHANGED,{added:[],removed:[],modified:[a.templateGUID]}))}},{key:"getAdornerCommandsFor",value:function(a){var b=0,c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0;a.forEach(function(a){var k=this.getObject(a);k.rotate&&++f,k.flipHorizontal&&++g,k.clone&&++h,k.probeType==l.PROBE_VOLTAGE&&++j,u(k)?++c:v(k)?++d:t(k)&&(++e,k.standAlone&&i++),++b},this);var m=["deleteobject"];return 1===b&&1===f&&m.push("rotateobject"),1===b&&1===g&&m.push("flipobjecthorizontal"),1===b&&1===j&&m.push("addreferenceprobe"),1===b&&1===c&&m.push("addjunction"),1===b&&1===d&&m.push("movejunction"),k=d+c,h===b&&k!==b&&m.push("duplicateobject"),0!==e&&e!==i&&(m=[]),m}},{key:"setSheetGroup",value:function(a){this.sheetGroup!==a&&(this.sheetGroup&&this.sheetGroup.removeSheet(this),this.sheetGroup=a,this.sheetGroup&&this.sheetGroup.addSheetTemplate(this))}},{key:"getObject",value:function(a){return this.schematicObjects.get(a)}},{key:"getObjectAsTemplateWire",value:function(a){var b=this.schematicObjects.get(a);return u(b)?b:null}},{key:"getObjectAsTemplateJunction",value:function(a){var b=this.schematicObjects.get(a);return v(b)?b:null}},{key:"getTemplateProbes",value:function(){return c(this.schematicObjects,w)}},{key:"getTemplateWires",value:function(){return c(this.schematicObjects,u)}},{key:"getTemplateComponents",value:function(){return c(this.schematicObjects,x)}},{key:"setGridVisibility",value:function(a){this.gridVisibility=a,this.listeners.notifyListeners(k.SHEET_PROPERTIES_CHANGED)}},{key:"setNetLabelsVisibility",value:function(a){this.netLabelsVisibility=a,this.listeners.notifyListeners(k.SHEET_PROPERTIES_CHANGED)}},{key:"setComponentLabelsVisibility",value:function(a){this.componentLabelsVisibility=a,this.listeners.notifyListeners(k.SHEET_PROPERTIES_CHANGED)}},{key:"drawOnRouterMap",value:function(a,b){this.schematicObjects.forEach(function(c){b&&b.has(c)||c.drawOnRouterMap(a)})}},{key:"createTemplateComponent",value:function(a,b,c,d){var e=new m(a,b,c,d);return e.objectLookup=this.objectLookup,e}},{key:"createTemplateConnector",value:function(a,b,c){var d=new n(a,b,c);return d.objectLookup=this.objectLookup,d}},{key:"createTemplateWire",value:function(a,b){var c=new s(a,b);return c.objectLookup=this.objectLookup,c}},{key:"createTemplateJunction",value:function(a,b){var c=new o(a,b);return c.objectLookup=this.objectLookup,c}},{key:"createTemplateText",value:function(a,b,c,d,e,f){var g=new r(a,b,c,d,e,f);return g.objectLookup=this.objectLookup,g}},{key:"createTemplateProbe",value:function(a,b,c,d){var e=new p(a,b,c,d);return e.objectLookup=this.objectLookup,e}},{key:"createTemplateProbeText",value:function(a,b,c){var d=new q(a,b,c);return d.objectLookup=this.objectLookup,d}},{key:"name",get:function(){return this._sheetName},set:function(a){this._sheetName=a}}],[{key:"getEmptyMinSize",value:function(){return{width:50,height:50}}},{key:"getMaxSize",value:function(){return{width:200,height:200}}}]),a}()),a("SheetTemplate",z)}}}),a.register("122",[],function(){return{setters:[],execute:function(){}}}),a.register("123",["a7","106","4f","29","2e","47","104","b9","105","122"],function(a,b){"use strict";var c,d,e,f;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.SheetTemplate},function(a){},function(a){},function(a){},function(a){}],execute:function(){!function(){var a=null,b=null,g=null,h=null;window.Polymer({is:"sheet-settings",behaviors:[window.Polymer.InitializeHelp],properties:{stringWidth:String,stringHeight:String,stringGrid:String,stringNetLabels:String,stringComponentLabels:String},initialize:function(i,j,k,l){a=i,b=k,g=l;var m=this,n=m.$.sheetWidth,o=m.$.sheetHeight,p=m.$.gridToggle,q=m.$.netToggle,r=m.$.componentToggle;d.addReadyListener(function(a){m.stringWidth=a.i18n.translate("Width").fetch(),m.stringHeight=a.i18n.translate("Height").fetch(),m.stringGrid=a.i18n.translate("Grid").fetch(),m.stringNetLabels=a.i18n.translate("Net Labels").fetch(),m.stringComponentLabels=a.i18n.translate("Component Labels").fetch()}),n.commandContextHelper=k.createCommandContextHelper({disable:"all",enable:["simulation"]}),o.commandContextHelper=k.createCommandContextHelper({disable:"all",enable:["simulation"]}),p.onValueChange=function(){var b=a();b&&(b.sheetTemplateController.sheetTemplate.setGridVisibility(this.checked),b.sheetTemplateController.design.modified=!0)},q.onValueChange=function(){var b=a();b&&(b.sheetTemplateController.sheetTemplate.setNetLabelsVisibility(this.checked),b.sheetTemplateController.design.modified=!0)},r.onValueChange=function(){var b=a();b&&(b.sheetTemplateController.sheetTemplate.setComponentLabelsVisibility(this.checked),b.sheetTemplateController.design.modified=!0)};var s=function(b,e){var g=c(""+e),h="",i=a(),j=void 0;if(i){var k=i.sheetTemplateController.sheetTemplate;if(j=!isNaN(g)&&g>=f.getEmptyMinSize()[b]){var l=k.getMinSize(),m=Math.ceil(l[b]);j=g>=m,j?(j=j&&g<=f.getMaxSize()[b],j?/\D/.test(g)&&(j=!1,h=d.i18n.translate("Value can only contain digits").fetch()):h=d.i18n.translate("Value must be no greater than %d").fetch(f.getMaxSize()[b])):h=d.i18n.translate("The size must be %d or greater to contain all schematic items").fetch(m)}else h=d.i18n.translate("Value must be %d or greater").fetch(f.getEmptyMinSize()[b])}return{valid:j,errorMessage:h}},t=function(b,e){var f=a();if(f){var g=f.sheetTemplateController.sheetTemplate;if(b.value=c(b.value),b.valid&&g.size[e]!=b.value){var i="height"==e?"sheet height change.":"sheet width change.";h.startCommand(d.i18n.translate(i).fetch())}}};o.validator=function(a,b){b(s("height",a))},o.onValueChange=function(){t(o,"height")},n.validator=function(a,b){b(s("width",a))},n.onValueChange=function(){t(n,"width")};var u=function(){var b=a();b&&function(){var a=b.sheetTemplateController.sheetTemplate;n.value=a.size.width,o.value=a.size.height,p.checked=a.gridVisibility,q.checked=a.netLabelsVisibility,r.checked=a.componentLabelsVisibility;var c=b.sheetTemplateController.design;a.getTemplateComponents().forEach(function(b){a.changeComponentLabelVisibility(c,b,a.componentLabelsVisibility)})}()};j.listeners.addListener(j.events.ACTIVEVIEWCHANGED,function(b){var c=a();if(c){var d=c.sheetTemplateController.sheetTemplate;b.oldView&&b.oldView.sheetTemplateController.sheetTemplate.listeners.removeListener(e.SHEET_PROPERTIES_CHANGED,u),d.listeners.addListener(e.SHEET_PROPERTIES_CHANGED,u),u()}}),h=b.createCommandObject("sheetsizechange",function(){var b=a();b&&function(){var a=b.sheetTemplateController.sheetTemplate,c={width:n.valid?n.value:a.size.width,height:o.valid?o.value:a.size.height};g.addStep({undo:function(){a.setSize({width:this.oldSize.width,height:this.oldSize.height})},redo:function(){a.setSize({width:this.newSize.width,height:this.newSize.height})},view:b,oldSize:{width:a.size.width,height:a.size.height},newSize:c}),a.setSize(c)}()}),h.enabled=!0,h.cancelActiveCommand=!0,u();var v=a();if(v){v.sheetTemplateController.sheetTemplate.listeners.addListener(e.SHEET_PROPERTIES_CHANGED,u)}m.behaviors[0]._initializeHelpAsync(m,window.multisim.rootFolder+"resources/help_en/help-sheet-settings.json")}})}()}}}),a.register("124",[],function(){return{setters:[],execute:function(){}}}),a.register("125",["a7","126","fc","fd","103","115","117","119","123","29","30","124"],function(a,b){"use strict";var c,d;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"document-properties-panel",ready:function(){},properties:{stringType:String,stringSchematic:String,stringSimulationSettings:String,stringSimulatorOptions:String,stringDigitalLogicLevelSettings:String,stringSheetSettings:String,stringName:String,stringDesignName:String},initialize:function(a,b,e,f,g,h){var i=this;c.addReadyListener(function(a){i.stringName=a.i18n.translate("Name").fetch(),i.stringType=a.i18n.translate("Type").fetch(),i.stringSchematic=a.i18n.translate("Schematic").fetch(),i.stringSimulationSettings=a.i18n.translate("Simulation settings").fetch(),i.stringSimulatorOptions=a.i18n.translate("Simulator options").fetch(),i.stringDigitalLogicLevelSettings=a.i18n.translate("Digital logic level settings").fetch(),i.stringSheetSettings=a.i18n.translate("Sheet settings").fetch(),i.stringDesignName=b.activeDesign.name||b.activeDesign.defaultName}),this.$.globalSettings.initialize(g,e,h),b.activeDesign.listeners.addListener(d.NAME_CHANGED,function(a){i.stringDesignName=a.newname}),b.listeners.addListener(b.events.ACTIVEDESIGNCHANGED,function(a){a.activeDesign&&(a.activeDesign.listeners.addListener(d.NAME_CHANGED,function(a){i.stringDesignName=a.newname}),i.stringDesignName=a.activeDesign.name||a.activeDesign.defaultName)}),this.$.sheetSettings.initialize(a,b,e,f),this.$.documentDigitalSettings.initialize(g,e)}})}()}}}),a.register("51",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({DECADE:"decade",LINEAR:"linear",OCTAVE:"octave",LIST:"list",DECIBEL:"decibel",LOGARITHMIC:"logarithmic"}),a("default",c)}}}),a.register("52",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({DISABLED:"disabled",X:"x",Y:"y",XY:"xy"}),a("default",c)}}}),a.register("62",["22"],function(a,b){"use strict";var c,d;return{setters:[function(a){c=a.default}],execute:function(){d=Object.freeze({voltage:c.PROBE_VOLTAGE,current:c.PROBE_CURRENT,expression:c.PROBE_EXPRESSION,digital:c.PROBE_DIGITAL}),a("default",d)}}}),a.register("127",[],function(){return{setters:[],execute:function(){}}}),a.register("128",["1b","a7","cc","106","113","2d","4f","29","c6","104","b9","105","51","52","22","62","50","21","3b","32","44","127"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;return{setters:[function(a){c=a.default},function(a){},function(a){},function(a){},function(a){d=a.fitUnitLabel},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){},function(a){},function(a){},function(a){},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.basicNumberValidate,m=a.customValidate},function(a){n=a.default},function(a){o=a.switchEnteredChars,p=a.findBestSIUnitPrefix,q=a.formatSimulationNumber,r=a.convertToDB,s=a.convertFromDB},function(a){t=a.default},function(a){u=a.default},function(a){}],execute:function(){(function(){function a(a,b){var c="";if(a)switch(b){case a.signalTypes.voltage:c="V";break;case a.signalTypes.current:c="A";break;case a.signalTypes.expression:case a.signalTypes.digital:c=""}return c}function b(b,c,d){return a(b,b.getTypeOfNetlistVariable(c,d))}window.Polymer({is:"grapher-properties",behaviors:[window.Polymer.InitializeHelp],properties:{stringName:String,stringType:String,stringPlots:String,stringShow:String,stringTrigger:String,stringSingle:String,stringAuto:String,stringNormal:String,stringNone:String,stringRising:String,stringFalling:String,stringEither:String,stringSource:String,stringEdgeDirection:String,stringLevel:String,stringTimeDiv:String,stringWindowSize:String,stringDelay:String,stringAxes:String,stringMaximum:String,stringMinimum:String,stringTime:String,stringFrequency:String,stringVoltage:String,stringCurrent:String,stringXAxis:String,stringMagnitude:String,stringPhase:String,stringAutoScaleVoltage:String,stringAutoScaleCurrent:String,stringAutoScaleMagnitude:String,stringAutoScalePhase:String,iconVoltageAutoScale:String,iconCurrentAutoScale:String,iconMagnitudeAutoScale:String,iconPhaseAutoScale:String,stringMagnitudeScale:String,stringZoomAll:String,paramAxis:{type:Array,value:[]}},ready:function(){},_handleAutoScaleButtonClick:function(){},_attachYRangeInputHandler:function(a,b){var c=this;return function(d){o(c.querySelector("#"+(b?a.minYID:a.maxYID)),d)}},_attachYRangeValidator:function(){},_attachYRangeValueChange:function(){},_handleAxisInfoChanged:function(){var a=this;this.paramAxis.forEach(function(b){var c=a.querySelector("#"+b.minYID),d=a.querySelector("#"+b.maxYID);c.oninput=a._attachYRangeInputHandler(b,!0),c.onValueChange=a._attachYRangeValueChange(b,!0),c.validator=a._attachYRangeValidator(b,!0),d.oninput=a._attachYRangeInputHandler(b,!1),d.validator=a._attachYRangeValidator(b,!1),d.onValueChange=a._attachYRangeValueChange(b,!1)})},initialize:function(v,w,x){var y=this;this.$.vertAxisInfoRepeat.addEventListener("dom-change",function(){y._handleAxisInfoChanged()});var z=g.i18n,A=this;A.activeViewGetter=v;var B=x.simulationController,C=A.$.signalEntry,D=C.firstElementChild,E=null,F=null,G={},H=[A.$.cursor1SweepSelector,A.$.cursor2SweepSelector],I=new Map([[k.voltage,0],[k.current,1],[k.expression,2],[k.digital,3]]),J=new Map([[k.voltage,{signalTypeName:z.translate("Voltage (V)").fetch(),signaltypeAutoScaleHelp:"AxesV",signalTypeHelp:"AxesVoltage",signalTypeMinYHelp:"AxesVoltageMin",signalTypeMaxYHelp:"AxesVoltageMax"}],[k.current,{signalTypeName:z.translate("Current (A)").fetch(),signaltypeAutoScaleHelp:"AxesI",signalTypeHelp:"AxesCurrent",signalTypeMinYHelp:"AxesCurrentMin",signalTypeMaxYHelp:"AxesCurrentMax"}],[k.expression,{signalTypeName:g.i18n.translate("Expression").fetch(),signaltypeAutoScaleHelp:"AxesE",signalTypeHelp:"AxesExpression",signalTypeMinYHelp:"AxesExpressionMin",signalTypeMaxYHelp:"AxesExpressionMax"}],[k.digital,{signalTypeName:z.translate("Digital").fetch(),signaltypeAutoScaleHelp:"AxesD",signalTypeHelp:"AxesDigital",signalTypeMinYHelp:"AxesDigitalMin",signalTypeMaxYHelp:"AxesDigitalMax"}]]),K=new Map;A.iconVoltageAutoScale="multisim:leftaxisscale",A.iconCurrentAutoScale="multisim:leftaxisscale",A.iconMagnitudeAutoScale="multisim:leftaxisscale",A.iconPhaseAutoScale="multisim:rightaxisscale";var L=function(){return F&&F.type===n.Interactive&&F.analysisSettings},M=function(a,b){return b===n.AC||b===n.PARAM_SWEEP&&a.lastSweptAnalysis===n.AC},N=function(){return F&&F.type!==n.DC},O=function(){if(L()){var a=F.analysisSettings,b=a.trigger;switch(this.id){case"single":b.mode=a.triggerModes.TM_SINGLE;break;case"auto":b.mode=a.triggerModes.TM_AUTO;break;case"normal":b.mode=a.triggerModes.TM_NORMAL;break;case"none":b.mode=a.triggerModes.TM_NONE;break;case"rising":b.edge=a.triggerEdges.TE_RISING;break;case"falling":b.edge=a.triggerEdges.TE_FALLING;break;case"either":b.edge=a.triggerEdges.TE_BOTH}e.isEqual(a.trigger,b)||(a.trigger=b,B.notifySimulationSettingsUpdated(A))}},P=function(a,b){x.activeDesign.probeController.getRangesForType(b).forEach(function(b){b[a.analysisType].minYDisplay=void 0,b[a.analysisType].maxYDisplay=void 0})},Q=function(a){var b=F.analysisSettings;switch(a.currentTarget.id){case"autoscalemagnitude":b.maxMagnitudeDisplay=void 0,b.minMagnitudeDisplay=void 0;break;case"autoscalephase":b.maxPhaseDisplay=void 0,b.minPhaseDisplay=void 0;break;case"voltageautoscale":P(b,k.voltage);break;case"currentautoscale":P(b,k.current);break;case"expressionautoscale":P(b,k.expression);break;case"digitalautoscale":P(b,k.digital);break;default:throw new Error(a.currentTarget.id+" is not handled.")}B.notifySimulationSettingsUpdated(A)};this._handleAutoScaleButtonClick=Q;var R=function(){E&&function(){var a=E(),b=a.analysisSettings,c=a.type;b.minXDisplay=void 0,b.maxXDisplay=void 0,M(b,c)?(b.maxMagnitudeDisplay=void 0,b.minMagnitudeDisplay=void 0,b.maxPhaseDisplay=void 0,b.minPhaseDisplay=void 0):Object.values(k).forEach(function(a){return P(b,a)}),B.notifySimulationSettingsUpdated(A)}()},S=function(a){o(this.$.multisimTextInput,a)};this._attachYRangeValidator=function(a,b){return function(c,d){var e={valid:!0},g=A.querySelector("#"+a.minYID),h=A.querySelector("#"+a.maxYID);(b?g:h).userChange&&function(){var d=x.activeDesign.probeController.getExtremesForType(a.signalType),i="string"==typeof c||c instanceof String?f(c):c,j="string"==typeof g.value||g.value instanceof String?f(g.value):g.value,k="string"==typeof h.value||h.value instanceof String?f(h.value):h.value;e=l(c,b?A.stringMinimum:A.stringMaximum),e.valid&&(e=m(function(){return!F||(b?i<k&&(i<d.max||void 0===d.max)&&i>=F.analysisSettings.minValidY:i>j&&(i>d.min||void 0===d.min)&&i<=F.analysisSettings.maxValidY)},b?z.translate("Minimum must be a number greater than or equal to %1$s and smaller than the maximum").fetch(F.analysisSettings.minValidY.toExponential()):z.translate("Maximum must be a number greater than the minimum and smaller than or equal to %1$s").fetch(F.analysisSettings.maxValidY.toExponential())))}(),d(e)}},A._attachYRangeValueChange=function(a,b){return function(c,d){var e=A.querySelector("#"+a.minYID),f=A.querySelector("#"+a.maxYID),g=b?e:f;g.validate(),c!==d&&g.valid&&N()&&function(){da(g,!c&&0!==c);var d=c||0===c?c:void 0;x.activeDesign.probeController.getRangesForType(a.signalType||null).forEach(function(a){a[F.analysisSettings.analysisType].maxYDisplay=b?f.value:d,a[F.analysisSettings.analysisType].minYDisplay=b?d:e.value,this.title=b?a.minYDisplayValue:a.maxYDisplayValue},y),B.notifySimulationSettingsUpdated(A),b?f.validate():e.validate()}()}};var T=function(){if(L())switch(this.id){case"biggerwindow":F.analysisSettings.setNextHigherTimePerDivision();break;case"smallerwindow":F.analysisSettings.setNextLowerTimePerDivision()}},U=function(b){if(L()){var c=F.analysisSettings.trigger;c.signal=b?G[b.probe][b.type]:"",c.probe=b?b.probe:"",c.probeType=b?b.type:"",e.isEqual(F.analysisSettings.trigger,c)||(F.analysisSettings.trigger=c,B.notifySimulationSettingsUpdated(A),A.$.level.units=a(x.activeDesign.probeController,c.probeType))}};A.$.signal.onValueChange=U;var V=function(a){if(L())if(this.valid){var b=F.analysisSettings.trigger;b.valueString=a,F.analysisSettings.trigger=b,B.notifySimulationSettingsUpdated(A)}else A.$.level.value=F.analysisSettings.trigger.valueString};A.$.level.onValueChange=V,A.$.level.oninput=S,A.$.level.validator=function(a,b){var c=L()?F.analysisSettings.validateTriggerLevel(a):{valid:!0,errorMessage:null};A.$.level.title=c.numericValue||"",b(c)};var W=function(a,b){a!==b&&(F.setCursorType(a),H.concat(A.$.cursor1Signal,A.$.cursor2Signal).forEach(function(b){b.disabled=a===i.DISABLED}),fa.forEach(function(b,c){c===a?b.removeAttribute("hidden"):b.setAttribute("hidden","")}))},X=function(a,b,c){var d=F.analysisSettings;if(d.cursorType!==i.DISABLED){var e=d.activeCursors[a],f=d.cursorSweeps?d.cursorSweeps[a]:void 0;b!==c&&(F.setCursorSignal(e,b.signalName,b.probe,K.get(f)),e.signal=b)}};H.forEach(function(a,b){a.onValueChange=function(a){var c=F.analysisSettings.activeCursors[b];F.analysisSettings.cursorSweeps[b]=a,F.setCursorSignal(c,c.signal.signalName,c.signal.probe,K.get(a))}});var Y=function(a,b){W(a,b),F.analysisSettings.cursorType=a,X(0,A.$.cursor1Signal.value),X(1,A.$.cursor2Signal.value)};A.$.cursorType.onValueChange=Y;var Z=function(a,b){X(0,a,b),F.analysisSettings.cursor1Signal=a};A.$.cursor1Signal.onValueChange=Z;var $=function(a,b){X(1,a,b),F.analysisSettings.cursor2Signal=a};A.$.cursor2Signal.onValueChange=$,A.$.delay.validator=function(a,b){var c=l(a,A.stringDelay);c.valid&&(c=m(function(){return a>=0},g.i18n.translate("Value must be a number greater than 0").fetch())),b(c)},A.$.delay.onValueChange=function(a,b){if(a!==b&&L()){var c=F.analysisSettings.trigger;c.delay=a,F.analysisSettings.trigger=c,B.notifySimulationSettingsUpdated(A)}},A.$.minx.oninput=S,A.$.minx.validator=function(a,b){var c={valid:!0};if(F&&N()&&A.$.minx.userChange){var d=F.analysisSettings.validateXDisplayRange(a,A.$.maxx.value);c={valid:d.minXDisplay,errorMessage:d.minXDisplayError}}b(c)},A.$.minx.onValueChange=function(a,b){if(this.validate(),a!==b&&F&&this.valid&&N()){da(A.$.minx,!1);var c=a;F.analysisSettings.minXDisplay=c,A.$.maxx.validate(),B.notifySimulationSettingsUpdated(A)}A.$.minx.title=F.analysisSettings.minXDisplayValue},A.$.maxx.oninput=S,A.$.maxx.validator=function(a,b){var c={valid:!0};if(F&&N()&&A.$.maxx.userChange){var d=F.analysisSettings.validateXDisplayRange(A.$.minx.value,a);c={valid:d.maxXDisplay,errorMessage:d.maxXDisplayError}}b(c)},A.$.maxx.onValueChange=function(a,b){if(this.validate(),a!==b&&F&&this.valid&&N()){da(A.$.maxx,!1);var c=a;F.analysisSettings.maxXDisplay=c,A.$.minx.validate(),B.notifySimulationSettingsUpdated(A)}A.$.maxx.title=F.analysisSettings.maxXDisplayValue},A.$.minPhaseY.oninput=S,A.$.minPhaseY.validator=function(a,b){var c={valid:!0};if(F&&F.analysisSettings.validatePhaseDisplayRange&&A.$.minPhaseY.userChange){var d=a,e=F.analysisSettings.validatePhaseDisplayRange(d,A.$.maxPhaseY.value);c={valid:e.minPhaseDisplay,errorMessage:e.minPhaseDisplayError}}b(c)},A.$.minPhaseY.onValueChange=function(a,b){if(this.validate(),a!==b&&F&&this.valid&&F.analysisSettings.validatePhaseDisplayRange){da(A.$.minPhaseY,!1);var c=a;F.analysisSettings.minPhaseDisplay=c,F.analysisSettings.maxPhaseDisplay=A.$.maxPhaseY.value,A.$.maxPhaseY.validate(),B.notifySimulationSettingsUpdated(A)}A.$.minPhaseY.title=F.analysisSettings.minPhaseDisplayValue},A.$.maxPhaseY.oninput=S,A.$.maxPhaseY.validator=function(a,b){var c={valid:!0};if(F&&F.analysisSettings.validatePhaseDisplayRange&&A.$.maxPhaseY.userChange){var d=a,e=F.analysisSettings.validatePhaseDisplayRange(A.$.minPhaseY.value,d);c={valid:e.maxPhaseDisplay,errorMessage:e.maxPhaseDisplayError}}b(c)},A.$.maxPhaseY.onValueChange=function(a,b){if(this.validate(),a!==b&&F&&this.valid&&F.analysisSettings.validatePhaseDisplayRange){da(A.$.maxPhaseY,!1);var c=a;F.analysisSettings.maxPhaseDisplay=c,F.analysisSettings.minPhaseDisplay=A.$.minPhaseY.value,A.$.minPhaseY.validate(),B.notifySimulationSettingsUpdated(A)}A.$.maxPhaseY.title=F.analysisSettings.maxPhaseDisplayValue};var _=function(a){return F&&F.analysisSettings.grapherMagnitudeScaleType==h.DECIBEL?r(a,!0):a},aa=function(a){return F&&F.analysisSettings.grapherMagnitudeScaleType==h.DECIBEL?s(a,!0):a};F&&F.analysisSettings.grapherMagnitudeScaleType==h.DECIBEL&&(A.$.minMagnitudeY.units="dB",A.$.maxMagnitudeY.units="dB"),A.$.minMagnitudeY.oninput=S,A.$.minMagnitudeY.validator=function(a,b){var c={valid:!0};if(F&&F.analysisSettings.validateMagnitudeDisplayRange&&A.$.minMagnitudeY.userChange){var d=F.analysisSettings.validateMagnitudeDisplayRange(a,A.$.maxMagnitudeY.value);c={valid:d.minMagnitudeDisplay,errorMessage:d.minMagnitudeDisplayError}}b(c)},A.$.minMagnitudeY.onValueChange=function(a,b){this.validate(),a!==b&&F&&this.valid&&F.analysisSettings.validateMagnitudeDisplayRange&&(da(A.$.minMagnitudeY,!1),F.analysisSettings.minMagnitudeDisplay=aa(a),F.analysisSettings.maxMagnitudeDisplay=aa(A.$.maxMagnitudeY.value),A.$.maxMagnitudeY.validate(),B.notifySimulationSettingsUpdated(A)),A.$.minMagnitudeY.title=_(F.analysisSettings.minMagnitudeDisplayValue)},A.$.maxMagnitudeY.oninput=S,A.$.maxMagnitudeY.validator=function(a,b){var c={valid:!0};if(F&&F.analysisSettings.validateMagnitudeDisplayRange&&A.$.maxMagnitudeY.userChange){var d=F.analysisSettings.validateMagnitudeDisplayRange(A.$.minMagnitudeY.value,a);c={valid:d.maxMagnitudeDisplay,errorMessage:d.maxMagnitudeDisplayError}}b(c)},A.$.maxMagnitudeY.onValueChange=function(a,b){this.validate(),a!==b&&F&&this.valid&&F.analysisSettings.validateMagnitudeDisplayRange&&(da(A.$.maxMagnitudeY,!1),F.analysisSettings.maxMagnitudeDisplay=aa(a),F.analysisSettings.minMagnitudeDisplay=aa(A.$.minMagnitudeY.value),A.$.minMagnitudeY.validate(),B.notifySimulationSettingsUpdated(A)),A.$.maxMagnitudeY.title=_(F.analysisSettings.maxMagnitudeDisplayValue)},A.$.magnitudeScale.onValueChange=function(){var a=F.analysisSettings;a.grapherMagnitudeScaleType!==this.value&&(a.grapherMagnitudeScaleType=this.value,a.grapherMagnitudeScaleType!==h.LINEAR&&(a.minMagnitudeDisplayValue<a.minValidMagnitude&&(a.minMagnitudeDisplay=ca(a.minValidMagnitude)),a.maxMagnitudeDisplayValue<a.minMagnitudeDisplay&&(a.maxMagnitudeDisplay=ca(10*a.minMagnitudeDisplayValue))),B.notifySimulationSettingsUpdated(A))};var ba=function(){E&&ka(E())},ca=function(a){var b=p(a),c=Math.max(3,1+Math.ceil(Math.log10(Math.abs(b.modifiedValue)))+Math.max(0,-b.siPrefixPow));return q(a,void 0,!0,c,!0,!1)},da=function(a,b){b?a.setAttribute("auto",""):a.removeAttribute("auto")},ea=function(a,b){return b.some(function(b){return e.isEqual(b.value,a)})},fa=new Map([[i.DISABLED,A.$.helpCursorTypeDisabled],[i.X,A.$.helpCursorTypeX],[i.Y,A.$.helpCursorTypeY],[i.XY,A.$.helpCursorTypeXY]]),ga=function(a,b,d){A.$.cursorType.options=b,A.$.cursor1Signal.options=A.$.cursor2Signal.options=d;var e=void 0,f=void 0,g=void 0,h=void 0;d.length>0?(e=a.cursorType,f=!1,g=h=d[0].value,ea(a.cursor1Signal,d)?g=a.cursor1Signal:a.cursor1Signal=d[0].value,ea(a.cursor2Signal,d)?h=a.cursor2Signal:a.cursor2Signal=d[0].value,A.$.cursor1Signal.value=g,A.$.cursor2Signal.value=h):(e=i.DISABLED,f=!0,A.$.cursor1Signal.$.value.innerHTML=A.$.cursor2Signal.$.value.innerHTML=z.translate("No probes available").fetch()),A.$.cursorType.value=e,A.$.cursorType.disabled=f,A.$.cursordrawer.removeAttribute("hidden"),a.cursorSweeps&&a.numSweeps>1?function(){var b=new Set(B.dataManager.getSweepNames()),d=[];K=new Map,[].concat(c(b)).forEach(function(a,b){d.push({value:a,displayText:a}),K.set(a,b)}),H.forEach(function(c,e){c.removeAttribute("hidden"),c.options=d;var f=c.options.findIndex(function(b){return b.displayText===a.cursorSweeps[e]});f<0&&a.numSweeps===b.size?a.cursorSweeps[e]=c.value=c.options[0].value:f>-1&&(c.value=a.cursorSweeps[e])})}():H.forEach(function(a){return a.setAttribute("hidden","")}),W(e),e!==i.DISABLED&&(X(0,g),X(1,h))},ha=void 0,ia=void 0,ja=void 0,ka=function(c){F=c;var e=F.analysisSettings;A.$.analysisType.textContent="",A.$.analysisName.textContent="",A.$.verticalscaleautobuttonstran.setAttribute("hidden",""),A.$.autoscalemagnitude.setAttribute("hidden",""),A.$.autoscalephase.setAttribute("hidden",""),A.$.verticalscaleautobuttonsac.setAttribute("hidden",""),A.$.paramDesc.setAttribute("hidden","");var f=c.type;e?function(){A.$.analysisName.textContent=e.runName;var g=x.activeDesign.probeController;switch(A.$.triggerSection.setAttribute("hidden",""),A.$.cursordrawer.setAttribute("hidden",""),e.removeFeedbackChangeListener&&e.removeFeedbackChangeListener(ba),f){case n.PARAM_SWEEP:switch(A.$.grapherdrawer.removeAttribute("hidden"),A.$.verticalaxescontainer.removeAttribute("hidden"),A.$.horizontalscalecontainer.removeAttribute("hidden"),A.$.zoomallgroup.removeAttribute("hidden"),A.$.analysisType.innerHTML=z.translate("Parameter Sweep Graph:").fetch()+"<br>"+B.getAnalysisText(e.lastSweptAnalysis),e.lastSweptAnalysis){case n.DC:A.stringXAxis=e.xAxisName,A.$.paramDesc.removeAttribute("hidden"),A.$.paramDesc.textContent=e.parameterFullName,A.$.minx.units=e.parameterUnits,d(A.$.minx),A.$.maxx.units=e.parameterUnits,d(A.$.maxx),A.$.verticalscaleautobuttonstran.removeAttribute("hidden");break;case n.AC:A.stringXAxis=A.stringFrequency,A.$.minx.units="Hz",A.$.maxx.units="Hz",A.$.autoscalemagnitude.removeAttribute("hidden"),A.$.autoscalephase.removeAttribute("hidden"),A.$.verticalscaleautobuttonsac.removeAttribute("hidden"),A.$.magnitudeScale.options&&A.$.magnitudeScale.options.length||(A.$.magnitudeScale.options=ha),A.$.magnitudeScale.value=e.grapherMagnitudeScaleType;break;case n.Transient:A.stringXAxis=A.stringTime,A.$.minx.units="s",A.$.maxx.units="s",A.$.verticalscaleautobuttonstran.removeAttribute("hidden")}da(A.$.minx,!e.minXDisplay),da(A.$.maxx,!e.maxXDisplay),A.$.minx.value=e.minXDisplay||ca(e.minXActual),A.$.maxx.value=e.maxXDisplay||ca(e.maxXActual),A.$.minx.title=e.minXValue||e.minXActual,A.$.maxx.title=e.maxXValue||e.maxXActual,A.$.minx.validate(),A.$.maxx.validate();break;case n.DC_SWEEP:A.$.grapherdrawer.removeAttribute("hidden"),A.$.verticalaxescontainer.removeAttribute("hidden"),A.$.verticalscaleautobuttonstran.removeAttribute("hidden"),A.$.horizontalscalecontainer.removeAttribute("hidden"),A.$.zoomallgroup.removeAttribute("hidden"),A.$.analysisType.textContent=z.translate("DC Sweep Graph").fetch(),A.stringXAxis=c.analysisSettings.xAxisName,da(A.$.minx,!e.minXDisplay),da(A.$.maxx,!e.maxXDisplay),A.$.minx.value=e.minXDisplay||ca(e.minXActual),A.$.maxx.value=e.maxXDisplay||ca(e.maxXActual),A.$.minx.title=e.minXValue||e.minXActual,A.$.maxx.title=e.maxXValue||e.maxXActual,A.$.minx.units="v"===e.source1Name.charAt(0)?"V":"A",A.$.maxx.units="v"===e.source1Name.charAt(0)?"V":"A",A.$.minx.validate(),A.$.maxx.validate();break;case n.Transient:A.$.grapherdrawer.removeAttribute("hidden"),A.$.verticalaxescontainer.removeAttribute("hidden"),A.$.verticalscaleautobuttonstran.removeAttribute("hidden"),A.$.horizontalscalecontainer.removeAttribute("hidden"),A.$.zoomallgroup.removeAttribute("hidden"),A.$.analysisType.textContent=z.translate("Transient Graph").fetch(),A.stringXAxis=A.stringTime,da(A.$.minx,!e.minXDisplay),da(A.$.maxx,!e.maxXDisplay),A.$.minx.value=e.minXDisplay||ca(e.minXActual),A.$.maxx.value=e.maxXDisplay||ca(e.maxXActual),A.$.minx.title=e.minXValue||e.minXActual,A.$.maxx.title=e.maxXValue||e.maxXActual,A.$.minx.units="s",A.$.maxx.units="s",A.$.minx.validate(),A.$.maxx.validate();break;case n.AC:A.$.grapherdrawer.removeAttribute("hidden"),A.$.verticalaxescontainer.removeAttribute("hidden"),A.$.verticalscaleautobuttonsac.removeAttribute("hidden"),A.$.horizontalscalecontainer.removeAttribute("hidden"),A.$.zoomallgroup.removeAttribute("hidden"),A.$.analysisType.textContent=z.translate("AC Sweep Graph").fetch(),A.stringXAxis=A.stringFrequency,da(A.$.minx,!e.minXDisplay),da(A.$.maxx,!e.maxXDisplay),A.$.minx.value=e.minXDisplay||ca(e.minXActual),A.$.maxx.value=e.maxXDisplay||ca(e.maxXActual),A.$.minx.title=e.minXValue||e.minXActual,A.$.maxx.title=e.maxXValue||e.maxXActual,A.$.minx.units="Hz",A.$.maxx.units="Hz",A.$.autoscalemagnitude.removeAttribute("hidden"),A.$.autoscalephase.removeAttribute("hidden"),A.$.minx.validate(),A.$.maxx.validate(),A.$.magnitudeScale.options&&A.$.magnitudeScale.options.length||(A.$.magnitudeScale.options=ha),A.$.magnitudeScale.value=e.grapherMagnitudeScaleType;break;case n.DC:A.$.grapherdrawer.setAttribute("hidden",""),A.$.verticalaxescontainer.setAttribute("hidden",""),A.$.verticalscaleautobuttonstran.setAttribute("hidden",""),A.$.verticalscaleautobuttonsac.setAttribute("hidden",""),A.$.horizontalscalecontainer.setAttribute("hidden",""),A.$.zoomallgroup.setAttribute("hidden",""),A.$.analysisType.textContent=z.translate("DC Operating Point").fetch();break;case n.Interactive:A.$.grapherdrawer.removeAttribute("hidden"),B.simulationState===u.Running?(A.$.timedivcontainer.removeAttribute("hidden"),A.$.horizontalscalecontainer.setAttribute("hidden",""),A.$.zoomallgroup.setAttribute("hidden","")):(A.$.timedivcontainer.setAttribute("hidden",""),A.$.horizontalscalecontainer.removeAttribute("hidden"),A.$.zoomallgroup.removeAttribute("hidden"),da(A.$.minx,!e.minXDisplay),da(A.$.maxx,!e.maxXDisplay),A.$.minx.value=ca(e.minXActual),A.$.maxx.value=ca(e.maxXActual),A.$.minx.title=e.minXValue||e.minXActual,A.$.maxx.title=e.maxXValue||e.maxXActual,A.$.minx.units="s",A.$.maxx.units="s",A.$.minx.validate(),A.$.maxx.validate()),A.$.verticalaxescontainer.removeAttribute("hidden"),A.$.verticalscaleautobuttonstran.removeAttribute("hidden"),A.stringXAxis=A.stringTime,A.$.analysisType.textContent=z.translate("Interactive simulation graph").fetch(),A.$.triggerSection.removeAttribute("hidden"),A.$.single.active=e.trigger.mode===e.triggerModes.TM_SINGLE,A.$.auto.active=e.trigger.mode===e.triggerModes.TM_AUTO,A.$.normal.active=e.trigger.mode===e.triggerModes.TM_NORMAL,A.$.none.active=e.trigger.mode===e.triggerModes.TM_NONE,A.$.rising.active=e.trigger.edge===e.triggerEdges.TE_RISING,A.$.falling.active=e.trigger.edge===e.triggerEdges.TE_FALLING,A.$.either.active=e.trigger.edge===e.triggerEdges.TE_BOTH,A.$.signal.value={probe:e.trigger.probe,type:e.trigger.probeType},A.$.level.value=e.trigger.valueString,A.$.level.units=a(x.activeDesign.probeController,e.trigger.probeType),A.$.delay.value=e.trigger.delay,A.stringWindowSize=e.timePerDivisionDisplayString,e.addFeedbackChangeListener(ba);break;default:A.$.analysisType.textContent=z.translate("Simulation output").fetch()}var k=function(){var a=F.analysisSettings.cursorSweeps,b=a?[K.get(a[0]),K.get(a[1])]:[];c.setVisible(this.signal,this.probe,this.type,this.checked,b)},l=[];G={},ja=[];var m=[].slice.call(A.$.mainContainer.querySelectorAll(".checkBoxWrapper"));c.signals.forEach(function(a,b){var d=g.getProbesForNetlistVariable(a.signal),f=void 0;f=c.type===n.AC||c.type===n.PARAM_SWEEP&&e.lastSweptAnalysis===n.AC?b%2?"magnitude":"phase":"default",d.forEach(function(b){c.isSignalInGraph(a.signal,b.probeID,f)&&function(){var d=b.mapSimulationVariableToDisplayName.get(a.signal),e="magnitude"===f?"Mag: "+d:"phase"===f?"Phase: "+d:d,g=c.isVisible(a.signal,b.probeID,f),h=a.signal,i=b.probeID;if([].slice.call(A.$.mainContainer.querySelectorAll(".checkBoxWrapper")).filter(function(a){var b=a.querySelector(".checkbox");return b.label===e&&b.checked===g&&b.probe===i&&b.type===f}).length>0)m=m.filter(function(a){var b=a.querySelector(".checkbox");return b.label!==e||b.checked!==g||b.probe!==i||b.type!==f});else{var j=document.importNode(D,!0);A.$.mainContainer.appendChild(j);var k=j.querySelector(".checkbox");k.label=e,k.checked=g,k.signal=h,k.probe=i,k.type=f}}()})}),m.forEach(function(a){a.parentNode.removeChild(a)}),m=[].slice.call(A.$.mainContainer.querySelectorAll(".checkBoxWrapper .checkbox")),m.forEach(function(a){a.onValueChange=k}),M(e,f)&&(da(A.$.minPhaseY,!e.minPhaseDisplay),da(A.$.maxPhaseY,!e.maxPhaseDisplay),da(A.$.minMagnitudeY,!e.minMagnitudeDisplay),da(A.$.maxMagnitudeY,!e.maxMagnitudeDisplay),A.$.minPhaseY.value=e.minPhaseDisplay||ca(e.minPhaseActual),A.$.maxPhaseY.value=e.maxPhaseDisplay||ca(e.maxPhaseActual),A.$.minPhaseY.title=e.minPhaseActual||e.minPhaseValue,A.$.maxPhaseY.title=e.maxPhaseActual||e.maxPhaseValue,A.$.minMagnitudeY.value=_(e.minMagnitudeDisplay||ca(e.minMagnitudeActual)),A.$.maxMagnitudeY.value=_(e.maxMagnitudeDisplay||ca(e.maxMagnitudeActual)),A.$.minMagnitudeY.title=_(e.minMagnitudeActual||e.minMagnitudeValue),A.$.maxMagnitudeY.title=_(e.maxMagnitudeActual||e.maxMagnitudeValue),c&&e.grapherMagnitudeScaleType===h.DECIBEL?(A.$.minMagnitudeY.units="dB",A.$.maxMagnitudeY.units="dB"):(A.$.minMagnitudeY.units="",A.$.maxMagnitudeY.units=""),A.$.verticaldefault.setAttribute("hidden",""),A.$.verticalac.removeAttribute("hidden"));var o={voltage:!1,current:!1,expression:!1};if(f!==n.DC&&function(){var a={},d=[];g.getProbes().forEach(function(h){var i=A.activeViewGetter().sheetTemplateController.sheetTemplate.getObject(h.templateGUID);i.probeType===j.PROBE_DATA&&i.disabled||g.getNetlistVariablesForProbe(h).forEach(function(k,m){var p="default";if((c.type===n.AC||c.type===n.PARAM_SWEEP&&e.lastSweptAnalysis===n.AC)&&(p=m%2?"magnitude":"phase"),i.probeType!==j.PROBE_DATA||c.isSignalInGraph(k,h.probeID,p)){var q=g.getTypeOfNetlistVariable(h,k)||"",r=h.mapSimulationVariableToDisplayName.get(k),s={value:{signalName:k,probe:h.templateGUID},displayText:r};if(ea(s.value,ja)||ja.push(s),!M(e,f)&&h.plot.axisRanges[q]){var t=b(g,h,k)||"";a[q]=a[q]||{};var u=a[q],v=h.plot.axisRanges[q][e.analysisType];u.minY=void 0===u.minY?v.minYDisplay:u.minY!==v.minYDisplay?null:u.minY,u.maxY=void 0===u.maxY?v.maxYDisplay:u.maxY!==v.maxYDisplay?null:u.maxY,u.minYValue=v.minYDisplayValue||0===v.minYDisplayValue?u.minYValue||0===u.minYValue?Math.min(u.minYValue,v.minYDisplayValue):v.minYDisplayValue:u.minYValue,u.maxYValue=v.maxYDisplayValue||0===v.maxYVoltageValue?u.maxYValue||0===u.maxYValue?Math.max(u.maxYValue,v.maxYDisplayValue):v.maxYDisplayValue:u.maxYValue,u.minYActual=v.minYActual,u.maxYActual=v.maxYActual,G[h.probeID]||(G[h.probeID]={}),i.probeType!==j.PROBE_DATA&&l.push({value:{probe:h.probeID,type:q},displayText:r}),G[h.probeID][q]=k,o[q]||d.push({axisInfo:u,signalType:q,iconAutoScaleAxisSide:"multisim:rightaxisscale",signalTypeName:J.get(q).signalTypeName,signaltypeAutoScaleHelp:J.get(q).signaltypeAutoScaleHelp,signalTypeHelp:J.get(q).signalTypeHelp,unit:t,minYID:q+"minY",maxYID:q+"maxY",autoScaleID:q+"autoscale",signalTypeMinYHelp:J.get(q).signalTypeMinYHelp,signalTypeMaxYHelp:J.get(q).signalTypeMaxYHelp}),o[q]=!0}}})}),d.sort(function(a,b){return I.get(a.signalType)-I.get(b.signalType)}),d.length&&(d[0].iconAutoScaleAxisSide="multisim:leftaxisscale"),A.paramAxis=d,window.Polymer.dom.flush(),A.behaviors[0]._initializeHelpAsync(A,window.multisim.rootFolder+"resources/help_en/help-grapher.json"),A.behaviors[0]._acquireHelp(A.$.grapherdrawer),M(e,f)||(A.$.verticalac.setAttribute("hidden",""),A.$.verticaldefault.removeAttribute("hidden"),A.paramAxis.forEach(function(a){var b=A.querySelector("#"+a.minYID),c=A.querySelector("#"+a.maxYID);null===a.axisInfo.minY&&void 0!==a.axisInfo.minYValue&&(a.axisInfo.minY=ca(a.axisInfo.minYValue)),null===a.axisInfo.maxY&&void 0!==a.axisInfo.maxYValue&&(a.axisInfo.maxY=ca(a.axisInfo.maxYValue)),da(b,!a.axisInfo.minY),da(c,!a.axisInfo.maxY),b.value=a.axisInfo.minY||ca(a.axisInfo.minYActual),c.value=a.axisInfo.maxY||ca(a.axisInfo.maxYActual),b.title=a.axisInfo.minYActual||a.axisInfo.minYValue,c.title=a.axisInfo.maxYActual||a.axisInfo.maxYValue}))}(),c.type===n.Interactive)if(A.$.signal.options=l,0===A.$.signal.options.filter(function(a){return a.value.probe===A.$.signal.value.probe&&a.value.type===A.$.signal.value.type}).length){var p=A.$.signal.options.filter(function(a){return a.value.probe===A.$.signal.value.probe});!p.length&&A.$.signal.options?A.$.signal.options.length?(A.$.signal.value=A.$.signal.options[0].value,U(A.$.signal.value)):(U(null),A.$.signal.$$("#value").innerHTML=z.translate("No probes available").fetch()):(A.$.signal.value=p[0].value,U(A.$.signal.value))}else G[A.$.signal.value.probe][A.$.signal.value.type]!==e.trigger.signal&&U(A.$.signal.value);if(e.analysisType!==n.DC){var q=M(e,f)?ia.filter(function(a){return a.value!==i.XY}):ia;ga(e,q,ja)}}():A.$.mainContainer.innerHTML=""};w.listeners.addListener("activate",function(a){E=a;var b=E();ka(b)}),B.dataManager.dataUpdateListeners.addListener(B.dataManager.EDataUpdateEvents.AddData,function(a){a&&a.firstData&&E&&ka(E())});var la=function(){E&&ka(E())};B.listeners.addListener(t.SimulationSettingsChanged,la),B.listeners.addListener(t.SettingsFeedbackChanged,la),B.listeners.addListener(t.RunStateChanged,la),A.$.single.addEventListener("click",O),A.$.auto.addEventListener("click",O),A.$.normal.addEventListener("click",O),A.$.none.addEventListener("click",O),A.$.rising.addEventListener("click",O),A.$.falling.addEventListener("click",O),A.$.either.addEventListener("click",O),A.$.biggerwindow.addEventListener("click",T),A.$.smallerwindow.addEventListener("click",T),A.$.autoscalemagnitude.addEventListener("click",Q),A.$.autoscalephase.addEventListener("click",Q),A.$.zoomall.addEventListener("click",R),g.addReadyListener(function(){A.stringCursors=z.translate("Cursors").fetch(),A.stringCursorType=z.translate("Type").fetch(),A.stringCursor1=z.translate("Cursor 1").fetch(),A.stringCursor2=z.translate("Cursor 2").fetch(),A.stringType=z.translate("Type").fetch(),A.stringName=z.translate("Name").fetch(),A.stringPlots=z.translate("Plots").fetch(),A.stringShow=z.translate("Show").fetch(),A.stringTrigger=z.translate("Trigger").fetch(),A.stringSingle=z.translate("Single").fetch(),A.stringAuto=z.translate("Auto").fetch(),A.stringNormal=z.translate("Normal").fetch(),A.stringNone=z.translate("None").fetch(),A.stringRising=z.translate("Rising").fetch(),A.stringFalling=z.translate("Falling").fetch(),A.stringEither=z.translate("Either").fetch(),A.stringSource=z.translate("Source").fetch(),A.stringEdgeDirection=z.translate("Edge direction").fetch(),A.stringLevel=z.translate("Level").fetch(),A.stringTimeDiv=z.translate("Time/Div").fetch(),A.stringDelay=z.translate("Delay").fetch(),A.stringAxes=z.translate("Axes").fetch(),A.stringMaximum=z.translate("Maximum").fetch(),A.stringMinimum=z.translate("Minimum").fetch(),A.stringTime=z.translate("Time (s)").fetch(),A.stringFrequency=z.translate("Frequency (Hz)").fetch(),A.stringVoltage=z.translate("Voltage (V)").fetch(),A.stringCurrent=z.translate("Current (A)").fetch(),A.stringMagnitude=z.translate("Magnitude").fetch(),A.stringPhase=z.translate("Phase (°)").fetch(),A.stringAutoScaleVoltage=z.translate("Auto fit (V)").fetch(),A.stringAutoScaleCurrent=z.translate("Auto fit (A)").fetch(),A.stringAutoScaleMagnitude=z.translate("Auto fit magnitude").fetch(),A.stringAutoScalePhase=z.translate("Auto fit phase").fetch(),A.stringMagnitudeScale=z.translate("Vertical scale").fetch(),A.stringZoomAll=z.translate("Zoom all").fetch(),ha=[{value:h.LOGARITHMIC,displayText:z.translate("Logarithmic").fetch()},{value:h.LINEAR,displayText:z.translate("Linear").fetch()},{value:h.DECIBEL,displayText:z.translate("Decibel").fetch()},{value:h.OCTAVE,displayText:z.translate("Octave").fetch()}],ia=[{value:i.DISABLED,displayText:z.translate("Disabled").fetch()},{value:i.X,displayText:z.translate("X Axis").fetch()},{value:i.Y,displayText:z.translate("Y Axis").fetch()},{value:i.XY,displayText:z.translate("Track").fetch()}]}),A.stringWindowSize="1ms/div",A.behaviors[0]._initializeHelpAsync(A,window.multisim.rootFolder+"resources/help_en/help-grapher.json")}})}).apply(this)}}}),a.register("129",[],function(){return{setters:[],execute:function(){}}}),a.register("ee",["a7","12","129"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){c=a.domSanitize},function(a){}],execute:function(){!function(){window.Polymer({is:"multisim-htmlcontainer",properties:{html:{type:String,value:"",observer:"_htmlChanged"}},_htmlChanged:function(){this.$.container.innerHTML=c(this.html)}})}()}}}),a.register("12a",[],function(){return{setters:[],execute:function(){}}}),a.register("12b",["a7","29","113","12a"],function(a,b){"use strict";var c,d;return{setters:[function(a){},function(a){c=a.default},function(a){d=a.fitUnitLabel},function(a){}],execute:function(){!function(){function a(a,b){b?(a.classList.add("disabled"),a.setAttribute("disabled","disabled")):(a.classList.remove("disabled"),a.removeAttribute("disabled"))}var b=["boxSizing","width","height","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],e=function(a){a._updateHiddenXYStyles(),a.$.hiddenxy.innerHTML="<span>"+a.$.xyinput.value.split("\n").join("&nbsp;</span><br/><span>")+"&nbsp;</span>",a.$.hiddenxy.scrollTop=a.$.xyinput.scrollTop,a.$.hiddenxy.scrollLeft=a.$.xyinput.scrollLeft};window.Polymer({is:"multisim-xyinput",properties:{value:{reflectToAttribute:!1,type:String,value:"",notify:!0,observer:"_valueChanged"},label:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_labelChanged"},units:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_unitsChanged"},errorlabel:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_errorLabelChanged"},valid:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_validityChanged"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},index:{reflectToAttribute:!0,type:Number,value:0},validator:{type:Object,value:null,observer:"_changeValidator"},oninput:{type:Object,value:null,notify:!0},notifications:{reflectToAttribute:!0,type:Object,value:null}},_changeValidator:function(){this._attached&&this._checkValidity(this.value)},_commandContextHelper:null,set commandContextHelper(b){var c=this,d=function(){var b=c._commandContextHelper.testContextEnabled();b==c.contextDisabled&&(c.contextDisabled=!b,a(c.$.xyinput,c.disabled||c.contextDisabled))};b!=c._commandContextHelper&&(c._commandContextHelper&&c._commandContextHelper.removeContextChangeListener(d),c._commandContextHelper=b,c._commandContextHelper&&c._commandContextHelper.addContextChangeListener(d)),d()},get commandContextHelper(){return this._commandContextHelper},_validityChanged:function(){this.valid?(this.$.xyinput.classList.remove("invalid"),this.$.errorContainer.style.display="none"):(this.$.xyinput.classList.add("invalid"),0!==this.errorlabel.length?this.$.errorContainer.style.display="":this.$.errorContainer.style.display="none")},_updateHiddenXYStyles:function(){var a=this.$.hiddenxy.style,c=getComputedStyle(this.$.xyinput);b.forEach(function(b){a[b]=c[b]})},_checkValidity:function(a){var b=this;b.validator?(e(b),b.validator(a,function(a){b.errorlabel=a.errorMessage?a.errorMessage:"",b.valid=a.valid,void 0!==a.errorIndexes&&a.errorIndexes.length&&function(){var c=b.$.hiddenxy.querySelectorAll("span");a.errorIndexes.forEach(function(a){a<c.length&&c[a].classList.add("error")})}()})):(this.errorlabel="",this.valid=!0)},_inputValueToValue:function(a){return a.trim().split("\n").map(function(a){return a.trim().replace(/^\++/,"").trim()}).filter(function(a){return!!a.length}).join("\n")},_valueToInputValue:function(a){return a.trim().split("\n").map(function(a){return a.trim().replace(/^\++/,"").trim()}).filter(function(a){return!!a.length}).join("\n")},_notifyValueChanged:function(){this.onValueChange&&this.onValueChange(this.value),this.fire("changed")},_disabledChanged:function(){a(this.$.xyinput,this.disabled||this.contextDisabled)},_attached:!1,attached:function(){var a=this,b=!1;a._attached=!0,this.$.xyinput.onkeydown=function(c){13===c.keyCode?(a.value!==a._inputValueToValue(this.value)||b)&&(b=!1,a.set("value",a._inputValueToValue(this.value)),a._checkValidity(a._inputValueToValue(this.value)),a._notifyValueChanged()):27===c.keyCode&&(this.value=a._valueToInputValue(a.value),a.oninput&&a.oninput(a._inputValueToValue(this.value)),a._checkValidity(a._inputValueToValue(this.value))),c.cancelBubble=!0};var e=function b(){a.select(),a.$.xyinput.removeEventListener("click",b)};this.$.xyinput.onblur=function(){(a.value!==a._inputValueToValue(this.value)||b)&&(b=!1,a.value=a._inputValueToValue(this.value),a._checkValidity(a._inputValueToValue(this.value)),a._notifyValueChanged()),a.$.xyinput.removeEventListener("click",e),a.onblur&&a.onblur()},this.$.xyinput.oninput=function(){var b=this.value.trim().split("\n"),d=2e3;b.length>d&&(this.value=b.slice(0,d).join("\n"),a.notifications&&a.notifications.notify(c.i18n.translate("The maximum number of supported Time/Voltage pairs is %1$s. Additional entries have been removed.").fetch(d),a.notifications.NT_INFO)),a.oninput&&a.oninput(a._inputValueToValue(this.value)),a._checkValidity(a._inputValueToValue(this.value))},this.$.xyinput.onfocus=function(){a.$.xyinput.addEventListener("click",e);for(var c=this.parentNode;!(null===c||c.classList&&c.classList.contains("scrollContainer"));)c=c.parentNode;var d=this.getBoundingClientRect();if(c){var f=c.getBoundingClientRect();(d.top<f.top||d.bottom>f.bottom||d.left<f.left||d.right>f.right)&&this.scrollIntoView(!0)}var g=a.valid;a._checkValidity(a._inputValueToValue(this.value)),g!=a.valid&&(b=!0)},a.$.xyinput.addEventListener("scroll",function(){a._updateHiddenXYStyles(),a.$.hiddenxy.scrollTop=a.$.xyinput.scrollTop,a.$.hiddenxy.scrollLeft=a.$.xyinput.scrollLeft}),a.hasAttribute("autofocus")&&a.$.xyinput.setAttribute("autofocus",""),this.units.length&&d(this)},init:function(){var a=this;c.addReadyListener(function(){a.strLabel=""})},select:function(){try{this.$.xyinput.setSelectionRange(0,this.$.xyinput.value.length)}catch(a){console.log(a)}},onblur:null,blur:function(){this.$.xyinput.onblur()},focus:function(){this.$.xyinput.focus()},validate:function(){this._checkValidity(this.value)},_labelChanged:function(){this.$.labelText.innerHTML=this.label,0===this.label.length?this.$.inputWrapper.classList.add("noLabel"):this.$.inputWrapper.classList.remove("noLabel")},_unitsChanged:function(){this.$.unitText.innerHTML=this.units,0===this.units.length?this.$.inputWrapper.classList.add("noUnitLabel"):this.$.inputWrapper.classList.remove("noUnitLabel")},_valueChanged:function(){this.$.xyinput.value=this._valueToInputValue(this.value),this._checkValidity(this.value)},_errorLabelChanged:function(){this.$.errorText.innerHTML=this.errorlabel}})}()}}}),a.register("28",[],function(a,b){"use strict";function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=new Uint8Array(1);return window.crypto.getRandomValues(b),b=15&b[0],b="x"===a?b:3&b|8,b.toString(16)})}return a("default",c),{setters:[],execute:function(){}}}),a.register("2a",["1d","1e","2f","22","23"],function(a,b){"use strict";function c(){this.design.addInstance(this.contextGUID,this.templateGUID,this.instance)}function d(){this.design.removeInstances(this.contextGUID,[this.templateGUID])}function e(){this.templateObject.freshSymbolFlag=!0,this.template.addObject(this.templateGUID,this.templateObject)}function f(){this.template.removeObjects({templateGUIDs:[this.templateGUID]},!1)}var g,h,i,j,k,l;return{setters:[function(a){g=a.default},function(a){h=a.default},function(a){i=a.isTemplateText},function(a){j=a.default},function(a){k=a.sourceType}],execute:function(){l=function(){function a(b){g(this,a),this.mainController=b}return h(a,[{key:"addTemplateObject",value:function(a,b){this.sheetTemplate.addObject(a,b),this.undo.addStep({redo:e,undo:f,template:this.sheetTemplate,templateGUID:a,templateObject:b})}},{key:"addDesignInstance",value:function(a,b,e){this.design.addInstance(a,b,e),this.undo.addStep({redo:c,undo:d,contextGUID:a,templateGUID:b,instance:e,design:this.design})}},{key:"removeTemplateObject",value:function(a){this.undo.addStep({undo:e,redo:f,template:this.sheetTemplate,templateGUID:a,templateObject:this.sheetTemplate.getObject(a)}),this.sheetTemplate.removeObjects({templateGUIDs:[a]})}},{key:"removeDesignInstance",value:function(a,b,e){this.design.removeInstances(a,[b]),this.undo.addStep({undo:c,redo:d,design:this.design,templateGUID:b,contextGUID:a,instance:e})}},{key:"addTemplateSymbolPinsFromOECL",value:function(a,b,c,d){this.mainController.componentAPI.getSymbolPinIDs(b,c,d).forEach(function(b){a.addSymbolPin(b,{x:0,y:0},{x:0,y:0})})}},{key:"addInstanceSymbolPinsFromOECL",value:function(a,b,c,d){this.mainController.componentAPI.getSymbolPinIDs(b,c,d).forEach(function(b){a.addPinInstance(b)})}},{key:"updateChildItemLocations",value:function(a){function b(a,b,c,e){function f(a,b){b.length>0&&function(){var d=b[0].element.rawBoundingBox,e=(d.bottom-d.top)/2;g?function(){var d=0;b.forEach(function(b){var f={x:a.x+d,y:a.y+e};c.changeTextLocation(b.element,f),d+=b.element.rawBoundingBox.right-b.element.rawBoundingBox.left+.5})}():b.forEach(function(b){var d={x:a.x+(b.element.rawBoundingBox.right-b.element.rawBoundingBox.left)/2,y:a.y+e};c.changeTextLocation(b.element,d),e+=b.element.rawBoundingBox.bottom-b.element.rawBoundingBox.top,"refdes"===b.name&&(e+=(b.element.rawBoundingBox.bottom-b.element.rawBoundingBox.top)/2)})}()}var i=.5,j={x:0,y:0,cx:b.reduce(function(a,b){return"measurements"==b.name?a:g?a+b.element.rawBoundingBox.right-b.element.rawBoundingBox.left:Math.max(a,b.element.rawBoundingBox.right-b.element.rawBoundingBox.left)},0),cy:b.reduce(function(a,b){return"measurements"==b.name?a:g?Math.max(a,b.element.rawBoundingBox.bottom-b.element.rawBoundingBox.top):a+b.element.rawBoundingBox.bottom-b.element.rawBoundingBox.top},0)};switch(a){case h.right:case h.topRight:case h.bottomRight:j.x=d.rawBoundingBox.right+i;break;case h.left:case h.topLeft:case h.bottomLeft:j.x=d.rawBoundingBox.left-j.cx-i;break;default:j.x=(d.rawBoundingBox.left+d.rawBoundingBox.right)/2-j.cx/2}switch(a){case h.top:case h.topRight:case h.topLeft:j.y=d.rawBoundingBox.top-(b[0].element.rawBoundingBox.bottom-b[0].element.rawBoundingBox.top)/2-j.cy+i,b.length>1&&(j.y=j.y-(b[b.length-1].element.rawBoundingBox.bottom-b[b.length-1].element.rawBoundingBox.top)/2);break;case h.bottom:case h.bottomRight:case h.bottomLeft:j.y=d.rawBoundingBox.bottom+i;break;default:j.y=(d.rawBoundingBox.top+d.rawBoundingBox.bottom)/2-j.cy/2}var k=j.x>i&&j.x+j.cx+i<c.size.width&&j.y>i&&j.y+j.cy+i<c.size.height;return(k||e)&&(k||(j.x+j.cx+i>c.size.width&&(j.x=c.size.width-j.cx-i),j.x<i&&(j.x=i),j.y+j.cy+i>c.size.height&&(j.y=c.size.height-j.cy-i),j.y<i&&(j.y=i),k=!0),f(j,b)),k}var c=this,d=this.sheetTemplate.getObject(a),e=d.probeType&&d.probeType===j.PROBE_EXPRESSION,f=d.probeType&&d.probeType===j.PROBE_DATA,g=e||f,h=Object.freeze({left:"left",topLeft:"topLeft",top:"top",topRight:"topRight",right:"right",bottomRight:"bottomRight",bottom:"bottom",bottomLeft:"bottomLeft"}),l=[h.top,h.bottom,h.right,h.left,h.topRight,h.bottomRight,h.topLeft,h.bottomLeft],m=[h.bottom,h.right,h.top,h.left,h.bottomRight,h.topRight,h.topLeft,h.bottomLeft],n=new Map;d&&d.children&&function(){d.probeType?(n.set(h.top,!0),n.set(h.left,!0),n.set(h.right,!0),n.set(h.topRight,!1),n.set(h.topLeft,!1),n.set(h.bottomLeft,!1),n.set(h.bottomRight,!1),n.set(h.bottom,!1),m=g?[h.right,h.top,h.left,h.bottom,h.bottomRight,h.topRight,h.topLeft,h.bottomLeft]:[h.top,h.left,h.right,h.bottom,h.bottomRight,h.topRight,h.topLeft,h.bottomLeft]):(l.forEach(function(a){n.set(a,!0)}),d.pins&&l.forEach(function(){d.pins.forEach(function(a){a.connectionX<d.rawBoundingBox.left?n.set(h.left,!1):a.connectionX>d.rawBoundingBox.right&&n.set(h.right,!1),a.connectionY<d.rawBoundingBox.top?n.set(h.top,!1):a.connectionY>d.rawBoundingBox.bottom&&n.set(h.bottom,!1)})},c));var j=d.children.filter(function(a){return i(a)},c);j=j.map(function(a){return{element:a,name:this.design.findInstance(this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID)[0],a.templateGUID).variableName}},c);var o=null;if(e)o=["refdes","probeID","expression"].concat(c.mainController.getPropertiesForItem(c.design.getContextsOfTemplate(c.sheetTemplate.sheetGUID)[0],a).map(function(a){return a.name}));else if(f){var p=c.design.findInstance(c.design.getContextsOfTemplate(c.sheetTemplate.sheetGUID)[0],a),q=p&&p.source!==k.file?p.source===k.url?"url":p.source===k.network?"network":"usb":"file";o=["refdes","probeID",q].concat(c.mainController.getPropertiesForItem(c.design.getContextsOfTemplate(c.sheetTemplate.sheetGUID)[0],a).map(function(a){return a.name}))}else o=["refdes","component"].concat(c.mainController.getPropertiesForItem(c.design.getContextsOfTemplate(c.sheetTemplate.sheetGUID)[0],a).map(function(a){return a.name})),j.sort(function(a,b){return a.name===b.name?0:o.indexOf(a.name)<o.indexOf(b.name)?-1:1});var r=0,s=0,t=!1,u=!1,v=new Map,w=0,x=null;if(j.length>0)for(;!u;){if(x=null,w=0,v.clear(),j[0].name===o[0]){for(var y=0;y<l.length;++y)if(!0===n.get(l[y])){if(w==r){v.has(l[y])?v.get(l[y]).push(j[0]):v.set(l[y],[j[0]]);break}w++}x=j.shift()}if(w=0,j.length>0&&function(){var a=void 0,b=function(b){v.has(m[a])?v.get(m[a]).push(b):v.set(m[a],[b])};for(a=0;a<m.length;++a)if(!0===n.get(m[a])){if(w==s){j.forEach(b);break}w++}}(),x&&j.unshift(x),v.size&&!t)u=!0,v.forEach(function(a,c){b(c,a,this.sheetTemplate,t)||(u=!1,x&&-1!=a.indexOf(x)?r++:s++)},c);else{if(t)break;t=!0,r=0,s=0}}}()}},{key:"undo",get:function(){return this.mainController.undo}},{key:"design",get:function(){return this.mainController.design}},{key:"sheetTemplate",get:function(){return this.mainController.sheetTemplate}},{key:"componentAPI",get:function(){return this.mainController.componentAPI}},{key:"netlistController",get:function(){return this.mainController.netlistController}}],[{key:"decideNames",value:function(a,b,c){function d(a){return a.connectorID&&a.connectorType&&"ground"!==a.connectorType}function e(a){return a.connectorID&&"ground"===a.connectorType}var f=void 0;f=a.netContents.some(e)?b.nameInfo:b.netContents.some(e)?a.nameInfo:a.netContents.some(d)?b.nameInfo:b.netContents.some(d)?a.nameInfo:a.netContents.length<b.netContents.length?a.nameInfo:b.nameInfo,f.netName=c.getNextAvailableDefaultNetName(),f.priority=c.ENetPriorities.PRIORITY_AUTO_NAMED}}]),a}(),a("default",l)}}}),a.register("3f",["1d","1e","26","27","2d","28","3c","29","2e","2a"],function(a,b){"use strict";function c(){var a=this.design.getDesignComponentByRefdes(this.newRefDes);a&&this.design.changeDesignComponentRefDes(a,this.oldRefDes)}function d(){var a=this.design.getDesignComponentByRefdes(this.oldRefDes);a&&this.design.changeDesignComponentRefDes(a,this.newRefDes)}function e(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponent(a,this.oldDesignComponent)}function f(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponent(a,this.newDesignComponent)}function g(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentPackage(a,this.oldPackageID)}function h(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentPackage(a,this.newPackageID)}function i(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentModel(a,this.oldModelID)}function j(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentModel(a,this.newModelID)}function k(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentLogicLevel(a,this.oldLogicLevel)}function l(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentLogicLevel(a,this.newLogicLevel)}function m(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentRiseTime(a,this.oldRiseTime)}function n(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentRiseTime(a,this.newRiseTime)}function o(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentFallTime(a,this.oldFallTime)}function p(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentFallTime(a,this.newFallTime)}function q(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentUseDocumentLogicLevelSettings(a,this.oldUseDocumentLogicLevelSettings)}function r(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentUseDocumentLogicLevelSettings(a,this.newUseDocumentLogicLevelSettings)}function s(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentCustomLogicFamily(a,this.oldCustomLogicFamily)}function t(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceDesignComponentCustomLogicFamily(a,this.newCustomLogicFamily)}function u(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceSymbol(a,this.oldSymbolID)}function v(){var a=this.design.findInstance(this.contextGUID,this.templateGUID);a&&this.design.changeInstanceSymbol(a,this.newSymbolID)}function w(a,b){var c=new Map;a.pins.forEach(function(a,b){c.set(b,a)}),a.pins.clear(),b.forEach(function(b,d){var e=b,f=c.get(d);f.name=e,a.pins.set(e,f)})}function x(a,b){var c=new Map;a.pinInstances.forEach(function(a,b){c.set(b,a)}),a.pinInstances.clear(),b.forEach(function(b,d){var e=b,f=c.get(d);f.pinID=e,a.pinInstances.set(e,f)})}function y(a){var b=void 0,c=void 0;return b=a.from.connectable.pinID&&a.from.connectable.parent?this.sheetTemplate.getObject(a.from.connectable.parent.templateGUID).getSymbolPin(a.from.connectable.pinID):this.sheetTemplate.getObject(a.from.connectable.templateGUID),c=a.to.connectable.pinID&&a.to.connectable.parent?this.sheetTemplate.getObject(a.to.connectable.parent.templateGUID).getSymbolPin(a.to.connectable.pinID):this.sheetTemplate.getObject(a.to.connectable.templateGUID),{templateWire:a.wireGraphic,fromPos:{x:void 0!==b.connectionX?b.connectionX:b.point.x,y:void 0!==b.connectionY?b.connectionY:b.point.y},toPos:{x:void 0!==c.connectionX?c.connectionX:c.point.x,y:void 0!==c.connectionY?c.connectionY:c.point.y}}}var z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O;return a("mapBasicRewiringInfo",y),{setters:[function(a){z=a.default},function(a){A=a.default},function(a){B=a.default},function(a){C=a.default},function(a){D=a.default},function(a){E=a.default},function(a){F=a.RefDes,G=a.formatRefDes,H=a.isValidRefDesString,I=a.parseRefDesString},function(a){J=a.default},function(a){K=a.default},function(a){L=a.default}],execute:function(){M=function(){this.design.addDesignComponent(this.designComponent)},N=function(){this.design.removeDesignComponent(this.designComponent)},a("ComponentController",O=function(a){function b(){return z(this,b),B(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return C(b,a),A(b,[{key:"addDesignComponent",value:function(a){this.design.addDesignComponent(a),this.undo.addStep({redo:M,undo:N,design:this.design,designComponent:a})}},{key:"removeDesignComponent",value:function(a){this.design.removeDesignComponent(a),this.undo.addStep({undo:M,redo:N,design:this.design,designComponent:a})}},{key:"addComponent",value:function(a){var b=E(),c=this.mainController.createTemplateComponent(b,a.component,a.objectMatrix,a.component.symbolBlueprints[0].id);this.addTemplateSymbolPinsFromOECL(c,a.component,a.sectionName,a.component.symbolBlueprints[0].id);var d=E(),e=this.mainController.createTemplateText(d,{x:0,y:0},this.sheetTemplate.componentLabelsVisibility,"center",!1,null);c.children.push(e),e.parent=c;var f=new F;f.prefix=a.component.componentBlueprints[0].symbolConfigurations[0].refDesPrefix;var g=void 0,h=void 0,i=a.component.simModelBlueprints[0].definitions[0].variables.find(function(a){return"component"===a.name});i&&i.displayOnSchematic&&(h=E(),g=this.mainController.createTemplateText(h,{x:0,y:0},!0,"center",!1,null),c.children.push(g),g.parent=c);var j=a.component.componentBlueprints[0].id,k=new Map,l=this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID);l.forEach(function(e,i){var l=this.design.generateRefDesWithFirstAvailableNumber(f,a.component),m=this.design.createDesignComponent(a.component,l);this.addDesignComponent(m);var n=this.mainController.createSectionInstance(m,a.sectionName,b,e);n.modelInstanceData=this.componentAPI.initializeSectionModelInstanceVariables(j),n.modelDefinitionData=this.componentAPI.initializeSectionModelDefinitionVariables(j);var o=null;a.component.componentBlueprints[0].packageConfigurations&&a.component.componentBlueprints[0].packageConfigurations.length&&(o=a.component.componentBlueprints[0].packageConfigurations[0],n.activePackageID=o.id),o&&(n.activeModelID=this.componentAPI.getModelsForManufacturer(a.component,o.manufacturer)[0]),n.activeModelID||(n.activeModelID=a.component.simModelBlueprints[0].id),n.activeSymbolID=this.componentAPI.getSymbolsForModel(a.component,n.sectionName,n.activeModelID)[0],this.addInstanceSymbolPinsFromOECL(n,a.component,a.sectionName,n.activeSymbolID),this.componentAPI.getInstanceForModelID(n.activeModelID).variables.forEach(function(a){if(a.displayOnSchematic){var b=void 0;if(0===i&&!1===k.has(a.name)){b=E();var d=this.mainController.createTemplateText(b,{x:0,y:0},!0,"center",!1,null);d.parent=c,c.children.push(d),k.set(a.name,d)}else b=k.get(a.name).templateGUID;var f=this.mainController.createTextInstance(e,b,a.name,n);this.addDesignInstance(e,b,f)}},this),this.componentAPI.getDefinitionForModelID(n.activeModelID).variables.forEach(function(a){if(a.displayOnSchematic&&"component"!==a.name){var b=void 0;if(0===i&&!1===k.has(a.name)){b=E();var d=this.mainController.createTemplateText(b,{x:0,y:0},!0,"center",!1,null);d.parent=c,c.children.push(d),k.set(a.name,d)}else b=k.get(a.name).templateGUID;var f=this.mainController.createTextInstance(e,b,a.name,n);this.addDesignInstance(e,b,f)}},this),this.addDesignInstance(e,b,n);var p=this.mainController.createTextInstance(e,d,"refdes",n);this.addDesignInstance(e,d,p),h&&g&&(p=this.mainController.createTextInstance(e,h,"component",n),this.addDesignInstance(e,h,p))},this),k.forEach(function(a){this.addTemplateObject(a.templateGUID,a)},this),h&&g&&this.addTemplateObject(h,g),this.addTemplateObject(d,e),a.isHorizFlip&&(c.freshSymbolFlag=!0),this.addTemplateObject(b,c),l.forEach(function(a){var d=this.design.findInstance(a,b);c.pins.forEach(function(a,b){this.netlistController.addPin(d.getPinInstance(b))},this)},this);var m={finalize:function(){this.probeController.updateAllProbeState()},probeController:this.mainController.probeController};return m.finalize(),this.undo.addFinalizer(m),b}},{key:"removeSection",value:function(a,b){var c=a.contexts,d=a.templateGUID,e=a.deleteQueueSearch,f=a.cleanup,g=a.savedJunctions,h=a.itemsToProcessForLabelVisibility,i=this.sheetTemplate.getObject(d),j=!(a.extraData&&!1===a.extraData.removeSelf),k=[];a.extraData&&a.extraData.pinsToRemove&&(k=a.extraData.pinsToRemove[b]),c.forEach(function(a,b){var l=this.design.findInstance(a,d);i.pins.forEach(function(a,d){var i=0;if(k&&k.length>0&&(i=k.indexOf(d)),i>=0){var j=this.netlistController.getWires(l.getPinInstance(d));f&&0===b&&void 0!==j&&j.forEach(function(a){this.sheetTemplate.getObject(a.templateGUID).netlistRemove({contexts:c,templateGUID:a.templateGUID,deleteQueueSearch:e,cleanup:f,savedJunctions:g,itemsToProcessForLabelVisibility:h},b)},this),this.netlistController.removePin(l.getPinInstance(d))}},this),j&&(this.removeDesignInstance(a,d,l),l.children.forEach(function(b){this.removeDesignInstance(a,b.templateGUID,b)},this))},this),j&&(this.sheetTemplate.getObject(d).children.forEach(function(a){this.removeTemplateObject(a.templateGUID)},this),this.removeTemplateObject(d))}},{key:"cloneTemplateComponent",value:function(a,b,c,d,e){var f=c.clone(this.mainController,d,e);return f.templateGUID=a,c.children.forEach(function(a){var c=a.clone(this.mainController);c.templateGUID=b.get(a.templateGUID),f.children.push(c),c.parent=f},this),f}},{key:"cloneSectionInstance",value:function(a,b,c,d){var e=c.clone(this.mainController,d);return e.templateGUID=a,c.children.forEach(function(a){var c=a.clone(this.mainController);c.templateGUID=b.get(a.templateGUID),c.parent=e,e.children.push(c)},this),e}},{key:"cloneComponent",value:function(a,b,c,d,e){var f=E();c.push(f);var g=new Map;a.children.forEach(function(a){var b=E();g.set(a.templateGUID,b)},this);var h=this.cloneTemplateComponent(f,g,a,this.design.findInstance(b[0],a.templateGUID).activeSymbolID,e);h.offset(d),b.forEach(function(b){var c=this.design.findInstance(b,a.templateGUID),d=new F;d.prefix=c.designComponent.refDes.prefix,d.postfix=c.designComponent.refDes.postfix,d.number=c.designComponent.refDes.number;var e=this.design.generateRefDesWithFirstAvailableNumber(d,a.oeclComponent),h=this.design.createDesignComponent(a.oeclComponent,e),i=this.cloneSectionInstance(f,g,c,h);this.addDesignComponent(h),i.children.forEach(function(a){this.addDesignInstance(b,a.templateGUID,a)},this),this.addDesignInstance(b,f,i)},this),h.children.forEach(function(a){this.addTemplateObject(a.templateGUID,a)},this),h.freshSymbolFlag=!0,this.addTemplateObject(f,h),b.forEach(function(b){var c=this.design.findInstance(b,f);a.pins.forEach(function(a,b){this.netlistController.addPin(c.getPinInstance(b))},this)},this)}},{key:"changeDesignComponentRefDes",value:function(a,b){this.undo.addStep({undo:c,redo:d,design:this.design,oldRefDes:a.refDes,newRefDes:b}),this.design.changeDesignComponentRefDes(a,b)}},{key:"changeInstanceDesignComponent",value:function(a,b){this.undo.addStep({undo:e,redo:f,design:this.design,contextGUID:a.contextGUID,templateGUID:a.templateGUID,oldDesignComponent:a.designComponent,newDesignComponent:b});var c=a.designComponent;this.design.changeInstanceDesignComponent(a,b),c.isUnused()&&this.removeDesignComponent(c)}},{key:"changeRefDesForSection",value:function(a,b,c){var d=this.design.findInstance(a,b);if(this.undo.startAction(J.i18n.translate("component ID change.").fetch()),d.designComponent){var e=d.designComponent.isMultiSection(),f=d.designComponent.oeclComponent;if(f)if(e){var g=this.design.getDesignComponentByRefdes(c),h=!0;g||(d.designComponent.sectionInstances.size>1?(g=this.design.createDesignComponent(f,c),this.addDesignComponent(g)):(this.changeDesignComponentRefDes(d.designComponent,c),h=!1)),h&&this.changeInstanceDesignComponent(d,g)}else this.changeDesignComponentRefDes(d.designComponent,c)}this.undo.finishAction(!1)}},{key:"changeInstancePackage",value:function(a,b,c){var d=this.design.findInstance(a,b);this.undo.addStep({undo:g,redo:h,contextGUID:a,templateGUID:b,oldPackageID:d.activePackageID,newPackageID:c,design:this.design}),this.design.changeInstanceDesignComponentPackage(d,c)}},{key:"changeInstanceModel",value:function(a,b,c){var d=this.design.findInstance(a,b);this.undo.addStep({undo:i,redo:j,contextGUID:a,templateGUID:b,oldModelID:d.activeModelID,newModelID:c,design:this.design}),this.design.changeInstanceDesignComponentModel(d,c)}},{key:"changeInstanceLogicLevel",value:function(a,b,c){var d=this.design.findInstance(a,b);this.undo.addStep({undo:k,redo:l,contextGUID:a,templateGUID:b,oldLogicLevel:d.activePinTechnology,newLogicLevel:c,design:this.design}),this.design.changeInstanceDesignComponentLogicLevel(d,c)}},{key:"changeInstanceFallTime",value:function(a,b,c){var d=this.design.findInstance(a,b);this.undo.addStep({undo:o,redo:p,contextGUID:a,templateGUID:b,oldFallTime:d.activePinFallTime,newFallTime:c,design:this.design}),this.design.changeInstanceDesignComponentFallTime(d,c)}},{key:"changeInstanceUseDocumentLogicLevelSettings",value:function(a,b,c){var d=this.design.findInstance(a,b);this.undo.addStep({undo:q,redo:r,contextGUID:a,templateGUID:b,oldUseDocumentLogicLevelSettings:d.useDocumentLogicLevelSettings,newUseDocumentLogicLevelSettings:c,design:this.design}),this.design.changeInstanceDesignComponentUseDocumentLogicLevelSettings(d,c)}},{key:"changeInstanceCustomLogicFamily",value:function(a,b,c){var d=this.design.findInstance(a,b);this.undo.addStep({undo:s,redo:t,contextGUID:a,templateGUID:b,oldCustomLogicFamily:d.activePinCustomLogicFamily.clone(),newCustomLogicFamily:c.clone(),design:this.design}),this.design.changeInstanceDesignComponentCustomLogicFamily(d,c)}},{key:"changeInstanceRiseTime",value:function(a,b,c){var d=this.design.findInstance(a,b);this.undo.addStep({undo:m,redo:n,contextGUID:a,templateGUID:b,oldRiseTime:d.activePinRiseTime,newRiseTime:c,design:this.design}),this.design.changeInstanceDesignComponentRiseTime(d,c)}},{key:"changeTemplateSymbol",value:function(a,b,c){function d(a,b,c,d){b.symbol=c.getSymbolFromCache(d),a.listeners.notifyListeners(K.COMPONENT_SYMBOL_CHANGED,{templateComponent:b})}this.undo.addStep({undo:function(){d(this.sheetTemplate,this.templateComponent,this.componentAPI,this.oldSymbolID)},redo:function(){d(this.sheetTemplate,this.templateComponent,this.componentAPI,this.newSymbolID)},sheetTemplate:this.sheetTemplate,templateComponent:a,componentAPI:this.componentAPI,newSymbolID:b,oldSymbolID:c});var e={finalize:function(){this.templateComponent&&this.sheetTemplate.listeners.notifyListeners(K.COMPONENT_SYMBOL_CHANGE_UNDO,{templateComponent:this.templateComponent})},templateComponent:a,sheetTemplate:this.sheetTemplate};this.undo.addFinalizer(e),d(this.sheetTemplate,a,this.componentAPI,b)}},{key:"updateTemplateSymbolPinMapping",value:function(a,b){var c={undo:function(){this.templateComponent.pins.forEach(function(a){a.removeFromObjectLookup(this.templateComponent.objectLookup)},this);var a=new Map;this.oldToNewTemplatePinMap.forEach(function(b,c){a.set(b,c)}),w(this.templateComponent,a),this.templateComponent.pins.forEach(function(a){a.addToObjectLookup(this.templateComponent.objectLookup)},this)},redo:function(){this.templateComponent.pins.forEach(function(a){a.removeFromObjectLookup(this.templateComponent.objectLookup)},this),w(this.templateComponent,this.oldToNewTemplatePinMap),this.templateComponent.pins.forEach(function(a){a.addToObjectLookup(this.templateComponent.objectLookup)},this)},templateComponent:a,oldToNewTemplatePinMap:b};w(a,b),this.undo.addStep(c)}},{key:"addTemplateSymbolPins",value:function(a,b,c){var d=new Map;a.pins.forEach(function(a,b){d.set(b,a)});var e={undo:function(){var a=this;this.bNewMap||this.newSymbolPinIDs.forEach(function(b){a.templateComponent.pins.delete(b)});var b=new Map;this.oldSymbolPins.forEach(function(a,c){b.set(c,a)}),this.templateComponent.pins.forEach(function(a){a.removeFromObjectLookup(this.templateComponent.objectLookup)},this),this.templateComponent.pins=b,this.templateComponent.pins.forEach(function(a){a.addToObjectLookup(this.templateComponent.objectLookup)},this)},redo:function(){var a=this;this.templateComponent.pins.forEach(function(a){a.removeFromObjectLookup(this.templateComponent.objectLookup)},this),this.bNewMap||this.newSymbolPinIDs.forEach(function(b){var c=a.newSymbolPins.get(b);a.templateComponent.pins.set(b,c),c.component=a.templateComponent});var b=new Map;this.newSymbolPins.forEach(function(a,c){b.set(c,a)}),this.templateComponent.pins=b,this.templateComponent.pins.forEach(function(a){a.addToObjectLookup(this.templateComponent.objectLookup)},this)},templateComponent:a,oldSymbolPins:d,newSymbolPins:null,newSymbolPinIDs:b,bNewMap:c};c&&a.pins.clear(),b.forEach(function(b){a.addSymbolPin(b,{x:0,y:0},{x:0,y:0})});var f=new Map;a.pins.forEach(function(a,b){f.set(b,a)}),e.newSymbolPins=f,this.undo.addStep(e)}},{key:"removeTemplateSymbolPins",value:function(a,b){var c=new Map;a.pins.forEach(function(a,b){c.set(b,a)});var d={undo:function(){var a=this;this.templateComponent.pins.forEach(function(a){a.removeFromObjectLookup(this.templateComponent.objectLookup)},this),this.deletedSymbolPinIDs.forEach(function(b){var c=a.oldSymbolPins.get(b);a.templateComponent.pins.set(b,c),c.component=a.templateComponent});var b=new Map;this.oldSymbolPins.forEach(function(a,c){b.set(c,a)}),this.templateComponent.pins=b,this.templateComponent.pins.forEach(function(a){a.addToObjectLookup(this.templateComponent.objectLookup)},this)},redo:function(){var a=this;this.templateComponent.pins.forEach(function(a){a.removeFromObjectLookup(this.templateComponent.objectLookup)},this),this.deletedSymbolPinIDs.forEach(function(b){a.templateComponent.pins.delete(b)});var b=new Map;this.newSymbolPins.forEach(function(a,c){b.set(c,a)}),this.templateComponent.pins=b,this.templateComponent.pins.forEach(function(a){a.addToObjectLookup(this.templateComponent.objectLookup)},this)},templateComponent:a,oldSymbolPins:c,newSymbolPins:null,deletedSymbolPinIDs:b},e=this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID);this.mainController.wiringController.removeNetlistItemsAndSimplify([a.templateGUID],e,!0,{removeSelf:!1,pinsToRemove:[b]}),b.forEach(function(b){a.removeSymbolPin(b)});var f=new Map;a.pins.forEach(function(a,b){f.set(b,a)}),d.newSymbolPins=f,this.undo.addStep(d)}},{key:"updateInstanceSymbolPinMapping",value:function(a,b){var c={undo:function(){var a=new Map;this.oldToNewInstancePinMap.forEach(function(b,c){a.set(b,c)}),x(this.instance,a)},redo:function(){x(this.instance,this.oldToNewInstancePinMap)},instance:a,oldToNewInstancePinMap:b};x(a,b),this.undo.addStep(c)}},{key:"addInstanceSymbolPins",value:function(a,b,c){var d=new Map;a.pinInstances.forEach(function(a,b){d.set(b,a)});var e={undo:function(){this.instance.pinInstances=this.oldPinInstances},redo:function(){this.instance.pinInstances=this.newPinInstances},instance:a,oldPinInstances:d,newPinInstances:null,bNewMap:c};c&&a.pinInstances.clear(),b.forEach(function(b){a.addPinInstance(b)});var f=new Map;a.pinInstances.forEach(function(a,b){f.set(b,a)}),e.newPinInstances=f,this.undo.addStep(e)}},{key:"removeInstanceSymbolPins",value:function(a,b){var c=new Map;a.pinInstances.forEach(function(a,b){c.set(b,a)});var d={undo:function(){this.instance.pinInstances=this.oldPinInstances},redo:function(){this.instance.pinInstances=this.newPinInstances},instance:a,oldPinInstances:c,newPinInstances:null};b.forEach(function(b){a.removePinInstance(b)});var e=new Map;a.pinInstances.forEach(function(a,b){e.set(b,a)}),d.newPinInstances=e,this.undo.addStep(d)}},{key:"changeComponentSymbol",value:function(a){var b=this.design.getContextsOfTemplate(this.sheetTemplate.sheetGUID),c=a.templateComponent,d=void 0,e=a.newSymbolID,f=a.notificationInterface,g=a.oldComponentBlueprint?a.oldComponentBlueprint:c.oeclComponent.componentBlueprints[0],h=[],i=[],j=new Map;b.forEach(function(a){var b=this.design.findInstance(a,c.templateGUID);this.undo.addStep({undo:u,redo:v,contextGUID:a,templateGUID:c.templateGUID,oldSymbolID:b.activeSymbolID,newSymbolID:e,design:this.design}),d=d||b.activeSymbolID,this.design.changeInstanceSymbol(b,e)},this);var k=this.design.findInstance(b[0],c.templateGUID).sectionName,l=this.componentAPI.getSymbolPinIDsForBlueprint(g,k,d),m=this.componentAPI.getSymbolPinIDs(c.oeclComponent,k,e);if(l.length==m.length&&l.every(function(a,b){return a===m[b]}))c.removeFromObjectLookup(!0);else if(l.forEach(function(a){var b=this.componentAPI.getComponentBlueprintPinIDForSymbolPinID(g,k,d,a),f=b?this.componentAPI.getSymbolPinIDForComponentPinID(c.oeclComponent,k,e,b):void 0;f?j.set(a,f):i.push(a)},this),m.forEach(function(a){var b=!1;j.forEach(function(c){c==a&&(b=!0)}),b||h.push(a)},this),j.size>0){if(i.length>0){var n=i.some(function(a){return c.pins.get(a).connected});n&&f&&f.notifications.notify(J.i18n.translate("Some wire connections were removed during symbol change.").fetch(),f.notifications.ETypes.NT_INFO),this.removeTemplateSymbolPins(c,i),b.forEach(function(a){var b=this.design.findInstance(a,c.templateGUID);this.removeInstanceSymbolPins(b,i)},this)}c.removeFromObjectLookup(!0),this.updateTemplateSymbolPinMapping(c,j),b.forEach(function(a){var b=this.design.findInstance(a,c.templateGUID);this.updateInstanceSymbolPinMapping(b,j)},this),h.length>0&&(this.addTemplateSymbolPins(c,h,!1),b.forEach(function(a){var b=this.design.findInstance(a,c.templateGUID);this.addInstanceSymbolPins(b,h,!1)},this)),b.forEach(function(a){var b=this.design.findInstance(a,c.templateGUID);h.forEach(function(a){this.netlistController.addPin(b.getPinInstance(a))},this)},this)}else j.clear(),this.mainController.wiringController.removeNetlistItemsAndSimplify([c.templateGUID],b,!0,{removeSelf:!1,pinsToRemove:[]}),c.removeFromObjectLookup(!0),this.addTemplateSymbolPins(c,m,!0),b.forEach(function(a){var b=this.design.findInstance(a,c.templateGUID);this.addInstanceSymbolPins(b,m,!0)},this),b.forEach(function(a){var b=this.design.findInstance(a,c.templateGUID);c.pins.forEach(function(a,c){this.netlistController.addPin(b.getPinInstance(c))},this)},this);var o=D.clone(c.rawBoundingBox);this.changeTemplateSymbol(c,a.newSymbolID,d),c.addToObjectLookup();var p=c.rawBoundingBox.left-o.left,q=c.rawBoundingBox.top-o.top;p=-1*(p<0?Math.ceil(p):Math.floor(p)),q=-1*(q<0?Math.ceil(q):Math.floor(q)),0===p&&0===q||(this.mainController.moveObjects({templateGUIDs:[c.templateGUID],offset:{x:p,y:q}}),this.sheetTemplate.listeners.notifyListeners(K.COMPONENT_SYMBOL_CHANGED,{templateComponent:c}));var r=this.mainController.wiringController.getReroutingInfo([this.sheetTemplate.getObject(c.templateGUID)]),s=r.map(y,this);this.mainController.wiringController.rerouteWires(s,{skipIfEndpointsUnchanged:!0})}},{key:"removeTexts",value:function(a){a.forEach(function(a){var b=this.sheetTemplate.getObject(a.templateGUID);this.removeDesignInstance(a.contextGUID,a.templateGUID,a);var c=a.parent.children.indexOf(a);if(-1!=c&&a.parent.children.splice(c,1),b){this.design.findInstancesOfTemplate(b.templateGUID).length||(this.removeTemplateObject(b.templateGUID),-1!=(c=b.parent.children.indexOf(b))&&b.parent.children.splice(c,1))}},this)}},{key:"addTexts",value:function(a,b){var c=this.sheetTemplate.getObject(a.templateGUID);b.forEach(function(b){var d=c.children.find(function(a){return a.variableName==b.name}),e=void 0;if(d?e=d.templateGUID:(e=E(),d=this.mainController.createTemplateText(e,{x:0,y:0},!0,"center",!1,null),d.parent=c,d.variableName=b.name,c.children.push(d),this.addTemplateObject(d.templateGUID,d)),e){var f=this.mainController.createTextInstance(a.contextGUID,e,b.name,a);this.addDesignInstance(a.contextGUID,e,f)}},this),this.updateChildItemLocations(a.templateGUID)}},{key:"attachModifyInput",value:function(a,b,c,d){var e=this,f=!0,g=a.value,h="";if(d&&d.designComponent){h=d.designComponent.isMultiSection()?d.sectionName:"",g=G(d.designComponent.refDes,void 0,{})}a.validator=function(a,b){var c=a,g=!0,h="";if(!f)if(g=H(c)){var i=I(c);i&&(!1===e.design.isComponentRefDesUsed(i,d.sectionName,d.designComponent)?g=!0:(g=!1,h=J.i18n.translate("Component ID %1$s already in use.").fetch(a)))}else h=J.i18n.translate('Invalid component ID "%1$s"').fetch(a);f=!1,b({valid:g,errorMessage:h})},a.value=g,b&&(b.innerHTML=h),a.onValueChange=function(a){var b=I(a),e=c();b&&e&&this.valid&&e.sheetTemplateController.componentController.changeRefDesForSection(e.contextGUID,d.templateGUID,b)},a.oninput=function(){}}}],[{key:"getFormattedRefDesForComponent",value:function(a){var b="";if(a&&a.designComponent){var c=a.designComponent.isMultiSection();b=G(a.designComponent.refDes,c?a.sectionName:"",{})}return b}},{key:"getRefDesForComponent",value:function(a){var b="";return a&&a.designComponent&&(b=G(a.designComponent.refDes,"",{})),b}},{key:"getSectionForComponent",value:function(a){var b="";if(a&&a.designComponent){b=a.designComponent.isMultiSection()?a.sectionName:""}return b}}]),b}(L)),a("ComponentController",O)}}}),a.register("4d",["12c","2d"],function(a,b){"use strict";function c(a,b){return b.name||a+"-"+b.guid+"."+b.postfix}function d(a){var b=P.RC_UNKNOWN;switch(a){case 200:b=P.RC_OK;break;case 201:b=P.RC_CREATED;break;case 400:b=P.RC_BADREQUEST;break;case 401:case 403:b=P.RC_UNAUTHORIZED;break;case 404:b=P.RC_NOTFOUND;break;case 409:b=P.RC_CONFLICT}return b}function e(a){return a?{design:{id:a.id.toString().toLowerCase(),guid:a.uuid,name:a.title,metaData:{description:a.text,tags:a.tags?K.uniq(a.tags.split(",").filter(function(a){return!!a})):[],private:"private"===a.visibility},copiedFrom:a.copied_from},cloud:a}:null}function f(a){return a?{id:a.design.id,title:a.design.name,text:a.design.metaData.description,tags:a.design.metaData.tags.join(",")+",",category:a.design.metaData.category,copied_from:a.design.copiedFrom||null,visibility:a.design.metaData.private?"private":"public"}:null}function g(){var a=null;try{var b=Q.getCookie("csrftoken");b&&(a={authToken:b})}catch(a){console.log("Exception while trying to read cookie"),console.log(a)}return a}function h(a,b){var c=d(a.status);if(a.status>=200&&a.status<400){var e=null;try{e=a.responseText?JSON.parse(a.responseText):{}}catch(c){e=null,console.log("Exception while trying to parse JSON"),console.log(c),j(a,b,P.RC_INVALIDJSON)}e&&b(e,c)}else j(a,b,c)}function i(a,b){var c=d(a.status);if(a.status>=200&&a.status<400){b(a.response,c)}else j(a,b,c)}function j(a,b,c){console.log(a),b(null,c)}function k(a,b,c,d){var e=new XMLHttpRequest,f=/^https?:\/\//i.test(b)?"":O.dataServer,g=f+b;/^https?:\/\//i.test(g)&&document.location.protocol!==g.substring(0,document.location.protocol.length)&&(g=g.replace(/^https:/i,document.location.protocol).replace(/^http:/i,document.location.protocol)),e.open("GET",g,!0),O.keyauththoken&&a&&a.authToken&&e.setRequestHeader(O.keyauththoken,a.authToken),d?(e.responseType="arraybuffer",e.onload=function(){i(this,c)}):(e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Content-Type","application/json"),e.onload=function(){h(this,c)}),e.onerror=function(){j(this,c,P.RC_UNKNOWN)},e.ontimeout=function(){j(this,c,P.RC_TIMEOUT)},e.onabort=function(){j(this,c,P.RC_ABORT)},e.send()}function l(a){return"object"!=typeof a||a instanceof window.Blob?a instanceof window.Blob?a:new window.Blob([a],{type:"application/octet-stream"}):JSON.stringify(a)}function m(a,b,c,d,e,f){var g=new XMLHttpRequest;g.open(a,O.dataServer+c,!0),O.keyauththoken&&b&&b.authToken&&g.setRequestHeader(O.keyauththoken,b.authToken),g.setRequestHeader("Accept","application/json"),g.setRequestHeader("Content-Type",f?"application/octet-stream":"application/json"),g.onload=function(){h(this,e)},g.onerror=function(){j(this,e,P.RC_UNKNOWN)},g.ontimeout=function(){j(this,e,P.RC_TIMEOUT)},g.onabort=function(){j(this,e,P.RC_ABORT)},g.send(l(d))}function n(a,b,c,d,e){m("POST",a,b,c,d,e)}function o(a,b,c,d,e){m("PUT",a,b,c,d,e)}function p(a,b,c){var d=new XMLHttpRequest;d.open("DELETE",O.dataServer+b,!0),O.keyauththoken&&a&&a.authToken&&d.setRequestHeader(O.keyauththoken,a.authToken),d.setRequestHeader("Accept","application/json"),d.setRequestHeader("Content-Type","application/json"),d.onload=function(){h(this,c)},d.onerror=function(){j(this,c,P.RC_UNKNOWN)},d.ontimeout=function(){j(this,c,P.RC_TIMEOUT)},d.onabort=function(){j(this,c,P.RC_ABORT)},d.send()}function q(a){k(R,"/projects/",function(b,c){a(b?b.map(e):[],c)})}function r(a,b){k(R,"/projects/"+b+"/",function(b,c){a(e(b),c)})}function s(a,b){b?k(R,"/projects/"+b+"/items/",a):a(null,P.RC_NOTFOUND)}function t(a,b,c,d){b?k(R,c?"/projects/"+b+"/items/"+M(c)+"/file/":b,function(c,e){e===P.RC_NOTFOUND&&d?s(function(b,c){b&&b.results?function(){var c=M(d),e=new RegExp(c+"$"),f=b.results.filter(function(a){return e.lastIndex=0,e.test(a.name)});f.length?k(R,f[0].file_url,function(b,c){a(b,c)},!0):a(null,P.RC_NOTFOUND)}():a(null,c)},b):a(c,e)},!0):a(null,P.RC_NOTFOUND)}function u(a,b,c,d){t(function(b,c){a(b?L(E(b)):b,c)},b,c,d)}function v(a,b,c,d){t(function(b,c){a(b?E(b):b,c)},b,c,d)}function w(a,b){o(R,"/projects/"+b.design.id+"/",f(b),function(b,c){a(e(b),c)},!1)}function x(a,b){var c=function(c,d){c?c.design&&c.design.id?a(c,P.RC_OK):a(null,P.RC_UNKNOWN):d===P.RC_NOTFOUND?function(){var c=function(b,c){var d=e(b);!d||c!==P.RC_CREATED&&c!==P.RC_OK?a(null,c):d.design&&d.design.id?a(d,c):a(null,P.RC_UNKNOWN)};n(R,"/projects/",f(b),function(a,d){d===P.RC_BADREQUEST&&b&&b.design.copiedFrom?(b.design.copiedFrom="",n(R,"/projects/",f(b),c)):c(a,d)},!1)}():a(null,d)};b.design.id=b.design.id||x.previousProjectSaveAttemptID,b.design.id?r(c,b.design.id):c(null,P.RC_NOTFOUND)}function y(a,b,c,d){var e=M(c);o(R,"/projects/"+b+"/items/"+e+"/",d,function(b,c){b&&(b.saveFileName=e),a(b,c)},!0)}function z(a,b){b?p(R,"/projects/"+b,a):a(null,P.RC_NOTFOUND)}function A(a,b,c){b?p(R,c?"/projects/"+b+"/items/"+M(c)+"/":b,a):a(null,P.RC_NOTFOUND)}function B(a){a&&C(a)}function C(a){D(function(b){a(b.logged_in)})}function D(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;R=g();var c=window.multisim.versionInfo&&window.multisim.versionInfo.isDevelopment,d=["free"],e=25;R&&R.authToken?function(){var f=new Date;S.lastTime&&S.lastSuccessResult&&f.getTime()-S.lastTime.getTime()<b?a(S.lastSuccessResult):k(R,"/check-auth",function(b){var g=!!window.requestInfo&&R&&b&&b.logged_in,h=b?b.subscription_level||d[0]:d[0];e=b?b.component_limit||e:e,e=-1===e||c?1/0:e;var i=/^premium$/i.test(h);if(g){var j=d.slice();-1===j.indexOf(h)&&j.push(h),S.lastTime=f,S.lastSuccessResult={canSavePrivate:g&&i||c,componentLimit:e,logged_in:g,subscription:h,components:{tiers:j},userInfo:b.contributor,authToken:R.authToken},a(S.lastSuccessResult)}else S.lastTime=null,S.lastSuccessResult=null,a({canSavePrivate:c,componentLimit:e,logged_in:g,subscription:h,components:{tiers:d.slice()},userInfo:{}})})}():setTimeout(function(){a({canSavePrivate:!1,componentLimit:window.multisim.versionInfo&&window.multisim.versionInfo.isDevelopment?1/0:e,logged_in:!1,subscription:"free",components:{tiers:["free"]},userInfo:{}})},10)}function E(a){var b=a;if(a instanceof ArrayBuffer){for(var c="",d=new Uint8Array(a),e=0;e<d.length;e++)c+=String.fromCharCode(d[e]);b=decodeURIComponent(window.escape(c))}return b}function F(a){var b=a;if(a instanceof ArrayBuffer){for(var c="",d=new Uint8Array(a),e=0;e<d.length;e++)c+=String.fromCharCode(d[e]);b=window.btoa(c)}return b}function G(a,b,c,d,e,f){u(function(b,c){var f=null;if(c===P.RC_OK){f=document.createElement("iframe"),f.style.width="100%",f.style.height="100%",f.style.border="none",e.endsWith("/")&&(e=e.substring(0,e.length-1));var g='<!DOCTYPE html><html><head><title>Preview</title><script src="'+(e||"/static/multisim")+'/third_party/systemjs/dist/system.js"><\/script><script src="'+(e||"/static/multisim")+'/systemjs.conf.js"><\/script><script>window.SystemJS["import"]("'+(e||"/static/multisim")+'/utilities/previewzoompan.js");<\/script></head><body>'+b+"</body></html>";d.appendChild(f),f.contentWindow.document.open("text/html"),f.contentWindow.document.write(g),f.contentWindow.document.close(),f.setAttribute("sandbox","allow-scripts")}a&&a(f,c)},b,c,f)}function H(){var a=this,b=window.requestInfo.project,c=window.requestInfo.project_url.match(/[^\\/]+/g)[1]+"-.msjs";t(function(b){if(b instanceof ArrayBuffer){for(var c="",d=new Uint8Array(b),e=0;e<d.length;e++)c+=String.fromCharCode(d[e]);a.myLoadedDesignJSON_Data=decodeURIComponent(window.escape(c))}},b,c,".msjs")}function I(){return{requestInfo:window.requestInfo,loadFile:t,loadSanitizedFile:u,loadPreviewSVGFileDirect:v,saveFile:y,deleteProject:z,deleteItem:A,authenticate:B,isAuthenticated:C,getSubscriptionInfo:D,responseCodes:P,loadProject:r,ensureProject:x,saveProject:w,getProjects:q,getItems:s,arrayBufferToText:E,arrayBufferToBase64:F,insertPreviewIFrame:G,buildFileName:c}}var J,K,L,M,N,O,P,Q,R,S,T;return{setters:[function(a){J=a.default},function(a){K=a.default}],execute:function(){L=function(a){var b=/<!DOCTYPE svg/gi.test(a),c=J.sanitize(a,{ADD_ATTR:["xmlns:oecl","oecl:connpoint","oecl:pinid","oecl:pin","oecl:pinlength","oecl:placeholder","showgrid"],ADD_TAGS:[],FORBID_TAGS:["a"],SANITIZE_DOM:!1});return c=c.replace(/xmlns:NS\d+="" /gi,"").replace(/NS\d+:/gi,""),(b?"<!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'>":"")+c},M=function(a){return function(a){var b=a,c=155;if(b.length>c){for(var d=b.split("."),e=0,f=1;f<d.length;f++)e+=d[f].length;e+=d.length-1;var g=c-e;if(g<0)throw new Error("Combined extension size cannot be larger than "+c);d[0]=d[0].slice(0,g),b=d.join(".")}return b}(a).replace(/\s+/g,"-").replace(/[^a-zA-Z0-9\-]/g,"").toLowerCase()},N=Object.freeze({authenticateaddress:"",dataServer:"/api/v1",keyauththoken:"X-CSRFToken"}),O=N,P=Object.freeze({RC_OK:"ok",RC_CREATED:"Created",RC_BADREQUEST:"Bad request",RC_UNAUTHORIZED:"Unauthorized",RC_NOTFOUND:"Not found",RC_CONFLICT:"Conflict",RC_INVALIDJSON:"invalid JSON",RC_TIMEOUT:"timeout",RC_ABORT:"abort",RC_UNKNOWN:"Unknown"}),Q={writeCookie:function(a,b,c){var d=c?"; expires="+c.toUTCString():"";document.cookie=a+"="+encodeURIComponent(b)+d},getCookie:function(a){var b=document.cookie.split(";").map(function(a){var b=a.split("=");return 2===b.length?{key:b[0].trim(),value:b[1].trim()}:{}}).filter(function(b){return b.key===a}),c=(b.length?b[0].value:null)||"";return decodeURIComponent(c)},deleteCookie:function(a){document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"}},R=g(),x.previousProjectSaveAttemptID=void 0,x.failCount={msjs:0,pngthumbnailcircuit:0,previewcircuit:0,thumbnailcircuit:0,pngthumbnail:0,"previewgraph.png":0,simdata:0},S={lastTime:null,lastSuccessResult:null},T={create:I,cloudConstants:N,responseCodes:P,arrayBufferToText:E,arrayBufferToBase64:F,cookieWrapper:Q,buildFileName:c,retrieveLoadedFileDataForTesting:H},a("default",T)}}}),a.register("12d",[],function(){return{setters:[],execute:function(){}}}),a.register("12e",["a7","2d","103","12f","ee","104","130","b9","bc","12b","29","50","3b","3c","30","45","3f","4d","3e","1f","4f","12d","43"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return{setters:[function(a){},function(a){c=a.default},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){d=a.default},function(a){e=a.basicNumberValidate,f=a.basicTextValidate,g=a.customValidate},function(a){h=a.switchEnteredChars},function(a){i=a.formatRefDes},function(a){j=a.default},function(a){k=a.default},function(a){l=a.ComponentController},function(a){m=a.default},function(a){n=a.ECommandContexts},function(a){o=a.ELogicFamily,p=a.LogicFamily},function(a){q=a.default},function(a){},function(a){r=a.default}],execute:function(){(function(a){a({is:"object-properties",behaviors:[window.Polymer.InitializeHelp],properties:{stringID:String,stringSection:String,sectionInfoText:String,stringType:String,stringManufacturer:String,stringPartNumber:String,stringPackageNameHeader:String,stringPackageName:String,stringDescription:String,stringComponentFunction:String,stringModel:String,stringFunction:String,stringModelFunction:String,paramValues:Array,groupedParamValues:Array,hasParamValuesOrGroupedParamValues:{type:Boolean,computed:"_paramValuesOrGroupedParamValuesNotEmpty(paramValues, groupedParamValues)"},stringDetails:String,stringSymbolpinnames:String,paramNameToggle:{type:Boolean,observer:"_paramNameToggleChanged"},notifications:Object,isPremium:{type:Boolean,value:!1,observer:"_handlePremiumStateChanged"},stringPremiumOnly:String,riseTimeInputLabel:String,fallTimeInputLabel:String,premiumOnlyModelMessage:{type:Boolean,value:!1}},_paramValuesOrGroupedParamValuesNotEmpty:function(a,b){return this.hasValues(a)||this.hasValues(b)},_handlePremiumStateChanged:function(){if(this.activeViewGetter&&this.selectedTemplateGUID){var a=this.activeViewGetter(),b=a.sheetTemplateController.getModelDataForItem(a.contextGUID,this.selectedTemplateGUID);this.premiumOnlyModelMessage=b&&b.customData&&"true"==b.customData.isPremium&&!this.isPremium}},_updateProperty:function(a,b,c){var d=this,e=this.activeViewGetter(),f=e.sheetTemplateController.design.findInstance(e.contextGUID,this.selectedTemplateGUID),g=f.designComponent.isMultiSection(),h=i(f.designComponent.refDes,g?f.sectionName:void 0,{}),j=e.sheetTemplateController.getModelDataForItem(e.contextGUID,this.selectedTemplateGUID),k=j&&j.instances[0].variables.filter(function(a){return"model"==a.name}).length?j.name:null,l=e.sheetTemplateController.design.simulationController,m=j?j.customData:null;a&&function(){var g=a.isInstanceVar?f.getInstanceVariableValue(f.activeModelID,a.name,!1):f.getModelVariableValue(f.activeModelID,a.name,!1),i=a.isInstanceVar?f.getInstanceVariableState(f.activeModelID,a.name):f.getModelVariableState(f.activeModelID,a.name);if(!1===c&&a.hasOwnProperty("disabledValue")&&(b=a.disabledValue),a.isInstanceVar?e.sheetTemplateController.changeInstanceVariable(e.contextGUID,d.selectedTemplateGUID,a.name,b,c,a.synchronize):e.sheetTemplateController.changeModelVariable(e.contextGUID,d.selectedTemplateGUID,a.name,b,c),a.spiceParameters&&a.spiceParameters.length&&m){var j=d.mergedProperties.reduce(function(a,b){return a[b.name]=b.isInstanceVar?f.getInstanceVariableValue(f.activeModelID,b.name,!0):f.getModelVariableValue(f.activeModelID,b.name,!0),a},{}),n=k?k+"_"+h:m.modelType,o=a.isInstanceVar?f.getInstanceVariableValue(f.activeModelID,a.name,!0):f.getModelVariableValue(f.activeModelID,a.name,!0);l.changeSingleDeviceValue(m.deviceType,n,a.isInstanceVar?m.modelType+h:null,{parameters:a.spiceParameters,variables:j},o,function(b){b||(a.isInstanceVar?e.sheetTemplateController.changeInstanceVariable(e.contextGUID,this.selectedTemplateGUID,a.name,g,i,a.synchronize):e.sheetTemplateController.changeModelVariable(e.contextGUID,this.selectedTemplateGUID,a.name,g,i))})}}()},_onTextChanged:function(a){a.currentTarget.valid&&this._updateProperty(a.model.prop,a.currentTarget.value,a.currentTarget.checked)},_onColorChanged:function(a){var b=JSON.stringify(a.currentTarget.value);this._updateProperty(a.model.prop,b)},_onButtonClicked:function(a){var b=this.activeViewGetter(),c=b.sheetTemplateController.design.findInstance(b.contextGUID,this.selectedTemplateGUID),d=a.model.prop,e=d.isInstanceVar?c.getInstanceVariableValue(c.activeModelID,d.name,!0):c.getModelVariableValue(c.activeModelID,d.name,!0),f=1==e?"0":"1";this._updateProperty(d,f)},_onToggled:function(a){this._updateProperty(a.model.prop,a.currentTarget.checked?"1":"0")},_riseFallEnabled:function(){return!1},_riseTimeValidityTest:function(){var a=this;return function(b,c){c(e(b,a.riseTimeInputLabel))}},_fallTimeValidityTest:function(){var a=this;return function(b,c){c(e(b,a.fallTimeInputLabel))}},_validityTest:function(a){var b=this;return function(c,d){var e=this,f=b.activeViewGetter?b.activeViewGetter():null,g=f?f.sheetTemplateController:null,h=g?g.propertyController:null,i={valid:!0};h&&h.isInstanceOrModelPropertyInvalid?h.isInstanceOrModelPropertyInvalid(a,void 0,c,function(a){a&&a.errorMessage?(e.title=a.title,i.valid=!1,i.errorMessage=a.errorMessage,i.errorIndexes=a.errorIndexes):a&&a.hasOwnProperty("title")&&(e.title=a.title),d(i)}):d(i)}},_modifyNumericInput:function(){return function(a){h(this.$.multisimTextInput,a)}},_modifyXYInput:function(){return function(a){h(this.$.xyinput,a)}},_onToggleSymbolGallery:function(a){a.detail.opened&&this.$.symbols.refresh()},_contextHandler:function(a){var b={disable:"all"},c=this.activeViewGetter(),d=c.sheetTemplateController.getModelDataForItem(c.contextGUID,this.selectedTemplateGUID);return d&&d.customData&&"true"===d.customData.isPremium&&!this.isPremium?b.enable="none":a.spiceParameters&&a.spiceParameters.length&&(b.enable=[n.CC_SIMULATION,n.CC_EMBEDDED]),this.commandInterface.createCommandContextHelper(b)},_getNotifications:function(){return this.notifications},ready:function(){},initialize:function(a,b,e,f){var g=this,h=f.propertyController,i=f.commandInterface,j=f.manipulationInterface,l=f.toolManager,n=i.createCommandObject("symbolchange",function(a,b){var c=null;b.templateGUID=b.templateComponent.templateGUID,b.commandID="symbolchange",b.view.sheetTemplateController.componentController.changeComponentSymbol({templateComponent:b.templateComponent,newSymbolID:b.newSymbolID,notificationInterface:b.view.wiringcontroller}),g.updateSymbolPreview(b.templateComponent,b.instance,b.view);var d=g.manipulationInterface.initFloatMoveState(b);return d&&(c=function(a){a&&l.cancelAction()},d()),c});n.contextName="symbolchange",n.enabled=!0,n.cancelActiveCommand=!1,n.contextHelper.contextHidden="all";var o=i.createCommandObject("modelchange",function(a,b){var d=null;if(b.view&&b.instance.activeModelID!==b.newModel){b.templateGUID=b.templateComponent.templateGUID,b.commandID="modelchange",b.sheetTemplateController.componentController.changeInstanceModel(b.view.contextGUID,g.selectedTemplateGUID,b.newModel),g.modelFunction=c.find(b.templateComponent.oeclComponent.simModelBlueprints,function(a){return a.id===b.newModel}).description;var e=g.updateSymbolGallery(b.templateComponent,b.instance,b.view);if(g.mergedProperties=b.sheetTemplateController.getPropertiesForItem(b.view.contextGUID,g.selectedTemplateGUID),g.showProperties(g.mergedProperties),g.stringModelFunction=g.componentAPI.getModelFromCache(b.instance.activeModelID).description,e){var f=g.manipulationInterface.initFloatMoveState(b);f&&(d=function(a){a&&l.cancelAction()},f())}g._handlePremiumStateChanged()}return d});o.contextName="modelchange",o.enabled=!0,o.cancelActiveCommand=!1,o.contextHelper.contextHidden="all",function(){var a=i.createCommandObject("logiclevelchange",function(a,b){return b.view&&b.instance.activePinTechnology!==b.newLogicLevel&&(b.templateGUID=b.templateComponent.templateGUID,b.commandID="logiclevelchange",b.sheetTemplateController.componentController.changeInstanceLogicLevel(b.view.contextGUID,g.selectedTemplateGUID,b.newLogicLevel),g._handlePremiumStateChanged()),null});a.contextName="logiclevelchange",a.enabled=!0,a.cancelActiveCommand=!1,a.contextHelper.contextHidden="all"}();var p=i.createCommandObject("risetimechange",function(a,b){return b.view&&b.instance.activePinRiseTime!==b.newPinRiseTime&&(b.templateGUID=b.templateComponent.templateGUID,b.commandID="risetimechange",b.sheetTemplateController.componentController.changeInstanceRiseTime(b.view.contextGUID,g.selectedTemplateGUID,b.newPinRiseTime),g._handlePremiumStateChanged()),null});p.contextName="risetimechange",p.enabled=!0,p.cancelActiveCommand=!1,p.contextHelper.contextHidden="all";var q=i.createCommandObject("falltimechange",function(a,b){return b.view&&b.instance.activePinFallTime!==b.newPinFallTime&&(b.templateGUID=b.templateComponent.templateGUID,b.commandID="falltimechange",b.sheetTemplateController.componentController.changeInstanceFallTime(b.view.contextGUID,g.selectedTemplateGUID,b.newPinFallTime),g._handlePremiumStateChanged()),null});q.contextName="falltimechange",q.enabled=!0,q.cancelActiveCommand=!1,q.contextHelper.contextHidden="all";var r=i.createCommandObject("usedocumentlogiclevelschange",function(a,b){return b.view&&b.newUseDocumentSettingsValue!==b.instance.useDocumentLogicLevelSettings&&(b.templateGUID=b.templateComponent.templateGUID,b.commandID="usedocumentlogiclevelschange",b.sheetTemplateController.componentController.changeInstanceUseDocumentLogicLevelSettings(b.view.contextGUID,g.selectedTemplateGUID,b.newUseDocumentSettingsValue),g._handlePremiumStateChanged()),null});r.contextName="usedocumentlogiclevelschange",r.enabled=!0,r.cancelActiveCommand=!1,r.contextHelper.contextHidden="all";var s=i.createCommandObject("customlogicfamilychange",function(a,b){return b.view&&!b.newCustomLogicFamily.equals(b.instance.activePinCustomLogicFamily)&&(b.templateGUID=b.templateComponent.templateGUID,b.commandID="customlogicfamilychange",b.sheetTemplateController.componentController.changeInstanceCustomLogicFamily(b.view.contextGUID,g.selectedTemplateGUID,b.newCustomLogicFamily),g._handlePremiumStateChanged()),null});s.contextName="customlogicfamilychange",s.enabled=!0,s.cancelActiveCommand=!1,s.contextHelper.contextHidden="all",g.activeViewGetter=a,g.notifications=e,d.addReadyListener(function(a){g.stringID=a.i18n.translate("ID").fetch(),g.stringSection=a.i18n.translate("Section").fetch(),g.sectionInfoText=a.i18n.translate("Only one section is available for multisection components.").fetch(),g.stringType=a.i18n.translate("Type").fetch(),g.stringManufacturer=a.i18n.translate("Manufacturer").fetch(),g.stringPartNumber=a.i18n.translate("Part number").fetch(),g.stringPackageNameHeader=a.i18n.translate("Package name").fetch(),g.stringDescription=a.i18n.translate("Description").fetch(),g.stringModel=a.i18n.translate("Model").fetch(),g.stringFunction=a.i18n.translate("Function").fetch(),g.stringSymbol=a.i18n.translate("Symbol").fetch(),g.stringSymbolpinnames=a.i18n.translate("Show all symbol pin names").fetch(),g.stringDetails=a.i18n.translate("Details").fetch(),g.stringPremiumOnly=a.i18n.translate("Activate premium account to edit the model data.").fetch(),g.riseTimeInputLabel=a.i18n.translate("Pin Rise Time").fetch(),g.fallTimeInputLabel=a.i18n.translate("Pin Fall Time").fetch()}),g.behaviors[0]._initializeHelpAsync(g,window.multisim.rootFolder+"resources/help_en/help-object.json"),g.paramNameToggle=!0,m.cookieWrapper&&"off"===m.cookieWrapper.getCookie("paramNameToggle")&&(g.paramNameToggle=!1);var t=function(a){g.instancePropertyValueChanged(a)},u=function(a){g.modelPropertyValueChanged(a)};h.propertyChangeListeners.addListener(k.INSTANCE_PROPERTY_CHANGED,t),h.propertyChangeListeners.addListener(k.MODEL_PROPERTY_CHANGED,u),f.listeners.addListener(f.events.ACTIVEDESIGNCHANGED,function(a){a.oldDesign&&(h.propertyChangeListeners.removeListener(k.INSTANCE_PROPERTY_CHANGED,t),h.propertyChangeListeners.removeListener(k.MODEL_PROPERTY_CHANGED,u))}),g.propertyController=h,g.commandInterface=i,g.manipulationInterface=j,g.componentAPI=b,g.$.symbolPinVisibilityToggle.onValueChange=function(b){var c=a();c&&(c.sheetTemplateController.sheetTemplate.changeComponentSymbolPinLabelVisibility(g.selectedTemplateGUID,b),c.sheetTemplateController.design.modified=!0)},g.$.modelSelector.commandContextHelper=i.createCommandContextHelper({disable:"all"}),g.$.symbolPinVisibilityToggle.commandContextHelper=i.createCommandContextHelper({disable:"all"}),g.$.refdesInput.commandContextHelper=i.createCommandContextHelper({disable:"all"}),g.$.symbols.commandContextHelper=i.createCommandContextHelper({disable:"all"}),g.$.logicLevel.$.useDocumentLogicLevelSettings.commandContextHelper=i.createCommandContextHelper({disable:"all"}),g.$.logicLevel.$.logicLevelSelector.commandContextHelper=i.createCommandContextHelper({disable:"all"}),g.$.riseTimeInput.commandContextHelper=i.createCommandContextHelper({disable:"all"}),g.$.fallTimeInput.commandContextHelper=i.createCommandContextHelper({disable:"all"}),g.$.info.onclick=function(){g.paramNameToggle=!g.paramNameToggle;var a=g.paramNameToggle?"on":"off";m.cookieWrapper.writeCookie("paramNameToggle",a)};var v=function(a){g.isPremium="premium"===a.subscription};f.fileDataController.getSubscriptionInfo(v),f.fileDataController.listeners.addListener(f.fileDataController.fileDataEvents.FDE_SUBSCRIPTION_CHANGED,v)},_paramNameToggleChanged:function(){var a=this;Array.from(a.querySelectorAll(".paramfullname")).forEach(function(b){""!==b.id&&(b.style.display=a.paramNameToggle?"block":"none")})},hasValues:function(a){return a.length>0},isMultilineString:function(a){return"string"===a},isColor:function(a){return"color"===a},isButton:function(a){return"button"===a},isCheckbox:function(a){return"checkbox"===a},isSimpleString:function(a){return"simpleString"===a},isNumeric:function(a){return!(this.isMultilineString(a)||this.isColor(a)||this.isButton(a)||this.isCheckbox(a)||this.isXY(a)||this.isSimpleString(a))},isXY:function(a){return"XY"===a},isPremium:function(){return!1},stateOf:function(a){var b=this.activeViewGetter(),c=b.sheetTemplateController.design.findInstance(b.contextGUID,this.selectedTemplateGUID);return a.isInstanceVar?c.getInstanceVariableState(c.activeModelID,a.name):c.getModelVariableState(c.activeModelID,a.name)},valOf:function(a){var b=this.activeViewGetter(),c=b.sheetTemplateController.design.findInstance(b.contextGUID,this.selectedTemplateGUID);return a.isInstanceVar?c.getInstanceVariableValue(c.activeModelID,a.name):c.getModelVariableValue(c.activeModelID,a.name)},colorOf:function(a){try{return JSON.parse(this.valOf(a))}catch(a){console.warn(a)}return{}},isChecked:function(a){return"1"===this.valOf(a)},isInputCheckEnabled:function(a){return a.type===this.componentAPI.EOeclVariableType.TOGGLEPARAM||a.type===this.componentAPI.EOeclVariableType.TOGGLEVARIABLE},isInputChecked:function(a){return this.stateOf(a)},propertyColorPalette:function(a){return a&&a.extraData?[a.extraData.suggestedPalette]:null},basicBehaviors:function(){var a=this,b=this.activeViewGetter(),c=b.sheetTemplateController.design.findInstance(b.contextGUID,this.selectedTemplateGUID),d=c.designComponent.isMultiSection(),e=i(c.designComponent.refDes,d?c.sectionName:void 0,{}),f=g&&g.instances[0].variables.filter(function(a){return"model"==a.name}).length?g.name:null,g=b.sheetTemplateController.getModelDataForItem(b.contextGUID,this.selectedTemplateGUID),h=b.sheetTemplateController.design.simulationController,j=g?g.customData:null;return{onValueChange:function(d){for(var g=this.label,i=void 0,k=0;k<a.mergedProperties.length;++k)if(a.mergedProperties[k].name===g){i=a.mergedProperties[k];break}i&&this.valid&&function(){var k=i.isInstanceVar?c.getInstanceVariableValue(c.activeModelID,i.name,!1):c.getModelVariableValue(c.activeModelID,i.name,!1);if(i.isInstanceVar?b.sheetTemplateController.changeInstanceVariable(b.contextGUID,a.selectedTemplateGUID,g,d,i.synchronize):b.sheetTemplateController.changeModelVariable(b.contextGUID,a.selectedTemplateGUID,g,d),i.spiceParameters&&i.spiceParameters.length&&j){var l=a.mergedProperties.reduce(function(a,b){return a[b.name]=b.isInstanceVar?c.getInstanceVariableValue(c.activeModelID,b.name,!0):c.getModelVariableValue(c.activeModelID,b.name,!0),a},{}),m=f?f+"_"+e:j.modelType,n=i.isInstanceVar?c.getInstanceVariableValue(c.activeModelID,g,!0):c.getModelVariableValue(c.activeModelID,g,!0);h.changeSingleDeviceValue(j.deviceType,m,i.isInstanceVar?j.modelType+e:null,{parameters:i.spiceParameters,variables:l},n,function(c){c||(i.isInstanceVar?b.sheetTemplateController.changeInstanceVariable(b.contextGUID,a.selectedTemplateGUID,g,k,i.synchronize):b.sheetTemplateController.changeModelVariable(b.contextGUID,a.selectedTemplateGUID,g,k))})}}()}}},textAreaBehaviors:function(a){return{onValueChange:this.basicBehaviors(a).onValueChange,validator:function(b,c){var e=f(b,a.name);e.valid&&(e=g(function(){return!a.excludedValues||!a.excludedValues.filter(function(a){return b===a}).length},d.i18n.translate("%1s cannot be %2s").ifPlural(a.excludedValues.length,"%1s cannot have the following values: %2s").fetch(a.name,a.excludedValues.join(",")))),c(e)}}},showProperties:function(b){var c=this;this.set("paramValues",[]),this.set("groupedParamValues",[]),a.dom(this).flush(),b&&b.length>0?function(){var d=[],e=[],f=[];b.forEach(function(a){if(a.groupName){if(-1===d.indexOf(a.groupName)){d.push(a.groupName);var c={name:a.groupName,items:b.filter(function(b){return b.groupName===a.groupName})};e.push(c)}}else f.push(a)}),c.set("paramValues",f),c.set("groupedParamValues",e),a.dom(c).flush();for(var g=c.querySelectorAll("#inputToggle"),h=0;h<g.length;++h)g[h].commandContextHelper=c.commandInterface.createCommandContextHelper({disable:"all"});for(var i=c.querySelectorAll("multisim-input"),j=0;j<i.length;++j)i[j].checkenabled&&!i[j].checked&&(i[j].commandContextHelper=c.commandInterface.createCommandContextHelper({disable:"all"}));c.$.info.classList.remove("hidden")}():this.$.info.classList.add("hidden"),this.$.modelTab.acquireHelp()},previousView:null,selectionChanged:function(a){document.activeElement&&document.activeElement.onblur&&document.activeElement.onblur();var b=this.activeViewGetter(),c=this,e=function(){var d=l.getRefDesForComponent(b.sheetTemplateController.design.findInstance(b.contextGUID,a)),e=l.getSectionForComponent(b.sheetTemplateController.design.findInstance(b.contextGUID,a));c.$.refdesInput.value=d,c.$.sectionField.innerHTML=e};c.previousView&&c.previousView.sheetTemplateController.design.listeners.removeListener(j.DESIGN_CHANGED,e),c.previousView=b,b.sheetTemplateController.design.listeners.addListener(j.DESIGN_CHANGED,e),c.selectedTemplateGUID=a;var f=b.sheetTemplateController.sheetTemplate.getObject(a),g=b.sheetTemplateController.design.findInstance(b.contextGUID,c.selectedTemplateGUID);b.sheetTemplateController.componentController.attachModifyInput(c.$.refdesInput,c.$.sectionField,c.activeViewGetter,g),c.mergedProperties=b.sheetTemplateController.getPropertiesForItem(b.contextGUID,a),c.showProperties(c.mergedProperties),c.$.sectionField.innerHTML?c.$.sectionInfo.removeAttribute("hidden"):c.$.sectionInfo.setAttribute("hidden",""),c.$.typeField.innerHTML=f.oeclComponent.componentBlueprints[0].name,c.$.symbolPinVisibilityToggle.checked=f.showSymbolPinNames;var h=c.componentAPI.getManufacturerList(f.oeclComponent);if(c.$$("#manufacturerSelector")&&h.length>0){c.$$("#manufacturerSelector").commandContextHelper=c.commandInterface.createCommandContextHelper({disable:"all"}),c.$$("#partNumberSelector").commandContextHelper=c.commandInterface.createCommandContextHelper({disable:"all"}),c.$$("#manufacturerSelector").options=h.map(function(a){return{value:a.manufacturer,displayText:a.manufacturer}});var i=g.designComponent.oeclComponentBlueprint.packageConfigurations.find(function(a){return a.id==g.activePackageID});c.$$("#manufacturerSelector").value=i.manufacturer,c.$$("#manufacturerSelector").onValueChange=function(a){var e=g.designComponent.oeclComponentBlueprint.packageConfigurations.find(function(a){return a.id==g.activePackageID});if(b&&e.manufacturer!==a){b.sheetTemplateController.undo.startAction(d.i18n.translate("component manufacturer change.").fetch());var h=g.designComponent.oeclComponentBlueprint.packageConfigurations.find(function(b){return b.manufacturer==a});b.sheetTemplateController.componentController.changeInstancePackage(b.contextGUID,c.selectedTemplateGUID,h.id),c.updateModelSelector(f,g,b),c.updatePartNumberSelector(f,g,b),c.updateSymbolGallery(f,g,b),b.sheetTemplateController.undo.finishAction(!1)}}}c.stringComponentFunction=c.componentAPI.getComponentFunction(f.oeclComponent),c.updateModelSelector(f,g,b),c.updateSymbolGallery(f,g,b),c.updatePartNumberSelector(f,g,b)},updateModelSelector:function(a,b,c){var e=this,f=this.$$("#modelSelector"),g=this.$$("#buttonShortcutSelect"),h=this.$$("#technologyContainer"),i=this.$.logicLevel,j=i.$.useDocumentLogicLevelSettings,k=i.$.logicLevelSelector,l=this.$$("#riseTimeInput"),m=this.$$("#fallTimeInput"),n=i.$.outputVoltageLow,s=i.$.outputVoltageHigh,t=i.$.inputThresholdHigh,u=i.$.inputThresholdLow;g&&(g.options=[{value:-1,displayText:"None"},{value:0,displayText:"0"},{value:1,displayText:"1"},{value:2,displayText:"2"},{value:3,displayText:"3"},{value:4,displayText:"4"},{value:5,displayText:"5"},{value:6,displayText:"6"},{value:7,displayText:"7"},{value:8,displayText:"8"},{value:9,displayText:"9"}],g.value=e.extractShortcutValue(c.sheetTemplateController.sheetTemplate.componentShortcuts,a.templateGUID),g.onValueChange=function(){for(var b=c.controlSVG.querySelectorAll(".adorner"),d=0;d<b.length;++d){var e=b[d];e.id=="adorner-togglestate_"+a.templateGUID&&r.modifyToggleAdorner(g.value,e.children[2])}-1!=g.value?(c.sheetTemplateController.sheetTemplate.removeComponentShortcut(a.templateGUID),c.sheetTemplateController.sheetTemplate.addComponentShortcut(g.value,a.templateGUID)):c.sheetTemplateController.sheetTemplate.removeComponentShortcut(a.templateGUID)});var v=void 0,w=b.activePackageID?b.designComponent.oeclComponentBlueprint.packageConfigurations.find(function(a){return a.id===b.activePackageID}):null;if(v=w?e.componentAPI.getModelsForManufacturer(a.oeclComponent,w.manufacturer):a.oeclComponent.simModelBlueprints.map(function(a){return a.id}),-1===v.indexOf(b.activeModelID)&&v.length&&c.sheetTemplateController.componentController.changeInstanceModel(c.contextGUID,e.selectedTemplateGUID,v[0]),f)if(f.options=v.map(function(a){return{value:a,displayText:e.componentAPI.getModelFromCache(a).name}}),f.value=b.activeModelID,f.onValueChange=function(f){e.commandInterface.getCommandObject("modelchange").startCommand(d.i18n.translate("component model change.").fetch(),{view:c,templateComponent:a,instance:b,sheetTemplateController:c.sheetTemplateController,newModel:f})},e.componentAPI.isDigitalModel(b.activeModelID)){h.style.display="block",l.value=b.activePinRiseTime||0,l.onValueChange=function(f){var g=e.commandInterface.getCommandObject("risetimechange");f=q(f),g.startCommand(d.i18n.translate("component pin rise time change.").fetch(),{view:c,templateComponent:a,instance:b,sheetTemplateController:c.sheetTemplateController,newPinRiseTime:f})},m.value=b.activePinFallTime||0,m.onValueChange=function(f){var g=e.commandInterface.getCommandObject("falltimechange");f=q(f),g.startCommand(d.i18n.translate("component pin fall time change.").fetch(),{view:c,templateComponent:a,instance:b,sheetTemplateController:c.sheetTemplateController,newPinFallTime:f})},j.checked=b.useDocumentLogicLevelSettings,j.onValueChange=function(f){if(f){var g=c.sheetTemplateController.design.simulationController.documentDigitalSettings;if(b.activePinTechnology=g.logicLevel,b.activePinTechnology===o.CUSTOM){var h=new p(g.outputLowValue,g.inputLowThresholdValue,0,g.inputHighThresholdValue,g.outputHighValue);h.autoSetUnknownVoltage(),b.activePinCustomLogicFamily=h}}e.commandInterface.getCommandObject("usedocumentlogiclevelschange").startCommand(d.i18n.translate("use document logic levels change.").fetch(),{view:c,templateComponent:a,instance:b,sheetTemplateController:c.sheetTemplateController,newUseDocumentSettingsValue:f})},k.disabled=j.checked,k.value=b.activePinTechnology||o.THREE,k.onValueChange=function(f){e.commandInterface.getCommandObject("logiclevelchange").startCommand(d.i18n.translate("component logiclevel change.").fetch(),{view:c,templateComponent:a,instance:b,sheetTemplateController:c.sheetTemplateController,newLogicLevel:f})};var x=e.componentAPI.getPortsForModel(b.activeModelID),y=x.every(function(a){return"In"===a.direction}),z=x.every(function(a){return"Out"===a.direction}),A=b.getVoltageLevels();y?i.showOutputVoltageInputs=!1:(i.showOutputVoltageInputs=!0,n.value=A.lowVoltage,n.onValueChange=function(f){var g=e.commandInterface.getCommandObject("customlogicfamilychange");f=q(f);var h=b.activePinCustomLogicFamily.clone();h.lowVoltage=f,h.autoSetUnknownVoltage(),g.startCommand(d.i18n.translate("custom component voltage level change.").fetch(),{view:c,templateComponent:a,instance:b,sheetTemplateController:c.sheetTemplateController,newCustomLogicFamily:h})},s.value=A.highVoltage,s.onValueChange=function(f){var g=e.commandInterface.getCommandObject("customlogicfamilychange");f=q(f);var h=b.activePinCustomLogicFamily.clone();h.highVoltage=f,g.startCommand(d.i18n.translate("custom component voltage level change.").fetch(),{view:c,templateComponent:a,instance:b,sheetTemplateController:c.sheetTemplateController,newCustomLogicFamily:h})}),z?i.showInputVoltageInputs=!1:(i.showInputVoltageInputs=!0,u.value=A.maxLowVoltage,u.onValueChange=function(f){var g=e.commandInterface.getCommandObject("customlogicfamilychange");f=q(f);var h=b.activePinCustomLogicFamily.clone();h.maxLowVoltage=f,h.autoSetUnknownVoltage(),g.startCommand(d.i18n.translate("custom component voltage level change.").fetch(),{view:c,templateComponent:a,instance:b,sheetTemplateController:c.sheetTemplateController,newCustomLogicFamily:h})},t.value=A.minHighVoltage,t.onValueChange=function(f){var g=e.commandInterface.getCommandObject("customlogicfamilychange");f=q(f);var h=b.activePinCustomLogicFamily.clone();h.minHighVoltage=f,h.autoSetUnknownVoltage(),g.startCommand(d.i18n.translate("custom component voltage level change.").fetch(),{view:c,templateComponent:a,instance:b,sheetTemplateController:c.sheetTemplateController,newCustomLogicFamily:h})})}else h.style.display="none";var B=e.componentAPI.getModelFromCache(b.activeModelID);e.stringModelFunction=B.description,e._handlePremiumStateChanged()},extractShortcutValue:function(a,b){var c=-1;return a.forEach(function(a,d){a.forEach(function(a){a==b&&(c=d)})}),c},updateSymbolGallery:function(b,c,e){function f(c,d){var e=g.componentAPI.getDefaultSymbolFromCache(b,d,c),f=void 0;return e&&(f=document.createElement("div"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.style.position="absolute",e.style.top=e.style.bottom=e.style.left=e.style.right=0,e.classList.add("symbolIcon"),a.dom(f).appendChild(e),f.style.position="absolute",f.style.left=f.style.right=f.style.top=f.style.bottom=0),f}var g=this,h=!1,i=g.componentAPI.getSymbolsForModel(b.oeclComponent,c.sectionName,c.activeModelID);return g.$.symbols.options=i.map(function(a){return{value:a,displayContent:f(a,c.sectionName)}},g),-1!==i.indexOf(c.activeSymbolID)?g.$.symbols.value=c.activeSymbolID:(g.$.symbols.value=i[0],e.sheetTemplateController.componentController.changeComponentSymbol({templateComponent:b,newSymbolID:i[0],notificationInterface:e.wiringcontroller}),h=!0),g.$.symbols.onValueChange=function(a){g.commandInterface.getCommandObject("symbolchange").startCommand(d.i18n.translate("Change component symbol").fetch(),{view:e,newSymbolID:a,templateComponent:b,instance:c,sheetTemplateController:e.sheetTemplateController})},g.updateSymbolPreview(b,c),h},updateSymbolPreview:function(b,c){var d=this.componentAPI.getShowAllPinsSymbolFromCache(b,c.sectionName,c.activeSymbolID);if(d){d.classList.add("symbolIcon");for(var e=a.dom(this.$.symbolContainer);e.firstChild;)e.removeChild(e.firstChild);e.appendChild(d)}},updatePartNumberSelector:function(a,b,c){var e=this,f=b.activePackageID?b.designComponent.oeclComponentBlueprint.packageConfigurations.find(function(a){return a.id==b.activePackageID}):null,g=f?b.designComponent.oeclComponent.packageBlueprints.find(function(a){return a.id==f.manufacturerPackageRef}):null;f&&function(){var h=e,i=e.$$("#partNumberSelector"),j=h.componentAPI.getPackagesForManufacturer(a.oeclComponent,f.manufacturer);!j.find(function(a){return a.id==f.id})&&j.length&&c.sheetTemplateController.componentController.changeInstancePackage(c.contextGUID,h.selectedTemplateGUID,j[0].id),i&&(i.options=j.map(function(a){return{value:a.id,displayText:a.partNumber}}),i.value=b.activePackageID,i.onValueChange=function(a){c&&b.activePackageID!==a&&(c.sheetTemplateController.undo.startAction(d.i18n.translate("part number change.").fetch()),c.sheetTemplateController.componentController.changeInstancePackage(c.contextGUID,h.selectedTemplateGUID,a),f=b.designComponent.oeclComponentBlueprint.packageConfigurations.find(function(a){return a.id==b.activePackageID}),g=b.designComponent.oeclComponent.packageBlueprints.find(function(a){return a.id==f.manufacturerPackageRef}),h.packageName=g.name,c.sheetTemplateController.undo.finishAction(!1))}),h.packageName=g.name}()},instancePropertyValueChanged:function(a){var b=this.activeViewGetter();if(a.contextGUID===b.contextGUID&&a.templateGUID===this.selectedTemplateGUID){var c=this.$$('multisim-input[label="'+a.propertyName+'"]');c&&(c.value=a.newValue,c.checked=a.newState)}},modelPropertyValueChanged:function(a){var b=this.activeViewGetter();if(a.contextGUID===b.contextGUID&&a.templateGUID===this.selectedTemplateGUID){var c=this.$$('multisim-input[label="'+a.propertyName+'"]');c&&(c.value=a.newValue,c.checked=a.newState)}},manufacturerExists:function(a){if(this.activeViewGetter){var b=this.activeViewGetter(),c=b.sheetTemplateController.sheetTemplate.getObject(a),d=c.oeclComponent.componentBlueprints[0].packageConfigurations;return d&&d.length>0}return!1},isValidFullName:function(a){return a.hasOwnProperty("fullName")&&a.name!==a.fullName}})}).apply(this,[window.Polymer])}}}),a.register("55",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({SM_INCREMENT:"SM_INCREMENT",SM_POINTS:"SM_POINTS"}),a("default",c)}}}),a.register("3b",["4f","55"],function(a,b){"use strict";function c(a,b){var c=Math.pow(10,b);return Number.isFinite(c)?(a*=c,a=Math.round(a),a/=c):a=0,a}function d(a,b){var d=void 0!==b,e=["T","G","M","k","","m","µ","n","p","f"],f=!1;a<0&&(f=!0,a*=-1);for(var g=4,h=0;a>=1e3&&g>0;)h-=3,a/=1e3,g--;for(;0!==a&&a<1&&g<e.length-1;)h+=3,a*=1e3,g++;if(d){if(a>0){a=c(a,b-(1+Math.floor(Math.log(a)/Math.LN10)))}a>=1e3&&g>0&&(h-=3,a/=1e3,g--)}var i="";return 0!==a&&(i=e[g]),f&&(a*=-1),{siPrefix:i,modifiedValue:a,siPrefixPow:h}}function e(a){switch(a=a.replace("∆",""),a=a.replace("Δ",""),a=a.replace("△",""),a=a.trim()){case"A":case"a":return r.Current;case"V":case"v":return r.Voltage;case"W":return r.Power;case"°":case"deg":case"degrees":return r.Phase;case"rad":return r.Radians;case"s":return r.Time;case"Hz":case"hz":return r.Frequency;case"dB":case"db":case"DB":return r.Decibels;case"Ω":return r.Resistance;default:return r.Unknown}}function f(a,b,f,g,h,i,j,k){a=p(a),0!==a&&(Math.abs(a)<1e-15||Math.abs(a)>=1e15)&&(h=!1),"string"==typeof b&&(b=e(b)),b=void 0!==b?b:r.Unknown,f=void 0===f||f;var l=void 0!==i?i:void 0!==g;g=void 0!==g?g:4,h=void 0===h||h,g<=0&&(g=1),g>100&&(g=100),b!==r.Time&&b!==r.Decibels&&b!==r.DigitalSignal&&b!==r.Phase||(h=!1);var m="",n="",o="";if(isFinite(a))if(a<0&&(o="-",a*=-1),h){var s=d(a,g);n=s.siPrefix,a=s.modifiedValue,m+=a.toString()}else{if(n="",a>0){var t=1+Math.floor(Math.log(a)/Math.LN10);a=c(a,Math.max(0,g-(k?Math.max(0,t):t)))}if(Math.abs(a)<1e-15||Math.abs(a)>=999999999999.9999){var u=a.toPrecision(Math.max(1,Math.min(21,g)));l||(u=u.replace(/(\.0)?0+(e[+\-])/g,"$1$2")),m+=u}else m+=a.toString()}else m=q;if("0"!==m&&"0.0"!==m||(o="",n=""),l&&m.indexOf("e")<0&&m.indexOf("E")<0){var v=0;for(m.indexOf(".")<0?m.length<g&&(v=g-m.length,m+="."):v=g-(m.length-1);v>0;)m+="0",v--}if(b===r.DigitalSignal)m=a<=.5?"0":"1",n="";else if(f)switch(b){case r.Voltage:n+="V";break;case r.Current:n+="A";break;case r.Power:n+="W";break;case r.Time:n+="s";break;case r.Frequency:n+="Hz";break;case r.Phase:n+="°";break;case r.Decibels:n+="dB";break;case r.Resistance:n+="Ω";break;case r.Radians:n+="rad"}return""+(o||"")+m+(j?" ":"")+(n||"")}function g(a,b){if(b&&-1!==b.search(/u/)){var c=b.replace(/u/g,"μ");a.value=c}return a.value}function h(a,b,c,d,e,f){var g=p(d),h=p(e),i=p(c),j=c,k=f?Math.ceil:Math.floor;return b!=a&&(j=i>0&&g<h?a===o.SM_POINTS?(h-g)/i+1:(h-g)/(i-1):q),a!=o.SM_POINTS||isNaN(j)||j==k(j)||(j=k(parseFloat(p(j).toFixed(4)))),j}function i(a,b){var c=20*Math.log10(p(a));return b?c.toString():c}function j(a,b){var c=Math.pow(10,p(a)/20);return b?c.toString():c}function k(a,b,c){var d=p(a);return void 0!==d?d>=b?s.High:d<=c?s.Low:s.Undefined:s.NoValue}function l(a){var b=p(a);return void 0!==b?1===b?s.High:0===b?s.Low:s.Undefined:s.NoValue}function m(a){var b=void 0;switch(a){case s.High:b=t.High;break;case s.Low:b=t.Low;break;case s.Undefined:b=t.Undefined;break;case s.NoValue:default:b=t.NoValue}return b}var n,o,p,q,r,s,t;return a("roundToPrecision",c),a("findBestSIUnitPrefix",d),a("formatSimulationNumber",f),a("switchEnteredChars",g),a("getAlternativeStep",h),a("convertToDB",i),a("convertFromDB",j),a("convertAnalogValueToDigitalString",k),a("convertDigitalValueToDigitalString",l),a("convertDigitalStringToOneZero",m),{setters:[function(a){n=a.default},function(a){o=a.default}],execute:function(){p=function(a){return"string"==typeof a?n(a):a},q="- - -",a("ESimulationVariable",r=Object.freeze({Unknown:-1,Current:0,Voltage:1,DigitalSignal:2,Power:3,Time:4,Frequency:5,Decibels:6,Phase:7,Magnitude:8,Resistance:9,Radians:10})),a("ESimulationVariable",r),a("EDigitalProbeDisplayValues",s=Object.freeze({High:"Hi",Low:"Lo",Undefined:"X",NoValue:"--"})),a("EDigitalProbeDisplayValues",s),a("EDigitalProbeSymbolText",t=Object.freeze({High:"1",Low:"0",Undefined:"X",NoValue:"0/1"})),a("EDigitalProbeSymbolText",t)}}}),a.register("2e",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({SHEET_PROPERTIES_CHANGED:"sheetPropertiesChanged",SHEET_OBJECTS_CHANGED:"updateObjects",COMPONENT_SYMBOL_CHANGED:"componentSymbolChanged",COMPONENT_SYMBOL_CHANGE_UNDO:"componentSymbolChangeUndo",CONNECTIONS_CHANGED:"connectionsChanged"}),a("default",c)}}}),a.register("131",[],function(){return{setters:[],execute:function(){}}}),a.register("132",["a7","106","104","b9","103","105","29","50","3b","3d","2e","131"],function(a,b){"use strict";var c,d,e,f,g;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.basicNumberValidate},function(a){e=a.switchEnteredChars},function(a){f=a.default},function(a){g=a.default},function(a){}],execute:function(){!function(){function a(a,b,c){a.$.transientInitialConditionsToggle.checked=c.useTransientInitialConditions(b),a.$.transientInitialConditions.value=c.getTransientInitialConditions(b),a.$.transientInitialConditions.disabled=!a.$.transientInitialConditionsToggle.checked,a.$.dcNodesetToggle.checked=c.useDCNodeset(b),a.$.dcNodeset.disabled=!a.$.dcNodesetToggle.checked,a.$.dcNodeset.value=c.getDCNodeset(b),a.$.displayNetNameToggle.disabled=!1,"0"===b?(a.$.transientInitialConditions.disabled=!0,a.$.transientInitialConditionsToggle.disabled=!0,a.$.dcNodeset.disabled=!0,a.$.dcNodesetToggle.disabled=!0):(a.$.transientInitialConditionsToggle.disabled=!1,a.$.dcNodesetToggle.disabled=!1)}window.Polymer({is:"net-properties",behaviors:[window.Polymer.InitializeHelp],properties:{netName:String,stringID:String,stringType:String,stringSimulationSettings:String,stringTransientIC:String,stringDCNODESET:String,stringDisplay:String,stringNetname:String},ready:function(){},initialize:function(b,h){this.activeViewGetter=b;var i=h.commandInterface,j=h.undo,k=this;c.addReadyListener(function(a){k.stringID=a.i18n.translate("ID").fetch(),k.stringType=a.i18n.translate("Type").fetch(),k.stringSimulationSettings=a.i18n.translate("Simulation settings").fetch(),k.stringTransientIC=a.i18n.translate("Transient IC").fetch(),k.stringDCNODESET=a.i18n.translate("DC NODESET").fetch(),k.stringDisplay=a.i18n.translate("Display").fetch(),k.stringNetname=a.i18n.translate("Net labels").fetch()}),this.$.netName.commandContextHelper=i.createCommandContextHelper({disable:"all"}),this.$.transientInitialConditionsToggle.onValueChange=function(){var a=b();a&&a.sheetTemplateController&&(j.startAction(c.i18n.translate("Change use initial conditions for net").fetch()),a.sheetTemplateController.design.netlistController.netShouldUseInitialConditions(k.netName,this.checked),j.finishAction(!1)),k.$.transientInitialConditions.disabled=!this.checked},this.$.transientInitialConditionsToggle.commandContextHelper=i.createCommandContextHelper({disable:"all"}),this.$.transientInitialConditions.commandContextHelper=i.createCommandContextHelper({disable:"all"}),this.$.dcNodesetToggle.onValueChange=function(){var a=b();a&&a.sheetTemplateController&&(j.startAction(c.i18n.translate("Change use nodeset for net").fetch()),a.sheetTemplateController.design.netlistController.netShouldUseNodeset(k.netName,this.checked),j.finishAction(!1)),k.$.dcNodeset.disabled=!this.checked},this.$.dcNodesetToggle.commandContextHelper=i.createCommandContextHelper({disable:"all"}),this.$.dcNodeset.onValueChange=function(d){var e=b();e&&e.sheetTemplateController&&(this.valid?(j.startAction(c.i18n.translate("Change net nodeset").fetch()),e.sheetTemplateController.design.netlistController.changeNetNodeset(k.netName,d),j.finishAction(!1)):a(k,k.netName,e.sheetTemplateController.design.netlistController))},this.$.dcNodeset.oninput=function(a){e(this.$.multisimTextInput,a)},this.$.dcNodeset.validator=function(a,b){b(d(a,k.stringDCNODESET))},this.$.dcNodeset.commandContextHelper=i.createCommandContextHelper({disable:"all"});var l=function(b){b.netlistController&&b.netName===k.netName&&a(k,b.netName,b.netlistController)},m=function(){var a=b();a&&function(){var b=a.sheetTemplateController.sheetTemplate,c=a.sheetTemplateController.wiringController,d=b.getTemplateWires();d&&(d.forEach(function(a){c.displayNetNameCallback(b.netLabelsVisibility,[a.templateGUID])}),a.sheetTemplateController.design.modified=!0),k.$.displayNetNameToggle.checked=b.netLabelsVisibility}()},n=b();if(n){var o=n.sheetTemplateController.sheetTemplate;n.sheetTemplateController.design.netlistController.listener.addListener(f.NE_PROPSCHANGED,l),o.listeners.addListener(g.SHEET_PROPERTIES_CHANGED,m)}h.listeners.addListener(h.events.ACTIVEVIEWCHANGED,function(a){if(a.oldView){var b=a.oldView.sheetTemplateController.sheetTemplate;a.oldView.sheetTemplateController.design.netlistController.listener.removeListener(f.NE_PROPSCHANGED,l),b.listeners.removeListener(g.SHEET_PROPERTIES_CHANGED,m)}if(a.newView){var c=a.newView.sheetTemplateController.sheetTemplate;a.newView.sheetTemplateController.design.netlistController.listener.addListener(f.NE_PROPSCHANGED,l),c.listeners.addListener(g.SHEET_PROPERTIES_CHANGED,m)}}),this.$.displayNetNameToggle.onValueChange=function(){var a=b(),c=a.sheetTemplateController;a&&c&&(a.sheetTemplateController.wiringController.displayNetNameCallback(this.checked,a.getSelection()),a.sheetTemplateController.design.modified=!0)}},selectionChanged:function(b){var d=this.activeViewGetter(),e=this;if(d){var f=d.sheetTemplateController.design.findInstance(d.contextGUID,b);if(f&&void 0!==f.netName){e.$.netName.disabled=!!d.sheetTemplateController.design.getConnectorHub(f.netName,"ground"),d.sheetTemplateController.design.netlistController.attachModifyInput(this.$.netName,this.activeViewGetter,f,"netName"),d.sheetTemplateController.design.netlistController.attachModifyInput(this.$.transientInitialConditions,this.activeViewGetter,f,"initialConditions"),e.netName=f.netName;var g=!1,h=d.sheetTemplateController.design.netlistController;h.getWireTerminals(f)&&h.forAllWires(f.netName,function(a){var b=d.sheetTemplateController.sheetTemplate.getObject(a.templateGUID);b&&b.isLabelVisible&&!0===b.isLabelVisible()&&(g=!0)}),e.$.displayNetNameToggle.checked=g,a(e,e.netName,h)}c.addReadyListener(function(a){e.$.typeField.innerHTML=a.i18n.translate("Net").fetch()}),e.behaviors[0]._initializeHelpAsync(e,window.multisim.rootFolder+"resources/help_en/help-nets.json")}}})}()}}}),a.register("96",[],function(a,b){"use strict";var c,d,e,f;return{setters:[],execute:function(){c=[],d=0,e=function(a){c.filter(function(b){return b.targetid===a}).forEach(function(a){a.callbacks.forEach(function(b){b(a.element)})})},window.addEventListener("message",function(a){a.data&&a.data.message&&"resize"===a.data.message&&e(a.data.targetid)}),f={addResizeListener:function(a,b){if(!a||!a.style.position||"static"===a.style.position||"function"!=typeof b)throw new Error("You can only add a resize listener to a positioned element (not static) and you have to provide a valid callback function");var e=a.querySelector("iframe.resizedetectframe");if(e){var f=c.filter(function(b){return b.iframe===e&&b.element===a});if(console.assert(f.length<=1),1===f.length){f[0].callbacks.filter(function(a){return a===b}).length||f[0].callbacks.push(b)}else e=null}e||function(){d++,e=document.createElement("iframe");var f=document.createElement("div");e.className="resizedetectframe",c.push({element:a,callbacks:[b],targetid:d,iframe:e}),a.insertBefore(f,a.firstChild),f.appendChild(e),function a(){e.contentWindow?(e.contentWindow.resizeDetect="<!DOCTYPE html>\n<html>\n\t<body>\n\t<script>\n\tfunction ready(fn){ if (document.readyState !== 'loading'){ fn(); } else { document.addEventListener('DOMContentLoaded', fn); } }\n\tconst handleResize = function(){ window.parent.postMessage({ message: 'resize', targetid: "+d+" },'*'); }\n\twindow.addEventListener('resize', handleResize);\n\tready(handleResize);\n\twindow.oncontextmenu = function() { return false; };\n\t<\/script>\n\t</body>\n</html>",e.src="javascript:window.resizeDetect",f.style.position="absolute",f.style.left=f.style.top=f.style.bottom=f.style.right=0,f.style.pointerEvents="none",f.style.opacity=0,f.classList.add("resizeDetectContainer"),e.style.width=e.style.height="100%",e.style.border="none",e.style.clip="rect(0,0,0,0)"):setTimeout(a,0)}()}()},removeResizeListener:function(a,b){c.filter(function(c){return!(a&&c.element!==a||b&&-1===c.callbacks.indexOf(b))}).forEach(function(a){if(b){var c=a.callbacks.indexOf(b);-1!==c&&a.callbacks.splice(c,1)}else a.callbacks=[];0===a.callbacks.length&&a.iframe.parentNode.removeChild(a.iframe)}),c=c.filter(function(a){return 0!==a.callbacks.length})}},a("default",f)}}}),a.register("133",[],function(){return{setters:[],execute:function(){}}}),a.register("134",["a7","cb","96","133"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){function a(a,b){if(b){for(var c=a.$.galleryContentContainer.querySelectorAll("#gallery > .page"),d=-1,e=0;e<c.length;e++)c[e].removeAttribute("selected"),c[e]===b&&(d=e);for(var f=a.$.pageindicator.querySelectorAll(".pagedot"),g=0;g<f.length;g++)g!=d?f[g].removeAttribute("selected"):f[g].setAttribute("selected","");b.setAttribute("selected",""),a.$.galleryScrollWrapper.scrollLeft=b.offsetLeft}}function b(b,c,d){for(var e=b.$.pageindicator,f=b.$.galleryContentContainer.querySelectorAll("#gallery > .page"),g=0;g<f.length;g++)f[g].parentNode.removeChild(f[g]);for(;b.$.pageindicator.firstChild;)b.$.pageindicator.removeChild(b.$.pageindicator.firstChild);var h=function(a,b){a.classList.add(b),a.classList.add("style-scope"),a.classList.add("control-gallery")},i=function(a){var b=document.createElement("div");h(b,"pagedot"),e.appendChild(b);var d=document.createElement("div");return h(d,"page"),d.style.minWidth=a+"px",c.appendChild(d),d},j=b.$.galleryContentWrapper.clientWidth,k=i(j);a(b,k);var l=Math.max(1,j/b.optionWidth|0),m=0;d.forEach(function(a){m>0&&m%l==0&&(k=i(j)),m++;var d=document.createElement("div");h(d,"option"),d.value=a.value,k.appendChild(d);var e=document.createElement("div");h(e,"background"),d.appendChild(e);var f=document.createElement("div");h(f,"fill"),e.appendChild(f);var g=document.createElement("div");h(g,"content"),"string"==typeof a.displayContent?g.innerHTML=a.displayContent:g.appendChild(a.displayContent),e.appendChild(g),d.addEventListener("click",function(){b.value!=this.value&&(b.value=this.value,c.onchange&&c.onchange())})}),f=b.$.galleryContentContainer.querySelectorAll("#gallery > .page"),f.length>1?e.classList.add("visible"):e.classList.remove("visible"),c.style.width=f.length*j+"px"}window.Polymer({is:"control-gallery",properties:{value:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_valueChanged"},label:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_labelChanged"},options:{reflectToAttribute:!1,type:Array,value:[],notify:!0,observer:"refresh"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},optionWidth:{reflectToAttribute:!0,value:40,type:Number,notify:!0,observer:"refresh"}},get visible(){return!this._commandContextHelper||this._commandContextHelper.testContextVisible()},attached:function(){var d=this;d.$.gallery.onchange=function(){d._notifyValueChanged()},d.$.left.addEventListener("click",function(){var b=d.$.galleryContentContainer.querySelector("#gallery > .page[selected]");a(d,b.previousSibling)}),d.$.right.addEventListener("click",function(){var b=d.$.galleryContentContainer.querySelector("#gallery > .page[selected]");a(d,b.nextSibling)}),d.$.gallerywrapper.style.position="relative",c.addResizeListener(d.$.gallerywrapper,function(){b(d,d.$.gallery,d.options),d._valueChanged()});var e=d.$$(".resizeDetectContainer");e&&(e.style.zIndex=-1)},init:function(a,c,d){var e=this;e.options=a,e._commandContextHelper=c,e.value=d||null,this.optionWidth=this.optionWidth||40,b(this,this.$.gallery,this.options),this._valueChanged()},_commandContextHelper:null,set commandContextHelper(a){var b=this,c=function(){var a=b._commandContextHelper.testContextEnabled();a==b.contextDisabled&&(b.contextDisabled=!a)};a!=b._commandContextHelper&&(b._commandContextHelper&&b._commandContextHelper.removeContextChangeListener(c),b._commandContextHelper=a,b._commandContextHelper&&b._commandContextHelper.addContextChangeListener(c)),c()},get commandContextHelper(){return this._commandContextHelper},set title(a){this.$.gallery.title=a},get title(){return this.$.gallery.title},refresh:function(){b(this,this.$.gallery,this.options),this._valueChanged()},_notifyValueChanged:function(){this.onValueChange&&this.onValueChange(this.value)},_labelChanged:function(){this.$.labelText.innerHTML=this.label,0===this.label.length?this.$.gallerywrapper.classList.add("noLabel"):this.$.gallerywrapper.classList.remove("noLabel")},_valueChanged:function(){for(var b=this.$.gallery.querySelectorAll(".option"),c=0;c<b.length;c++)if(b[c].value==this.value){b[c].setAttribute("selected","selected");for(var d=b[c].parentNode;d;){if(d.classList.contains("page")){a(this,d);break}d=d.parentNode}}else b[c].removeAttribute("selected")}})}()}}}),a.register("135",[],function(){return{setters:[],execute:function(){}}}),a.register("136",["135"],function(a,b){"use strict";return{setters:[function(a){}],execute:function(){!function(){window.Polymer({is:"right-rail-tab-switcher",properties:{content:{reflectToAttribute:!0,type:String,value:""},switchto:{reflectToAttribute:!0,type:Number,value:0}},ready:function(){var a=this;this.$.documentHyperlinkText.innerHTML=this.content,this.$.documentHyperlinkText.onclick=function(b){document.getElementById("rightrail").selected=a.switchto,b.preventDefault()}}})}()}}}),a.register("50",["4f","29","12"],function(a,b){"use strict";function c(a){return"string"==typeof a?i(a):a}function d(a,b,d){var e={valid:!0};switch(d=d||"Value",b){case l.TEXT:void 0!==a&&null!==a&&a.replace(/\s/g,"")||(e.valid=!1,e.errorMessage=j.i18n.translate("%1s cannot be blank.").fetch(d));break;case l.NUMERIC:var f=c(a),g=k(f,a,!1);g.valid&&!isNaN(f)||(e.valid=!1,e.errorMessage=g.errorMsg||j.i18n.translate("%1s must be a number").fetch(d))}return e}function e(a,b){return d(a,l.TEXT,b)}function f(a,b){return d(a,l.NUMERIC,b)}function g(a,b){var c={valid:!0};return a()||(c.valid=!1,b&&(c.errorMessage=b)),c}function h(a,b){var d={},e=c(a);if(void 0!==b.lowerBound&&null!==b.lowerBound&&void 0!==b.lowerBound&&(b.lowerBoundAllowed&&e<b.lowerBound?d={errorMessage:j.i18n.translate("%1s must be greater than or equal to %2f").fetch(b.name,b.lowerBound),title:e}:!b.lowerBoundAllowed&&e<=b.lowerBound&&(d={errorMessage:j.i18n.translate("%1s must be greater than %2f").fetch(b.name,b.lowerBound),title:e})),d.errorMessage||void 0===b.upperBound||null===b.upperBound||void 0===b.upperBound||(b.upperBoundAllowed&&e>b.upperBound?d={errorMessage:j.i18n.translate("%1s must be smaller than or equal to %2f").fetch(b.name,b.upperBound),title:e}:!b.upperBoundAllowed&&e>=b.upperBound&&(d={errorMessage:j.i18n.translate("%1s must be smaller than %2f").fetch(b.name,b.upperBound),title:e})),!d.errorMessage&&b.excludedValues){b.excludedValues.filter(function(a){return e===a}).length&&(d={errorMessage:j.i18n.translate("%1s cannot be %2s").ifPlural(b.excludedValues.length,"%1s cannot have the following values: %2s").fetch(b.name,b.excludedValues.join(",")),title:e})}return d.valid=!d.errorMessage,d}var i,j,k,l;return a("basicTextValidate",e),a("basicNumberValidate",f),a("customValidate",g),a("customPropertyValidation",h),{setters:[function(a){i=a.default},function(a){j=a.default},function(a){k=a.validateBasicNumber}],execute:function(){l=Object.freeze({NUMERIC:"numeric",TEXT:"text"})}}}),a.register("137",[],function(){return{setters:[],execute:function(){}}}),a.register("12f",["a7","106","136","104","b9","bc","105","1f","29","50","4f","137"],function(a,b){"use strict";var c,d,e,f,g;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.ELogicFamily},function(a){d=a.default},function(a){e=a.basicNumberValidate,f=a.customValidate},function(a){g=a.default},function(a){}],execute:function(){window.Polymer({is:"logic-level",behaviors:[window.Polymer.InitializeHelp],properties:{stringCustomVoltage:String,logicLevelSelectorLabel:String,outputLowVoltageLabel:String,outputHighVoltageLabel:String,inputLowVoltageThresholdLabel:String,inputHighVoltageThresholdLabel:String,logicLevelsLabel:String,useDocumentSettingsLabel:String,disableVoltageLevelsInput:{type:Boolean,value:!0},showInputVoltageInputs:{type:Boolean,value:!0,observer:"_showInputVoltageInputsChanged"},showOutputVoltageInputs:{type:Boolean,value:!0,observer:"_showOutputVoltageInputsChanged"}},ready:function(){var a=this;d.addReadyListener(function(b){a.stringCustomVoltage=b.i18n.translate("Custom voltage levels").fetch(),a.logicLevelSelectorLabel=b.i18n.translate("Mode").fetch(),a.outputLowVoltageLabel=b.i18n.translate("Output low").fetch(),a.outputHighVoltageLabel=b.i18n.translate("Output high").fetch(),a.inputLowVoltageThresholdLabel=b.i18n.translate("Input low threshold").fetch(),a.inputHighVoltageThresholdLabel=b.i18n.translate("Input high threshold").fetch(),a.logicLevelsLabel=b.i18n.translate("Logic levels").fetch(),a.useDocumentSettingsLabel=b.i18n.translate("Use document settings").fetch(),a._initializeLogicLevelSelector()}),["outputVoltage","inputThreshold"].forEach(function(b){["Low","High"].forEach(function(c){a.querySelector("#"+b+c).validator=a._voltageLevelValidator(b,"Low"===c)})}),["outputVoltage","inputThreshold"].forEach(function(b){["Low","High"].forEach(function(c){a.querySelector("#"+b+c).addEventListener("changed",function(){"Low"===c?a.querySelector("#"+b+"Low").valid&&a.querySelector("#"+b+"High").validate():a.querySelector("#"+b+"High").valid&&a.querySelector("#"+b+"Low").validate()})})})},initializeHelp:function(){this.behaviors[0]._initializeHelpAsync(this,window.multisim.rootFolder+"resources/help_en/help-object.json")},_initializeLogicLevelSelector:function(){var a=this,b=this.$.logicLevelSelector;b.options=[{value:c.THREE,displayText:d.i18n.translate("3.3V").fetch()},{value:c.FIVE,displayText:d.i18n.translate("5V").fetch()},{value:c.SIMPLE,displayText:d.i18n.translate("Simplified").fetch()},{value:c.CUSTOM,displayText:d.i18n.translate("Custom").fetch()}],b.addEventListener("valueChanged",function(d){a.disableVoltageLevelsInput=b.disabled||d.detail.newValue!==c.CUSTOM}),b.addEventListener("disabledChanged",function(d){a.disableVoltageLevelsInput=d.detail.newValue||b.value!==c.CUSTOM})},_voltageLevelValidator:function(a,b){var c=this;return function(h,i){var j={valid:!0},k=c.querySelector("#"+a+"Low"),l=c.querySelector("#"+a+"High");(b?k:l).userChange&&function(){var m=function(a){return"string"==typeof a||a instanceof String},n=m(h)?g(h):h,o=m(k.value)?g(k.value):k.value,p=m(l.value)?g(l.value):l.value;j=e(h,c.stringCustomVoltage),j.valid&&(j=f(function(){return b?n<p:n>o},a.toLowerCase().includes("threshold")?d.i18n.translate("Input low threshold should not be greater than or equal to Input high threshold.").fetch():d.i18n.translate("Output low should not be greater than or equal to Output high.").fetch()),i(j))}()}},_showInputVoltageInputsChanged:function(){var a=Array.from(this.querySelectorAll(".inputInfoHelpContainer"));this.showInputVoltageInputs?(this.$.inputThresholdLow.classList.remove("invisible"),this.$.inputThresholdHigh.classList.remove("invisible"),a.forEach(function(a){a.style.display="block"})):(this.$.inputThresholdLow.classList.add("invisible"),this.$.inputThresholdHigh.classList.add("invisible"),a.forEach(function(a){a.style.display="none"}))},_showOutputVoltageInputsChanged:function(){var a=Array.from(this.querySelectorAll(".outputInfoHelpContainer"));this.showOutputVoltageInputs?(this.$.outputVoltageLow.classList.remove("invisible"),this.$.outputVoltageHigh.classList.remove("invisible"),a.forEach(function(a){a.style.display="block"})):(this.$.outputVoltageLow.classList.add("invisible"),this.$.outputVoltageHigh.classList.add("invisible"),a.forEach(function(a){a.style.display="none"}))}})}}}),a.register("138",[],function(){return{setters:[],execute:function(){}}}),a.register("139",["a7","d0","138"],function(a,b){"use strict";function c(a,b){b?a.setAttribute("disabled","disabled"):a.removeAttribute("disabled")}return{setters:[function(a){},function(a){},function(a){}],execute:function(){window.Polymer({is:"multisim-switch",properties:{disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},clickthrough:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},handleclick:{reflectToAttribute:!1,type:Function,value:null},on:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0},error:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0}},_disabledChanged:function(){c(this.$.switch,this.disabled)},_commandContextHelper:null,set commandContextHelper(a){var b=this,d=function(){var a=b._commandContextHelper.testContextEnabled();a===b.contextDisabled&&(b.contextDisabled=!a,c(b.$.switch,b.disabled||b.contextDisabled))};a!==b._commandContextHelper&&(b._commandContextHelper&&b._commandContextHelper.removeContextChangeListener(d),b._commandContextHelper=a,b._commandContextHelper&&b._commandContextHelper.addContextChangeListener(d)),d()},get commandContextHelper(){return this._commandContextHelper},attached:function(){var a=this;if(a.clickthrough){var b=document.createElement("div");for(b.setAttribute("id","switch"),b.classList.add("multisim-switch");a.$.switch.childNodes.length;)b.appendChild(a.$.switch.childNodes[0]);a.$.switchElement.parentNode.replaceChild(b,a.$.switch)}else a.$.switch.addEventListener("click",function(b){a.behaviours&&a.behaviours.handleClick?a.behaviours.handleClick.call(a,b):a.handleclick&&a.handleclick(b)})}})}}}),a.register("13a",[],function(){return{setters:[],execute:function(){}}}),a.register("13b",["a7","2d","13a"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){function a(a,b){b?(a.classList.add("disabled"),a.setAttribute("disabled","disabled")):(a.classList.remove("disabled"),a.removeAttribute("disabled"))}var b=Object.freeze({name:"Basic Palette",colors:[{r:252,g:168,b:143,a:1},{r:245,g:206,b:164,a:1},{r:255,g:248,b:154,a:1},{r:202,g:234,b:156,a:1},{r:131,g:202,b:157,a:1},{r:140,g:223,b:255,a:1},{r:147,g:183,b:227,a:1},{r:163,g:157,b:224,a:1},{r:181,g:153,b:217,a:1},{r:244,g:155,b:193,a:1},{r:243,g:107,b:78,a:1},{r:251,g:175,b:92,a:1},{r:255,g:245,b:103,a:1},{r:171,g:212,b:113,a:1},{r:58,g:184,b:120,a:1},{r:0,g:191,b:243,a:1},{r:76,g:155,b:224,a:1},{r:112,g:109,b:192,a:1},{r:134,g:94,b:168,a:1},{r:241,g:108,b:169,a:1},{r:238,g:28,b:37,a:1},{r:248,g:148,b:28,a:1},{r:255,g:242,b:0,a:1},{r:141,g:199,b:61,a:1},{r:0,g:166,b:79,a:1},{r:0,g:164,b:229,a:1},{r:0,g:112,b:188,a:1},{r:61,g:62,b:178,a:1},{r:102,g:43,b:145,a:1},{r:237,g:12,b:140,a:1},{r:158,g:9,b:17,a:1},{r:163,g:90,b:19,a:1},{r:175,g:162,b:10,a:1},{r:88,g:133,b:39,a:1},{r:0,g:113,b:51,a:1},{r:0,g:118,b:163,a:1},{r:0,g:74,b:128,a:1},{r:25,g:19,b:99,a:1},{r:68,g:15,b:98,a:1},{r:158,g:0,b:93,a:1}]});window.Polymer({is:"control-colorpicker",properties:{value:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_valueChanged"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},palettes:{reflectToAttribute:!1,type:Array,value:[b],notify:!0,observer:"_palettesChanged"}},attached:function(){},init:function(a,b){this.value=a,this.palettes=b},set title(a){this.$.dropDownBox.title=a},get title(){return this.$.dropDownBox.title},_notifyValueChanged:function(){this.onValueChange&&this.onValueChange(this.value)},_disabledChanged:function(){a(this.$.controlColorPickerWrapper,this.disabled)},_palettesChanged:function(){var a=this;null===a.palettes&&(a.palettes=[b]),a.$.paletteContainer.innerHTML="";var c=function(b){a.value=b.firstChild.value},d=function(b){a.value=b.lastChild.value},e=function(b){var d=b.querySelector(".paletteButton[selected]");d?d.nextSibling&&(a.value=d.nextSibling.value):c(b)},f=function(b){var c=b.querySelector(".paletteButton[selected]");c?c.previousSibling&&(a.value=c.previousSibling.value):d(b)};a.palettes.forEach(function(b){b.colors.length&&function(){var g=document.createElement("div");g.classList.add("palette"),g.classList.add("control-colorpicker"),g.innerHTML="<div class='name control-colorpicker'></div><div class='colorContainer control-colorpicker' tabindex = '0'></div>",a.$.paletteContainer.appendChild(g),g.querySelector(".name").textContent=b.name;var h=g.querySelector(".colorContainer");b.colors.forEach(function(b){var c=document.createElement("div");c.classList.add("paletteButton"),c.classList.add("control-colorpicker"),c.style.background="rgba("+b.r+","+b.g+","+b.b+","+b.a+")",c.value=b,h.appendChild(c),c.addEventListener("click",function(b){return a.value=this.value,a._notifyValueChanged(),b.preventDefault(),b.cancelBubble=!0,!1})}),h.addEventListener("keydown",function(b){var g=!1;switch(b.keyCode){case 37:case 38:f(this),g=!0;break;case 39:case 40:e(this),g=!0;break;case 33:c(this),g=!0;break;case 34:case 35:d(this),g=!0;break;case 36:c(this),g=!0;break;case 13:a._notifyValueChanged(),g=!0}return g&&b.preventDefault(),!g})}()}),a._valueChanged()},_valueChanged:function(){for(var a=this.$.paletteContainer.querySelectorAll(".paletteButton"),b=0;b<a.length;b++){var d=a[b];c.isEqual(d.value,this.value)?d.setAttribute("selected",""):d.removeAttribute("selected")}}})}()}}}),a.register("13c",[],function(){return{setters:[],execute:function(){}}}),a.register("13d",["a7","d0","13b","13c"],function(a,b){"use strict";return{setters:[function(a){},function(a){},function(a){},function(a){}],execute:function(){!function(){function a(a,b){b?a.setAttribute("disabled","disabled"):a.removeAttribute("disabled")}function b(a,b){a.style.left=a.style.top="auto";var c=b.getBoundingClientRect(),d=a.getBoundingClientRect();a.style.top=a.offsetTop-(d.top-c.bottom)+"px",d=a.getBoundingClientRect();var e={left:0,top:0,right:window.innerWidth,bottom:window.innerHeight};d.right>e.right&&(a.style.left=a.offsetLeft-(d.right-e.right)+"px"),d.bottom>e.bottom&&(a.style.top=a.offsetTop-(d.bottom-e.bottom)+"px"),d.top<e.top&&(a.style.left=a.offsetLeft-(e.left-d.left)+"px"),d.left<e.left&&(a.style.top=a.offsetTop-(e.top-d.top)+"px")}window.Polymer({is:"control-colorbutton",properties:{value:{reflectToAttribute:!0,type:Object,value:{r:0,g:0,b:0,a:1},notify:!0,observer:"_valueChanged"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},palettes:{reflectToAttribute:!1,readOnly:!1,type:Array,value:null,notify:!0,observer:"_paletteChanged"}},attached:function(){var a=this;a.value=a.value||{r:0,g:0,b:0,a:1},a.$.colorPicker.palettes=a.palettes;var c=function(){b(a.$.colorPicker,a.$.colorButton)},d=function(a,b){for(var c=!1,d=a;d&&!c;)c=d===b,d=d.parentNode;return c},e=function(b){var c=d(b.target,a.$.colorPicker);return c||(b.preventDefault(),g(!1)),c},f=function(b){27===b.keyCode&&(g(!1),a.$.colorPicker.value=a.value)},g=function(d){d?(a.$.colorbox.setAttribute("active",""),b(a.$.colorPicker,a.$.colorButton),window.addEventListener("resize",c),window.addEventListener("mousedown",e),window.addEventListener("touchstart",e),a.$.colorPicker.addEventListener("keydown",f)):(a.$.colorbox.removeAttribute("active"),window.removeEventListener("resize",c),window.removeEventListener("mousedown",e),window.removeEventListener("touchstart",e),a.$.colorPicker.removeEventListener("keydown",f))};a.$.colorButton.addEventListener("click",function(b){if(!d(b.target,a.$.colorPicker))return g(!a.$.colorbox.hasAttribute("active")),b.preventDefault(),b.cancelBubble=!0,!1}),a.$.colorPicker.onValueChange=function(){a.value=a.$.colorPicker.value,a._notifyValueChanged(),g(!1)}},set title(a){this.$.colorbox.title=a},get title(){return this.$.colorbox.title},_notifyValueChanged:function(){this.onValueChange&&this.onValueChange(this.value)},_disabledChanged:function(){a(this.$.colorbox,this.disabled||this.contextDisabled)},_labelChanged:function(){this.$.labelText.innerHTML=this.label,0===this.label.length?this.$.multisimDropdownWrapper.classList.add("noLabel"):this.$.multisimDropdownWrapper.classList.remove("noLabel")},_valueChanged:function(){this.$.colorbox.style.background="rgba("+this.value.r+","+this.value.g+","+this.value.b+","+this.value.a+")",this.$.colorPicker.value=this.value},_paletteChanged:function(){this.$.colorPicker.palettes=this.palettes}})}()}}}),a.register("13e",[],function(){return{setters:[],execute:function(){}}}),a.register("13f",["a7","13d","13e"],function(a,b){"use strict";return{setters:[function(a){},function(a){},function(a){}],execute:function(){!function(){window.Polymer({is:"multisim-color",properties:{value:{reflectToAttribute:!0,type:Object,value:{r:0,g:0,b:0,a:1},notify:!0,observer:"_valueChanged"},label:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_labelChanged"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},palettes:{reflectToAttribute:!1,readOnly:!1,type:Array,value:null,notify:!0,observer:"_paletteChanged"}},get visible(){return!this._commandContextHelper||this._commandContextHelper.testContextVisible()},attached:function(){var a=this;a.$.colorButton.palettes=a.palettes,a.$.colorButton.onValueChange=function(){a.value=a.$.colorButton.value,a._notifyValueChanged()}},init:function(a,b){var c=this;c._commandContextHelper=a,c.value=b||{r:0,g:0,b:0,a:1},this._valueChanged()},_commandContextHelper:null,set commandContextHelper(a){var b=this,c=function(){var a=b._commandContextHelper.testContextEnabled();a==b.contextDisabled&&(b.contextDisabled=!a,b.$.colorButton.disabled=b.disabled||b.contextDisabled)};a!=b._commandContextHelper&&(b._commandContextHelper&&b._commandContextHelper.removeContextChangeListener(c),b._commandContextHelper=a,b._commandContextHelper&&b._commandContextHelper.addContextChangeListener(c)),c()},get commandContextHelper(){return this._commandContextHelper},set title(a){this.$.colorButton.title=a},get title(){return this.$.colorButton.title},_notifyValueChanged:function(){var a=this.behaviours?this.behaviours.onValueChange:this.onValueChange;a=a||this.onValueChange,a&&a.call(this,this.value),this.fire("changed")},_disabledChanged:function(){this.$.colorButton.disabled=this.disabled||this.contextDisabled},_labelChanged:function(){this.$.labelText.innerHTML=this.label,0===this.label.length?this.$.multisimColorWrapper.classList.add("noLabel"):this.$.multisimColorWrapper.classList.remove("noLabel")},_valueChanged:function(){this.$.colorButton.value=this.value},_paletteChanged:function(){this.$.colorButton.palettes=this.palettes}})}()}}}),a.register("140",[],function(){return{setters:[],execute:function(){}}}),a.register("bc",["a7","cb","2d","12","140"],function(a,b){"use strict";var c,d;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){d=a.isChildOrSelf},function(a){}],execute:function(){!function(){function a(a,b){b?(a.classList.add("disabled"),a.setAttribute("disabled","disabled")):(a.classList.remove("disabled"),a.removeAttribute("disabled"))}function b(a,b){var c=document.createElement("span"),d=document.createElement("paper-icon-button");return d.icon=a.id,d.style.color=a.color,c.appendChild(d),c.append(b),c}function e(a,c,d){for(var e=c.querySelectorAll(".option"),f=0;f<e.length;f++)e[f].parentNode.removeChild(e[f]);d.forEach(function(d){var e=document.createElement("div");if(e.classList.add("option"),e.classList.add("style-scope"),e.classList.add("multisim-dropdown"),e.value=d.value,d.icon){var f=b(d.icon,d.displayText);e.appendChild(f)}else{var g=document.createElement("span");g.innerHTML=d.displayText,e.appendChild(g)}if(d.descriptiveText){e.classList.add("double-height");var h=document.createElement("span");h.classList.add("descriptive"),h.innerHTML=d.descriptiveText,e.appendChild(h)}c.appendChild(e),e.addEventListener("mousedown",function(){var b=a.value;a.value=this.value,a._notifyValueChanged(b)})})}function f(a){var b=!0;if(k){var c=k.getBoundingClientRect();b=!(a.clientX>=c.left&&a.clientX<=c.right&&a.clientY>=c.top&&a.clientY<=c.bottom)}b&&(a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1)}function g(a){if(a.target!=k&&j[a.keyCode])return f(a),!1}function h(){window.addEventListener&&window.addEventListener("DOMMouseScroll",f,!1),l=window.onwheel,m=window.onmousewheel,n=document.onmousewheel,o=window.ontouchmove,p=document.onkeydown,window.onwheel=f,window.onmousewheel=f,document.onmousewheel=f,window.ontouchmove=f,document.onkeydown=g}function i(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",f,!1),window.onmousewheel=m,document.onmousewheel=n,window.onwheel=l,window.ontouchmove=o,document.onkeydown=p}var j={37:1,38:1,39:1,40:1},k=null,l=null,m=null,n=null,o=null,p=null;window.Polymer({is:"multisim-dropdown",properties:{value:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_valueChanged"},label:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_labelChanged"},options:{reflectToAttribute:!1,type:Array,value:[],notify:!0,observer:"_optionsChanged"},valid:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_validityChanged"},validator:{type:Object,value:null,observer:"_changeValidator"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},index:{reflectToAttribute:!0,type:Number,value:0},errorlabel:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_errorLabelChanged"},readonly:{reflectToAttribute:!0,type:Boolean,value:!1}},_changeValidator:function(){this._checkValidity(this.value)},get visible(){return!this._commandContextHelper||this._commandContextHelper.testContextVisible()},attached:function(){function a(a,b){a.style.left=a.style.top="auto";var c=b.getBoundingClientRect(),d=a.getBoundingClientRect();a.style.top=a.offsetTop-(d.top-c.bottom)+"px",d=a.getBoundingClientRect();var e={left:0,top:0,right:window.innerWidth,bottom:window.innerHeight};d.bottom>e.bottom&&(a.style.top=a.offsetTop-(d.bottom-e.bottom)+"px"),d.top<e.top&&(a.style.left=a.offsetLeft-(e.left-d.left)+"px")}var b=this,c=function(){var a=b.$.dropDownContent.querySelector(".option[selected]");if(a){var c=a.getBoundingClientRect(),d=b.$.dropDownContent.getBoundingClientRect();c.bottom>d.bottom&&(b.$.dropDownContent.scrollTop=b.$.dropDownContent.scrollTop+c.bottom-d.bottom),c.top<d.top&&(b.$.dropDownContent.scrollTop=b.$.dropDownContent.scrollTop+c.top-d.top)}},e=function(){for(var a=b.$.dropDownContent.querySelectorAll(".option"),c=-1,d=0;d<a.length;d++)if(a[d].hasAttribute("selected")){c=d;break}return c},g=function(a){var d=b.$.dropDownContent.querySelectorAll(".option"),g=function(a){var e=Math.min(d.length-1,Math.max(0,a));e<d.length&&(b.value=d[e].value,b._notifyValueChanged(),b._checkValidity(b.value)),c()},h=!1;switch(a.keyCode){case 37:case 38:g(e()-1),h=!0;break;case 39:case 40:g(e()+1),h=!0;break;case 33:g(e()-b.$.dropDownContent.offsetHeight/d[0].offsetHeight|0),h=!0;break;case 34:g(e()+b.$.dropDownContent.offsetHeight/d[0].offsetHeight|0),h=!0;break;case 35:g(b.options.length),h=!0;break;case 36:g(0),h=!0;break;case 13:l(),h=!0}if(h)return f(a),!1},j=function(){b.$.dropDownContent.style.top="auto",b.$.dropDownContent.classList.add("active");var d=b.$.inputDiv.getBoundingClientRect(),e=!1,f=d.height*b.options.reduce(function(a,b){var c=1;return b.descriptiveText&&(c=2,e=!0),a+c},0);b.$.dropDownContent.style.minHeight=Math.min(f,window.innerHeight/2)+(e?5:1)+"px",b.$.dropDownContent.style.minWidth=b.$.dropDownBox.offsetWidth-4+"px",b.$.dropDownContent.style.maxWidth=d.width+"px",b.$.dropDownContent.style.maxHeight=.75*window.innerHeight+"px",a(b.$.dropDownContent,b.$.dropDownBox),k=b.$.dropDownBox,h(),c(),window.addEventListener("mousedown",m),window.addEventListener("touchstart",m)},l=function(){b.$.dropDownContent.classList.remove("active"),i(),window.removeEventListener("mousedown",m),window.removeEventListener("touchstart",m)};b.$.dropDownBox.addEventListener("click",function(){b.$.dropDownContent.classList.contains("active")?l():j()});var m=function(a){var c=d(a.target,b.$.dropDownBox);return c||(a.preventDefault(),l()),c};b.$.dropDownBox.addEventListener("focus",function(){b.$.dropDownBox.addEventListener("keydown",g)}),b.$.dropDownBox.addEventListener("blur",function(){b.$.dropDownBox.removeEventListener("keydown",g),b.$.dropDownContent.classList.contains("active")&&l()})},init:function(a,b,c){var d=this;d.options=a,d._commandContextHelper=b,d.value=c||null,e(this,this.$.dropDownContent,this.options),this._valueChanged()},_commandContextHelper:null,set commandContextHelper(b){var c=this,d=function(){var b=c._commandContextHelper.testContextEnabled();b==c.contextDisabled&&(c.contextDisabled=!b,a(c.$.dropDownBox,c.disabled||c.contextDisabled))};b!=c._commandContextHelper&&(c._commandContextHelper&&c._commandContextHelper.removeContextChangeListener(d),c._commandContextHelper=b,c._commandContextHelper&&c._commandContextHelper.addContextChangeListener(d)),d()},get commandContextHelper(){return this._commandContextHelper},set title(a){this.$.dropDownBox.title=a},get title(){return this.$.dropDownBox.title},_optionsChanged:function(){e(this,this.$.dropDownContent,this.options),this._valueChanged()},_validityChanged:function(){this.valid?(this.$.dropDownBox.classList.remove("invalid"),this.$.errorContainer.style.display="none"):(this.$.dropDownBox.classList.add("invalid"),0!==this.errorlabel.length?this.$.errorContainer.style.display="":this.$.errorContainer.style.display="none")},_checkValidity:function(a){var b=this;this.validator?this.validator(a,function(a){b.errorlabel=a.errorMessage?a.errorMessage:"",b.valid=a.valid}):(this.errorlabel="",this.valid=!0)},triggerValueChanged:function(a){this.userChange=!0,this._checkValidity(this.value),this._notifyValueChanged(a)},_notifyValueChanged:function(a){this.onValueChange&&this.onValueChange(this.value,a)},_disabledChanged:function(){var b=this.disabled||this.contextDisabled;a(this.$.dropDownBox,b),this.fire("disabledChanged",{newValue:b})},validate:function(){this._checkValidity(this.value)},_labelChanged:function(){this.$.labelText.innerHTML=this.label,0===this.label.length?this.$.multisimDropdownWrapper.classList.add("noLabel"):this.$.multisimDropdownWrapper.classList.remove("noLabel")},_valueChanged:function(a,d){for(var e=this.$.dropDownBox.querySelectorAll(".option"),f=0;f<e.length;f++)if(c.isEqual(e[f].value,this.value)){e[f].setAttribute("selected","");var g=this.options[f];g.icon?(this.$.value.innerHTML="",this.$.value.appendChild(b(g.icon,g.displayText))):this.$.value.innerHTML=g.displayText}else e[f].removeAttribute("selected");this._checkValidity(this.value),this.fire("valueChanged",{newValue:this.value,oldValue:d})},_errorLabelChanged:function(){this.$.errorText.innerHTML=this.errorlabel}})}()}}}),a.register("141",[],function(){return{setters:[],execute:function(){}}}),a.register("142",["a7","143","141"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){c=a.EListControlType},function(a){}],execute:function(){window.Polymer({is:"multisim-list",properties:{value:{reflectToAttribute:!0,type:String,value:[],notify:!0,observer:"_valueChanged"},label:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_labelChanged"},options:{reflectToAttribute:!1,type:Array,value:[],notify:!0,observer:"_optionsChanged"},valid:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_validityChanged"},validator:{type:Object,value:null,observer:"_changeValidator"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},type:{reflectToAttribute:!0,type:String,value:c.ELCT_MULTI_SELECT,notify:!0,observer:"_typeChanged"},index:{reflectToAttribute:!0,type:Number,value:0},errorlabel:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_errorLabelChanged"}},_typeChanged:function(){this.$.list.type=c.hasOwnProperty(this.type)?this.type:c.ELCT_MULTI_SELECT},_changeValidator:function(){this._checkValidity(this.value)},get visible(){return!this._commandContextHelper||this._commandContextHelper.testContextVisible()},attached:function(){var a=this;this.$.list.onValueChange=function(b,c){a._notifyValueChanged(b,c)}},_commandContextHelper:null,set commandContextHelper(a){var b=this,c=function(){var a=!b._commandContextHelper||b._commandContextHelper.testContextEnabled();a===b.contextDisabled&&(b.contextDisabled=!a,b.$.list.disabled=b.disabled||b.contextDisabled)};a!==b._commandContextHelper&&(b._commandContextHelper&&b._commandContextHelper.removeContextChangeListener(c),b._commandContextHelper=a,b._commandContextHelper&&b._commandContextHelper.addContextChangeListener(c)),c()},get commandContextHelper(){return this._commandContextHelper},set title(a){this.$.list.title=a},get title(){return this.$.list.title},_optionsChanged:function(){this.$.list.options=this.options,this._valueChanged()},_validityChanged:function(){this.$.list.valid=this.valid,this.valid?this.$.errorContainer.style.display="none":0!==this.errorlabel.length?this.$.errorContainer.style.display="":this.$.errorContainer.style.display="none"},_checkValidity:function(a){var b=this;this.validator?this.validator(a,function(a){b.errorlabel=a.errorMessage?a.errorMessage:"",b.valid=a.valid}):(this.errorlabel="",this.valid=!0)},_notifyValueChanged:function(a,b){this.value=a,this.onValueChange&&this.onValueChange(a,b)},_disabledChanged:function(){this.$.list.disabled=this.disabled||this.contextDisabled},validate:function(){this._checkValidity(this.value)},_labelChanged:function(){this.$.labelText.innerHTML=this.label,0===this.label.length?this.$.multisimListWrapper.classList.add("noLabel"):this.$.multisimListWrapper.classList.remove("noLabel")},_valueChanged:function(){this.$.list.value=Array.isArray(this.value)?this.value:[],this._checkValidity(this.value)},_errorLabelChanged:function(){this.$.errorText.innerHTML=this.errorlabel}})}}}),a.register("144",[],function(){return{setters:[],execute:function(){}}}),a.register("143",["a7","2d","144"],function(a,b){"use strict";function c(a,b){b?(a.classList.add("disabled"),a.setAttribute("disabled","disabled")):(a.classList.remove("disabled"),a.removeAttribute("disabled"))}function d(a,b){if("number"==typeof b){var c=a.$.listContent.querySelectorAll(".option"),d=Math.min(c.length-1,Math.max(0,b));b=d<c.length?c[d]:void 0}b&&b.hasAttribute("focus")||(Array.from(a.$.listContent.querySelectorAll(".option[focus]")).forEach(function(a){a.removeAttribute("focus")}),b&&b.setAttribute("focus",""))}function e(a,b,c){a._internalValues=b,a._updateValues(),c&&function(){var b=a.value;a.value=a._internalValues,setTimeout(function(){a._notifyValueChanged(b)})}()}function f(a,b,c){var d=a.options[b]?a.options[b].value:void 0;if(d){var f=!!a._internalValues.find(function(a){return a===d});c=c||!f,c?a.type!==j.ELCT_MULTI_SELECT?e(a,[d],a.type===j.ELCT_SINGLE_SELECT&&!i.isEqual(a.value,[d])):a._internalValues.find(function(a){return a===d})||e(a,a._internalValues.concat([d])):e(a,a._internalValues.filter(function(a){return a!==d}))}}function g(a,b,c){for(var f=b.querySelectorAll(".option"),g=0;g<f.length;g++)f[g].parentNode.removeChild(f[g]);c.forEach(function(c){var f=document.createElement("div");f.classList.add("option"),f.classList.add("style-scope"),f.classList.add("control-list"),f.value=c.value;var g=document.createElement("span");if(g.innerHTML=c.displayText,f.appendChild(g),c.descriptiveText){f.classList.add("double-height");var h=document.createElement("span");h.classList.add("descriptive"),h.innerHTML=c.descriptiveText,f.appendChild(h)}b.appendChild(f);var i=function(b){a.disabled||a.contextDisabled||(a.type===j.ELCT_MULTI_SELECT&&b.shiftKey?function(){var c=a._internalValues.length?a._internalValues[a._internalValues.length-1]:void 0;if(c){for(var d=a.options.findIndex(function(a){return a.value===c}),f=a.options.findIndex(function(a){return a.value===b.currentTarget.value}),g=d<f?1:-1,h=a._internalValues.slice(),i=function(b){var c=a.options[b];h.find(function(a){return c.value===a})||h.push(c.value)},j=d;j!==f+g;j+=g)i(j);e(a,h)}else e(a,[b.currentTarget.value])}():function(){var c=a.type===j.ELCT_MULTI_SELECT&&b.ctrlKey,d=c?a._internalValues.slice():[],f=b.currentTarget.value,g=d.findIndex(function(a){return a===f}),h=b instanceof MouseEvent||b.detail.sourceEvent instanceof MouseEvent;-1===g?(d.push(f),e(a,d,a.type!==j.ELCT_MULTI_SELECT&&(a.type!==j.ELCT_MULTI_DOUBLE_CLICK_BUTTON||"dblclick"===b.type||"tap"===b.type&&!h))):c&&(d.splice(g,1),e(a,d,a.type!==j.ELCT_MULTI_SELECT&&(a.type!==j.ELCT_MULTI_DOUBLE_CLICK_BUTTON||"dblclick"===b.type||"tap"===b.type&&!h)))}())};f.addEventListener("mousedown",i),a.type===j.ELCT_MULTI_DOUBLE_CLICK_BUTTON&&(f.addEventListener("dblclick",i),f.addEventListener("tap",i)),f.addEventListener("mouseenter",function(b){a.disabled||a.contextDisabled||d(a,b.currentTarget)})}),a._updateValues()}function h(a){var b=!0;if(k){var c=k.getBoundingClientRect();b=!(a.clientX>=c.left&&a.clientX<=c.right&&a.clientY>=c.top&&a.clientY<=c.bottom)}b&&(a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1)}var i,j,k;return{setters:[function(a){},function(a){i=a.default},function(a){}],execute:function(){a("EListControlType",j=Object.freeze({ELCT_SINGLE_SELECT:"ELCT_SINGLE_SELECT",ELCT_MULTI_SELECT:"ELCT_MULTI_SELECT",ELCT_MULTI_SINGLE_CLICK_BUTTON:"ELCT_MULTI_SINGLE_CLICK_BUTTON",ELCT_MULTI_DOUBLE_CLICK_BUTTON:"ELCT_MULTI_DOUBLE_CLICK_BUTTON"})),k=null,window.Polymer({is:"control-list",properties:{options:{reflectToAttribute:!1,type:Array,value:[],notify:!0,observer:"_optionsChanged"},value:{reflectToAttribute:!1,type:Array,value:[],notify:!0,observer:"_valueChanged"},type:{reflectToAttribute:!0,type:String,value:j.ELCT_MULTI_SELECT,notify:!0,observer:"_typeChanged"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},valid:{reflectToAttribute:!1,type:Boolean,value:!0,notify:!0,observer:"_validityChanged"},title:{reflectToAttribute:!0,type:String,value:""}},_internalValues:[],_tempShiftValues:[],_validityChanged:function(){this.valid?this.$.listContent.classList.remove("invalid"):this.$.listContent.classList.add("invalid")},_typeChanged:function(){},get visible(){return!this._commandContextHelper||this._commandContextHelper.testContextVisible()},getOptionForValue:function(a){return Array.from(this.$.listContent.querySelectorAll(".option")).find(function(b){return b.value===a})},ensureVisible:function(a){var b=this.getOptionForValue(a);if(b){var c=b.getBoundingClientRect(),d=this.$.listContent.getBoundingClientRect();c.bottom>d.bottom&&(this.$.listContent.scrollTop=this.$.listContent.scrollTop+c.bottom-d.bottom),c.top<d.top&&(this.$.listContent.scrollTop=this.$.listContent.scrollTop+c.top-d.top)}},handleKeyboardEvent:function(){},attached:function(){var a=this,b=-1;k=this.$.listContent;var c=function(){return Array.from(a.$.listContent.querySelectorAll(".option")).findIndex(function(a){return a.hasAttribute("focus")})},g=function(g){if(!this.disabled&&!this.contextDisabled){var i={keyCode:g.keyCode,srcEvent:g},k="keyup"===i.srcEvent.type,l=a.$.listContent.querySelectorAll(".option"),m=!1,n=c();if(k)switch(i.keyCode){case 16:b=-1,a._internalValues=a._internalValues.concat(a._tempShiftValues.filter(function(b){return!a._internalValues.find(function(a){return a===b})})),a._tempShiftValues=[],a._updateValues()}else if(a.keydownRedirect&&(m=a.keydownRedirect(i)),!m)switch(i.keyCode){case 16:a.type===j.ELCT_MULTI_SELECT&&(b=n);break;case 37:case 38:d(a,c()-1),a.type!==j.ELCT_MULTI_SELECT&&f(a,c(),!0),m=!0;break;case 39:case 40:d(a,c()+1),a.type!==j.ELCT_MULTI_SELECT&&f(a,c(),!0),m=!0;break;case 33:d(a,c()-a.$.listContent.offsetHeight/l[0].offsetHeight|0),a.type!==j.ELCT_MULTI_SELECT&&f(a,c(),!0),m=!0;break;case 34:d(a,c()+a.$.listContent.offsetHeight/l[0].offsetHeight|0),a.type!==j.ELCT_MULTI_SELECT&&f(a,c(),!0),m=!0;break;case 35:d(a,a.options.length),a.type!==j.ELCT_MULTI_SELECT&&f(a,c(),!0),m=!0;break;case 36:d(a,0),a.type!==j.ELCT_MULTI_SELECT&&f(a,c(),!0),m=!0;break;case 13:e(a,a._internalValues,!0),m=!0;break;case 32:a.type===j.ELCT_MULTI_SELECT&&f(a,c()),m=!0}var o=c(),p=a.options[o];if(p&&a.ensureVisible(p.value),a.type===j.ELCT_MULTI_SELECT&&-1!==b&&16!==i.keyCode){var q=b<=o?1:-1;a._tempShiftValues=[];for(var r=b;r!==o+q;r+=q)a._tempShiftValues.push(a.options[r].value);a._updateValues()}if(m)return h(i.srcEvent),i.srcEvent.cancelBubble=!0,!1}};a.handleKeyboardEvent=g,a.$.listContent.addEventListener("focus",function(){a.$.listContent.addEventListener("keydown",g),a.$.listContent.addEventListener("keyup",g)}),a.$.listContent.addEventListener("blur",function(){a.$.listContent.removeEventListener("keydown",g),a.$.listContent.removeEventListener("keyup",g),e(a,a._internalValues,(a.type===j.ELCT_MULTI_SELECT||a.type===j.ELCT_SINGLE_SELECT)&&!i.isEqual(a.value,a._internalValues))}),a.$.listContent.addEventListener("mouseleave",function(){a.disabled||a.contextDisabled||d(a,null)})},focus:function(){this.$.listContent.focus()},init:function(a,b,c){var d=this;d.options=a,d._commandContextHelper=b,d.value=c||null,g(this,this.$.listContent,this.options)},_commandContextHelper:null,set commandContextHelper(a){var b=this,d=function(){var a=b._commandContextHelper.testContextEnabled();a===b.contextDisabled&&(b.contextDisabled=!a,c(b.$.listContent,b.disabled||b.contextDisabled))};a!==b._commandContextHelper&&(b._commandContextHelper&&b._commandContextHelper.removeContextChangeListener(d),b._commandContextHelper=a,b._commandContextHelper&&b._commandContextHelper.addContextChangeListener(d)),d()},get commandContextHelper(){return this._commandContextHelper},_optionsChanged:function(){g(this,this.$.listContent,this.options)},_disabledChanged:function(){c(this.$.listContent,this.disabled||this.contextDisabled)},_notifyValueChanged:function(a){this.onValueChange&&this.onValueChange(this.value,a)},_updateValues:function(){var a=this;this._internalValues=this._internalValues.filter(function(b){return a.options.find(function(a){return a.value===b})}),Array.from(this.$.listContent.querySelectorAll(".option")).forEach(function(b){a._internalValues.find(function(a){return b.value===a})||a._tempShiftValues.find(function(a){return b.value===a})?b.setAttribute("selected",""):b.removeAttribute("selected")})},_valueChanged:function(){this._internalValues=this.value.slice(),this._updateValues()}}),a("EListControlType",j)}}}),a.register("145",[],function(){return{setters:[],execute:function(){}}}),a.register("146",["a7","bc","142","143","145"],function(a,b){"use strict";function c(a,b){return a.filterOptions.find(function(a){return a.value===b})}function d(a){var b=c(a,a.$.filterdropdown.value);a.$.list.options=b&&b.filter?a.options.filter(function(a,c,d){return b.filter(a,c,d,b)}):a.options.slice()}var e;return{setters:[function(a){},function(a){},function(a){},function(a){e=a.EListControlType},function(a){}],execute:function(){window.Polymer({is:"multisim-dropdown-filtered-list",properties:{filterOptions:{reflectToAttribute:!1,type:Array,value:[],notify:!0,observer:"_filterOptionsChanged"},options:{reflectToAttribute:!1,type:Array,value:[],notify:!0,observer:"_optionsChanged"},type:{reflectToAttribute:!0,type:String,value:e.ELCT_SINGLE_SELECT,notify:!0,observer:"_typeChanged"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"}},_typeChanged:function(){this.$.list.type=this.type},_disabledChanged:function(){this.$.list.disabled=this.disabled,this.$.filterdropdown.disabled=this.disabled},_optionsChanged:function(){d(this)},_filterOptionsChanged:function(){this.$.filterdropdown.options=this.filterOptions,this.$.filterdropdown.options.length&&(this.$.filterdropdown.value=this.$.filterdropdown.options[0].value,d(this))},attached:function(){var a=this;this.$.filterdropdown.onValueChange=function(){d(a)}},get list(){return this.$.list},set commandContextHelper(a){this.$.list.commandContextHelper=a,this.$.filterdropdown.commandContextHelper=a},get commandContextHelper(){return this.$.list.commandContextHelper}})}}}),a.register("147",[],function(){return{setters:[],execute:function(){}}}),a.register("148",["a7","147"],function(a,b){"use strict";return{setters:[function(a){},function(a){}],execute:function(){(function(a){a({is:"multisim-group-box",properties:{title:String}})}).apply(this,[window.Polymer])}}}),a.register("149",[],function(){return{setters:[],execute:function(){}}}),a.register("14a",[],function(){return{setters:[],execute:function(){}}}),a.register("14b",[],function(){return{setters:[],execute:function(){}}}),a.register("14c",["a7","149","14a","14b"],function(a,b){"use strict";return{setters:[function(a){},function(a){},function(a){},function(a){}],execute:function(){!function(){window.Polymer({is:"probe-reference-list",properties:{label:{type:String,observer:"_labelChanged",notify:!0},list:{type:Array,observer:"_listValueChanged",notify:!0,value:function(){return[]}}},initialize:function(a){this.activeViewGetter=a},_listValueChanged:function(){},_labelChanged:function(){},getProbeColor:function(a){if(a){var b=this.activeViewGetter();return"background-color: "+b.sheetTemplateController.design.findInstance(b.contextGUID,a).getColorAsRGBAString()}},getProbeId:function(a){if(a){var b=this.activeViewGetter();return b.sheetTemplateController.design.findInstance(b.contextGUID,a).probeID}},updateList:function(a){var b=this;this.splice("list",0,this.list.length),a.forEach(function(a){b.push("list",{probeGUID:a.templateGUID})})}})}()}}}),a.register("61",[],function(a,b){"use strict";function c(){window.requestInfo&&window.requestInfo.intercomInfo&&window.requestInfo.intercomInfo.INTERCOM_IS_VALID&&function(){var a=window.requestInfo.intercomInfo.app_id,b=window.Intercom,c=function(){var b=document.createElement("script");b.type="text/javascript",b.async=!0,b.src="https://widget.intercom.io/widget/"+a;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)};"function"==typeof b?(b("reattach_activator"),b("update",{app_id:a})):function(){var a=function a(){a.c(arguments)};a.q=[],a.c=function(b){a.q.push(b)},window.Intercom=a,c()}()}()}function d(){var a=window.requestInfo.intercomInfo;window.Intercom&&a&&a.INTERCOM_IS_VALID&&(window.Intercom("update",{app_id:a.app_id,name:a.name,user_id:a.user_id,user_hash:a.user_hash,email:a.email,hide_default_launcher:!0}),window.Intercom("hide"))}var e;return{setters:[],execute:function(){e={initialize:function(){c(),d()},notifyTracker:function(a,b){window.Intercom&&window.Intercom("trackEvent",a,b)}},a("default",e)}}}),a.register("80",["29"],function(a,b){"use strict";function c(a){var b=a;return b=b.replace(/V\(([^#]*?)\)/gi,"$$$1"),b=b.replace("$0","0"),b=b.replace(/I\(([^#]*?)\)/gi,"v$1#branch")}function d(a){var b=a.trim();return b=b.replace(/\s+/gi," "),b=b.replace(/([^a-zA-Z0-9_)])\s((?=[a-zA-Z0-9_]))/gi,"$1$2"),b=b.replace(/([a-zA-Z0-9_])\s((?![a-zA-Z0-9_]))/gi,"$1$2"),b=b.replace(/([^a-zA-Z0-9_])\s((?![a-zA-Z0-9_]))/gi,"$1$2")}function e(a,b){return b.getObject(a.templateGUID).probeType}function f(a){var b=new Map;return a.probeData.probes.forEach(function(a){b.set(a.probeID.toLowerCase(),a)}),b}function g(a,b,c,d){var e=function(a,e){var f=a.replace(/[VI]\(#(.*?)\)/gi,"$1").toLowerCase(),g=a.replace(/([VI])\(#(.*?)\)/gi,"$1").toLowerCase();if(b.has(f)){var h=b.get(f),i=(e?d:c)(h,"i"===g);if(i){if(e){var j=f+": ";i.toLowerCase().startsWith(j)&&(i=i.substr(j.length))}return i=i.replace(/^([^(].*?[+-].*)$/i,"($1)")}return"0"}return"0"},f=function(a){return e(a,!1)},g=function(a){return e(a,!0)};return{displayExpression:a.replace(/([VI]\(#.*?\))/gi,g),spiceExpression:a.replace(/([VI]\(#.*?\))/gi,f)}}function h(a,b){return void 0===b&&(b=!1),{valid:b,errorMessage:a}}function i(a){var b={valid:!0},c=d(a),e="start",f=[],g=function(a,b,c,d){var e={token:a,kind:b,children:[],parent:c,charIndex:d};return null!==c&&void 0!==c&&c.children.push(e),f.push(e),e},i=g("","sentinel",null),j=g("","sentinel",i),k=function(a){if(a.parent!==i){var b=a,c=b.parent;"scope"===c.kind&&"identifier"===c.parent.kind&&(c=c.parent);var d=c.parent;"unary operator"===d.kind&&(c=d,d=d.parent),d.children[d.children.indexOf(c)]=b,b.parent.children.splice(b.parent.children.indexOf(b),1),b.children.push(c),c.parent=b,b.parent=d}},m=function(a,b){var c=1;if(b)c=1;else switch(a){case"^":c=2;break;case"!":c=3;break;case"*":case"/":case"%":c=4;break;case"+":case"-":c=5;break;case"<":case"<=":case">":case">=":c=6;break;case"==":case"!=":c=7;break;case"&&":c=8;break;case"||":c=9}return c},n=function a(b){var c=b.parent,d=null!==c?c.parent:null,e=!1;if(null!==d&&null!==c){var f=m(b.token),g=m(c.token);if(f>=g&&"operator"===b.kind&&"operator"===c.kind&&2===c.children.length){var h=c.children[0],i=c.children[1];if(h===b&&f>g){var j=h.children[1];d.children[d.children.indexOf(c)]=h,h.children[h.children.indexOf(j)]=c,c.children[c.children.indexOf(h)]=j,h.parent=d,c.parent=h,j.parent=c,e=!0}else if(i===b&&f>=g){var k=i.children[0];d.children[d.children.indexOf(c)]=i,i.children[i.children.indexOf(k)]=c,c.children[c.children.indexOf(i)]=k,i.parent=d,c.parent=i,k.parent=c,e=!0}}}if(e)a(b);else for(var l=0;l<b.children.length;l++)a(b.children[l])},o=0,p=void 0,q=void 0,r=function(a,b,c){var d={valid:!0};if("scope"===b&&o++,"scope end"===b)if(--o<0)d=h(l.i18n.translate("Mismatched brackets").fetch());else{for(;"scope"!==j.kind||j.scopeClosed;)j=j.parent;j.scopeClosed=!0,q=p,p=j}else"separator"===b?"scope"===j.kind&&j.children.Length>1&&void 0===j.children[j.children.Length-1].seperated?j.children[j.children.Length-1].seperated=!0:d=h(l.i18n.translate('Unexpected "%1$s"').fetch(a)):"operator"!==b&&void 0!==p&&"scope"===p.kind&&p.scopeClosed?d=h(l.i18n.translate("Missing operator before bracket").fetch()):"scope"===b&&"operator"===j.kind&&1===j.children.length?(j=g(a,b,j,c),q=p,p=j):"scope"===b||"operator"===b?(void 0===p||"scope"===p.kind&&!0!==p.scopeClosed||("operator"===p.kind||"unary operator"===p.kind)&&("!"===a||"-"===a||"+"===a)?j=g(a,"operator"===b?"unary operator":b,j,c):(j=g(a,b,p,c),"operator"===b&&k(j)),q=p,p=j):(j=g(a,b,j,c),q=p,p=j);return d},s=/[\^%+\-*\/=!<>&|]/,t=/[0-9]/;if(b.valid){for(var u="",v=!1,w=0,x=0;x<c.length;x++){var y=c.charAt(x);if(y.match(/\s/)&&(b=h(l.i18n.translate("Missing operator").fetch())),y.match(/[,$\[\]]/)&&(b=h(l.i18n.translate("Invalid character: %1s").fetch(y))),!1===b.valid)break;var z=y.toLowerCase(),A=!1,B=!1,C=!1;switch(void 0!==p&&void 0!==q&&q.token.match(/^[viVI]$/)&&"("===p.token&&(C=!0),e){case"start":w=x,"("===z?(e="scope",A=!0):")"===z?(e="scope end",A=!0):z.match(t)?e="coefficient":z.match(s)?e="operator":"#"===z?e="probe":","===z?(e="separator",A=!0):e="identifier";break;case"coefficient":"."===z?e="base":z.match(t)||("e"===z?e="exponent sign":"("===z?b=h(l.i18n.translate("Missing operator before bracket").fetch()):"("===z||")"===z||z.match(/\s/gi)||z.match(s)&&!C?(A=!0,B=!0):e="identifier");break;case"base":"e"===z?e="exponent sign":z.match(t)||("("===z?b=h(l.i18n.translate("Missing operator before bracket").fetch()):"("===z||")"===z||z.match(/\s/gi)||z.match(s)&&!C?(A=!0,B=!0):e="identifier");break;case"exponent sign":z.match(t)||"+"===z||"-"===z?e="exponent":"("===z?b=h(l.i18n.translate("Missing operator before bracket").fetch()):"("===z||")"===z||z.match(/\s/gi)||z.match(s)&&!C?(A=!0,B=!0):e="identifier";break;case"exponent":z.match(t)||("("===z?b=h(l.i18n.translate("Missing operator before bracket").fetch()):"("===z||")"===z||z.match(/\s/gi)||z.match(s)&&!C?(A=!0,B=!0):e="identifier");break;case"identifier":(")"===z||"("===z||","===z||z.match(s)&&!C||z.match(/\s/gi))&&(A=!0,B=!0);break;case"probe":(")"===z||"("===z||","===z||z.match(/\s/gi))&&(A=!0,B=!0);break;case"operator":("+"===z||"-"===z||"!"===z)&&u.length>0?(A=!0,B=!0):z.match(s)||(A=!0,B=!0);break;default:b=h("Parse failure, unknown state")}if(x===c.length-1&&(A=!0),B||(u+=y),A&&(b=r(u,e,w),u="",e="start"),b.valid&&B?(v&&(b=h("Parse failure, infinite loop")),x--,v=!0):v=!1,!1===b.valid)break}b.valid&&0!==o&&(b=h(l.i18n.translate("Mismatched brackets").fetch()))}return n(i),b.nodes=f,b}function j(a,b,c,d,e,f,g){var j=i(a),k=function a(g){var i=!1,j={valid:!0},k=g.parent,m=null!==g.parent?g.parent.parent:null,n=g.children.length>=1&&"scope"===g.children[0].kind?g.children[0].children:null;if(g.children.length>1&&"scope"!==g.kind&&"operator"!==g.kind&&(j=h(l.i18n.translate("Missing operator").fetch())),j.valid&&g.children.length>2&&"scope"!==g.kind&&(j=h(l.i18n.translate("Missing operator").fetch())),j.valid&&"scope"===g.kind)if(0===g.children.length)j=h(l.i18n.translate("Empty brackets").fetch());else for(var o=0;o<g.children.length-2;o++)if(void 0===g.children[o].seperated){j=h(l.i18n.translate("Missing operator").fetch());break}if(j.valid&&"probe"===g.kind?"scope"===k.kind&&"identifier"===m.kind&&m.token.match(/[vViI]/)||(j=h(l.i18n.translate("Probe ID must be enclosed by V() or I()").fetch())):j.valid&&"identifier"===g.kind?null!==n&&n.length>0?("v"===g.token||"V"===g.token?"probe"===n[0].kind?(i=!0,void 0!==d&&(j=d(n[0].token.substr(1),g.token,!0),j.valid&&(g.kind="voltage function"))):(i=!0,void 0!==e&&(j=e(n[0].token,g.token),j.valid&&(g.kind="voltage function"))):"i"!==g.token&&"I"!==g.token||("probe"===n[0].kind?(i=!0,void 0!==d&&(j=d(n[0].token.substr(1),g.token,!0),j.valid&&(g.kind="current function"))):j=h(l.i18n.translate("Current only available through probes, use I(#PROBENAME)").fetch())),j.valid&&void 0!==b&&(j=b(g.token,n.length),j.valid&&(g.kind="function"))):g.children.length>0&&"scope"==g.children[0].kind?void 0!==b&&(j=b(g.token,0),j.valid&&(g.kind="function")):void 0!==c&&(j=c(g.token),j.valid&&(g.kind="constant")):j.valid&&"operator"===g.kind?void 0!==f&&(j=f(g.token,g.children.length,!1)):j.valid&&"unary operator"===g.kind&&void 0!==f&&(j=f(g.token,g.children.length,!0)),"exponent"!==g.kind&&"exponent sign"!==g.kind&&"base"!==g.kind&&"coefficient"!==g.kind||(g.kind="number"),j.valid)for(var p=i?1:0;p<g.children.length&&(j=a(g.children[p]),j.valid);p++);return j};if(void 0!==g&&null!==g&&(0===a.trim().length?(document.querySelector("g[id='"+g.templateGUID+"'] .nims_graphics").setAttribute("disabled","disabled"),g.disabled=!0):(document.querySelector("g[id='"+g.templateGUID+"'] .nims_graphics").removeAttribute("disabled"),g.disabled=!1)),j.valid){var m=j.nodes;j=k(m[0]),j.nodes=m}return j}function k(a,b){var c=function a(b){var c=function(a){return a.outerBrackets?a.expression:"("+a.expression+")"},d="",e=!1;switch(b.kind){case"sentinel":if(b.children.length>0){var f=a(b.children[0]);d=f.expression,e=f.outerBrackets}break;case"scope":if(1===b.children.length)d=c(a(b.children[0]));else{d="(";for(var g=0;g<b.children.length;g++)g>0&&(d+=","),d+=a(b.children[g]).expression;d+=")"}e=!0;break;case"voltage function":case"current function":case"function":d=b.token+a(b.children[0]).expression;break;case"operator":var h="";switch(b.token){case"<":h="lt";break;case"<=":h="le";break;case">":h="gt";break;case">=":h="ge";break;case"==":h="eq";break;case"!=":h="ne";break;case"&&":h="and";break;case"||":h="or"}d=""!==h?"("+c(a(b.children[0]))+h+c(a(b.children[1]))+")":"("+a(b.children[0]).expression+b.token+a(b.children[1]).expression+")",e=!0;break;case"unary operator":"+"===b.token?d=a(b.children[0]).expression:"-"===b.token?(d="("+b.token+a(b.children[0]).expression+")",e=!0):"!"===b.token&&(d="(not"+c(a(b.children[0]))+")",e=!0);break;default:d=b.token}return{expression:d,outerBrackets:e}};if(b.valid){var d=b.nodes,e=c(d[0]),f=e.expression;return e.outerBrackets&&(f=f.substring(1,f.length-1)),f}return a}var l;return a("makeSpiceExpressionFromNaturalExpression",c),a("cleanNaturalExpression",d),a("getProbeType",e),a("makeMapOfProbeIDToProbe",f),a("expandProbesInExpression",g),a("makeValidationError",h),a("validatePlotterExpression",j),a("transpilePlotterExpression",k),{setters:[function(a){l=a.default}],execute:function(){}}}),a.register("14d",[],function(){return{setters:[],execute:function(){}}}),a.register("eb",["14d"],function(a,b){"use strict";function c(a){return Math.PI*a/180}function d(a){return Math.round(a)+"px"}return{setters:[function(a){}],execute:function(){window.Polymer({is:"wait-spinner",properties:{circleradius:{type:Number,value:6,reflectToAttribute:!0},size:{type:Number,value:64,reflectToAttribute:!0}},observers:["_sizeChanged(size, circleradius)"],_sizeChanged:function(a,b){var e=a/2,f=e-b,g=[-90,-45,0,45,90,135,-180,-135].map(c).map(function(a){return{x:e+f*Math.cos(a),y:e+f*Math.sin(a)}}),h=d(a),i=d(b),j=d(2*b);this.$.spinContainer.style.width=h,this.$.spinContainer.style.height=h,window.Polymer.dom(this.root).querySelectorAll(".spinner-circle").forEach(function(a,c){a.style.width=j,a.style.height=j,a.style.borderRadius=i,a.style.left=d(g[c].x-b),a.style.top=d(g[c].y-b)})}})}}}),a.register("14e",[],function(){return{setters:[],execute:function(){}}}),a.register("14f",[],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return{setters:[],execute:function(){c="navigator"in window&&"userAgent"in window.navigator&&window.navigator.userAgent.toLowerCase()||"",d="navigator"in window&&"appVersion"in window.navigator&&window.navigator.appVersion.toLowerCase()||"",e=!!window.opr&&!!window.opr.addons||!!window.opera||window.navigator.userAgent.indexOf(" OPR/")>=0,f="undefined"!=typeof InstallTrigger,g=!!document.documentMode,h=!window.ActiveXObject&&"ActiveXObject"in window,i=!g&&!!window.StyleMedia,j=g||i,k=!!window.chrome&&"Google Inc."===window.navigator.vendor&&!e,l=(k||e)&&!!window.CSS,m=/iphone/i.test(c)||/ipad/i.test(c)||/ipod/i.test(c),n=/android/i.test(c),o=/linux/i.test(d),p=/mac/i.test(d),q=/win/i.test(d),r="ontouchstart"in window||"DocumentTouch"in window&&document instanceof window.DocumentTouch||window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0,s=/multisim.com/.test(document.location.hostname),t=void 0!==window.requestInfo,u=!s&&!t,v=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||!k&&!e&&void 0!==window.webkitAudioContext,w=window.self!==window.top,x=!1;try{x=window.top.location.hostname!==document.location.hostname}catch(a){x=!0}y=/android|webos|iphone|ipad|ipod|blackberry|windows phone|opera mini/i.test(navigator.userAgent||navigator.vendor||window.opera),z=m&&v,a("default",{isOpera:e,isFirefox:f,isSafari:v,isOldIE:g,isIE11:h,isEdge:i,isIE:j,isChrome:k,isBlink:l,isIos:m,isAndroid:n,isLinux:o,isMac:p,isWindows:q,isTouch:r,isMultisimCom:s,isWebsite:t,isLocal:u,isIFrame:w,isCrossDomain:x,isMobile:y,isiOSSafari:z})}}}),a.register("9e",["14f","150"],function(a,b){"use strict";function c(a){return a===k?m:k}function d(a){if(null===a)return"";if(a.type)return a.type;var b=a.candidate.split(" "),c=b.indexOf("typ"),d=b[c+1];return"host"===d||"srflx"===d||"prflx"===d||"relay"===d?d:""}function e(a,b,e){var f=d(b.candidate);f&&null!==n&&n.add(f);var g=c(a);g&&g.addIceCandidate(b.candidate).catch(function(a){a instanceof TypeError||e(a)})}function f(a,b){o&&b(new Error("The last checking is not complete yet")),n=new Set,o=!0,k=new RTCPeerConnection(null),l=k.createDataChannel("local"),k.onicecandidate=function(a){e(k,a,b)},k.addEventListener("icegatheringstatechange",function(c){if("complete"===c.target.iceGatheringState){if(null===n)return;!n.has("host")&&i.isMac?b(new Error(j.SafariNoHostCandidate)):a(),n.clear()}}),m=new RTCPeerConnection(null),m.onicecandidate=function(a){e(m,a,b)},k.createOffer().then(function(a){k.setLocalDescription(a),m.setRemoteDescription(a),m.createAnswer().then(function(a){m.setLocalDescription(a),k.setRemoteDescription(a)})})}function g(){l.close(),k.close(),m.close(),k=null,m=null,n=null,o=!1}function h(){return new Promise(function(a,b){f(a,b)}).then(function(){g()},function(a){throw g(),a})}var i,j,k,l,m,n,o;return a("checkLocalConnectionAsync",h),{setters:[function(a){i=a.default},function(a){j=a.DeviceError}],execute:function(){k=void 0,l=void 0,m=void 0,n=void 0,o=!1}}}),a.register("9d",[],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;return{setters:[],execute:function(){c="navigator"in window&&"userAgent"in window.navigator&&window.navigator.userAgent.toLowerCase()||"",d="navigator"in window&&"appVersion"in window.navigator&&window.navigator.appVersion.toLowerCase()||"",e=!!window.opr&&!!window.opr.addons||!!window.opera||window.navigator.userAgent.indexOf(" OPR/")>=0,f="undefined"!=typeof InstallTrigger,g=!!document.documentMode,h=!window.ActiveXObject&&"ActiveXObject"in window,i=!g&&!!window.StyleMedia,j=g||i,k=!!window.chrome&&"Google Inc."===window.navigator.vendor&&!e,l=(k||e)&&!!window.CSS,m=/iphone/i.test(c)||/ipad/i.test(c)||/ipod/i.test(c),n=/android/i.test(c),o=/linux/i.test(d),p=/mac/i.test(d),q=/win/i.test(d),r="ontouchstart"in window||"DocumentTouch"in window&&document instanceof window.DocumentTouch||window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0,s=/multisim.com/.test(document.location.hostname),t=void 0!==window.requestInfo,u=!s&&!t,v=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||!k&&!e&&void 0!==window.webkitAudioContext,w=/CriOS/i.test(c),x=/fxios/i.test(c),y=/OPiOS/i.test(c),z=window.self!==window.top,A=!1;try{A=window.top.location.hostname!==document.location.hostname}catch(a){A=!0}a("default",{isOpera:e,isFirefox:f,isSafari:v,isChromeIos:w,isFirefoxIos:x,isOperaIos:y,isOldIE:g,isIE11:h,isEdge:i,isIE:j,isChrome:k,isBlink:l,isIos:m,isAndroid:n,isLinux:o,isMac:p,isWindows:q,isTouch:r,isMultisimCom:s,isWebsite:t,isLocal:u,isIFrame:z,isCrossDomain:A})}}}),a.register("9f",["9d"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.default}],execute:function(){a("isSupportedStreamingBrowser",d=function(){var a=c.isChrome&&!c.isIos&&!c.isMac,b=c.isSafari&&!(c.isChromeIos||c.isFirefoxIos||c.isOperaIos);return a||b}),a("isSupportedStreamingBrowser",d),a("streamingWarningMessage",e=function(a){var b=c.isIos||c.isMac,d=b?"Safari":"Chrome";return"Streaming works with "+d+" only (on "+(b?"macOS or iOS":"Windows or Android")+"). Open "+a+" in "+d+"."}),a("streamingWarningMessage",e)}}}),a.register("81",["a7","106","2d","134","12f","c6","139","13f","146","b9","148","14c","105","29","61","22","23","80","eb","14e","32","30","33","1f","4f","9e","12","9d","9f"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.ProbeInstance,h=a.sourceType},function(a){i=a.validatePlotterExpression},function(a){},function(a){},function(a){j=a.default},function(a){k=a.default},function(a){l=a.SOCKET_STATES},function(a){m=a.ELogicFamily,n=a.LogicFamily},function(a){o=a.default},function(a){p=a.checkLocalConnectionAsync},function(a){q=a.getDoNotTrack},function(a){r=a.default},function(a){s=a.isSupportedStreamingBrowser,t=a.streamingWarningMessage}],execute:function(){a("expressionsList",u={expressions:[]}),a("expressionsList",u),a("variableList",v={variables:[]}),a("variableList",v),window.Polymer({is:"probe-properties",behaviors:[window.Polymer.InitializeHelp],properties:{simTypeUnsupportedFile:String,simTypeUnsupportedURL:String,supportedSimulation:String,reversed:Boolean,selectedPlot:String,stringID:String,stringDataType:String,stringFileType:String,stringFileSize:String,stringProbe:String,stringProbetype:String,stringType:String,stringFunction:String,stringFlipmeasurementdirection:String,stringProbeExpression:String,stringData:String,stringExpression:String,stringShowInstantaneous:String,stringShowPeriodic:String,stringShowDc:String,stringPlotproperties:String,stringColor:String,stringLineweight:String,stringInteractiveSimulation:String,stringDCOp:String,stringSchematicMeasurements:String,referencers:String,referenceSelect:String,stringShowPlots:String,stringVariables:String,stringFunctions:String,isPremium:{type:Boolean,value:!1,observer:"_handlePremiumStateChanged"},stringPremiumOnly:String,stringPremiumOnlyData:String,premiumOnlyProbeMessage:{type:Boolean,value:!1},uploadFile:String,loadWaitMsg:String,waitScreen:{reflectToAttribute:!1,type:Object,value:null},connectString:String,closeString:String,connectingString:String,urlInvalidString:String,networkAddressInvalidString:String,connectionCanceledString:String,urlConnectPlaceholdString:String,networkConnectPlaceholdString:String,stringCancelling:String,stringCancel:String,stringPopupWindow:String,stringUsbErrorMsg:String,cancelButtonString:String,stringLogicLevels:String,stringUseDocumentSettings:String,stringStreamProperties:String,stringStreamToMeasurementsLive:String,streamingDisabled:{type:Boolean,value:!1}},fileDataController:null,_handlePremiumStateChanged:function(){this.premiumOnlyProbeMessage=!this.isPremium,this.commandInterface&&(this.$.expression.commandContextHelper=this.commandInterface.createCommandContextHelper({disable:"all",enable:this.isPremium?null:"none"}),this.$.variablesList.commandContextHelper=this.commandInterface.createCommandContextHelper({disable:"all",enable:this.isPremium?null:"none"}),this.$.functionsList.commandContextHelper=this.commandInterface.createCommandContextHelper({disable:"all",enable:this.isPremium?null:"none"}),this.$.channelList.commandContextHelper=this.commandInterface.createCommandContextHelper({disable:"all",enable:this.isPremium?null:"none"}),this.$.uploadFile.commandContextHelper=this.commandInterface.createCommandContextHelper({disable:"all",enable:this.isPremium?null:"none"}))},attached:function(){var a=this,b=void 0;this.$.variablesList.options=v.variables;var d=function(a,b,c,d){return!d.value||a.type===d.value};this.$.variablesList.filterOptions=[{value:null,filter:d,displayText:"All"},{value:"probe",filter:d,displayText:"Probes"},{value:"net",filter:d,displayText:"Nets"}];var e=null,f=function(c){c=Array.isArray(c)?c.length?c[0]:"":c,a.$.expression.value=b?a.$.expression.value.slice(0,b.start)+c+a.$.expression.value.slice(b.end):c,a.$.expression.setSelectionRange((b?b.start:0)+c.length),a.$.expression.focus(),b={start:a.$.expression.selectionStart,end:a.$.expression.selectionEnd},e&&e.doFindSuggestions(null,b),a.$.expression.triggerValueChanged()};this.$.functionsList.list.onValueChange=f,this.$.variablesList.list.onValueChange=f,this.$.expression.onblur=function(){b={start:a.$.expression.selectionStart,end:a.$.expression.selectionEnd}},this.$.expression.onAutoCompleteReady=function(a){e=a,e.onSuggestionApplied=function(a,b){e.doFindSuggestions(null,b)},e.getAutoComplete=function(a,b,d){var e={matches:[],offset:0};if(b.start>0){var f=a.substring(0,b.start),g=function(a){var b=c.clone(a);return delete b.descriptiveText,b},h=f.match(/(?:^|\W)([VI]|[VI]\([^)\r\n]*)$/i);if(h&&h.length>1)!function(){var a=h[1].toLowerCase();e.matches=v.variables.filter(function(b){return 0===b.value.toLowerCase().indexOf(a)}).map(g),e.offset=h[1].length}();else{var i=f.search(/\w+\($/gi);-1!==i?function(){var a=f.substring(i);u.expressions.find(function(b){return b.value===a})&&(e.matches=v.variables.concat(u.expressions.filter(function(a){return"constant"===a.type})).map(g),e.offset=0)}():function(){var a=f.match(/(?:^|\W)(\w+)$/i);a&&a.length>1&&function(){var b=a[1].toLowerCase();e.matches=u.expressions.filter(function(c){return 0===c.value.toLowerCase().indexOf(b)&&c.value.length>a[1].length}).map(g),e.offset=a[1].length}()}()}}d(e)}}},getAnalysisTextLocal:null,simulationController:null,updateProbeEnableStatus:null,_loadSmallHelp:function(a,b){var c=!s(),d=t("Multisim Live");this.streamingDisabled=a||b||c,this.$.streamingSmallHelp.parameter=c?d:a||b?"StreamingDisabled":"Streaming",this.behaviors[0]._initializeHelpAsync(this,window.multisim.rootFolder+"resources/help_en/help-probes.json").then(this.$.logicLevel.initializeHelp())},_checkAndLoadSmallHelp:function(){var a=this,b="yes"===q(),c=!1,d=null;r.isMac&&(d=p().then(function(){},function(){c=!0})),d instanceof Promise?d.then(function(){a._loadSmallHelp(b,c)}):this._loadSmallHelp(b,c)},initialize:function(a,b,c){var e=this,g=this,i=new XMLHttpRequest;i.onload=function(){var a=JSON.parse(i.responseText).functions;e.$.functionsList.options=a,u.expressions=a.slice();var b=function(a,b,c,d){return!d.value||a.group===d.value},c=[{value:null,filter:b,displayText:"All"}];u.expressions.forEach(function(a){c.find(function(b){return b.value===a.group})||c.push({filter:b,value:a.group,displayText:a.group})}),e.$.functionsList.filterOptions=c},i.open("get",window.multisim.rootFolder+"resources/expressions.json"),i.send(),d.addReadyListener(function(a){g.source=a.i18n.translate("Source").fetch(),g.stringID=a.i18n.translate("ID").fetch(),g.simTypeUnsupportedFile=a.i18n.translate("Selected simulation type does not match uploaded simulation data").fetch(),g.simTypeUnsupportedURL=a.i18n.translate("Data streaming is only available in interactive simulation").fetch(),g.supportedSimulation=a.i18n.translate("Type").fetch(),g.selectedPlot=a.i18n.translate("Plot").fetch(),g.stringDataType=a.i18n.translate("Data type").fetch(),g.stringFileType=a.i18n.translate("File type").fetch(),g.stringFileSize=a.i18n.translate("File size").fetch(),g.stringProbe=a.i18n.translate("Probe").fetch(),g.stringProbetype=a.i18n.translate("Probe type").fetch(),g.stringType=a.i18n.translate("Type").fetch(),g.stringFunction=a.i18n.translate("Function").fetch(),g.stringFlipmeasurementdirection=a.i18n.translate("Flip current measurement").fetch(),g.stringProbeExpression=a.i18n.translate("Probe expression").fetch(),g.stringData=a.i18n.translate("Data").fetch(),g.stringExpression=a.i18n.translate("Expression").fetch(),g.stringShowInstantaneous=a.i18n.translate("Instantaneous").fetch(),g.stringShowPeriodic=a.i18n.translate("Periodic").fetch(),g.stringShowDc=a.i18n.translate("Bias point(s)").fetch(),g.stringPlotproperties=a.i18n.translate("Plot properties").fetch(),g.stringColor=a.i18n.translate("Color").fetch(),g.stringLineweight=a.i18n.translate("Line weight").fetch(),g.stringInteractiveSimulation=a.i18n.translate("Interactive simulation").fetch(),g.stringDCOp=a.i18n.translate("DC Operating Point").fetch(),g.stringSchematicMeasurements=a.i18n.translate("Measurement labels").fetch(),g.referencers=a.i18n.translate("Referencers").fetch(),g.referenceSelect=a.i18n.translate("Voltage reference").fetch(),g.stringShowPlots=a.i18n.translate("Show plots").fetch(),g.stringVariables=a.i18n.translate("Variables").fetch(),g.stringFunctions=a.i18n.translate("Functions and Constants").fetch(),g.stringPremiumOnly=a.i18n.translate("Activate premium account to edit expression plotters.").fetch(),g.stringPremiumOnlyData=a.i18n.translate("Activate premium account to add/change data files.").fetch(),g.stringPopupWindow=a.i18n.translate("Warning: A popup window will appear.").fetch(),g.uploadFile=a.i18n.translate("File").fetch(),g.url=a.i18n.translate("URL").fetch(),g.elvisUSB=a.i18n.translate("ELVIS III USB").fetch(),g.elvisNetwork=a.i18n.translate("ELVIS III Network").fetch(),g.loadWaitMsg=a.i18n.translate("Loading data plotter file ...").fetch(),g.connectString=a.i18n.translate("Connect").fetch(),g.disconnectString=a.i18n.translate("Disconnect").fetch(),g.connectingString=a.i18n.translate("Connecting").fetch(),g.urlInvalidString=a.i18n.translate("Enter a valid URL string.").fetch(),g.networkAddressInvalidString=a.i18n.translate("Enter a valid Device code.").fetch(),g.connectionCanceledString=a.i18n.translate("Connection canceled.").fetch(),g.urlConnectPlaceholdString=a.i18n.translate("Open scope URL").fetch(),g.networkConnectPlaceholdString=a.i18n.translate("Device code").fetch(),g.stringCancelling=a.i18n.translate("Cancelling").fetch(),g.cancelButtonString=g.stringCancel=a.i18n.translate("Cancel").fetch(),g.stringLogicLevels=a.i18n.translate("Logic levels").fetch(),g.stringUseDocumentSettings=a.i18n.translate("Use document settings").fetch(),g.stringStreamProperties=a.i18n.translate("Stream data to MeasurementsLive").fetch(),g.stringStreamToMeasurementsLive=a.i18n.translate("Enable").fetch()}),g.activeViewGetter=a,g.commandInterface=b,g.mainInstrumentView=c,g.$.probeIDInput.commandContextHelper=b.createCommandContextHelper({disable:"all"}),g.$.reversed.commandContextHelper=b.createCommandContextHelper({disable:"all"}),g.$.probeTypes.commandContextHelper=b.createCommandContextHelper({disable:"all"}),g.$.plotWeight.commandContextHelper=b.createCommandContextHelper({disable:"all"}),g.$.plotColor.commandContextHelper=b.createCommandContextHelper({disable:"all"}),g.$.referenceProbe.commandContextHelper=b.createCommandContextHelper({disable:"all"}),g.$.showInGraph.commandContextHelper=b.createCommandContextHelper({disable:"all"}),g.$.expression.commandContextHelper=b.createCommandContextHelper({disable:"all",enable:this.isPremium?null:"none"}),g.$.variablesList.commandContextHelper=b.createCommandContextHelper({disable:"all",enable:this.isPremium?null:"none"}),g.$.functionsList.commandContextHelper=b.createCommandContextHelper({disable:"all",enable:this.isPremium?null:"none"}),g.$.fileName.commandContextHelper=b.createCommandContextHelper({disable:"all",enable:"none"}),g.$.channelList.commandContextHelper=b.createCommandContextHelper({disable:"all",enable:this.isPremium?null:"none"}),g.$.uploadFile.commandContextHelper=b.createCommandContextHelper({disable:"all",enable:this.isPremium?null:"none"}),g.$.connectButton.commandContextHelper=b.createCommandContextHelper({disable:"all"}),g.$.logicLevel.$.logicLevelSelector.commandContextHelper=b.createCommandContextHelper({disable:"all"}),g.$.logicLevel.$.useDocumentLogicLevelSettings.commandContextHelper=b.createCommandContextHelper({disable:"all"}),g.$.plotWeight.options=[{value:1,displayText:"<div class='item style-scope probe-properties'><div class='lineimage style-scope probe-properties'><svg viewBox='0 0 40 10' width='40px'><g><line x1='5' y1='5.5' x2='35' y2='5.5' stroke-width='1'/></g></svg></div><span class='weighttext style-scope probe-properties'>1px</span></item>"},{value:2,displayText:"<div class='item style-scope probe-properties'><div class='lineimage style-scope probe-properties'><svg viewBox='0 0 40 10' width='40px'><g><line x1='5' y1='5.0' x2='35' y2='5.0' stroke-width='2'/></g></svg></div><span class='weighttext style-scope probe-properties'>2px</span></item>"},{value:3,displayText:"<div class='item style-scope probe-properties'><div class='lineimage style-scope probe-properties'><svg viewBox='0 0 40 10' width='40px'><g><line x1='5' y1='5.5' x2='35' y2='5.5' stroke-width='3'/></g></svg></div><span class='weighttext style-scope probe-properties'>3px</span></item>"},{value:4,displayText:"<div class='item style-scope probe-properties'><div class='lineimage style-scope probe-properties'><svg viewBox='0 0 40 10' width='40px'><g><line x1='5' y1='5.0' x2='35' y2='5.0' stroke-width='4'/></g></svg></div><span class='weighttext style-scope probe-properties'>4px</span></item>"},{value:5,displayText:"<div class='item style-scope probe-properties'><div class='lineimage style-scope probe-properties'><svg viewBox='0 0 40 10' width='40px'><g><line x1='5' y1='5.5' x2='35' y2='5.5' stroke-width='5'/></g></svg></div><span class='weighttext style-scope probe-properties'>5px</span></item>"}],g.simulationController=c.simulationController,g.getAnalysisTextLocal=c.simulationController.getAnalysisText,g.$.source.options=[{value:h.file,displayText:g.uploadFile}],window.multisim.versionInfo.isInternal&&(g.$.source.options=[{value:h.file,displayText:g.uploadFile},{value:h.url,displayText:g.url},{value:h.network,displayText:g.elvisNetwork},{value:h.usb,displayText:g.elvisUSB}]),g.$.source.value=h.file,g.$.urlInput.removeAttribute("disabled"),g.$.channelList.options=[],g.$.referenceList.initialize(a);var m=function(a){g.isPremium="premium"===a.subscription};c.fileDataController.getSubscriptionInfo(m),c.fileDataController.listeners.addListener(c.fileDataController.fileDataEvents.FDE_SUBSCRIPTION_CHANGED,m),g.fileDataController=c.fileDataController,g.updateProbeEnableStatus=function(a){var b=g.activeViewGetter().sheetTemplateController.probeController;b.updateProbeEnableStatus(a),g.$.incompatibleFileSimulation.style.display="none",g.$.incompatibleURLSimulation.style.display="none",a.source===h.file?b.isProbeDisabled(a)&&(g.$.incompatibleFileSimulation.style.display=""===a.getAnalysisType()?"none":"block"):a.connectionState===l.CONNECTED&&"interactive"!==g.simulationController.activeAnalysis&&(g.$.incompatibleURLSimulation.style.display="block")};var n=function(a){g.updateProbeEnableStatus(a)};g.activeViewGetter().sheetTemplateController.design.listeners.addListener(k.SOURCE_CHANGED,n);var o=function(){g.activeViewGetter().sheetTemplateController.design.probeController.getProbes().forEach(function(a){g.activeViewGetter().sheetTemplateController.sheetTemplate.getObject(a.templateGUID).probeType===f.PROBE_DATA&&g.updateProbeEnableStatus(a)})};c.simulationController.listeners.addListener(j.ActiveAnalysisChanged,o),c.simulationController.listeners.addListener(j.SimulationSettingsChanged,o),g.waitScreen=c.waitscreen,g.simulationController.listeners.addListener(j.StreamConnectionChange,function(){g.handleStreamConnectionChange&&g.handleStreamConnectionChange()}),this._checkAndLoadSmallHelp()},handleStreamConnectionChange:null,selectionChanged:function(a){var b=this,j=this,k=j.activeViewGetter(),m=j.activeViewGetter().sheetTemplateController.design.probeController,n=j.activeViewGetter().sheetTemplateController.probeController;j._handlePremiumStateChanged(),k&&function(){var o=k.sheetTemplateController.sheetTemplate.getObject(a),p=k.sheetTemplateController.design.findInstance(k.contextGUID,a);p&&void 0!==p.probeID&&function(){var a=function(a){function b(){var a=p.source===h.file?p.fileError:p.connectionError;return{valid:!a,errorMessage:a}}function c(a){switch(j.$.file.style.display="none",j.$.url.style.display="none",j.$.elvisUsbWarningMsg.style.display="none",j.$.elvisUsbErrorMsg.style.display="none",j.$.elvisNetwork.style.display="none",a){case h.file:j.$.file.style.display="block",j.$.connection.style.display="none",j.$.fileName.validator=function(a,c){return c(b())};break;case h.url:j.$.url.style.display="block",j.$.connection.style.display="block",j.$.urlInput.validator=function(a,c){return c(b())};break;case h.network:j.$.elvisNetwork.style.display="block",j.$.connection.style.display="block",j.$.deviceCodeInput.validator=function(a,c){return c(b())};break;case h.usb:j.stringUsbErrorMsg=p.connectionError,j.$.elvisUsbWarningMsg.style.display=p.connectionError?"none":"block",j.$.elvisUsbErrorMsg.style.display=p.connectionError?"block":"none",j.$.connection.style.display="block"}j.$.source.value=a,p.source=a,k((a===h.file?p.fileError||!p.file:p.connectionError||p.connectionState!==l.CONNECTED)?!0:!1)}function k(a){var b=a?"none":"block",c=a?"none":"flex";j.$.channelList.style.display=b,j.$.selectedPlotHelp.style.display=b,j.$.fileType.style.display=c,j.$.fileFormatHelp.style.display=b,j.$.dataType.style.display=c,j.$.analysisTypeNameHelp.style.display=b,j.$.fileSize.style.display=c,j.$.fileSizeHelp.style.display=b}function o(a){return a?a>1e5?d.i18n.translate("%1s MB").fetch(Number((a/1e6).toFixed(2))):a>=1e3?d.i18n.translate("%1s kB").fetch(Number((a/1e3).toFixed(2))):d.i18n.translate("%1s B").fetch(Number(a)):d.i18n.translate("Unknown").fetch()}function q(a){var c="";p.fileError="",a.target.files.length>0&&function(){c=a.target.files[0].size,p.initialExternalData(),j.mainInstrumentView&&(j.mainInstrumentView.activeDesign.modified=!0);var f=1e8;c<=f?function(){j.waitScreen.handleWaitStart({message:j.loadWaitMsg},c>1e4?1:1e3);var g=new FileReader;!function(a){var h=a.name.split(".");g.onload=function(){var i=this.result,l=function(a){for(var b=new Uint8Array(a),c=b.length,d=0;d<b.length;d++){c=(c<<5)-c+b[d],c&=c}return c},m=l(i),q=n.getTotalDataProbeFileSize([p],[m]);if(c+q>f)j.$.channelList.options=p.getExternalDataChannelNameList(),k(!0),p.fileError=d.i18n.translate("File size %1s exceeds the remaining available %2s. Total available for all data plotters is %3s.").fetch(o(c),o(f-q),o(f)),j.$.fileName.validator=function(a,c){return c(b())},e.notifyTracker("dataprobefilesize-limit",{circuit_url:window.location.href,file_name:a.name,files_size:(c+q).toString(),limit:f.toString()});else{var r=j.fileDataController.dataFileLoad(p,i,null,h.length>1?"."+h.pop():null,function(){});r.valid?A&&(p.fileSize=c,p.fileChecksum=m,E(),n.changeChannel(p)):(p.fileError=r.errorMessage,k(!0),j.$.fileName.validator=function(a,c){return c(b())})}i=null,g=null,j.$.upload.value="",j.waitScreen.handleWaitStop({message:j.loadWaitMsg})},g.onerror=function(){j.waitScreen.handleWaitStop({message:j.loadWaitMsg})},g.onabort=function(){j.waitScreen.handleWaitStop({message:j.loadWaitMsg})},g.readAsArrayBuffer(a)}(a.target.files[0])}():(j.$.channelList.options=p.getExternalDataChannelNameList(),k(!0),p.fileError=d.i18n.translate("File size must be less than 100MB.").fetch(),e.notifyTracker("dataprobefilesize-limit",{circuit_url:window.location.href,file_name:a.target.files[0].name,file_size:c.toString(),limit:f.toString()}))}(),n.changeFileName(p,a.target.value.match(/^.*?([^\\/.]*)[^\\/]*$/)[1])}function r(){switch(p.connectionState=l.NOT_CONNECTED,p.connectionError="",p.source){case h.url:var a=j.$.urlInput.value;""===a.trim()?(p.connectionState=l.URL_ERROR,p.connectionError=j.urlInvalidString):(/https?:\/\//.test(a)||(a="http://"+a,j.$.urlInput.value=a),p.initialExternalData(),p.connectionState=l.CONNECTING,w(),j.activeViewGetter().sheetTemplateController.probeController.changeConnectName(p,p.source,a),j.activeViewGetter().sheetTemplateController.probeController.connectStreamingProbe(p),j.$.channelList.value=0,j.updateProbeEnableStatus(p));break;case h.network:var b=j.$.deviceCodeInput.value;""===b.trim()?(p.connectionState=l.URL_ERROR,p.connectionError=j.networkAddressInvalidString):(p.initialExternalData(),p.connectionState=l.CONNECTING,w(),j.activeViewGetter().sheetTemplateController.probeController.changeConnectName(p,p.source,b),j.activeViewGetter().sheetTemplateController.probeController.connectStreamingProbe(p),j.$.channelList.value=0,j.updateProbeEnableStatus(p));break;case h.usb:p.initialExternalData(),p.connectionState=l.CONNECTING,w(),j.activeViewGetter().sheetTemplateController.probeController.changeConnectName(p,p.source,"USB"),j.activeViewGetter().sheetTemplateController.probeController.connectStreamingProbe(p),j.$.channelList.value=0,j.updateProbeEnableStatus(p)}c(p.source)}function s(){p.connectionState===l.CONNECTING&&(p.connectionState=l.CANCELLED,p.connectionError=j.connectionCanceledString,j.activeViewGetter().sheetTemplateController.probeController.cancelconnectStreamingProbe(p),E(),w())}function u(){p.connectionState===l.CONNECTED&&j.activeViewGetter().sheetTemplateController.probeController.disconnectStreamingProbe(p)}var x=a.probeType,y=x===f.PROBE_CURRENT||x===f.PROBE_VOLTAGE_CURRENT,z=x===f.PROBE_EXPRESSION,A=x===f.PROBE_DATA,B=x===f.PROBE_REFERENCE,C=x===f.PROBE_VOLTAGE,D=x===f.PROBE_DIGITAL,E=function(a){if(!a||!a.id||a.id===p.probeID){if(p.source!==h.file)switch(k(p.connectionState!==l.CONNECTED),p.source){case h.url:j.$.urlInput.validator=function(a,c){return c(b())};break;case h.network:j.$.deviceCodeInput.validator=function(a,c){return c(b())};break;case h.usb:}if(j.updateProbeEnableStatus(p),j.$.channelList.options=p.getExternalDataChannelNameList(),j.$.channelList.value=p.source===h.file?p.externalDataCurrentChannelIndex:p.source===h.url?p.externalURLDataCurrentChannelIndex:p.source===h.usb?p.externalUsbDataCurrentChannelIndex:p.externalNetworkDataCurrentChannelIndex,j.$.channelList.options[j.$.channelList.value])switch(p.source){case h.file:p.fileChannelName=j.$.channelList.options[j.$.channelList.value].displayText;break;case h.url:p.urlChannelName=j.$.channelList.options[j.$.channelList.value].displayText;break;case h.network:p.networkChannelName=j.$.channelList.options[j.$.channelList.value].displayText;break;case h.usb:p.usbChannelName=j.$.channelList.options[j.$.channelList.value].displayText}j.$.fileTypeName.textContent=p.getExternalDataSourceFormat(),j.$.dataTypeName.textContent=p.getDomain(),j.$.fileSizeValue.textContent=o(p.fileSize)}};if(j.handleStreamConnectionChange=function(){w(),E(),n.changeChannel(p)},j.$.referenceProbeContainer.style.display=C?"":"none",j.$.referenceListContainer.style.display=B?"":"none",j.$.reversedContainer.style.display=y?"":"none",j.stringProbe=z?d.i18n.translate("Expression Plotter").fetch():A?d.i18n.translate("Data Plotter").fetch():d.i18n.translate("Probe").fetch(),j.$.expression.style.display=z?"":"none",j.$.plotWeight.style.display=B?"none":"",j.$.plotColor.style.display=B?"none":"",j.$.showInGraph.style.display=B?"none":"",j.$.measurementsDrawer.style.display=B||z||A?"none":"",j.$.schematicShowDcgroup.style.display=D?"none":"",j.$.schematicShowPeriodicgroup.style.display=D?"none":"",j.$.plotPropertiesDrawer.style.display=B?"none":"",j.$.functionField.innerHTML=d.i18n.translate(x).fetch(),j.$.probeTypes.style.display=z||A?"none":"",z?(j.$.expressionDrawer.style.display="",j.$.dataDrawer.style.display="none",j.$.probeTypeDrawer.style.display="none"):A?(j.$.dataDrawer.style.display="",j.$.expressionDrawer.style.display="none",j.$.probeTypeDrawer.style.display="none"):(j.$.expressionDrawer.style.display="none",j.$.dataDrawer.style.display="none",j.$.probeTypeDrawer.style.display="",j.$.probeTypeDrawer.addEventListener("opened-changed",function(){var a=[{value:f.PROBE_VOLTAGE,displayContent:t[0]},{value:f.PROBE_CURRENT,displayContent:t[1]},{value:f.PROBE_VOLTAGE_CURRENT,displayContent:t[2]},{value:f.PROBE_REFERENCE,displayContent:t[3]}];window.multisim.versionInfo.isInternal&&a.push({value:f.PROBE_DIGITAL,displayContent:t[4]}),j.$.probeTypes.options=a})),j.$.streamPropertiesDrawer.style.display=C?"":"none",y)j.$.reversed.handleclick=function(){n.reverseProbeDirection(p,!p.reversed)},j.$.expression.onValueChange=null;else if(z){var F=m.createProbeVariableList();v.variables=F,j.$.variablesList.options=F,j.$.reversed.handleclick=null,j.$.expression.validator=function(b,c){return c(i(b,m.validateFunction,m.validateConstant,m.validateProbe,m.validateNet,m.validateOperator,a))},j.$.expression.onValueChange=function(a){n.changeProbeExpression(p,a)},j.$.expression.value=p.expression}else A?(c(p.source),E(),j.$.urlInput.value=p.url,j.$.deviceCodeInput.value=p.network,j.$.connectButton.removeEventListener("click",j.previousURLConnectionHandler),j.previousURLConnectionHandler=r,j.$.connectButton.addEventListener("click",r),j.$.cancelButton.removeEventListener("click",j.previousURLCancelConnectionHandler),j.previousURLCancelConnectionHandler=s,j.$.cancelButton.addEventListener("click",s),j.$.disconnectButton.removeEventListener("click",j.previousURLDisconnectionHandler),j.previousURLDisconnectionHandler=u,j.$.disconnectButton.addEventListener("click",u),j.$.upload.removeEventListener("change",j.previousUploadChangeHandler),j.previousUploadChangeHandler=q,j.uploadChangeHandler=q,j.$.upload.addEventListener("change",j.uploadChangeHandler),j.$.fileName.value=p.file,j.$.channelList.onValueChange=function(){switch(p.source){case h.file:p.externalDataCurrentChannelIndex=j.$.channelList.value;break;case h.url:p.externalURLDataCurrentChannelIndex=j.$.channelList.value;break;case h.network:p.externalNetworkDataCurrentChannelIndex=j.$.channelList.value;break;case h.usb:p.externalUsbDataCurrentChannelIndex=j.$.channelList.value}E(),n.changeChannel(p)},j.$.source.onValueChange=function(a){p.source!==h.file&&(u(),p.connectionState=l.NOT_CONNECTED,p.connectionError=""),n.changeSource(p,a),c(a),E()},k((p.source===h.file?p.fileError||!p.file:p.connectionError||p.connectionState!==l.CONNECTED)?!0:!1)):C?function(){j.$.referenceProbe.onValueChange=function(a,b){var c=g,d=b,e=j.activeViewGetter().sheetTemplateController,f=a;b&&b instanceof c||(d=null),a instanceof c?e.probeController.changeProbeReferenceHandler(p,f,d):(a&&a instanceof c||(f=null),e.probeController.changeProbeReferenceHandler(p,f,d))};var a=m.getReferenceProbeInstances(),b=[];b.push({value:0,displayText:d.i18n.translate("<--ground--\x3e").fetch()}),a.forEach(function(a){b.push({value:a,displayText:a.probeID})}),j.$.referenceProbe.options=b,j.$.referenceProbe.value=p.probeRefs[0]||0}():B?(j.$.referenceList.updateList(p.probeRefs),j.$.referenceList.querySelector("iron-list").fire("iron-resize"),j.drawerOpenedHandler||(j.drawerOpenedHandler=function(a){a.detail.value&&(j.$.referenceList.updateList(p.probeRefs),j.$.referenceList.querySelector("iron-list").fire("iron-resize"))}),j.$.plotPropertiesDrawer.removeEventListener("opened-changed",j.drawerOpenedHandler),j.$.plotPropertiesDrawer.addEventListener("opened-changed",j.drawerOpenedHandler)):(j.$.reversed.handleclick=null,j.$.expression.onValueChange=null)};k.sheetTemplateController.design.probeController.attachModifyInput(j.$.probeIDInput,function(){return k},p),j.$.probeTypes.onValueChange=function(b){k.sheetTemplateController.probeController.changeProbeType(o,p,b),a(o)},j.$.plotWeight.onValueChange=function(a){n.changePlotProperty(p,c.assign({},p.plot,{weight:a})),j.$.plotWeight.value=p.plot.weight},j.$.schematicShowInstantaneous.onValueChange=function(a){j.activeViewGetter().sheetTemplateController.design.modified=!0,n.showProbeInstantaneousValues(p,a)},j.$.schematicShowPeriodic.onValueChange=function(a){j.activeViewGetter().sheetTemplateController.design.modified=!0,n.showProbePeriodicMeasurements(p,a)},j.$.schematicShowDc.onValueChange=function(a){j.activeViewGetter().sheetTemplateController.design.modified=!0,n.showDcProbeBiasPoints(p,a)},d.addReadyListener(function(){j.$.plotColor.palettes=[{name:d.i18n.translate("Recommended Palette").fetch(),colors:m.recommendedColors},{name:d.i18n.translate("Basic Palette").fetch(),colors:[{r:252,g:168,b:143,a:1},{r:245,g:206,b:164,a:1},{r:255,g:248,b:154,a:1},{r:202,g:234,b:156,a:1},{r:131,g:202,b:157,a:1},{r:140,g:223,b:255,a:1},{r:147,g:183,b:227,a:1},{r:163,g:157,b:224,a:1},{r:181,g:153,b:217,a:1},{r:244,g:155,b:193,a:1},{r:243,g:107,b:78,a:1},{r:251,g:175,b:92,a:1},{r:255,g:245,b:103,a:1},{r:171,g:212,b:113,a:1},{r:58,g:184,b:120,a:1},{r:0,g:191,b:243,a:1},{r:76,g:155,b:224,a:1},{r:112,g:109,b:192,a:1},{r:134,g:94,b:168,a:1},{r:241,g:108,b:169,a:1},{r:238,g:28,b:37,a:1},{r:248,g:148,b:28,a:1},{r:255,g:242,b:0,a:1},{r:141,g:199,b:61,a:1},{r:0,g:166,b:79,a:1},{r:0,g:164,b:229,a:1},{r:0,g:112,b:188,a:1},{r:61,g:62,b:178,a:1},{r:102,g:43,b:145,a:1},{r:237,g:12,b:140,a:1},{r:158,g:9,b:17,a:1},{r:163,g:90,b:19,a:1},{r:175,g:162,b:10,a:1},{r:88,g:133,b:39,a:1},{r:0,g:113,b:51,a:1},{r:0,g:118,b:163,a:1},{r:0,g:74,b:128,a:1},{r:25,g:19,b:99,a:1},{r:68,g:15,b:98,a:1},{r:158,g:0,b:93,a:1}]}]}),j.$.plotColor.onValueChange=function(a){n.changePlotProperty(p,c.assign({},p.plot,{color:a})),j.$.plotColor.value=p.plot.color},j.$.showInGraph.onValueChange=function(a){n.changePlotProperty(p,c.assign({},p.plot,{showInGraph:a})),j.$.showInGraph.checked=p.plot.showInGraph},j.$.streamToMeasurementsLive.onValueChange=function(a){if(a)try{track("found new feature","probe checkbox")}catch(a){}n.showStreamToMeasurementsLive(p,a)},a(o);var q=p.probeID;j.originalprobeIDInput=q,j.$.probeIDInput.value=q;var r=function(a){var b=document.createElement("div");return b.classList.add(a),b.setAttribute("title",d.i18n.translate(a).fetch()),b.style.position="absolute",b.style.left=b.style.right=b.style.top=b.style.bottom=0,b},s=function(a,b){a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.style.position="absolute",a.style.top=a.style.left=a.style.bottom=a.style.right=0,window.Polymer.dom(b).appendChild(a)},t=[r(f.PROBE_VOLTAGE),r(f.PROBE_CURRENT),r(f.PROBE_VOLTAGE_CURRENT),r(f.PROBE_REFERENCE),r(f.PROBE_DIGITAL)];k.sheetTemplateController.design.probeController.getIconFor(f.PROBE_VOLTAGE,function(a){s(a,t[0])}),k.sheetTemplateController.design.probeController.getIconFor(f.PROBE_CURRENT,function(a){s(a,t[1])}),k.sheetTemplateController.design.probeController.getIconFor(f.PROBE_VOLTAGE_CURRENT,function(a){s(a,t[2])}),k.sheetTemplateController.design.probeController.getIconFor(f.PROBE_REFERENCE,function(a){s(a,t[3])}),k.sheetTemplateController.design.probeController.getIconFor(f.PROBE_DIGITAL,function(a){s(a,t[4])});var u=[{value:f.PROBE_VOLTAGE,displayContent:t[0]},{value:f.PROBE_CURRENT,displayContent:t[1]},{value:f.PROBE_VOLTAGE_CURRENT,displayContent:t[2]},{value:f.PROBE_REFERENCE,displayContent:t[3]}];window.multisim.versionInfo.isInternal&&u.push({value:f.PROBE_DIGITAL,displayContent:t[4]}),j.$.probeTypes.options=u,j.$.probeTypes.value=o.probeType,j.$.plotWeight.value=p.plot.weight,j.$.plotColor.value=p.plot.color,j.$.showInGraph.checked=p.plot.showInGraph,j.$.schematicShowInstantaneous.checked=p.displayInstantaneous,j.$.schematicShowPeriodic.checked=p.displayPeriodic,j.$.schematicShowDc.checked=p.displayDc,j.$.streamToMeasurementsLive.checked=p.streamToMeasurementsLive;var w=function(){if(p&&p.source!==h.file){switch(p.connectionState){case l.CANCELLED:case l.CONNECTING:j.$.connectButton.style.display="none",j.$.cancelHeader.style.display="flex",j.$.connectionIndicator.style.display="flex",j.$.disconnectButton.style.display="none",j.$.urlInput.setAttribute("disabled","disabled");break;case l.CONNECTED:j.$.connectButton.style.display="none",j.$.cancelHeader.style.display="none",j.$.connectionIndicator.style.display="none",j.$.disconnectButton.style.display="block",j.$.urlInput.setAttribute("disabled","disabled");break;case l.URL_ERROR:case l.ERROR:case l.NOT_CONNECTED:j.$.connectButton.style.display="block",j.$.cancelHeader.style.display="none",j.$.connectionIndicator.style.display="none",j.$.disconnectButton.style.display="none",j.$.urlInput.removeAttribute("disabled")}j.cancelButtonString=p.connectionState===l.CANCELLED?j.stringCancelling:j.stringCancel}};w(),b._updateLogicLevel(o,n,p)}()}()},_updateLogicLevel:function(a,b,c){var d=this;a.probeType===f.PROBE_DIGITAL?function(){d.$.logicLevelContainer.style.display="block";var a=d.$.logicLevel,e=a.$.useDocumentLogicLevelSettings,f=a.$.logicLevelSelector;e.checked=c.useDocumentLogicLevelSettings,e.onValueChange=function(a){if(a){var d=b.design.simulationController.documentDigitalSettings;if(c.logicLevel=d.logicLevel,c.logicLevel===m.CUSTOM){var e=new n(d.outputLowValue,d.inputLowThresholdValue,0,d.inputHighThresholdValue,d.outputHighValue);e.autoSetUnknownVoltage(),c.customLogicFamily=e}}b.changeDigitalProbeUseDocumentLogicLevelSettings(c,a)},f.disabled=e.checked,f.value=c.logicLevel||m.THREE,f.onValueChange=function(a){b.changeDigitalProbeLogicLevel(c,a)};var g=a.$.inputThresholdLow,h=a.$.inputThresholdHigh;a.showOutputVoltageInputs=!1;var i=c.getVoltageLevels();g.value=i.maxLowVoltage;var j=function(a,b){var d=o(a),e=c.customLogicFamily.clone();return e[b]=d,e.autoSetUnknownVoltage(),e};g.onValueChange=function(a){var d=j(a,"maxLowVoltage");b.changeDigitalProbeCustomLogicFamily(c,d)},h.value=i.minHighVoltage,h.onValueChange=function(a){var d=j(a,"minHighVoltage");b.changeDigitalProbeCustomLogicFamily(c,d)}}():this.$.logicLevelContainer.style.display="none"}})}}}),a.register("126",[],function(){return{setters:[],execute:function(){}}}),a.register("151",[],function(){return{setters:[],execute:function(){}}}),a.register("103",["a7","126","151"],function(a,b){"use strict";return{setters:[function(a){},function(a){},function(a){}],execute:function(){!function(){function a(){var a=document.createElement("fakeelement"),b={transition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var c in b)if(void 0!==a.style[c])return b[c]}window.Polymer({is:"drawer-header",attached:function(){var a=this;a.headerHeight&&(a.$.header.style.height=a.headerHeight),a.headerWidth&&(a.$.header.style.width=a.headerWidth),a.$.header.addEventListener("click",function(){a.toggleOpenOnClick&&(a.$.collapse.toggle(),a.opened=a.$.collapse.opened)}),a.$.smallHelp.addEventListener("click",function(){a.helpActivated=!a.helpActivated}),a.opened&&a._acquireHelp(),new MutationObserver(function(b){b.filter(function(a){return Array.from(a.addedNodes||[]).find(function(a){return a.hasAttribute&&a.hasAttribute("hascontexthelp")})}).length&&a._acquireHelp()}).observe(a,{childList:!0,subtree:!0,characterData:!1})},_acquireHelp:function(){this.helpItems=this.querySelectorAll("multisim-small-help"),this.hasAttribute("border")&&this.helpItems&&this.helpItems.length>0&&this.opened?(this.$.smallHelp.classList.add("open"),this._helpChanged()):this.$.smallHelp.classList.remove("open")},get acquireHelp(){return this._acquireHelp},_scrollIntoView:function(b){for(var c=this,d=c.$.panel,e=d.offsetTop,f=d.offsetParent;f&&!f.classList.contains("scrollContainer");)e+=f.offsetTop,f=f.offsetParent;null===f&&d.offsetParent&&d.offsetParent.$&&(e=d.offsetTop,f=d.offsetParent.$.resultcontainer),f&&function(){var g=a(),h=function(){var a=e+d.clientHeight-(f.scrollTop+f.clientHeight);a>0&&(d.clientHeight>f.clientHeight?f.scrollTop=e:f.scrollTop+=a)};b&&g?c.$.collapse.addEventListener(g,function(a){a.target==c.$.collapse&&h()}):h()}()},_openedChanged:function(){var a=this;a.$.collapse.opened=a.opened,a._acquireHelp(),a.opened?(a.$.toggleIconContainer.classList.add("open"),a._scrollIntoView(!0)):a.$.toggleIconContainer.classList.remove("open"),a.fire("opened",{opened:a.opened})},_helpChanged:function(){if(this.helpItems&&this.helpItems.length>0){var a=void 0;for(a=0;a<this.helpItems.length;++a)this.helpItems[a].visible=this.helpActivated}},properties:{headerHeight:String,headerWidth:String,opened:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0,observer:"_openedChanged"},helpActivated:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0,observer:"_helpChanged"},toggleOpenOnClick:{type:Boolean,value:!0,reflectToAttribute:!1}}})}()}}}),a.register("152",[],function(){return{setters:[],execute:function(){}}}),a.register("153",["a7","130","103","29","152"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"properties-text",properties:{stringText:String,stringType:String},ready:function(){},initialize:function(a,b){this.activeViewGetter=a;var d=this;c.addReadyListener(function(a){d.stringText=a.i18n.translate("Text").fetch(),d.stringType=a.i18n.translate("Type").fetch()}),this.$.textValue.commandContextHelper=b.createCommandContextHelper({disable:"all"})},selectionChanged:function(a){var b=this.activeViewGetter(),d=this;if(b){var e=b.sheetTemplateController.design.findInstance(b.contextGUID,a);e&&void 0!==e.textOrVarName&&b.sheetTemplateController.textController.attachModifyInput(this.$.textValue,this.activeViewGetter,e),c.addReadyListener(function(a){d.$.typeField.innerHTML=a.i18n.translate("Text annotation").fetch()})}}})}()}}}),a.register("154",[],function(){return{setters:[],execute:function(){}}}),a.register("155",["a7","104","b9","29","154"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"connector-properties",properties:{connectorID:String,stringID:String,stringType:String},ready:function(){},splitConnectorDialog:null,initialize:function(a,b,d){var e=this;e.splitConnectorDialog=d,e.activeViewGetter=a,c.addReadyListener(function(a){e.stringID=a.i18n.translate("ID").fetch(),e.stringType=a.i18n.translate("Type").fetch()}),e.$.connectorID.commandContextHelper=b.createCommandContextHelper({disable:"all"})},selectionChanged:function(a){var b=this,d=b.activeViewGetter();if(d){var e=d.sheetTemplateController.design.findInstance(d.contextGUID,a);e&&void 0!==e.connectorHub&&(b.connectorID=e.connectorHub.connectorID,b.$.connectorID.disabled=!!d.sheetTemplateController.design.getConnectorHub(e.connectorHub.connectorID,"ground"),d.sheetTemplateController.connectorController.attachModifyInput(b.$.connectorID,b.activeViewGetter,e,b.splitConnectorDialog)),c.addReadyListener(function(a){b.$.typeField.innerHTML=a.i18n.translate("Connector").fetch()})}}})}()}}}),a.register("156",[],function(){return{setters:[],execute:function(){}}}),a.register("157",["a7","126","128","12e","132","81","153","155","29","30","11c","11d","11f","120","121","32","156"],function(a,b){"use strict";var c,d,e,f,g,h,i,j;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"object-properties-panel",properties:{emptyPanelText:String},ready:function(){},initialize:function(a,b,k,l,m,n,o,p){function q(a){w!==a&&(w.style.display="none",a.style.display="",w=a)}function r(b){if(t.$.grapherPropertiesView.style.display){var d=u.numSelectedObjects;if(1===d){var e=void 0,f=!0;b&&b.elements&&b.elements.length?(e=b.elements[0].getAttribute("parent")||b.elements[0].id,f=e!==x,x=e):x&&(e=x);var g=a().sheetTemplateController.sheetTemplate.getObject(e);if(g)q(y.get(g.constructor)),f&&y.get(g.constructor).selectionChanged(e);else{var h=a().getSelection();u.numSelectedObjects=h.length,r({elements:h})}}else q(t.$.emptypanelplaceholder),t.emptyPanelText=d?c.i18n.translate("Multiple items are selected.").fetch():c.i18n.translate("No items selected.").fetch(),x=null}}function s(a){"grapher"===a.focus?q(t.$.grapherPropertiesView):(t.$.grapherPropertiesView.style.display="none",r())}var t=this,u=b.selectionInterface,v=b.commandInterface;c.addReadyListener(function(a){t.emptyPanelText=a.i18n.translate("No items selected.").fetch()});var w=t.$.emptypanelplaceholder,x=null,y=new Map;y.set(e,t.$.objectPropertiesView),y.set(i,t.$.netPropertiesView),y.set(g,t.$.probePropertiesView),y.set(h,t.$.textAnnotationPropertiesView),y.set(f,t.$.connectorPropertiesView);var z=a();z&&z.sheetTemplateController.design.listeners.addListener(d.DESIGN_CHANGED,r),b.simulationController.listeners.addListener(j.StartSimulation,r),b.listeners.addListener(b.events.ACTIVEVIEWCHANGED,function(a){a.oldView&&(u.numSelectedObjects=0,a.oldView.sheetTemplateController.design.listeners.removeListener(d.DESIGN_CHANGED,r)),a.newView&&a.newView.sheetTemplateController.design.listeners.addListener(d.DESIGN_CHANGED,r)}),u.selectionChangeListener.addListener("select",r),u.selectionChangeListener.addListener("unselect",r),l.addFocusListener(s),this.$.objectPropertiesView.initialize(a,n,o,b),this.$.netPropertiesView.initialize(a,b),this.$.probePropertiesView.initialize(a,v,b,p),this.$.connectorPropertiesView.initialize(a,v,k),this.$.grapherPropertiesView.initialize(a,m,b),this.$.textAnnotationPropertiesView.initialize(a,v)}})}()}}}),a.register("158",[],function(){return{setters:[],execute:function(){}}}),a.register("159",["a7","15a","15b","125","157","29","32","158"],function(a,b){"use strict";var c,d;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"right-rail",properties:{selected:{reflectToAttribute:!0,type:Number,value:0},stringItem:String,stringDocument:String,stringHideRightRail:String},attachSelectionListener:function(a,b){var c=this,d=function(a){a.view&&(a.selectionInterface.numSelectedObjects?c.selected=0:c.selected=1)},e=function(a){if("grapher"==a.focus)c.selected=0;else{var b=c.activeViewGetter(),d=b?b.getSelection():[];c.selected=d.length?0:1}};a.addListener("select",d),a.addListener("unselect",d),b.addFocusListener(e),c.selected=1},attachActiveAnalysisChangeListener:function(a){var b=this;a.listeners.addListener(d.ActiveAnalysisChanged,function(){b.selected=1})},get documentProperties(){return this.$$("document-properties-panel")},get objectProperties(){return this.$$("object-properties-panel")},init:function(a){var b=this;b.activeViewGetter=a,c.addReadyListener(function(a){b.stringItem=a.i18n.translate("Item").fetch(),b.stringDocument=a.i18n.translate("Document").fetch(),b.stringHideRightRail=a.i18n.translate("Close configuration pane").fetch()})}})}()}}}),a.register("15a",[],function(){return{setters:[],execute:function(){}}}),a.register("15b",[],function(){return{setters:[],execute:function(){}}}),a.register("15c",[],function(){return{setters:[],execute:function(){}}}),a.register("15d",["a7","106","15e","105","29","15c"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"panel-netlist",behaviors:[window.Polymer.InitializeHelp],ready:function(){},properties:{stringSpiceNetlistView:String},initialize:function(){var a=this;c.addReadyListener(function(b){a.stringSpiceNetlistView=b.i18n.translate("SPICE Netlist").fetch()}),a.$.smallHelp.addEventListener("click",function(){a.helpActivated=!a.helpActivated}),a.behaviors[0]._acquireHelp(a),a.behaviors[0]._initializeHelpAsync(a,window.multisim.rootFolder+"resources/help_en/help-metadata.json")}})}()}}}),a.register("15f",[],function(){return{setters:[],execute:function(){}}}),a.register("160",["a7","15f"],function(a,b){"use strict";return{setters:[function(a){},function(a){}],execute:function(){!function(){window.Polymer({is:"multisim-grid",attached:function(){var a=this,b=a.$.bodycontainer;b.addEventListener("scroll",function(){a.$.headercontainer.scrollLeft=b.scrollLeft})},properties:{columns:{type:Number,readonly:!0,value:0},rows:{type:Number,readonly:!0,value:0}},addColumns:function(a){var b=this.$.headerrow,c=this.$.hiddenheaderrow,d=this.$.content.querySelectorAll("#contenttable #content > tr");a.forEach(function(a){var e=document.createElement("th");e.classList.add("style-scope"),e.classList.add("multisim-grid"),e.innerHTML=a.content,b.appendChild(e),e.style.width=a.width?a.width+"px":"auto",e=document.createElement("th"),e.classList.add("style-scope"),e.classList.add("multisim-grid"),c.appendChild(e),e.style.width=a.width?a.width+"px":"auto";for(var f=0;f<d.length;f++)e=document.createElement("td"),e.classList.add("style-scope"),e.classList.add("multisim-grid"),d[f].appendChild(e)},this),this.columns+=a.length},addRows:function(a){var b=this,c=b.$.content;a.forEach(function(a){var b=document.createElement("tr");b.classList.add("style-scope"),b.classList.add("multisim-grid"),b.classList.add(this.rows%2?"even":"odd"),b.data=a.data,a.classes&&a.classes.forEach(function(a){b.classList.add(a)}),b.addEventListener("click",function(){for(var a=c.querySelectorAll(".active"),b=!1,d=0;d<a.length;d++)a[d]==this&&(b=!0),a[d].classList.remove("active");b||this.classList.add("active")}),this.rows++,c.appendChild(b);for(var d=0;d<this.columns;d++){var e=document.createElement("td");e.classList.add("style-scope"),e.classList.add("multisim-grid"),e.innerHTML=d<a.cells.length?a.cells[d].content:"",b.appendChild(e)}},b)},removeRows:function(a){var b=this,c=b.getRows(function(b){return b.row.data.errorinfo.subtype===a}),d=b.$.content;c.forEach(function(a){d.removeChild(a.row),b.rows--})},setFilters:function(a){var b=this.querySelector("#filters");for(b||(b=document.createElement("style"),b.id="filters",this.insertBefore(b,this.querySelector("#gridcontainer")));b.sheet.cssRules.length;)b.sheet.deleteRule(b.sheet.cssRules[0]);var c="";a.forEach(function(a){c&&(c+=",\n"),c+=".filter-"+a+" #content tr."+a}),b.sheet.insertRule(c+"{ display: none }",0)},applyFilters:function(a){for(var b=this.$.gridcontainer,c=function(c){var d=b.classList.item(c);/^filter-.*$/i.test(d)&&(a.filter(function(a){return"filter-"+a==d}).length||b.classList.remove(d))},d=b.classList.length-1;d>=0;d--)c(d);a.forEach(function(a){b.classList.add("filter-"+a)})},getRows:function(a){for(var b=[],c=this.$.content,d=c.children,e=0;e<d.length;e++){var f={row:d[e],index:e};a&&!a(f)||b.push(f)}return b},updateRow:function(a,b){var c=this.$.content,d=c.children;if(a>=0)if(a>=d.length)this.addRows([b]);else for(var e=d[a],f=e.children,g=0;g<f.length;g++)g<b.length&&(f[g].innerHTML=b[g].content)},updateCell:function(a,b,c){var d=this.$.content,e=a>=0&&a<d.children.length?d.children[a]:null,f=e&&b>=0&&b<e.children.length?e.children[b]:null;if(!f)throw new Error("Cannot update a cell that doesn't exist");f.innerHTML=c.content}})}()}}}),a.register("161",[],function(){return{setters:[],execute:function(){}}}),a.register("162",["a7","160","12","29","161"],function(a,b){"use strict";var c,d;return{setters:[function(a){},function(a){},function(a){c=a.timeToString},function(a){d=a.default},function(a){}],execute:function(){!function(){var a=Object.freeze({error:{icon:"multisim:error"},warning:{icon:"multisim:warning"},info:{icon:"multisim:info"}});window.Polymer({is:"panel-errors-group",attached:function(){this.groupInfo?this.$.header.innerHTML=this.groupInfo.displayName+"<br />"+c(this.groupInfo.timestamp,"%F %T"):this.$.header.textContent=this.name,this.$.content.setFilters(["type-error","type-warning","type-info"])},errorHandler:null,properties:{name:String},groupInfo:null,addError:function(b){var c=function(b){var c=b;if(a.hasOwnProperty(b)){var d=a[b];c="<iron-icon icon='"+d.icon+"' style='color: "+d.color+"'></iron-icon>"}return c},d=this.$.content.getRows(function(a){return a.row.data.errorinfo.message==b.message&&a.row.data.errorinfo.type==b.type});if(d.length){d[0].row.data.count++,this.$.content.updateCell(d[0].index,1,{content:b.message})}else this.$.content.addRows([{classes:["type-"+b.type],cells:[{content:c(b.type)},{content:b.message}],data:{count:1,errorinfo:b}}])},applyFilters:function(a){this.$.content.applyFilters(a)},initialize:function(){this.$.content.addColumns([{content:d.i18n.translate("Type").fetch(),width:50},{content:d.i18n.translate("Description").fetch()}])}})}()}}}),a.register("163",[],function(){return{setters:[],execute:function(){}}}),a.register("164",["a7","106","162","105","29","163"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){function a(a){for(var b=[],c=a.$.filters.querySelectorAll(".filtertoggle"),d=0;d<c.length;d++)c[d].active||b.push(c[d].getAttribute("name"));return b}window.Polymer({is:"panel-errors",behaviors:[window.Polymer.InitializeHelp],attached:function(){for(var b=this,c=b.$.filters.querySelectorAll(".filtertoggle"),d=function(){for(var c=b.$.groupcontainer.querySelectorAll("panel-errors-group"),d=0;d<c.length;d++)c[d].applyFilters(a(b))},e=0;e<c.length;e++)c[e].addEventListener("click",d)},errorHandler:null,properties:{stringErrorsandWarnings:String},initialize:function(b,d,e){var f=this;f.errorHandler=b,c.addReadyListener(function(a){f.stringErrorsandWarnings=a.i18n.translate("Errors and Warnings").fetch()});var g=f.$.groupcontainer,h=function(a){var b=[];a?a.forEach(function(a){var c=g.querySelector("panel-errors-group[name='"+a+"']");c&&b.push(c)}):b=g.querySelectorAll("panel-errors-group");for(var c=0;c<b.length;c++)b[c].parentNode.removeChild(b[c])};f.errorHandler.listener.addListener("clearMessages",function(a){var b=g.querySelector("panel-errors-group[name='"+a.group+"']");b&&(b.$.content.removeRows(a.messages),b.$.content.rows||(h([a.group]),a.clearGroup()))}),f.errorHandler.listener.addListener("clearGroups",h),f.errorHandler.listener.addListener("message",function(b){var c=g.querySelector("panel-errors-group[name='"+b.group.name+"']");if(!c){for(var h=f.$.filters.querySelectorAll(".filtertoggle"),i=0;i<h.length;i++)h[i].setAttribute("active",null);c=document.createElement("panel-errors-group"),c.setAttribute("name",b.group.name),c.groupInfo=b.group.info,c.initialize(),c.applyFilters(a(f)),g.firstChild?g.insertBefore(c,g.firstChild):g.appendChild(c)}c&&c.addError(b),b.type!==e.ETypes.NT_INFO&&d.activate(f,b.type===e.ETypes.NT_ERROR||b.type===e.ETypes.NT_WARNING)&&(b.toast=!1)}),f.$.smallHelp.addEventListener("click",function(){f.helpActivated=!f.helpActivated}),f.behaviors[0]._acquireHelp(f),f.behaviors[0]._initializeHelpAsync(f,window.multisim.rootFolder+"resources/help_en/help-metadata.json")}})}()}}}),a.register("106",[],function(){return{setters:[],execute:function(){}}}),a.register("165",[],function(){return{setters:[],execute:function(){}}}),a.register("166",["a7","104","167","12","2d","29","165"],function(a,b){"use strict";function c(a,b){b?a.setAttribute("disabled","disabled"):a.removeAttribute("disabled"),a.$.id_tags_tag&&(a.$.id_tags_tag.disabled=b)}var d,e,f;return{setters:[function(a){},function(a){},function(a){},function(a){d=a.isChildOrSelf},function(a){e=a.default},function(a){f=a.default},function(a){}],execute:function(){window.Polymer({is:"control-tags",properties:{stringAddTag:String,stringRemovingTag:String,noMatchingTagsFound:String,alreadyAddedTag:String,maximumNumberOfTags:String,tagTooLong:String,tags:{reflectToAttribute:!1,type:Array,value:[],notify:!0,observer:"_tagsChanged"},maxTags:{type:Number,value:10},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1}},_disabledChanged:function(){c(this,this.disabled)},_commandContextHelper:null,set commandContextHelper(a){var b=this,d=function(){var a=b._commandContextHelper.testContextEnabled();a===b.contextDisabled&&(b.contextDisabled=!a,c(b.$.button,b.disabled||b.contextDisabled))};a!==b._commandContextHelper&&(b._commandContextHelper&&b._commandContextHelper.removeContextChangeListener(d),b._commandContextHelper=a,b._commandContextHelper&&b._commandContextHelper.addContextChangeListener(d)),d()},get commandContextHelper(){return this._commandContextHelper},_tagsChanged:function(){this.onValueChange&&this.onValueChange(this.tags.slice())},remove:function(a){this.tags=this.tags.filter(function(b){return b!==a.target.value}),this.$.id_tags_tag.focus()},cleanString:function(a){return a.replace(/[`*|?;:'"<>\{\}\[\]\\\/]/gi,"").trim().replace(/\s+/g," ")},applyTags:function(a){var b=this;if(a){var c=a.split(",");b.tags=b.tags.concat(c.map(function(a){return b.cleanString(a)}).filter(function(a,c,d){return!!a&&-1===b.tags.indexOf(a)&&d.indexOf(a)>=c}));var d=b.tags.filter(function(a){return a.length>99});this.tags=b.tags.filter(function(a){return a.length<=99}),b.tags.length>b.maxTags?(b.$.tagautocomplete.suggestionInfoString=b.maximumNumberOfTags,b.$.id_tags_tag.value=b.tags.slice(b.maxTags),b.tags=this.tags.slice(0,b.maxTags)):d.length?b.$.tagautocomplete.suggestionInfoString=b.tagTooLong:(b.$.tagautocomplete.suggestionInfoString="",b.$.id_tags_tag.value="")}},attached:function(){var a=this;this.$.id_tags_tag.disabled=this.disabled;var b=this.$.tagautocomplete;b.matchedInputControl=this.$.id_tags_tag,b.onSuggestionApplied=function(b){a.applyTags(b)},b.getAutoComplete=function(c,d,f){var g=c.split(",");g.filter(function(a){return a.length>99}).length>0?b.suggestionInfoString=a.tagTooLong:g.length>0&&function(){var d=null,h=!1,i=!1;if(g.length>1){g=g.map(function(b){return a.cleanString(b)});var j=g.length;g=g.filter(function(b,c){return-1===a.tags.indexOf(b)&&g.indexOf(b)>=c}),i=j>g.length,i&&(b.suggestionInfoString=a.alreadyAddedTag),d=g.pop(),a.tags=a.tags.concat(g),a.tags.length>a.maxTags?(b.suggestionInfoString=a.maximumNumberOfTags,a.$.id_tags_tag.value=a.tags.slice(a.maxTags).concat([d]).join(","),a.tags=a.tags.slice(0,a.maxTags),h=!0,d=""):(a.$.id_tags_tag.value=d,c=d)}else d=c;var k={matches:[],offset:0};d?(b.suggestionInfoString=a.noMatchingTagsFound,e.debounce(function(){var b=new XMLHttpRequest;b.onload=function(){if(200===b.status)try{var c=JSON.parse(b.responseText);k.matches=c.tags.filter(function(b){return!!b&&-1===a.tags.indexOf(b)}).map(function(a){return{value:a,displayText:a}}),k.offset=d.length,f(k)}catch(a){console.log(a)}},b.open("get","/api/v1/tag-autocomplete?tag="+a.cleanString(d)),b.send()},250)()):(f(k),h||i||(b.suggestionInfoString=""))}()},this.$.id_tags_tag.addEventListener("keydown",function(b){switch(b.keyCode){case 13:a.applyTags(b.target.value);break;case 27:b.target.value="";break;case 8:a.$.id_tags_tag.value||(a.tags=a.tags.slice(0,a.tags.length-1))}}),this.$.id_tags_tag.addEventListener("focus",function(){a.$.addtagmessage.setAttribute("hidden","")}),this.$.id_tags_tag.addEventListener("blur",function(b){d(b.relatedTarget,a)||(a.applyTags(b.target.value),b.target.value||a.$.addtagmessage.removeAttribute("hidden",""))}),f.addReadyListener(function(b){a.stringAddTag=b.i18n.translate("add a tag").fetch(),a.stringRemovingTag=b.i18n.translate("Removing tag").fetch(),a.noMatchingTagsFound=b.i18n.translate("No matching tags found").fetch(),a.alreadyAddedTag=b.i18n.translate("That tag has already been added.").fetch(),a.maximumNumberOfTags=b.i18n.translate("There is a maximum of %1s tags. Remove an existing tag to add this tag.").fetch(a.maxTags),a.tagTooLong=b.i18n.translate("Tags can be a maximum of 99 characters in length.").fetch()})}})}}}),a.register("168",[],function(){return{setters:[],execute:function(){}}}),a.register("167",["a7","12","168"],function(a,b){"use strict";function c(a,b){var e=this,f=function(b){var f=d(b.target,a)||d(b.target,a.matchedInputControl);return f||(a.$.suggestionsList.options=[],a.$.suggestionsList.value=[],a.$.suggestionsList.classList.toggle("hide",!0),c(e,!1)),f};b?(window.addEventListener("mousedown",f,!0),window.addEventListener("touchstart",f,!0)):(window.removeEventListener("mousedown",f,!0),window.removeEventListener("touchstart",f,!0))}var d;return{setters:[function(a){},function(a){d=a.isChildOrSelf},function(a){}],execute:function(){window.Polymer({is:"control-autocomplete",properties:{suggestionInfoString:{reflectToAttribute:!1,type:String,value:"",notify:!0,observer:"_suggestionInfoStringChanged"},matchedInputControl:{reflectToAttribute:!1,type:Object,value:null,notify:!0,observer:"_matchedControlChanged"},growDirection:String},_matchValue:"",_matchOffset:0,_selectionRange:{start:0,end:0},_suggestionInfoStringChanged:function(){this.$.suggestioninfo.style.display=this.$.suggestionsList.options.length||!this.suggestionInfoString.length?"none":null},getAutoComplete:null,doFindSuggestions:function(a,b){var d=this;this._matchValue=void 0!==a&&null!==a?a:this.matchedInputControl?this.matchedInputControl.value:null,this._selectionRange=b||{start:this._matchValue.length,end:this._matchValue.length},this.getAutoComplete&&this.getAutoComplete(this._matchValue,b,function(a){d._matchOffset=a.offset,d.$.suggestionsList.options=a.matches,d.$.suggestionsList.value=a.matches.length?[a.matches[0].value]:[],d.$.suggestioninfo.style.display=a.matches.length||!d.suggestionInfoString.length?"none":null,d.$.suggestionsList.classList.toggle("hide",!a.matches.length),c(d,a.matches.length)})},_matchedControlChanged:function(){var a=this;this.matchedInputControl&&function(){var b="";a.matchedInputControl.oninput=function(c){var d=c instanceof Event?a.matchedInputControl.value:c,e=d.length<b.length?"":d;a.doFindSuggestions(e,{start:a.matchedInputControl.selectionStart,end:a.matchedInputControl.selectionEnd}),b=d},a.matchedInputControl.addEventListener("keydown",function(b){var e=!1;switch(b.keyCode){case 9:case 13:a._applySuggestion(),e=!0;break;case 27:a.value="",e=!0;break;case 40:d(document.activeElement,a.$.suggestionsList)||(a.$.suggestionsList.focus(),a.$.suggestionsList.handleKeyboardEvent(b),a.$.suggestionsList.handleKeyboardEvent(b),e=!0);break;case 34:d(document.activeElement,a.$.suggestionsList)||(a.$.suggestionsList.focus(),a.$.suggestionsList.handleKeyboardEvent(b),e=!0)}var f=function(b){var e=!1;switch(b.keyCode){case 9:b.keyCode=13;break;case 27:a.$.suggestionsList.options=[],a.$.suggestionsList.value=[],a.$.suggestioninfo.style.display=a.suggestionInfoString.length?null:"none",a.$.suggestionsList.classList.toggle("hide",!0),c(a,!1),d(document.activeElement,a.matchedInputControl)||a.matchedInputControl.focus(),e=!0}return e};a.matchedInputControl.keydownRedirect=f,a.$.suggestionsList.keydownRedirect=f,e&&(b.preventDefault(),b.cancelBubble=!0)})}()},attached:function(){var a=this;this.$.suggestionsList.classList.toggle("hide",!0),this.$.suggestionsList.onValueChange=function(){a._applySuggestion()}},_applySuggestion:function(){this.$.suggestionsList.options=[],this.$.suggestioninfo.style.display=this.suggestionInfoString.length?null:"none",this.$.suggestionsList.classList.toggle("hide",!0),c(this,!1);var a={start:this._selectionRange.start,end:this._selectionRange.end};if(this.$.suggestionsList.value.length){var b=this._matchValue,e=this.$.suggestionsList.value[0],f=this._selectionRange.start-this._matchOffset;b=b.substring(0,f)+e+b.substring(this._selectionRange.end),a.end=a.start=f+e.length,this.matchedInputControl.value=b,this.matchedInputControl.setSelectionRange(a.start,a.end),(d(this,this.matchedInputControl)||d(document.activeElement,this.matchedInputControl))&&(!d(this,this.matchedInputControl)||document.activeElement instanceof HTMLInputElement)||this.matchedInputControl.focus(),a={start:this.matchedInputControl.selectionStart,end:this.matchedInputControl.selectionEnd},this.onSuggestionApplied&&this.onSuggestionApplied(b,a),this.matchedInputControl.triggerValueChanged&&this.matchedInputControl.triggerValueChanged()}}})}}}),a.register("169",[],function(){return{setters:[],execute:function(){}}}),a.register("16a",[],function(){return{setters:[],execute:function(){}}}),a.register("b9",["a7","169","16a"],function(a,b){"use strict";return{setters:[function(a){},function(a){},function(a){}],execute:function(){!function(){function a(a,b){b?a.setAttribute("disabled","disabled"):a.removeAttribute("disabled")}window.Polymer({is:"multisim-toggle",properties:{checked:{reflectToAttribute:!1,type:Boolean,value:"",notify:!0,observer:"_valueChanged"},label:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_labelChanged"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1}},_notifyValueChanged:function(){var a=this.behaviours?this.behaviours.onValueChange:this.onValueChange;a=a||this.onValueChange,a&&a.call(this,this.checked),this.fire("changed")},_disabledChanged:function(){a(this.$.checkbox,this.disabled)},_commandContextHelper:null,set commandContextHelper(b){var c=this,d=function(){var b=c._commandContextHelper.testContextEnabled();b==c.contextDisabled&&(c.contextDisabled=!b,a(c.$.checkbox,c.disabled||c.contextDisabled))};b!=c._commandContextHelper&&(c._commandContextHelper&&c._commandContextHelper.removeContextChangeListener(d),c._commandContextHelper=b,c._commandContextHelper&&c._commandContextHelper.addContextChangeListener(d)),d()},get commandContextHelper(){return this._commandContextHelper},attached:function(){var a=this;this.$.checkbox.addEventListener("change",function(){a.checked=this.checked,a._notifyValueChanged()})},_labelChanged:function(){this.$.toggleLabel.innerHTML=this.label},_valueChanged:function(){this.$.checkbox.checked=this.checked}})}()}}}),a.register("16b",[],function(){return{setters:[],execute:function(){}}}),a.register("104",["a7","167","b9","113","29","3e","16b"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){},function(a){},function(a){},function(a){c=a.fitUnitLabel},function(a){d=a.default},function(a){e=a.ECommandContexts},function(a){}],execute:function(){!function(){function a(a,b){b?(a.classList.add("disabled"),a.setAttribute("disabled","disabled")):(a.classList.remove("disabled"),a.removeAttribute("disabled"))}window.Polymer({is:"multisim-input",properties:{value:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_valueChanged"},label:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_labelChanged"},placeholder:{reflectToAttribute:!0,type:String,value:""},units:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_unitsChanged"},errorlabel:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_errorLabelChanged"},valid:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_validityChanged"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},index:{reflectToAttribute:!0,type:Number,value:0},password:{reflectToAttribute:!0,type:Boolean,value:!1},validator:{type:Object,value:null,observer:"_changeValidator"},oninput:{type:Object,value:null,notify:!0},checkenabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0},checked:{reflectToAttribute:!1,type:Boolean,value:"",notify:!0,observer:"_checkedChanged"},userChange:{reflectToAttribute:!1,type:Boolean,value:!1},autocomplete:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_autoCompleteEnabledStateChanged"}},_autoCompleteEnabledStateChanged:function(){var a=this;this.autocomplete&&function(){var b=function b(){var c=a.$$("#autoComplete");c&&(a.removeEventListener("dom-change",b),c.matchedInputControl=a,a.onAutoCompleteReady&&(a.onAutoCompleteReady(c),a.onAutoCompleteReady=null))};a.addEventListener("dom-change",b),b()}()},_changeValidator:function(){this._attached&&this._checkValidity(this.value)},_commandContextHelper:null,set commandContextHelper(b){var c=this,d=function(){var b=c._commandContextHelper.testContextEnabled();b==c.contextDisabled&&(c.contextDisabled=!b,a(c.$.multisimTextInput,c.disabled||c.contextDisabled))};b!=c._commandContextHelper&&(c._commandContextHelper&&c._commandContextHelper.removeContextChangeListener(d),c._commandContextHelper=b,c._commandContextHelper&&c._commandContextHelper.addContextChangeListener(d)),d()},get commandContextHelper(){return this._commandContextHelper},onAutoCompleteReady:null,set title(a){"number"!=typeof a||!isNaN(a)&&a!=Number.POSITIVE_INFINITY&&a!=Number.NEGATIVE_INFINITY||(a=d.i18n.translate(a.toString()).fetch()),this.$.multisimTextInput.title="number"==typeof a&&(Math.abs(a)>9999||Math.abs(a)<1e-4&&0!==a)?a.toExponential():a},get title(){return this.$.multisimTextInput.title},_editableDuringSimulation:void 0,_validityChanged:function(){this.valid?(this.$.multisimTextInput.classList.remove("invalid"),this.$.errorContainer.style.display="none"):(this.$.multisimTextInput.classList.add("invalid"),0!==this.errorlabel.length?this.$.errorContainer.style.display="":this.$.errorContainer.style.display="none")},_checkValidity:function(a){var b=this;this.validator?this.validator(a,function(a){b.errorlabel=a.errorMessage?a.errorMessage:"",b.valid=a.valid}):(this.errorlabel="",this.valid=!0)},triggerValueChanged:function(){this.userChange=!0,this._checkValidity(this.value),this._notifyValueChanged()},_notifyValueChanged:function(){this.onValueChange&&this.onValueChange(this.value),this.fire("changed")},_checkedChanged:function(){this.checkenabled&&void 0!==this._editableDuringSimulation&&(this.disabled=!this.checked,this._commandContextHelper&&(this.checked&&this._editableDuringSimulation?this._commandContextHelper.contextEnable=[e.CC_SIMULATION,e.CC_EMBEDDED]:this._commandContextHelper.contextEnable=null),this.onCheckChange&&this.onCheckChange(this.checked))},_disabledChanged:function(){a(this.$.multisimTextInput,this.disabled||this.contextDisabled)},_attached:!1,keydownRedirect:null,attached:function(){var a=this,b=!1,d=a._commandContextHelper;a._attached=!0,this._editableDuringSimulation=d&&Array.isArray(d.contextEnable)&&-1!==d.contextEnable.indexOf("simulation"),this.$.multisimTextInput.addEventListener("panstart",function(a){a.stopPropagation()}),this.$.multisimTextInput.addEventListener("mousedown",function(a){a.stopPropagation()}),this.$.multisimTextInput.addEventListener("touchstart",function(a){a.stopPropagation()}),this.password&&this.$.multisimTextInput.setAttribute("type","password"),this.$.multisimTextInput.onkeydown=function(c){var d={keyCode:c.keyCode,srcEvent:c};!!a.keydownRedirect&&a.keydownRedirect(d)||(13===d.keyCode?(a.value!==this.value||b)&&(b=!1,a.set("value",this.value),a.userChange=!0,a._checkValidity(this.value),a._notifyValueChanged()):27===d.keyCode&&(this.value=a.value,a.oninput&&a.oninput(this.value),a._checkValidity(this.value)))};var e=function b(){this.selectionStart===this.selectionEnd&&a.select(),a.$.multisimTextInput.removeEventListener("click",b)};this.$.multisimTextInput.onblur=function(){(a.value!==this.value||b)&&(b=!1,a.value=this.value,a.userChange=!0,a._checkValidity(this.value),a._notifyValueChanged()),a.$.multisimTextInput.removeEventListener("click",e),a.onblur&&a.onblur()},this.$.multisimTextInput.oninput=function(){a.oninput&&a.oninput(this.value),a._checkValidity(this.value)},this.$.multisimTextInput.addEventListener("mousedown",function(a){document.activeElement!==this&&0===a.button&&this.setSelectionRange(0,0)}),this.$.multisimTextInput.onfocus=function(){a.$.multisimTextInput.addEventListener("click",e);for(var c=this.parentNode;!(null===c||c.classList&&c.classList.contains("scrollContainer"));)c=c.parentNode;var d=this.getBoundingClientRect();if(c){var f=c.getBoundingClientRect();(d.top<f.top||d.bottom>f.bottom||d.left<f.left||d.right>f.right)&&this.scrollIntoView(!0)}var g=a.valid;a._checkValidity(this.value),g!==a.valid&&(b=!0),a.onfocus&&a.onfocus()},this.hasAttribute("autofocus")&&this.$.multisimTextInput.setAttribute("autofocus",""),this.units.length&&c(this),this._checkedChanged()},select:function(){try{this.$.multisimTextInput.setSelectionRange(0,this.$.multisimTextInput.value.length)}catch(a){console.log(a)}},onblur:null,onfocus:null,get selectionStart(){return this.$.multisimTextInput.selectionStart},get selectionEnd(){return this.$.multisimTextInput.selectionEnd},setSelectionRange:function(a,b){b=b||a,this.$.multisimTextInput.setSelectionRange(Math.min(Math.min(a,b),this.$.multisimTextInput.value.length),Math.min(Math.max(a,b),this.$.multisimTextInput.value.length))},blur:function(){this.$.multisimTextInput.onblur()},focus:function(){this.$.multisimTextInput.focus()},validate:function(){this._checkValidity(this.value)},_labelChanged:function(){this.$.labelText.innerHTML=this.label,0===this.label.length?this.$.inputWrapper.classList.add("noLabel"):this.$.inputWrapper.classList.remove("noLabel")},_unitsChanged:function(){this.$.unitText.innerHTML=this.units,0===this.units.length?this.$.inputWrapper.classList.add("noUnitLabel"):this.$.inputWrapper.classList.remove("noUnitLabel")},_valueChanged:function(){this.$.multisimTextInput.value=this.value,this._checkValidity(this.value),this.userChange=!1},_errorLabelChanged:function(){this.$.errorText.innerHTML=this.errorlabel}})}()}}}),a.register("113",[],function(a,b){"use strict";function c(a){var b=a.$.unitText,c=b.getBoundingClientRect(),d=a.$.unitLabel.getBoundingClientRect();if(c.width&&d.width)for(var e=parseInt(window.getComputedStyle(b).fontSize,10);c.width>d.width-4&&e>=10;)e--,b.style.fontSize=e+"px",c=b.getBoundingClientRect()}return a("fitUnitLabel",c),{setters:[],execute:function(){}}}),a.register("16c",[],function(){return{setters:[],execute:function(){}}}),a.register("130",["a7","113","16c"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){c=a.fitUnitLabel},function(a){}],execute:function(){!function(a){function b(a,b){b?(a.classList.add("disabled"),a.setAttribute("disabled","disabled")):(a.classList.remove("disabled"),a.removeAttribute("disabled"))}window.Polymer({is:"multisim-multiline-input",properties:{value:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_valueChanged"},label:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_labelChanged"},units:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_unitsChanged"},errorlabel:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_errorLabelChanged"},valid:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_validityChanged"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},index:{reflectToAttribute:!0,type:Number,value:0},rows:{reflectToAttribute:!0,type:Number,value:5},readonly:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_readonlyChanged"}},_readonlyChanged:function(){this.readonly?this.$.multisimTextInput.setAttribute("readonly",""):this.$.multisimTextInput.removeAttribute("readonly")},_commandContextHelper:null,set commandContextHelper(a){var c=this,d=function(){var a=c._commandContextHelper.testContextEnabled();a===c.contextDisabled&&(c.contextDisabled=!a,b(c.$.multisimTextInput,c.disabled||c.contextDisabled))};a!==c._commandContextHelper&&(c._commandContextHelper&&c._commandContextHelper.removeContextChangeListener(d),c._commandContextHelper=a,c._commandContextHelper&&c._commandContextHelper.addContextChangeListener(d)),d()},get commandContextHelper(){return this._commandContextHelper},set validator(a){this.validatorFunc=a,this._attached&&this._checkValidity(this.value)},get validator(){return this.validatorFunc||null},set title(a){this.$.multisimTextInput.title="number"==typeof a&&(Math.abs(a)>9999||Math.abs(a)<1e-4&&0!==a)?a.toExponential():a},get title(){return this.$.multisimTextInput.title},_validityChanged:function(){this.valid?(this.$.multisimTextInput.classList.remove("invalid"),this.$.errorContainer.style.display="none"):(this.$.multisimTextInput.classList.add("invalid"),0!==this.errorlabel.length?this.$.errorContainer.style.display="":this.$.errorContainer.style.display="none")},_checkValidity:function(a){var b=this;this.validatorFunc?this.validatorFunc(a,function(a){b.errorlabel=a.errorMessage?a.errorMessage:"",b.valid=a.valid}):(this.errorlabel="",this.valid=!0)},_notifyValueChanged:function(){var a=this.behaviours?this.behaviours.onValueChange:this.onValueChange;a=a||this.onValueChange,a&&a.call(this,this.value),this.fire("changed")},_disabledChanged:function(){b(this.$.multisimTextInput,this.disabled||this.contextDisabled)},_attached:!1,attached:function(){var b=this,d=!1;b._attached=!0,b.$.multisimTextInput.addEventListener("mousedown",function(a){a.stopPropagation()}),b.$.multisimTextInput.addEventListener("touchstart",function(a){a.stopPropagation()}),b.$.multisimTextInput.addEventListener("wheel",function(a){a.stopPropagation()}),a.isIos?function(){var a=null,c=null;b.$.multisimTextInput.addEventListener("panstart",function(d){a=d.gesture.center,c={x:b.$.multisimTextInput.scrollLeft,y:b.$.multisimTextInput.scrollTop},d.stopPropagation()}),b.$.multisimTextInput.addEventListener("pan",function(d){b.$.multisimTextInput.scrollLeft=c.x-(d.gesture.center.x-a.x),b.$.multisimTextInput.scrollTop=c.y-(d.gesture.center.y-a.y)})}():b.$.multisimTextInput.addEventListener("panstart",function(a){a.stopPropagation()}),b.$.multisimTextInput.onkeydown=function(a){27===a.keyCode&&(this.value=b.value,b.onInput&&b.onInput(this.value),b._checkValidity(this.value)),a.cancelBubble=!0},this.$.multisimTextInput.onkeyup=function(a){13===a.keyCode&&(b.value!==this.value||d)&&(d=!1,b.value=this.value,b._checkValidity(this.value),b._notifyValueChanged()),a.cancelBubble=!0};var e=function a(){this.selectionStart===this.selectionEnd&&b.select(),b.$.multisimTextInput.removeEventListener("click",a)};this.$.multisimTextInput.onblur=function(){(b.value!==this.value||d)&&(d=!1,b.value=this.value,b._checkValidity(this.value),b._notifyValueChanged()),b.$.multisimTextInput.removeEventListener("click",e)},this.$.multisimTextInput.oninput=function(){b.onInput&&b.onInput(this.value),b._checkValidity(this.value)},this.$.multisimTextInput.addEventListener("mousedown",function(a){document.activeElement!==this&&0===a.button&&this.setSelectionRange(0,0)}),this.$.multisimTextInput.onfocus=function(){b.$.multisimTextInput.addEventListener("click",e);for(var a=this.parentNode;!(null===a||a.classList&&a.classList.contains("scrollContainer"));)a=a.parentNode;var c=this.getBoundingClientRect();if(a){var f=a.getBoundingClientRect();(c.top<f.top||c.bottom>f.bottom||c.left<f.left||c.right>f.right)&&this.scrollIntoView(!0)}var g=b.valid;b._checkValidity(this.value),g!=b.valid&&(d=!0)},this.hasAttribute("autofocus")&&this.$.multisimTextInput.setAttribute("autofocus",""),this.units.length&&c(this)},focus:function(){this.$.multisimTextInput.focus()},select:function(){try{this.$.multisimTextInput.setSelectionRange(0,this.$.multisimTextInput.value.length)}catch(a){console.log(a)}},blur:function(){this.$.multisimTextInput.onblur()},validate:function(){this._checkValidity(this.value)},_labelChanged:function(){this.$.labelText.innerHTML=this.label,0===this.label.length?this.$.inputWrapper.classList.add("noLabel"):this.$.inputWrapper.classList.remove("noLabel")},_valueChanged:function(){this.$.multisimTextInput.value!==this.value&&(this.$.multisimTextInput.value=this.value),this._checkValidity(this.value)},_errorLabelChanged:function(){this.$.errorText.innerHTML=this.errorlabel},_unitsChanged:function(){this.$.unitText.innerHTML=this.units,0===this.units.length?this.$.inputWrapper.classList.add("noUnitLabel"):this.$.inputWrapper.classList.remove("noUnitLabel")}})}(window.multisim.browserDetect)}}}),a.register("16d",[],function(){return{setters:[],execute:function(){}}}),a.register("105",["a7","16d"],function(a,b){"use strict";return{setters:[function(a){},function(a){}],execute:function(){!function(){window.Polymer({is:"multisim-small-help",properties:{label:{reflectToAttribute:!0,type:String,value:"default",notify:!0,observer:"_labelChanged"},visible:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_visibleChanged"},parameter:{reflectToAttribute:!0,type:String,value:"",notify:!0}},_labelChanged:function(){this.$.labelText.innerHTML=this.label},_visibleChanged:function(){this.visible?this.$.labelText.classList.add("visible"):this.$.labelText.classList.remove("visible")}})}()}}}),a.register("16e",[],function(){return{setters:[],execute:function(){}}}),a.register("16f",["a7","106","2d","166","104","130","105","29","30","3e","16e"],function(a,b){"use strict";var c,d,e,f;return{setters:[function(a){},function(a){},function(a){c=a.default},function(a){},function(a){},function(a){},function(a){},function(a){d=a.default},function(a){e=a.default},function(a){f=a.ECommandContexts},function(a){}],execute:function(){!function(){function a(a,b){a.metadata={description:b.$.description.value,private:b.$.private.active,tags:b.$.tags.tags.slice()},a.hasSeenMetadata=!0}window.Polymer({is:"metadata-properties",behaviors:[window.Polymer.InitializeHelp],properties:{circuitName:String,stringPublic:String,stringPrivate:String,stringVisibility:String,strUpgradeString:String,immediateMode:{reflectToAttribute:!0,type:Boolean,value:!1},handleChange:{reflectToAttribute:!1,type:Function,value:null},preferredName:{reflectToAttribute:!1,type:String,value:null,notify:!0,observer:"_preferrednameChanged"},stringHeading:String},_preferrednameChanged:function(){this.reset()},ready:function(){},initialize:function(b){this.$.private.disabled=this.$.public.disabled=this.$.designname.disabled=this.$.tags.disabled=this.$.description.readonly=b.commandInterface.activeAppMode===f.CC_EMBEDDED;var g=this,h=g.$.designname,i=g.$.description,j=function(){var a=g.$.errorTextString.textContent;g.$.private.active?b.fileDataController.getSubscriptionInfo(function(b){g.$.errorTextString.textContent=b.canSavePrivate?"":g.strUpgradeString,g.$.errorTextString.textContent!=a&&g.handleChange&&g.handleChange()}):g.$.errorTextString.textContent="",g.$.errorTextString.textContent!=a&&g.handleChange&&g.handleChange()};d.addReadyListener(function(a){h.label=a.i18n.translate("Name").fetch(),i.label=a.i18n.translate("Description").fetch(),g.stringHeading=a.i18n.translate("Circuit Details").fetch(),g.stringPublic=a.i18n.translate("Public").fetch(),g.stringPrivate=a.i18n.translate("Private").fetch(),g.stringVisibility=a.i18n.translate("Visibility").fetch(),g.strUpgradeString=a.i18n.translate("Private circuits are only available for premium accounts.").fetch(),g.reset(b)}),b.fileDataController.listeners.addListener(b.fileDataController.fileDataEvents.FDE_SUBSCRIPTION_CHANGED,function(){j()}),b.activeDesign.listeners.addListener(e.NAME_CHANGED,function(a){h.value=a.newname}),b.activeDesign.listeners.addListener(e.METADATA_CHANGED,function(a){i.value=a.newMetaData.description||"",g.$.private.active=!!a.newMetaData.private,g.$.public.active=!a.newMetaData.private,g.$.tags.tags=a.newMetaData.tags.slice(),j()}),b.listeners.addListener(b.events.ACTIVEDESIGNCHANGED,function(a){a.activeDesign&&(a.activeDesign.listeners.addListener(e.NAME_CHANGED,function(a){h.value=a.newname}),a.activeDesign.listeners.addListener(e.METADATA_CHANGED,function(a){i.value=a.newMetaData.description||"",g.$.private.active=!!a.newMetaData.private,g.$.public.active=!a.newMetaData.private,g.$.tags.tags=a.newMetaData.tags.slice(),j()}),h.value=a.activeDesign.name||a.activeDesign.defaultName,i.value=a.activeDesign.metadata.description||"",g.$.private.active=!!a.activeDesign.metadata.private,g.$.public.active=!a.activeDesign.metadata.private,g.$.tags.tags=a.activeDesign.metadata.tags.slice(),j())}),h.validator=b.activeDesign.designNameValidator,h.oninput=function(){g.handleChange&&g.handleChange()},h.onblur=function(){h.valid||(g.reset(b),g.handleChange&&g.handleChange())},h.onValueChange=function(){h.valid&&(g.immediateMode&&(b.activeDesign.name=h.value.trim(),b.activeDesign.hasSeenMetadata=!0),g.handleChange&&g.handleChange())},i.onValueChange=function(){i.valid&&(g.immediateMode&&a(b.activeDesign,g),g.handleChange&&g.handleChange())},g.$.tags.onValueChange=function(d){g.immediateMode&&!c.isEqual(d,b.activeDesign.metadata.tags)&&a(b.activeDesign,g)},g.$.private.addEventListener("click",function(){b.fileDataController.getSubscriptionInfo(function(c){c.canSavePrivate?(g.$.private.active=!0,g.$.public.active=!1,g.immediateMode&&a(b.activeDesign,g)):(j(),b.upgradedialog.stringFreeAccount=g.strUpgradeString,b.upgradedialog.stringNotLoggedIn=g.strUpgradeString,b.upgradedialog.loggedInStatus=c.logged_in,b.upgradedialog.open())})}),g.$.public.addEventListener("click",function(){g.$.private.active=!1,g.$.public.active=!0,g.immediateMode&&a(b.activeDesign,g),j()}),g.$.smallHelp.addEventListener("click",function(){g.helpActivated=!g.helpActivated}),g.behaviors[0]._acquireHelp(g),g.behaviors[0]._initializeHelpAsync(g,window.multisim.rootFolder+"resources/help_en/help-metadata.json")},get valid(){return this.$.designname.valid&&!this.$.errorTextString.textContent},apply:function(b){this.valid&&(this.$.designname.blur(),this.$.description.blur(),b.activeDesign.name=this.$.designname.value.trim(),a(b.activeDesign,this))},handleShow:function(){},reset:function(a){this.$.designname.value=a&&a.activeDesign?this.preferredName||a.activeDesign.name||a.activeDesign.defaultName:this.preferredName,this.$.description.value=a&&a.activeDesign?a.activeDesign.metadata.description||"":"",this.$.tags.tags=a&&a.activeDesign?a.activeDesign.metadata.tags||"":"",this.$.private.active=!(!a||!a.activeDesign)&&!!a.activeDesign.metadata.private,this.$.public.active=!this.$.private.active}})}()}}}),a.register("170",[],function(){return{setters:[],execute:function(){}}}),a.register("171",["a7","16f","170"],function(a,b){"use strict";return{setters:[function(a){},function(a){},function(a){}],execute:function(){!function(){window.Polymer({is:"panel-metadata",properties:{},ready:function(){},init:function(a){this.$.metapropertycontainer.initialize(a)}})}()}}}),a.register("172",[],function(){return{setters:[],execute:function(){}}}),a.register("173",["a7","15a","15b","15d","164","171","174","29","172"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"left-rail",properties:{selected:{reflectToAttribute:!0,type:Number,value:0},stringSaveandload:String,stringMetadata:String,stringSpicenetlist:String,stringWarningsanderrors:String,stringComponents:String,stringHideLeftRail:String,stringDetails:String,stringNetlist:String,stringErrors:String},commandInterface:null,get resizeContainer(){return this.querySelector("resizeable-container")},get errorPanel(){return this.querySelector("panel-errors")},get metaDataPanel(){return this.querySelector("panel-metadata")},get netListPanel(){return this.querySelector("panel-netlist")},activate:function(a,b){for(var c=this.$.panelContent,d=c.children,e=a,f=[],g=[],h=0;h<d.length;h++)f.push({index:h,child:d[h]});do{g=f.filter(function(a){return a.child===e}),e=e.parentNode}while(e&&!g.length);if(g.length&&(this.selected=g[0].index),b){var i=this.commandInterface.getCommandObject("showleftpanel");i.enabled&&i.startCommand()}return!this.parentNode.parentNode.parentNode.forceNarrow&&!this.parentNode.parentNode.parentNode.hasAttribute("narrow")},initialize:function(a){var b=this;c.addReadyListener(function(a){b.stringMetadata=a.i18n.translate("Meta data").fetch(),b.stringSpicenetlist=a.i18n.translate("SPICE netlist").fetch(),b.stringWarningsanderrors=a.i18n.translate("Errors and warnings").fetch(),b.stringHideLeftRail=a.i18n.translate("Close information pane").fetch(),b.stringDetails=a.i18n.translate("Details").fetch(),b.stringNetlist=a.i18n.translate("Netlist").fetch(),b.stringErrors=a.i18n.translate("Errors").fetch()}),b.commandInterface=a},ready:function(){this.selected=3}})}()}}}),a.register("45",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({INSTANCE_PROPERTY_CHANGED:"property_changed",MODEL_PROPERTY_CHANGED:"model_property_changed"}),a("default",c)}}}),a.register("3d",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({NE_CONNECT:"connect",NE_DISCONNECT:"disconnect",NE_NETSCHANGED:"netchanged",NE_TERMINALCHANGED:"terminalchanged",NE_PROPSCHANGED:"netPropertiesChanged"}),a("default",c)}}}),a.register("1b",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)})}}}),a.register("57",[],function(a,b){"use strict";function c(a){return"CKT_PARAM_"+a.replace(/<[^>]+>|\s/g,"")}function d(a){return-1!==a.indexOf("$")}function e(a){return-1!==a.indexOf("#branch")}function f(a,b){var c=a.replace(k,""),d=parseInt(a.replace(i,""),10),e=b.replace(k,""),f=parseInt(b.replace(i,""),10);return c===e?d>f?1:-1:c>e?1:-1}function g(a,b){var c=a.replace("#branch",""),d=b.replace("#branch",""),e=c.replace(k,""),f=parseInt(c.replace(j,""),10),g=d.replace(k,""),h=parseInt(d.replace(j,""),10);return e===g?f>h?1:-1:e>g?1:-1}function h(a,b,c,d){var e=Math.sqrt(b*b+c*c),f=0===c?b>=0?0:180:0===b?c>=0?90:-90:180*Math.atan2(c,b)/Math.PI,g=a.LastPoint[d];if(a.Set[d]||(a.Set[d]=0),g){var h=g%360,i=h>0?g>180?g-360:g:g<-180?g+360:g,j=f-i,k=!0;j>180?j-=360:j<-180?(j=360+j,k=!1):j>0&&(k=!1),k?f>0&&f<0&&h<0&&(a.Set[d]-=360):f<0&&f>0&&h>0&&(a.Set[d]+=360),f=a.Set[d]+g+j}return a.LastPoint[d]=f,[e,f]}var i,j,k;return a("getCktParamName",c),a("voltageFilter",d),a("currentFilter",e),a("voltageSort",f),a("currentSort",g),a("complexToMagnitudePhase",h),{setters:[],execute:function(){i=/\$([a-zA-Z]*)/,j=/[a-zA-Z]+/,k=/[0-9]+/}}}),a.register("175",["176"],function(a,b){"use strict";var c,d;return{setters:[function(a){c=a.pinBridgeModels}],execute:function(){d={spiceModel:"* Ideal Driver Model  1 = A/D out, 2 = input\naDACin1 [1] [2] aDAC\n.MODEL aDAC dac_bridge (out_low = {lowV} out_high = {highV} out_undef = {unknownV} t_rise = {max(riseT,1e-9)} t_fall = {max(fallT,1e-9)})"},c.set("REAL_CUSTOM_DAC",d),c.set("IDEAL_CUSTOM_DAC",d),c.set("IDEAL_SIMPLE_DAC",d),c.set("IDEAL_TTL74LS_DAC",d),c.set("IDEAL_CMOS74HC_DAC",d)}}}),a.register("177",["176"],function(a,b){"use strict";var c,d;return{setters:[function(a){c=a.pinBridgeModels}],execute:function(){d={spiceModel:"* Ideal Receiver Model  1 = input, 2 = A/D out\naADCin1 [2] [1] ADC\n.MODEL ADC adc_bridge (in_low = {maxLowV} in_high = {minHighV})"},c.set("REAL_CUSTOM_ADC",d),c.set("IDEAL_CUSTOM_ADC",d),c.set("IDEAL_SIMPLE_ADC",d),c.set("IDEAL_TTL74LS_ADC",d),c.set("IDEAL_CMOS74HC_ADC",d)}}}),a.register("178",["176"],function(a,b){"use strict";var c;return{setters:[function(a){c=a.pinBridgeModels}],execute:function(){c.set("REAL_TTL74LS_DAC",{spiceModel:"* TTL 74LS Driver Model\nvVCC VCC 0 dc {highV} ac 0 0\naDACin1 [1] 2 VCC 0 aDAC\n.MODEL aDAC dac_bridge_real(technology=5)"})}}}),a.register("179",["176"],function(a,b){"use strict";var c;return{setters:[function(a){c=a.pinBridgeModels}],execute:function(){c.set("REAL_TTL74LS_ADC",{spiceModel:"* TTL 74LS Receiver Model\nvVCC VCC 0 dc {highV} ac 0 0\naADCin1 [2] [1] VCC 0 ADC\n.MODEL ADC adc_bridge_real(technology=5)\naLOAD 2 0 LOAD\n.model LOAD digital_dc_load(technology=5)"})}}}),a.register("17a",["176"],function(a,b){"use strict";var c;return{setters:[function(a){c=a.pinBridgeModels}],execute:function(){c.set("REAL_CMOS74HC_DAC",{spiceModel:"* CMOST 74HC Driver Model\nvVCC VCC 0 dc {highV} ac 0 0\naDACin1 [1] 2 VCC 0 aDAC\n.MODEL aDAC dac_bridge_real(technology=2)"})}}}),a.register("17b",["176"],function(a,b){"use strict";var c;return{setters:[function(a){c=a.pinBridgeModels}],execute:function(){c.set("REAL_CMOS74HC_ADC",{spiceModel:"* CMOS 74HC Receiver Model\nvVCC VCC 0 dc {highV} ac 0 0\naADCin1 [2] [1] VCC 0 ADC\n.MODEL ADC adc_bridge_real(technology=2)\nCin 2 0 1p"})}}}),a.register("176",[],function(a,b){"use strict";function c(){d.forEach(function(a){a.supportsRiseAndFall=!!a.spiceModel.match(/{.*?(rise|fall)T.*?}/gi)})}var d;return a("processPinBridgeModels",c),{setters:[],execute:function(){a("pinBridgeModels",d=new Map),a("pinBridgeModels",d)}}}),a.register("17c",["176"],function(a,b){"use strict";var c,d;return{setters:[function(a){c=a.pinBridgeModels}],execute:function(){d={spiceModel:"* Probe Expression Bridge\nBprobe 1 0 V={min(1,max(0,(V(2)-{lowV})/{highV-lowV}))}"},c.set("PROBEEXPRESSION_CUSTOM_ADC",d),c.set("PROBEEXPRESSION_SIMPLE_ADC",d),c.set("PROBEEXPRESSION_TTL74LS_ADC",d),c.set("PROBEEXPRESSION_CMOS74HC_ADC",d)}}}),a.register("17d",["1d","1e","a1","1f","176","175","177","178","179","17a","17b","17c"],function(a,b){"use strict";function c(a,b,c,d,e,j,l,m){if(void 0===m&&(m=i.getVoltageLevelForLogicFamily(c)),void 0===m)throw new Error("Invalid logic family in pin bridge");var o=void 0;return b!==d&&function(){if(b!==f.ANALOG||d!==f.DIGITAL)throw new Error("Invalid pin bridge situation");var i=e===g.OUT?"DAC":"ADC";c!==h.THREE&&c!==h.FIVE||(c=h.CUSTOM);var p=a+"_"+c+"_"+i,q=k.get(p);if(q){o=new n(p,function(b,d,e,f){var g=e+" PARAMS: lowV="+f.lowVoltage+" maxLowV="+f.maxLowVoltage+" unknownV="+f.unknownVoltage+" minHighV="+f.minHighVoltage+" highV="+f.highVoltage;return n.supportsRiseAndFallTime(c,a)&&(g=g+" riseT="+(j||0)+" fallT="+(l||0)),"x"+d+" "+d+" "+b+" "+g},function(a){return".SUBCKT "+a+" 1 2 PARAMS: lowV=0 maxLowV=0.8 unknownV=1.0 minHighV=2.0 highV=5.0 riseT=0 fallT=0\n"+q.spiceModel+"\n.ENDS\n"},m)}}(),o}var d,e,f,g,h,i,j,k,l,m,n;return a("makePinBridgeFor",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.EOeclPortMode,g=a.EOeclPortDirection},function(a){h=a.ELogicFamily,i=a.LogicFamily,j=a.DefaultLogicFamily},function(a){k=a.pinBridgeModels,l=a.processPinBridgeModels},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){}],execute:function(){l(),a("EPinModelingRealism",m=Object.freeze({IDEAL:"IDEAL",REAL:"REAL",PROBEEXPRESSION:"PROBEEXPRESSION"})),a("EPinModelingRealism",m),a("PinBridge",n=function(){function a(b,c,e,f){var g=this;d(this,a),this.voltageLevels=f,this.getName=function(){return b},this.getSpiceInstance=function(a,b){return c(a,b,g.getName(),g.voltageLevels)},this.getSpiceModel=function(){return e(g.getName())}}return e(a,null,[{key:"createIfNeeded",value:function(a,b,d){var e=b&&b.parent,g=e&&e.activePinTechnology||j,i=e&&e.activePinRiseTime||0,k=e&&e.activePinFallTime||0,l=void 0;g===h.CUSTOM&&e&&e.activePinCustomLogicFamily&&(l=e.activePinCustomLogicFamily);var n=void 0;if(void 0!==a&&null!==a){var o=a.isDigital?f.DIGITAL:f.ANALOG,p=d.direction,q=d.mode?d.mode:f.ANALOG;n=c(g===h.SIMPLE?m.IDEAL:m.REAL,o,g,q,p,i,k,l)}return n}},{key:"supportsRiseAndFallTime",value:function(a,b){void 0===b&&(b=a===h.SIMPLE?m.IDEAL:m.REAL);var c=b+"_"+a+"_DAC",d=k.get(c);return d&&d.supportsRiseAndFall||!1}}]),a}()),a("PinBridge",n)}}}),a.register("84",["1d"],function(a,b){"use strict";var c,d;return{setters:[function(a){c=a.default}],execute:function(){a("BaseInstanceObject",d=function a(b,d){c(this,a),this.contextGUID=b,this.templateGUID=d}),a("BaseInstanceObject",d)}}}),a.register("33",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("SOCKET_STATES",c=Object.freeze({NOT_CONNECTED:"NOT_CONNECTED",CONNECTING:"CONNECTING",CONNECTED:"CONNECTED",CANCELLED:"CANCELLED",ERROR:"ERROR",URL_ERROR:"URL_ERROR"})),a("SOCKET_STATES",c)}}}),a.register("23",["1d","1e","26","27","2d","4f","84","21","29","33","2f","1f","32","30"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.BaseInstanceObject},function(a){j=a.default},function(a){k=a.default},function(a){l=a.SOCKET_STATES},function(a){m=a.isTemplateWire},function(a){n=a.DefaultLogicFamily,o=a.ELogicFamily,p=a.LogicFamily},function(a){q=a.default},function(a){r=a.default}],execute:function(){a("EXTERNAL_DATA_TYPE",s=Object.freeze({EDT_NONE:"EDT_NONE",EDT_FILE:"EDT_FILE",EDT_STREAM:"EDT_STREAM"})),a("EXTERNAL_DATA_TYPE",s),a("sourceType",t={file:0,url:1,network:2,usb:3}),a("sourceType",t),a("defaultNetworkAddress",u="wss://sigserver.multisim.com:1339"),a("defaultNetworkAddress",u),a("defaultUsbAddress",v="http://172.22.11.2/proxy-application.html"),a("defaultUsbAddress",v),a("ProbeInstance",w=function(a){function b(a,d,f,i,u){function v(a){return[j.Transient,j.Interactive,j.DC_SWEEP,j.PARAM_SWEEP].reduce(function(b,c){return b[c]={minYDisplay:a?a[c].minYDisplay:void 0,get minYDisplayValue(){return"string"==typeof this.minYDisplay||this.minYDisplay instanceof String?h(this.minYDisplay):this.minYDisplay},maxYDisplay:a?a[c].maxYDisplay:void 0,get maxYDisplayValue(){return"string"==typeof this.maxYDisplay||this.minYDisplay instanceof String?h(this.maxYDisplay):this.maxYDisplay},minYActual:a?a[c].minYActual:void 0,maxYActual:a?a[c].maxYActual:void 0},b},{})}c(this,b);var w=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));Object.defineProperty(w,"EXTERNAL_DATA_TYPE",{get:function(){return s}}),w.probeID=f,w.reversed=i||!1,w.design=u,w.source=t.file,w.file="",w.url="",w.network="",w.usb="",w.connectionState=l.NOT_CONNECTED,w.connectionTarget={},w.expression="",w.transpiledExpression="",w.displayExpression="",w.spiceExpression="",w.useDocumentLogicLevelSettings=!0,w.logicLevel=n,w.customLogicFamily=p.getVoltageLevelForLogicFamily(o.CUSTOM),w.initialExternalData=function(){switch(this.source){case t.file:this.externalData=[],this.externalDataCurrentChannelIndex=0,this.fileChannelName="",this.fileSize=0,this.fileChecksum=0;break;case t.url:this.externalURLData=[],this.externalURLDataCurrentChannelIndex=0,this.urlChannelName="";break;case t.network:this.externalNetworkData=[],this.externalNetworkDataCurrentChannelIndex=0,this.networkChannelName="";break;case t.usb:this.externalUsbData=[],this.externalUsbDataCurrentChannelIndex=0,this.usbChannelName=""}},w.getDisplayVariableName=function(){var a="";switch(this.source){case t.file:a=this.file,this.fileChannelName&&(a+=" ("+this.fileChannelName+")");break;case t.url:a=""+this.url,this.urlChannelName&&(a=this.urlChannelName+" @ "+a);break;case t.network:a=""+this.network,this.networkChannelName&&(a=this.networkChannelName+" @ "+a);break;case t.usb:a=""+this.usb,this.usbChannelName&&(a=this.usbChannelName+" @ "+a)}return a},w.getActiveChannel=function(){var a=null;switch(this.source){case t.file:a=this.externalData?this.externalData[this.externalDataCurrentChannelIndex]:null;break;case t.url:a=this.externalURLData?this.externalURLData[this.externalURLDataCurrentChannelIndex]:null;break;case t.network:a=this.externalNetworkData?this.externalNetworkData[this.externalNetworkDataCurrentChannelIndex]:null;break;case t.usb:a=this.externalUsbData?this.externalUsbData[this.externalUsbDataCurrentChannelIndex]:null}return a},w.getLoadedFileData=function(){return this.source===t.file&&this.externalData&&this.externalData.length>0?{templateGUIDs:[this.templateGUID],fileName:this.file,externalData:this.externalData}:null},w.getAttachedWireInstances=function(a,b){var c=b.getObject(this.templateGUID),d=[],e=b.objectLookup.getObjectsAtPoint(c.matrix.e,c.matrix.f),f=e.filter(function(a){return m(a)});if(f.length>0){var g=a.findInstance(this.contextGUID,f[0].templateGUID);g&&d.push(g)}return d},w.getAttachedNets=function(a,b){for(var c=a.netlist,d=[],e=this.getAttachedWireInstances(a,b),f=0;f<e.length;f++){var g=e[f],h=c.getNet(g.netName);h&&d.push(h)}return d},w.getExternalDataSourceFormat=function(){switch(this.source){case t.file:if(this.externalDataCurrentChannelIndex&&"number"==typeof this.externalDataCurrentChannelIndex||(this.externalDataCurrentChannelIndex=0),this.externalData&&this.externalData.length>this.externalDataCurrentChannelIndex)return this.externalData[this.externalDataCurrentChannelIndex].sourceFormat;break;case t.url:if(this.externalURLDataCurrentChannelIndex&&"number"==typeof this.externalURLDataCurrentChannelIndex||(this.externalURLDataCurrentChannelIndex=0),this.externalURLData&&this.externalURLData.length>this.externalURLDataCurrentChannelIndex)return this.externalURLData[this.externalURLDataCurrentChannelIndex].sourceFormat;break;case t.network:if(this.externalNetworkDataCurrentChannelIndex&&"number"==typeof this.externalNetworkDataCurrentChannelIndex||(this.externalNetworkDataCurrentChannelIndex=0),this.externalNetworkData&&this.externalNetworkData.length>this.externalNetworkDataCurrentChannelIndex)return this.externalNetworkData[this.externalNetworkDataCurrentChannelIndex].sourceFormat;break;case t.usb:if(this.externalUsbDataCurrentChannelIndex&&"number"==typeof this.externalUsbDataCurrentChannelIndex||(this.externalUsbDataCurrentChannelIndex=0),this.externalUsbData&&this.externalUsbData.length>this.externalUsbDataCurrentChannelIndex)return this.externalUsbData[this.externalUsbDataCurrentChannelIndex].sourceFormat}return k.i18n.translate("Unknown").fetch()},w.getExternalDataSignalType=function(){switch(this.source){case t.file:if(this.externalDataCurrentChannelIndex&&"number"==typeof this.externalDataCurrentChannelIndex||(this.externalDataCurrentChannelIndex=0),this.externalData&&this.externalData.length>this.externalDataCurrentChannelIndex)return this.externalData[this.externalDataCurrentChannelIndex].dataSignalType;break;case t.url:if(this.externalURLDataCurrentChannelIndex&&"number"==typeof this.externalURLDataCurrentChannelIndex||(this.externalURLDataCurrentChannelIndex=0),this.externalURLData&&this.externalURLData.length>this.externalURLDataCurrentChannelIndex)return this.externalURLData[this.externalURLDataCurrentChannelIndex].dataSignalType;break;case t.network:if(this.externalNetworkDataCurrentChannelIndex&&"number"==typeof this.externalNetworkDataCurrentChannelIndex||(this.externalNetworkDataCurrentChannelIndex=0),this.externalNetworkData&&this.externalNetworkData.length>this.externalNetworkDataCurrentChannelIndex)return this.externalNetworkData[this.externalNetworkDataCurrentChannelIndex].dataSignalType;break;case t.usb:if(this.externalUsbDataCurrentChannelIndex&&"number"==typeof this.externalUsbDataCurrentChannelIndex||(this.externalUsbDataCurrentChannelIndex=0),this.externalUsbData&&this.externalUsbData.length>this.externalUsbDataCurrentChannelIndex)return this.externalUsbData[this.externalUsbDataCurrentChannelIndex].dataSignalType}return"expression"},w.getAnalysisType=function(){return this.externalData&&this.externalData.length>0?this.externalData[0].analysisType:""},w.getXAxisType=function(){if(this.externalData&&this.externalData.length>0)return this.externalData[this.externalDataCurrentChannelIndex||0].xAxisType},w.getDomain=function(){var a=k.i18n.translate("Unknown").fetch();switch(this.source){case t.file:if(this.externalData&&this.externalData.length>0){var b=this.externalData[this.externalDataCurrentChannelIndex||0];if(b.dataType)a=b.dataType;else switch(b.analysisType){case j.Transient:case j.Interactive:a=k.i18n.translate("Time domain").fetch();break;case j.AC:a=k.i18n.translate("Frequency").fetch();break;case j.DC_SWEEP:"voltage"===b.xAxisType?a=k.i18n.translate("voltage").fetch():"current"===b.xAxisType&&(a=k.i18n.translate("current").fetch());break;case j.PARAM_SWEEP:a="time"===b.xAxisType?k.i18n.translate("Time domain").fetch():"frequency"===b.xAxisType?k.i18n.translate("Frequency").fetch():b.xAxisType}}break;case t.url:if(this.externalURLData&&this.externalURLData.length>0){var c=this.externalURLData[this.externalURLDataCurrentChannelIndex||0];c.analysisType===j.Transient?a=k.i18n.translate("Time domain").fetch():c.analysisType===j.AC&&(a=k.i18n.translate("Frequency").fetch())}break;case t.network:if(this.externalNetworkData&&this.externalNetworkData.length>0){var d=this.externalNetworkData[this.externalNetworkDataCurrentChannelIndex||0];d.analysisType===j.Transient?a=k.i18n.translate("Time domain").fetch():d.analysisType===j.AC&&(a=k.i18n.translate("Frequency").fetch())}break;case t.usb:if(this.externalUsbData&&this.externalUsbData.length>0){var e=this.externalUsbData[this.externalUsbDataCurrentChannelIndex||0];e.analysisType===j.Transient?a=k.i18n.translate("Time domain").fetch():e.analysisType===j.AC&&(a=k.i18n.translate("Frequency").fetch())}}return a},w.getExternalDataCurrentChannelName=function(){var a="";switch(this.source){case t.file:a=this.fileChannelName;break;case t.url:a=this.urlChannelName;break;case t.network:a=this.networkChannelName;break;case t.usb:a=this.usbChannelName}return a},w.getExternalDataChannelNameList=function(){var a=[];switch(this.source){case t.file:if(this.externalData&&this.externalData.length>0)for(var b=0;b<this.externalData.length;b+=1)a.push({value:b,displayText:this.externalData[b].name});else a.push({value:0,displayText:""});break;case t.url:if(this.externalURLData&&this.externalURLData.length>0)for(var c=0;c<this.externalURLData.length;c+=1)a.push({value:c,displayText:this.externalURLData[c].name});else a.push({value:0,displayText:""});break;case t.network:if(this.externalNetworkData&&this.externalNetworkData.length>0)for(var d=0;d<this.externalNetworkData.length;d+=1)a.push({value:d,displayText:this.externalNetworkData[d].name});else a.push({value:0,displayText:""});break;case t.usb:if(this.externalUsbData&&this.externalUsbData.length>0)for(var e=0;e<this.externalUsbData.length;e+=1)a.push({value:e,displayText:this.externalUsbData[e].name});else a.push({value:0,displayText:""})}return a},w.getExternalDataType=function(){var a=void 0;switch(this.source){case t.file:a=s.EDT_FILE;break;case t.url:case t.network:case t.usb:a=s.EDT_STREAM}return a},w.getExternalData=function(){var a={};switch(this.source){case t.file:this.externalDataCurrentChannelIndex&&"number"==typeof this.externalDataCurrentChannelIndex||(this.externalDataCurrentChannelIndex=0),this.externalData&&this.externalData.length>this.externalDataCurrentChannelIndex&&(a=this.externalData[this.externalDataCurrentChannelIndex]);break;case t.url:this.externalURLDataCurrentChannelIndex&&"number"==typeof this.externalURLDataCurrentChannelIndex||(this.externalURLDataCurrentChannelIndex=0),this.externalURLData&&this.externalURLData.length>this.externalURLDataCurrentChannelIndex&&(a=this.externalURLData[this.externalURLDataCurrentChannelIndex]);break;case t.network:this.externalNetworkDataCurrentChannelIndex&&"number"==typeof this.externalNetworkDataCurrentChannelIndex||(this.externalNetworkDataCurrentChannelIndex=0),this.externalNetworkData&&this.externalNetworkData.length>this.externalNetworkDataCurrentChannelIndex&&(a=this.externalNetworkData[this.externalNetworkDataCurrentChannelIndex]);break;case t.usb:this.externalUsbDataCurrentChannelIndex&&"number"==typeof this.externalUsbDataCurrentChannelIndex||(this.externalUsbDataCurrentChannelIndex=0),this.externalUsbData&&this.externalUsbData.length>this.externalUsbDataCurrentChannelIndex&&(a=this.externalUsbData[this.externalUsbDataCurrentChannelIndex])}return a},w.plot={weight:2,color:{r:88,g:133,b:39,a:1},showOnSchematic:!0,showInGraph:!0,axisRanges:{},ensureAxisRanges:function(a){return a=a||"",this.axisRanges[a]=this.axisRanges[a]||v(),this.axisRanges[a]},clone:function(){var a={};for(var b in this.axisRanges)this.axisRanges.hasOwnProperty(b)&&(a[b]=v(this.axisRanges[b]));return{weight:this.weight,color:g.cloneDeep(this.color),showOnSchematic:this.showOnSchematic,showInGraph:this.showInGraph,axisRanges:a,ensureAxisRanges:this.ensureAxisRanges,clone:this.clone}}},w.mapDisplayNameToSignalTypes=new Map,w.mapSimulationVariableToDisplayName=new Map,w.mapDisplayNameToSimulationVariable=new Map,w.displayInstantaneous=!0,w.displayPeriodic=!1,w.displayDc=!0,w.displayDigital=!1,w.streamToMeasurementsLive=!1,w.probeRefs=[],w.children=[];var x=function(){if(w.useDocumentLogicLevelSettings&&w.design&&w.design.simulationController){var a=w.design.simulationController.documentDigitalSettings;if(w.logicLevel=a.logicLevel,w.logicLevel===o.CUSTOM){var b=new p(a.outputLowValue,a.inputLowThresholdValue,0,a.inputHighThresholdValue,a.outputHighValue);b.autoSetUnknownVoltage(),w.customLogicFamily=b}w.design.listeners.notifyListeners(r.DESIGN_CHANGED,{contextGUID:w.contextGUID,added:[],modified:[w.templateGUID],removed:[]})}};return w.design&&w.design.simulationController&&w.design.simulationController.listeners&&w.design.simulationController.listeners.addListener(q.SimulationSettingsChanged,x),x(),w}return f(b,a),d(b,[{key:"clone",value:function(a){var b=a.createProbeInstance(this.contextGUID,this.templateGUID,this.probeID,this.reversed,this.design);return b.plot=this.plot.clone(),b.expression=this.expression,b.spiceExpression=this.spiceExpression,b.displayExpression=this.displayExpression,b.source=this.source,b.connectionState=this.connectionState,b.connectionTarget=this.connectionTarget,b.probeRefs=this.probeRefs,b.displayInstantaneous=this.displayInstantaneous,b.displayPeriodic=this.displayPeriodic,b.displayDc=this.displayDc,b.displayDigital=this.displayDigital,b.streamToMeasurementsLive=this.streamToMeasurementsLive,b}},{key:"getColorAsRGBAString",value:function(a){return"rgba("+this.plot.color.r+", "+this.plot.color.g+", "+this.plot.color.b+", "+(void 0!==a&&null!==a?a:this.plot.color.a)+")"}},{key:"getVoltageLevels",value:function(){return this.logicLevel===o.CUSTOM?this.customLogicFamily:p.getVoltageLevelForLogicFamily(this.logicLevel)}}]),b}(i)),a("ProbeInstance",w)}}}),a.register("4f",[],function(a,b){"use strict";function c(a){function b(a){function b(){if(n>=a.length)o=m.end;else{var b=a.charAt(n);if(p=n,isNaN(b)||""===b)switch(b){case"e":case"E":o=m.eToken;break;case".":o=m.decimal;break;case"-":case"+":o=m.sign;break;case"":o=m.end;break;default:o=m.string}else o=m.number;++n}}function c(){var b=a.charAt(n);n<a.length&&!isNaN(b)?++n:(o=m.beginToken,l.push({type:d.number,value:a.substring(p,n)}))}function f(){o=m.beginToken,l.push({type:d.exponent,value:a.substring(p,n)})}function g(){o=m.beginToken,l.push({type:d.sign,value:a.substring(p,n)})}function h(){o=m.beginToken,l.push({type:d.decimal,value:a.substring(p,n)})}function i(a){return e.has(a)}function j(){function b(a){return isNaN(a)&&"-"!==a&&"+"!==a&&"."!==a}var c=a.substring(p,n),e=a.charAt(n);i(c)?o=m.si:n>=a.length||!b(e)?(o=m.beginToken,l.push({type:d.string,value:a.substring(p,n)})):++n}function k(){var b=a.substring(p,n+1);n>=a.length||!i(b)?(o=m.beginToken,l.push({type:d.siprefix,value:a.substring(p,n)})):++n}for(var l=[],m={beginToken:"begin",number:"number",decimal:"decimal",sign:"sign",positive:"+",eToken:"e",string:"string",si:"si",end:"end"},n=0,o=m.beginToken,p=0;o!==m.end;)switch(o){case m.beginToken:b();break;case m.number:c();break;case m.eToken:f();break;case m.sign:g();break;case m.decimal:h();break;case m.string:j();break;case m.si:k();break;default:throw new Error("Number parser has reached a bad state.")}return l}function c(a){function b(a){switch(a.type){case d.sign:j+=a.value,i.push(a.value),m=l.integer;break;case d.decimal:j+=".",i.push("."),m=l.fractional;break;case d.number:j+=a.value,i.push(a.value),m=l.integer;break;default:m=l.invalid}}function c(a){switch(a.type){case d.decimal:j+=".",i.push(a.value),m=l.fractional;break;case d.number:j+=a.value,i.push(a.value);break;case d.exponent:j+="e",i.push("e"),m=l.exp;break;case d.siprefix:k=a.value,m=l.infix,j+=".";break;default:m=l.end}}function f(b){switch(b.type){case d.number:j+=b.value;break;case d.siprefix:k=b.value,m=l.fractionalSI;break;case d.exponent:n+1<a.length&&(a[n+1].type===d.sign||a[n+1].type===d.number)?(j+="e",m=l.exp):m=l.end;break;default:m=l.end}}function g(a){switch(a.type){case d.number:j+=a.value;break;default:m=l.end}}function h(a){switch(a.type){case d.sign:case d.number:j+=a.value;break;default:m=l.end}}for(var i=[],j="",k=void 0,l={start:"begin",infix:"infix",integer:"integer",integerSI:"integer with SI multiplier",sinumber:"sinumber",fractional:"decimal number",fractionalSI:"decimal with SI prefix",exp:"exp",invalid:"invalid",end:"end"},m=l.start,n=0;n<a.length;){switch(m){case l.start:b(a[n]);break;case l.infix:g(a[n]);break;case l.integer:c(a[n]);break;case l.fractional:f(a[n]);break;case l.exp:h(a[n])}n++}return m===l.invalid?NaN:parseFloat(k?j+"e"+e.get(k):j)}var d={number:"number",decimal:"decimal",siprefix:"siprefix",exponent:"exponent",sign:"sign",string:"string"},e=new Map;return e.set("P",15),e.set("T",12),e.set("G",9),e.set("M",6),e.set("k",3),e.set("K",3),e.set("h",2),e.set("da",1),e.set("m",-3),e.set("u",-6),e.set("µ",-6),e.set("μ",-6),e.set("n",-9),e.set("p",-12),e.set("f",-15),e.set("a",-18),e.set("z",-21),e.set("y",-24),c(b((""+a).trim().replace(/\s*/g,"")))}return a("default",c),{setters:[],execute:function(){}}}),a.register("3c",["1d"],function(a,b){"use strict";function c(a,b,c){var d=null!==a.prefix?a.prefix:"";if(null!==a.number)if(c&&c.numberOfDigits){var e=Math.floor(Math.log10(a.number))+1;if(e>=c.numberOfDigits)d+=a.number;else{for(var f=c.numberOfDigits-e,g=0;g<f;++g)d+="0";d+=a.number}}else d+=a.number;return d+=null!==a.postfix?a.postfix:"",b&&(d+=b),d}function d(a){return a&&a.length<=255&&!/[\s\/\\\?\*\-\+\[\]\{\}\(\)=!@#\$%\^&<>\.,;:'"\|`~]|^00+$/.test(a)}function e(a){function b(a,b){function c(a){j=i,h=isNaN(a)||""===a?""===a?g.end:g.string:g.number}function e(c){isNaN(c)||""===c?(h=g.beginToken,b.push({type:d.number,value:a.substring(j,i)})):++i}function f(c){isNaN(c)?++i:(h=g.beginToken,b.push({type:d.string,value:a.substring(j,i)}))}for(var g={beginToken:"begin",string:"string",number:"number",end:"end"},h=g.beginToken,i=0,j=0,k=void 0;h!=g.end;)switch(k=a.charAt(i),h){case g.beginToken:c(k);break;case g.string:f(k);break;case g.number:e(k);break;default:throw new Error("Ref Des parser reached a bad state")}}function c(a){function b(a){switch(a.type){case d.string:i.prefix=a.value,h=f.prefix;break;case d.number:i.number=a.value,h=f.number;break;default:throw new Error("Unknown token type: "+a.type)}}function c(a){if(a.type!==d.number)throw new Error("Prefix must be followed by a number");i.number=a.value,h=f.number}function e(a){if(a.type!==d.string)throw new Error("Refdes number must be followed by a string postfix");i.prefix=i.prefix||"",i.prefix+=i.number+a.value,h=f.prefix,i.number=null}for(var f={begin:"begin",prefix:"prefix",number:"number",postfix:"postfix",end:"end"},h=f.begin,i=new g,j=0;j<a.length;++j)switch(h){case f.begin:b(a[j]);break;case f.prefix:c(a[j]);break;case f.number:e(a[j])}return i}var d={string:"string",number:"number"},e=[];return b(a,e),c(e)}var f,g;return a("formatRefDes",c),a("isValidRefDesString",d),a("parseRefDesString",e),{setters:[function(a){f=a.default}],execute:function(){a("RefDes",g=function a(){f(this,a),this.prefix=null,this.number=null,this.postfix=null}),a("RefDes",g)}}}),a.register("71",[],function(a,b){"use strict";function c(a){for(var b=new Float64Array(a.length),c=0;c<a.length;c++)b[c]=a[c];return b}function d(a,b){return a.match(b)&&a.match(b)[0].length===a.length}var e,f,g,h,i;return a("toFloat64Array",c),a("checkMatch",d),{setters:[],execute:function(){a("sourceFormatTypes",e=Object.freeze({Multisim:"Multisim",Labview:"LabVIEW"})),a("sourceFormatTypes",e),a("msjsFileMarkerHeader",f="msjs-"),a("msjsFileMarkerHeader",f),a("msjsCurrentFileVersion",g="2.0"),a("msjsCurrentFileVersion",g),a("msjsFileMarker",h=f+g),a("msjsFileMarker",h),a("msjsFileDataPlotterSectionMarker",i="dataplot"),a("msjsFileDataPlotterSectionMarker",i)}}}),a.register("1f",["1d","1e"],function(a,b){"use strict";var c,d,e,f,g;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("ELogicFamily",e=Object.freeze({SIMPLE:"SIMPLE",CUSTOM:"CUSTOM",TTL74LS:"TTL74LS",CMOS74HC:"CMOS74HC",THREE:"3.3V",FIVE:"5V"})),a("ELogicFamily",e),a("DefaultLogicFamily",f=e.THREE),a("DefaultLogicFamily",f),a("LogicFamily",g=function(){function a(b,d,e,f,g){c(this,a),this.lowVoltage=b,this.maxLowVoltage=d,this.unknownVoltage=e,this.minHighVoltage=f,this.highVoltage=g}return d(a,[{key:"equals",value:function(a){return void 0!==a&&(this.lowVoltage===a.lowVoltage&&this.maxLowVoltage===a.maxLowVoltage&&this.unknownVoltage===a.unknownVoltage&&this.minHighVoltage===a.minHighVoltage&&this.highVoltage===a.highVoltage)}},{key:"autoSetUnknownVoltage",value:function(){this.unknownVoltage=a.calculateUnknownVoltage(this.maxLowVoltage,this.minHighVoltage)}},{key:"clone",value:function(){return new a(this.lowVoltage+0,this.maxLowVoltage+0,this.unknownVoltage+0,this.minHighVoltage+0,this.highVoltage+0)}}],[{key:"getVoltageLevelForLogicFamily",value:function(b){switch(b){case void 0:return;case e.CUSTOM:return new a(0,.8,1,2,5);case e.SIMPLE:return new a(0,2.49,2.495,2.5,5);case e.TTL74LS:return new a(0,.8,1,2,5);case e.CMOS74HC:return new a(0,3,5,7,10);case e.THREE:return new a(0,.8,1,2,3.3);case e.FIVE:return new a(0,.8,1,2,5)}}},{key:"calculateUnknownVoltage",value:function(a,b){var c=(a+b)/2,d=Math.round(c);return d>a&&d<b&&(c=d),c}}]),a}()),a("LogicFamily",g)}}}),a.register("17e",["21","71","1f"],function(a,b){"use strict";function c(a,b,c,j){var l=a,m=b,n=c,o=function(a,b,c){var d=c.findInstance(b,a.templateGUID),e=c.netlistController.getWireTerminals(d),f=function(a){var b={};return a&&a.connectable.parent&&a.connectable.pinID?(b.pinid=a.connectable.pinID,b.guid=a.connectable.parent.templateGUID):a.connectable.templateGUID&&(b.guid=a.connectable.templateGUID),b};return e?{from:f(e.from),to:f(e.to)}:null},p=function(a){var b=a.globalSimulationSettings,c={interactive:a.getSimulationSettings(d.Interactive),trans:a.getSimulationSettings(d.Transient),ac:a.getSimulationSettings(d.AC),dc:a.getSimulationSettings(d.DC),dcsweep:a.getSimulationSettings(d.DC_SWEEP),paramsweep:a.getSimulationSettings(d.PARAM_SWEEP),active:a.activeAnalysis},e=a.documentDigitalSettings;return{active:c.active,interactive:{initialconditions:c.interactive.initialConditions,tstop:c.interactive.stopTime,tstep:c.interactive.tStep,tmax:c.interactive.tMax,userdefinedtmax:c.interactive.userDefinedTMax,userdefinedtstep:c.interactive.userDefinedTStep,runName:c.interactive.runName,timeperdivision:c.interactive.timePerDivision,cursorType:c.interactive.cursorType,cursorSignals:c.interactive.cursorSignals,trigger:{delay:c.interactive.trigger.delay,value:c.interactive.trigger.value,valuestring:c.interactive.trigger.valueString,mode:c.interactive.trigger.mode,edge:c.interactive.trigger.edge,signal:c.interactive.trigger.signal,probe:c.interactive.trigger.probe,probetype:c.interactive.trigger.probeType}},transient:{initialconditions:c.trans.initialConditions,tstart:c.trans.startTime,tstop:c.trans.stopTime,tstep:c.trans.tStep,tmax:c.trans.tMax,userdefinedtmax:c.trans.userDefinedTMax,userdefinedtstep:c.trans.userDefinedTStep,runName:c.trans.runName,cursorType:c.trans.cursorType,cursorSignals:c.trans.cursorSignals},acsweep:{fstart:c.ac.startFrequency,fstop:c.ac.stopFrequency,type:c.ac.sweepType,pointcount:c.ac.pointCount,runName:c.ac.runName,magnitudescale:c.ac.magnitudeScaleType,cursorType:c.ac.cursorType,cursorSignals:c.ac.cursorSignals},dcoperatingpoint:{runName:c.dc.runName},dcsweep:{runName:c.dcsweep.runName,source1name:c.dcsweep.source1Name,source1start:c.dcsweep.source1Start,source1stop:c.dcsweep.source1Stop,source1step:c.dcsweep.source1Step,source1stepmode:c.dcsweep.source1StepMode,usesource2:c.dcsweep.useSource2,source2name:c.dcsweep.source2Name,source2start:c.dcsweep.source2Start,source2stop:c.dcsweep.source2Stop,source2step:c.dcsweep.source2Step,source2stepmode:c.dcsweep.source2StepMode,cursorType:c.dcsweep.cursorType,cursorSignals:c.dcsweep.cursorSignals,cursorSweeps:c.dcsweep.cursorSweeps},paramsweep:{runName:c.paramsweep.runName,selectedAnalysisType:c.paramsweep.selectedAnalysisType,selectedSweepType:c.paramsweep.selectedSweepType,componentName:c.paramsweep.componentName,parameterName:c.paramsweep.parameterName,parameterFullName:c.paramsweep.parameterFullName,parameterUnits:c.paramsweep.parameterUnits,paramList:c.paramsweep.paramList,paramStart:c.paramsweep.paramStart,paramStop:c.paramsweep.paramStop,paramStep:c.paramsweep.paramStep,paramStepMode:c.paramsweep.paramStepMode,cursorType:c.paramsweep.cursorType,cursorSignals:c.paramsweep.cursorSignals,cursorSweeps:c.paramsweep.cursorSweeps},common:{abstol:b.abstol,abstolenabled:b.abstolEnabled,itl1:b.itl1,itl1enabled:b.itl1Enabled,itl4:b.itl4,itl4enabled:b.itl4Enabled,method:b.method,reltol:b.reltol,reltolenabled:b.reltolEnabled,rshunt:b.rshunt,rshuntenabled:b.rshuntEnabled,temperature:b.temperature,temperatureenabled:b.temperatureEnabled,vntol:b.vntol,vntolenabled:b.vntolEnabled},probe:{periodicenabled:l.activeDesign.globalProbeFlag},digital:{logicLevel:e.logicLevel,outputLow:e.outputLow,outputHigh:e.outputHigh,inputLowThreshold:e.inputLowThreshold,inputHighThreshold:e.inputHighThreshold}}},q=function(a){return{simulation:p(a)}},r=function(a){return{name:a.name,metadata:{description:a.metadata.description,private:a.metadata.private,tags:a.metadata.tags.slice()},viewarea:j.areaState,sheetgroup:a.topLevelTemplateGroup.guid,copiedFrom:a.copiedFrom,guid:a.guid,username:a.userName}},s=function(a){var b={x:0,y:0},c=a.center;return b=a.contentToView(b),{zoom:a.getZoom(),guid:a.guid,pan:{left:b.x,top:b.y},center:c}},t=function(a){var b={context:a.context.guid,views:[]};return a.forEach(function(a){b.views.push(s(a))}),b},u=function(a){return{viewgroups:a.viewControllers.map(function(a){return t(a)}),guid:a.sheetTemplateController.sheetTemplate.sheetGUID}},v=function(a){var b={active:a.activeView.viewObject.guid,sheets:[]};return a.sheets.forEach(function(a){b.sheets.push(u(a))}),b},w=function(a,b){var c=b.getContextsOfTemplate(a.sheetGUID),d=null;return c.length&&c[0]&&function(){d={size:{width:a.size.width,height:a.size.height},guid:a.sheetGUID,name:a.name,visibility:{grid:a.gridVisibility,netLabels:a.netLabelsVisibility,componentLabels:a.componentLabelsVisibility},parts:[],wires:[],junctions:[],texts:[],probes:[],probeTexts:[],connectors:[],componentShortcuts:Object.fromEntries(a.componentShortcuts)};var e={exportComponent:function(a){d.parts.push({guid:a.templateGUID,component:a.oeclID,matrix:{a:a.matrix.a,b:a.matrix.b,c:a.matrix.c,d:a.matrix.d,e:a.matrix.e,f:a.matrix.f},children:a.children?a.children.map(function(a){return a.templateGUID}):[],showSymbolPinNames:a.showSymbolPinNames})},exportWire:function(a){var e=o(a,c[0],b);d.wires.push({guid:a.templateGUID,path:a.path.map(function(a){return[a.x,a.y]}),ends:e})},exportJunction:function(a){d.junctions.push({guid:a.templateGUID,position:{x:a.point.x,y:a.point.y}})},exportText:function(a){d.texts.push({guid:a.templateGUID,parent:a.parent?a.parent.templateGUID:null,fontSize:a.fontSize,visibility:a.visible,align:a.align,standalone:a.standAlone,matrix:{a:a.matrix.a,b:a.matrix.b,c:a.matrix.c,d:a.matrix.d,e:a.matrix.e,f:a.matrix.f},font:a.font})},exportProbe:function(a){d.probes.push({guid:a.templateGUID,disabled:a.disabled,vertical:a.vertical,probeType:a.probeType,matrix:{a:a.matrix.a,b:a.matrix.b,c:a.matrix.c,d:a.matrix.d,e:a.matrix.e,f:a.matrix.f},children:a.children?a.children.map(function(a){return a.templateGUID}):[],svg:a.fragment?k(a.fragment):""})},exportProbeText:function(a){d.probeTexts.push({guid:a.templateGUID,parent:a.parent?a.parent.templateGUID:null,position:{x:a.point.x,y:a.point.y},visibility:a.visible,align:a.align})},exportConnector:function(a){d.connectors.push({guid:a.templateGUID,component:a.oeclID,symbol:a.oeclComponent.symbolBlueprints[0].id,matrix:{a:a.matrix.a,b:a.matrix.b,c:a.matrix.c,d:a.matrix.d,e:a.matrix.e,f:a.matrix.f},children:a.children?a.children.map(function(a){return a.templateGUID}):[]})}};a.schematicObjects.forEach(function(a){a.export(e)})}(),d},x=function(a){return a.designComponents.map(function(a){return{id:a.oeclID,refdes:{prefix:a.refDes.prefix,number:a.refDes.number,postfix:a.refDes.postfix}}})},y=function(a){var b={},c=function(c){a.hasOwnProperty(c)&&function(){var d=m.getInstanceForModelID(c),e={};b[c]=e,d.variables.forEach(function(b){m.userCanModifyVariable(b)&&a[c].hasOwnProperty(b.name)&&(e[b.name]={stringvalue:a[c][b.name].string},a[c][b.name].hasOwnProperty("state")&&"boolean"==typeof a[c][b.name].state&&(e[b.name].state=a[c][b.name].state))})}()};for(var d in a)c(d);return b},z=function(a){var b={},c=function(c){a.hasOwnProperty(c)&&function(){var d=m.getDefinitionForModelID(c),e={};b[c]=e,d.variables.forEach(function(b){m.userCanModifyVariable(b)&&a[c].hasOwnProperty(b.name)&&(e[b.name]={stringvalue:a[c][b.name].string},a[c][b.name].hasOwnProperty("state")&&"boolean"==typeof a[c][b.name].state&&(e[b.name].state=a[c][b.name].state))})}()};for(var d in a)c(d);return b},A=function(a,b){var c={guid:a,componentsections:[],wires:[],texts:[],probes:[],probeTexts:[],connectors:[]},d={exportComponent:function(a){var b={refdes:{prefix:a.designComponent.refDes.prefix,number:a.designComponent.refDes.number,postfix:a.designComponent.refDes.postfix},modelinstancedata:y(a.modelInstanceData),modeldefinitiondata:z(a.modelDefinitionData),name:a.sectionName,guid:a.templateGUID,activepackage:a.activePackageID,activemodel:a.activeModelID,activesymbol:a.activeSymbolID,usedocumentlogiclevelsettings:a.useDocumentLogicLevelSettings,activetechnology:a.activePinTechnology,activepinrisetime:a.activePinRiseTime,activepinfalltime:a.activePinFallTime};a.activePinCustomLogicFamily&&!a.activePinCustomLogicFamily.equals(h.getVoltageLevelForLogicFamily(i.CUSTOM))&&(b.activepincustomlogicfamily=a.activePinCustomLogicFamily),c.componentsections.push(b)},exportWire:function(a){c.wires.push({net:a.netName,guid:a.templateGUID})},exportJunction:function(){},exportText:function(a){c.texts.push({guid:a.templateGUID,variableName:a.variableName})},exportProbe:function(a){c.probes.push({guid:a.templateGUID,probeID:a.probeID,reversed:a.reversed,probeRefs:a.probeRefs?a.probeRefs.map(function(a){return{templateGUID:a.templateGUID}}):[],plot:{weight:a.plot.weight,color:{r:a.plot.color.r,g:a.plot.color.g,b:a.plot.color.b,a:a.plot.color.a},showOnSchematic:a.plot.showOnSchematic,showInGraph:a.plot.showInGraph},expression:a.expression,source:a.source,file:a.file,fileChannelName:a.fileChannelName,fileSize:a.fileSize,fileChecksum:a.fileChecksum,url:a.url,urlChannelName:a.urlChannelName,externalURLDataCurrentChannelIndex:a.externalURLDataCurrentChannelIndex,network:a.network,networkChannelName:a.networkChannelName,externalNetworkDataCurrentChannelIndex:a.externalNetworkDataCurrentChannelIndex,usb:a.usb,usbChannelName:a.usbChannelName,externalUsbDataCurrentChannelIndex:a.externalUsbDataCurrentChannelIndex,displayInstantaneous:a.displayInstantaneous,displayPeriodic:a.displayPeriodic,displayDc:a.displayDc,displayDigital:a.displayDigital,usedocumentlogiclevelsettings:a.useDocumentLogicLevelSettings,logicLevel:a.logicLevel,customLogicFamily:a.customLogicFamily})},exportProbeText:function(a){c.probeTexts.push({guid:a.templateGUID,variableName:a.variableName})},exportConnector:function(a){c.connectors.push({guid:a.templateGUID,connectorID:a.connectorHub.connectorID,connectorType:a.connectorHub.connectorType})}};return b.findInstancesInContext(a).forEach(function(a){a.export&&a.export(d)}),c},B=function(a,b){return b.getContextsOfTemplate(a.sheetGUID).map(function(a){return A(a,b)})},C=function(a,b){return{template:w(a,b),instances:B(a,b)}},D=function(a,b){var c=[];return a.forEach(function(a){c.push(C(a,b))}),c},E=function(a,b){a[b.id]||(a[b.id]={component:JSON.parse(JSON.stringify(b))})},F=function(a,b){a[b.id]||(a[b.id]={description:b.description,id:b.id,revisiondate:b.strRevisionDate,svg:k(m.getRawSymbolFromCache(b.id))},b.resetFunction&&(a[b.id].resetFunction=b.resetFunction),b.animateFunction&&(a[b.id].animateFunction=b.animateFunction),b.symbolScript&&(a[b.id].symbolScript=b.symbolScript))},G=function(a,b){a[b.id]||(a[b.id]||(a[b.id]={}),a[b.id]=JSON.parse(JSON.stringify(b)))},H=function(a,b){a[b.id]||(a[b.id]||(a[b.id]={}),a[b.id]=JSON.parse(JSON.stringify(b)))},I=function(a){var b={components:{},models:{},symbols:{},packages:{}};return a.forEachComponentBlueprint(function(a){E(b.components,a)}),a.forEachSymbolBlueprint(function(a){F(b.symbols,a)}),a.forEachModelBlueprint(function(a){G(b.models,a)}),a.forEachPackageBlueprint(function(a){H(b.packages,a)}),b},J=function(){return{identifier:"webmultisim",version:{major:1,minor:0,patch:0,build:0},info:"go to www.multisim.com",application:{name:"webmultisim",website:document.location.host,versioninfo:window.multisim.versionInfo,savedate:(new Date).toISOString()}}},K=function(){return{disclaimer:"use for file/browser/crash forensics only. Don't load anything in this section as part of a converter or importer or use them for any other purpose. No guarantee is made that these items remain or will be kept in the same format in the future.",userAgent:window&&window.navigator?window.navigator.userAgent:"undefined",browserVersion:window&&window.navigator?window.navigator.appVersion:"undefined",browserName:window&&window.navigator?window.navigator.appName:"undefined",detectedBrowserInfo:window&&window.multisim?window.multisim.browserDetect:"undefined"}},L=function(a){var b=[];return a.forEach(function(a){b.push({guid:a.sheetGUID})}),b},M=function(a){return{guid:a.guid,sheets:L(a)}},N=function(a){var b=[];return a.forEachNet(function(a){var c=a.objects.filter(function(a){return a.hasOwnProperty("pin")});b.push({name:a.name,priority:a.priority,useNodeset:a.useNodeset,nodeset:a.nodeset,useInitialConditions:a.useInitialConditions,initialConditions:a.initialConditions,objects:c.map(function(a){return{context:a.pin.parent.contextGUID,component:a.pin.parent.templateGUID,pin:a.pin.pinID}})})}),b},O=function(a){var b=l.activeDesign,c={file:J(),environment:K(),design:r(b),blueprints:I(m),components:x(b),nets:N(b.netlist,m),sheettemplates:D(b.topLevelTemplateGroup,b),sheetgroups:l.sheetGroups.map(M),viewinfo:v(l),settings:q(n)},d=JSON.stringify(c,null,0);if(a)return d;var h=new window.Blob([d],{type:"application/octet-stream"}),i=n.dataManager.getDataProbeLoadedFileData(b,l.activeView.sheetTemplateController.sheetTemplate),j=[],k=new ArrayBuffer(4),o=new Uint32Array(k);j.push(f),o[0]=h.size,j.push(k),j.push(h);for(var p="";(p.length+h.size+4)%8!=0;)p+="X";return p.length>0&&j.push(p),i&&i.forEach(function(a){for(var b={fileName:a.fileName,templateGUIDs:a.templateGUIDs,externalData:[]},c=[],d=0;d<a.externalData.length;d+=1){var f=a.externalData[d];f&&void 0!==f.frequency?(c.push(f.frequency),c.push(f.phase),c.push(f.mag?f.mag:f.gain),b.externalData.push(f.sourceFormat==e.Multisim?{dataSize:[f.frequency.length,f.phase.length,f.mag.length],sourceFormat:f.sourceFormat,analysisType:f.analysisType,name:f.name,dataSignalType:f.dataSignalType}:{dataSize:[f.frequency.length,f.phase.length,f.gain.length],sourceFormat:f.sourceFormat,analysisType:f.analysisType,name:f.name,dataSignalType:f.dataSignalType,dataType:f.dataType})):f&&void 0!==f.x&&(c.push(f.x),c.push(f.y),b.externalData.push(f.sourceFormat==e.Multisim?{dataSize:[f.x.length,f.y.length],sourceFormat:f.sourceFormat,analysisType:f.analysisType,name:f.name,dataSignalType:f.dataSignalType}:{dataSize:[f.x.length,f.y.length],sourceFormat:f.sourceFormat,analysisType:f.analysisType,name:f.name,dataSignalType:f.dataSignalType,Interval:f.Interval,dataType:f.dataType}))}j.push(g);var h=JSON.stringify(b,null,0),i=new window.Blob([h],{type:"application/octet-stream"});for(k=new ArrayBuffer(4),o=new Uint32Array(k),o[0]=i.size,j.push(k),j.push(i),p="";(p.length+i.size+4)%8!=0;)p+="X";p.length>0&&j.push(p);for(var l=0;l<c.length;l++)j.push(c[l])}),new window.Blob(j,{type:"application/octet-stream"})};return{toString:O}}var d,e,f,g,h,i,j,k;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.sourceFormatTypes,f=a.msjsFileMarker,g=a.msjsFileDataPlotterSectionMarker},function(a){h=a.LogicFamily,i=a.ELogicFamily}],execute:function(){j=function(a){return a.replace(/xmlns:NS\d+="" /gi,"").replace(/NS\d+:xmlns:oecl/gi,"xmlns:oecl").replace(/NS\d+:oecl/gi,"oecl")},a("svgToString",k=function(a){return j((new window.XMLSerializer).serializeToString(a))}),a("svgToString",k)}}}),a.register("37",[],function(a,b){"use strict";function c(a){function b(a){if(!a)return 1;if(a.red&&(a.left&&a.left.red||a.right&&a.right.red))throw new Error("Consecutive red nodes found.");var c=b(a.left);if(c!=b(a.right))throw new Error("Mismatching black heights found.");return c+(a.red?0:1)}function c(a){var b=a;if(a==i&&g(),a.left&&a.right){for(b=a.right;b.left;)b=b.left;a.data=b.data}var c=b.left||b.right,d=null,j=b;if(!b.red)if(c&&c.red)c.red=!1;else{for(;null!==j.parent&&(d=j==j.parent.left?j.parent.right:j.parent.left,d.red&&(j.parent.red=!0,d.red=!1,j==j.parent.left?f(j.parent):e(j.parent)),!(j.parent.red||d.red||d.left&&d.left.red||d.right&&d.right.red));)d.red=!0,j=j.parent;j.parent&&(d=j==j.parent.left?j.parent.right:j.parent.left,!j.parent.red||d.red||d.left&&d.left.red||d.right&&d.right.red?(j!=j.parent.left||d.right&&d.right.red?j!=j.parent.right||d.left&&d.left.red||(d.right.red=!1,d.red=!0,f(d)):(d.left.red=!1,d.red=!0,e(d)),d=j==j.parent.left?j.parent.right:j.parent.left,d.red=j.parent.red,j.parent.red=!1,j==j.parent.left?(d.right.red=!1,f(j.parent)):(d.left.red=!1,e(j.parent))):(d.red=!0,j.parent.red=!1))}b.parent?b.parent.left==b?b.parent.left=c:b.parent.right=c:h=c,c&&(c.parent=b.parent),b.data=void 0}function d(a){var b=null,c=-1,d=[];for(d.push(h);d.length>0&&(b=d[d.length-1],d.length--,-1===(c=b.data.indexOf(a)));)b.left&&d.push(b.left),b.right&&d.push(b.right);return-1!=c?{node:b,index:c}:null}function e(a){var b=a.left;b.parent=a.parent,b.parent?b.parent.left==a?a.parent.left=b:b.parent.right=b:h=b,a.left=b.right,a.left&&(a.left.parent=a),b.right=a,a.parent=b}function f(a){var b=a.right;b.parent=a.parent,b.parent?b.parent.left==a?a.parent.left=b:b.parent.right=b:h=b,a.right=b.left,a.right&&(a.right.parent=a),b.left=a,a.parent=b}function g(){if(i.right)for(i=i.right;i.left;)i=i.left;else i=i.parent}var h=null,i=null;return{insert:function(b){function c(a){if(void 0===a)throw new Error("This wasn't supposed to happen");return{data:void 0!==a?[a]:[],left:null,right:null,parent:null,red:!0}}var d=h;if(h){for(;d;){var g=a(b,d.data[0]);if(0===g)return void d.data.push(b);if(g<0){if(!d.left){d.left=c(b),d.left.parent=d;break}d=d.left}else{if(!d.right){d.right=c(b),d.right.parent=d;break}d=d.right}}for(var j=null;d&&d.red&&d.parent;)j=d.parent.left==d?d.parent.right:d.parent.left,j&&j.red?(d.red=!1,j.red=!1,d.parent.red=!0,d=d.parent.parent):d==d.parent.left?(d.right&&d.right.red&&(f(d),d=d.parent),d.red=!1,d.parent.red=!0,e(d.parent)):(d.left&&d.left.red&&(e(d),d=d.parent),d.red=!1,d.parent.red=!0,f(d.parent));h.red=!1}else h=c(b),h.red=!1,i=h;i&&i.left&&(i=i.left)},pop:function(){var a=void 0;if(i&&(a=i.data.pop(),0===i.data.length)){var b=i;g(),c(b)}return a},remove:function(b){if(h){var d=h,e=void 0,f=void 0;do{e=a(b,d.data[0]),0===e?-1!=(f=d.data.indexOf(b))&&(d.data.splice(f,1),0===d.data.length&&c(d)):d=e<0?d.left:d.right}while(d&&0!==e)}},raise:function(a){var b=d(a);b&&(b.node.data.splice(b.index,1),0===b.node.data.length&&c(b.node),this.insert(a))},empty:function(){return!h},valid:function(){try{b(h)}catch(a){return!1}return!0}}}function d(a,b,d,e,f,g,h){function i(b,c){var d=c*a+b;return r[d]||(r[d]={x:b,y:c}),r[d]}function j(a){var b=p.fromNode,c=e(b,p,a)+(p.cost||0),f=i(a.x,a.y);f.visited?c<f.cost&&(f.cost=c,s.remove(f),f.pathEstimate=f.cost+f.estimate,f.fromNode=p,s.insert(f)):(f.estimate=d(a,h),f.cost=c,f.pathEstimate=f.cost+f.estimate,f.fromNode=p,f.visited=!0,s.insert(f))}function k(){if(n=null,r=[],r.length=a*b,q=null,p=null,s=c(function(a,b){return a.pathEstimate-b.pathEstimate}),g){var e=i(g.x,g.y);e.estimate=h?d(g,h):void 0,e.cost=0,e.pathEstimate=e.cost+e.estimate,e.visited=!0,s.insert(e),q=e}h&&(i(h.x,h.y).end=!0)}function l(){if(p=s.pop(),p.estimate<=q.estimate&&(q=p),i(p.x,p.y).end)return q=p,void(o=!0);t=f(p),t.forEach(j)}function m(a){for(var b=a,c=[];b;)c.push({x:b.x,y:b.y}),b=b.fromNode;return c.reverse(),c}var n=void 0,o=!1,p=void 0,q=void 0,r=void 0,s=void 0,t=null,u=null;k();var v={get route(){return n},get success(){return o},set startPoint(a){!a||g&&a.x===g.x&&a.y===g.y||(this.cancelAsync(),g={x:a.x,y:a.y},k())},get startPoint(){return g},set endPoint(a){!a||h&&a.x===h.x&&a.y===h.y||(this.cancelAsync(),h&&(i(h.x,h.y).end=!1),h={x:a.x,y:a.y},k())},get endPoint(){return h},routeAsync:function(a,b){function c(){for(var e=Date.now();Date.now()-e<d&&!s.empty()&&!o;)l();o||s.empty()?(u=null,n=m(q),a(v,b)):u=setTimeout(c,5)}u&&this.cancelAsync();var d=20;o=!1,c()},cancelAsync:function(){clearTimeout(u),u=null},findRoute:function(){if(u&&this.cancelAsync(),n)return n;for(o=!1;!s.empty()&&!o;)l();n=m(q)},reduce:function(a){if(a&&void 0!==a.length)return a.filter(function(a,b,c){function d(a,b,c){return a.x*(b.y-c.y)+b.x*(c.y-a.y)+c.x*(a.y-b.y)}return 0===b||b===c.length-1||d(c[b-1],a,c[b+1])})}};return v}return a("redBlackQueue",c),a("default",d),{setters:[],execute:function(){}}}),a.register("17f",["16","37","38","29","2f","90","31","39"],function(a,b){"use strict";function c(a,b,c,r,s,t,u){function v(a){ca=a}function w(a){a.forEach(function(a,b,c){if(b>0){var d=c[b-1];T.drawHardLine({start:d,end:a})}})}function x(a){return T?{x:Math.min(T.size.cx-2,Math.max(1,a.x)),y:Math.min(T.size.cy-2,Math.max(1,a.y))}:{x:a.x,y:a.y}}function y(a){n.updateSpoolPosition(V,V,a.view.contentElement)}function z(a,b,c){c=c||0;var d={pins:[],junctions:[],wires:[]},f=a.objectLookup.getObjectsAtPoint(b.x,b.y,c);return f.length>0&&f.forEach(function(f){if(m(f))d.wires.push(f);else if(l(f))d.junctions.push(f);else if(i(f)){var g=c?Math.max(1,c*c):0;if(e(b,{x:f.connectionX,y:f.connectionY})<=g){var h=a.objectLookup.getObjectsAtPoint(f.connectionX,f.connectionY),j=null;h.forEach(function(a){l(a)&&(j=a)}),j&&-1===d.junctions.indexOf(j)?d.junctions.push(j):d.pins.push(f)}}}),d}function A(c){var d=c();if(da=null,d){var e=d.sheetTemplateController,i=z(e.sheetTemplate,ca.startPoint);if(i.junctions.length>0)e.wiringController.getNumberOfConnectionsForJunction(i.junctions[0].templateGUID)<4&&(X={connectType:p.JUNCTION,templateGUID:i.junctions[0].templateGUID});else if(i.pins.length>0){if(X={connectType:p.PIN,templateGUID:i.pins[0].component.templateGUID,symbolPinID:i.pins[0].name},i.wires.length>0){var j={x:i.pins[0].connectionX,y:i.pins[0].connectionY},k=d.gridToSvg(j);n.drawGhostJunction(k,d,!1)}}else if(i.wires.length>0){var l=x(ca.startPoint);X={connectType:p.WIRE,templateGUID:i.wires[0].templateGUID,splitPoint:l}}if(X){var m=d.sheetTemplateController;T=g(),T.size={cx:m.sheetTemplate.size.width+1,cy:m.sheetTemplate.size.height+1},T.drawHardOpenRect({x0:0,y0:0,x1:m.sheetTemplate.size.width,y1:m.sheetTemplate.size.height}),Y=[],U=f(m.sheetTemplate.size.width,m.sheetTemplate.size.height,T.estimateCost,T.cost,T.adjacent),m.sheetTemplate.drawOnRouterMap(T),q&&a.drawRouterMap(T,d),U.startPoint=ca.startPoint,V=ca.startPoint,n.showSpool(d),n.updateSpoolPosition(ca.startPoint,ca.startPoint,d),d.viewObject.listeners.addListener(d.viewObject.viewEvents.CHANGED,y),a.wireCommand&&!u?b.activateCancel(h.i18n.translate("Cancel wiring (Esc)").fetch(),"multisim:cancel",null,h.i18n.translate("Cancel").fetch(),null):(t.getCommandObject("addjunction").contextName="wiring",t.changeContext("wiring"))}d.classList.add("wiring"),d.feedbackContent.classList.add("wiring")}return null!==X}function B(a,b,c,d){function e(b){var c=void 0,d=void 0;switch(b.connectType){case p.PIN:d=g.netlist.getNetNameForItem(g.findInstance(a.contextGUID,b.templateGUID).getPinInstance(b.symbolPinID));break;case p.JUNCTION:d=g.netlist.getNetNameForItem(g.findInstance(a.contextGUID,b.templateGUID));break;case p.WIRE:var e=g.findInstance(a.contextGUID,b.templateGUID);d=e?e.netName:void 0}return void 0!==d&&(c=g.netlist.getNet(d)),c}var f=a.sheetTemplateController,g=f.design,h=!1,i=void 0,j=void 0,k=void 0;b&&c&&(i=e(b),j=e(c),i&&j&&i.priority===j.priority&&i.name!==j.name&&(i.priority===g.netlist.ENetPriorities.PRIORITY_AUTO_NAMED?k=i.name:"0"===i.name||"0"===j.name?k="0":h=!0));var l=function(a){var b=f.design.findInstancesOfTemplate(a.templateGUID)[0],c=null;switch(a.connectType){case p.PIN:if(b.connectorHub)c=b.connectorHub.connectorID;else{var d=b.getPinInstance(a.symbolPinID);c=f.netlistController.getWires(d)[0].netName}break;case p.WIRE:c=b.netName;break;case p.JUNCTION:c=f.netlistController.getWires(b)[0].netName}return c},m=function(a){r.net1=i.name,i.objects.length||(r.net1=l(b)),r.net2=j.name,j.objects.length||(r.net2=l(c));var e=c.connectType===p.WIRE;r.onSelectName=function(b){var c=this;d(b,e),a&&function(){var b=function b(){this.removeEventListener("iron-overlay-closed",b),a()};c.addEventListener("iron-overlay-closed",b)}()},r.open()};h?u&&u.isAutoConnect?_.push(m):m():d(k)}function C(a,b){var c=!1;return a.reduce(function(a,d){var e="x",f="y";return a.x===d.x&&(e="y",f="x"),(a[e]<d[e]?a[e]<=b[e]&&b[e]<=d[e]:d[e]<=b[e]&&b[e]<=a[e])&&b[f]===a[f]&&(c=!0),d}),c}function D(c,e){var f=e();if(f){var g=f.sheetTemplateController,i={x:c.clientX,y:c.clientY},j=0;if(f.viewObject.inputEventsInterface.testEvent.isTouchEnd(c)){var k=f.viewObject.viewToContent({x:0,y:0}),l=f.viewObject.viewToContent({x:S,y:0});j=Math.floor(f.svgToGrid({x:l.x-k.x,y:0}).x)}var o=f.viewObject.viewToContent(i),r=x(f.svgToGrid(o)),s=z(g.sheetTemplate,r,j);V=r;var t=void 0,v=!1,A=!1,D=void 0,E="",F=void 0,H=void 0,I=T.getContent(r.x,r.y),J=Z&&Z.x==V.x&&Z.y==V.y;if(da&&da.component&&(s.junctions.length||s.wires.length||s.pins.length))E=h.i18n.translate("A connector must be placed in open space.").fetch();else{if(s.junctions.length>0)r=s.junctions[0].point,t={connectType:p.JUNCTION,templateGUID:s.junctions[0].templateGUID},v=g.wiringController.getNumberOfConnectionsForJunction(t.templateGUID)<4,v||(E=h.i18n.translate("No space left on junction.").fetch()),(1===g.wiringController.getNumberOfConnectionsForJunction(t.templateGUID)||X.connectType===p.JUNCTION&&1===g.wiringController.getNumberOfConnectionsForJunction(X.templateGUID))&&function(){var a=g.design.findInstance(f.contextGUID,t.templateGUID),b=g.netlistController.getWires(a)[0];switch(X.connectType){case p.PIN:var c=g.design.findInstance(f.contextGUID,X.templateGUID).pinInstances.get(X.symbolPinID),d=g.netlistController.getWires(c)[0];v=b.templateGUID!==(d?d.templateGUID:d);break;case p.WIRE:v=b.templateGUID!==X.templateGUID;break;case p.JUNCTION:F=g.design.findInstance(f.contextGUID,X.templateGUID),H=g.netlistController.getWires(F),v=0===H.filter(function(a){return a.templateGUID===b.templateGUID}).length}v||(E=h.i18n.translate("Cannot complete a wire on itself.").fetch())}();else if(s.pins.length>0){if(r={x:s.pins[0].connectionX,y:s.pins[0].connectionY},t={connectType:p.PIN,templateGUID:s.pins[0].component.templateGUID,symbolPinID:s.pins[0].name},v=!0,X.connectType===p.JUNCTION&&1===g.wiringController.getNumberOfConnectionsForJunction(X.templateGUID)){F=g.design.findInstance(f.contextGUID,X.templateGUID),H=g.netlistController.getWires(F)[0];var K=g.design.findInstance(f.contextGUID,t.templateGUID).pinInstances.get(t.symbolPinID),L=g.netlistController.getWires(K)[0];v=H.templateGUID!==(L?L.templateGUID:L)}v||(E=h.i18n.translate("Cannot complete a wire on itself.").fetch())}else if(Z&&Math.abs(Z.x-r.x)<j&&(r.x=Z.x),Z&&Math.abs(Z.y-r.y)<j&&(r.y=Z.y),s.wires.length>0){r=d(s.wires[0].path,r).point,s=z(g.sheetTemplate,r),t={connectType:p.WIRE,templateGUID:s.wires[0].templateGUID,splitPoint:r},v=s.wires.length<2&&T.getContent(r.x,r.y)!==T.CONTENT.m_cellObstFull;var M=!1;if(X.connectType===p.JUNCTION&&1===g.wiringController.getNumberOfConnectionsForJunction(X.templateGUID)&&(F=g.design.findInstance(f.contextGUID,X.templateGUID),H=g.netlistController.getWires(F)[0],v=H.templateGUID!==t.templateGUID,M=!0),v){var N=d(s.wires[0].path,r);v=N.segment.start.x===N.segment.end.x||N.segment.start.y===N.segment.end.y,v||(E=h.i18n.translate("You cannot start or end a wire on an angled wire.").fetch())}else{var O=g.sheetTemplate.objectLookup.getObjectsAtPoint(r.x,r.y);E=O.filter(function(a){return m(a)}).length>1?h.i18n.translate("Cannot connect to where one wire crosses over another.").fetch():M?h.i18n.translate("Cannot complete a wire on itself.").fetch():h.i18n.translate("Cannot wire to this point.").fetch()}}else if(da&&(Y.length<2||J||!C(Y,r))){var P=null;if(da.component){if(da.symbol){var R=f.gridToSvg(r);if(da.component){var W=f.svgToGrid({x:R.x+da.pinOffset.x,y:R.y+da.pinOffset.y});da.component.objectMatrix.e=W.x,da.component.objectMatrix.f=W.y}da.symbol.setAttribute("transform","translate("+(R.x+da.pinOffset.x)+","+(R.y+da.pinOffset.y)+")")}P=null!==da.component.connectorType?f.sheetTemplateController.connectorController.addConnector({component:da.component.oeclComponent,objectMatrix:da.component.objectMatrix,sectionName:da.component.sectionName,connectorType:da.component.connectorType}):f.sheetTemplateController.componentController.addComponent({component:da.component.oeclComponent,objectMatrix:da.component.objectMatrix,sectionName:da.component.sectionName,isHorizFlip:da.component.horizFlip}),t={connectType:p.PIN,templateGUID:P,symbolPinID:da.component.connectPin}}else P=f.sheetTemplateController.junctionController.addJunction({point:r}),t={connectType:p.JUNCTION,templateGUID:P};if(P){var $=f.sheetTemplateController.sheetTemplate.getObject(P);if($.drawOnRouterMap(T),da.component){var _=f.viewObject.contentElement.getSingleObject(P);f.selectioninterface.selectElement(_,f,null,!1)}}v=!0}(J||I!==T.CONTENT.m_cellObstFull&&!E&&!v)&&(A=!0),U.endPoint&&T.clearTarget(U.endPoint),D=U.endPoint||{x:0,y:0},U.endPoint=r,T.markTarget(U.endPoint),ca.startPoint.x===U.endPoint.x&&ca.startPoint.y===U.endPoint.y&&(v=!1,E=h.i18n.translate("Cannot complete a wire on itself.").fetch())}v||A?(U.findRoute(),v?function(){Y.pop();var c={startItem:X,endItem:t,wirePath:U.reduce(Y.concat(U.success?U.route:[U.startPoint,U.endPoint]))};B(f,X,t,function(d){c.mergedNetName=d||null;var e=f.sheetTemplateController.wiringController.addWire(c,!0);if(e){var g=f.viewObject.contentElement.getSingleObject(e.templateGUID);f.selectioninterface.selectElement(g,f,null,!1)}q&&a.clearRouterMap(f),n.hideSpool(f),n.removeAllGhostJunctions(f),f.viewObject.listeners.removeListener(f.viewObject.viewEvents.CHANGED,y),f.classList.remove("wiring"),f.feedbackContent.classList.remove("wiring"),Q(),b.deactivateCancel(),u?f.viewObject.commandInterface.getCommandObject("addjunction").stopCommand(!1,!0):a.wireCommand.stopCommand()})}():A&&(n.validateSpool(f,!0),n.updateSpoolPosition(r,r,f),Z={x:r.x,y:r.y},Y.pop(),Y=U.reduce(Y.concat(U.success?U.route:[U.startPoint,U.endPoint])),w(Y),U.startPoint=U.endPoint,G(f,Y,!1,!1))):(!v&&!E&&Y.length>1&&C(Y,r)&&(E=h.i18n.translate("Cannot complete a wire on itself.").fetch()),E&&a.notifications.notify(h.i18n.translate(E).fetch(),a.notifications.ETypes.NT_INFO),n.validateSpool(f,!1),n.updateSpoolPosition(r,r,f),G(f,Y.concat([U.startPoint,U.endPoint]),!1,!0),U.endPoint=D)}return!0}function E(a,b){if(b){var c=b.sheetTemplateController;c.netlistController.getWires(a.pinInstance).length||$.has(a.pinTemplate)||function(){var e=a.pinTemplate,f={x:e.connectionX,y:e.connectionY},g=z(c.sheetTemplate,f);g.pins=g.pins.filter(function(a){return a!==e});var h=void 0,i=!1,k={connectType:p.PIN,templateGUID:e.component.templateGUID,symbolPinID:e.name};if(g.junctions.length>0)h={connectType:p.JUNCTION,templateGUID:g.junctions[0].templateGUID},i=c.wiringController.getNumberOfConnectionsForJunction(h.templateGUID)<4;else if(g.pins.length>0)h={connectType:p.PIN,templateGUID:g.pins[0].component.templateGUID,symbolPinID:g.pins[0].name},i=!0,j(g.pins[0].component)&&j(e.component)&&$.add(g.pins[0]);else if(g.wires.length>0){var l=d(g.wires[0].path,{x:e.connectionX,y:e.connectionY}).point;if(g=z(c.sheetTemplate,l),h={connectType:p.WIRE,templateGUID:g.wires[0].templateGUID,splitPoint:l},i=g.wires.length<2){var n=d(g.wires[0].path,l);i=n.segment.start.x===n.segment.end.x||n.segment.start.y===n.segment.end.y}}i&&function(){var c={startItem:k,endItem:h,wirePath:[f,{x:f.x,y:f.y}]};B(b,k,h,function(d,g){if(c.mergedNetName=d||null,g){var h=b.sheetTemplateController.sheetTemplate.objectLookup.getObjectsAtPoint(f.x,f.y).filter(function(a){return m(a)});c.endItem.templateGUID=h[0].templateGUID}var i=b.sheetTemplateController.wiringController.addWire(c,!0),j=b.sheetTemplateController.design.findInstancesOfTemplate(i.templateGUID)[0],k=b.sheetTemplateController.netlistController.getWireTerminals(j),l=k.to.junction&&f.x===i.path[1].x&&f.y===i.path[1].y?k.to.connectable:void 0,n=function(c,d){c.forEach(function(c){c.pin.pinTemplate[d]===a.pinTemplate[d]&&function(){var a=b.sheetTemplateController.netlistController.getWires(c.junction),d=b.sheetTemplateController.netlistController.getWires(l);a&&d&&a.forEach(function(a){var c=d.some(function(b){return b===a}),e=2===b.sheetTemplateController.sheetTemplate.getObject(a.templateGUID).path.length;c&&e&&ba.add(a.templateGUID)})}()})};aa.has(e.component.templateGUID)||aa.set(e.component.templateGUID,{horzPinConnections:[],vertPinConnections:[]}),a.pinTemplate.connectionY===a.pinTemplate.y2?(n(aa.get(e.component.templateGUID).horzPinConnections,"connectionY"),aa.get(e.component.templateGUID).horzPinConnections.push({pin:a,junction:l})):(n(aa.get(e.component.templateGUID).vertPinConnections,"connectionX"),aa.get(e.component.templateGUID).vertPinConnections.push({pin:a,junction:l}))})}()}()}}function F(){W.length&&W.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a),a=null}),W=[]}function G(a,b,c,d){if(n.drawGhostWires(b,a,d),c){F();var e=a.gridToSvg(b[b.length-1]);W[0]=n.drawGhostJunction(e,a,!0),d&&W[0].classList.add("nims_invalidwiretarget")}else F()}function H(a,b,c){if(c.drawJunction){var d=b.gridToSvg(a),e=n.drawGhostJunction(d,b,!0);W.push(e),c.drawGrey&&e.classList.add("nims_invalidwiretarget")}}function I(a,b,c){var e=b.sheetTemplateController,f=!1,g=!1,i=null,j=void 0,k=z(e.sheetTemplate,a),l=void 0,m=void 0;return da&&da.component&&(k.pins.length||k.wires.length||k.junctions.length)?(g=!0,f=!1):(c&&(k.pins=k.pins.filter(function(a){return a!==c})),k.junctions.length>0?(a=k.junctions[0].point,f=!0,j={templateObject:k.junctions[0],type:p.JUNCTION},g=e.wiringController.getNumberOfConnectionsForJunction(j.templateObject.templateGUID)>3,g?i=function(){b.wiringcontroller.notifications.notify(h.i18n.translate("No space left on junction.").fetch(),b.wiringcontroller.notifications.ETypes.NT_INFO)}:X&&function(){var a=e.design.findInstance(b.contextGUID,k.junctions[0].templateGUID),c=e.netlistController.getWires(a)[0];l=e.design.findInstance(b.contextGUID,X.templateGUID),m=e.netlistController.getWires(l)||[],g=0!==m.filter(function(a){return a.templateGUID===c.templateGUID}).length}()):k.pins.length>0?(j={templateObject:k.pins[0],type:p.PIN},a={x:j.templateObject.connectionX,y:j.templateObject.connectionY},f=!0):k.wires.length>0&&function(){var c=k.wires.length<2,n=void 0;if(c){j={templateObject:k.wires[0],type:p.WIRE};var o=d(j.templateObject.path,a);c=o.segment.start.x===o.segment.end.x||o.segment.start.y===o.segment.end.y,X&&X.connectType===p.JUNCTION&&1===e.wiringController.getNumberOfConnectionsForJunction(X.templateGUID)&&(l=e.design.findInstance(b.contextGUID,X.templateGUID),m=e.netlistController.getWires(l)[0],c=c&&m.templateGUID!==k.wires[0].templateGUID),c||(n=h.i18n.translate("You cannot start or end a wire on an angled wire.").fetch())}else n=h.i18n.translate("Cannot connect to where one wire crosses over another.").fetch();c?f=!0:(g=!0,i=function(){b.wiringcontroller.notifications.notify(h.i18n.translate(n).fetch(),b.wiringcontroller.notifications.ETypes.NT_INFO)})}()),{drawGrey:g,drawJunction:f,invalidPointMsg:i,routingTarget:j}}function J(a,b,c){var d=I(a,b,c);return H(a,b,d),d}function K(a,b,c,d){var e=z(c,a);return e.pins=e.pins.filter(function(a){return a!==b}),d&&(e.wires=e.wires.filter(function(a){return d.wireTemplate!==a}),"junctions"===d.validPoint.type?e.junctions.some(function(a){return a===d.validPoint.connection})&&(e.wires=[],e.junctions=[],e.pins=[]):e.pins=e.pins.filter(function(a){return a!==d.validPoint.connection})),e.pins.length||e.junctions.length||e.wires.length}function L(a,b,c){var d=b.sheetTemplate,e=b.design,f=b.netlistController,g=e.findInstancesOfTemplate(a)[0],i=d.getObject(a),l=!1;return(k(i)||j(i))&&(g.pinInstances.forEach(function(a){var b=i.pins.get(a.pinID),c=f.getWires(a).map(function(b){var c=f.getWireTerminals(b),e=a!==c.to.connectable?c.to.connectable:c.from.connectable,g=void 0,h=void 0;if(e.parent){g=d.getObject(e.parent.templateGUID).pins.get(e.pinID),h="pins"}else g=d.getObject(e.templateGUID),h="junctions";return{wireInstance:b,wireTemplate:d.getObject(b.templateGUID),validPoint:{connection:g,type:h}}});l=l||K({x:b.connectionX,y:b.connectionY},b,d,c[0])}),l&&!c&&s.notifications.notify(h.i18n.translate("Wire connections do not automatically occur on flip, rotate, or symbol changes.").fetch(),s.notifications.ETypes.NT_WARNING)),l}function M(a,b,c){c.length?function(){c.forEach(function(b){E(b,a)}),ba.size&&a.sheetTemplateController.removeObjects({templateGUIDs:ba},!0);var d=function(){b()};_.reverse(),_.forEach(function(a){var b=d;d=function(c){return a(b,c)}}),d()}():b()}function N(a,b){var c=b(),d=!1,e=!1;c&&function(){var b={x:a.clientX,y:a.clientY},f=c.viewObject.viewToContent(b),g=x(c.svgToGrid(f)),h=I(g,c);d=h.drawJunction,e=h.drawGrey;var i=function(a){var b=Y.slice(0,-1).concat(a.success?a.reduce(a.route):[a.startPoint,a.endPoint]),f=T.getContent(a.endPoint.x,a.endPoint.y),h=!Z||Z.x!=b[b.length-1].x||Z.y!=b[b.length-1].y,i=f===T.CONTENT.m_cellObstFull||!b||b.length<2||b[0].x==b[b.length-1].x&&b[0].y==b[b.length-1].y;h&&i&&(e=!0),e?n.validateSpool(c,!1):n.validateSpool(c,!0),n.updateSpoolPosition(g,g,c),G(c,b,d,e)};if((!U.endPoint||U.endPoint.x!==g.x||U.endPoint.y!==g.y)&&(U.cancelAsync(),U.endPoint&&T.clearTarget(U.endPoint),V=g,U.endPoint=g,T.markTarget(g),U.routeAsync(i),da&&da.symbol)){var j=c.gridToSvg(U.endPoint);if(da.component){var k=c.svgToGrid({x:j.x+da.pinOffset.x,y:j.y+da.pinOffset.y});da.component.objectMatrix.e=k.x,da.component.objectMatrix.f=k.y}da.symbol.setAttribute("transform","translate("+(j.x+da.pinOffset.x)+","+(j.y+da.pinOffset.y)+")")}}()}function O(b,c){if(u){c().viewObject.commandInterface.getCommandObject("addjunction").stopCommand(!0)}else a.wireCommand.stopCommand(!0);return!0}function P(c){var d=c();d&&(U&&U.cancelAsync(),q&&a.clearRouterMap(d),n.hideSpool(d),n.removeAllGhostJunctions(d),d.viewObject.listeners.removeListener(d.viewObject.viewEvents.CHANGED,y),b.deactivateCancel(),F(),Q(),d.classList.remove("wiring"),d.feedbackContent.classList.remove("wiring"))}function Q(){da&&da.symbol&&(da.symbol.parentNode.removeChild(da.symbol),da.symbol=null)}function R(a,b){var c=null,d=b(),e={x:0,y:0};Q();var f=d.gridToSvg(U.endPoint||U.startPoint);if(a){c=o(a.oeclComponent.symbolBlueprints[0].fragment.cloneNode(!0),d.feedbackContent);var g=c.querySelector('[oecl\\:pinid="'+a.connectPin+'"]');if(g){var h=g.querySelector('[oecl\\:connpoint="true"]');!h||0==h.cx.baseVal.value&&0==h.cy.baseVal.value||(e=-h.cx.baseVal.value,e=-h.cy.baseVal.value)}var i=d.svgToGrid({x:f.x+e.x,y:f.y+e.y});a.objectMatrix.e=i.x,a.objectMatrix.f=i.y}else c=d.createJunctionSymbol({point:{x:0,y:0},guid:""}),d.feedbackContent.appendChild(c);c.classList.add("dragging"),c.setAttribute("transform","translate("+(f.x+e.x)+","+(f.y+e.y)+")"),da={component:a,symbol:c,pinOffset:e}}var S=10,T=null,U=null,V=null,W=[],X=null,Y=null,Z=null,$=new Set,_=[],aa=new Map,ba=new Set,ca=c,da=null;return{onStart:A,onPress:D,onTap:D,onMouseMove:N,onRightButtonUp:O,onCancel:P,updateStartData:v,routerMap:T,pendingMergeCommands:_,doAutoConnect:M,onPinPointMove:J,removeGhostJunctions:F,wireFreePinsUp:E,checkPinPositionAfterOrienting:L,potentialConnectionPointUnderPin:K,startFinalize:R}}var d,e,f,g,h,i,j,k,l,m,n,o,p,q;return a("default",c),{setters:[function(a){d=a.constrainPointToPath,e=a.distancePointToPointSquared},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.isTemplateSymbolPin,j=a.isTemplateConnector,k=a.isTemplateComponent,l=a.isTemplateJunction,m=a.isTemplateWire},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default}],execute:function(){q=!1}}}),a.register("31",[],function(a,b){"use strict";function c(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","g");return c.classList.add(g.GRAPHICS),c.appendChild(a),b.appendChild(c),c}function d(a,b,c){for(var d=a.querySelectorAll("text"),e=[],f=0;f<d.length;f++)e.push({text:d[f],parent:d[f].parentNode});e.forEach(function(a){a.parent.removeChild(a.text)});for(var h=a.childNodes,i=null,j=0;j<h.length;j++){var k=h[j].getBBox&&h[j].getScreenCTM?h[j]:a,l=k.getBBox(),m=b.getScreenCTM().inverse().multiply(k.getScreenCTM()),n=c.createSVGPoint(),o=c.createSVGPoint();n.x=l.x,n.y=l.y,o.x=l.x+l.width,o.y=l.y+l.height,n=n.matrixTransform(m),o=o.matrixTransform(m),i?(i.left=Math.min(i.left,n.x),i.top=Math.min(i.top,n.y),i.right=Math.max(i.right,o.x),i.bottom=Math.max(i.bottom,o.y)):i={left:n.x,top:n.y,right:o.x,bottom:o.y}}e.forEach(function(a){a.parent.appendChild(a.text)});var p=2,q=6,r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("x",i.left-p),r.setAttribute("y",i.top-p),r.setAttribute("width",i.right-i.left+2*p),r.setAttribute("height",i.bottom-i.top+2*p),r.setAttribute("rx",q),r.setAttribute("ry",q),r.classList.add(g.SELECTIONBOX),b.insertBefore(r,b.firstChild)}function e(a,b){var e=a.querySelector("."+g.GRAPHICS),f=e.parentNode,h=f.querySelector("."+g.SELECTIONBOX);e.parentNode.removeChild(e),h.parentNode.removeChild(h);for(var i=f;i.parentNode&&"svg"!=i.nodeName;)i=i.parentNode;d(c(b,f),f,i)}function f(a,b){var e=document.createElementNS("http://www.w3.org/2000/svg","g");e.classList.add(g.SYMBOL),b.appendChild(e),d(c(a,e),e,b.ownerSVGElement);var f=e;return f.classList.add(g.SYMBOLINSTANCE),f}var g;return a("doCreateSelectionRect",d),a("changeSymbol",e),a("default",f),{setters:[],execute:function(){g=Object.freeze({SYMBOL:"nims_symbol",SYMBOLINSTANCE:"nims_symbolinstance",SELECTIONBOX:"nims_selectionbox",GRAPHICS:"nims_graphics"})}}}),a.register("180",["41","29","31","92"],function(a,b){"use strict";function c(a,b,c,h,i,j){function k(){return c.stopCommand(!0),!0}function l(a){v=(v+a)%360,x({didFlip:!1,didRotate:!0})}function m(){w=!w,x({didFlip:!0,didRotate:!1})}var n=null,o=!0,p=g.createAutoConnectSubCommand(),q=!1,r=null,s=[],t=void 0,u=void 0,v=void 0,w=void 0,x=function(a){var b=n.getCTM().scale(1/u.viewObject.getZoomDecimal()),c=h.getOrientation(b),e=v-c.rotateAngle,f=(new d).transform(b.a,b.b,b.c,b.d,b.e,b.f);if(e&&a.didRotate){var g=new d;g.rotateDeg(e),f=g.concat(f)}if(w!==c.isHorizFlip&&a.didFlip){var i=new d;i.flipX(),f=i.concat(f),h.flipTextHorizontal(n)}f.e=b.e,f.f=b.f;var j=f.toCSS();n.setAttribute("transform",j);var k=n.querySelector(".nims_graphics").getBBox(),l={x:k.x+k.width/2,y:k.y+k.height/2},m=h.calculateSymbolPos(n,u,l,t);f.e=m.x,f.f=m.y,j=f.toCSS(),n.setAttribute("transform",j),C(u)},y=function(b,d){var g=b();if(g){var k=g.sheetTemplateController.design;k.getAllSectionInstances().concat(k.getAllConnectorInstances()).forEach(function(a){a.pinInstances.forEach(function(b){var c=g.sheetTemplateController.sheetTemplate.getObject(a.templateGUID).pins.get(b.pinID);p.potentialConnectionPointUnderPin({x:c.connectionX,y:c.connectionY},c,g.sheetTemplateController.sheetTemplate)&&s.push(c)})}),g.classList.add("nims_object_dragging");var l=f(a.symbolBlueprints[0].fragment.cloneNode(!0),g.feedbackContent);a&&a.componentBlueprints.length>0&&function(){var b=[];if(a.componentBlueprints[0].symbolConfigurations.forEach(function(a){a.sections.forEach(function(a){b.push(a)})}),1==b.length)for(var c=l.querySelectorAll("[oecl\\:pinid]"),d=function(a){var d=c[a],e=d.querySelector('[oecl\\:placeholder="symbolPin"]');if(e){var f=e.querySelector("tspan");f&&(f.firstChild.data=b[0].connPinMap.filter(function(a){return a.symbolPinID===d.getAttribute("oecl:pinid")})[0].displayName)}},e=0;e<c.length;e++)d(e)}(),a.simModelBlueprints.length&&l.classList.add("model");var m=l.querySelector(".nims_graphics").getBBox(),o=g.viewObject.viewToContent(d.lastLocation),q={x:m.x+m.width/2,y:m.y+m.height/2},r=h.calculateSymbolPos(l,g,q,o);return l.setAttribute("transform","translate("+r.x+","+r.y+")"),c.enabled=!1,n=l,n.classList.add("dragging"),i.clearSelection(g),j.activateCancel(e.i18n.translate("Cancel placement (Esc)").fetch(),"multisim:cancel",null,e.i18n.translate("Cancel").fetch(),null),v=0,w=!1,u=g,t=r,!0}return!1},z=function(b,c){var d=b.componentController.addComponent({component:a,objectMatrix:c,sectionName:a.componentBlueprints[0].sections[0].name,isHorizFlip:w});return n.parentNode.removeChild(n),d},A=function(b,c,d){var e=b.connectorController.addConnector({component:a,objectMatrix:d,sectionName:a.componentBlueprints[0].sections[0].name,connectorType:c});return n.parentNode.removeChild(n),e},B=function(a,b){var c=a.viewObject,d=!0;r=null;var e=b.querySelectorAll("[oecl\\:pinid]");return[].forEach.call(e,function(b){var e=b.querySelector("[oecl\\:pin] line"),f=e.getTransformToElement(e.ownerSVGElement),g=c.contentElement.contentSVG.createSVGPoint(),h=g.matrixTransform(f),i=c.contentElement.svgToGrid(h),j=p.onPinPointMove({x:i.x,y:i.y},a);d=d&&!j.invalidPointMsg,j.invalidPointMsg&&(r=j.invalidPointMsg)}),d},C=function(a){p.removeGhostJunctions(),o=B(a,n),o?(n.classList.remove("wireOverlap"),a.viewObject.viewElement.classList.remove("nocursor"),a.viewObject.viewElement.classList.remove("invalid_position")):(n.classList.add("wireOverlap"),p.removeGhostJunctions(),a.viewObject.viewElement.classList.add("nocursor"),a.viewObject.viewElement.classList.add("invalid_position"))},D=function(a,b,c){var e=b();if(n){var f=n.querySelector(".nims_graphics").getBBox();a=e.viewObject.viewToContent(a);var g={x:f.x+f.width/2,y:f.y+f.height/2};e.viewObject.inputEventsInterface.testEvent.isPan(c)&&(g.y+=60);var i=h.calculateSymbolPos(n,e,g,a),j=new d;j.translate(i.x,i.y),w&&j.flipX(),j.rotateDeg(v);var k=j.toCSS();n.setAttribute("transform",k),C(e),t=a,u=e}},E=function(a,b){h.autoScroll(a,n,b)},F=function(a){var b=a();b.classList.remove("nims_object_dragging"),b.viewObject.viewElement.classList.remove("nocursor"),b.viewObject.viewElement.classList.remove("invalid_position"),p.removeGhostJunctions(),n&&(n.parentNode.removeChild(n),n=null),j.deactivateCancel()},G=null,H=function(){G&&(clearTimeout(G),G=null)},I=function(a,b){var c={x:a.clientX,y:a.clientY},d=b();return d&&!q&&(H(),D(c,b,a),E(c,d),G=setTimeout(function(){G=null,E(c,d)},100)),!0},J=function(a,b,c){var d=b();return d.viewObject.listeners.notifyListeners(d.viewObject.viewEvents.USER_ACTION_ENDED,{viewobject:d.viewObject,command:"pan"}),K(a,b,c)},K=function(a,e){var f=e();return f&&I(a,e),f&&o?function(){f.classList.remove("nims_object_dragging");var e=f.sheetTemplateController;p.removeGhostJunctions();var g=n.querySelector(".nims_graphics").getBBox(),k=f.viewObject.viewToContent({x:a.clientX,y:a.clientY}),l={x:g.x+g.width/2,y:g.y+g.height/2};f.viewObject.inputEventsInterface.testEvent.isPan(a)&&(l.y+=60);var m=f.svgToGrid(h.calculateSymbolPos(n,f,l,k)),o=void 0,r=n.getCTM().scale(1/f.viewObject.getZoomDecimal()),t=(new d).transform(r.a,r.b,r.c,r.d,r.e,r.f);t.e=m.x,t.f=m.y,"component"===b.type?o=z(e,t):"connector"===b.type&&(o=A(e,b.additionalData.connectorType,t)),q=!0;var u=function(){c.stopCommand(!1),j.deactivateCancel(),c.enabled=!0;var a=f.getSingleObject(o);a&&i.selectElement(a,f,null,!1),q=!1},v=[],w=f.sheetTemplateController.design;w.getAllSectionInstances().concat(w.getAllConnectorInstances()).forEach(function(a){a.pinInstances.forEach(function(b){var c=f.sheetTemplateController.netlistController.getWires(b),d=f.sheetTemplateController.sheetTemplate.getObject(a.templateGUID).pins.get(b.pinID),e=s.some(function(a){return a===d});c.length||e||v.push({pinTemplate:d,pinInstance:b})})}),p.doAutoConnect(f,u,v),H()}():!o&&r&&r(),!0};return{onStart:y,onCancel:F,onPan:I,onPanEnd:J,onMouseMove:I,onTap:K,onRightButtonUp:k,rotateComp:l,flipComp:m}}var d,e,f,g;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),a.register("181",["29","90","39","92"],function(a,b){"use strict";function c(a,b,c,h,i,j,k){function l(a,b){k.unregisterLastTool(),o.updateStartData(b),k.registerTool(o)}function m(){return a.stopCommand(!0),!0}var n=null,o=g.createWiringSubCommand(j,i,null),p=null,q=null,r=function(a,b){var f=a();if(f){f.classList.add("nims_object_dragging");var g=document.createElementNS("http://www.w3.org/2000/svg","circle");g.setAttribute("cx",0),g.setAttribute("cy",0),g.setAttribute("r",2.5),g.setAttribute("fill","#d37986");n=document.createElementNS("http://www.w3.org/2000/svg","g"),n.classList.add("dragging"),n.appendChild(g),f.feedbackContent.appendChild(n);var j={x:0,y:0},k=f.gridToSvg(f.svgToGrid(f.viewObject.viewToContent(b.lastLocation))),l=c.calculateElementPos(n,f,j,k);return n.setAttribute("transform","translate("+l.x+","+l.y+")"),e.showSpool(f),e.updateSpoolPosition(f.svgToGrid(l),null,f),i.activateCancel(d.i18n.translate("Cancel place junction (Esc)").fetch(),"multisim:cancel",null,d.i18n.translate("Cancel").fetch(),null),h.clearSelection(f),!0}return!1},s=function(a,b){l(a,{startPoint:{x:b.point.x,y:b.point.y},item:{templateGUID:b.templateGUID,connectType:f.JUNCTION}})},t=function(a,b,c){var d={startPoint:c,item:{templateGUID:b.templateGUID,splitPoint:c,connectType:f.WIRE}},g=a.gridToSvg(c);e.drawGhostJunction(g,a,!1),l(a,d)},u=function(a,b){l(a,{startPoint:{x:b.connectionX,y:b.connectionY},item:{templateGUID:b.component.templateGUID,symbolPinID:b.name,connectType:f.PIN}})},v=function(a,b,d){if(n){o.removeGhostJunctions();var f={x:0,y:0};b.viewObject.inputEventsInterface.testEvent.isPan(d)&&(f.y+=60);var g=b.gridToSvg(b.svgToGrid(b.viewObject.viewToContent(a)));g=c.calculateElementPos(n,b,f,g),n.setAttribute("transform","translate("+g.x+","+g.y+")"),e.updateSpoolPosition(b.svgToGrid(g),null,b);var h=o.onPinPointMove(b.svgToGrid(g),b);p=h.routingTarget,q=h.invalidPointMsg,q?(o.removeGhostJunctions(),e.validateSpool(b,!1)):e.validateSpool(b,!0)}},w=function(a,b){c.autoScroll(a,n,b)},x=function(a){var b=a();b.classList.remove("nims_object_dragging"),o.removeGhostJunctions(),n&&(n.parentNode.removeChild(n),n=null,e.hideSpool(b)),i.deactivateCancel()},y=null,z=function(){y&&(clearTimeout(y),y=null)},A=function(a,b){var c={x:a.clientX,y:a.clientY},d=b();return d&&(z(),v(c,d,a),w(c,d),y=setTimeout(function(){y=null,w(c,d)},100)),!0},B=function(a,b){var c=b();return c.viewObject.listeners.notifyListeners(c.viewObject.viewEvents.USER_ACTION_ENDED,{viewobject:c.viewObject,command:"pan"}),C(a,b)},C=function(a,b){var c=b();if(c&&A(a,b),c&&!q){c.classList.remove("nims_object_dragging");var d=n.transform.baseVal.getItem(0),g={x:d.matrix.e,y:d.matrix.f};if(g=c.svgToGrid(g),o.removeGhostJunctions(),n&&(n.parentNode.removeChild(n),n=null,e.hideSpool(c)),p)switch(p.type){case f.PIN:u(c,p.templateObject);break;case f.JUNCTION:s(c,p.templateObject);break;case f.WIRE:t(c,p.templateObject,{x:g.x,y:g.y})}else{var h=c.sheetTemplateController.junctionController.addJunction({point:{x:g.x,y:g.y}});s(c,c.sheetTemplateController.sheetTemplate.getObject(h))}z()}else q&&q();return!0};return{onStart:r,onCancel:x,onPan:A,onPanEnd:B,onMouseMove:A,onTap:C,onRightButtonUp:m}}var d,e,f,g;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),a.register("182",["41","89","29","2f","38","22","90","91","92"],function(a,b){"use strict";function c(a,b,c){function p(a){var d=a();if(d){var n=function(){var a=d.sheetTemplateController.design;a.getAllSectionInstances().concat(a.getAllConnectorInstances()).forEach(function(a){a.pinInstances.forEach(function(b){var c=d.sheetTemplateController.netlistController.getWires(b),e=d.sheetTemplateController.sheetTemplate.getObject(a.templateGUID).pins.get(b.pinID);N.potentialConnectionPointUnderPin({x:e.connectionX,y:e.connectionY},e,d.sheetTemplateController.sheetTemplate)&&M.push(e),c.length||L.push({pinTemplate:e,pinInstance:b})})}),d.classList.add("nims_object_dragging");var n=d.getGridSize(),o=d.feedbackContent;y=document.createElementNS("http://www.w3.org/2000/svg","g"),y.classList.add("dragging"),o.appendChild(y),z=d.getSelection();var p={},q={},r=d.sheetTemplateController.design.getContextsOfTemplate(d.sheetTemplateController.sheetTemplate.sheetGUID),s=d.sheetTemplateController.sheetTemplate,t=z.filter(function(a){return!j(s.getObject(a))});r.forEach(function(a){t.forEach(function(b){var c=s.getObject(b);if(g(c)||h(c)||i(c)){var e=d.sheetTemplateController.componentController.design.findInstance(a,b);e=e.pinInstances?e.pinInstances:[e],e.forEach(function(a){var e=d.sheetTemplateController.netlistController.getWires(a),f=void 0,g=void 0;if(e.length){if(!i(c)){f=d.sheetTemplateController.sheetTemplate.getObject(b),g=f.pins.get(a.pinID);var h=e.map(function(a){return a.templateGUID});K.push({pinInstance:a,pinTemplate:g,connectedWires:h})}}else f=d.sheetTemplateController.sheetTemplate.getObject(b),g=f.pins.get(a.pinID),J.push({pinInstance:a,pinTemplate:g});e.forEach(function(a){p[a.templateGUID]?p[a.templateGUID].numConnects++:p[a.templateGUID]={numConnects:1},i(c)&&(q[b]||(q[b]={wires:[]}),q[b].wires.push(a.templateGUID))})})}})});var u=z.filter(function(a){return j(s.getObject(a))&&p[a]&&2===p[a].numConnects}),v=new Set;u.forEach(function(a){v.add(a)}),K.forEach(function(a){!a.connectedWires.some(function(a){return v.has(a)})&&J.push({pinInstance:a.pinInstance,pinTemplate:a.pinTemplate})}),E=u.map(function(a){return d.sheetTemplateController.sheetTemplate.getObject(a)}),E.length&&(F=k(),F.size={cx:d.sheetTemplateController.sheetTemplate.size.width+1,cy:d.sheetTemplateController.sheetTemplate.size.height+1},F.drawHardOpenRect({x0:0,y0:0,x1:d.sheetTemplateController.sheetTemplate.size.width,y1:d.sheetTemplateController.sheetTemplate.size.height}),d.sheetTemplateController.sheetTemplate.drawOnRouterMap(F,null),F.movingSelectedWires=!0),Object.keys(q).forEach(function(a){q[a].wires.some(function(a){return u.some(function(b){return b===a})})?I.push(d.sheetTemplateController.sheetTemplate.getObject(a)):t.splice(t.indexOf(a),1)}),z=t.concat(u);var w=[];z.forEach(function(a){var b=d.getSingleObject(a).cloneNode(!0);y.appendChild(b);var c=d.sheetTemplateController.sheetTemplate.getObject(a),e=d.sheetTemplateController.design.probeController;if(c&&void 0!==c.probeType){D.set(c,b);var f=A[a]={color:e.getNextColor(w)};w.push(f.color);var g=b.querySelector(".nims_graphics");if(g){c.probeType!==l.PROBE_EXPRESSION&&c.probeType!==l.PROBE_DATA&&(b.appendChild(m.createGhostJunction({x:0,y:0},!0,d)),g.removeAttribute("disabled"));for(var h=g.querySelectorAll(".colorindicator"),i=0;i<h.length;i++){var j=c.probeType===l.PROBE_REFERENCE?e.referenceProbeColour:"rgba("+f.color.r+", "+f.color.g+", "+f.color.b+", "+f.color.a+")";h[i].style.fill=j,h[i].style.stroke=j}b.classList.add("probeGhostDisabled")}}});var x=e(y);C={x:(x.left+x.right)/2,y:(x.top+x.bottom)/2};var B=d.gridToSvg({x:d.sheetTemplateController.sheetTemplate.size.width,y:d.sheetTemplateController.sheetTemplate.size.height}),G=3*n,H=3*n,O={x:x.right<B.x-G?G:-1*G,y:x.bottom<B.y-H?H:-1*H};if(1===z.length){var W=s.getObject(z[0]);if(P=g(W)||h(W)){U=d,V=d.gridToSvg({x:(W.rawBoundingBox.left+W.rawBoundingBox.right)/2,y:(W.rawBoundingBox.top+W.rawBoundingBox.bottom)/2});var X=b.getOrientation(W.matrix);Q=X.rotateAngle,R=X.isHorizFlip,S=y.querySelector(".nims_symbol").getCTM().scale(1/d.viewObject.getZoomDecimal()),T=d.viewObject.getZoom()}}return y.setAttribute("transform","translate("+O.x+", "+O.y+")"),d.selectioninterface.clearSelection(d),c.activateCancel(f.i18n.translate("Cancel duplicate objects (Esc)").fetch(),"multisim:cancel",null,f.i18n.translate("Cancel").fetch(),null),{v:!0}}();if("object"==typeof n)return n.v}return!1}function q(a,c){var d=c();if(d&&s(a,c),d&&H){d.classList.remove("nims_object_dragging");var e={x:a.clientX,y:a.clientY},f=d.gridToSvg(d.svgToGrid(d.viewObject.viewToContent(e)));f=b.calculateElementPos(y,c(),C,f),y.setAttribute("transform","translate("+f.x+","+f.y+")");var g=d.svgToGrid(f);if(P){var h=1/d.viewObject.getZoomDecimal(),i=y.querySelector(".nims_symbol").getCTM().scale(h),j=S.e*(d.viewObject.getZoom()/T),k=S.f*(d.viewObject.getZoom()/T);g=d.svgToGrid({x:Math.round((i.e-j)*h),y:Math.round((i.f-k)*h)})}r(d.sheetTemplateController,g,d),W()}else!H&&O&&O();return!0}function r(b,e,f){if(N.removeGhostJunctions(),P){var g=y.querySelector(".nims_symbol"),h=g.getCTM().scale(1/f.viewObject.getZoomDecimal()),i=(new d).transform(h.a,h.b,h.c,h.d,e.x,e.y);A={objectMatrix:i}}y&&(y.parentNode.removeChild(y),y=null);var j=b.cloneObjectsAndPlaceAtOffset(z,e,A),k=[],l=f.sheetTemplateController.design;l.getAllSectionInstances().concat(l.getAllConnectorInstances()).forEach(function(a){a.pinInstances.forEach(function(b){var c=f.sheetTemplateController.netlistController.getWires(b),d=f.sheetTemplateController.sheetTemplate.getObject(a.templateGUID).pins.get(b.pinID),e=M.some(function(a){return a===d});c.length||e||k.push({pinTemplate:d,pinInstance:b})})});var m=function(){var d=j.map(function(a){return f.getSingleObject(a)}).filter(function(a){return a});f.selectioninterface.selectElements(d,f),b.probeController.updateAllProbeState(),c.deactivateCancel(),a.stopCommand(!1)};N.doAutoConnect(f,m,k)}function s(a,c){H=!0;var e=c();return e&&y&&function(){var g={x:a.clientX,y:a.clientY},h=e.gridToSvg(e.svgToGrid(e.viewObject.viewToContent(g))),i={x:C.x,y:C.y};e.viewObject.inputEventsInterface.testEvent.isPan(a)&&(i.y+=60),h=b.calculateElementPos(y,c(),i,h);var j=e.svgToGrid(h);y.setAttribute("transform","translate("+h.x+","+h.y+")"),O=null;var k=new Set;E.forEach(function(a){var b=G.checkWireInterference(a.path.map(function(a){return{x:a.x+h.x/10,y:a.y+h.y/10}}),!1,e.sheetTemplateController,F);H=H&&!b.isOverlapping,H||(O=function(){e.wiringcontroller.notifications.notify(f.i18n.translate("Cannot have overlapping wires.").fetch(),e.wiringcontroller.notifications.ETypes.NT_INFO)}),b.connectablePoints.forEach(function(a){if(k.has(a.pinTemplate)){var b=!1,c=I.filter(function(b){return b.point.x+h.x/10===a.pinTemplate.connectionX&&b.point.y+h.y/10===a.pinTemplate.connectionY});c.length&&(b=e.sheetTemplateController.wiringController.getNumberOfConnectionsForJunction(c[0].templateGUID)>3),H=H&&c.length&&!b,b?O=function(){e.wiringcontroller.notifications.notify(f.i18n.translate("No space left on junction.").fetch(),e.wiringcontroller.notifications.ETypes.NT_INFO)}:c.length||(O=function(){e.wiringcontroller.notifications.notify(f.i18n.translate("Cannot connect to where one wire crosses over another.").fetch(),e.wiringcontroller.notifications.ETypes.NT_INFO)})}k.add(a.pinTemplate)})}),Z(e,h,k,H),D.forEach(function(a,b){var c=e.sheetTemplateController.probeController.getProbeStateAtPoint({x:b.matrix.e+j.x,y:b.matrix.f+j.y},b);c.disabled?a.classList.add("probeGhostDisabled"):a.classList.remove("probeGhostDisabled");var f=e.sheetTemplateController.design.findInstance(e.contextGUID,b.templateGUID),g=b.matrix.clone(),h=a.querySelector(".arrow");if(h){var i=f.reversed?c.vertical?270:180:c.vertical?90:0,k=g.inverse().translate(b.matrix.e,b.matrix.f),l=new d;l.transform(k.a,k.b,k.c,k.d,k.e,k.f).rotateDeg(i),h.setAttribute("transform",l.toCSS())}}),X(g,e),B=setTimeout(function(){B=null,X(g,e)},100),U=e,V=e.viewObject.viewToContent(g)}(),!0}function t(a,b,c){var d=!1;if(b()&&y&&H){s(a,b,c);var e=b();e.classList.remove("nims_object_dragging");var f=void 0;if(P){var g=1/e.viewObject.getZoomDecimal(),h=y.querySelector(".nims_symbol").getCTM().scale(g),i=S.e*(e.viewObject.getZoom()/T),j=S.f*(e.viewObject.getZoom()/T);f=e.svgToGrid({x:Math.round((h.e-i)*g),y:Math.round((h.f-j)*g)})}else f=e.svgToGrid({x:y.transform.baseVal.getItem(0).matrix.e,y:y.transform.baseVal.getItem(0).matrix.f});r(e.sheetTemplateController,f,b()),d=!0}else!H&&O&&O();return d}function u(a){y&&(y.parentNode.removeChild(y),y=null);var b=a();b.classList.remove("nims_object_dragging"),b.viewObject.viewElement.classList.remove("nocursor"),b.viewObject.viewElement.classList.remove("invalid_position"),N.removeGhostJunctions(),c.deactivateCancel()}function v(){return a.stopCommand(!0),!0}function w(a){P&&(Q=(Q+a)%360,b.updateOrientation({didFlip:!1,didRotate:!0},y,V,U,Q,R,Z))}function x(){P&&(R=!R,b.updateOrientation({didFlip:!0,didRotate:!1},y,V,U,Q,R,Z))}var y=null,z=[],A={},B=null,C=void 0,D=new Map,E=[],F=void 0,G=n({},"",{}),H=!0,I=[],J=[],K=[],L=[],M=[],N=o.createAutoConnectSubCommand(),O=null,P=!1,Q=void 0,R=void 0,S=void 0,T=void 0,U=void 0,V=void 0,W=function(){B&&(clearTimeout(B),B=null)},X=function(a,c){b.autoScroll(a,y,c)},Y=function(a,b){var c=a.viewObject,d=!0;O=null;var e=b.querySelectorAll("[oecl\\:pinid]");return[].forEach.call(e,function(b){var e=b.querySelector("[oecl\\:pin] line"),f=e.getTransformToElement(e.ownerSVGElement),g=c.contentElement.contentSVG.createSVGPoint(),h=g.matrixTransform(f),i=c.contentElement.svgToGrid(h),j=N.onPinPointMove({x:i.x,y:i.y},a);d=d&&!j.invalidPointMsg,j.invalidPointMsg&&(O=j.invalidPointMsg)}),d},Z=function(a,b,c,d){H=d,N.removeGhostJunctions(),P?H=H&&Y(a,y.querySelector(".nims_symbol")):J.forEach(function(c){var d=a.svgToGrid(b),e=N.onPinPointMove({x:c.pinTemplate.connectionX+d.x,y:c.pinTemplate.connectionY+d.y},a);H=H&&!e.invalidPointMsg,e.invalidPointMsg&&(O=e.invalidPointMsg)}),c&&c.forEach(function(b){N.onPinPointMove({x:b.connectionX,y:b.connectionY},a)}),H?(y.classList.remove("wireOverlap"),a.viewObject.viewElement.classList.remove("nocursor"),a.viewObject.viewElement.classList.remove("invalid_position")):(y.classList.add("wireOverlap"),a.viewObject.viewElement.classList.add("nocursor"),a.viewObject.viewElement.classList.add("invalid_position"),N.removeGhostJunctions())};return{onStart:p,onTap:q,onPanStart:s,onPan:s,onMouseMove:s,onPanEnd:t,onRightButtonUp:v,onCancel:u,rotateComp:w,flipComp:x}}var d,e,f,g,h,i,j,k,l,m,n,o;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.fastBBox},function(a){f=a.default},function(a){g=a.isTemplateComponent,h=a.isTemplateConnector,i=a.isTemplateJunction,j=a.isTemplateWire},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default}],execute:function(){}}}),a.register("183",["41","29","22","90"],function(a,b){"use strict";function c(a,b,c,h,i,j,k){function l(){return b.stopCommand(!0),!0}var m=null,n={r:88,g:133,b:39,a:1},o=function(b,d){var k=b();if(k){k.classList.add("nims_object_dragging"),n=k.sheetTemplateController.design.probeController.getNextColor();var l=a.cloneNode(!0);l.classList.add("nims_graphics");m=document.createElementNS("http://www.w3.org/2000/svg","g"),m.classList.add("nims_probe"),m.classList.add("dragging"),m.classList.add("probeGhostDisabled"),m.appendChild(l),c!==f.PROBE_EXPRESSION&&c!==f.PROBE_DATA&&m.appendChild(g.createGhostJunction({x:0,y:0},!0,k)),k.feedbackContent.appendChild(m);for(var o=l.querySelectorAll(".colorindicator"),p=0;p<o.length;p++){var q=c===f.PROBE_REFERENCE?k.sheetTemplateController.design.probeController.referenceProbeColour:"rgba("+n.r+", "+n.g+", "+n.b+", "+n.a+")";o[p].style.fill=q,o[p].style.stroke=q}var r=k.gridToSvg(k.svgToGrid(k.viewObject.viewToContent(d.lastLocation))),s={x:20,y:-20},t=h.calculateElementPos(m,k,s,r);return m.setAttribute("transform","translate("+t.x+","+t.y+")"),i.clearSelection(k),j.activateCancel(e.i18n.translate("Cancel place probe (Esc)").fetch(),"multisim:cancel",null,e.i18n.translate("Cancel").fetch(),null),!0}return!1},p=function(c,d,e,f,g,h,i){var l=c.probeController.addProbe({fragment:a,point:{x:d,y:e},probeType:f,probeState:g,color:h});return m&&m.parentNode.removeChild(m),k&&i&&function(){var a=c.design.findInstance(i.contextGUID,l);a&&k.forEach(function(b){var d=c.design.findInstance(i.contextGUID,b);if(d){var e=d.probeRefs[0];c.probeController.changeProbeReferenceHandler(d,a,e,!1)}})}(),c.probeController.updateAllProbeState(),b.stopCommand(!1),j.deactivateCancel(),b.enabled=!0,l},q=function(a,b,e){if(m){var g=b.gridToSvg(b.svgToGrid(b.viewObject.viewToContent(a))),i={x:20,y:-20};if(b.viewObject.inputEventsInterface.testEvent.isTouch(e)&&(b.viewObject.inputEventsInterface.testEvent.isPan(e)?i.y+=60:i.x=i.y=0),g=h.calculateElementPos(m,b,i,g),m.setAttribute("transform","translate("+g.x+","+g.y+")"),c!==f.PROBE_EXPRESSION&&c!==f.PROBE_DATA){var j=m.querySelector(".nims_wiring_target");j.style.display="none";var k=b.sheetTemplateController.probeController.getProbeStateAtPoint(b.svgToGrid(g),{probeType:c});k.disabled?m.classList.contains("probeGhostDisabled")||m.classList.add("probeGhostDisabled"):m.classList.remove("probeGhostDisabled");var l=m.querySelector(".arrow");if(l){var n=k.vertical?90:0,o=new d;o.rotateDeg(n),l.setAttribute("transform",o.toCSS())}j&&(j.style.display=null)}else m.classList.remove("probeGhostDisabled")}},r=function(a,b){h.autoScroll(a,m,b)},s=function(a){a().classList.remove("nims_object_dragging"),m&&(m.parentNode.removeChild(m),m=null),j.deactivateCancel()},t=null,u=function(){t&&(clearTimeout(t),t=null)},v=function(a,b){var c={x:a.clientX,y:a.clientY},d=b();return d&&(u(),q(c,d,a),r(c,d),t=setTimeout(function(){t=null,r(c,d)},100)),!0},w=function(a,b,c){var d=b();return d.classList.remove("nims_object_dragging"),d.viewObject.listeners.notifyListeners(d.viewObject.viewEvents.USER_ACTION_ENDED,{viewobject:d.viewObject,command:"pan"}),x(a,b,c)},x=function(a,b,d){var e=b();if(e){e.classList.remove("nims_object_dragging"),v(a,b,d);var f=m.transform.baseVal.getItem(0),g={x:f.matrix.e,y:f.matrix.f};g=e.svgToGrid(g);var h=e.sheetTemplateController.probeController.getProbeStateAtPoint(g,{probeType:c}),j=p(e.sheetTemplateController,g.x,g.y,c,h,n,e),k=e.getSingleObject(j);k&&i.selectElement(k,e,null,!1),u()}return!0};return{onStart:o,onCancel:s,onPan:v,onPanEnd:w,onMouseMove:v,onTap:x,onRightButtonUp:l}}var d,e,f,g;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),a.register("184",["29"],function(a,b){"use strict";function c(a,b,c,e){function f(){return a.stopCommand(!0),!0}var g=null,h=d.i18n.translate("New text label ...").fetch(),i=function(a,f){var i=a();if(i){i.classList.add("nims_object_dragging");var j="http://www.w3.org/2000/svg";g=document.createElementNS(j,"g"),g.classList.add("nims_text"),g.setAttribute("align","left"),g.classList.add("nims_text"),g.classList.add("standalone");var k=document.createElementNS(j,"text");k.setAttribute("x",0),k.setAttribute("y",0);var l=document.createElementNS(j,"tspan");l.setAttribute("x",0),l.setAttribute("y",20),l.textContent=h,k.appendChild(l),k.classList.add("nims_textcore"),g.appendChild(k),g.classList.add("nims_text_annotation"),g.classList.add("dragging"),i.feedbackContent.appendChild(g);var m=i.gridToSvg(i.svgToGrid(i.viewObject.viewToContent(f.lastLocation))),n=b.calculateElementPos(g,i,{x:0,y:30},m);return g.setAttribute("transform","translate("+n.x+","+n.y+")"),c.clearSelection(i),e.activateCancel(d.i18n.translate("Cancel place text annotation (Esc)").fetch(),"multisim:cancel",null,d.i18n.translate("Cancel").fetch(),null),!0}return!1},j=function(b,c,d){var f=b.textController.addText({text:h,align:"left",standAlone:!0,point:{x:c,y:d+2}});return g&&g.parentNode.removeChild(g),a.stopCommand(!1),e.deactivateCancel(),a.enabled=!0,f},k=function(a,c){if(g){var d=c.gridToSvg(c.svgToGrid(c.viewObject.viewToContent(a)));d=b.calculateElementPos(g,c,{x:0,y:30},d),g.setAttribute("transform","translate("+d.x+","+d.y+")")}},l=function(a,c){b.autoScroll(a,g,c)},m=function(a){a().classList.remove("nims_object_dragging"),g&&(g.parentNode.removeChild(g),g=null),e.deactivateCancel()},n=null,o=function(){n&&(clearTimeout(n),n=null)},p=function(a,b){var c={x:a.clientX,y:a.clientY},d=b();return d&&(o(),k(c,d),l(c,d),n=setTimeout(function(){n=null,l(c,d)},100)),!0},q=function(a,b,c){var d=b();return d.classList.remove("nims_object_dragging"),d.viewObject.listeners.notifyListeners(d.viewObject.viewEvents.USER_ACTION_ENDED,{viewobject:d.viewObject,command:"pan"}),r(a,b,c)},r=function(a,b,d){var e=b();if(e){e.classList.remove("nims_object_dragging"),p(a,b,d);var f=g.transform.baseVal.getItem(0),h={x:f.matrix.e,y:f.matrix.f};h=e.svgToGrid(h);var i=j(e.sheetTemplateController,h.x,h.y),k=e.getSingleObject(i);k&&c.selectElement(k,e,null,!1),o()}return!0};return{onStart:i,onCancel:m,onPan:p,onPanEnd:q,onMouseMove:p,onTap:r,onRightButtonUp:f}}var d;return a("default",c),{setters:[function(a){d=a.default}],execute:function(){}}}),a.register("11c",["1d","1e","26","27","185","15"],function(a,b){"use strict";var c,d,e,f,g,h,i;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){i=function(a){function b(a,d,f,g){c(this,b);var h=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,f));h.templateGUID=a,h.oeclID=d.componentBlueprints[0].id,h.oeclComponent=d;var i=d.symbolBlueprints?d.symbolBlueprints.filter(function(a){return a.id===g})[0]:null;return h.symbol=i?i.fragment:null,h.showSymbolPinNames=!1,h}return f(b,a),d(b,[{key:"clone",value:function(a,b,c){var d=a.createTemplateComponent(this.templateGUID,this.oeclComponent,this.matrix,b),e=c&&c.objectMatrix?c.objectMatrix:this.matrix;return d.matrix=e.clone(),d.matrix.e=this.matrix.e,d.matrix.f=this.matrix.f,d.rawBoundingBox={left:this.rawBoundingBox.left,right:this.rawBoundingBox.right,top:this.rawBoundingBox.top,bottom:this.rawBoundingBox.bottom},d.roundedBoundingBox={left:this.roundedBoundingBox.left,right:this.roundedBoundingBox.right,top:this.roundedBoundingBox.top,bottom:this.roundedBoundingBox.bottom},d.showSymbolPinNames=this.showSymbolPinNames,this.pins.forEach(function(a,b){d.addSymbolPin(b,{x:a.connectionX,y:a.connectionY},{x:a.x2,y:a.y2})}),d}},{key:"getDirectionForPinConnectPoint",value:function(a){var b=[];return b.push({direction:h.D_LEFT,distance:Math.abs(this.roundedBoundingBox.left-a.x)}),b.push({direction:h.D_UP,distance:Math.abs(this.roundedBoundingBox.top-a.y)}),b.push({direction:h.D_RIGHT,distance:Math.abs(this.roundedBoundingBox.right-a.x)}),b.push({direction:h.D_DOWN,distance:Math.abs(this.roundedBoundingBox.bottom-a.y)}),b.reduce(function(a,b){return a.distance<b.distance?a:b}).direction}}]),b}(g),a("default",i)}}}),a.register("185",["1d","1e","41","186"],function(a,b){"use strict";var c,d,e,f,g;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){g=function(){function a(b){c(this,a),this.oeclID=null,this.oeclComponent=null,this.symbol=null,this.matrix=b.clone(),this.rawBoundingBox={left:0,right:0,top:0,bottom:0},this.roundedBoundingBox={left:0,right:0,top:0,bottom:0},this.pins=new Map,this.children=[]}return d(a,[{key:"addSymbolPin",value:function(a,b,c){var d=new f(a,b,c);if(this.pins.has(a))throw new Error("duplicate pin name: "+a+" in component: "+this.oeclID);return this.pins.set(a,d),d.component=this,d.addToObjectLookup(this.objectLookup),d}},{key:"removeSymbolPin",value:function(a){var b=this.pins.get(a);if(!this.pins.has(a))throw new Error("cannot remove pin: "+a+" in component: "+this.oeclID);return this.pins.delete(a),b.removeFromObjectLookup(this.objectLookup),b}},{key:"getSymbolPin",value:function(a){return this.pins.get(a)}},{key:"getSymbolPins",value:function(){var a=[];return this.pins.forEach(function(b){a.push(b)}),a}},{key:"updateSymbolPinLocation",value:function(a,b,c){var d=this.pins.get(a);d&&(d.removeFromObjectLookup(this.objectLookup),d.updateLocation(b,c),d.addToObjectLookup(this.objectLookup))}},{key:"drawOnRouterMap",value:function(a){a.drawHardFilledRect({x0:this.roundedBoundingBox.left,y0:this.roundedBoundingBox.top,x1:this.roundedBoundingBox.right,y1:this.roundedBoundingBox.bottom}),this.pins.forEach(function(b){b.drawOnRouterMap(a)},this)}},{key:"addToObjectLookup",value:function(){this.objectLookup.addObjectOnBox(this.roundedBoundingBox,this),this.pins.forEach(function(a){a.addToObjectLookup(this.objectLookup)},this),this.children.forEach(function(a){a.addToObjectLookup()},this)}},{key:"removeFromObjectLookup",value:function(a){this.objectLookup.removeObjectOnBox(this.roundedBoundingBox,this),a&&(this.pins.forEach(function(a){a.removeFromObjectLookup(this.objectLookup)},this),this.children.forEach(function(b){b.removeFromObjectLookup(a)},this))}},{key:"getBoundingBox",value:function(){var a={left:this.rawBoundingBox.left,right:this.rawBoundingBox.right,top:this.rawBoundingBox.top,bottom:this.rawBoundingBox.bottom};return this.pins.forEach(function(b){var c=Math.min(b.connectionX,b.x2),d=Math.min(b.connectionY,b.y2),e=Math.max(b.connectionX,b.x2),f=Math.max(b.connectionY,b.y2);c<a.left&&(a.left=c),d<a.top&&(a.top=d),e>a.right&&(a.right=e),f>a.bottom&&(a.bottom=f)},this),a}},{key:"updateBoundingBox",value:function(a){this.removeFromObjectLookup(!0),this.rawBoundingBox={left:a.left,top:a.top,right:a.right,bottom:a.bottom},this.roundedBoundingBox={left:Math.round(this.rawBoundingBox.left),top:Math.round(this.rawBoundingBox.top),right:Math.round(this.rawBoundingBox.right),bottom:Math.round(this.rawBoundingBox.bottom)},this.addToObjectLookup()}},{key:"offset",value:function(a){var b=new e;b.translate(a.x,a.y),this.matrix=b.concat(this.matrix),this.rawBoundingBox.left+=a.x,this.rawBoundingBox.top+=a.y,this.rawBoundingBox.right+=a.x,this.rawBoundingBox.bottom+=a.y,this.roundedBoundingBox.left+=a.x,this.roundedBoundingBox.top+=a.y,this.roundedBoundingBox.right+=a.x,this.roundedBoundingBox.bottom+=a.y,this.pins.forEach(function(b){b.connectionX+=a.x,b.connectionY+=a.y,b.x2+=a.x,b.y2+=a.y})}},{key:"rotate",value:function(a){var b=[{x:this.rawBoundingBox.left,y:this.rawBoundingBox.top},{x:this.rawBoundingBox.right,y:this.rawBoundingBox.top},{x:this.rawBoundingBox.right,y:this.rawBoundingBox.bottom},{x:this.rawBoundingBox.left,y:this.rawBoundingBox.bottom}],c=this.matrix.inverse();b=c.applyToArray(b);var d={x:Math.round((Math.min(Math.min(Math.min(b[0].x,b[1].x),b[2].x),b[3].x)+Math.max(Math.max(Math.max(b[0].x,b[1].x),b[2].x),b[3].x))/2+.1),y:Math.round((Math.min(Math.min(Math.min(b[0].y,b[1].y),b[2].y),b[3].y)+Math.max(Math.max(Math.max(b[0].y,b[1].y),b[2].y),b[3].y))/2+.1)},f=this.matrix.applyToPoint(d.x,d.y),g=f.x-this.matrix.e,h=f.y-this.matrix.f;c.e=0,c.f=0;var i=c.applyToPoint(g,h);g=i.x,h=i.y,this.matrix=(new e).rotateDeg(a).concat(this.matrix);var j=this.matrix.applyToPoint(g,h),k=f.x-j.x,l=f.y-j.y;k=Math.round(k),l=Math.round(l);var m=new e;m.translate(k,l),this.matrix=m.concat(this.matrix)}},{key:"flipHorizontal",value:function(){var a=(this.roundedBoundingBox.left+this.roundedBoundingBox.right)/2,b=(this.roundedBoundingBox.top+this.roundedBoundingBox.bottom)/2,c=a-this.matrix.e,d=b-this.matrix.f,f=this.matrix.inverse();f.e=0,f.f=0;var g=f.applyToPoint(c,d);c=g.x,d=g.y;var h=new e;h.flipX(),this.matrix=h.concat(this.matrix);var i=this.matrix.applyToPoint(c,d),j=a-i.x,k=b-i.y;j=Math.round(j),k=Math.round(k);var l=new e;l.translate(j,k),this.matrix=l.concat(this.matrix)}}]),a}(),a("default",g)}}}),a.register("11d",["1d","1e","26","27","41","185"],function(a,b){"use strict";var c,d,e,f,g,h,i;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){i=function(a){function b(a,d,f){c(this,b);var g=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,f));return g.templateGUID=a,g.oeclID=d.componentBlueprints[0].id,g.oeclComponent=d,g.symbol=d.symbolBlueprints?d.symbolBlueprints[0].fragment:null,g}return f(b,a),d(b,[{key:"clone",value:function(a,b){var c=a.createTemplateConnector(this.templateGUID,this.oeclComponent,this.matrix),d=b&&b.objectMatrix?b.objectMatrix:this.matrix;return c.matrix=d.clone(),c.matrix.e=this.matrix.e,c.matrix.f=this.matrix.f,c.rawBoundingBox={left:this.rawBoundingBox.left,right:this.rawBoundingBox.right,top:this.rawBoundingBox.top,bottom:this.rawBoundingBox.bottom},c.roundedBoundingBox={left:this.roundedBoundingBox.left,right:this.roundedBoundingBox.right,top:this.roundedBoundingBox.top,bottom:this.roundedBoundingBox.bottom},c.showSymbolPinNames=this.showSymbolPinNames,this.pins.forEach(function(a,b){c.addSymbolPin(b,{x:a.connectionX,y:a.connectionY},{x:a.x2,y:a.y2})}),c}},{key:"rotate",value:function(a){var b=this.matrix.e,c=this.matrix.f,d=(new g).rotateDeg(a);this.matrix=d.concat(this.matrix),this.matrix.e=b,this.matrix.f=c}},{key:"flipHorizontal",value:function(){var a=this.matrix.e,b=this.matrix.f,c=(new g).flipX();this.matrix=c.concat(this.matrix),this.matrix.e=a,this.matrix.f=b}}]),b}(h),a("default",i)}}}),a.register("11e",["1d","1e"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){e=function(){function a(b,d){c(this,a),this.templateGUID=b,this.point=d}return d(a,[{key:"drawOnRouterMap",value:function(a){a.drawJunction(this.point)}},{key:"addToObjectLookup",value:function(){this.objectLookup.addObjectAtPoint(this.point.x,this.point.y,this)}},{key:"removeFromObjectLookup",value:function(){this.objectLookup.removeObjectAtPoint(this.point.x,this.point.y,this)}},{key:"getBoundingBox",value:function(){return{left:this.point.x,right:this.point.x,top:this.point.y,bottom:this.point.y}}},{key:"offset",value:function(a){this.point.x+=a.x,this.point.y+=a.y}},{key:"clone",value:function(a,b){return a.createTemplateJunction(this.templateGUID,b)}}]),a}(),a("default",e)}}}),a.register("11f",["1d","1e","41"],function(a,b){"use strict";var c,d,e,f;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){f=function(){function a(b,d,f,g){c(this,a),this.templateGUID=b,this.fragment=f,this.currentSymbolPath=null,this.probeType=g,this.disabled=!1,this.vertical=!1,this.reversed=!1,this.matrix=new e,this.matrix.translate(d.x,d.y),this.rawBoundingBox={left:0,right:0,top:0,bottom:0},this.roundedBoundingBox={left:0,right:0,top:0,bottom:0},this.children=[]}return d(a,[{key:"clone",value:function(a){var b=a.createTemplateProbe(this.templateGUID,{x:this.matrix.e,y:this.matrix.f},this.fragment);return b.matrix=this.matrix.clone(),b.currentSymbolPath=this.currentSymbolPath,b.rawBoundingBox.left=this.rawBoundingBox.left,b.rawBoundingBox.right=this.rawBoundingBox.right,b.rawBoundingBox.top=this.rawBoundingBox.top,b.rawBoundingBox.bottom=this.rawBoundingBox.bottom,b.roundedBoundingBox.left=this.roundedBoundingBox.left,b.roundedBoundingBox.right=this.roundedBoundingBox.right,b.roundedBoundingBox.top=this.roundedBoundingBox.top,b.roundedBoundingBox.bottom=this.roundedBoundingBox.bottom,b}},{key:"drawOnRouterMap",value:function(){}},{key:"addToObjectLookup",value:function(){this.objectLookup.addObjectOnBox(this.roundedBoundingBox,this),this.children.forEach(function(a){a.addToObjectLookup()})}},{key:"removeFromObjectLookup",value:function(a){this.objectLookup.removeObjectOnBox(this.roundedBoundingBox,this),a&&this.children.forEach(function(b){b.removeFromObjectLookup(a)})}},{key:"getBoundingBox",value:function(){return{left:this.rawBoundingBox.left,right:this.rawBoundingBox.right,top:this.rawBoundingBox.top,bottom:this.rawBoundingBox.bottom}}},{key:"updateBoundingBox",value:function(a){this.removeFromObjectLookup(!1),this.rawBoundingBox={left:a.left,top:a.top,right:a.right,bottom:a.bottom},this.roundedBoundingBox={left:Math.round(this.rawBoundingBox.left),top:Math.round(this.rawBoundingBox.top),right:Math.round(this.rawBoundingBox.right),bottom:Math.round(this.rawBoundingBox.bottom)},this.addToObjectLookup()}},{key:"offset",value:function(a){var b=new e;b.translate(a.x,a.y),this.matrix=b.concat(this.matrix),this.rawBoundingBox.left+=a.x,this.rawBoundingBox.top+=a.y,this.rawBoundingBox.right+=a.x,this.rawBoundingBox.bottom+=a.y,this.roundedBoundingBox.left+=a.x,this.roundedBoundingBox.top+=a.y,this.roundedBoundingBox.right+=a.x,this.roundedBoundingBox.bottom+=a.y}}]),a}(),a("default",f)}}}),a.register("120",["1d","1e","41"],function(a,b){"use strict";var c,d,e,f;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){f=function(){function a(b,d,f,g,h,i){c(this,a),this.templateGUID=b,this.matrix=new e,this.matrix.translate(d.x,d.y),this.align=g,this.standAlone=h,this.visible=f,this.font=i,this.rawBoundingBox={left:0,top:0,right:0,bottom:0},this.roundedBoundingBox={left:0,top:0,right:0,bottom:0},this.fontSize=1.4}return d(a,[{key:"clone",value:function(a){var b=a.createTemplateText(this.templateGUID,this.point,this.visible,this.align,this.standAlone,this.font);return b.matrix=this.matrix.clone(),b.rawBoundingBox={left:this.rawBoundingBox.left,right:this.rawBoundingBox.right,top:this.rawBoundingBox.top,bottom:this.rawBoundingBox.bottom},b.roundedBoundingBox={left:this.roundedBoundingBox.left,right:this.roundedBoundingBox.right,top:this.roundedBoundingBox.top,bottom:this.roundedBoundingBox.bottom},b.fontSize=this.fontSize,b}},{key:"addToObjectLookup",value:function(){this.objectLookup.addObjectOnBox(this.roundedBoundingBox,this)}},{key:"removeFromObjectLookup",value:function(){this.objectLookup.removeObjectOnBox(this.roundedBoundingBox,this)}},{key:"drawOnRouterMap",value:function(){}},{key:"updateBoundingBox",value:function(a){this.removeFromObjectLookup(),this.rawBoundingBox={left:a.left,top:a.top,right:a.right,bottom:a.bottom},this.roundedBoundingBox={left:Math.round(this.rawBoundingBox.left),top:Math.round(this.rawBoundingBox.top),right:Math.round(this.rawBoundingBox.right),bottom:Math.round(this.rawBoundingBox.bottom)},this.addToObjectLookup()}},{key:"getBoundingBox",value:function(){return{left:this.rawBoundingBox.left,right:this.rawBoundingBox.right,top:this.rawBoundingBox.top,bottom:this.rawBoundingBox.bottom}}},{key:"offset",value:function(a){var b=new e;b.translate(a.x,a.y),this.matrix=b.concat(this.matrix)}},{key:"rotate",value:function(a){var b=this.matrix.e,c=this.matrix.f,d=(new e).rotateDeg(a);this.matrix=d.concat(this.matrix),this.matrix.e=b,this.matrix.f=c}},{key:"point",get:function(){return{x:this.matrix.e,y:this.matrix.f}},set:function(a){this.matrix.e=a.x,this.matrix.f=a.y}}]),a}(),a("default",f)}}}),a.register("121",["1d","1e","15","16"],function(a,b){"use strict";var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.distancePointToPoint,g=a.distancePointToPointSquared,h=a.distanceToLineSegment,i=a.constrainPointToPath}],execute:function(){j=function(){function a(b,d){c(this,a),this.templateGUID=b,this.path=d,this.children=[]}return d(a,[{key:"isLabelVisible",value:function(){var a=!1;return this.children.length>0&&!0===this.children[0].visible&&(a=!0),a}},{key:"clone",value:function(a,b){return a.createTemplateWire(this.templateGUID,b)}},{key:"drawOnRouterMap",value:function(a){this.path.forEach(function(b,c,d){if(c>0){var e=d[c-1];e.x!=b.x&&e.y==b.y?a.drawHorzObsLine({start:e,end:b}):e.x==b.x&&e.y!=b.y?a.drawVertObsLine({start:e,end:b}):a.drawAngledObsLine({start:e,end:b})}})}},{key:"addToObjectLookup",value:function(){this.path.forEach(function(a,b,c){if(b>0){var d=c[b-1];this.objectLookup.addObjectAlongLine(d,a,this)}},this)}},{key:"removeFromObjectLookup",value:function(){this.path.forEach(function(a,b,c){if(b>0){var d=c[b-1];this.objectLookup.removeObjectAlongLine(d,a,this)}},this)}},{key:"getBoundingBox",value:function(){var a={left:null,right:null,top:null,bottom:null};return this.path.forEach(function(b,c){0===c?(a.left=b.x,a.right=b.x,a.top=b.y,a.bottom=b.y):(b.x<a.left&&(a.left=b.x),b.x>a.right&&(a.right=b.x),b.y<a.top&&(a.top=b.y),b.y>a.bottom&&(a.bottom=b.y))}),a}},{key:"offset",value:function(a){this.path.forEach(function(b){b.x+=a.x,b.y+=a.y})}},{key:"getRatioOfPointOnPath",value:function(a){for(var b=0,c=-1,d=1;d<this.path.length;++d){var e=this.path[d-1],h=this.path[d];if(e!=h){if(-1===c&&(e.x<=a.x&&h.x>=a.x||h.x<=a.x&&e.x>=a.x)&&(e.y<=a.y&&h.y>=a.y||h.y<=a.y&&e.y>=a.y)){var i=.5;e.x!=h.x?i=(a.x-e.x)/(h.x-e.x):e.y!=h.y&&(i=(a.y-e.y)/(h.y-e.y));var j=!0,k={x:(h.x-e.x)*i+e.x,y:(h.y-e.y)*i+e.y};if(e.x!=h.x&&e.y!=h.y){g(k,a)>.1&&(j=!1)}if(j){c=b+f(k,e)}}b+=f(e,h)}}return 0===b?.5:c/b}},{key:"getPathAfterPoint",value:function(a){var b=this.path.slice(),c=[];if(b.length>1){for(var d=null,e=1;e<b.length;++e){var f=b[e-1],g=b[e];if(a.x==g.x&&a.y==g.y?0!==e&&e!=b.length-1&&(b.splice(e+1,0,{x:g.x,y:g.y}),d=e+1):f.x===a.x&&f.y===a.y||(f.x==g.x?a.x==g.x&&a.y>Math.min(f.y,g.y)&&a.y<Math.max(f.y,g.y)&&(b.splice(e,0,{x:a.x,y:a.y},{x:a.x,y:a.y}),d=e+1):0===h(f,g,a)&&(b.splice(e,0,{x:a.x,y:a.y},{x:a.x,y:a.y}),d=e+1)),null!==d)break}null!==d&&d<b.length-1&&(c=b.splice(d,b.length-d))}return{firstPath:b,secondPath:c}}},{key:"getMergedWirePath",value:function(a){var b=[];if(a.length>1)if(0===this.path.length)b=a.slice();else{var c=this.path[0],d=this.path[this.path.length-1],e=a[0],f=a[a.length-1];c.x==e.x&&c.y==e.y?(b=a.slice(),b.reverse(),b.pop(),b=b.concat(this.path)):c.x==f.x&&c.y==f.y?(b=a.slice(),b.pop(),b=b.concat(this.path)):d.x==e.x&&d.y==e.y?(b=this.path.slice(),b.pop(),b=b.concat(a)):d.x==f.x&&d.y==f.y&&(b=a.slice(),b.pop(),b.reverse(),b=this.path.concat(b))}return b.length>2&&(b=b.filter(function(a,c){return 0===c||c==b.length-1||(a.x!=b[c-1].x||a.x!=b[c+1].x)&&(a.y!=b[c-1].y||a.y!=b[c+1].y)})),b}},{key:"getLongestSegmentCenterPoint",value:function(a){for(var b=-1,c=-1,d={x:0,y:0},e=1;e<this.path.length;e++){var f=g(this.path[e-1],this.path[e]);f>b&&(b=f,c=e)}return-1!=c?(d.x=(this.path[c-1].x+this.path[c].x)/2,d.y=(this.path[c-1].y+this.path[c].y)/2):1===this.path.length&&(d={x:this.path[0].x,y:this.path[0].y}),this.path.length?i(this.path,a?{x:0|d.x,y:0|d.y}:d).point:d}},{key:"directionFromEndPoint",value:function(a){var b=e.D_UNKNOWN;if(this.path&&this.path.length>1&&(this.path[0].x!=this.path[this.path.length-1].x||this.path[0].y!=this.path[this.path.length-1].y)){var c=this.path.filter(function(a,b){return 0===b||this.path[b-1].x!=a.x||this.path[b-1].y!=a.y},this);if(c.length>1){var d=c[0],f=c[c.length-1],g=null,h=null;d.x==a.x&&d.y==a.y?(g=d,h=c[1]):f.x==a.x&&f.y==a.y&&(g=f,h=c[c.length-2]),g&&h&&(b=g.y==h.y?g.x>h.x?e.D_LEFT:e.D_RIGHT:g.x==h.x?g.y<h.y?e.D_DOWN:e.D_UP:g.x>h.x?g.y>h.y?g.x-h.x>g.y-h.y?e.D_LEFT:e.D_UP:g.x-h.x>h.y-g.y?e.D_LEFT:e.D_DOWN:g.y>h.y?h.x-g.x>g.y-h.y?e.D_RIGHT:e.D_UP:h.x-g.x>h.y-g.y?e.D_RIGHT:e.D_DOWN)}}return b}}]),a}(),a("default",j)}}}),a.register("15",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({D_UP:"up",D_DOWN:"down",D_LEFT:"left",D_RIGHT:"right",D_UNKNOWN:"unknown"}),a("default",c)}}}),a.register("186",["1d","1e","15"],function(a,b){"use strict";var c,d,e,f;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){f=function(){function a(b,d,e){c(this,a),this.name=b,this.connectionX=d.x,this.connectionY=d.y,this.x2=e.x,this.y2=e.y,this.connected=!1}return d(a,[{key:"drawOnRouterMap",value:function(a){this.connectionX==this.x2?this.y2>this.connectionY?(a.drawVerticalPin({x:this.connectionX,y:this.connectionY}),a.drawHardLine({start:{x:this.connectionX,y:this.connectionY+1},end:{x:this.x2,y:this.y2}})):this.y2<this.connectionY?(a.drawVerticalPin({x:this.connectionX,y:this.connectionY}),a.drawHardLine({start:{x:this.connectionX,y:this.connectionY-1},end:{x:this.x2,y:this.y2}})):a.drawHardPoint({x:this.connectionX,y:this.connectionY}):this.connectionY==this.y2&&(a.drawHorizontalPin({x:this.connectionX,y:this.connectionY}),this.x2>this.connectionX?a.drawHardLine({start:{x:this.connectionX+1,y:this.connectionY},end:{x:this.x2,y:this.y2}}):this.x2<this.connectionX&&a.drawHardLine({start:{x:this.connectionX-1,y:this.connectionY},end:{x:this.x2,y:this.y2}}))}},{key:"addToObjectLookup",value:function(a){a.addObjectAlongLine({x:this.connectionX,y:this.connectionY},{x:this.x2,y:this.y2},this)}},{key:"removeFromObjectLookup",value:function(a){a.removeObjectAlongLine({x:this.connectionX,y:this.connectionY},{x:this.x2,y:this.y2},this)}},{key:"updateLocation",value:function(a,b){this.connectionX=a.x,this.connectionY=a.y,this.x2=b.x,this.y2=b.y}},{key:"changeConnectionState",value:function(a){this.connected=a}},{key:"getDirection",value:function(){e.D_UNKNOWN;return this.connectionY===this.y2?this.connectionX>this.x2?e.D_RIGHT:this.connectionX<this.x2?e.D_LEFT:e.D_UNKNOWN:this.connectionY<this.y2?e.D_UP:e.D_DOWN}}]),a}(),a("default",f)}}}),a.register("2f",["11c","11d","11e","11f","120","121","186"],function(a,b){"use strict";function c(a){return a instanceof j}function d(a){return a instanceof o}function e(a){return a instanceof k}function f(a){return a instanceof l}function g(a){return a instanceof p}function h(a){return a instanceof n}function i(a){return a instanceof m}var j,k,l,m,n,o,p;return a("isTemplateComponent",c),a("isTemplateWire",d),a("isTemplateConnector",e),a("isTemplateJunction",f),a("isTemplateSymbolPin",g),a("isTemplateText",h),a("isTemplateProbe",i),{setters:[function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default}],execute:function(){}}}),a.register("38",[],function(a,b){"use strict";function c(a){function b(a,b){s=[],t=[],s.length=a*b}function c(a,b){var c=null;if(a>=0&&a<r.cx&&b>=0&&b<r.cy){var e=b*r.cx+a;c=(s[e]||d.m_cellFree)&~d.m_cellTarget}return c}function i(a,b){if(a>=0&&a<r.cx&&b>=0&&b<r.cy){var c=b*r.cx+a;l(a,b,(s[c]||d.m_cellFree)|d.m_cellTarget)}}function j(a,b){if(a>=0&&a<r.cx&&b>=0&&b<r.cy){var c=b*r.cx+a;s[c]=(s[c]||d.m_cellFree)&~d.m_cellTarget}}function k(a,b){var c=void 0;if(a>=0&&a<r.cx&&b>=0&&b<r.cy){var e=b*r.cx+a;c=s[e]||d.m_cellFree}return Boolean((c||0)&d.m_cellTarget)}function l(a,b,c){if(a>=0&&a<r.cx&&b>=0&&b<r.cy){var f=b*r.cx+a,g=s[f]||d.m_cellFree,h=g&d.m_cellTarget||c&d.m_cellTarget;c&=~d.m_cellTarget,g&=~d.m_cellTarget,s[f]=e[g][c]|(h?d.m_cellTarget:0)}}function m(a,b){if(a>=0&&a<r.cx&&b>=0&&b<r.cy){var c=b*r.cx+a,e=s[c]||d.m_cellFree,f=(e&d.m_cellTarget)===d.m_cellTarget;s[c]=d.m_cellFree|(f?d.m_cellTarget:0)}}function n(a,b,c){var d=a.x,e=a.y,f=b.x-a.x,g=b.y-a.y,h=Math.abs(g),i=Math.abs(f),j=0,k=0;if(f=Math.sign(f),g=Math.sign(g),l(d,e,c),i>h)for(k=1,j=i/2>>0;k<=i;k++)d+=f,(j-=h)<0&&(e+=g,j+=i),l(d,e,c);else for(k=1,j=h/2>>0;k<=h;k++)e+=g,(j-=i)<0&&(d+=f,j+=h),l(d,e,c)}function o(a,b){var c=Math.min(a.x0,a.x1),d=Math.max(a.x0,a.x1),e=Math.min(a.y0,a.y1),f=Math.max(a.y0,a.y1),g=void 0,h=void 0;for(g=c;g<=d;++g)for(h=e;h<=f;++h)l(g,h,b)}function p(a,b){var c=Math.min(a.x0,a.x1),d=Math.max(a.x0,a.x1),e=Math.min(a.y0,a.y1),f=Math.max(a.y0,a.y1),g=void 0,h=void 0;for(g=c;g<=d;++g)l(g,e,b),l(g,f,b);for(h=e;h<=f;++h)l(c,h,b),l(d,h,b)}var q=a||{corner:30,softBlock:20,hardBlock:500,orthogonalPin:40,stepX:2,stepY:2,ConnectJunction:!0,MaxCorners:3},r={cx:0,cy:0},s=[],t=[],u={push:function(){t.push(s.slice())},pop:function(){t.length&&(s=t.pop())},set size(a){r={cx:a.cx,cy:a.cy},b(r.cx,r.cy)},get size(){return{cx:r.cx,cy:r.cy}},set width(a){r.cx=a,b(r.cx,r.cy)},get width(){return r.cx},set height(a){r.cy=a,b(r.cx,r.cy)},get height(){return r.cy},drawSoftFilledRect:function(a){o(a,d.m_cellObstSoft)},drawHardFilledRect:function(a){o(a,d.m_cellObstFull)},drawSoftOpenRect:function(a){p(a,d.m_cellObstSoft)},drawHardOpenRect:function(a){p(a,d.m_cellObstFull)},drawHorizontalPin:function(a){l(a.x,a.y,d.m_cellObstHorPin)},drawVerticalPin:function(a){l(a.x,a.y,d.m_cellObstVertPin)},drawVectorLine:function(a){n(a.start,a.end,d.m_cellObstFull),this.drawJunction(a.start),this.drawJunction(a.end)},drawSoftLine:function(a){n(a.start,a.end,d.m_cellObstSoft)},drawHardLine:function(a){n(a.start,a.end,d.m_cellObstFull)},drawHardPoint:function(a){l(a.x,a.y,d.m_cellObstFull)},drawJunction:function(a){l(a.x,a.y,d.m_cellObstJunc)},drawVertObsLine:function(a){var b=c(a.start.x,a.start.y)===d.m_cellFree,e=c(a.end.x,a.end.y)===d.m_cellFree;n(a.start,a.end,d.m_cellObstVert),b&&m(a.start.x,a.start.y),e&&m(a.end.x,a.end.y),a.start.y>a.end.y?(l(a.start.x,a.start.y,d.m_cellObstUp),l(a.end.x,a.end.y,d.m_cellObstDown)):(l(a.start.x,a.start.y,d.m_cellObstDown),l(a.end.x,a.end.y,d.m_cellObstUp))},drawHorzObsLine:function(a){var b=c(a.start.x,a.start.y)===d.m_cellFree,e=c(a.end.x,a.end.y)===d.m_cellFree;n(a.start,a.end,d.m_cellObstHor),b&&m(a.start.x,a.start.y),e&&m(a.end.x,a.end.y),a.start.x>a.end.x?(l(a.start.x,a.start.y,d.m_cellObstLeft),l(a.end.x,a.end.y,d.m_cellObstRight)):(l(a.start.x,a.start.y,d.m_cellObstRight),l(a.end.x,a.end.y,d.m_cellObstLeft))},drawAngledObsLine:function(a){var b=c(a.start.x,a.start.y)===d.m_cellFree,e=c(a.end.x,a.end.y)===d.m_cellFree;b&&m(a.start.x,a.start.y),e&&m(a.end.x,a.end.y);var f=(a.end.y-a.start.y)/(a.end.x-a.start.x),g=a.start.y-f*a.start.x,h=void 0,i=void 0;for(h=Math.min(a.start.x,a.end.x);h<=Math.max(a.start.x,a.end.x);++h)i=f*h+g,l(h,i,d.m_cellObstAngle)},getContent:c,CONTENT:d,cost:function(a,b,e){var i=c(e.x,e.y),j=void 0;b.x<e.x?j=f.EAST:b.x>e.x?j=f.WEST:b.y<e.y?j=f.SOUTH:b.y>e.y&&(j=f.NORTH);var k=0;(c(b.x,b.y)==d.m_cellObstHorPin&&b.y!=e.y||c(b.x,b.y)==d.m_cellObstVertPin&&b.x!=e.x)&&(k+=q.orthogonalPin);var l=h[i][j];return l!=g.EXPAND_ON_SOFT&&l!=g.EXPAND_ON_HPIN&&l!=g.EXPAND_ON_VPIN&&l!=g.EXPAND_YES&&l!=g.EXPAND_ON_JUNC||(i!=d.m_cellBitTarget&&l==g.EXPAND_ON_SOFT&&(k+=q.softBlock),(l==g.EXPAND_ON_HPIN&&b.y!=e.y||l==g.EXPAND_ON_VPIN&&b.x!=e.x)&&(k+=q.orthogonalPin),b.x!=e.x?k+=q.stepX:b.y!=e.y?k+=q.stepY:k+=1e3,a&&a.x!=e.x&&a.y!=e.y&&(k+=q.corner)),k},adjacent:function(a){function b(b){var e=c(b.x,b.y),f=c(a.x,a.y);return null!==e&&(!(e===d.m_cellObstFull&&!k(b.x,b.y))&&(!!(e!==d.m_cellObstHorPin&&e!==d.m_cellObstVertPin||k(b.x,b.y))&&((b.y!==a.y||!(e===d.m_cellObstHor||f===d.m_cellObstHor||a.x<b.x&&(e===d.m_cellObstLeft||f===d.m_cellObstRight)||a.x>b.x&&(e===d.m_cellObstRight||f===d.m_cellObstLeft)))&&((b.x!==a.x||!(e===d.m_cellObstVert||f===d.m_cellObstVert||a.y<b.y&&(e===d.m_cellObstUP||f===d.m_cellObstDown)||a.y>b.y&&(e===d.m_cellObstDown||f===d.m_cellObstUp)))&&(!(e===d.m_cellObstJunc&&!k(b.x,b.y))&&!((e==d.m_cellObstHorPin||e==d.m_cellObstVertPin||e==d.m_cellObstJunc||e==d.m_cellObstVert&&b.x==a.x||e==d.m_cellObstHor&&b.y==a.y)&&!k(b.x,b.y)))))))}var e=[];return a.y>0&&b({x:a.x,y:a.y-1})&&e.push({x:a.x,y:a.y-1}),a.x>0&&b({x:a.x-1,y:a.y})&&e.push({x:a.x-1,y:a.y}),a.x<u.width-1&&b({x:a.x+1,y:a.y})&&e.push({x:a.x+1,y:a.y}),a.y<u.height-1&&b({x:a.x,y:a.y+1})&&e.push({x:a.x,y:a.y+1}),e},estimateCost:function(a,b){return Math.abs(a.x-b.x)*q.stepX+Math.abs(a.y-b.y)*q.stepY+(a.x!=b.x&&a.y!=b.y?q.corner:0)},markTarget:function(a){i(a.x,a.y)},clearTarget:function(a){j(a.x,a.y)},isTarget:function(a){return k(a.x,a.y)}};return u}var d,e,f,g,h;return a("default",c),{setters:[],execute:function(){d={m_cellFree:0,m_cellTarget:128},d.m_cellObstacles=d.m_cellFree+1,d.m_cellObstFull=d.m_cellObstacles+0,d.m_cellObstSoft=d.m_cellObstacles+1,d.m_cellObstHor=d.m_cellObstacles+2,d.m_cellObstVert=d.m_cellObstacles+3,d.m_cellObstJunc=d.m_cellObstacles+4,d.m_cellObstHorPin=d.m_cellObstacles+5,d.m_cellObstVertPin=d.m_cellObstacles+6,d.m_cellObstUp=d.m_cellObstacles+7,d.m_cellObstDown=d.m_cellObstacles+8,d.m_cellObstLeft=d.m_cellObstacles+9,d.m_cellObstRight=d.m_cellObstacles+10,d.m_cellObstAngle=d.m_cellObstacles+11,d=Object.freeze(d),e=[[d.m_cellFree,d.m_cellObstFull,d.m_cellObstSoft,d.m_cellObstHor,d.m_cellObstVert,d.m_cellObstJunc,d.m_cellObstHorPin,d.m_cellObstVertPin,d.m_cellObstUp,d.m_cellObstDown,d.m_cellObstLeft,d.m_cellObstRight,d.m_cellObstAngle],[d.m_cellObstFull,d.m_cellObstFull,d.m_cellObstFull,d.m_cellObstFull,d.m_cellObstFull,d.m_cellObstFull,d.m_cellObstHorPin,d.m_cellObstVertPin,d.m_cellObstFull,d.m_cellObstFull,d.m_cellObstFull,d.m_cellObstFull,d.m_cellObstFull],[d.m_cellObstSoft,d.m_cellObstFull,d.m_cellObstSoft,d.m_cellObstHor,d.m_cellObstVert,d.m_cellObstJunc,d.m_cellObstHorPin,d.m_cellObstVertPin,d.m_cellObstUp,d.m_cellObstDown,d.m_cellObstLeft,d.m_cellObstRight,d.m_cellObstAngle],[d.m_cellObstHor,d.m_cellObstFull,d.m_cellObstHor,d.m_cellObstHor,d.m_cellObstFull,d.m_cellObstJunc,d.m_cellObstHorPin,d.m_cellObstVertPin,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstHor,d.m_cellObstHor,d.m_cellObstAngle],[d.m_cellObstVert,d.m_cellObstFull,d.m_cellObstVert,d.m_cellObstFull,d.m_cellObstVert,d.m_cellObstJunc,d.m_cellObstHorPin,d.m_cellObstVertPin,d.m_cellObstVert,d.m_cellObstVert,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstAngle],[d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstHorPin,d.m_cellObstVertPin,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstJunc],[d.m_cellObstHorPin,d.m_cellObstHorPin,d.m_cellObstHorPin,d.m_cellObstHorPin,d.m_cellObstHorPin,d.m_cellObstHorPin,d.m_cellObstHorPin,d.m_cellObstVertPin,d.m_cellObstHorPin,d.m_cellObstHorPin,d.m_cellObstHorPin,d.m_cellObstHorPin,d.m_cellObstHorPin],[d.m_cellObstVertPin,d.m_cellObstVertPin,d.m_cellObstVertPin,d.m_cellObstVertPin,d.m_cellObstVertPin,d.m_cellObstVertPin,d.m_cellObstHorPin,d.m_cellObstVertPin,d.m_cellObstVertPin,d.m_cellObstVertPin,d.m_cellObstVertPin,d.m_cellObstVertPin,d.m_cellObstVertPin],[d.m_cellObstUp,d.m_cellObstFull,d.m_cellObstUp,d.m_cellObstJunc,d.m_cellObstVert,d.m_cellObstJunc,d.m_cellObstHorPin,d.m_cellObstVertPin,d.m_cellObstUp,d.m_cellObstVert,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstJunc],[d.m_cellObstDown,d.m_cellObstFull,d.m_cellObstDown,d.m_cellObstJunc,d.m_cellObstVert,d.m_cellObstJunc,d.m_cellObstHorPin,d.m_cellObstVertPin,d.m_cellObstVert,d.m_cellObstDown,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstJunc],[d.m_cellObstLeft,d.m_cellObstFull,d.m_cellObstLeft,d.m_cellObstHor,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstHorPin,d.m_cellObstVertPin,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstLeft,d.m_cellObstHor,d.m_cellObstJunc],[d.m_cellObstRight,d.m_cellObstFull,d.m_cellObstRight,d.m_cellObstHor,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstHorPin,d.m_cellObstVertPin,d.m_cellObstJunc,d.m_cellObstJunc,d.m_cellObstHor,d.m_cellObstRight,d.m_cellObstJunc],[d.m_cellObstAngle,d.m_cellObstFull,d.m_cellObstAngle,d.m_cellObstAngle,d.m_cellObstAngle,d.m_cellObstJunc,d.m_cellObstHorPin,d.m_cellObstVertPin,d.m_cellObstAngle,d.m_cellObstAngle,d.m_cellObstAngle,d.m_cellObstAngle,d.m_cellObstAngle]],f=Object.freeze({NORTH:0,EAST:1,SOUTH:2,WEST:3}),g=Object.freeze({EXPAND_NO:0,EXPAND_YES:1,EXPAND_ON_SOFT:2,EXPAND_ON_JUNC:3,EXPAND_ON_HPIN:4,EXPAND_ON_VPIN:5,EXPAND_ON_HARD:6}),h=[[g.EXPAND_YES,g.EXPAND_YES,g.EXPAND_YES,g.EXPAND_YES],[g.EXPAND_NO,g.EXPAND_NO,g.EXPAND_NO,g.EXPAND_NO],[g.EXPAND_ON_SOFT,g.EXPAND_ON_SOFT,g.EXPAND_ON_SOFT,g.EXPAND_ON_SOFT],[g.EXPAND_ON_SOFT,g.EXPAND_NO,g.EXPAND_ON_SOFT,g.EXPAND_NO],[g.EXPAND_NO,g.EXPAND_ON_SOFT,g.EXPAND_NO,g.EXPAND_ON_SOFT],[g.EXPAND_ON_JUNC,g.EXPAND_ON_JUNC,g.EXPAND_ON_JUNC,g.EXPAND_ON_JUNC],[g.EXPAND_ON_HPIN,g.EXPAND_YES,g.EXPAND_ON_HPIN,g.EXPAND_YES],[g.EXPAND_YES,g.EXPAND_ON_VPIN,g.EXPAND_YES,g.EXPAND_ON_VPIN],[g.EXPAND_YES,g.EXPAND_ON_SOFT,g.EXPAND_NO,g.EXPAND_ON_SOFT],[g.EXPAND_NO,g.EXPAND_ON_SOFT,g.EXPAND_YES,g.EXPAND_ON_SOFT],[g.EXPAND_ON_SOFT,g.EXPAND_NO,g.EXPAND_ON_SOFT,g.EXPAND_YES],[g.EXPAND_ON_SOFT,g.EXPAND_YES,g.EXPAND_ON_SOFT,g.EXPAND_NO],[g.EXPAND_ON_SOFT,g.EXPAND_ON_SOFT,g.EXPAND_ON_SOFT,g.EXPAND_ON_SOFT]]}}}),a.register("90",["89"],function(a,b){"use strict";function c(a,b,c){var d=b.feedbackContent,e=d.querySelector(".nims_ghost_wire"),f=void 0;e?(f=e.querySelector("path"),f?f.setAttribute("d",""):(f=document.createElementNS(t,"path"),f.classList.add("nims_wirePath"),e.appendChild(f))):(e=document.createElementNS(t,"g"),e.classList.add("nims_ghost_wire"),f=document.createElementNS(t,"path"),f.classList.add("nims_wirePath"),e.appendChild(f),d.appendChild(e)),c?e.classList.add("nims_invalidwiretarget"):e.classList.remove("nims_invalidwiretarget"),f.setAttribute("d",a.reduce(function(a,c,d){var e=b.gridToSvg(c);return a+(0===d?"M":"L")+e.x+","+e.y},""));var g=e.querySelector("rect"),h=b.gridToSvg(a[0]);g?(g.setAttribute("x",h.x-5),g.setAttribute("y",h.y-5)):(g=document.createElementNS(t,"rect"),g.setAttribute("x",h.x-5),g.setAttribute("y",h.y-5),g.setAttribute("width",10),g.setAttribute("height",10),g.setAttribute("stroke","none"),g.setAttribute("fill","none"))}function d(){u&&(u=u.filter(function(a){return!!a.element.ownerSVGElement}),u.forEach(function(a){a.callback()}))}function e(a,b,c){var e=document.createElementNS(t,"g"),f=document.createElementNS(t,"circle"),g=document.createElementNS(t,"circle");f.setAttribute("cx",a.x),f.setAttribute("cy",a.y),f.setAttribute("r",b?7.5:2.5),f.classList.add("nims_junction"),f.classList.add("nims_ghost_junction"),g.setAttribute("cx",a.x),g.setAttribute("cy",a.y),g.setAttribute("r",2.5),g.classList.add("nims_junction"),g.classList.add("nims_static_ghost_junction");var h=Math.max(10,4e3/c.viewObject.getZoom());return f.setAttribute("stroke-width",Math.max(1,200/c.viewObject.getZoom())),u||(c.viewObject.listeners.addListener(c.viewObject.viewEvents.CHANGED,d),u=[]),b&&(f.classList.add("nims_wiring_target"),f.animate&&window.multisim.browserDetect.isChrome?(f.animate([{r:h,opacity:0},{r:1,opacity:.5}],{duration:1e3,iterations:1/0}),u.push({element:f,callback:function(){h=Math.max(20,8e3/c.viewObject.getZoom()),f.animate([{r:h,opacity:0},{r:1,opacity:.5}],{duration:1e3,iterations:1/0})}})):function(){var a=document.createElementNS(t,"animate");a.setAttribute("attributeName","r"),a.setAttribute("begin","0s"),a.setAttribute("dur","1s"),a.setAttribute("repeatCount","indefinite"),a.setAttribute("from",h),a.setAttribute("to","1"),f.appendChild(a);var b=document.createElementNS(t,"animate");b.setAttribute("attributeName","opacity"),b.setAttribute("begin","0s"),b.setAttribute("dur","1s"),b.setAttribute("repeatCount","indefinite"),b.setAttribute("from","0"),b.setAttribute("to",".5"),f.appendChild(b),u.push({element:f,callback:function(){h=Math.max(20,8e3/c.viewObject.getZoom()),a.setAttribute("from",h)}})}()),e.classList.add("nims_ghost_junction_group"),e.appendChild(f),e.appendChild(g),e}function f(a,b,c){var d=e(a,c,b);return b.feedbackContent.appendChild(d),d}function g(a){var b=a.feedbackContent.querySelectorAll(".nims_ghost_junction_group");a.viewObject.listeners.removeListener(a.viewObject.viewEvents.CHANGED,d),u=null;for(var c=0;c<b.length;++c){var e=b.item(c);e.parentNode.removeChild(e)}}function h(a,b){a.controlSVG.querySelector("#feedback-"+o.wiringspool).querySelector("g.dontWireHere").style.display=b?"none":""}function i(a){var b=a.controlSVG.querySelector("#feedback-"+o.wiringspool);if(b)b.style.display="";else{var c=p.get(o.wiringspool),d=a.controlSVG;if(c.fragment){var e=document.createElementNS(t,"g");e.classList.add("feedback"),e.setAttribute("id","feedback-"+o.wiringspool),e.appendChild(c.fragment.cloneNode(!0)),d.appendChild(e)}}a.classList.add("nocursor")}function j(a){var b=a.controlSVG.querySelector("#feedback-"+o.wiringspool);b&&(b.style.display="none"),a.classList.remove("nocursor");for(var c=a.controlSVG,d=a.feedbackContent,e=d.querySelectorAll(".nims_ghost_wire"),f=0;f<e.length;++f){var g=e.item(f);g.parentNode.removeChild(g)}var h=c.querySelector(".nims_stretch_wire");h&&h.parentNode.removeChild(h)}function k(a,b){var c=a.viewObject.contentToView(a.gridToSvg(b)),d=a.controlSVG,e=d.querySelector(".nims_stretch_wire");if(!s||c.x==s.x&&c.y==s.y){var f=e?e.querySelector("path"):null;f&&f.setAttribute("d","")}else{e||(e=document.createElementNS(t,"g"),e.classList.add("nims_stretch_wire"),d.appendChild(e));var g=e.querySelector("path");g?g.setAttribute("d",""):(g=document.createElementNS(t,"path"),g.classList.add("nims_wirePath"),g.setAttribute("d",""),e.appendChild(g)),g.setAttribute("d",g.getAttribute("d")+"M"+c.x+","+c.y+"L"+s.x+","+s.y)}}function l(a,b,c){if(r=a){var d=c.controlSVG.querySelector("#feedback-"+o.wiringspool),e=c.viewObject.contentToView(c.gridToSvg(r)),f=c.viewObject.viewElement,g={left:0,top:0,right:f.offsetWidth,bottom:f.offsetHeight};e.x+=q.x,e.y+=q.y,d.setAttribute("transform","translate("+e.x+","+e.y+")");var h=n(d),i={x:h.left<g.left?g.left-h.left:h.right>g.right?g.right-h.right:0,y:h.top<g.top?g.top-h.top:h.bottom>g.bottom?g.bottom-h.bottom:0};if(s={x:e.x+i.x-q.x,y:e.y+i.y-q.y},0!==i.x||0!==i.y){var j=e.x+i.x,l=e.y+i.y;d.setAttribute("transform","translate("+j+","+l+")")}b&&k(c,b)}}function m(a){p.set(o.wiringspool,{icon:"resources/icons/adorners/wiring spool.svg"}),p.forEach(function(b){a.loadSVGResource(b.icon,function(a){b.fragment=a?a.querySelector("g"):null})})}var n,o,p,q,r,s,t,u,v;return{setters:[function(a){n=a.fastBBox}],execute:function(){o=Object.freeze({wiringspool:"wiringspool"}),p=new Map,q={x:-30,y:0},r=null,s=null,t="http://www.w3.org/2000/svg",u=null,v={initialize:m,hideSpool:j,showSpool:i,validateSpool:h,drawGhostWires:c,drawGhostJunction:f,removeAllGhostJunctions:g,updateSpoolPosition:l,createGhostJunction:e,get imageOffset(){return q}},a("default",v)}}}),a.register("187",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(a){return Array.isArray(a)?a:Array.from(a)})}}}),a.register("89",[],function(a,b){"use strict";function c(a){var b=null;return a&&function(){var c=a.getBBox(),d=a.ownerSVGElement,e=[d.createSVGPoint(),d.createSVGPoint(),d.createSVGPoint(),d.createSVGPoint()],f=a.getTransformToElement(d);e[0].x=c.x,e[0].y=c.y,e[1].x=c.x+c.width,e[1].y=c.y,e[2].x=c.x+c.width,e[2].y=c.y+c.height,e[3].x=c.x,e[3].y=c.y+c.height;var g=Number.MAX_VALUE,h=Number.MIN_VALUE,i=Number.MAX_VALUE,j=Number.MIN_VALUE;e.forEach(function(a){a=a.matrixTransform(f),g=Math.min(g,a.x),h=Math.max(h,a.x),i=Math.min(i,a.y),j=Math.max(j,a.y)}),b={left:g,top:i,right:h,bottom:j,width:h-g,height:j-i}}(),b}function d(a,b){var c={x:0|Math.round(b.x),y:0|Math.round(b.y)},d=a.ownerSVGElement;if(d){var e=d.createSVGPoint();e.x=b.x,e.y=b.y;var f=a.getTransformToElement(d);e=e.matrixTransform(f),c={x:0|Math.round(e.x),y:0|Math.round(e.y)}}return c}return a("fastBBox",c),a("getTotalTransformOfPoint",d),{setters:[],execute:function(){}}}),a.register("43",["187","89","29","30"],function(a,b){"use strict";function c(a){q=a}function d(a){for(var b=[],c=a.controlSVG.querySelectorAll(".adorner"),d=0;d<c.length;++d)if(!c[d].classList.contains("hidden")){var e=c[d].querySelector(".outercircle"),f={cx:e.cx.baseVal.value,cy:e.cy.baseVal.value,r:e.r.baseVal.value},g=a.controlSVG.createSVGPoint();g.x=f.cx,g.y=f.cy,g=g.matrixTransform(e.parentNode.transform.baseVal.getItem(0).matrix),g=a.viewObject.viewToContent(g),f.cx=g.x-.5,f.cy=g.y-.5,f.r*=100/a.viewObject.getZoom(),b.push(f)}return b}function e(a,b){-1==a?6==b.children.length&&(b.querySelectorAll("*").forEach(function(a){return a.remove()}),r.cloneNode(!0).querySelectorAll("*").forEach(function(a){return b.appendChild(a)})):6==b.children.length?b.children[5].textContent=a:(b.querySelectorAll("*").forEach(function(a){return a.remove()}),s.cloneNode(!0).querySelectorAll("*").forEach(function(a){return b.appendChild(a)}),b.children[5].textContent=a)}function f(a,b,c){c.forEach(function(c,d){c.forEach(function(c){var e=!1;b.forEach(function(a){a==c&&(e=!0)}),e||(n.has("togglestate")&&o.set("togglestate_"+c,n.get("togglestate")),v(a,[c],d))})})}function g(a){a.classList.add("active")}function h(a){a.classList.remove("active")}var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;return{setters:[function(a){i=a.default},function(a){j=a.fastBBox},function(a){k=a.default},function(a){l=a.default}],execute:function(){m=Object.freeze({TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,BOTTOM_CENTER:5}),n=new Map,o=new Map,p=null,q=null,r=null,s=null,t=function(a,b){n.set("deleteobject",{icon:"resources/icons/adorners/schematic_adorner delete.svg",position:m.TOP_RIGHT,outerSize:18,innerSize:16}),n.set("rotateobject",{icon:"resources/icons/adorners/schematic_adorner rotate.svg",position:m.BOTTOM_LEFT,outerSize:18,innerSize:16}),n.set("flipobjecthorizontal",{icon:"resources/icons/adorners/schematic_adorner flip horizontal.svg",position:m.TOP_LEFT,outerSize:18,innerSize:16}),n.set("duplicateobject",{icon:"resources/icons/adorners/schematic_adorner duplicate.svg",position:m.BOTTOM_RIGHT,outerSize:18,innerSize:16}),n.set("togglestate",{icon:"resources/icons/adorners/schematic_adorner togglestate.svg",position:m.BOTTOM_CENTER,outerSize:12.4,innerSize:10.8}),n.set("addreferenceprobe",{icon:"resources/icons/adorners/schematic_adorner add reference probe.svg",position:m.BOTTOM_LEFT,outerSize:18,innerSize:16}),k.addReadyListener(function(a){n.get("deleteobject").tooltip=a.i18n.translate("Delete (Del)").fetch(),n.get("rotateobject").tooltip=a.i18n.translate("Rotate (Shift+R)").fetch(),n.get("flipobjecthorizontal").tooltip=a.i18n.translate("Flip/Mirror (Shift+M)").fetch(),n.get("duplicateobject").tooltip=a.i18n.translate("Duplicate (Ctrl+drag)").fetch(),n.get("togglestate").tooltip=a.i18n.translate("Toggle").fetch(),n.get("addreferenceprobe").tooltip=a.i18n.translate("Add reference probe").fetch()}),p=b,p.loadSVGResource("resources/icons/adorners/schematic_adorner togglestate default.svg",function(a){a&&(r=a.querySelector("g"))}),p.loadSVGResource("resources/icons/adorners/schematic_adorner togglestate.svg",function(a){a&&(s=a.querySelector("g"))}),n.forEach(function(a){p.loadSVGResource(a.icon,function(b){b&&(a.fragment=b.querySelector("g"))})}),a.listeners.addListener(a.events.ACTIVEVIEWCHANGED,function(a){a.newView&&function(){var b=a.newView,c=function(){var a=b.getSelection(!1);y.updateAdorners(a,b)};b.sheetTemplateController.design.listeners.addListener(l.DESIGN_CHANGED,c)}()})},u=function(a,b){if(b.controlSVG)for(var c=b.controlSVG.querySelectorAll(".adorner"),d=0;d<c.length;++d){var e=c[d];e.parentNode.removeChild(e)}var g=b.sheetTemplateController.sheetTemplate.componentShortcuts;if(a.length>0){var h=b.sheetTemplateController.sheetTemplate,i=h.getAdornerCommandsFor(a).concat(b.sheetTemplateController.getInteractiveCommandsFor(b.contextGUID,a));if(o.clear(),i.forEach(function(b){n.has(b)&&o.set(b+"_"+a.join("_"),n.get(b))}),1==a.length){var j=-1;g.forEach(function(b,c){b.forEach(function(b){a[0]==b&&(j=c)})}),v(b,a,j)}else v(b,a);f(b,a,g)}else w(b),o.clear(),f(b,a,g)},v=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;b.length>0?function(){var d=a.sheetTemplateController.sheetTemplate.getBoundingBoxForItems(b)||q,f=a.controlSVG,g={x:d.left*a.getGridSize(),y:d.top*a.getGridSize()},h={x:d.right*a.getGridSize(),y:d.bottom*a.getGridSize()};g=a.viewObject.contentToView(g),h=a.viewObject.contentToView(h);var k=!1;h.x-g.x<=50&&(k=!0);var l=function(a,b){var c=void 0,d=void 0;switch(b.position){case m.TOP_LEFT:c=g.x-b.outerSize,d=g.y-b.outerSize;break;case m.TOP_RIGHT:c=h.x+b.outerSize,d=g.y-b.outerSize;break;case m.BOTTOM_RIGHT:c=h.x+b.outerSize,d=h.y+b.outerSize;break;case m.BOTTOM_LEFT:c=g.x-b.outerSize,d=h.y+b.outerSize;break;case m.BOTTOM_CENTER:c=(g.x+h.x)/2,d=h.y+(k?1.25:1)*b.size.height*2/3}a.setAttribute("transform","translate("+c+","+d+")")};o.forEach(function(a,d){function g(b){var g="http://www.w3.org/2000/svg",h=document.createElementNS(g,"g");h.classList.add("adorner"),h.setAttribute("id","adorner-"+d),h.setAttribute("commandID",n),h.setAttribute("componentGUID",o.join("_"));var i=document.createElementNS(g,"circle");i.setAttribute("cx",0),i.setAttribute("cy",0),i.setAttribute("r",a.outerSize+3),i.classList.add("outercircle"),h.appendChild(i);var k=document.createElementNS(g,"circle");k.setAttribute("cx",0),k.setAttribute("cy",0),k.setAttribute("r",a.outerSize),k.classList.add("innercircle"),h.appendChild(k);var m=b.cloneNode(!0);if("togglestate"==n&&e(c,m),m.classList.add("icon"),h.appendChild(m),f.appendChild(h),!a.size){var p=j(m);a.size={height:p.bottom-p.top,width:p.right-p.left},a.offset={x:p.left,y:p.top}}var q=.68,r=-(a.offset.x+a.size.width/2),s=-(a.offset.y+a.size.height/2);m.setAttribute("transform","scale("+q+","+q+") translate("+r+","+s+")"),l(h,a);var t=document.createElementNS(g,"foreignObject");t.setAttribute("width",2*a.outerSize),t.setAttribute("height",2*a.outerSize),t.setAttribute("x",-a.outerSize),t.setAttribute("y",-a.outerSize);var u=document.createElement("div");return u.style.width="100%",u.style.height="100%",u.style.borderRadius=a.outerSize+"px",a.tooltip&&a.tooltip.length>0&&u.setAttribute("title",a.tooltip),h.appendChild(t),t.appendChild(u),h}var h=document.getElementById("adorner-"+d),k=d.split("_"),m=i(k),n=m[0],o=m.slice(1);o.join(",")===b.join(",")&&(a.fragment?(h=g(a.fragment),l(h,a),h.classList.remove("hidden")):p.loadSVGResource(a.icon,function(b){b&&(a.fragment=b.querySelector("g"),h=g(a.fragment),l(h,a),h.classList.remove("hidden"))}))})}():w(a)},w=function(a){for(var b=a.controlSVG.querySelectorAll(".adorner"),c=0;c<b.length;++c){b[c].classList.add("hidden")}},x=function(a){return a.classList.contains("adorner")},y={initialize:t,setAdornerPlacementRect:c,modifyToggleAdorner:e,isAdorner:x,updateAdorners:u,resetAdornerPosition:v,hideAdorners:w,getViewProjectedAdorners:d,applyActiveStyle:g,removeActiveStyle:h},a("default",y)}}}),a.register("39",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({PIN:"pin",JUNCTION:"junction",WIRE:"wire"}),a("default",c)}}}),function(){var d=a.amdDefine;(function(){function a(a,b){return a.set(b[0],b[1]),a}function e(a,b){return a.add(b),a}function f(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function g(a,b,c,d){for(var e=-1,f=a?a.length:0;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function h(a,b){for(var c=-1,d=a?a.length:0;++c<d&&!1!==b(a[c],c,a););return a}function i(a,b){for(var c=a?a.length:0;c--&&!1!==b(a[c],c,a););return a}function j(a,b){for(var c=-1,d=a?a.length:0;++c<d;)if(!b(a[c],c,a))return!1;return!0}function k(a,b){for(var c=-1,d=a?a.length:0,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function l(a,b){return!!(a?a.length:0)&&w(a,b,0)>-1}function m(a,b,c){for(var d=-1,e=a?a.length:0;++d<e;)if(c(b,a[d]))return!0;return!1}function n(a,b){for(var c=-1,d=a?a.length:0,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function o(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function p(a,b,c,d){var e=-1,f=a?a.length:0;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function q(a,b,c,d){var e=a?a.length:0;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function r(a,b){for(var c=-1,d=a?a.length:0;++c<d;)if(b(a[c],c,a))return!0;return!1}function s(a){return a.split("")}function t(a){return a.match(Fb)||[]}function u(a,b,c){var d;return c(a,function(a,c,e){if(b(a,c,e))return d=c,!1}),d}function v(a,b,c,d){for(var e=a.length,f=c+(d?1:-1);d?f--:++f<e;)if(b(a[f],f,a))return f;return-1}function w(a,b,c){if(b!==b)return v(a,y,c);for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function x(a,b,c,d){for(var e=c-1,f=a.length;++e<f;)if(d(a[e],b))return e;return-1}function y(a){return a!==a}function z(a,b){var c=a?a.length:0;return c?E(a,b)/c:Ea}function A(a){return function(b){return null==b?ca:b[a]}}function B(a){return function(b){return null==a?ca:a[b]}}function C(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function D(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function E(a,b){for(var c,d=-1,e=a.length;++d<e;){var f=b(a[d]);f!==ca&&(c=c===ca?f:c+f)}return c}function F(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function G(a,b){return n(b,function(b){return[b,a[b]]})}function H(a){return function(b){return a(b)}}function I(a,b){return n(b,function(b){return a[b]})}function J(a,b){return a.has(b)}function K(a,b){for(var c=-1,d=a.length;++c<d&&w(b,a[c],0)>-1;);return c}function L(a,b){for(var c=a.length;c--&&w(b,a[c],0)>-1;);return c}function M(a,b){for(var c=a.length,d=0;c--;)a[c]===b&&d++;return d}function N(a){return"\\"+Oc[a]}function O(a,b){return null==a?ca:a[b]}function P(a){return Fc.test(a)}function Q(a){return Gc.test(a)}function R(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function S(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}function T(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function U(a,b){return function(c){return a(b(c))}}function V(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];g!==b&&g!==ha||(a[c]=ha,f[e++]=c)}return f}function W(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function X(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=[a,a]}),c}function Y(a){return P(a)?$(a):dd(a)}function Z(a){return P(a)?_(a):s(a)}function $(a){for(var b=Dc.lastIndex=0;Dc.test(a);)b++;return b}function _(a){return a.match(Dc)||[]}function aa(a){return a.match(Ec)||[]}function ba(b){function c(a){if(Kh(a)&&!Pl(a)&&!(a instanceof B)){if(a instanceof s)return a;if(Wj.call(a,"__wrapped__"))return Gf(a)}return new s(a)}function d(){}function s(a,b){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=ca}function B(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Fa,this.__views__=[]}function $(){var a=new B(this.__wrapped__);return a.__actions__=xe(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=xe(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=xe(this.__views__),a}function _(){if(this.__filtered__){var a=new B(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Fb(){var a=this.__wrapped__.value(),b=this.__dir__,c=Pl(a),d=b<0,e=c?a.length:0,f=gf(0,e,this.__views__),g=f.start,h=f.end,i=h-g,j=d?h:g-1,k=this.__iteratees__,l=k.length,m=0,n=uk(i,this.__takeCount__);if(!c||e<ea||e==i&&n==i)return ee(a,this.__actions__);var o=[];a:for(;i--&&m<n;){j+=b;for(var p=-1,q=a[j];++p<l;){var r=k[p],s=r.iteratee,t=r.type,u=s(q);if(t==za)q=u;else if(!u){if(t==ya)continue a;break a}}o[m++]=q}return o}function Sb(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Tb(){this.__data__=Dk?Dk(null):{}}function Ub(a){return this.has(a)&&delete this.__data__[a]}function Vb(a){var b=this.__data__;if(Dk){var c=b[a];return c===ga?ca:c}return Wj.call(b,a)?b[a]:ca}function Wb(a){var b=this.__data__;return Dk?b[a]!==ca:Wj.call(b,a)}function Xb(a,b){return this.__data__[a]=Dk&&b===ca?ga:b,this}function Yb(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Zb(){this.__data__=[]}function $b(a){var b=this.__data__,c=vc(b,a);return!(c<0)&&(c==b.length-1?b.pop():hk.call(b,c,1),!0)}function _b(a){var b=this.__data__,c=vc(b,a);return c<0?ca:b[c][1]}function ac(a){return vc(this.__data__,a)>-1}function bc(a,b){var c=this.__data__,d=vc(c,a);return d<0?c.push([a,b]):c[d][1]=b,this}function cc(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function dc(){this.__data__={hash:new Sb,map:new(zk||Yb),string:new Sb}}function ec(a){return df(this,a).delete(a)}function fc(a){return df(this,a).get(a)}function gc(a){return df(this,a).has(a)}function hc(a,b){return df(this,a).set(a,b),this}function ic(a){var b=-1,c=a?a.length:0;for(this.__data__=new cc;++b<c;)this.add(a[b])}function jc(a){return this.__data__.set(a,ga),this}function kc(a){return this.__data__.has(a)}function lc(a){this.__data__=new Yb(a)}function mc(){this.__data__=new Yb}function nc(a){return this.__data__.delete(a)}function oc(a){return this.__data__.get(a)}function pc(a){return this.__data__.has(a)}function qc(a,b){var c=this.__data__;if(c instanceof Yb){var d=c.__data__;if(!zk||d.length<ea-1)return d.push([a,b]),this;c=this.__data__=new cc(d)}return c.set(a,b),this}function rc(a,b){var c=Pl(a)||wh(a)?F(a.length,Oj):[],d=c.length,e=!!d;for(var f in a)!b&&!Wj.call(a,f)||e&&("length"==f||pf(f,d))||c.push(f);return c}function sc(a,b,c,d){return a===ca||vh(a,Sj[c])&&!Wj.call(d,c)?b:a}function tc(a,b,c){(c===ca||vh(a[b],c))&&("number"!=typeof b||c!==ca||b in a)||(a[b]=c)}function uc(a,b,c){var d=a[b];Wj.call(a,b)&&vh(d,c)&&(c!==ca||b in a)||(a[b]=c)}function vc(a,b){for(var c=a.length;c--;)if(vh(a[c][0],b))return c;return-1}function wc(a,b,c,d){return Qk(a,function(a,e,f){b(d,a,c(a),f)}),d}function xc(a,b){return a&&ye(b,ri(b),a)}function yc(a,b){for(var c=-1,d=null==a,e=b.length,f=Hj(e);++c<e;)f[c]=d?ca:oi(a,b[c]);return f}function zc(a,b,c){return a===a&&(c!==ca&&(a=a<=c?a:c),b!==ca&&(a=a>=b?a:b)),a}function Ac(a,b,c,d,e,f,g){var i;if(d&&(i=f?d(a,e,f,g):d(a)),i!==ca)return i;if(!Jh(a))return a;var j=Pl(a);if(j){if(i=kf(a),!b)return xe(a,i)}else{var k=$k(a),l=k==Oa||k==Pa;if(Rl(a))return le(a,b);if(k==Sa||k==Ja||l&&!f){if(R(a))return f?a:{};if(i=lf(l?{}:a),!b)return ze(a,xc(i,a))}else{if(!Kc[k])return f?a:{};i=mf(a,k,Ac,b)}}g||(g=new lc);var m=g.get(a);if(m)return m;if(g.set(a,i),!j)var n=c?$e(a):ri(a);return h(n||a,function(e,f){n&&(f=e,e=a[f]),uc(i,f,Ac(e,b,c,d,f,a,g))}),i}function Dc(a){var b=ri(a);return function(c){return Ec(c,a,b)}}function Ec(a,b,c){var d=c.length;if(null==a)return!d;for(a=Mj(a);d--;){var e=c[d],f=b[e],g=a[e];if(g===ca&&!(e in a)||!f(g))return!1}return!0}function Fc(a){return Jh(a)?fk(a):{}}function Gc(a,b,c){if("function"!=typeof a)throw new Pj(fa);return bl(function(){a.apply(ca,c)},b)}function Lc(a,b,c,d){var e=-1,f=l,g=!0,h=a.length,i=[],j=b.length;if(!h)return i;c&&(b=n(b,H(c))),d?(f=m,g=!1):b.length>=ea&&(f=J,g=!1,b=new ic(b));a:for(;++e<h;){var k=a[e],o=c?c(k):k;if(k=d||0!==k?k:0,g&&o===o){for(var p=j;p--;)if(b[p]===o)continue a;i.push(k)}else f(b,o,d)||i.push(k)}return i}function Mc(a,b){var c=!0;return Qk(a,function(a,d,e){return c=!!b(a,d,e)}),c}function Nc(a,b,c){for(var d=-1,e=a.length;++d<e;){var f=a[d],g=b(f);if(null!=g&&(h===ca?g===g&&!Vh(g):c(g,h)))var h=g,i=f}return i}function Oc(a,b,c,d){var e=a.length;for(c=_h(c),c<0&&(c=-c>e?0:e+c),d=d===ca||d>e?e:_h(d),d<0&&(d+=e),d=c>d?0:ai(d);c<d;)a[c++]=b;return a}function Rc(a,b){var c=[];return Qk(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function Sc(a,b,c,d,e){var f=-1,g=a.length;for(c||(c=of),e||(e=[]);++f<g;){var h=a[f];b>0&&c(h)?b>1?Sc(h,b-1,c,d,e):o(e,h):d||(e[e.length]=h)}return e}function Uc(a,b){return a&&Sk(a,b,ri)}function Vc(a,b){return a&&Tk(a,b,ri)}function Xc(a,b){return k(b,function(b){return Gh(a[b])})}function Yc(a,b){b=rf(b,a)?[b]:je(b);for(var c=0,d=b.length;null!=a&&c<d;)a=a[Df(b[c++])];return c&&c==d?a:ca}function dd(a,b,c){var d=b(a);return Pl(a)?d:o(d,c(a))}function id(a){return Zj.call(a)}function jd(a,b){return a>b}function kd(a,b){return null!=a&&Wj.call(a,b)}function ld(a,b){return null!=a&&b in Mj(a)}function md(a,b,c){return a>=uk(b,c)&&a<tk(b,c)}function nd(a,b,c){for(var d=c?m:l,e=a[0].length,f=a.length,g=f,h=Hj(f),i=1/0,j=[];g--;){var k=a[g];g&&b&&(k=n(k,H(b))),i=uk(k.length,i),h[g]=!c&&(b||e>=120&&k.length>=120)?new ic(g&&k):ca}k=a[0];var o=-1,p=h[0];a:for(;++o<e&&j.length<i;){var q=k[o],r=b?b(q):q;if(q=c||0!==q?q:0,!(p?J(p,r):d(j,r,c))){for(g=f;--g;){var s=h[g];if(!(s?J(s,r):d(a[g],r,c)))continue a}p&&p.push(r),j.push(q)}}return j}function od(a,b,c,d){return Uc(a,function(a,e,f){b(d,c(a),e,f)}),d}function pd(a,b,c){rf(b,a)||(b=je(b),a=Bf(a,b),b=Zf(b));var d=null==a?a:a[Df(b)];return null==d?ca:f(d,a,c)}function qd(a){return Kh(a)&&Zj.call(a)==$a}function rd(a){return Kh(a)&&Zj.call(a)==Ma}function sd(a,b,c,d,e){return a===b||(null==a||null==b||!Jh(a)&&!Kh(b)?a!==a&&b!==b:td(a,b,sd,c,d,e))}function td(a,b,c,d,e,f){var g=Pl(a),h=Pl(b),i=Ka,j=Ka;g||(i=$k(a),i=i==Ja?Sa:i),h||(j=$k(b),j=j==Ja?Sa:j);var k=i==Sa&&!R(a),l=j==Sa&&!R(b),m=i==j;if(m&&!k)return f||(f=new lc),g||Wl(a)?Xe(a,b,c,d,e,f):Ye(a,b,i,c,d,e,f);if(!(e&ta)){var n=k&&Wj.call(a,"__wrapped__"),o=l&&Wj.call(b,"__wrapped__");if(n||o){var p=n?a.value():a,q=o?b.value():b;return f||(f=new lc),c(p,q,d,e,f)}}return!!m&&(f||(f=new lc),Ze(a,b,c,d,e,f))}function ud(a){return Kh(a)&&$k(a)==Qa}function vd(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=Mj(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){h=c[e];var i=h[0],j=a[i],k=h[1];if(g&&h[2]){if(j===ca&&!(i in a))return!1}else{var l=new lc;if(d)var m=d(j,k,i,a,b,l);if(!(m===ca?sd(k,j,d,sa|ta,l):m))return!1}}return!0}function wd(a){return!(!Jh(a)||uf(a))&&(Gh(a)||R(a)?_j:Mb).test(Ef(a))}function xd(a){return Jh(a)&&Zj.call(a)==Ua}function yd(a){return Kh(a)&&$k(a)==Va}function zd(a){return Kh(a)&&Ih(a.length)&&!!Jc[Zj.call(a)]}function Ad(a){return"function"==typeof a?a:null==a?hj:"object"==typeof a?Pl(a)?Gd(a[0],a[1]):Fd(a):pj(a)}function Bd(a){if(!vf(a))return sk(a);var b=[];for(var c in Mj(a))Wj.call(a,c)&&"constructor"!=c&&b.push(c);return b}function Cd(a){if(!Jh(a))return Af(a);var b=vf(a),c=[];for(var d in a)("constructor"!=d||!b&&Wj.call(a,d))&&c.push(d);return c}function Dd(a,b){return a<b}function Ed(a,b){var c=-1,d=xh(a)?Hj(a.length):[];return Qk(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Fd(a){var b=ef(a);return 1==b.length&&b[0][2]?xf(b[0][0],b[0][1]):function(c){return c===a||vd(c,a,b)}}function Gd(a,b){return rf(a)&&wf(b)?xf(Df(a),b):function(c){var d=oi(c,a);return d===ca&&d===b?qi(c,a):sd(b,d,ca,sa|ta)}}function Hd(a,b,c,d,e){if(a!==b){if(!Pl(b)&&!Wl(b))var f=Cd(b);h(f||b,function(g,h){if(f&&(h=g,g=b[h]),Jh(g))e||(e=new lc),Id(a,b,h,c,Hd,d,e);else{var i=d?d(a[h],g,h+"",a,b,e):ca;i===ca&&(i=g),tc(a,h,i)}})}}function Id(a,b,c,d,e,f,g){var h=a[c],i=b[c],j=g.get(i);if(j)return void tc(a,c,j);var k=f?f(h,i,c+"",a,b,g):ca,l=k===ca;l&&(k=i,Pl(i)||Wl(i)?Pl(h)?k=h:yh(h)?k=xe(h):(l=!1,k=Ac(i,!0)):Sh(i)||wh(i)?wh(h)?k=ci(h):!Jh(h)||d&&Gh(h)?(l=!1,k=Ac(i,!0)):k=h:l=!1),l&&(g.set(i,k),e(k,i,d,f,g),g.delete(i)),tc(a,c,k)}function Jd(a,b){var c=a.length;if(c)return b+=b<0?c:0,pf(b,c)?a[b]:ca}function Kd(a,b,c){var d=-1;return b=n(b.length?b:[hj],H(cf())),D(Ed(a,function(a,c,e){return{criteria:n(b,function(b){return b(a)}),index:++d,value:a}}),function(a,b){return ue(a,b,c)})}function Ld(a,b){return a=Mj(a),Md(a,b,function(b,c){return c in a})}function Md(a,b,c){for(var d=-1,e=b.length,f={};++d<e;){var g=b[d],h=a[g];c(h,g)&&(f[g]=h)}return f}function Nd(a){return function(b){return Yc(b,a)}}function Od(a,b,c,d){var e=d?x:w,f=-1,g=b.length,h=a;for(a===b&&(b=xe(b)),c&&(h=n(a,H(c)));++f<g;)for(var i=0,j=b[f],k=c?c(j):j;(i=e(h,k,i,d))>-1;)h!==a&&hk.call(h,i,1),hk.call(a,i,1);return a}function Pd(a,b){for(var c=a?b.length:0,d=c-1;c--;){var e=b[c];if(c==d||e!==f){var f=e;if(pf(e))hk.call(a,e,1);else if(rf(e,a))delete a[Df(e)];else{var g=je(e),h=Bf(a,g);null!=h&&delete h[Df(Zf(g))]}}}return a}function Qd(a,b){return a+nk(wk()*(b-a+1))}function Rd(a,b,c,d){for(var e=-1,f=tk(mk((b-a)/(c||1)),0),g=Hj(f);f--;)g[d?f:++e]=a,a+=c;return g}function Sd(a,b){var c="";if(!a||b<1||b>Ca)return c;do{b%2&&(c+=a),(b=nk(b/2))&&(a+=a)}while(b);return c}function Td(a,b){return b=tk(b===ca?a.length-1:b,0),function(){for(var c=arguments,d=-1,e=tk(c.length-b,0),g=Hj(e);++d<e;)g[d]=c[b+d];d=-1;for(var h=Hj(b+1);++d<b;)h[d]=c[d];return h[b]=g,f(a,this,h)}}function Ud(a,b,c,d){if(!Jh(a))return a;b=rf(b,a)?[b]:je(b);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=Df(b[e]),j=c;if(e!=g){var k=h[i];j=d?d(k,i,h):ca,j===ca&&(j=Jh(k)?k:pf(b[e+1])?[]:{})}uc(h,i,j),h=h[i]}return a}function Vd(a,b,c){var d=-1,e=a.length;b<0&&(b=-b>e?0:e+b),c=c>e?e:c,c<0&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Hj(e);++d<e;)f[d]=a[d+b];return f}function Wd(a,b){var c;return Qk(a,function(a,d,e){return!(c=b(a,d,e))}),!!c}function Xd(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&e<=Ha){for(;d<e;){var f=d+e>>>1,g=a[f];null!==g&&!Vh(g)&&(c?g<=b:g<b)?d=f+1:e=f}return e}return Yd(a,b,hj,c)}function Yd(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h=null===b,i=Vh(b),j=b===ca;e<f;){var k=nk((e+f)/2),l=c(a[k]),m=l!==ca,n=null===l,o=l===l,p=Vh(l);if(g)var q=d||o;else q=j?o&&(d||m):h?o&&m&&(d||!n):i?o&&m&&!n&&(d||!p):!n&&!p&&(d?l<=b:l<b);q?e=k+1:f=k}return uk(f,Ga)}function Zd(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c],h=b?b(g):g;if(!c||!vh(h,i)){var i=h;f[e++]=0===g?0:g}}return f}function $d(a){return"number"==typeof a?a:Vh(a)?Ea:+a}function _d(a){if("string"==typeof a)return a;if(Vh(a))return Pk?Pk.call(a):"";var b=a+"";return"0"==b&&1/a==-Ba?"-0":b}function ae(a,b,c){var d=-1,e=l,f=a.length,g=!0,h=[],i=h;if(c)g=!1,e=m;else if(f>=ea){var j=b?null:Wk(a);if(j)return W(j);g=!1,e=J,i=new ic}else i=b?[]:h;a:for(;++d<f;){var k=a[d],n=b?b(k):k;if(k=c||0!==k?k:0,g&&n===n){for(var o=i.length;o--;)if(i[o]===n)continue a;b&&i.push(n),h.push(k)}else e(i,n,c)||(i!==h&&i.push(n),h.push(k))}return h}function be(a,b){b=rf(b,a)?[b]:je(b),a=Bf(a,b);var c=Df(Zf(b));return!(null!=a&&Wj.call(a,c))||delete a[c]}function ce(a,b,c,d){return Ud(a,b,c(Yc(a,b)),d)}function de(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?Vd(a,d?0:f,d?f+1:e):Vd(a,d?f+1:0,d?e:f)}function ee(a,b){var c=a;return c instanceof B&&(c=c.value()),p(b,function(a,b){return b.func.apply(b.thisArg,o([a],b.args))},c)}function fe(a,b,c){for(var d=-1,e=a.length;++d<e;)var f=f?o(Lc(f,a[d],b,c),Lc(a[d],f,b,c)):a[d];return f&&f.length?ae(f,b,c):[]}function ge(a,b,c){for(var d=-1,e=a.length,f=b.length,g={};++d<e;){var h=d<f?b[d]:ca;c(g,a[d],h)}return g}function he(a){return yh(a)?a:[]}function ie(a){return"function"==typeof a?a:hj}function je(a){return Pl(a)?a:dl(a)}function ke(a,b,c){var d=a.length;return c=c===ca?d:c,!b&&c>=d?a:Vd(a,b,c)}function le(a,b){if(b)return a.slice();var c=new a.constructor(a.length);return a.copy(c),c}function me(a){var b=new a.constructor(a.byteLength);return new ck(b).set(new ck(a)),b}function ne(a,b){var c=b?me(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.byteLength)}function oe(b,c,d){return p(c?d(T(b),!0):T(b),a,new b.constructor)}function pe(a){var b=new a.constructor(a.source,Ib.exec(a));return b.lastIndex=a.lastIndex,b}function qe(a,b,c){return p(b?c(W(a),!0):W(a),e,new a.constructor)}function re(a){return Ok?Mj(Ok.call(a)):{}}function se(a,b){var c=b?me(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}function te(a,b){if(a!==b){var c=a!==ca,d=null===a,e=a===a,f=Vh(a),g=b!==ca,h=null===b,i=b===b,j=Vh(b);if(!h&&!j&&!f&&a>b||f&&g&&i&&!h&&!j||d&&g&&i||!c&&i||!e)return 1;if(!d&&!f&&!j&&a<b||j&&c&&e&&!d&&!f||h&&c&&e||!g&&e||!i)return-1}return 0}function ue(a,b,c){for(var d=-1,e=a.criteria,f=b.criteria,g=e.length,h=c.length;++d<g;){var i=te(e[d],f[d]);if(i){if(d>=h)return i;return i*("desc"==c[d]?-1:1)}}return a.index-b.index}function ve(a,b,c,d){for(var e=-1,f=a.length,g=c.length,h=-1,i=b.length,j=tk(f-g,0),k=Hj(i+j),l=!d;++h<i;)k[h]=b[h];for(;++e<g;)(l||e<f)&&(k[c[e]]=a[e]);for(;j--;)k[h++]=a[e++];return k}function we(a,b,c,d){for(var e=-1,f=a.length,g=-1,h=c.length,i=-1,j=b.length,k=tk(f-h,0),l=Hj(k+j),m=!d;++e<k;)l[e]=a[e];for(var n=e;++i<j;)l[n+i]=b[i];for(;++g<h;)(m||e<f)&&(l[n+c[g]]=a[e++]);return l}function xe(a,b){var c=-1,d=a.length;for(b||(b=Hj(d));++c<d;)b[c]=a[c];return b}function ye(a,b,c,d){c||(c={});for(var e=-1,f=b.length;++e<f;){var g=b[e],h=d?d(c[g],a[g],g,c,a):ca;uc(c,g,h===ca?a[g]:h)}return c}function ze(a,b){return ye(a,Yk(a),b)}function Ae(a,b){return function(c,d){var e=Pl(c)?g:wc,f=b?b():{};return e(c,a,cf(d,2),f)}}function Be(a){return Td(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:ca,g=e>2?c[2]:ca;for(f=a.length>3&&"function"==typeof f?(e--,f):ca,g&&qf(c[0],c[1],g)&&(f=e<3?ca:f,e=1),b=Mj(b);++d<e;){var h=c[d];h&&a(b,h,d,f)}return b})}function Ce(a,b){return function(c,d){if(null==c)return c;if(!xh(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=Mj(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}function De(a){return function(b,c,d){for(var e=-1,f=Mj(b),g=d(b),h=g.length;h--;){var i=g[a?h:++e];if(!1===c(f[i],i,f))break}return b}}function Ee(a,b,c){function d(){return(this&&this!==Tc&&this instanceof d?f:a).apply(e?c:this,arguments)}var e=b&ia,f=He(a);return d}function Fe(a){return function(b){b=ei(b);var c=P(b)?Z(b):ca,d=c?c[0]:b.charAt(0),e=c?ke(c,1).join(""):b.slice(1);return d[a]()+e}}function Ge(a){return function(b){return p(cj(Ki(b).replace(Bc,"")),a,"")}}function He(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=Fc(a.prototype),d=a.apply(c,b);return Jh(d)?d:c}}function Ie(a,b,c){function d(){for(var g=arguments.length,h=Hj(g),i=g,j=bf(d);i--;)h[i]=arguments[i];var k=g<3&&h[0]!==j&&h[g-1]!==j?[]:V(h,j);return(g-=k.length)<c?Te(a,b,Le,d.placeholder,ca,h,k,ca,ca,c-g):f(this&&this!==Tc&&this instanceof d?e:a,this,h)}var e=He(a);return d}function Je(a){return function(b,c,d){var e=Mj(b);if(!xh(b)){var f=cf(c,3);b=ri(b),c=function(a){return f(e[a],a,e)}}var g=a(b,c,d);return g>-1?e[f?b[g]:g]:ca}}function Ke(a){return Td(function(b){b=Sc(b,1);var c=b.length,d=c,e=s.prototype.thru;for(a&&b.reverse();d--;){var f=b[d];if("function"!=typeof f)throw new Pj(fa);if(e&&!g&&"wrapper"==af(f))var g=new s([],!0)}for(d=g?d:c;++d<c;){f=b[d];var h=af(f),i="wrapper"==h?Xk(f):ca;g=i&&tf(i[0])&&i[1]==(pa|la|na|qa)&&!i[4].length&&1==i[9]?g[af(i[0])].apply(g,i[3]):1==f.length&&tf(f)?g[h]():g.thru(f)}return function(){var a=arguments,d=a[0];if(g&&1==a.length&&Pl(d)&&d.length>=ea)return g.plant(d).value();for(var e=0,f=c?b[e].apply(this,a):d;++e<c;)f=b[e].call(this,f);return f}})}function Le(a,b,c,d,e,f,g,h,i,j){function k(){for(var r=arguments.length,s=Hj(r),t=r;t--;)s[t]=arguments[t];if(o)var u=bf(k),v=M(s,u);if(d&&(s=ve(s,d,e,o)),f&&(s=we(s,f,g,o)),r-=v,o&&r<j){var w=V(s,u);return Te(a,b,Le,k.placeholder,c,s,w,h,i,j-r)}var x=m?c:this,y=n?x[a]:a;return r=s.length,h?s=Cf(s,h):p&&r>1&&s.reverse(),l&&i<r&&(s.length=i),this&&this!==Tc&&this instanceof k&&(y=q||He(y)),y.apply(x,s)}var l=b&pa,m=b&ia,n=b&ja,o=b&(la|ma),p=b&ra,q=n?ca:He(a);return k}function Me(a,b){return function(c,d){return od(c,a,b(d),{})}}function Ne(a,b){return function(c,d){var e;if(c===ca&&d===ca)return b;if(c!==ca&&(e=c),d!==ca){if(e===ca)return d;"string"==typeof c||"string"==typeof d?(c=_d(c),d=_d(d)):(c=$d(c),d=$d(d)),e=a(c,d)}return e}}function Oe(a){return Td(function(b){return b=1==b.length&&Pl(b[0])?n(b[0],H(cf())):n(Sc(b,1),H(cf())),Td(function(c){var d=this;return a(b,function(a){return f(a,d,c)})})})}function Pe(a,b){b=b===ca?" ":_d(b);var c=b.length;if(c<2)return c?Sd(b,a):b;var d=Sd(b,mk(a/Y(b)));return P(b)?ke(Z(d),0,a).join(""):d.slice(0,a)}function Qe(a,b,c,d){function e(){for(var b=-1,i=arguments.length,j=-1,k=d.length,l=Hj(k+i),m=this&&this!==Tc&&this instanceof e?h:a;++j<k;)l[j]=d[j];for(;i--;)l[j++]=arguments[++b];return f(m,g?c:this,l)}var g=b&ia,h=He(a);return e}function Re(a){return function(b,c,d){return d&&"number"!=typeof d&&qf(b,c,d)&&(c=d=ca),b=$h(b),c===ca?(c=b,b=0):c=$h(c),d=d===ca?b<c?1:-1:$h(d),Rd(b,c,d,a)}}function Se(a){return function(b,c){return"string"==typeof b&&"string"==typeof c||(b=bi(b),c=bi(c)),a(b,c)}}function Te(a,b,c,d,e,f,g,h,i,j){var k=b&la,l=k?g:ca,m=k?ca:g,n=k?f:ca,o=k?ca:f;b|=k?na:oa,(b&=~(k?oa:na))&ka||(b&=~(ia|ja));var p=[a,b,e,n,l,o,m,h,i,j],q=c.apply(ca,p);return tf(a)&&al(q,p),q.placeholder=d,cl(q,a,b)}function Ue(a){var b=Lj[a];return function(a,c){if(a=bi(a),c=uk(_h(c),292)){var d=(ei(a)+"e").split("e");return d=(ei(b(d[0]+"e"+(+d[1]+c)))+"e").split("e"),+(d[0]+"e"+(+d[1]-c))}return b(a)}}function Ve(a){return function(b){var c=$k(b);return c==Qa?T(b):c==Va?X(b):G(b,a(b))}}function We(a,b,c,d,e,f,g,h){var i=b&ja;if(!i&&"function"!=typeof a)throw new Pj(fa);var j=d?d.length:0;if(j||(b&=~(na|oa),d=e=ca),g=g===ca?g:tk(_h(g),0),h=h===ca?h:_h(h),j-=e?e.length:0,b&oa){var k=d,l=e;d=e=ca}var m=i?ca:Xk(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&yf(n,m),a=n[0],b=n[1],c=n[2],d=n[3],e=n[4],h=n[9]=null==n[9]?i?0:a.length:tk(n[9]-j,0),!h&&b&(la|ma)&&(b&=~(la|ma)),b&&b!=ia)o=b==la||b==ma?Ie(a,b,h):b!=na&&b!=(ia|na)||e.length?Le.apply(ca,n):Qe(a,b,c,d);else var o=Ee(a,b,c);return cl((m?Uk:al)(o,n),a,b)}function Xe(a,b,c,d,e,f){var g=e&ta,h=a.length,i=b.length;if(h!=i&&!(g&&i>h))return!1;var j=f.get(a);if(j&&f.get(b))return j==b;var k=-1,l=!0,m=e&sa?new ic:ca;for(f.set(a,b),f.set(b,a);++k<h;){var n=a[k],o=b[k];if(d)var p=g?d(o,n,k,b,a,f):d(n,o,k,a,b,f);if(p!==ca){if(p)continue;l=!1;break}if(m){if(!r(b,function(a,b){if(!m.has(b)&&(n===a||c(n,a,d,e,f)))return m.add(b)})){l=!1;break}}else if(n!==o&&!c(n,o,d,e,f)){l=!1;break}}return f.delete(a),f.delete(b),l}function Ye(a,b,c,d,e,f,g){switch(c){case _a:if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)return!1;a=a.buffer,b=b.buffer;case $a:return!(a.byteLength!=b.byteLength||!d(new ck(a),new ck(b)));case La:case Ma:case Ra:return vh(+a,+b);case Na:return a.name==b.name&&a.message==b.message;case Ua:case Wa:return a==b+"";case Qa:var h=T;case Va:var i=f&ta;if(h||(h=W),a.size!=b.size&&!i)return!1;var j=g.get(a);if(j)return j==b;f|=sa,g.set(a,b);var k=Xe(h(a),h(b),d,e,f,g);return g.delete(a),k;case Xa:if(Ok)return Ok.call(a)==Ok.call(b)}return!1}function Ze(a,b,c,d,e,f){var g=e&ta,h=ri(a),i=h.length;if(i!=ri(b).length&&!g)return!1;for(var j=i;j--;){var k=h[j];if(!(g?k in b:Wj.call(b,k)))return!1}var l=f.get(a);if(l&&f.get(b))return l==b;var m=!0;f.set(a,b),f.set(b,a);for(var n=g;++j<i;){k=h[j];var o=a[k],p=b[k];if(d)var q=g?d(p,o,k,b,a,f):d(o,p,k,a,b,f);if(!(q===ca?o===p||c(o,p,d,e,f):q)){m=!1;break}n||(n="constructor"==k)}if(m&&!n){var r=a.constructor,s=b.constructor;r!=s&&"constructor"in a&&"constructor"in b&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s)&&(m=!1)}return f.delete(a),f.delete(b),m}function $e(a){return dd(a,ri,Yk)}function _e(a){return dd(a,si,Zk)}function af(a){for(var b=a.name+"",c=Hk[b],d=Wj.call(Hk,b)?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function bf(a){return(Wj.call(c,"placeholder")?c:a).placeholder}function cf(){var a=c.iteratee||ij;return a=a===ij?Ad:a,arguments.length?a(arguments[0],arguments[1]):a}function df(a,b){var c=a.__data__;return sf(b)?c["string"==typeof b?"string":"hash"]:c.map}function ef(a){for(var b=ri(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,wf(e)]}return b}function ff(a,b){var c=O(a,b);return wd(c)?c:ca}function gf(a,b,c){for(var d=-1,e=c.length;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=uk(b,a+g);break;case"takeRight":a=tk(a,b-g)}}return{start:a,end:b}}function hf(a){var b=a.match(Db);return b?b[1].split(Eb):[]}function jf(a,b,c){b=rf(b,a)?[b]:je(b);for(var d,e=-1,f=b.length;++e<f;){var g=Df(b[e]);if(!(d=null!=a&&c(a,g)))break;a=a[g]}if(d)return d;var f=a?a.length:0;return!!f&&Ih(f)&&pf(g,f)&&(Pl(a)||wh(a))}function kf(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&Wj.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function lf(a){return"function"!=typeof a.constructor||vf(a)?{}:Fc(dk(a))}function mf(a,b,c,d){var e=a.constructor;switch(b){case $a:return me(a);case La:case Ma:return new e(+a);case _a:return ne(a,d);case ab:case bb:case cb:case db:case eb:case fb:case gb:case hb:case ib:return se(a,d);case Qa:return oe(a,d,c);case Ra:case Wa:return new e(a);case Ua:return pe(a);case Va:return qe(a,d,c);case Xa:return re(a)}}function nf(a,b){var c=b.length,d=c-1;return b[d]=(c>1?"& ":"")+b[d],b=b.join(c>2?", ":" "),a.replace(Cb,"{\n/* [wrapped with "+b+"] */\n")}function of(a){return Pl(a)||wh(a)||!!(ik&&a&&a[ik])}function pf(a,b){return!!(b=null==b?Ca:b)&&("number"==typeof a||Ob.test(a))&&a>-1&&a%1==0&&a<b}function qf(a,b,c){if(!Jh(c))return!1;var d=typeof b;return!!("number"==d?xh(c)&&pf(b,c.length):"string"==d&&b in c)&&vh(c[b],a)}function rf(a,b){if(Pl(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!Vh(a))||(ub.test(a)||!tb.test(a)||null!=b&&a in Mj(b))}function sf(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function tf(a){var b=af(a),d=c[b];if("function"!=typeof d||!(b in B.prototype))return!1;if(a===d)return!0;var e=Xk(d);return!!e&&a===e[0]}function uf(a){return!!Uj&&Uj in a}function vf(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||Sj)}function wf(a){return a===a&&!Jh(a)}function xf(a,b){return function(c){return null!=c&&(c[a]===b&&(b!==ca||a in Mj(c)))}}function yf(a,b){var c=a[1],d=b[1],e=c|d,f=e<(ia|ja|pa),g=d==pa&&c==la||d==pa&&c==qa&&a[7].length<=b[8]||d==(pa|qa)&&b[7].length<=b[8]&&c==la;if(!f&&!g)return a;d&ia&&(a[2]=b[2],e|=c&ia?0:ka);var h=b[3];if(h){var i=a[3];a[3]=i?ve(i,h,b[4]):h,a[4]=i?V(a[3],ha):b[4]}return h=b[5],h&&(i=a[5],a[5]=i?we(i,h,b[6]):h,a[6]=i?V(a[5],ha):b[6]),h=b[7],h&&(a[7]=h),d&pa&&(a[8]=null==a[8]?b[8]:uk(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function zf(a,b,c,d,e,f){return Jh(a)&&Jh(b)&&(f.set(b,a),Hd(a,b,ca,zf,f),f.delete(b)),a}function Af(a){var b=[];if(null!=a)for(var c in Mj(a))b.push(c);return b}function Bf(a,b){return 1==b.length?a:Yc(a,Vd(b,0,-1))}function Cf(a,b){for(var c=a.length,d=uk(b.length,c),e=xe(a);d--;){var f=b[d];a[d]=pf(f,c)?e[f]:ca}return a}function Df(a){if("string"==typeof a||Vh(a))return a;var b=a+"";return"0"==b&&1/a==-Ba?"-0":b}function Ef(a){if(null!=a){try{return Vj.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function Ff(a,b){return h(Ia,function(c){var d="_."+c[0];b&c[1]&&!l(a,d)&&a.push(d)}),a.sort()}function Gf(a){if(a instanceof B)return a.clone();var b=new s(a.__wrapped__,a.__chain__);return b.__actions__=xe(a.__actions__),b.__index__=a.__index__,b.__values__=a.__values__,b}function Hf(a,b,c){b=(c?qf(a,b,c):b===ca)?1:tk(_h(b),0);var d=a?a.length:0;if(!d||b<1)return[];for(var e=0,f=0,g=Hj(mk(d/b));e<d;)g[f++]=Vd(a,e,e+=b);return g}function If(a){for(var b=-1,c=a?a.length:0,d=0,e=[];++b<c;){var f=a[b];f&&(e[d++]=f)}return e}function Jf(){for(var a=arguments.length,b=Hj(a?a-1:0),c=arguments[0],d=a;d--;)b[d-1]=arguments[d];return a?o(Pl(c)?xe(c):[c],Sc(b,1)):[]}function Kf(a,b,c){var d=a?a.length:0;return d?(b=c||b===ca?1:_h(b),Vd(a,b<0?0:b,d)):[]}function Lf(a,b,c){var d=a?a.length:0;return d?(b=c||b===ca?1:_h(b),b=d-b,Vd(a,0,b<0?0:b)):[]}function Mf(a,b){return a&&a.length?de(a,cf(b,3),!0,!0):[]}function Nf(a,b){return a&&a.length?de(a,cf(b,3),!0):[]}function Of(a,b,c,d){var e=a?a.length:0;return e?(c&&"number"!=typeof c&&qf(a,b,c)&&(c=0,d=e),Oc(a,b,c,d)):[]}function Pf(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=null==c?0:_h(c);return e<0&&(e=tk(d+e,0)),v(a,cf(b,3),e)}function Qf(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d-1;return c!==ca&&(e=_h(c),e=c<0?tk(d+e,0):uk(e,d-1)),v(a,cf(b,3),e,!0)}function Rf(a){return(a?a.length:0)?Sc(a,1):[]}function Sf(a){return(a?a.length:0)?Sc(a,Ba):[]}function Tf(a,b){return(a?a.length:0)?(b=b===ca?1:_h(b),Sc(a,b)):[]}function Uf(a){for(var b=-1,c=a?a.length:0,d={};++b<c;){var e=a[b];d[e[0]]=e[1]}return d}function Vf(a){return a&&a.length?a[0]:ca}function Wf(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=null==c?0:_h(c);return e<0&&(e=tk(d+e,0)),w(a,b,e)}function Xf(a){return(a?a.length:0)?Vd(a,0,-1):[]}function Yf(a,b){return a?rk.call(a,b):""}function Zf(a){var b=a?a.length:0;return b?a[b-1]:ca}function $f(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if(c!==ca&&(e=_h(c),e=(e<0?tk(d+e,0):uk(e,d-1))+1),b!==b)return v(a,y,e-1,!0);for(;e--;)if(a[e]===b)return e;return-1}function _f(a,b){return a&&a.length?Jd(a,_h(b)):ca}function ag(a,b){return a&&a.length&&b&&b.length?Od(a,b):a}function bg(a,b,c){return a&&a.length&&b&&b.length?Od(a,b,cf(c,2)):a}function cg(a,b,c){return a&&a.length&&b&&b.length?Od(a,b,ca,c):a}function dg(a,b){var c=[];if(!a||!a.length)return c;var d=-1,e=[],f=a.length;for(b=cf(b,3);++d<f;){var g=a[d];b(g,d,a)&&(c.push(g),e.push(d))}return Pd(a,e),c}function eg(a){return a?xk.call(a):a}function fg(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&qf(a,b,c)?(b=0,c=d):(b=null==b?0:_h(b),c=c===ca?d:_h(c)),Vd(a,b,c)):[]}function gg(a,b){return Xd(a,b)}function hg(a,b,c){return Yd(a,b,cf(c,2))}function ig(a,b){var c=a?a.length:0;if(c){var d=Xd(a,b);if(d<c&&vh(a[d],b))return d}return-1}function jg(a,b){return Xd(a,b,!0)}function kg(a,b,c){return Yd(a,b,cf(c,2),!0)}function lg(a,b){if(a?a.length:0){var c=Xd(a,b,!0)-1;if(vh(a[c],b))return c}return-1}function mg(a){return a&&a.length?Zd(a):[]}function ng(a,b){return a&&a.length?Zd(a,cf(b,2)):[]}function og(a){var b=a?a.length:0;return b?Vd(a,1,b):[]}function pg(a,b,c){return a&&a.length?(b=c||b===ca?1:_h(b),Vd(a,0,b<0?0:b)):[]}function qg(a,b,c){var d=a?a.length:0;return d?(b=c||b===ca?1:_h(b),b=d-b,Vd(a,b<0?0:b,d)):[]}function rg(a,b){return a&&a.length?de(a,cf(b,3),!1,!0):[]}function sg(a,b){return a&&a.length?de(a,cf(b,3)):[]}function tg(a){return a&&a.length?ae(a):[]}function ug(a,b){return a&&a.length?ae(a,cf(b,2)):[]}function vg(a,b){return a&&a.length?ae(a,ca,b):[]}function wg(a){if(!a||!a.length)return[];var b=0;return a=k(a,function(a){if(yh(a))return b=tk(a.length,b),!0}),F(b,function(b){return n(a,A(b))})}function xg(a,b){if(!a||!a.length)return[];var c=wg(a);return null==b?c:n(c,function(a){return f(b,ca,a)})}function yg(a,b){return ge(a||[],b||[],uc)}function zg(a,b){return ge(a||[],b||[],Ud)}function Ag(a){var b=c(a);return b.__chain__=!0,b}function Bg(a,b){return b(a),a}function Cg(a,b){return b(a)}function Dg(){return Ag(this)}function Eg(){return new s(this.value(),this.__chain__)}function Fg(){this.__values__===ca&&(this.__values__=Zh(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?ca:this.__values__[this.__index__++]}}function Gg(){return this}function Hg(a){for(var b,c=this;c instanceof d;){var e=Gf(c);e.__index__=0,e.__values__=ca,b?f.__wrapped__=e:b=e;var f=e;c=c.__wrapped__}return f.__wrapped__=a,b}function Ig(){var a=this.__wrapped__;if(a instanceof B){var b=a;return this.__actions__.length&&(b=new B(this)),b=b.reverse(),b.__actions__.push({func:Cg,args:[eg],thisArg:ca}),new s(b,this.__chain__)}return this.thru(eg)}function Jg(){return ee(this.__wrapped__,this.__actions__)}function Kg(a,b,c){var d=Pl(a)?j:Mc;return c&&qf(a,b,c)&&(b=ca),d(a,cf(b,3))}function Lg(a,b){return(Pl(a)?k:Rc)(a,cf(b,3))}function Mg(a,b){return Sc(Sg(a,b),1)}function Ng(a,b){return Sc(Sg(a,b),Ba)}function Og(a,b,c){return c=c===ca?1:_h(c),Sc(Sg(a,b),c)}function Pg(a,b){return(Pl(a)?h:Qk)(a,cf(b,3))}function Qg(a,b){return(Pl(a)?i:Rk)(a,cf(b,3))}function Rg(a,b,c,d){a=xh(a)?a:Ei(a),c=c&&!d?_h(c):0;var e=a.length;return c<0&&(c=tk(e+c,0)),Uh(a)?c<=e&&a.indexOf(b,c)>-1:!!e&&w(a,b,c)>-1}function Sg(a,b){return(Pl(a)?n:Ed)(a,cf(b,3))}function Tg(a,b,c,d){return null==a?[]:(Pl(b)||(b=null==b?[]:[b]),c=d?ca:c,Pl(c)||(c=null==c?[]:[c]),Kd(a,b,c))}function Ug(a,b,c){var d=Pl(a)?p:C,e=arguments.length<3;return d(a,cf(b,4),c,e,Qk)}function Vg(a,b,c){var d=Pl(a)?q:C,e=arguments.length<3;return d(a,cf(b,4),c,e,Rk)}function Wg(a,b){return(Pl(a)?k:Rc)(a,ih(cf(b,3)))}function Xg(a){var b=xh(a)?a:Ei(a),c=b.length;return c>0?b[Qd(0,c-1)]:ca}function Yg(a,b,c){var d=-1,e=Zh(a),f=e.length,g=f-1;for(b=(c?qf(a,b,c):b===ca)?1:zc(_h(b),0,f);++d<b;){var h=Qd(d,g),i=e[h];e[h]=e[d],e[d]=i}return e.length=b,e}function Zg(a){return Yg(a,Fa)}function $g(a){if(null==a)return 0;if(xh(a))return Uh(a)?Y(a):a.length;var b=$k(a);return b==Qa||b==Va?a.size:Bd(a).length}function _g(a,b,c){var d=Pl(a)?r:Wd;return c&&qf(a,b,c)&&(b=ca),d(a,cf(b,3))}function ah(a,b){if("function"!=typeof b)throw new Pj(fa);return a=_h(a),function(){if(--a<1)return b.apply(this,arguments)}}function bh(a,b,c){return b=c?ca:b,b=a&&null==b?a.length:b,We(a,pa,ca,ca,ca,ca,b)}function ch(a,b){var c;if("function"!=typeof b)throw new Pj(fa);return a=_h(a),function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=ca),c}}function dh(a,b,c){b=c?ca:b;var d=We(a,la,ca,ca,ca,ca,ca,b);return d.placeholder=dh.placeholder,d}function eh(a,b,c){b=c?ca:b;var d=We(a,ma,ca,ca,ca,ca,ca,b);return d.placeholder=eh.placeholder,d}function fh(a,b,c){function d(b){var c=m,d=n;return m=n=ca,s=b,p=a.apply(d,c)}function e(a){return s=a,q=bl(h,b),t?d(a):p}function f(a){var c=a-r,d=a-s,e=b-c;return u?uk(e,o-d):e}function g(a){var c=a-r,d=a-s;return r===ca||c>=b||c<0||u&&d>=o}function h(){var a=El();if(g(a))return i(a);q=bl(h,f(a))}function i(a){return q=ca,v&&m?d(a):(m=n=ca,p)}function j(){q!==ca&&Vk(q),s=0,m=r=n=q=ca}function k(){return q===ca?p:i(El())}function l(){var a=El(),c=g(a);if(m=arguments,n=this,r=a,c){if(q===ca)return e(r);if(u)return q=bl(h,b),d(r)}return q===ca&&(q=bl(h,b)),p}var m,n,o,p,q,r,s=0,t=!1,u=!1,v=!0;if("function"!=typeof a)throw new Pj(fa);return b=bi(b)||0,Jh(c)&&(t=!!c.leading,u="maxWait"in c,o=u?tk(bi(c.maxWait)||0,b):o,v="trailing"in c?!!c.trailing:v),l.cancel=j,l.flush=k,l}function gh(a){return We(a,ra)}function hh(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new Pj(fa);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new(hh.Cache||cc),c}function ih(a){if("function"!=typeof a)throw new Pj(fa);return function(){var b=arguments;switch(b.length){case 0:return!a.call(this);case 1:return!a.call(this,b[0]);case 2:return!a.call(this,b[0],b[1]);case 3:return!a.call(this,b[0],b[1],b[2])}return!a.apply(this,b)}}function jh(a){return ch(2,a)}function kh(a,b){if("function"!=typeof a)throw new Pj(fa);return b=b===ca?b:_h(b),Td(a,b)}function lh(a,b){if("function"!=typeof a)throw new Pj(fa);return b=b===ca?0:tk(_h(b),0),Td(function(c){var d=c[b],e=ke(c,0,b);return d&&o(e,d),f(a,this,e)})}function mh(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new Pj(fa);return Jh(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),fh(a,b,{leading:d,maxWait:b,trailing:e})}function nh(a){return bh(a,1)}function oh(a,b){return b=null==b?hj:b,Kl(b,a)}function ph(){if(!arguments.length)return[];var a=arguments[0];return Pl(a)?a:[a]}function qh(a){return Ac(a,!1,!0)}function rh(a,b){return Ac(a,!1,!0,b)}function sh(a){return Ac(a,!0,!0)}function th(a,b){return Ac(a,!0,!0,b)}function uh(a,b){return null==b||Ec(a,b,ri(b))}function vh(a,b){return a===b||a!==a&&b!==b}function wh(a){return yh(a)&&Wj.call(a,"callee")&&(!gk.call(a,"callee")||Zj.call(a)==Ja)}function xh(a){return null!=a&&Ih(a.length)&&!Gh(a)}function yh(a){return Kh(a)&&xh(a)}function zh(a){return!0===a||!1===a||Kh(a)&&Zj.call(a)==La}function Ah(a){return!!a&&1===a.nodeType&&Kh(a)&&!Sh(a)}function Bh(a){if(xh(a)&&(Pl(a)||"string"==typeof a||"function"==typeof a.splice||Rl(a)||wh(a)))return!a.length;var b=$k(a);if(b==Qa||b==Va)return!a.size;if(Gk||vf(a))return!sk(a).length;for(var c in a)if(Wj.call(a,c))return!1;return!0}function Ch(a,b){return sd(a,b)}function Dh(a,b,c){c="function"==typeof c?c:ca;var d=c?c(a,b):ca;return d===ca?sd(a,b,c):!!d}function Eh(a){return!!Kh(a)&&(Zj.call(a)==Na||"string"==typeof a.message&&"string"==typeof a.name)}function Fh(a){return"number"==typeof a&&qk(a)}function Gh(a){var b=Jh(a)?Zj.call(a):"";return b==Oa||b==Pa}function Hh(a){return"number"==typeof a&&a==_h(a)}function Ih(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Ca}function Jh(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function Kh(a){return!!a&&"object"==typeof a}function Lh(a,b){return a===b||vd(a,b,ef(b))}function Mh(a,b,c){return c="function"==typeof c?c:ca,vd(a,b,ef(b),c)}function Nh(a){return Rh(a)&&a!=+a}function Oh(a){if(_k(a))throw new Jj("This method is not supported with core-js. Try https://github.com/es-shims.");return wd(a)}function Ph(a){return null===a}function Qh(a){return null==a}function Rh(a){return"number"==typeof a||Kh(a)&&Zj.call(a)==Ra}function Sh(a){if(!Kh(a)||Zj.call(a)!=Sa||R(a))return!1;var b=dk(a);if(null===b)return!0;var c=Wj.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&Vj.call(c)==Yj}function Th(a){return Hh(a)&&a>=-Ca&&a<=Ca}function Uh(a){return"string"==typeof a||!Pl(a)&&Kh(a)&&Zj.call(a)==Wa}function Vh(a){return"symbol"==typeof a||Kh(a)&&Zj.call(a)==Xa}function Wh(a){return a===ca}function Xh(a){return Kh(a)&&$k(a)==Ya}function Yh(a){return Kh(a)&&Zj.call(a)==Za}function Zh(a){if(!a)return[];if(xh(a))return Uh(a)?Z(a):xe(a);if(ek&&a[ek])return S(a[ek]());var b=$k(a);return(b==Qa?T:b==Va?W:Ei)(a)}function $h(a){if(!a)return 0===a?a:0;if((a=bi(a))===Ba||a===-Ba){return(a<0?-1:1)*Da}return a===a?a:0}function _h(a){var b=$h(a),c=b%1;return b===b?c?b-c:b:0}function ai(a){return a?zc(_h(a),0,Fa):0}function bi(a){if("number"==typeof a)return a;if(Vh(a))return Ea;if(Jh(a)){var b="function"==typeof a.valueOf?a.valueOf():a;a=Jh(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(zb,"");var c=Lb.test(a);return c||Nb.test(a)?Qc(a.slice(2),c?2:8):Kb.test(a)?Ea:+a}function ci(a){return ye(a,si(a))}function di(a){return zc(_h(a),-Ca,Ca)}function ei(a){return null==a?"":_d(a)}function fi(a,b){var c=Fc(a);return b?xc(c,b):c}function gi(a,b){return u(a,cf(b,3),Uc)}function hi(a,b){return u(a,cf(b,3),Vc)}function ii(a,b){return null==a?a:Sk(a,cf(b,3),si)}function ji(a,b){return null==a?a:Tk(a,cf(b,3),si)}function ki(a,b){return a&&Uc(a,cf(b,3))}function li(a,b){return a&&Vc(a,cf(b,3))}function mi(a){return null==a?[]:Xc(a,ri(a))}function ni(a){return null==a?[]:Xc(a,si(a))}function oi(a,b,c){var d=null==a?ca:Yc(a,b);return d===ca?c:d}function pi(a,b){return null!=a&&jf(a,b,kd)}function qi(a,b){return null!=a&&jf(a,b,ld)}function ri(a){return xh(a)?rc(a):Bd(a)}function si(a){return xh(a)?rc(a,!0):Cd(a)}function ti(a,b){var c={};return b=cf(b,3),Uc(a,function(a,d,e){c[b(a,d,e)]=a}),c}function ui(a,b){var c={};return b=cf(b,3),Uc(a,function(a,d,e){c[d]=b(a,d,e)}),c}function vi(a,b){return wi(a,ih(cf(b)))}function wi(a,b){return null==a?{}:Md(a,_e(a),cf(b))}function xi(a,b,c){b=rf(b,a)?[b]:je(b);var d=-1,e=b.length;for(e||(a=ca,e=1);++d<e;){var f=null==a?ca:a[Df(b[d])];f===ca&&(d=e,f=c),a=Gh(f)?f.call(a):f}return a}function yi(a,b,c){return null==a?a:Ud(a,b,c)}function zi(a,b,c,d){return d="function"==typeof d?d:ca,null==a?a:Ud(a,b,c,d)}function Ai(a,b,c){var d=Pl(a)||Wl(a);if(b=cf(b,4),null==c)if(d||Jh(a)){var e=a.constructor;c=d?Pl(a)?new e:[]:Gh(e)?Fc(dk(a)):{}}else c={};return(d?h:Uc)(a,function(a,d,e){return b(c,a,d,e)}),c}function Bi(a,b){return null==a||be(a,b)}function Ci(a,b,c){return null==a?a:ce(a,b,ie(c))}function Di(a,b,c,d){return d="function"==typeof d?d:ca,null==a?a:ce(a,b,ie(c),d)}function Ei(a){return a?I(a,ri(a)):[]}function Fi(a){return null==a?[]:I(a,si(a))}function Gi(a,b,c){return c===ca&&(c=b,b=ca),c!==ca&&(c=bi(c),c=c===c?c:0),b!==ca&&(b=bi(b),b=b===b?b:0),zc(bi(a),b,c)}function Hi(a,b,c){return b=$h(b),c===ca?(c=b,b=0):c=$h(c),a=bi(a),md(a,b,c)}function Ii(a,b,c){if(c&&"boolean"!=typeof c&&qf(a,b,c)&&(b=c=ca),c===ca&&("boolean"==typeof b?(c=b,b=ca):"boolean"==typeof a&&(c=a,a=ca)),a===ca&&b===ca?(a=0,b=1):(a=$h(a),b===ca?(b=a,a=0):b=$h(b)),a>b){var d=a;a=b,b=d}if(c||a%1||b%1){var e=wk();return uk(a+e*(b-a+Pc("1e-"+((e+"").length-1))),b)}return Qd(a,b)}function Ji(a){return um(ei(a).toLowerCase())}function Ki(a){return(a=ei(a))&&a.replace(Pb,ed).replace(Cc,"")}function Li(a,b,c){a=ei(a),b=_d(b);var d=a.length;c=c===ca?d:zc(_h(c),0,d);var e=c;return(c-=b.length)>=0&&a.slice(c,e)==b}function Mi(a){return a=ei(a),a&&pb.test(a)?a.replace(nb,fd):a}function Ni(a){return a=ei(a),a&&yb.test(a)?a.replace(xb,"\\$&"):a}function Oi(a,b,c){a=ei(a),b=_h(b);var d=b?Y(a):0;if(!b||d>=b)return a;var e=(b-d)/2;return Pe(nk(e),c)+a+Pe(mk(e),c)}function Pi(a,b,c){a=ei(a),b=_h(b);var d=b?Y(a):0;return b&&d<b?a+Pe(b-d,c):a}function Qi(a,b,c){a=ei(a),b=_h(b);var d=b?Y(a):0;return b&&d<b?Pe(b-d,c)+a:a}function Ri(a,b,c){return c||null==b?b=0:b&&(b=+b),a=ei(a).replace(zb,""),vk(a,b||(Jb.test(a)?16:10))}function Si(a,b,c){return b=(c?qf(a,b,c):b===ca)?1:_h(b),Sd(ei(a),b)}function Ti(){var a=arguments,b=ei(a[0]);return a.length<3?b:b.replace(a[1],a[2])}function Ui(a,b,c){return c&&"number"!=typeof c&&qf(a,b,c)&&(b=c=ca),(c=c===ca?Fa:c>>>0)?(a=ei(a),a&&("string"==typeof b||null!=b&&!Ul(b))&&!(b=_d(b))&&P(a)?ke(Z(a),0,c):a.split(b,c)):[]}function Vi(a,b,c){return a=ei(a),c=zc(_h(c),0,a.length),b=_d(b),a.slice(c,c+b.length)==b}function Wi(a,b,d){var e=c.templateSettings;d&&qf(a,b,d)&&(b=ca),a=ei(a),b=_l({},b,e,sc);var f,g,h=_l({},b.imports,e.imports,sc),i=ri(h),j=I(h,i),k=0,l=b.interpolate||Qb,m="__p += '",n=Nj((b.escape||Qb).source+"|"+l.source+"|"+(l===sb?Hb:Qb).source+"|"+(b.evaluate||Qb).source+"|$","g"),o="//# sourceURL="+("sourceURL"in b?b.sourceURL:"lodash.templateSources["+ ++Ic+"]")+"\n";a.replace(n,function(b,c,d,e,h,i){return d||(d=e),m+=a.slice(k,i).replace(Rb,N),c&&(f=!0,m+="' +\n__e("+c+") +\n'"),h&&(g=!0,m+="';\n"+h+";\n__p += '"),d&&(m+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=i+b.length,b}),m+="';\n";var p=b.variable;p||(m="with (obj) {\n"+m+"\n}\n"),m=(g?m.replace(jb,""):m).replace(kb,"$1").replace(lb,"$1;"),m="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(f?", __e = _.escape":"")+(g?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var q=vm(function(){return Kj(i,o+"return "+m).apply(ca,j)});if(q.source=m,Eh(q))throw q;return q}function Xi(a){return ei(a).toLowerCase()}function Yi(a){return ei(a).toUpperCase()}function Zi(a,b,c){if((a=ei(a))&&(c||b===ca))return a.replace(zb,"");if(!a||!(b=_d(b)))return a;var d=Z(a),e=Z(b);return ke(d,K(d,e),L(d,e)+1).join("")}function $i(a,b,c){if((a=ei(a))&&(c||b===ca))return a.replace(Bb,"");if(!a||!(b=_d(b)))return a;var d=Z(a);return ke(d,0,L(d,Z(b))+1).join("")}function _i(a,b,c){if((a=ei(a))&&(c||b===ca))return a.replace(Ab,"");if(!a||!(b=_d(b)))return a;var d=Z(a);return ke(d,K(d,Z(b))).join("")}function aj(a,b){var c=ua,d=va;if(Jh(b)){var e="separator"in b?b.separator:e;c="length"in b?_h(b.length):c,d="omission"in b?_d(b.omission):d}a=ei(a);var f=a.length;if(P(a)){var g=Z(a);f=g.length}if(c>=f)return a;var h=c-Y(d);if(h<1)return d;var i=g?ke(g,0,h).join(""):a.slice(0,h);if(e===ca)return i+d;if(g&&(h+=i.length-h),Ul(e)){if(a.slice(h).search(e)){var j,k=i;for(e.global||(e=Nj(e.source,ei(Ib.exec(e))+"g")),e.lastIndex=0;j=e.exec(k);)var l=j.index;i=i.slice(0,l===ca?h:l)}}else if(a.indexOf(_d(e),h)!=h){var m=i.lastIndexOf(e);m>-1&&(i=i.slice(0,m))}return i+d}function bj(a){return a=ei(a),a&&ob.test(a)?a.replace(mb,gd):a}function cj(a,b,c){return a=ei(a),b=c?ca:b,b===ca?Q(a)?aa(a):t(a):a.match(b)||[]}function dj(a){var b=a?a.length:0,c=cf();return a=b?n(a,function(a){if("function"!=typeof a[1])throw new Pj(fa);return[c(a[0]),a[1]]}):[],Td(function(c){for(var d=-1;++d<b;){var e=a[d];if(f(e[0],this,c))return f(e[1],this,c)}})}function ej(a){return Dc(Ac(a,!0))}function fj(a){return function(){return a}}function gj(a,b){return null==a||a!==a?b:a}function hj(a){return a}function ij(a){return Ad("function"==typeof a?a:Ac(a,!0))}function jj(a){return Fd(Ac(a,!0))}function kj(a,b){return Gd(a,Ac(b,!0))}function lj(a,b,c){var d=ri(b),e=Xc(b,d);null!=c||Jh(b)&&(e.length||!d.length)||(c=b,b=a,a=this,e=Xc(b,ri(b)));var f=!(Jh(c)&&"chain"in c&&!c.chain),g=Gh(a);return h(e,function(c){var d=b[c];a[c]=d,g&&(a.prototype[c]=function(){var b=this.__chain__;if(f||b){var c=a(this.__wrapped__);return(c.__actions__=xe(this.__actions__)).push({func:d,args:arguments,thisArg:a}),c.__chain__=b,c}return d.apply(a,o([this.value()],arguments))})}),a}function mj(){return Tc._===this&&(Tc._=$j),this}function nj(){}function oj(a){return a=_h(a),Td(function(b){return Jd(b,a)})}function pj(a){return rf(a)?A(Df(a)):Nd(a)}function qj(a){return function(b){return null==a?ca:Yc(a,b)}}function rj(){return[]}function sj(){return!1}function tj(){return{}}function uj(){return""}function vj(){return!0}function wj(a,b){if((a=_h(a))<1||a>Ca)return[];var c=Fa,d=uk(a,Fa);b=cf(b),a-=Fa;for(var e=F(d,b);++c<a;)b(c);return e}function xj(a){return Pl(a)?n(a,Df):Vh(a)?[a]:xe(dl(a))}function yj(a){var b=++Xj;return ei(a)+b}function zj(a){return a&&a.length?Nc(a,hj,jd):ca}function Aj(a,b){return a&&a.length?Nc(a,cf(b,2),jd):ca}function Bj(a){return z(a,hj)}function Cj(a,b){return z(a,cf(b,2))}function Dj(a){return a&&a.length?Nc(a,hj,Dd):ca}function Ej(a,b){return a&&a.length?Nc(a,cf(b,2),Dd):ca}function Fj(a){return a&&a.length?E(a,hj):0}function Gj(a,b){return a&&a.length?E(a,cf(b,2)):0}b=b?hd.defaults(Tc.Object(),b,hd.pick(Tc,Hc)):Tc;var Hj=b.Array,Ij=b.Date,Jj=b.Error,Kj=b.Function,Lj=b.Math,Mj=b.Object,Nj=b.RegExp,Oj=b.String,Pj=b.TypeError,Qj=Hj.prototype,Rj=Kj.prototype,Sj=Mj.prototype,Tj=b["__core-js_shared__"],Uj=function(){var a=/[^.]+$/.exec(Tj&&Tj.keys&&Tj.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Vj=Rj.toString,Wj=Sj.hasOwnProperty,Xj=0,Yj=Vj.call(Mj),Zj=Sj.toString,$j=Tc._,_j=Nj("^"+Vj.call(Wj).replace(xb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ak=Wc?b.Buffer:ca,bk=b.Symbol,ck=b.Uint8Array,dk=U(Mj.getPrototypeOf,Mj),ek=bk?bk.iterator:ca,fk=Mj.create,gk=Sj.propertyIsEnumerable,hk=Qj.splice,ik=bk?bk.isConcatSpreadable:ca,jk=b.clearTimeout!==Tc.clearTimeout&&b.clearTimeout,kk=Ij&&Ij.now!==Tc.Date.now&&Ij.now,lk=b.setTimeout!==Tc.setTimeout&&b.setTimeout,mk=Lj.ceil,nk=Lj.floor,ok=Mj.getOwnPropertySymbols,pk=ak?ak.isBuffer:ca,qk=b.isFinite,rk=Qj.join,sk=U(Mj.keys,Mj),tk=Lj.max,uk=Lj.min,vk=b.parseInt,wk=Lj.random,xk=Qj.reverse,yk=ff(b,"DataView"),zk=ff(b,"Map"),Ak=ff(b,"Promise"),Bk=ff(b,"Set"),Ck=ff(b,"WeakMap"),Dk=ff(Mj,"create"),Ek=function(){var a=ff(Mj,"defineProperty"),b=ff.name;return b&&b.length>2?a:ca}(),Fk=Ck&&new Ck,Gk=!gk.call({valueOf:1},"valueOf"),Hk={},Ik=Ef(yk),Jk=Ef(zk),Kk=Ef(Ak),Lk=Ef(Bk),Mk=Ef(Ck),Nk=bk?bk.prototype:ca,Ok=Nk?Nk.valueOf:ca,Pk=Nk?Nk.toString:ca;c.templateSettings={escape:qb,evaluate:rb,interpolate:sb,variable:"",imports:{_:c}},c.prototype=d.prototype,c.prototype.constructor=c,s.prototype=Fc(d.prototype),s.prototype.constructor=s,B.prototype=Fc(d.prototype),B.prototype.constructor=B,Sb.prototype.clear=Tb,Sb.prototype.delete=Ub,Sb.prototype.get=Vb,Sb.prototype.has=Wb,Sb.prototype.set=Xb,Yb.prototype.clear=Zb,Yb.prototype.delete=$b,Yb.prototype.get=_b,Yb.prototype.has=ac,Yb.prototype.set=bc,cc.prototype.clear=dc,cc.prototype.delete=ec,cc.prototype.get=fc,cc.prototype.has=gc,cc.prototype.set=hc,ic.prototype.add=ic.prototype.push=jc,ic.prototype.has=kc,lc.prototype.clear=mc,lc.prototype.delete=nc,lc.prototype.get=oc,lc.prototype.has=pc,lc.prototype.set=qc;var Qk=Ce(Uc),Rk=Ce(Vc,!0),Sk=De(),Tk=De(!0),Uk=Fk?function(a,b){return Fk.set(a,b),a}:hj,Vk=jk||function(a){return Tc.clearTimeout(a)},Wk=Bk&&1/W(new Bk([,-0]))[1]==Ba?function(a){return new Bk(a)}:nj,Xk=Fk?function(a){return Fk.get(a)}:nj,Yk=ok?U(ok,Mj):rj,Zk=ok?function(a){for(var b=[];a;)o(b,Yk(a)),a=dk(a);return b}:rj,$k=id;(yk&&$k(new yk(new ArrayBuffer(1)))!=_a||zk&&$k(new zk)!=Qa||Ak&&$k(Ak.resolve())!=Ta||Bk&&$k(new Bk)!=Va||Ck&&$k(new Ck)!=Ya)&&($k=function(a){var b=Zj.call(a),c=b==Sa?a.constructor:ca,d=c?Ef(c):ca;if(d)switch(d){case Ik:return _a;case Jk:return Qa;case Kk:return Ta;case Lk:return Va;case Mk:return Ya}return b});var _k=Tj?Gh:sj,al=function(){var a=0,b=0;return function(c,d){var e=El(),f=xa-(e-b);if(b=e,f>0){if(++a>=wa)return c}else a=0;return Uk(c,d)}}(),bl=lk||function(a,b){return Tc.setTimeout(a,b)},cl=Ek?function(a,b,c){var d=b+"";return Ek(a,"toString",{configurable:!0,enumerable:!1,value:fj(nf(d,Ff(hf(d),c)))})}:hj,dl=hh(function(a){a=ei(a);var b=[];return vb.test(a)&&b.push(""),a.replace(wb,function(a,c,d,e){b.push(d?e.replace(Gb,"$1"):c||a)}),b}),el=Td(function(a,b){return yh(a)?Lc(a,Sc(b,1,yh,!0)):[]}),fl=Td(function(a,b){var c=Zf(b);return yh(c)&&(c=ca),yh(a)?Lc(a,Sc(b,1,yh,!0),cf(c,2)):[]}),gl=Td(function(a,b){var c=Zf(b);return yh(c)&&(c=ca),yh(a)?Lc(a,Sc(b,1,yh,!0),ca,c):[]}),hl=Td(function(a){var b=n(a,he);return b.length&&b[0]===a[0]?nd(b):[]}),il=Td(function(a){var b=Zf(a),c=n(a,he);return b===Zf(c)?b=ca:c.pop(),c.length&&c[0]===a[0]?nd(c,cf(b,2)):[]}),jl=Td(function(a){var b=Zf(a),c=n(a,he);return b===Zf(c)?b=ca:c.pop(),c.length&&c[0]===a[0]?nd(c,ca,b):[]}),kl=Td(ag),ll=Td(function(a,b){b=Sc(b,1);var c=a?a.length:0,d=yc(a,b);return Pd(a,n(b,function(a){return pf(a,c)?+a:a}).sort(te)),d}),ml=Td(function(a){return ae(Sc(a,1,yh,!0))}),nl=Td(function(a){var b=Zf(a);return yh(b)&&(b=ca),ae(Sc(a,1,yh,!0),cf(b,2))}),ol=Td(function(a){var b=Zf(a);return yh(b)&&(b=ca),ae(Sc(a,1,yh,!0),ca,b)}),pl=Td(function(a,b){return yh(a)?Lc(a,b):[]}),ql=Td(function(a){return fe(k(a,yh))}),rl=Td(function(a){var b=Zf(a);return yh(b)&&(b=ca),fe(k(a,yh),cf(b,2))}),sl=Td(function(a){var b=Zf(a);return yh(b)&&(b=ca),fe(k(a,yh),ca,b)}),tl=Td(wg),ul=Td(function(a){var b=a.length,c=b>1?a[b-1]:ca;return c="function"==typeof c?(a.pop(),c):ca,xg(a,c)}),vl=Td(function(a){a=Sc(a,1);var b=a.length,c=b?a[0]:0,d=this.__wrapped__,e=function(b){return yc(b,a)};return!(b>1||this.__actions__.length)&&d instanceof B&&pf(c)?(d=d.slice(c,+c+(b?1:0)),d.__actions__.push({func:Cg,args:[e],thisArg:ca}),new s(d,this.__chain__).thru(function(a){return b&&!a.length&&a.push(ca),a})):this.thru(e)}),wl=Ae(function(a,b,c){Wj.call(a,c)?++a[c]:a[c]=1}),xl=Je(Pf),yl=Je(Qf),zl=Ae(function(a,b,c){Wj.call(a,c)?a[c].push(b):a[c]=[b]}),Al=Td(function(a,b,c){var d=-1,e="function"==typeof b,g=rf(b),h=xh(a)?Hj(a.length):[];return Qk(a,function(a){var i=e?b:g&&null!=a?a[b]:ca;h[++d]=i?f(i,a,c):pd(a,b,c)}),h}),Bl=Ae(function(a,b,c){a[c]=b}),Cl=Ae(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),Dl=Td(function(a,b){if(null==a)return[];var c=b.length;return c>1&&qf(a,b[0],b[1])?b=[]:c>2&&qf(b[0],b[1],b[2])&&(b=[b[0]]),Kd(a,Sc(b,1),[])}),El=kk||function(){return Tc.Date.now()},Fl=Td(function(a,b,c){var d=ia;if(c.length){var e=V(c,bf(Fl));d|=na}return We(a,d,b,c,e)}),Gl=Td(function(a,b,c){var d=ia|ja;if(c.length){var e=V(c,bf(Gl));d|=na}return We(b,d,a,c,e)}),Hl=Td(function(a,b){return Gc(a,1,b)}),Il=Td(function(a,b,c){return Gc(a,bi(b)||0,c)});hh.Cache=cc;var Jl=Td(function(a,b){b=1==b.length&&Pl(b[0])?n(b[0],H(cf())):n(Sc(b,1),H(cf()));var c=b.length;return Td(function(d){for(var e=-1,g=uk(d.length,c);++e<g;)d[e]=b[e].call(this,d[e]);return f(a,this,d)})}),Kl=Td(function(a,b){var c=V(b,bf(Kl));return We(a,na,ca,b,c)}),Ll=Td(function(a,b){var c=V(b,bf(Ll));return We(a,oa,ca,b,c)}),Ml=Td(function(a,b){return We(a,qa,ca,ca,ca,Sc(b,1))}),Nl=Se(jd),Ol=Se(function(a,b){return a>=b}),Pl=Hj.isArray,Ql=Zc?H(Zc):qd,Rl=pk||sj,Sl=$c?H($c):rd,Tl=_c?H(_c):ud,Ul=ad?H(ad):xd,Vl=bd?H(bd):yd,Wl=cd?H(cd):zd,Xl=Se(Dd),Yl=Se(function(a,b){return a<=b}),Zl=Be(function(a,b){if(Gk||vf(b)||xh(b))return void ye(b,ri(b),a);for(var c in b)Wj.call(b,c)&&uc(a,c,b[c])}),$l=Be(function(a,b){ye(b,si(b),a)}),_l=Be(function(a,b,c,d){ye(b,si(b),a,d)}),am=Be(function(a,b,c,d){ye(b,ri(b),a,d)}),bm=Td(function(a,b){return yc(a,Sc(b,1))}),cm=Td(function(a){return a.push(ca,sc),f(_l,ca,a)}),dm=Td(function(a){return a.push(ca,zf),f(im,ca,a)}),em=Me(function(a,b,c){a[b]=c},fj(hj)),fm=Me(function(a,b,c){Wj.call(a,b)?a[b].push(c):a[b]=[c]},cf),gm=Td(pd),hm=Be(function(a,b,c){Hd(a,b,c)}),im=Be(function(a,b,c,d){Hd(a,b,c,d)}),jm=Td(function(a,b){return null==a?{}:(b=n(Sc(b,1),Df),Ld(a,Lc(_e(a),b)))}),km=Td(function(a,b){return null==a?{}:Ld(a,n(Sc(b,1),Df))}),lm=Ve(ri),mm=Ve(si),nm=Ge(function(a,b,c){return b=b.toLowerCase(),a+(c?Ji(b):b)}),om=Ge(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),pm=Ge(function(a,b,c){return a+(c?" ":"")+b.toLowerCase()}),qm=Fe("toLowerCase"),rm=Ge(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),sm=Ge(function(a,b,c){return a+(c?" ":"")+um(b)}),tm=Ge(function(a,b,c){return a+(c?" ":"")+b.toUpperCase()}),um=Fe("toUpperCase"),vm=Td(function(a,b){try{return f(a,ca,b)}catch(a){return Eh(a)?a:new Jj(a)}}),wm=Td(function(a,b){return h(Sc(b,1),function(b){b=Df(b),a[b]=Fl(a[b],a)}),a}),xm=Ke(),ym=Ke(!0),zm=Td(function(a,b){return function(c){return pd(c,a,b)}}),Am=Td(function(a,b){return function(c){return pd(a,c,b)}}),Bm=Oe(n),Cm=Oe(j),Dm=Oe(r),Em=Re(),Fm=Re(!0),Gm=Ne(function(a,b){return a+b},0),Hm=Ue("ceil"),Im=Ne(function(a,b){return a/b},1),Jm=Ue("floor"),Km=Ne(function(a,b){return a*b},1),Lm=Ue("round"),Mm=Ne(function(a,b){return a-b},0);return c.after=ah,c.ary=bh,c.assign=Zl,c.assignIn=$l,c.assignInWith=_l,c.assignWith=am,c.at=bm,c.before=ch,c.bind=Fl,c.bindAll=wm,c.bindKey=Gl,c.castArray=ph,c.chain=Ag,c.chunk=Hf,c.compact=If,c.concat=Jf,c.cond=dj,c.conforms=ej,c.constant=fj,c.countBy=wl,c.create=fi,c.curry=dh,c.curryRight=eh,c.debounce=fh,c.defaults=cm,c.defaultsDeep=dm,c.defer=Hl,c.delay=Il,c.difference=el,c.differenceBy=fl,c.differenceWith=gl,c.drop=Kf,c.dropRight=Lf,c.dropRightWhile=Mf,c.dropWhile=Nf,c.fill=Of,c.filter=Lg,c.flatMap=Mg,c.flatMapDeep=Ng,c.flatMapDepth=Og,c.flatten=Rf,c.flattenDeep=Sf,c.flattenDepth=Tf,c.flip=gh,c.flow=xm,c.flowRight=ym,c.fromPairs=Uf,c.functions=mi,c.functionsIn=ni,c.groupBy=zl,c.initial=Xf,c.intersection=hl,c.intersectionBy=il,c.intersectionWith=jl,c.invert=em,c.invertBy=fm,c.invokeMap=Al,c.iteratee=ij,c.keyBy=Bl,c.keys=ri,c.keysIn=si,c.map=Sg,c.mapKeys=ti,c.mapValues=ui,c.matches=jj,c.matchesProperty=kj,c.memoize=hh,c.merge=hm,c.mergeWith=im,c.method=zm,c.methodOf=Am,c.mixin=lj,c.negate=ih,c.nthArg=oj,c.omit=jm,c.omitBy=vi,c.once=jh,c.orderBy=Tg,c.over=Bm,c.overArgs=Jl,c.overEvery=Cm,c.overSome=Dm,c.partial=Kl,c.partialRight=Ll,c.partition=Cl,c.pick=km,c.pickBy=wi,c.property=pj,c.propertyOf=qj,c.pull=kl,c.pullAll=ag,c.pullAllBy=bg,c.pullAllWith=cg,c.pullAt=ll,c.range=Em,c.rangeRight=Fm,c.rearg=Ml,c.reject=Wg,c.remove=dg,c.rest=kh,c.reverse=eg,c.sampleSize=Yg,c.set=yi,c.setWith=zi,c.shuffle=Zg,c.slice=fg,c.sortBy=Dl,c.sortedUniq=mg,c.sortedUniqBy=ng,c.split=Ui,c.spread=lh,c.tail=og,c.take=pg,c.takeRight=qg,c.takeRightWhile=rg,c.takeWhile=sg,c.tap=Bg,c.throttle=mh,c.thru=Cg,c.toArray=Zh,c.toPairs=lm,c.toPairsIn=mm,c.toPath=xj,c.toPlainObject=ci,c.transform=Ai,c.unary=nh,c.union=ml,c.unionBy=nl,c.unionWith=ol,c.uniq=tg,c.uniqBy=ug,c.uniqWith=vg,c.unset=Bi,c.unzip=wg,c.unzipWith=xg,c.update=Ci,c.updateWith=Di,c.values=Ei,c.valuesIn=Fi,c.without=pl,c.words=cj,c.wrap=oh,c.xor=ql,c.xorBy=rl,c.xorWith=sl,c.zip=tl,c.zipObject=yg,c.zipObjectDeep=zg,c.zipWith=ul,c.entries=lm,c.entriesIn=mm,c.extend=$l,c.extendWith=_l,lj(c,c),c.add=Gm,c.attempt=vm,c.camelCase=nm,c.capitalize=Ji,c.ceil=Hm,c.clamp=Gi,c.clone=qh,c.cloneDeep=sh,c.cloneDeepWith=th,c.cloneWith=rh,c.conformsTo=uh,c.deburr=Ki,c.defaultTo=gj,c.divide=Im,c.endsWith=Li,c.eq=vh,c.escape=Mi,c.escapeRegExp=Ni,c.every=Kg,c.find=xl,c.findIndex=Pf,c.findKey=gi,c.findLast=yl,c.findLastIndex=Qf,c.findLastKey=hi,c.floor=Jm,c.forEach=Pg,c.forEachRight=Qg,c.forIn=ii,c.forInRight=ji,c.forOwn=ki,c.forOwnRight=li,c.get=oi,c.gt=Nl,c.gte=Ol,c.has=pi,c.hasIn=qi,c.head=Vf,c.identity=hj,c.includes=Rg,c.indexOf=Wf,c.inRange=Hi,c.invoke=gm,c.isArguments=wh,c.isArray=Pl,c.isArrayBuffer=Ql,c.isArrayLike=xh,c.isArrayLikeObject=yh,c.isBoolean=zh,c.isBuffer=Rl,c.isDate=Sl,c.isElement=Ah,c.isEmpty=Bh,c.isEqual=Ch,c.isEqualWith=Dh,c.isError=Eh,c.isFinite=Fh,c.isFunction=Gh,c.isInteger=Hh,c.isLength=Ih,c.isMap=Tl,c.isMatch=Lh,c.isMatchWith=Mh,c.isNaN=Nh,c.isNative=Oh,c.isNil=Qh,c.isNull=Ph,c.isNumber=Rh,c.isObject=Jh,c.isObjectLike=Kh,c.isPlainObject=Sh,c.isRegExp=Ul,c.isSafeInteger=Th,c.isSet=Vl,c.isString=Uh,c.isSymbol=Vh,c.isTypedArray=Wl,c.isUndefined=Wh,c.isWeakMap=Xh,c.isWeakSet=Yh,c.join=Yf,c.kebabCase=om,c.last=Zf,c.lastIndexOf=$f,c.lowerCase=pm,c.lowerFirst=qm,c.lt=Xl,c.lte=Yl,c.max=zj,c.maxBy=Aj,c.mean=Bj,c.meanBy=Cj,c.min=Dj,c.minBy=Ej,c.stubArray=rj,c.stubFalse=sj,c.stubObject=tj,c.stubString=uj,c.stubTrue=vj,c.multiply=Km,c.nth=_f,c.noConflict=mj,c.noop=nj,c.now=El,c.pad=Oi,c.padEnd=Pi,c.padStart=Qi,c.parseInt=Ri,c.random=Ii,c.reduce=Ug,c.reduceRight=Vg,c.repeat=Si,c.replace=Ti,c.result=xi,c.round=Lm,c.runInContext=ba,c.sample=Xg,c.size=$g,c.snakeCase=rm,c.some=_g,c.sortedIndex=gg,c.sortedIndexBy=hg,c.sortedIndexOf=ig,c.sortedLastIndex=jg,c.sortedLastIndexBy=kg,c.sortedLastIndexOf=lg,c.startCase=sm,c.startsWith=Vi,c.subtract=Mm,c.sum=Fj,c.sumBy=Gj,c.template=Wi,c.times=wj,c.toFinite=$h,c.toInteger=_h,c.toLength=ai,c.toLower=Xi,c.toNumber=bi,c.toSafeInteger=di,c.toString=ei,c.toUpper=Yi,c.trim=Zi,c.trimEnd=$i,c.trimStart=_i,c.truncate=aj,c.unescape=bj,c.uniqueId=yj,c.upperCase=tm,c.upperFirst=um,c.each=Pg,c.eachRight=Qg,c.first=Vf,lj(c,function(){var a={};return Uc(c,function(b,d){Wj.call(c.prototype,d)||(a[d]=b)}),a}(),{chain:!1}),c.VERSION=da,h(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){c[a].placeholder=c}),h(["drop","take"],function(a,b){B.prototype[a]=function(c){var d=this.__filtered__;if(d&&!b)return new B(this);c=c===ca?1:tk(_h(c),0);var e=this.clone();return d?e.__takeCount__=uk(c,e.__takeCount__):e.__views__.push({size:uk(c,Fa),type:a+(e.__dir__<0?"Right":"")}),e},B.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),h(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c==ya||c==Aa;B.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:cf(a,3),type:c}),b.__filtered__=b.__filtered__||d,b}}),h(["head","last"],function(a,b){var c="take"+(b?"Right":"");B.prototype[a]=function(){return this[c](1).value()[0]}}),h(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");B.prototype[a]=function(){return this.__filtered__?new B(this):this[c](1)}}),B.prototype.compact=function(){return this.filter(hj)},B.prototype.find=function(a){return this.filter(a).head()},B.prototype.findLast=function(a){return this.reverse().find(a)},B.prototype.invokeMap=Td(function(a,b){return"function"==typeof a?new B(this):this.map(function(c){return pd(c,a,b)})}),B.prototype.reject=function(a){return this.filter(ih(cf(a)))},B.prototype.slice=function(a,b){a=_h(a);var c=this;return c.__filtered__&&(a>0||b<0)?new B(c):(a<0?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==ca&&(b=_h(b),c=b<0?c.dropRight(-b):c.take(b-a)),c)},B.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},B.prototype.toArray=function(){return this.take(Fa)},Uc(B.prototype,function(a,b){var d=/^(?:filter|find|map|reject)|While$/.test(b),e=/^(?:head|last)$/.test(b),f=c[e?"take"+("last"==b?"Right":""):b],g=e||/^find/.test(b);f&&(c.prototype[b]=function(){var b=this.__wrapped__,h=e?[1]:arguments,i=b instanceof B,j=h[0],k=i||Pl(b),l=function(a){var b=f.apply(c,o([a],h));return e&&m?b[0]:b};k&&d&&"function"==typeof j&&1!=j.length&&(i=k=!1);var m=this.__chain__,n=!!this.__actions__.length,p=g&&!m,q=i&&!n;if(!g&&k){b=q?b:new B(this);var r=a.apply(b,h);return r.__actions__.push({func:Cg,args:[l],thisArg:ca}),new s(r,m)}return p&&q?a.apply(this,h):(r=this.thru(l),p?e?r.value()[0]:r.value():r)})}),h(["pop","push","shift","sort","splice","unshift"],function(a){var b=Qj[a],d=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",e=/^(?:pop|shift)$/.test(a);c.prototype[a]=function(){var a=arguments;if(e&&!this.__chain__){var c=this.value();return b.apply(Pl(c)?c:[],a)}return this[d](function(c){return b.apply(Pl(c)?c:[],a)})}}),Uc(B.prototype,function(a,b){var d=c[b];if(d){var e=d.name+"";(Hk[e]||(Hk[e]=[])).push({name:b,func:d})}}),Hk[Le(ca,ja).name]=[{name:"wrapper",func:ca}],B.prototype.clone=$,B.prototype.reverse=_,B.prototype.value=Fb,c.prototype.at=vl,c.prototype.chain=Dg,c.prototype.commit=Eg,c.prototype.next=Fg,c.prototype.plant=Hg,c.prototype.reverse=Ig,c.prototype.toJSON=c.prototype.valueOf=c.prototype.value=Jg,c.prototype.first=c.prototype.head,ek&&(c.prototype[ek]=Gg),c}var ca,da="4.15.0",ea=200,fa="Expected a function",ga="__lodash_hash_undefined__",ha="__lodash_placeholder__",ia=1,ja=2,ka=4,la=8,ma=16,na=32,oa=64,pa=128,qa=256,ra=512,sa=1,ta=2,ua=30,va="...",wa=150,xa=16,ya=1,za=2,Aa=3,Ba=1/0,Ca=9007199254740991,Da=1.7976931348623157e308,Ea=NaN,Fa=4294967295,Ga=Fa-1,Ha=Fa>>>1,Ia=[["ary",pa],["bind",ia],["bindKey",ja],["curry",la],["curryRight",ma],["flip",ra],["partial",na],["partialRight",oa],["rearg",qa]],Ja="[object Arguments]",Ka="[object Array]",La="[object Boolean]",Ma="[object Date]",Na="[object Error]",Oa="[object Function]",Pa="[object GeneratorFunction]",Qa="[object Map]",Ra="[object Number]",Sa="[object Object]",Ta="[object Promise]",Ua="[object RegExp]",Va="[object Set]",Wa="[object String]",Xa="[object Symbol]",Ya="[object WeakMap]",Za="[object WeakSet]",$a="[object ArrayBuffer]",_a="[object DataView]",ab="[object Float32Array]",bb="[object Float64Array]",cb="[object Int8Array]",db="[object Int16Array]",eb="[object Int32Array]",fb="[object Uint8Array]",gb="[object Uint8ClampedArray]",hb="[object Uint16Array]",ib="[object Uint32Array]",jb=/\b__p \+= '';/g,kb=/\b(__p \+=) '' \+/g,lb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mb=/&(?:amp|lt|gt|quot|#39|#96);/g,nb=/[&<>"'`]/g,ob=RegExp(mb.source),pb=RegExp(nb.source),qb=/<%-([\s\S]+?)%>/g,rb=/<%([\s\S]+?)%>/g,sb=/<%=([\s\S]+?)%>/g,tb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ub=/^\w*$/,vb=/^\./,wb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xb=/[\\^$.*+?()[\]{}|]/g,yb=RegExp(xb.source),zb=/^\s+|\s+$/g,Ab=/^\s+/,Bb=/\s+$/,Cb=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Db=/\{\n\/\* \[wrapped with (.+)\] \*/,Eb=/,? & /,Fb=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gb=/\\(\\)?/g,Hb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ib=/\w*$/,Jb=/^0x/i,Kb=/^[-+]0x[0-9a-f]+$/i,Lb=/^0b[01]+$/i,Mb=/^\[object .+?Constructor\]$/,Nb=/^0o[0-7]+$/i,Ob=/^(?:0|[1-9]\d*)$/,Pb=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qb=/($^)/,Rb=/['\n\r\u2028\u2029\\]/g,Sb="\\ud800-\\udfff",Tb="\\u0300-\\u036f\\ufe20-\\ufe23",Ub="\\u20d0-\\u20f0",Vb="\\u2700-\\u27bf",Wb="a-z\\xdf-\\xf6\\xf8-\\xff",Xb="\\xac\\xb1\\xd7\\xf7",Yb="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Zb="\\u2000-\\u206f",$b=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_b="A-Z\\xc0-\\xd6\\xd8-\\xde",ac="\\ufe0e\\ufe0f",bc=Xb+Yb+Zb+$b,cc="['’]",dc="["+Sb+"]",ec="["+bc+"]",fc="["+Tb+Ub+"]",gc="\\d+",hc="["+Vb+"]",ic="["+Wb+"]",jc="[^"+Sb+bc+gc+Vb+Wb+_b+"]",kc="\\ud83c[\\udffb-\\udfff]",lc="(?:"+fc+"|"+kc+")",mc="[^"+Sb+"]",nc="(?:\\ud83c[\\udde6-\\uddff]){2}",oc="[\\ud800-\\udbff][\\udc00-\\udfff]",pc="["+_b+"]",qc="\\u200d",rc="(?:"+ic+"|"+jc+")",sc="(?:"+pc+"|"+jc+")",tc="(?:"+cc+"(?:d|ll|m|re|s|t|ve))?",uc="(?:"+cc+"(?:D|LL|M|RE|S|T|VE))?",vc=lc+"?",wc="["+ac+"]?",xc="(?:"+qc+"(?:"+[mc,nc,oc].join("|")+")"+wc+vc+")*",yc=wc+vc+xc,zc="(?:"+[hc,nc,oc].join("|")+")"+yc,Ac="(?:"+[mc+fc+"?",fc,nc,oc,dc].join("|")+")",Bc=RegExp(cc,"g"),Cc=RegExp(fc,"g"),Dc=RegExp(kc+"(?="+kc+")|"+Ac+yc,"g"),Ec=RegExp([pc+"?"+ic+"+"+tc+"(?="+[ec,pc,"$"].join("|")+")",sc+"+"+uc+"(?="+[ec,pc+rc,"$"].join("|")+")",pc+"?"+rc+"+"+tc,pc+"+"+uc,gc,zc].join("|"),"g"),Fc=RegExp("["+qc+Sb+Tb+Ub+ac+"]"),Gc=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Hc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ic=-1,Jc={};Jc[ab]=Jc[bb]=Jc[cb]=Jc[db]=Jc[eb]=Jc[fb]=Jc[gb]=Jc[hb]=Jc[ib]=!0,Jc[Ja]=Jc[Ka]=Jc[$a]=Jc[La]=Jc[_a]=Jc[Ma]=Jc[Na]=Jc[Oa]=Jc[Qa]=Jc[Ra]=Jc[Sa]=Jc[Ua]=Jc[Va]=Jc[Wa]=Jc[Ya]=!1;var Kc={};Kc[Ja]=Kc[Ka]=Kc[$a]=Kc[_a]=Kc[La]=Kc[Ma]=Kc[ab]=Kc[bb]=Kc[cb]=Kc[db]=Kc[eb]=Kc[Qa]=Kc[Ra]=Kc[Sa]=Kc[Ua]=Kc[Va]=Kc[Wa]=Kc[Xa]=Kc[fb]=Kc[gb]=Kc[hb]=Kc[ib]=!0,Kc[Na]=Kc[Oa]=Kc[Ya]=!1;var Lc={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"},Mc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Nc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Oc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pc=parseFloat,Qc=parseInt,Rc="object"==typeof global&&global&&global.Object===Object&&global,Sc="object"==typeof self&&self&&self.Object===Object&&self,Tc=Rc||Sc||Function("return this")(),Uc="object"==typeof b&&b&&!b.nodeType&&b,Vc=Uc&&"object"==typeof c&&c&&!c.nodeType&&c,Wc=Vc&&Vc.exports===Uc,Xc=Wc&&Rc.process,Yc=function(){try{return Xc&&Xc.binding("util")}catch(a){}}(),Zc=Yc&&Yc.isArrayBuffer,$c=Yc&&Yc.isDate,_c=Yc&&Yc.isMap,ad=Yc&&Yc.isRegExp,bd=Yc&&Yc.isSet,cd=Yc&&Yc.isTypedArray,dd=A("length"),ed=B(Lc),fd=B(Mc),gd=B(Nc),hd=ba();"function"==typeof d&&"object"==typeof d.amd&&d.amd?(Tc._=hd,d("2d",[],function(){return hd})):Vc?((Vc.exports=hd)._=hd,Uc._=hd):Tc._=hd}).call(this)}(),a.register("16",["2d"],function(a,b){"use strict";function c(a){return a*a}function d(a,b){return c(a.x-b.x)+c(a.y-b.y)}function e(a,b){return Math.sqrt(d(a,b))}function f(a,b,c){var e={x:a.x,y:a.y},f=d(a,b);if(0!==f){var g=((c.x-a.x)*(b.x-a.x)+(c.y-a.y)*(b.y-a.y))/f;g>1?e=b:g>=0&&(e={x:a.x+g*(b.x-a.x),y:a.y+g*(b.y-a.y)})}return e}function g(a,b,c){return d(c,f(a,b,c))}function h(a,b,c){return Math.sqrt(g(a,b,c))}function i(a,b){var c=0,d=-1,g=null,i=null;if(1===a.length)g=a[0],i={start:{x:a[0].x,y:a[0].y},end:{x:a[0].x,y:a[0].y}},d=e(b,a[0]);else for(var j=1;j<a.length;j++){var k=a[j-1],l=a[j];c=h(k,l,b),(c<d||-1===d)&&(d=c,g=f(k,l,b),i={start:k,end:l})}return{point:g,segment:i,distance:d}}function j(a,b){for(var c=!1,d=1;d<a.length;++d)if(0===h(a[d-1],a[d],b)){c=!0;break}return c}function k(a){for(var b=-1,c=-1,e=1;e<a.length;e++){var f=d(a[e-1],a[e]);f>b&&(b=f,c=e)}var g=null;return-1!==c&&(g={start:s.cloneDeep(a[c-1]),end:s.cloneDeep(a[c])}),g}function l(a){return a.start.x===a.end.x}function m(a){return a.start.y===a.end.y}function n(a,b){return a.x===b.x&&a.y===b.y}function o(a,b){return a.start.x===b.start.x&&a.start.y===b.start.y&&a.end.x===b.end.x&&a.end.y===b.end.y}function p(a,b,c){return a.x*(b.y-c.y)+b.x*(c.y-a.y)+c.x*(a.y-b.y)==0&&(c.x>=a.x&&c.x<=b.x||c.x>=b.x&&c.x<=a.x)&&(c.y>=a.y&&c.y<=b.y||c.y>=b.y&&c.y<=a.y)}function q(a,b,c){var d=(b.y-a.y)/(b.x-a.x),e=a.y-d*a.x;return c.y===d*c.x+e}function r(a,b){for(var c=void 0,d=void 0,e=0;e<b.length-1;e++){var f={start:b[e],end:b[e+1]};if(c=l(f),d=m(f),m||l?p(f.start,f.end,a):q(f.start,f.end,a))break}return d?"horz":c?"vert":"angle"}var s;return a("square",c),a("distancePointToPointSquared",d),a("distancePointToPoint",e),a("getProjectedPointOnLineSegment",f),a("distanceToLineSegmentSquared",g),a("distanceToLineSegment",h),a("constrainPointToPath",i),a("isPointOnPath",j),a("getLongestPathSegment",k),a("isSegmentVertical",l),a("isSegmentHorizontal",m),a("isSamePoint",n),a("isSameSegment",o),a("pointOnLineSegment",p),a("pointOnAngledSegment",q),a("findDirectionOfPathPoint",r),{setters:[function(a){s=a.default}],execute:function(){}}}),a.register("91",["29","2f","38","90","43","39","92","16"],function(a,b){"use strict";function c(a){var b=[];return a.forEach(function(a){b.push({x:a.x,y:a.y})}),b}function d(a,b,c){a?(b.classList.add("wireDisabled"),c.viewObject.viewElement.classList.add("nocursor"),c.viewObject.viewElement.classList.add("invalid_position")):(b.classList.remove("wireDisabled"),c.viewObject.viewElement.classList.remove("nocursor"),c.viewObject.viewElement.classList.remove("invalid_position"))}function e(a,b,e){function x(a,b){function c(a){return this.x===a.x&&this.y===a.y}function d(c){for(var d=0,e=0;e<a.length-1;e++)v(a[e],a[e+1],c)&&d++;3===d&&(b=!0)}for(var e=0;e<a.length-1;e++){for(var f=void 0,g=void 0,h=void 0,i=void 0,j={start:a[e],end:a[e+1]},k=r(j),l=e+1;l<a.length-1;l++){var m={start:a[l],end:a[l+1]},n=r(m);if(!k&&!s(j)){d(j.start),d(j.end);break}if(n||s(m)){if(!0===k&&k===n&&j.end.x===m.start.x){if(f=Math.min(m.start.y,m.end.y),g=Math.max(m.start.y,m.end.y),h=Math.min(j.start.y,j.end.y),i=Math.max(j.start.y,j.end.y),h>f&&h<g||i>f&&i<g){b=!0;break}if(f>h&&f<i||g>h&&g<i){b=!0;break}if(f===h&&g===i){b=!0;break}}else if(!1===k&&k===n&&j.end.y===m.start.y){if(f=Math.min(m.start.x,m.end.x),g=Math.max(m.start.x,m.end.x),h=Math.min(j.start.x,j.end.x),i=Math.max(j.start.x,j.end.x),h>f&&h<g||i>f&&i<g){b=!0;break}if(f>h&&f<i||g>h&&g<i){b=!0;break}if(f===h&&g===i){b=!0;break}}}else;}if(a.filter(c,{x:j.start.x,y:j.start.y}).length>1&&(b=!0),!0===b)break}return b}function y(a,c,d,e){function f(a){var b=d.sheetTemplate.objectLookup.getObjectsAtPoint(a.x,a.y),c=b.filter(function(a){return g(a)})[0],e=d.design.findInstancesOfTemplate(c.component.templateGUID);if(e.length){var f=e[0],h=f.getPinInstance(c.name);0!==d.netlistController.getWires(h).length?m=!0:u.has(c)||(u.add(c),v.push({pinTemplate:c,pinInstance:h}))}}function h(a){var c=e.getContent(a.x,a.y),g=!1;if(c!==e.CONTENT.m_cellFree){var h=t(a,k),j=t(a,l);if(c===e.CONTENT.m_cellObstFull&&function(){var c=d.sheetTemplate.objectLookup.getObjectsAtPoint(a.x,a.y),e=new Set;b&&e.add(b),P&&d.netlistController.getWires(P).forEach(function(a){e.add(a.templateGUID)}),Q&&d.netlistController.getWires(Q).forEach(function(a){e.add(a.templateGUID)}),g=c.filter(function(a){return i(a)&&!e.has(a.templateGUID)})}(),!h&&!j||e.movingSelectedWires)if((h||j)&&e.movingSelectedWires)(m=c===e.CONTENT.m_cellObstJunc||c===e.CONTENT.m_cellObstVert||c===e.CONTENT.m_cellObstHor||c===e.CONTENT.m_cellObstAngle||g.length)||c!==e.CONTENT.m_cellObstVertPin&&c!==e.CONTENT.m_cellObstHorPin||f(a);else switch(c){case e.CONTENT.m_cellObstVertPin:case e.CONTENT.m_cellObstHorPin:q?(m=!0,n=!0):f(a);break;case e.CONTENT.m_cellObstJunc:m=!0;break;case e.CONTENT.m_cellObstVert:(o||q)&&(m=!0);break;case e.CONTENT.m_cellObstHor:(p||q)&&(m=!0);break;case e.CONTENT.m_cellObstFull:var r=void 0;1==g.length?(r=w(a,g[0].path),m="angle"===r||p&&"horz"===r||o&&"vert"===r):g.length>1&&(m=!0);break;case e.CONTENT.m_cellObstAngle:m=!0}else h&&N&&(c===e.CONTENT.m_cellObstHor||c===e.CONTENT.m_cellObstVert||c===e.CONTENT.m_cellObstJunc)?m=!0:h&&N&&(c===e.CONTENT.m_cellObstVertPin||c===e.CONTENT.m_cellObstHorPin)&&f(a),j&&O&&(c===e.CONTENT.m_cellObstHor||c===e.CONTENT.m_cellObstVert||c===e.CONTENT.m_cellObstJunc)?m=!0:j&&O&&(c===e.CONTENT.m_cellObstVertPin||c===e.CONTENT.m_cellObstHorPin)&&f(a),(c===e.CONTENT.m_cellObstAngle||g.length)&&(m=!0)}}function j(a,b){var c=void 0,d=void 0;if(r(a))for(c=a.start.x,d=Math.min(a.start.y,a.end.y);d<=Math.max(a.start.y,a.end.y)&&(b({x:c,y:d}),!m);++d);else if(s(a))for(d=a.start.y,c=Math.min(a.start.x,a.end.x);c<=Math.max(a.start.x,a.end.x)&&(b({x:c,y:d}),!m);++c);else{var e=(a.end.y-a.start.y)/(a.end.x-a.start.x),f=a.start.y-e*a.start.x;for(c=Math.min(a.start.x,a.end.x);c<=Math.max(a.start.x,a.end.x)&&(b({x:c,y:e*c+f}),!m);++c);}}for(var k=a[0],l=a[a.length-1],m=c,n=!1,o=void 0,p=void 0,q=void 0,u=new Set,v=[],x=0;x<a.length-1;x++){var y={start:a[x],end:a[x+1]};if(o=r(y),p=s(y),q=!o&&!p,j(y,h),m)break}return{isOverlapping:m,connectablePoints:v,angledWireOverPin:n}}function z(a,b,c,d){var f=q(d,e);M=f.segment;var g={x:0,y:0},h={minWidth:1,maxWidth:b.width-1,minHeight:1,maxHeight:b.height-1};return"horizontal"===c?a.x>h.maxWidth?g.x=h.maxWidth-M.start.x:a.x<h.minWidth?g.x=h.minWidth-M.start.x:g.x=a.x-M.start.x:"vertical"===c&&(a.y>h.maxHeight?g.y=h.maxHeight-M.start.y:a.y<h.minHeight?g.y=h.minHeight-M.start.y:g.y=a.y-M.start.y),g}function A(a,b){return a&&a.some(function(a){return!!v(a[0],a[1],b)},Y)}function B(a,b,c,d,e,f,g){var h=b.x===e.x&&b.y===e.y,i=b.x===f.x&&b.y===f.y;h&&b.x===f.x&&b.y!==f.y?C(a,{x:f.x,y:f.y},c,g,d):h&&b.x!==f.x&&b.y===f.y?C(a,{x:f.x,y:f.y},c,g,d):b.x!==e.x&&b.y===e.y&&i?C(a,{x:e.x,y:e.y},c,g,d):b.x===e.x&&b.y!==e.y&&i&&C(a,{x:e.x,y:e.y},c,g,d)}function C(a,c,d,e,f){d.sheetTemplate.objectLookup.getObjectsAtPoint(c.x,c.y).forEach(function(g){if(i(g)&&d.design.findInstancesOfTemplate(g.templateGUID)[0].netName===e)for(var h=0;h<g.path.length-1;++h){var j=null;if(f){if(v(g.path[h],g.path[h+1],{x:c.x,y:c.y})){j={start:g.path[h],end:g.path[h+1]};var k="vertical"===K?r(j):s(j);(s(j)||r(j))&&!u(f,j)&&k&&(a.push([j.start,j.end]),B(a,c,d,j,g.path[h],g.path[h+1],e))}}else if(v(g.path[h],g.path[h+1],{x:c.x,y:c.y})&&g.templateGUID===b&&(j={start:g.path[h],end:g.path[h+1]},s(j)||r(j))){a.push([j.start,j.end]);var l=D(g.path[0],g.path[g.path.length-1],c,j);l&&C(a,l,d,e,j)}}})}function D(a,b,c,d){var e="vertical"===K?r(d):s(d);if(c.x===a.x&&c.y===a.y)return a;if(c.x===b.x&&c.y===b.y)return b;if(e){if(d.start.x===a.x&&d.start.y===a.y&&c.x===d.end.x&&c.y===d.end.y)return a;if(d.end.x===b.x&&d.end.y===b.y&&c.x===d.start.x&&c.y===d.start.y)return b}}function E(a,b){if(!a)return!1;var c=1/0,d=null;return a.forEach(function(a){var e=o(b,a[0]),f=o(b,a[1]),g=Math.min(e,f),h=e<f?a[0]:a[1];g<c&&(c=g,d=h)}),d}function F(a,b,d,e,f){var g=null,h=null,i=c(a),j=void 0;for(j=1;j<a.length;++j){var k=a[j-1],l=a[j];if(k.x==b.start.x&&k.y==b.start.y&&l.x==b.end.x&&l.y==b.end.y){g=j-1,h=j;break}}var m={x:b.start.x+d.x,y:b.start.y+d.y},n={x:b.end.x+d.x,y:b.end.y+d.y},o=a[h],q=a[g],r=a[h]===a[a.length-1],s=a[g]===a[0];for(a[g]=m,a[h]=n,A(e,m)||(E(e,m)&&(a.splice(g,0,E(e,m)),s||1!==g||a[g].x===q.x&&a[g].y===q.y||(a.shift(),h--)),g++,h++),A(f,n)||(E(f,n)&&(a.splice(h+1,0,E(f,n)),r||a.length-2!==h+1||a[h+1].x===o.x&&a[h+1].y===o.y||a.pop()),h++),j=2;j<a.length;){var t=a[j-2],u=a[j-1],w=a[j];0===p(t,w,u)?a.splice(j-1,1):++j}if(a.length>2){var x=0;if(!v(i[i.length-2],i[i.length-1],a[a.length-2]))for(x=0;x<f.length;x++)if(v(f[x][0],f[x][1],a[a.length-2])){a.pop();break}if(a.length>2&&!v(i[0],i[1],a[1])&&i.length>2)for(x=0;x<e.length;x++)if(v(e[x][0],e[x][1],a[1])){a.shift();break}}}function G(a){var d=a(),f=!1;return d&&function(){d.classList.add("nims_object_dragging");var a=d.sheetTemplateController,g=a.sheetTemplate.getObject(b),h=a.design.findInstancesOfTemplate(b)[0].netName,i=a.design.findInstancesOfTemplate(b)[0],k=a.netlistController.getWireTerminals(i);L=c(g.path),S=j(),S.size={cx:a.sheetTemplate.size.width+1,cy:a.sheetTemplate.size.height+1};var l=q(L,e);M=l.segment,M.start.x==M.end.x?K="horizontal":M.start.y==M.end.y&&(K="vertical");var m=new Set;m.add(g);var n=function(b,c){return d.getSingleObject(b.templateGUID).classList.add("hidden"),m.add(a.sheetTemplate.getObject(b.templateGUID)),s(M)?[[{x:M[c].x,y:1},{x:M[c].x,y:a.sheetTemplate.size.height-1}]]:r(M)?[[{x:1,y:M[c].y},{x:a.sheetTemplate.size.width-1,y:M[c].y}]]:[]};k.from.junction&&(P=k.from.junction,N=1==a.netlistController.getWires(P).length&&t(a.sheetTemplate.getObject(k.from.junction.templateGUID).point,M.start)),k.to.junction&&(Q=k.to.junction,O=1==a.netlistController.getWires(Q).length&&t(a.sheetTemplate.getObject(k.to.junction.templateGUID).point,M.end)),T=N?n(P,"start"):[],U=O?n(Q,"end"):[],a.sheetTemplate.drawOnRouterMap(S,m),C(T,{x:M.start.x,y:M.start.y},a,h),C(U,{x:M.end.x,y:M.end.y},a,h),S.drawHardOpenRect({x0:0,y0:0,x1:a.sheetTemplate.size.width,y1:a.sheetTemplate.size.height});var o="http://www.w3.org/2000/svg",p=d.feedbackContent;V=document.createElementNS(o,"g"),V.classList.add("dragging"),p.appendChild(V),d.getSingleObject(b).classList.add("hidden"),g.children.forEach(function(a){var b=d.getSingleObject(a.templateGUID);b.classList.contains("hidden")?R.push(a.templateGUID):b.classList.add("hidden")});var u=document.createElementNS(o,"g");u.classList.add("nims_wirePath"),u.classList.add("nims_ghost_wire");var v=document.createElementNS(o,"path");u.appendChild(v),d.setWirePath(v,L),V.appendChild(u);var w=document.createElementNS(o,"rect");w.setAttribute("x",0),w.setAttribute("y",0),w.setAttribute("width",1),w.setAttribute("height",1),w.setAttribute("fill","none"),w.setAttribute("stroke","none"),f=!0}(),f}function H(a,b){var e=b(),f=!1;if(Z=!1,e){var g=e.sheetTemplateController,h=e.svgToGrid(e.viewObject.viewToContent({x:a.clientX,y:a.clientY})),i=c(L),j=e.getSheetSize(),l=z(h,j,K,L);F(i,M,l,T,U),Z=x(i,Z),W&&(W.parentNode.removeChild(W),W=null),X&&(X.parentNode.removeChild(X),X=null);var m=i[0].x!==L[0].x||i[0].y!==L[0].y,n=i[i.length-1].x!==L[L.length-1].x||i[i.length-1].y!==L[L.length-1].y;(m||N)&&(W=k.drawGhostJunction(e.gridToSvg(i[0]),e,!1)),(n||O)&&(X=k.drawGhostJunction(e.gridToSvg(i[i.length-1]),e,!1));var o=null;Z||(o=y(i,Z,g,S),Z=o.isOverlapping),_=o?o.connectablePoints:[],$.removeGhostJunctions(),!Z&&o&&o.connectablePoints.length&&_.forEach(function(a){$.onPinPointMove({x:a.pinTemplate.connectionX,y:a.pinTemplate.connectionY},e)});var p=V.querySelector("path");d(Z,p,e),p.setAttribute("d",""),e.setWirePath(p,i),f=!0}return f}function I(d,j,k){var n=void 0,o=!1,p={x:0,y:0};o=H(d,j,k);var q=j();if(W&&W.parentNode.removeChild(W),X&&X.parentNode.removeChild(X),q&&!Z)!function(){q.classList.remove("nims_object_dragging"),V.parentNode.removeChild(V),V=null,$.removeGhostJunctions();var a=c(L),e=q.getSheetSize();n=q.sheetTemplateController.sheetTemplate.getObject(b),o=!0;var f=q.svgToGrid(q.viewObject.viewToContent({x:d.clientX,y:d.clientY})),j=z(f,e,K,L);F(a,M,j,T,U);var k=a[0].x!==L[0].x||a[0].y!==L[0].y,l=a[a.length-1].x!==L[L.length-1].x||a[a.length-1].y!==L[L.length-1].y,r=function(a,b){b.forEach(function(b){var c=q.sheetTemplateController.design.findInstance(b,a),d=q.sheetTemplateController.netlistController.getWireTerminals(c);d.from.connectable===d.to.connectable&&(q.sheetTemplateController.netlistController.disconnect(c),c.children.forEach(function(a){q.sheetTemplateController.removeDesignInstance(b,a.templateGUID,a)}),q.sheetTemplateController.removeDesignInstance(b,c.templateGUID,c),q.sheetTemplateController.sheetTemplate.getObject(a).children.forEach(function(a){q.sheetTemplateController.removeTemplateObject(a.templateGUID)}),q.sheetTemplateController.removeTemplateObject(a))})},s=function(a,c){var d=[],e=q.sheetTemplateController.sheetTemplate.objectLookup.getObjectsAtPoint(a.x,a.y),f=null,j=null,k=null;e.forEach(function(a){!i(a)||f&&f!==n?h(a)?j=a:g(a)&&(k=a):f=a});var l=void 0;j?l=q.sheetTemplateController.wiringController.getWiringConnectDataForJunction(j):k?l=q.sheetTemplateController.wiringController.getWiringConnectDataForPin({templateGUID:k.component.templateGUID,symbolPinID:k.name}):f&&(l=q.sheetTemplateController.wiringController.getWiringConnectDataForWire({connectType:m.WIRE,templateGUID:f.templateGUID,splitPoint:a})),l&&function(){var a=null,e=null,f=!1,g=!1;l.itemMap.forEach(function(h,i){d.push(i);var j=q.sheetTemplateController.design.findInstance(i,b),k=q.sheetTemplateController.netlistController.getWireTerminals(j);q.sheetTemplateController.netlistController.changeWireTerminal(j,k[c].connectable,h);var l=q.sheetTemplateController.netlistController.getWireTerminals(j);a||k[c].connectable.pinID||(a=k[c].connectable.templateGUID,f=2===q.sheetTemplateController.netlistController.getNumberOfConnectionsForJunction(k[c].connectable)),e||l[c].connectable.pinID||(e=l[c].connectable.templateGUID,g=2===q.sheetTemplateController.netlistController.getNumberOfConnectionsForJunction(l[c].connectable))});var h=void 0;a&&f&&(h=q.sheetTemplateController.wiringController.mergeJunction(d,a),r(h,d)),g&&(h=q.sheetTemplateController.wiringController.mergeJunction(d,e),r(h,d))}()},t=function(a,c,d){var e=q.sheetTemplateController.junctionController.addJunction({point:{x:a.x,y:a.y}}),f=q.sheetTemplateController.design.findInstancesOfTemplate(e)[0],g=q.sheetTemplateController.design.findInstancesOfTemplate(b)[0],h=q.sheetTemplateController.netlistController.getWireTerminals(g);q.sheetTemplateController.netlistController.changeWireTerminal(g,h[c].connectable,f),q.sheetTemplateController.netlistController.addSwappedJunctionUndoRedo(d,g.netName),q.sheetTemplateController.netlistController.removeJunction(d),q.sheetTemplateController.removeDesignInstance(d.contextGUID,d.templateGUID,d),q.sheetTemplateController.removeTemplateObject(d.templateGUID)};if("horizontal"===K){var u=Math.max(M.start.y,M.end.y),v=Math.min(M.start.y,M.end.y);p.x=f.x>=e.width?e.width-1:f.x<=0?1:f.x,p.y=f.y>u?u:f.y<v?v:f.y}else{var w=Math.max(M.start.x,M.end.x),x=Math.min(M.start.x,M.end.x);p.y=f.y>=e.height?e.height-1:f.y<=0?1:f.y,p.x=f.x>w?w:f.x<x?x:f.x}q.sheetTemplateController.wiringController.wireAdornerUpdate(n,a,q),N?t(a[0],"from",P):k&&s(a[0],"from"),O?t(a[a.length-1],"to",Q):l&&s(a[a.length-1],"to")}();else{p.x=e.x,p.y=e.y,q.classList.remove("nims_object_dragging"),V.parentNode.removeChild(V),V=null;q.getSingleObject(b).classList.remove("hidden"),n=q.sheetTemplateController.sheetTemplate.getObject(b),n.children.forEach(function(a){if(!R.some(function(b){return b==a.templateGUID})){q.getSingleObject(a.templateGUID).classList.remove("hidden")}}),O&&q.getSingleObject(Q.templateGUID).classList.remove("hidden"),N&&q.getSingleObject(P.templateGUID).classList.remove("hidden"),q.viewObject.viewElement.classList.remove("nocursor"),q.viewObject.viewElement.classList.remove("invalid_position"),Z&&q.wiringcontroller.notifications.notify(f.i18n.translate("Cannot have overlapping wires.").fetch(),q.wiringcontroller.notifications.ETypes.NT_INFO)}q.viewObject.listeners.notifyListeners(q.viewObject.viewEvents.USER_ACTION_ENDED,{viewobject:q.viewObject,command:"move"}),l.setAdornerPlacementRect({left:p.x-1,top:p.y-1,right:p.x+1,bottom:p.y+1});var r=function(){a.stopCommand()};return $.doAutoConnect(q,r,_),o}function J(a){L=a}var K=void 0,L=void 0,M=void 0,N=void 0,O=void 0,P=void 0,Q=void 0,R=[],S=void 0,T=void 0,U=void 0,V=void 0,W=void 0,X=void 0,Y=this,Z=!1,$=n.createAutoConnectSubCommand(),_=[];return{onStart:G,onPan:H,onPanEnd:I,moveSegmentOnPath:F,checkSelfOverlap:x,checkWireInterference:y,getJunctionRails:C,getDeltaDistance:z,initialize:J}}var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return a("default",e),{setters:[function(a){f=a.default},function(a){g=a.isTemplateSymbolPin,h=a.isTemplateJunction,i=a.isTemplateWire},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.distancePointToPointSquared,p=a.distanceToLineSegment,q=a.constrainPointToPath,r=a.isSegmentVertical,s=a.isSegmentHorizontal,t=a.isSamePoint,u=a.isSameSegment,v=a.pointOnLineSegment,w=a.findDirectionOfPathPoint}],execute:function(){}}}),function(){var b=a.amdDefine;!function(a,d){function e(a){var b=this;b._t=b.transform,b.a=b.d=1,b.b=b.c=b.e=b.f=0,b.context=a,a&&a.setTransform(1,0,0,1,0,0)}e.prototype={concat:function(a){return this.clone()._t(a.a,a.b,a.c,a.d,a.e,a.f)},flipX:function(){return this._t(-1,0,0,1,0,0)},flipY:function(){return this._t(1,0,0,-1,0,0)},reflectVector:function(a,b){var c=this.applyToPoint(0,1),d=2*(c.x*a+c.y*b);return a-=d*c.x,b-=d*c.y,{x:a,y:b}},reset:function(){return this.setTransform(1,0,0,1,0,0)},rotate:function(a){var b=Math.cos(a),c=Math.sin(a);return this._t(b,c,-c,b,0,0)},rotateFromVector:function(a,b){return this.rotate(Math.atan2(b,a))},rotateDeg:function(a){return this.rotate(a*Math.PI/180)},scaleU:function(a){return this._t(a,0,0,a,0,0)},scale:function(a,b){return this._t(a,0,0,b,0,0)},scaleX:function(a){return this._t(a,0,0,1,0,0)},scaleY:function(a){return this._t(1,0,0,a,0,0)},shear:function(a,b){return this._t(1,b,a,1,0,0)},shearX:function(a){return this._t(1,0,a,1,0,0)},shearY:function(a){return this._t(1,a,0,1,0,0)},skew:function(a,b){return this.shear(Math.tan(a),Math.tan(b))},skewX:function(a){return this.shearX(Math.tan(a))},skewY:function(a){return this.shearY(Math.tan(a))},setTransform:function(a,b,c,d,e,f){var g=this;return g.a=a,g.b=b,g.c=c,g.d=d,g.e=e,g.f=f,g._x()},translate:function(a,b){return this._t(1,0,0,1,a,b)},translateX:function(a){return this._t(1,0,0,1,a,0)},translateY:function(a){return this._t(1,0,0,1,0,a)},transform:function(a,b,c,d,e,f){var g=this,h=g.a,i=g.b,j=g.c,k=g.d,l=g.e,m=g.f;return g.a=h*a+j*b,g.b=i*a+k*b,g.c=h*c+j*d,g.d=i*c+k*d,g.e=h*e+j*f+l,g.f=i*e+k*f+m,g._x()},divide:function(a){if(!a.isInvertible())throw"Input matrix is not invertible";var b=a.inverse();return this._t(b.a,b.b,b.c,b.d,b.e,b.f)},divideScalar:function(a){var b=this;return b.a/=a,b.b/=a,b.c/=a,b.d/=a,b.e/=a,b.f/=a,b._x()},inverse:function(){if(this.isIdentity())return new e;if(this.isInvertible()){var a=this,b=a.a,c=a.b,d=a.c,f=a.d,g=a.e,h=a.f,i=new e,j=b*f-c*d;return i.a=f/j,i.b=-c/j,i.c=-d/j,i.d=b/j,i.e=(d*h-f*g)/j,i.f=-(b*h-c*g)/j,i}throw"Matrix is not invertible."},interpolate:function(a,b,c){var d=this,f=c?new e(c):new e;return f.a=d.a+(a.a-d.a)*b,f.b=d.b+(a.b-d.b)*b,f.c=d.c+(a.c-d.c)*b,f.d=d.d+(a.d-d.d)*b,f.e=d.e+(a.e-d.e)*b,f.f=d.f+(a.f-d.f)*b,f._x()},interpolateAnim:function(a,b,c){var d=this,f=c?new e(c):new e,g=d.decompose(),h=a.decompose(),i=g.rotation+(h.rotation-g.rotation)*b,j=g.translate.x+(h.translate.x-g.translate.x)*b,k=g.translate.y+(h.translate.y-g.translate.y)*b,l=g.scale.x+(h.scale.x-g.scale.x)*b,m=g.scale.y+(h.scale.y-g.scale.y)*b;return f.translate(j,k),f.rotate(i),f.scale(l,m),f._x()},decompose:function(a){var b=this,c=b.a,d=b.b,e=b.c,f=b.d,g=Math.acos,h=Math.atan,i=Math.sqrt,j=Math.PI,k={x:b.e,y:b.f},l=0,m={x:1,y:1},n={x:0,y:0},o=c*f-d*e;if(a)c?(n={x:h(e/c),y:h(d/c)},m={x:c,y:o/c}):d?(l=.5*j,m={x:d,y:o/d},n.x=h(f/d)):(m={x:e,y:f},n.x=.25*j);else if(c||d){var p=i(c*c+d*d);l=d>0?g(c/p):-g(c/p),m={x:p,y:o/p},n.x=h((c*e+d*f)/(p*p))}else if(e||f){var q=i(e*e+f*f);l=.5*j-(f>0?g(-e/q):-g(e/q)),m={x:o/q,y:q},n.y=h((c*e+d*f)/(q*q))}else m={x:0,y:0};return{scale:m,translate:k,rotation:l,skew:n}},determinant:function(){return this.a*this.d-this.b*this.c},applyToPoint:function(a,b){var c=this;return{x:a*c.a+b*c.c+c.e,y:a*c.b+b*c.d+c.f}},applyToArray:function(a){var b,c,d=0,e=[];if("number"==typeof a[0])for(c=a.length;d<c;)b=this.applyToPoint(a[d++],a[d++]),e.push(b.x,b.y);else for(;b=a[d];d++)e.push(this.applyToPoint(b.x,b.y));return e},applyToTypedArray:function(a,b){for(var c,d=0,e=a.length,f=b?new Float64Array(e):new Float32Array(e);d<e;)c=this.applyToPoint(a[d],a[d+1]),f[d++]=c.x,f[d++]=c.y;return f},applyToContext:function(a){var b=this;return a.setTransform(b.a,b.b,b.c,b.d,b.e,b.f),b},isIdentity:function(){var a=this;return a._q(a.a,1)&&a._q(a.b,0)&&a._q(a.c,0)&&a._q(a.d,1)&&a._q(a.e,0)&&a._q(a.f,0)},isInvertible:function(){return!this._q(this.determinant(),0)},isValid:function(){return!this._q(this.a*this.d,0)},clone:function(a){var b=this,c=new e;return c.a=b.a,c.b=b.b,c.c=b.c,c.d=b.d,c.e=b.e,c.f=b.f,a||(c.context=b.context),c},isEqual:function(a){var b=this,c=b._q;return c(b.a,a.a)&&c(b.b,a.b)&&c(b.c,a.c)&&c(b.d,a.d)&&c(b.e,a.e)&&c(b.f,a.f)},toArray:function(){var a=this;return[a.a,a.b,a.c,a.d,a.e,a.f]},toCSS:function(){return"matrix("+this.toArray()+")"},toJSON:function(){return JSON.stringify(this.toArray())},toString:function(){return""+this.toArray()},_q:function(a,b){return Math.abs(a-b)<1e-14},_x:function(){var a=this;return a.context&&a.context.setTransform(a.a,a.b,a.c,a.d,a.e,a.f),a}},"function"==typeof b&&b.amd?b("41",[],function(){return e}):void 0!==c&&c.exports?c.exports=e:a[d]=e}(window,"Matrix")}(),a.register("3e",["2d","29","2f","180","181","182","183","184","91","41"],function(a,b){"use strict";function c(a){var b=a();return{view:b,sheetTemplateController:b.sheetTemplateController,selection:b.getSelection()}}function d(a,b){I={applyLoadIndication:function(){b().viewObject.viewElement.classList.add("nocursor"),a.classList.add("loading_resource")},removeLoadIndication:function(){b().viewObject.viewElement.classList.remove("nocursor"),a.classList.remove("loading_resource")}}}function e(a,b){var c=void 0;a.type?c="component"===a.type?1:0:a.selection&&(c=a.selection.map(function(b){return a.sheetTemplateController.sheetTemplate.getObject(b)}).filter(function(a){return x(a)}).length);var d=a.sheetTemplateController.design;c>0?(I.applyLoadIndication(),d.canAddComponents(function(a){a?b():(I.removeLoadIndication(),d.componentLimitExceededError())},c)):b()}function f(a,b,c,d,f,g){var h=b.createCommandObject(G.C_ADDOBJECT,function(b,e){var i=!1,j=null,k=function(a){a&&c.cancelAction(),j&&c.unregisterLastTool(),j=null},l=function(a){i&&(a?(j=y(a,e,h,d,g,f),c.registerTool(j)):(alert(w.i18n.translate("Failed to retrieve component data from the server").fetch()),k=null,h.stopCommand(!0))),I.removeLoadIndication()};return i=!0,a.getComponent(e.additionalData.componentID,l,I.applyLoadIndication),i?function(a){i=!1,k&&k(a),h.enabled=!0}:null},!1,e);h.contextName=H.CC_ADDOBJECT,h.enabled=!0,h.cancelActiveCommand=!0,h.contextHelper.contextDisable="all",h.contextHelper.contextEnable=[H.CC_ADDOBJECT,H.CC_ADDOBJECTFLOATING,H.CC_ADDTEXTFLOATING,H.CC_ADDPROBEFLOATING,H.CC_ADDJUNCTIONFLOATING]}function g(a,b,d){var e=a.createCommandObject(G.C_DELETEOBJECT,function(a,b){return b.view.selectioninterface.clearSelection(b.view),b.sheetTemplateController.removeObjects({templateGUIDs:b.selection},!0,a)});e.enabled=!0,e.cancelActiveCommand=!0,e.contextHelper.contextHidden="all",e.contextHelper.contextVisible=[""],e.contextHelper.contextDisable=[H.CC_SIMULATION,H.CC_EMBEDDED],b.addKeyHandler("delete",!1,!1,!1,!1,function(){e.enabled&&e.startCommand(w.i18n.translate("deletion.").fetch(),c(d))},G.C_DELETEOBJECT)}function h(a,b,c,d,e,f){var g=c.createCommandObject(G.C_ADDPROBE,function(c,h){var i=!0;return I.applyLoadIndication(),a.loadSVGResource(h.symbolFile,function(a){if(a){var c=a.querySelector("g"),j=B(c,g,h.probeType,d,e,f);b.registerTool(j)}else alert(w.i18n.translate("Failed to retrieve the component symbol from the server").fetch()),i=!1,g.stopCommand(!0);I.removeLoadIndication()}),function(a){i&&(a&&b.cancelAction(),b.unregisterLastTool()),g.enabled=!0}});return g.contextName=H.CC_ADDOBJECT,g.enabled=!0,g.cancelActiveCommand=!0,g.contextHelper.contextDisable="all",g.contextHelper.contextEnable=[H.CC_ADDOBJECT,H.CC_ADDOBJECTFLOATING,H.CC_ADDTEXTFLOATING,H.CC_ADDPROBEFLOATING,H.CC_ADDJUNCTIONFLOATING],g}function i(a,b,c,d,e){var f=b.createCommandObject(G.C_ADDTEXTANNOTATION,function(){var b=C(f,c,d,e);return a.registerTool(b),function(b){b&&a.cancelAction(),a.unregisterLastTool(),f.enabled=!0}});return f.contextName=H.CC_ADDOBJECT,f.enabled=!0,f.cancelActiveCommand=!0,f.contextHelper.contextDisable="all",f.contextHelper.contextEnable=[H.CC_ADDOBJECT,H.CC_ADDOBJECTFLOATING,H.CC_ADDTEXTFLOATING,H.CC_ADDPROBEFLOATING,H.CC_ADDJUNCTIONFLOATING],f}function j(a,b,c,d,e,f){var g=b.createCommandObject(G.C_ADDJUNCTION,function(){var h=z(g,b,c,d,e,f,a);return a.registerTool(h),function(b){b&&a.cancelAction(),a.unregisterLastTool()}});return g.contextName=H.CC_ADDOBJECT,g.enabled=!0,g.cancelActiveCommand=!0,g.contextHelper.contextDisable="all",g.contextHelper.contextEnable=[H.CC_ADDOBJECT,H.CC_ADDOBJECTFLOATING,H.CC_ADDTEXTFLOATING,H.CC_ADDPROBEFLOATING,H.CC_ADDJUNCTIONFLOATING],g}function k(a,b){var c=a.createCommandObject(G.C_MOVESELECTION,function(){return function(a){a&&b.cancelAction()}});return c.enabled=!0,c.contextName=H.CC_MOVESELECTION,c.cancelActiveCommand=!0,c.contextHelper.contextHidden="all",c.contextHelper.contextDisable=[H.CC_SIMULATION,H.CC_EMBEDDED],c}function l(a,b,d,e,f){var g=a.createCommandObject(G.C_ROTATEOBJECT,function(a,b){var g=null;b=b||c(d),b.angle=b.angle||90,b.templateGUID=b.templateGUID||b.selection[0],b.templateComponent=b.sheetTemplateController.sheetTemplate.getObject(b.templateGUID),b.commandID=G.C_ROTATEOBJECT,b.sheetTemplateController.rotateObject(b),b.view.selectioninterface.fireSelectionListener(b.view,{event:null});var h=f.initFloatMoveState(b);return h&&(g=function(a){a&&e.cancelAction()},h()),g});g.contextName=H.CC_ROTATEOBJECT,g.enabled=!0,g.cancelActiveCommand=!1,g.contextHelper.contextHidden="all",g.contextHelper.contextDisable=[H.CC_ADDOBJECT,H.CC_ADDOBJECTFLOATING,H.CC_ADDPROBEFLOATING,H.CC_ADDTEXTFLOATING,H.CC_DUPLICATEOBJECT,H.CC_DUPLICATEOBJECTFLOATING,H.CC_DUPLICATEFIXEDOBJECTFLOATING,H.CC_MOVESELECTION,H.CC_MOVESELECTIONFLOATING,H.CC_ROTATEOBJECT,H.CC_FLIPOBJECTHORIZONTAL,H.CC_ADDREFERENCEPROBE,H.CC_SYMBOLCHANGE,H.CC_MODELCHANGE,H.CC_ADDJUNCTIONFLOATING,H.CC_SIMULATION,H.CC_EMBEDDED];var h=a.createCommandObject(G.C_FLOATINGROTATEOBJECT,function(a,b){var f=e.activeTool;return f&&f.rotateComp&&(b=b||c(d),f.rotateComp(b.angle||90)),null},!0);h.contextName=H.CC_ROTATEOBJECT,h.enabled=!0,h.cancelActiveCommand=!1,h.contextHelper.contextHidden="all",h.contextHelper.contextDisable="all",h.contextHelper.contextVisible=[H.CC_ADDOBJECTFLOATING,H.CC_DUPLICATEOBJECTFLOATING,H.CC_MOVESELECTIONFLOATING,H.CC_ROTATEOBJECT,H.CC_FLIPOBJECTHORIZONTAL,H.CC_ADDREFERENCEPROBE,H.CC_SYMBOLCHANGE,H.CC_MODELCHANGE],h.contextHelper.contextEnable=[H.CC_ADDOBJECT,H.CC_ADDOBJECTFLOATING,H.CC_DUPLICATEOBJECT,H.CC_DUPLICATEOBJECTFLOATING,H.CC_MOVESELECTION,H.CC_MOVESELECTIONFLOATING,H.CC_ROTATEOBJECT,H.CC_FLIPOBJECTHORIZONTAL,H.CC_ADDREFERENCEPROBE,H.CC_SYMBOLCHANGE,H.CC_MODELCHANGE],b.addKeyHandler("r",!1,!0,!1,!1,function(a){(g.enabled||h.enabled)&&(a.stopImmediatePropagation(),g.enabled?g.startCommand(w.i18n.translate("rotation.").fetch(),c(d)):h.enabled&&h.startCommand(w.i18n.translate("rotation.").fetch(),c(d))),a.preventDefault()},G.C_ROTATEOBJECT),b.addKeyHandler("r",!0,!0,!1,!1,function(a){if(g.enabled||h.enabled){a.stopImmediatePropagation();var b=c(d);b.angle=-90,g.enabled?g.startCommand(w.i18n.translate("rotation.").fetch(),b):h.enabled&&h.startCommand(w.i18n.translate("rotation.").fetch(),c(d))}a.preventDefault()},G.C_ROTATEOBJECT)}function m(a,b,d,e,f){var g=a.createCommandObject(G.C_FLIPOBJECTHORIZONTAL,function(a,b){var g=null;b=b||c(d),b.templateGUID=b.templateGUID||b.selection[0],b.templateComponent=b.sheetTemplateController.sheetTemplate.getObject(b.templateGUID),b.sheetTemplateController.flipObjectHorizontal(b),b.commandID=G.C_FLIPOBJECTHORIZONTAL,b.view.selectioninterface.fireSelectionListener(b.view,{event:null});var h=f.initFloatMoveState(b);return h&&(g=function(a){a&&e.cancelAction()},h()),g});g.contextName=H.CC_FLIPOBJECTHORIZONTAL,g.enabled=!0,g.cancelActiveCommand=!1,g.contextHelper.contextHidden="all",g.contextHelper.contextDisable=[H.CC_ADDOBJECT,H.CC_ADDOBJECTFLOATING,H.CC_DUPLICATEOBJECT,H.CC_DUPLICATEOBJECTFLOATING,H.CC_MOVESELECTION,H.CC_MOVESELECTIONFLOATING,H.CC_ROTATEOBJECT,H.CC_FLIPOBJECTHORIZONTAL,H.CC_SYMBOLCHANGE,H.CC_MODELCHANGE,H.CC_ADDJUNCTIONFLOATING,H.CC_SIMULATION,H.CC_EMBEDDED];var h=a.createCommandObject(G.C_FLOATINGFLIPOBJECTHORIZONTAL,function(){var a=e.activeTool;return a&&a.flipComp&&a.flipComp(),null},!0);h.contextName=H.CC_FLIPOBJECTHORIZONTAL,h.enabled=!0,h.cancelActiveCommand=!1,h.contextHelper.contextHidden="all",h.contextHelper.contextDisable="all",h.contextHelper.contextVisible=[H.CC_ADDOBJECTFLOATING,H.CC_DUPLICATEOBJECTFLOATING,H.CC_MOVESELECTIONFLOATING,H.CC_ROTATEOBJECT,H.CC_FLIPOBJECTHORIZONTAL,H.CC_SYMBOLCHANGE,H.CC_MODELCHANGE],h.contextHelper.contextEnable=[H.CC_ADDOBJECT,H.CC_ADDOBJECTFLOATING,H.CC_DUPLICATEOBJECT,H.CC_DUPLICATEOBJECTFLOATING,H.CC_MOVESELECTION,H.CC_MOVESELECTIONFLOATING,H.CC_ROTATEOBJECT,H.CC_FLIPOBJECTHORIZONTAL,H.CC_SYMBOLCHANGE,H.CC_MODELCHANGE],b.addKeyHandler("m",!1,!0,!1,!1,function(a){(g.enabled||h.enabled)&&(a.stopImmediatePropagation(),g.enabled?g.startCommand(w.i18n.translate("flip.").fetch(),c(d)):h.enabled&&h.startCommand(w.i18n.translate("flip.").fetch(),c(d))),a.preventDefault()},G.C_FLIPOBJECTHORIZONTAL)}function n(a,b,c,d,f,g,h){var i=a.createCommandObject(G.C_ADDREFERENCEPROBE,function(){var a=!0;return I.applyLoadIndication(),b.loadSVGResource("resources/icons/probes/probe_voltage_reference.svg",function(b){if(b){var e=b.querySelector("g"),j=c(),k=j.getSelection(),l=B(e,i,"reference",f,g,h,k);d.registerTool(l)}else alert(w.i18n.translate("Failed to retrieve the component symbol from the server").fetch()),a=!1,i.stopCommand(!0);I.removeLoadIndication()}),function(b){a&&(b&&d.cancelAction(),d.unregisterLastTool()),i.enabled=!0}},!1,e);i.enabled=!0,i.cancelActiveCommand=!0,i.contextName=H.CC_ADDREFERENCEPROBE,i.contextHelper.contextHidden="all"}function o(a,b,c,d){var f=a.createCommandObject(G.C_DUPLICATEOBJECT,function(){var a=!1,e=null,g=function(a){a&&b.cancelAction(),e&&b.unregisterLastTool(),e=null};return a=!0,e=A(f,c,d),b.registerTool(e),I.removeLoadIndication(),a?function(b){a=!1,g&&g(b),f.enabled=!0}:null},!1,e);f.enabled=!0,f.cancelActiveCommand=!0,f.contextName=H.CC_DUPLICATEOBJECT,f.contextHelper.contextHidden="all"}function p(a,b){var c=a.createCommandObject(G.C_WIREMOVE,function(a,d){var e=D(c,d.wireToMove,d.startPoint);if(b.registerTool(e))return function(a){a&&b.cancelAction(),b.unregisterLastTool()}});c.enabled=!0,c.cancelActiveCommand=!0,c.contextName=H.CC_WIREMOVE,c.contextHelper.contextHidden=[H.CC_SIMULATION,H.CC_EMBEDDED]}function q(a){var b=a.createCommandObject(G.C_TOGGLESTATE,function(a,b){u(b.selection,b.sheetTemplateController,b.view.contextGUID)});b.enabled=!0,b.cancelActiveCommand=!1}function r(a,b,c,d,e){var f=function(a){var b=d.activeTool,f=function(d){if(d){var e={oeclComponent:d,objectMatrix:new E,connectorType:null,sectionName:d.componentBlueprints[0].sections[0].name,connectPin:d.componentBlueprints[0].sections[0].connections[0].name,isHorizFlip:!1};a.commandID===G.C_WIREENDWITHCONNECTOR?e.connectorType="connector":a.commandID===G.C_WIREENDWITHGROUND&&(e.connectorType="ground"),b.startFinalize(e,c)}else alert(w.i18n.translate("Failed to retrieve connector data from the server").fetch());I.removeLoadIndication()};if(b&&b.startFinalize)switch(a.commandID){case G.C_WIREENDWITHCONNECTOR:e.getComponent("connector",f,I.applyLoadIndication);break;case G.C_WIREENDWITHGROUND:e.getComponent("ground",f,I.applyLoadIndication);break;case G.C_WIREENDWITHJUNCTION:b.startFinalize(null,c,null)}return null},g=a.createCommandObject(G.C_WIREENDWITHCONNECTOR,f,!0);g.enabled=!0,g.contextHelper.contextVisible=[H.CC_WIRING],g.contextHelper.contextEnable=[H.CC_WIRING];var h=a.createCommandObject(G.C_WIREENDWITHGROUND,f,!0);h.enabled=!0,h.contextHelper.contextVisible=[H.CC_WIRING],h.contextHelper.contextEnable=[H.CC_WIRING];var i=a.createCommandObject(G.C_WIREENDWITHJUNCTION,f,!0);i.enabled=!0,i.contextHelper.contextVisible=[H.CC_WIRING],i.contextHelper.contextEnable=[H.CC_WIRING],b.addKeyHandler("x",!1,!1,!1,!1,function(a){g.enabled&&(a.stopImmediatePropagation(),g.startCommand()),a.preventDefault()},G.C_WIREENDWITHCONNECTOR),b.addKeyHandler("g",!1,!1,!1,!1,function(a){h.enabled&&(a.stopImmediatePropagation(),h.startCommand()),a.preventDefault()},G.C_WIREENDWITHGROUND),b.addKeyHandler("j",!1,!1,!1,!1,function(a){i.enabled&&(a.stopImmediatePropagation(),i.startCommand()),a.preventDefault()},G.C_WIREENDWITHJUNCTION)}function s(a,b){a.addKeyHandler("0",!1,!1,!1,!1,function(){var a=b(),c=a.sheetTemplateController,d=a.contextGUID;u(c.sheetTemplate.componentShortcuts.get(0),c,d)}),a.addKeyHandler("1",!1,!1,!1,!1,function(){var a=b(),c=a.sheetTemplateController,d=a.contextGUID;u(c.sheetTemplate.componentShortcuts.get(1),c,d)}),a.addKeyHandler("2",!1,!1,!1,!1,function(){var a=b(),c=a.sheetTemplateController,d=a.contextGUID;u(c.sheetTemplate.componentShortcuts.get(2),c,d)}),a.addKeyHandler("3",!1,!1,!1,!1,function(){var a=b(),c=a.sheetTemplateController,d=a.contextGUID;u(c.sheetTemplate.componentShortcuts.get(3),c,d)}),a.addKeyHandler("4",!1,!1,!1,!1,function(){var a=b(),c=a.sheetTemplateController,d=a.contextGUID;u(c.sheetTemplate.componentShortcuts.get(4),c,d)}),a.addKeyHandler("5",!1,!1,!1,!1,function(){var a=b(),c=a.sheetTemplateController,d=a.contextGUID;u(c.sheetTemplate.componentShortcuts.get(5),c,d)}),a.addKeyHandler("6",!1,!1,!1,!1,function(){var a=b(),c=a.sheetTemplateController,d=a.contextGUID;u(c.sheetTemplate.componentShortcuts.get(6),c,d)}),a.addKeyHandler("7",!1,!1,!1,!1,function(){var a=b(),c=a.sheetTemplateController,d=a.contextGUID;u(c.sheetTemplate.componentShortcuts.get(7),c,d)}),a.addKeyHandler("8",!1,!1,!1,!1,function(){var a=b(),c=a.sheetTemplateController,d=a.contextGUID;u(c.sheetTemplate.componentShortcuts.get(8),c,d)}),a.addKeyHandler("9",!1,!1,!1,!1,function(){var a=b(),c=a.sheetTemplateController,d=a.contextGUID;u(c.sheetTemplate.componentShortcuts.get(9),c,d)})}function t(b,c,e,t,u){d(b,e),g(b.commandInterface,c,e),a("moveSelectionCommand",F=k(b.commandInterface,b.toolManager)),l(b.commandInterface,c,e,b.toolManager,b.manipulationInterface),m(b.commandInterface,c,e,b.toolManager,b.manipulationInterface),o(b.commandInterface,b.toolManager,b.manipulationInterface,b.cancelInterface),n(b.commandInterface,b.resourceController,e,b.toolManager,b.manipulationInterface,b.selectionInterface,b.cancelInterface),p(b.commandInterface,b.toolManager),q(b.commandInterface),r(b.commandInterface,c,e,b.toolManager,u),j(b.toolManager,b.commandInterface,b.manipulationInterface,b.selectionInterface,b.cancelInterface,b.wiringController),i(b.toolManager,b.commandInterface,b.manipulationInterface,b.selectionInterface,b.cancelInterface),h(b.resourceController,b.toolManager,b.commandInterface,b.manipulationInterface,b.selectionInterface,b.cancelInterface),f(u,b.commandInterface,b.toolManager,b.manipulationInterface,b.cancelInterface,b.selectionInterface),s(c,e),c.addKeyHandler("a",!0,!1,!1,!1,function(a){a.preventDefault(),t.querySelector("#nims_viewscontainer").hasAttribute("focus")&&function(){var a=e(),b=a.sheetTemplateController.design,c=b.getAllProbeInstances().concat(b.getAllSectionInstances()).concat(b.getAllConnectorInstances()).concat(b.getAllWireInstances()).concat(b.getAllJunctionInstances()).concat(b.getAllTextAnnotationInstances());a.selectioninterface.selectElements(c.map(function(b){return a.getSingleObject(b.templateGUID)}),a)}()})}function u(a,b,c){a&&a.forEach(function(a){var d=b.getPropertiesForItem(c,a),e=b.getModelDataForItem(c,a),f=e&&e.instances[0].variables.filter(function(a){return"model"===a.name}).length?e.name:null,g=e?e.customData:null,h=v.find(d,function(a){return"button"===a.propertyType});h&&function(){var e=b.design.findInstance(c,a),i=h.isInstanceVar?e.getInstanceVariableValue(e.activeModelID,h.name):e.getModelVariableValue(e.activeModelID,h.name),j="1"===i?"0":"1";if(h.isInstanceVar?b.changeInstanceVariable(e.contextGUID,e.templateGUID,h.name,j):b.changeModelVariable(e.contextGUID,e.templateGUID,h.name,j),h.spiceParameters&&h.spiceParameters.length&&g){var k=d.reduce(function(a,b){return a[b.name]=b.isInstanceVar?e.getInstanceVariableValue(e.activeModelID,b.name,!0):e.getModelVariableValue(e.activeModelID,b.name,!0),a},{}),l=f?f+"_"+e.refdesString:g.modelType,m=h.isInstanceVar?e.getInstanceVariableValue(e.activeModelID,h.name,!0):e.getModelVariableValue(e.activeModelID,h.name,!0);b.design.simulationController.changeSingleDeviceValue(g.deviceType,l,h.isInstanceVar?g.modelType+e.refdesString:null,{parameters:h.spiceParameters,variables:k},m,function(d){d||(h.isInstanceVar?b.changeInstanceVariable(c,a,h.name,i,h.synchronize):b.changeModelVariable(c,a,h.name,i))})}}()})}var v,w,x,y,z,A,B,C,D,E,F,G,H,I;return a("initializeCommands",t),a("updateToggleState",u),{setters:[function(a){v=a.default},function(a){w=a.default},function(a){x=a.isTemplateComponent},function(a){y=a.default},function(a){z=a.default},function(a){A=a.default},function(a){B=a.default},function(a){C=a.default},function(a){D=a.default},function(a){E=a.default}],execute:function(){a("moveSelectionCommand",F=null),a("ECommands",G=Object.freeze({C_DELETEOBJECT:"deleteobject",C_MOVESELECTION:"moveselection",C_ROTATEOBJECT:"rotateobject",C_FLOATINGROTATEOBJECT:"floatingrotateobject",C_FLIPOBJECTHORIZONTAL:"flipobjecthorizontal",C_FLOATINGFLIPOBJECTHORIZONTAL:"floatingflipobjecthorizontal",C_DUPLICATEOBJECT:"duplicateobject",C_WIREMOVE:"wiremove",C_TOGGLESTATE:"togglestate",C_WIREENDWITHCONNECTOR:"wireendwithconnector",C_WIREENDWITHGROUND:"wireendwithground",C_WIREENDWITHJUNCTION:"wireendwithjunction",C_ADDJUNCTION:"addjunction",C_ADDTEXTANNOTATION:"addtextannotation",C_ADDPROBE:"addprobe",C_ADDOBJECT:"addobject",C_ADDREFERENCEPROBE:"addreferenceprobe"})),a("ECommands",G),a("ECommandContexts",H=Object.freeze({CC_ADDOBJECT:"addobject",CC_ADDOBJECTFLOATING:"addobjectfloating",CC_ADDPROBEFLOATING:"addprobefloating",CC_ADDTEXTFLOATING:"addtextfloating",CC_MOVESELECTION:"moveselection",CC_MOVESELECTIONFLOATING:"moveselectionfloating",CC_ROTATEOBJECT:"rotateobject",CC_FLIPOBJECTHORIZONTAL:"flipobjecthorizontal",CC_DUPLICATEOBJECT:"duplicateobject",CC_DUPLICATEOBJECTFLOATING:"duplicateobjectfloating",CC_DUPLICATEFIXEDOBJECTFLOATING:"duplicatefixedobjectfloating",CC_SYMBOLCHANGE:"symbolchange",CC_MODELCHANGE:"modelchange",CC_WIREMOVE:"wiremove",CC_SIMULATION:"simulation",CC_EMBEDDED:"embedded",CC_WIRING:"wiring",CC_ADDJUNCTIONFLOATING:"addjunctionfloating",CC_ADDREFERENCEPROBE:"addreferenceprobe"})),a("ECommandContexts",H),I=void 0,a("moveSelectionCommand",F)}}}),a.register("92",["17f","3e"],function(a,b){"use strict";function c(a){var b=3.5,c=document.createElementNS(i,"path");c.setAttribute("d","M-"+b+" 0L0 "+b+"L"+b+" 0L0 -"+b+"z"),a.appendChild(c)}var d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){d=a.default},function(a){e=a.ECommandContexts}],execute:function(){f=void 0,g=void 0,h=void 0,i="http://www.w3.org/2000/svg",j=function(a,b){this.activeViewGetter=a,this.notifications=b,this.wireCommand=f,this.routerInitialized=!1,this.routerInfo={routeStartData:null,routeTargetData:null,routerBoundaries:null}},j.prototype.addLollipopsForComponent=function(a,b){var d=this;if(b.feedbackContent){var e=b.feedbackContent,f=e.querySelector("#lollipopContainer");f||(f=document.createElementNS(i,"g"),f.setAttribute("id","lollipopContainer"),e.appendChild(f)),a.pins&&function(){var e=document.createElementNS(i,"g");e.classList.add("lollipopComponent"),e.setAttribute("templateguid",a.templateGUID),a.pins.forEach(function(a){var d=document.createElementNS(i,"g");d.setAttribute("symbolpin",a.name),e.appendChild(d);var f=b.gridToSvg({x:a.connectionX,y:a.connectionY});d.setAttribute("transform","translate("+f.x+","+f.y+")"),d.classList.add("pinLollipop"),c(d)},d),f.appendChild(e)}()}},j.prototype.addLollipopsForJunction=function(a,b){if(b.feedbackContent){var d=b.feedbackContent,e=d.querySelector("#lollipopContainer");e||(e=document.createElementNS(i,"g"),e.setAttribute("id","lollipopContainer"),d.appendChild(e));var f=document.createElementNS(i,"g");f.classList.add("lollipopComponent"),f.setAttribute("templateguid",a.templateGUID),e.appendChild(f);var g=document.createElementNS(i,"g");f.appendChild(g);var h=b.gridToSvg({x:a.point.x,y:a.point.y});g.setAttribute("transform","translate("+h.x+","+h.y+")"),g.classList.add("junctionLollipop"),g.classList.add("wiringTarget"),c(g)}},j.prototype.setWiringTargetLollipopForJunction=function(a,b,c){if(a.feedbackContent){var d=a.feedbackContent.querySelector("#lollipopContainer"),e=d.querySelector('[templateguid="'+b+'"] .junctionLollipop');e&&(c?e.classList.add("wiringTarget"):e.classList.remove("wiringTarget"))}},j.prototype.setWiringTargetLollipopForPin=function(a,b,c,d){if(a.feedbackContent){var e=a.feedbackContent.querySelector("#lollipopContainer"),f=e.querySelector('[templateguid="'+b+'"]');if(f){var g=f.querySelector('[symbolpin="'+c+'"]');g&&(d?g.classList.add("wiringTarget"):g.classList.remove("wiringTarget"))}}},j.prototype.hideLollipopsForTemplateObject=function(a,b){if(a.feedbackContent){var c=a.feedbackContent.querySelector("#lollipopContainer"),d=c?c.querySelector('[templateguid="'+b+'"]'):null;d&&d.classList.add("hidden")}},j.prototype.hideSingleLollipop=function(a,b,c){if(a.feedbackContent){var d=a.feedbackContent.querySelector("#lollipopContainer"),e=d.querySelector('[templateguid="'+b+'"]');if(e){var f=e.querySelector('[symbolpin="'+c+'"]');f&&f.classList.add("hidden")}}},j.prototype.showSingleLollipop=function(a,b,c){if(a.feedbackContent){var d=a.feedbackContent.querySelector("#lollipopContainer"),e=d.querySelector('[templateguid="'+b+'"]');if(e){e.classList.contains("hidden")&&e.classList.remove("hidden");var f=e.querySelector('[symbolpin="'+c+'"]');f&&f.classList.contains("hidden")&&f.classList.remove("hidden")}}},j.prototype.resetLollipopPositionForComponent=function(a,b){if(b.feedbackContent){var c=b.sheetTemplateController.sheetTemplate,d=b.feedbackContent.querySelector("#lollipopContainer"),e=c.getObject(a);d&&e.pins&&function(){var c=d.querySelector('[templateguid="'+a+'"]');c&&(e.pins.forEach(function(a){var d=c.querySelector('[symbolpin="'+a.name+'"]');if(d){var e=b.gridToSvg({x:a.connectionX,y:a.connectionY});d.setAttribute("transform","translate("+e.x+","+e.y+")")}}),c.classList.remove("hidden"))}()}},j.prototype.clearLollipopsForObjects=function(a,b){b.feedbackContent&&function(){var c=b.feedbackContent.querySelector("#lollipopContainer");c&&a.forEach(function(a){var b=c.querySelector('[templateguid="'+a+'"]');b&&b.parentNode.removeChild(b)})}()},j.prototype.isPinLollipop=function(a){return a.classList.contains("pinLollipop")},j.prototype.isJunctionLollipop=function(a){return a.classList.contains("junctionLollipop")},k=function(a,b){return new j(a,b)},j.prototype.drawRouterMap=function(a,b){var c=document.createElementNS(i,"g");b.feedbackContent.appendChild(c),c.setAttribute("id","routermap");for(var d=0;d<a.width;++d)for(var e=0;e<a.height;++e){var f=a.getContent(d,e);if(f!=a.CONTENT.m_cellFree){var g=b.gridToSvg({x:d,y:e}),h=document.createElementNS(i,"line");c.appendChild(h),h.setAttribute("x1",g.x-5),h.setAttribute("y1",g.y),h.setAttribute("x2",g.x+5),h.setAttribute("y2",g.y);var j=document.createElementNS(i,"line");c.appendChild(j),j.setAttribute("x1",g.x),j.setAttribute("y1",g.y-5),j.setAttribute("x2",g.x),j.setAttribute("y2",g.y+5);var k="black",l="black";f==a.CONTENT.m_cellObstFull?(k="red",l="red"):f==a.CONTENT.m_cellObstSoft?(k="yellow",l="yellow"):f==a.CONTENT.m_cellObstHor?(k="pink",l="green"):f==a.CONTENT.m_cellObstVert?(k="green",l="pink"):f==a.CONTENT.m_cellObstJunc?(k="purple",l="purple"):f==a.CONTENT.m_cellObstHorPin?(k="blue",l="green"):f==a.CONTENT.m_cellObstVertPin&&(k="green",l="blue"),h.style.stroke=k,j.style.stroke=l}}},j.prototype.clearRouterMap=function(a){var b=a.feedbackContent.querySelector("#routermap");b&&b.parentNode.removeChild(b)},l=function(a,b,c,i,j){f=b.createCommandObject("wire",function(b,e){var f=d(e.wiringController,e.cancelInterface,e,i);if(c.registerTool(f)){var g=function(){var b=a();return b.selectioninterface.clearSelection(b),b.viewObject.listeners.notifyListeners(b.viewObject.viewEvents.USER_ACTION_STARTED,{viewobject:b.viewObject,command:"wire"}),{v:function(a){b.viewObject.listeners.notifyListeners(b.viewObject.viewEvents.USER_ACTION_ENDED,{viewobject:b.viewObject,command:"wire"}),a&&c.cancelAction(),c.unregisterLastTool()}}}();if("object"==typeof g)return g.v}}),f.enabled=!0,f.contextName="wiring",f.contextHelper.contextHidden="all",f.contextHelper.contextDisable=[e.CC_SIMULATION,e.CC_EMBEDDED],g=function(){return d(null,null,null,i,j,b,{isAutoConnect:!0})},h=function(a,c,e){return d(a,c,e,i,j,b,{isAutoConnect:!1})}},m={moduleInit:l,create:k,get createAutoConnectSubCommand(){return g},get createWiringSubCommand(){return h}},a("default",m)}}}),a.register("a1",["2d","4f","3c","17e","29","92"],function(a,b){"use strict";function c(a,b,c,d){var e=a;return b.forEach(function(a,b){var f="\\{"+b+"\\}",g=new RegExp(f,"g");if(a.type===k.VARIABLE&&"component"!==a.name||a.type===k.PARAM||a.type===k.TOGGLEPARAM||a.type===k.TOGGLEVARIABLE){var h=void 0;if(c.hasOwnProperty(a.name))h=c[a.name];else{if(!a.default)throw new Error("No value or default value for variable with name: "+a.name);h=a.default}if(a.type===k.PARAM){if(!a.paramName)throw new Error("parameter has no param name");h=a.paramName+"="+h,e=e.replace(g,h)}else if(a.type===k.TOGGLEPARAM){if(!a.paramName)throw new Error("parameter has no param name");h=!1===h?"":a.paramName+"="+h,e=e.replace(g,h)}else a.type===k.TOGGLEVARIABLE?(h="1"===h||!0===h||1===h?a.default:a.disabledValue,e=e.replace(g,h)):e=e.replace(g,h)}else if(a.type===k.PORT){if(!d||!d.hasOwnProperty(a.name))throw new Error("no port value for port: "+a.name);e=e.replace(g,d[a.name])}}),e}function d(a,b,d){function m(a,b,c){a.cachedComponentBlueprints.set(b,c)}function n(a,b,c){a.cachedModelBlueprints.set(b,c)}function o(a,b,c){a.cachedSymbolBlueprints.set(b,c)}function p(a,b,c){a.cachedPackageBlueprints.set(b,c)}function q(b,c,d,e){var f=arguments.length>4&&void 0!==arguments[4]&&arguments[4],g=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],h=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];ca(b,c)?d&&d(b.cachedSymbolBlueprints.get(c)):a.loadSymbolResource(c,function(a){a&&(B(a),g&&o(b,c,a)),d(a)},f,h)}function r(a){return ca(ba,a)?ba.cachedSymbolBlueprints.get(a).fragment:null}function s(a){return ca(ba,a)?ba.cachedSymbolBlueprints.get(a).svgSymbol:null}function t(b,c,d,e){var f=arguments.length>4&&void 0!==arguments[4]&&arguments[4],g=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];da(b,c)?d&&d(b.cachedModelBlueprints.get(c)):(e(),a.loadModelResource(c,function(a){a&&(A(a),g&&n(b,c,a)),d(a)},f))}function u(b,c,d,e){var f=arguments.length>4&&void 0!==arguments[4]&&arguments[4],g=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];ea(b,c)?d&&d(b.cachedPackageBlueprints.get(c)):(e(),a.loadPackageResource(c,function(a){a&&g&&p(b,c,a),d(a)},f))}function v(b,c,d){a.loadDesktopExportResource(b,c,d)}function w(a,b,c){var d=this.getRawSymbolFromCache(c);if(d){d=d.cloneNode(!0);for(var e=d.querySelectorAll("[oecl\\:pinid]"),f=0;f<e.length;f++){var g=e[f],h=g.querySelector('[oecl\\:placeholder="symbolPin"]');if(h){var i=h.querySelector("tspan");i&&(i.firstChild.data=this.getSymbolPinNameForSymbolPinID(a.oeclComponent,b,g.getAttribute("oecl:pinid"),c))}}}return d}function x(a,b,c){var d=this.getRawSymbolFromCache(c);if(d){d=d.cloneNode(!0);for(var e=d.querySelectorAll("[oecl\\:pinid]"),f=0;f<e.length;f++){var g=e[f],h=g.querySelector('[oecl\\:placeholder="symbolPin"]');if(h){var i=h.querySelector("tspan");i&&(i.firstChild.data=this.getSymbolPinNameForSymbolPinID(a.oeclComponent,b,g.getAttribute("oecl:pinid"),c),h.classList.remove("hidden"))}}}return d}function y(a){return fa(ba,a)?z(a,ba,!1):null}function z(a,b,c){var d=b.cachedOeclComponent.has(a)?b.cachedOeclComponent.get(a):null;return d||function(){var e=b.cachedComponentBlueprints.get(a),f=new Set,g=new Set,h=new Set;d={componentBlueprints:[e],simModelBlueprints:[],symbolBlueprints:[]},e.modelConfigurations&&e.modelConfigurations.forEach(function(a){a.sections.forEach(function(a){if(!f.has(a.modelRef.id)){var c=b.cachedModelBlueprints.get(a.modelRef.id);c&&d.simModelBlueprints.push(c),f.add(a.modelRef.id)}})}),e.symbolConfigurations.forEach(function(a){a.sections.forEach(function(a){if(!g.has(a.id)){var c=b.cachedSymbolBlueprints.get(a.id);c&&d.symbolBlueprints.push(c),g.add(a.id)}})}),e.packageConfigurations&&(d.packageBlueprints=[],e.packageConfigurations.forEach(function(a){if(!h.has(a.id)){var c=b.cachedPackageBlueprints.get(a.manufacturerPackageRef);c&&d.packageBlueprints.push(c),h.add(a.id)}})),d&&!c&&b.cachedOeclComponent.set(a,d)}(),d}function A(a){a.instances.forEach(function(a){a.variables&&a.variables.forEach(function(a){a.isInstanceVar=!0})})}function B(a){if(a.svg){var b=a.svg.replace(/stroke-width="1"/g,"").replace(/stroke-width="0.5"/g,"").replace(/stroke="black"/g,"").replace(/fill="black"/g,""),c=document.createElement("div");c.innerHTML=b;var d=c.getElementsByTagName("svg")[0];d&&(a.svgSymbol=d,a.fragment=d.querySelector("g"))}}function C(a){var b=void 0,c=ba.cachedModelBlueprints.get(a);return c&&(b=c.instances[0]),b}function D(a){var b=void 0,c=ba.cachedModelBlueprints.get(a);return c&&(b=c.definitions[0]),b}function E(a){var b=null;return a&&(b={},a.simModelBlueprints.forEach(function(a){b[a.id]={},C(a.id).variables.forEach(function(c){if(!1===R(c.name)&&c.type!==k.PORT){b[a.id][c.name]={string:void 0!==c.default?c.default:""};var d=f(b[a.id][c.name].string);isNaN(d)||(b[a.id][c.name].value=d),c.type!==k.TOGGLEPARAM&&c.type!==k.TOGGLEVARIABLE||(b[a.id][c.name].state=c.isChecked)}})})),b}function F(a){var b=null;return a&&(b={},a.simModelBlueprints.forEach(function(a){b[a.id]={},D(a.id).variables.forEach(function(c){if(!1===R(c.name)&&c.type!==k.PORT){b[a.id][c.name]={string:void 0!==c.default?c.default:""};var d=f(b[a.id][c.name].string);isNaN(d)||(b[a.id][c.name].value=d),c.type!==k.TOGGLEPARAM&&c.type!==k.TOGGLEVARIABLE||(b[a.id][c.name].state=c.isChecked)}})})),b}function G(a){return ba.cachedModelBlueprints.get(a)}function H(a,b){var c=G(a),d=null;if(c)for(var e=0;e<c.definitions[0].variables.length;++e)if(c.definitions[0].variables[e].name===b){d=c.definitions[0].variables[e];break}return d}function I(a,b){var c=G(a),d=null;if(c)for(var e=0;e<c.instances[0].variables.length;++e)if(c.instances[0].variables[e].name===b){d=c.instances[0].variables[e];break}return d}function J(a,b,c){var d=ba.cachedModelBlueprints.get(a);d&&d.definitions[0].variables.forEach(b,c)}function K(b,c,d,e){var f=!e;a.loadComponentResource(b,function(a){a?function(){f&&m(d,b,a);var g=[],h=[],i=[];a.modelConfigurations&&a.modelConfigurations.forEach(function(a){a.sections.forEach(function(a){var b=a.modelRef.id;h.find(function(a){return a===b})||da(d,b)||h.push(b)})}),a.symbolConfigurations&&a.symbolConfigurations.forEach(function(a){a.sections.forEach(function(a){var b=a.id;g.find(function(a){return a===b})||ca(d,b)||g.push(b)})}),a.packageConfigurations&&a.packageConfigurations.forEach(function(a){var b=a.manufacturerPackageRef;i.find(function(a){return a===b})||ea(d,b)||i.push(b)});var j=g.length+h.length+i.length;0===j?c(z(a.id,d,!1)):function(){for(var b=0,k=!1,l=function(e){e||(k=!0),++b===j&&c(!f||k?null:z(a.id,d,!1))};g.length>0;){var m=g.pop();q(d,m,function(a){l(a)},function(){},e,f)}for(;h.length>0;){var n=h.pop();t(d,n,function(a){l(a)},function(){},e,f)}for(;i.length>0;){var o=i.pop();u(d,o,function(a){l(a)},function(){},e,f)}}()}():c(null)},e)}function L(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3];fa(ba,a)?b&&b(z(a,ba,!1)):(c(),K(a,b,ba,d))}function M(a){var b=function(a,b){a.forEach(function(a,c){b.set(c,a)})};b(a.cachedComponentBlueprints,ba.cachedComponentBlueprints),b(a.cachedModelBlueprints,ba.cachedModelBlueprints),b(a.cachedSymbolBlueprints,ba.cachedSymbolBlueprints),b(a.cachedPackageBlueprints,ba.cachedPackageBlueprints)}function N(a,b,c){var d=new Set;a.componentBlueprints[0].modelConfigurations.forEach(function(a){a.sections.forEach(function(a){a.sectionName===b&&a.modelRef.id===c&&a.connPortMap.forEach(function(a){d.add(a.connName)})})});var f=[];return a.componentBlueprints[0].symbolConfigurations.forEach(function(a){a.sections.forEach(function(a){var b=!0,c=new Set;a.connPinMap.forEach(function(a){c.add(a.connName)}),d.forEach(function(a){!1===c.has(a)&&(b=!1)}),b&&f.push(a.id)})}),e.uniq(f)}function O(a,b){return a.simModelBlueprints.filter(function(a){return a.manufacturer===b||!a.manufacturer}).map(function(a){return a.id})}function P(a,b){return a.componentBlueprints[0].packageConfigurations.filter(function(a){return a.manufacturer===b})}function Q(a){var b=[];return C(a).variables.forEach(function(a){a.type==k.PORT&&b.push(a)}),b}function R(a){return"model"===a||"refdes"===a||"component"===a}function S(a){return!1===R(a.name)&&a.type!==k.PORT}function T(a,b,c){for(var d=arguments.length,e=Array(d>3?d-3:0),f=3;f<d;f++)e[f-3]=arguments[f];aa.doMessage({type:a?aa.notifications.ETypes.NT_WARNING:aa.notifications.ETypes.NT_INFO,message:i.i18n.translate(c).fetch(e),toast:!0,group:{name:"component_update"+b.getTime(),info:{displayName:i.i18n.translate("Component update").fetch(),timestamp:new Date(b.getTime())}}})}function U(a,b,c){var d=b.componentBlueprints.filter(function(b){return!a.componentBlueprints.find(function(a){return b.id===a.id})}),e=b.packageBlueprints.filter(function(b){return!a.packageBlueprints.find(function(a){return b.id===a.id})}),f=b.simModelBlueprints.filter(function(b){return!a.simModelBlueprints.find(function(a){return b.id===a.id})}),g=b.symbolBlueprints.filter(function(b){return!a.symbolBlueprints.find(function(a){return b.id===a.id})});d.length&&function(){var a="Component blue prints cannot be added or removed. There can only be one component blue print per oecl component file and that one is fixed for that file. Component blue prints can only be changed. Trying to add component blue print(s) '"+d.map(function(a){return"name="+a.name+";id="+a.id+";revision="+a.strRevisionDate}).join(", ")+"'",b=new Set(c);d.forEach(function(c){window.multisim.versionInfo.isProduction&&b.has(c.id)?window.multisim.silentFail(new Error(a)):console.warn(a)})}(),e.forEach(function(b){a.packageBlueprints.push(b),ea(ba,b.id)||ba.cachedPackageBlueprints.set(b.id,b)}),f.forEach(function(b){a.simModelBlueprints.push(b),da(ba,b.id)||ba.cachedModelBlueprints.set(b.id,b)}),g.forEach(function(b){a.symbolBlueprints.push(b),ca(ba,b.id)||(b&&B(b),o(ba,b.id,b))})}function V(a,b,c,d,e,f){var g=!1,i=!1;return b.sheets.forEach(function(b){var j=b.sheetTemplateController.sheetTemplate.getObject(a.templateGUID),k=c?f:a.activeSymbolID;if(e||h(j.symbol)!==h(r(k))){try{var l=Array.from(j.symbol.querySelectorAll("[oecl\\:pinid]")),m=Array.from(r(k).querySelectorAll("[oecl\\:pinid]")),n=l.map(function(a){return h(a)}).join(),o=m.map(function(a){return h(a)}).join();i=n!==o}catch(a){i=!0}g=!0,b.sheetTemplateController.componentController.changeComponentSymbol({templateComponent:j,newSymbolID:k,oldComponentBlueprint:d})}}),{symbolChanged:g,topologyChanged:i}}function W(a,b,c,d,e){function f(a){return a.length?"<table><tbody><tr>"+a.map(function(a){return"<td>"+a.join("</td><td>")+"</td>"}).join("</tr><tr>")+"</tr></tbody></table>":""}for(var h=g(a.designComponent.refDes,a.designComponent.isMultiSection()?a.sectionName:"",{}),i=function(b){var c=a.designComponent.oeclComponentBlueprint.packageConfigurations[b];c&&a.designComponent.oeclComponent.packageBlueprints.find(function(a){return a.id===c.manufacturerPackageRef})||a.designComponent.oeclComponentBlueprint.packageConfigurations.splice(b,1)},j=a.designComponent.oeclComponentBlueprint.packageConfigurations.length-1;j>=0;j--)i(j);var k=a.activePackageID?a.designComponent.oeclComponentBlueprint.packageConfigurations.find(function(b){return b.id===a.activePackageID}):void 0;if(!k){var l=a.activePackageID?b.packageConfigurations.find(function(b){return b.id===a.activePackageID}):void 0;a.designComponent.oeclComponentBlueprint.packageConfigurations.length?(k=a.designComponent.oeclComponentBlueprint.packageConfigurations[0],a.activePackageID=k.id,l?T(!1,e,"A component update caused a new manufacturer and part number to be selected for component %1$s. The previous manufacturer was '%2$s' and the part number was '%3$s'",h,l.manufacturer,l.partNumber):T(!1,e,"A component update caused a new manufacturer and part number to be selected for component %1$s.",h)):a.activePackageID&&(a.activePackageID="",l?T(!1,e,"A component update removed all manufacturer information from component %1$s. The previous manufacturer was '%2$s' and the part number was '%3$s'",h,l.manufacturer,l.partNumber):T(!1,e,"A component update removed all manufacturer information from component %1$s.",h))}for(var m=a.designComponent.oeclComponentBlueprint.modelConfigurations.length-1;m>=0;m--){for(var n=a.designComponent.oeclComponentBlueprint.modelConfigurations[m],o=function(b){var c=n.sections[b];c&&a.designComponent.oeclComponent.simModelBlueprints.find(function(a){return a.id===c.modelRef.id&&a.strRevisionDate===c.modelRef.strDate})||n.sections.splice(b,1)},p=n.sections.length-1;p>=0;p--)o(p);n.sections.length||a.designComponent.oeclComponentBlueprint.modelConfigurations.splice(m,1)}var q=a.activeModelID?a.designComponent.oeclComponentBlueprint.modelConfigurations.find(function(b){return!!b.sections.find(function(b){return b.modelRef.id===a.activeModelID})}):void 0;if(!(q?q.sections.find(function(b){return b.modelRef.id===a.activeModelID}):void 0)){var r=a.activeModelID?b.modelConfigurations.find(function(b){return!!b.sections.find(function(b){return b.modelRef.id===a.activeModelID})}):void 0,s=r?r.sections.find(function(b){return b.modelRef.id===a.activeModelID}):void 0,t=void 0;s&&(t=ba.cachedModelBlueprints.get(s.modelRef.id))&&t.strRevisionDate!==s.modelRef.strDate&&(s=void 0),a.activeModelID="",k&&(a.activeModelID=O(a.designComponent.oeclComponent,k.manufacturer)[0]),!a.activeModelID&&a.designComponent.oeclComponent.simModelBlueprints.length&&(a.activeModelID=a.designComponent.oeclComponent.simModelBlueprints[0].id),a.activeModelID?t?T(!0,e,"A component update caused a new simulation model to be selected for component %1$s. The previous model was '%2$s'",h,t.name):T(!0,e,"A component update caused a new simulation model to be selected for component %1$s.",h):t?T(!0,e,"A component update removed all model information from component %1$s. The previous model was '%2$s'",h,t.name):T(!0,e,"A component update removed all model information from component %1$s.",h)}var u=E(c),v=F(c),w=[],x=void 0;for(x in a.modelInstanceData)if(a.modelInstanceData.hasOwnProperty(x)){var y=a.modelInstanceData[x];if(u.hasOwnProperty(x)){var z=u[x];for(var A in y)y.hasOwnProperty(A)&&(z.hasOwnProperty(A)?z[A]=y[A]:x===a.activeModelID&&T(!0,e,"A component update removed the variable %1$s from component %2$s. Check the component to make sure the settings are still correct. The previous value for this variable was %3$s.",A,h,y[A].string||y[A].value))}else if(x===a.activeModelID){for(var B in y)y.hasOwnProperty(B)&&w.push([B,y[B].string||y[B].value]);T(!0,e,"A component update removed variables for component %1$s. The previous variables were %2$s",h,f(w))}}a.modelInstanceData=u;for(var G in a.modelInstanceData)if(a.modelDefinitionData.hasOwnProperty(G)){var H=a.modelDefinitionData[G];if(v.hasOwnProperty(G)){var I=v[G];for(var J in H)H.hasOwnProperty(J)&&(I.hasOwnProperty(J)?I[J]=H[J]:G===a.activeModelID&&T(!0,e,"A component update removed the variable %1$s from component %2$s. Check the component to make sure the settings are still correct. The previous value for this variable was %3$s.",J,h,H[J].string||H[J].value))}else if(G===a.activeModelID){for(var K in H)H.hasOwnProperty(K)&&w.push([K,H[K].string||H[K].value]);T(!0,e,"A component update removed variables for component %1$s. The previous variables were %2$s",h,f(w))}}a.modelDefinitionData=v;for(var L=C(a.activeModelID),M=D(a.activeModelID),N=a.designComponent.oeclComponentBlueprint.symbolConfigurations.length-1;N>=0;N--){for(var P=a.designComponent.oeclComponentBlueprint.symbolConfigurations[N],Q=function(b){var c=P.sections[b];c&&a.designComponent.oeclComponent.symbolBlueprints.find(function(a){return a.id===c.id})||P.sections.splice(b,1)},R=P.sections.length-1;R>=0;R--)Q(R);P.sections.length||a.designComponent.oeclComponentBlueprint.symbolConfigurations.splice(N,1)}var S=L.variables.filter(function(a){return a.displayOnSchematic}).concat(M.variables.filter(function(a){return a.displayOnSchematic}));S.push({name:"refdes"});var U=a.children.filter(function(a){return!S.find(function(b){return b.name===a.variableName})});d.sheets.forEach(function(a){a.sheetTemplateController.componentController.removeTexts(U)});var V=S.filter(function(b){return!a.children.find(function(a){return a.variableName===b.name})});d.sheets.forEach(function(b){b.sheetTemplateController.componentController.addTexts(a,V)})}function X(a){var b=new Map;return a.forEach(function(a){var c=a.activeSymbolID;b.has(c)?b.get(c).push(a):b.set(c,[a])}),b}function Y(a,b,c,d,e,f,h){var i=a.componentBlueprints.map(function(a){return{fileItem:a,serverItem:b.componentBlueprints.find(function(b){return a.id===b.id})}}),j=a.packageBlueprints.map(function(a){return{fileItem:a,serverItem:b.packageBlueprints.find(function(b){return a.id===b.id})}}),k=a.simModelBlueprints.map(function(a){return{fileItem:a,serverItem:b.simModelBlueprints.find(function(b){return a.id===b.id})}}),l=i.filter(function(a){return a.serverItem&&a.fileItem.strRevisionDate!==a.serverItem.strRevisionDate||-1!==f.indexOf(a.fileItem)}),m=j.filter(function(a){return a.serverItem&&a.fileItem.revisionDate!==a.serverItem.revisionDate}),n=k.filter(function(a){return a.serverItem&&a.fileItem.strRevisionDate!==a.serverItem.strRevisionDate}),p=a.symbolBlueprints.map(function(a){return{fileItem:a,serverItem:b.symbolBlueprints.find(function(b){return a.id===b.id})}}),q=p.filter(function(a){return!a.serverItem||a.serverItem&&a.fileItem.strRevisionDate!==a.serverItem.strRevisionDate}),r=X(c),s=l.length|m.length|n.length|q.length;m.forEach(function(b){ba.cachedPackageBlueprints.set(b.serverItem.id,b.serverItem);var c=a.packageBlueprints.findIndex(function(a){return a.id===b.serverItem.id});-1!==c&&(a.packageBlueprints[c]=b.serverItem)}),n.forEach(function(b){ba.cachedModelBlueprints.set(b.serverItem.id,b.serverItem);var d=a.simModelBlueprints.findIndex(function(a){return a.id===b.serverItem.id});-1!==d&&function(){var f=!1;try{var h=JSON.stringify(a.simModelBlueprints[d].definitions.map(function(a){return a.definition})),i=JSON.stringify(b.serverItem.definitions.map(function(a){return a.definition}));f=h!==i}catch(a){f=!0}a.simModelBlueprints[d]=b.serverItem,c.forEach(function(b){if(b.activeModelID===a.simModelBlueprints[d].id){var c=g(b.designComponent.refDes,b.designComponent.isMultiSection()?b.sectionName:"",{});T(f,e,"A component update replaced the model for component %1$s with a newer version. Check your simulation results.",c)}})}()});var t=[];return l.forEach(function(f){ba.cachedComponentBlueprints.set(f.serverItem.id,f.serverItem);var g=a.componentBlueprints.findIndex(function(a){return a.id===f.serverItem.id});if(-1!==g){JSON.stringify(a.componentBlueprints[g].symbolConfigurations)!==JSON.stringify(f.serverItem.symbolConfigurations)&&f.serverItem.symbolConfigurations.forEach(function(a){a&&a.sections&&a.sections.length>0&&a.sections.forEach(function(a){var b=a.id;if(b){if(q.findIndex(function(a){return a.serverItem&&a.serverItem.id===b})<0){var c=p.findIndex(function(a){return a.serverItem&&a.serverItem.id===b});if(-1!==c){var d=p[c];d&&(q.push(d),t.push(f.fileItem.id))}}}})}),a.componentBlueprints[g]=f.serverItem,c.forEach(function(a){W(a,f.fileItem,b,d,e)})}}),h(),q.forEach(function(b){b.serverItem&&(B(b.serverItem),o(ba,b.fileItem.id,b.serverItem));var c=b.fileItem.id,f=a.symbolBlueprints.findIndex(function(a){return a.id===c});-1!==f&&(b.serverItem?a.symbolBlueprints[f]=b.serverItem:a.symbolBlueprints.splice(f,1));var h=r.get(c);h&&h.length>0&&h.forEach(function(a){-1===l.findIndex(function(b){return b.fileItem.id===a.designComponent.oeclComponent.componentBlueprints[0].id})&&console.log(a.designComponent.oeclComponent.componentBlueprints[0].id+" had an update but was not found in update list");var c=i.find(function(b){return b.fileItem.id===a.designComponent.oeclComponent.componentBlueprints[0].id}),f=c?c.fileItem:void 0,h=c?c.serverItem:void 0,j=h&&h.symbolConfigurations&&h.symbolConfigurations[0]&&h.symbolConfigurations[0].sections&&h.symbolConfigurations[0].sections[0]?h.symbolConfigurations[0].sections[0].id:null,k=-1!==t.findIndex(function(a){return a===f.id}),m=V(a,d,void 0===b.serverItem,f,k,j);if(m.symbolChanged){var n=g(a.designComponent.refDes,a.designComponent.isMultiSection()?a.sectionName:"",{});b.serverItem?T(m.topologyChanged,e,"A component update replaced the symbol for component %1$s with a newer version. Check your schematic.",n):T(m.topologyChanged,e,"A component update removed the symbol for component %1$s, so it was replaced with a default version. Check your schematic.",n)}})}),s}function Z(a,b,c,d){var e=[],f=a.componentBlueprints.filter(function(a){return!b.componentBlueprints.find(function(b){return a.id===b.id})}),g=a.packageBlueprints.filter(function(a){return!b.packageBlueprints.find(function(b){return a.id===b.id})}),h=a.simModelBlueprints.filter(function(a){return!b.simModelBlueprints.find(function(b){return a.id===b.id})});return f.length&&function(){var b="We cannot remove a component blue print, component blue prints can only be modified. We were trying to remove "+f.map(function(a){return"name="+a.name+";id="+a.id+";revision="+a.strRevisionDate}).join(","),c=new Set(d);f.forEach(function(d){var e=a.componentBlueprints.indexOf(d);-1!==e&&c.has(d.id)?(a.componentBlueprints.splice(e,1),ba.cachedComponentBlueprints.delete(d.id),window.multisim.versionInfo.isProduction&&window.multisim.silentFail(new Error(b))):console.warn(b)})}(),g.forEach(function(b){var d=c.filter(function(a){return a.designComponent.oeclComponentBlueprint.packageConfigurations.find(function(a){return b.id===a.manufacturerPackageRef})}),f=a.packageBlueprints.indexOf(b);-1!==f&&a.packageBlueprints.splice(f,1),d.forEach(function(a){-1===e.indexOf(a.designComponent.oeclComponentBlueprint)&&e.push(a.designComponent.oeclComponentBlueprint)})}),h.forEach(function(b){var d=c.filter(function(a){return a.designComponent.oeclComponentBlueprint.modelConfigurations.find(function(a){return a.sections.find(function(a){return a.modelRef.id===b.id&&a.modelRef.strDate===b.strRevisionDate})})}),f=a.simModelBlueprints.indexOf(b);-1!==f&&a.simModelBlueprints.splice(f,1),d.forEach(function(a){-1===e.indexOf(a.designComponent.oeclComponentBlueprint)&&e.push(a.designComponent.oeclComponentBlueprint)})}),e}function $(a,b,c){d?c():function(){var d=new Date,e=!1,f=j.createAutoConnectSubCommand();aa.clearGroups();var h=b.activeDesign.designComponents.reduce(function(a,b){return a.has(b.oeclComponent)?a.get(b.oeclComponent).push(b):a.set(b.oeclComponent,[b]),a},new Map);a.forEach(function(a){return h.set(z(a,ba,!0),[])});var k={cachedComponentBlueprints:new Map,cachedModelBlueprints:new Map,cachedSymbolBlueprints:new Map,cachedPackageBlueprints:new Map,cachedOeclComponent:new Map},l=0;h.size?h.forEach(function(j,m){K(m.componentBlueprints[0].id,function(n){n&&window.multisim.tryCatchAll(function(){var c=[];j.forEach(function(a){a.sectionInstances.forEach(function(a){c.push(a)})}),U(m,n,a);var h=Z(m,n,c,a);h.length&&(e=!0),Y(m,n,c,b,d,h,function(){return M(k)})&&(e=!0),b.sheets.forEach(function(a){c.forEach(function(b){if(f.checkPinPositionAfterOrienting(b.templateGUID,a.sheetTemplateController,!0)){var c=g(b.designComponent.refDes,b.designComponent.isMultiSection()?b.sectionName:"",{});aa.doMessage({type:aa.notifications.ETypes.NT_ERROR,message:i.i18n.translate("The component %1$s has pins positioned such that they appear to make valid connections, consider repositioning the component.").fetch(c),toast:!0,group:{name:"component_update"+d.getTime(),info:{displayName:i.i18n.translate("Component update").fetch(),timestamp:new Date(d.getTime())}}})}})})}),++l===h.size&&c(e)},k)}):c()}()}function _(a){var b=!1;return Q(a).forEach(function(a){(a.mode?a.mode:l.ANALOG)==l.DIGITAL&&(b=!0)}),b}var aa=b,ba={cachedComponentBlueprints:new Map,cachedModelBlueprints:new Map,cachedSymbolBlueprints:new Map,cachedPackageBlueprints:new Map,cachedOeclComponent:new Map},ca=function(a,b){return a.cachedSymbolBlueprints.has(b)},da=function(a,b){return a.cachedModelBlueprints.has(b)},ea=function(a,b){return a.cachedPackageBlueprints.has(b)},fa=function(a,b){var c=a.cachedComponentBlueprints.has(b);if(c){var d=a.cachedComponentBlueprints.get(b),e=!0;d.modelConfigurations&&d.modelConfigurations.forEach(function(b){b.sections.forEach(function(b){var c=b.modelRef.id;da(a,c)||(e=!1)})}),d.symbolConfigurations&&d.symbolConfigurations.forEach(function(b){b.sections.forEach(function(b){var c=b.id;ca(a,c)||(e=!1)})}),d.packageConfigurations&&d.packageConfigurations.forEach(function(b){var c=b.manufacturerPackageRef;ea(a,c)||(e=!1)}),c=e}return c},ga=function(){ba.cachedComponentBlueprints.clear(),ba.cachedOeclComponent.clear(),ba.cachedModelBlueprints.clear(),ba.cachedSymbolBlueprints.clear(),ba.cachedPackageBlueprints.clear()},ha=function(a){var b=!1;if(!fa(ba,a))throw new Error("Component with oecl ID: "+a+" is not cached.");var c=ba.cachedComponentBlueprints.get(a);return c&&c.sections.length>1&&(b=!0),b},ia=function(a){var b=[],c=a.componentBlueprints[0].packageConfigurations;return c&&c.length>0&&c.forEach(function(a){b.find(function(b){return b.manufacturer===a.manufacturer})||b.push({packageID:a.id,manufacturer:a.manufacturer})}),b},ja=function(a){var b=a.componentBlueprints[0].customData;return b?b.Description:""},ka=function(a,b,c,d,f){var g=void 0;return a&&a.componentBlueprints.length>0&&function(){var h=[];a.componentBlueprints[0].modelConfigurations.forEach(function(a){a.sections.forEach(function(a){a.sectionName===b&&a.modelRef.id===d&&h.push(a)})}),h=e.uniq(h);var i=[];a.componentBlueprints[0].symbolConfigurations.forEach(function(a){a.sections.forEach(function(a){a.sectionName===b&&a.id===f&&i.push(a)})}),i=e.uniq(i),h.length&&i.length&&function(){var a=h[0].connPortMap.filter(function(a){return a.portName===c});if(1===a.length){var b=i[0].connPinMap.filter(function(b){return b.connName===a[0].connName});1===b.length&&(g=b[0].symbolPinID)}}()}(),g},la=function(a,b,c,d){var f=void 0;return a&&a.componentBlueprints.length>0&&function(){var g=[];if(a.componentBlueprints[0].symbolConfigurations.forEach(function(a){a.sections.forEach(function(a){a.sectionName===b&&a.id===d&&(e.find(g,function(a){return a.sectionName===b&&a.id===d})||g.push(a))})}),1===g.length){var h=g[0].connPinMap.filter(function(a){return a.symbolPinID===c});h&&1===h.length&&(f=h[0].displayName)}}(),f},ma=function(a,b,c,d){var f=void 0;return a&&function(){var g=[];if(a.symbolConfigurations.forEach(function(a){a.sections.forEach(function(a){a.sectionName===b&&a.id===c&&(e.find(g,function(a){return a.sectionName===b&&a.id===c})||g.push(a))})}),1===g.length){var h=g[0].connPinMap.filter(function(a){return a.symbolPinID===d});h&&1===h.length&&(f=h[0].connName)}}(),f},na=function(a,b,c,d){return a&&a.componentBlueprints.length>0?ma(a.componentBlueprints[0],b,c,d):void 0},oa=function(a,b,c,d){var f=void 0;return a&&a.componentBlueprints.length>0&&function(){var g=[];if(a.componentBlueprints[0].symbolConfigurations.forEach(function(a){a.sections.forEach(function(a){a.sectionName===b&&a.id===c&&(e.find(g,function(a){return a.sectionName===b&&a.id===c})||g.push(a))})}),1===g.length){var h=g[0].connPinMap.filter(function(a){return a.connName===d});h&&1===h.length&&(f=h[0].symbolPinID)}}(),f},pa=function(a,b,c,d,f){var g=void 0;return a&&a.componentBlueprints.length>0&&function(){var h=[];a.componentBlueprints[0].modelConfigurations.forEach(function(a){a.sections.forEach(function(a){a.sectionName===b&&a.modelRef.id===d&&h.push(a)})}),h=e.uniq(h);var i=[];a.componentBlueprints[0].symbolConfigurations.forEach(function(a){a.sections.forEach(function(a){a.sectionName===b&&a.id===f&&i.push(a)})}),i=e.uniq(i),1===h.length&&i.length&&function(){var a=i[0].connPinMap.filter(function(a){return a.symbolPinID===c});if(1===a.length){var b=h[0].connPortMap.filter(function(b){return b.connName===a[0].connName});1===b.length&&(g=b[0].portName)}}()}(),g},qa=function(a,b,c,d){var e=void 0,f=[];if(a.componentBlueprints[0].symbolConfigurations.forEach(function(a){a.sections.forEach(function(a){a.sectionName===b&&a.id===d&&f.push(a)})}),f.length){var g=f[0].connPinMap.filter(function(a){return a.symbolPinID===c})[0];g&&(e=g.displayName)}return e},ra=function(a,b,c){var d=[];return a&&function(){var e=[];a.symbolConfigurations.forEach(function(a){a.sections.forEach(function(a){a.sectionName===b&&a.id===c&&e.push(a)})}),e.length&&e[0].connPinMap.forEach(function(a){d.push(a.symbolPinID)})}(),d},sa=function(a,b,c){var d=[];return a&&a.componentBlueprints.length>0?ra(a.componentBlueprints[0],b,c):d};return{updateComponents:$,getDefaultSymbolFromCache:w,getShowAllPinsSymbolFromCache:x,addComponentBlueprint:function(a,b){m(ba,a,b)},addModelBlueprint:function(a,b){b&&A(b),n(ba,a,b)},addPackageBlueprint:function(a,b){p(ba,a,b)},addSymbolBlueprint:function(a,b){b&&B(b),o(ba,a,b)},clearCache:ga,getSymbol:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],e=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return q(ba,a,b,c,d,!1,e)},isSymbolCached:function(a){return ca(ba,a)},getSymbolFromCache:r,getRawSymbolFromCache:s,getComponent:L,getComponentFromCache:y,isComponentCached:function(a){return fa(ba,a)},getExportData:v,getModelFromCache:G,isMultiSection:ha,getPortsForModel:Q,getSymbolPinNameForModelPort:ka,getSymbolPinNameForSymbolPinID:la,getModelPortForSymbolPin:pa,getDisplayNameForPin:qa,getSymbolPinIDs:sa,getSymbolPinIDsForBlueprint:ra,getSymbolsForModel:N,getManufacturerList:ia,getComponentFunction:ja,getModelsForManufacturer:O,getPackagesForManufacturer:P,getComponentPinIDForSymbolPinID:na,getComponentBlueprintPinIDForSymbolPinID:ma,getSymbolPinIDForComponentPinID:oa,isSpecialVariableName:R,userCanModifyVariable:S,initializeSectionModelInstanceVariables:function(a){return E(z(a,ba,!1))},initializeSectionModelDefinitionVariables:function(a){return F(z(a,ba,!1))},getInstanceForModelID:C,getDefinitionForModelID:D,getModelDefinitionProperty:H,getModelInstanceProperty:I,forEachModelProperty:J,EOeclVariableType:k,substituteOECLVariables:c,EOeclPortMode:l,forEachComponentBlueprint:function(a){ba.cachedComponentBlueprints.forEach(a)},forEachModelBlueprint:function(a){ba.cachedModelBlueprints.forEach(a)},forEachSymbolBlueprint:function(a){ba.cachedSymbolBlueprints.forEach(a)},forEachPackageBlueprint:function(a){ba.cachedPackageBlueprints.forEach(a)},isDigitalModel:_}}var e,f,g,h,i,j,k,l,m;return a("substituteOECLVariables",c),a("default",d),{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.formatRefDes},function(a){h=a.svgToString},function(a){i=a.default},function(a){j=a.default}],execute:function(){a("EOeclVariableType",k=Object.freeze({VARIABLE:"variable",PORT:"port",PARAM:"param",TOGGLEPARAM:"toggleParam",TOGGLEVARIABLE:"toggleVariable"})),a("EOeclVariableType",k),a("EOeclPortMode",l=Object.freeze({ANALOG:"Analog",DIGITAL:"Digital"})),a("EOeclPortMode",l),a("EOeclPortDirection",m=Object.freeze({IN:"In",OUT:"Out"})),a("EOeclPortDirection",m)}}}),a.register("10",["f7"],function(a,b){"use strict";function c(){var a=this,b=d();return b.setExceptionCallback(function(b){window.multisim.tryCatchAll(function(){throw b},a)}),b}var d;return a("default",c),{setters:[function(a){d=a.default}],execute:function(){}}}),function(){var b=a.amdDefine;!function(a){"use strict";var d="undefined"==typeof window?null:window;"function"==typeof b&&b.amd?b("12c",[],function(){return a(d)}):void 0!==c?c.exports=a(d):d.DOMPurify=a(d)}(function a(b){"use strict";var c=function(b){return a(b)};if(c.version="0.8.3",c.removed=[],!b||!b.document||9!==b.document.nodeType)return c.isSupported=!1,c;var d=b.document,e=d,f=b.DocumentFragment,g=b.HTMLTemplateElement,h=b.NodeFilter,i=b.NamedNodeMap||b.MozNamedAttrMap,j=b.Text,k=b.Comment,l=b.DOMParser;if("function"==typeof g){var m=d.createElement("template");m.content&&m.content.ownerDocument&&(d=m.content.ownerDocument)}var n=d.implementation,o=d.createNodeIterator,p=d.getElementsByTagName,q=d.createDocumentFragment,r=e.importNode,s={};c.isSupported=void 0!==n.createHTMLDocument&&9!==d.documentMode;var t=function(a,b){for(var c=b.length;c--;)"string"==typeof b[c]&&(b[c]=b[c].toLowerCase()),a[b[c]]=!0;return a},u=function(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c},v=null,w=t({},["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr","svg","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","switch","symbol","text","textpath","title","tref","tspan","view","vkern","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmuliscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mpspace","msqrt","mystyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","#text"]),x=null,y=t({},["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","rows","rowspan","spellcheck","scope","selected","shape","size","span","srclang","start","src","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns","accent-height","accumulate","additivive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mode","min","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","surfacescale","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","y","y1","y2","z","zoomandpan","accent","accentunder","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","display","displaystyle","fence","frame","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z=null,A=null,B=!0,C=!1,D=!1,E=!1,F=/\{\{[\s\S]*|[\s\S]*\}\}/gm,G=/<%[\s\S]*|[\s\S]*%>/gm,H=!1,I=!1,J=!1,K=!1,L=!0,M=!0,N=t({},["audio","head","math","script","style","svg","video"]),O=t({},["audio","video","img","source"]),P=t({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Q=null,R=d.createElement("form"),S=function(a){"object"!=typeof a&&(a={}),v="ALLOWED_TAGS"in a?t({},a.ALLOWED_TAGS):w,x="ALLOWED_ATTR"in a?t({},a.ALLOWED_ATTR):y,z="FORBID_TAGS"in a?t({},a.FORBID_TAGS):{},A="FORBID_ATTR"in a?t({},a.FORBID_ATTR):{},B=!1!==a.ALLOW_DATA_ATTR,C=a.ALLOW_UNKNOWN_PROTOCOLS||!1,D=a.SAFE_FOR_JQUERY||!1,E=a.SAFE_FOR_TEMPLATES||!1,H=a.WHOLE_DOCUMENT||!1,I=a.RETURN_DOM||!1,J=a.RETURN_DOM_FRAGMENT||!1,K=a.RETURN_DOM_IMPORT||!1,L=!1!==a.SANITIZE_DOM,M=!1!==a.KEEP_CONTENT,E&&(B=!1),J&&(I=!0),a.ADD_TAGS&&(v===w&&(v=u(v)),t(v,a.ADD_TAGS)),a.ADD_ATTR&&(x===y&&(x=u(x)),t(x,a.ADD_ATTR)),M&&(v["#text"]=!0),Object&&"freeze"in Object&&Object.freeze(a),Q=a},T=function(a){c.removed.push({element:a});try{a.parentNode.removeChild(a)}catch(b){a.outerHTML=""}},U=function(a,b){c.removed.push({attribute:b.getAttributeNode(a),from:b}),b.removeAttribute(a)},V=function(a){var b,c;try{b=(new l).parseFromString(a,"text/html")}catch(a){}return b&&b.documentElement||(b=n.createHTMLDocument(""),c=b.body,c.parentNode.removeChild(c.parentNode.firstElementChild),c.outerHTML=a),"function"==typeof b.getElementsByTagName?b.getElementsByTagName(H?"html":"body")[0]:p.call(b,H?"html":"body")[0]},W=function(a){return o.call(a.ownerDocument||a,a,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT,function(){return h.FILTER_ACCEPT},!1)},X=function(a){return!(a instanceof j||a instanceof k)&&!("string"==typeof a.nodeName&&"string"==typeof a.textContent&&"function"==typeof a.removeChild&&a.attributes instanceof i&&"function"==typeof a.removeAttribute&&"function"==typeof a.setAttribute)},Y=function(a){var b,d;if(da("beforeSanitizeElements",a,null),X(a))return T(a),!0;if(b=a.nodeName.toLowerCase(),da("uponSanitizeElement",a,{tagName:b}),!v[b]||z[b]){if(M&&!N[b]&&"function"==typeof a.insertAdjacentHTML)try{a.insertAdjacentHTML("AfterEnd",a.innerHTML)}catch(a){}return T(a),!0}return!D||a.firstElementChild||a.content&&a.content.firstElementChild||!/</g.test(a.textContent)||(c.removed.push({element:a.cloneNode()}),a.innerHTML=a.textContent.replace(/</g,"&lt;")),E&&3===a.nodeType&&(d=a.textContent,d=d.replace(F," "),d=d.replace(G," "),a.textContent!==d&&(c.removed.push({element:a.cloneNode()}),a.textContent=d)),da("afterSanitizeElements",a,null),!1},Z=/^data-[\-\w.\u00B7-\uFFFF]/,$=/^(?:(?:(?:f|ht)tps?|mailto|tel):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,_=/^(?:\w+script|data):/i,aa=/[\x00-\x20\xA0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,ba=function(a){var e,f,g,h,i,j,k,l;if(da("beforeSanitizeAttributes",a,null),j=a.attributes){for(k={attrName:"",attrValue:"",keepAttr:!0},l=j.length;l--;)if(e=j[l],f=e.name,g=e.value,h=f.toLowerCase(),k.attrName=h,k.attrValue=g,k.keepAttr=!0,da("uponSanitizeAttribute",a,k),g=k.attrValue,"name"===h&&"IMG"===a.nodeName&&j.id?(i=j.id,j=Array.prototype.slice.apply(j),U("id",a),U(f,a),j.indexOf(i)>l&&a.setAttribute("id",i.value)):("id"===f&&a.setAttribute(f,""),U(f,a)),k.keepAttr&&(!L||"id"!==h&&"name"!==h||!(g in b||g in d||g in R))){if(E&&(g=g.replace(F," "),g=g.replace(G," ")),B&&Z.test(h));else{if(!x[h]||A[h])continue;if(P[h]);else if($.test(g.replace(aa,"")));else if("src"===h&&0===g.indexOf("data:")&&O[a.nodeName.toLowerCase()]);else if(C&&!_.test(g.replace(aa,"")));else if(g)continue}try{a.setAttribute(f,g),c.removed.pop()}catch(a){}}da("afterSanitizeAttributes",a,null)}},ca=function(a){var b,c=W(a);for(da("beforeSanitizeShadowDOM",a,null);b=c.nextNode();)da("uponSanitizeShadowNode",b,null),Y(b)||(b.content instanceof f&&ca(b.content),ba(b));da("afterSanitizeShadowDOM",a,null)},da=function(a,b,d){s[a]&&s[a].forEach(function(a){a.call(c,b,d,Q)})};return c.sanitize=function(a,d){var g,h,i,j,k;if(a||(a=""),"string"!=typeof a){if("function"!=typeof a.toString)throw new TypeError("toString is not a function");a=a.toString()}if(!c.isSupported)return"object"==typeof b.toStaticHTML||"function"==typeof b.toStaticHTML?b.toStaticHTML(a):a;if(S(d),c.removed=[],!I&&!H&&-1===a.indexOf("<"))return a;if(!(g=V(a)))return I?null:"";for(j=W(g);h=j.nextNode();)3===h.nodeType&&h===i||Y(h)||(h.content instanceof f&&ca(h.content),ba(h),i=h);if(I){if(J)for(k=q.call(g.ownerDocument);g.firstChild;)k.appendChild(g.firstChild);else k=g;return K&&(k=r.call(e,k,!0)),k}return H?g.outerHTML:g.innerHTML},c.addHook=function(a,b){"function"==typeof b&&(s[a]=s[a]||[],s[a].push(b))},c.removeHook=function(a){s[a]&&s[a].pop()},c.removeHooks=function(a){s[a]&&(s[a]=[])},c.removeAllHooks=function(){s={}},c})}(),a.register("12",["12c","29"],function(a,b){"use strict";function c(a,b){return a=a||{},b=b||{},Object.keys(b).forEach(function(d){a[d]&&b[d]&&"object"==typeof a[d]&&"object"==typeof b[d]&&!Array.isArray(a[d])&&!Array.isArray(b[d])?c(a[d],b[d]):a[d]=b[d]}),a}function d(a,b){var c=b;if("[object Date]"===Object.prototype.toString.call(a)&&!isNaN(a.getTime())){b=b||"";for(var d=b.split(/(%.)/),e=0;e<d.length;e++){var f=d[e];"%"==f.charAt(0)&&r[f]&&(d[e]=r[f](a))}c=d.join("")}return c}function e(a,b,c){a()?b():setTimeout(function(){e(a,b,c)},c)}function f(a){var b=/<!DOCTYPE svg/gi.test(a),c=i.sanitize(a,{ADD_ATTR:["xmlns:oecl","oecl:connpoint","oecl:pinid","oecl:pin","oecl:pinlength","oecl:placeholder","target"],ADD_TAGS:[],SANITIZE_DOM:!1});return c=c.replace(/xmlns:NS\d+="" /gi,"").replace(/NS\d+:/gi,""),(b?"<!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'>":"")+c}function g(a,b,c){var d={valid:!0};return c&&isNaN(a)?(d.valid=!1,d.errorMsg=j.i18n.translate("Value must be a number.").fetch()):b&&"string"==typeof b&&b.indexOf(",")>=0&&(d.valid=!1,d.errorMsg=j.i18n.translate("Use a period as the decimal marker.").fetch()),d}function h(a,b){var c=a===b;if(b)for(var d=a;d&&!c;)d=d.parentNode,c=d===b;return c}var i,j,k,l,m,n,o,p,q,r,s;return a("extend",c),a("timeToString",d),a("pollFor",e),a("domSanitize",f),a("validateBasicNumber",g),a("isChildOrSelf",h),{setters:[function(a){i=a.default},function(a){j=a.default}],execute:function(){k="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),l="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),m="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),n="January,February,March,April,May,June,July,August,September,October,November,December".split(","),o=function(a,b,c){for(var d=a.toString();d.length<c;)d=b+d;return d},p=function(a){var b=new Date(a.getFullYear(),0,1,0,0,0);return Math.ceil((a-b)/864e5)},q=function(a,b){var c=new Date(b.getTime());c.setHours(0,0,0),c.setDate(c.getDate()+a-(c.getDay()||7));var d=new Date(c.getFullYear(),0,1,0,0,0);return Math.ceil(((c-d)/864e5+1)/7)},r={"%a":function(a){return k[a.getDay()]},"%A":function(a){return l[a.getDay()]},"%b":function(a){return m[a.getMonth()]},"%B":function(a){return n[a.getMonth()]},"%c":function(a){return d(a,"%a %b %e %H:%M:%S %Y")},"%C":function(a){return""+(a.getFullYear()/100|0)},"%d":function(a){return o(a.getDate(),"0",2)},"%D":function(a){return d(a,"%m/%d/%y")},"%e":function(a){return o(a.getDate()," ",2)},"%F":function(a){return d(a,"%Y-%m-%d")},"%h":function(a){return m[a.getMonth()]},"%H":function(a){return o(a.getHours(),"0",2)},"%I":function(a){return o(a.getHours()?a.getHours()%12:12,"0",2)},"%j":function(a){return o(p(a),"0",3)},"%m":function(a){return o(a.getMonth()+1,"0",2)},"%M":function(a){return o(a.getMinutes(),"0",2)},"%n":function(){return"\n"},"%P":function(a){return a.getHours()<12?"AM":"PM"},"%p":function(a){return a.getHours()<12?"am":"pm"},"%r":function(a){return d(a,"%I:%M:%S %p")},"%R":function(a){return d(a,"%H:%M")},"%S":function(a){return o(a.getSeconds(),"0",2)},"%t":function(){return"\t"},"%T":function(a){return d(a,"%H:%M:%S")},"%u":function(a){return""+(a.getDay()?a.getDay():7)},"%U":function(a){return o(q(0,a),"0",2)},"%V":function(a){return o(q(4,a),"0",2)},"%w":function(a){return""+a.getDay()},"%W":function(a){return o(q(1,a),"0",2)},"%x":function(a){return d(a,"%D")},"%X":function(a){return d(a,"%T")},"%y":function(a){return(""+a.getFullYear()).substr(2)},"%Y":function(a){return""+a.getFullYear()},"%%":function(){return"%"}},a("getDoNotTrack",s=function(){return window.doNotTrack||navigator.doNotTrack?"1"===window.doNotTrack||"yes"===navigator.doNotTrack||"1"===navigator.doNotTrack?"yes":"no":"unknown"}),a("getDoNotTrack",s)}}}),a.register("188",["10","12"],function(a,b){"use strict";function c(a){var b=d(),c=null,f=function(){b.notifyListeners("clearGroups",null),c=null},g=function(a){b.notifyListeners("clearMessages",{group:c,messages:a,clearGroup:function(){c=null}})};return{listener:b,doMessage:function(d){var f=e({type:a.ETypes.NT_INFO,message:"<put message here>",group:{name:"",info:null},toast:!1},d);c?f.group.name=c:c=f.group.name,b.notifyListeners("message",f),f.toast&&a.notify(f.message,f.type)},clearGroups:f,clearMessages:g,notifications:a}}var d,e;return a("default",c),{setters:[function(a){d=a.default},function(a){e=a.extend}],execute:function(){}}}),a.register("4c",[],function(a,b){"use strict";function c(a){var b=a,c=null,e=null,f=function(a,f){if(b){var g=null,h=null;switch(f){case d.NT_WARNING:g=document.getElementById("nims_warningtoast1"),h=document.getElementById("nims_warningtoast2");break;case d.NT_ERROR:g=document.getElementById("nims_errortoast1"),h=document.getElementById("nims_errortoast2");break;default:g=document.getElementById("nims_infotoast1"),h=document.getElementById("nims_infotoast2")}g&&h?function(){var b=g.classList.contains("opened")?h:g;c&&e&&(e.classList.remove("opened"),clearTimeout(c),c=null),b.innerHTML=a,b.classList.add("opened"),e=b,c=setTimeout(function(){c=null,b.classList.remove("opened")},4e3)}():console.assert("no toast objects found")}else console.assert("toastRoot not set")},g={assert:function(a,b){a||(console.error("assertion failed"),console.trace(),b&&this.notify(b,d.NT_ERROR))},verify:function(a,b){return this.assert(a,b),a},dump:function(a){console.dir(a)},log:function(a){console.log(a)},notify:function(a,b,c){switch(b){case d.NT_WARNING:console.warn(c||a);break;case d.NT_ERROR:console.log(c||a);break;default:console.info(c||a)}f(a,b)},ETypes:d,set toastRoot(a){b=a},get toastRoot(){return b}};return g}var d;return a("default",c),{setters:[],execute:function(){a("ENotifyType",d=Object.freeze({NT_INFO:"info",NT_WARNING:"warning",NT_ERROR:"error"})),a("ENotifyType",d)}}}),a.register("17",["1b","1f","4f","57","3c","17d","22","23","a1","188","4c","29"],function(a,b){"use strict";function c(a,b,c){var d=a.parent,e=a.pinID,f=0,g=0,h=[];if(d.activeModelID&&d.designComponent){var i=b.getInstanceForModelID(d.activeModelID),j=d.designComponent.oeclComponent;if(j&&j.simModelBlueprints.length>0){for(var l=0;l<i.variables.length;l++){var m=i.variables[l];if(m.type==b.EOeclVariableType.PORT&&(g++,b.getSymbolPinNameForModelPort(j,d.sectionName,m.name,d.activeModelID,d.activeSymbolID)==e)){f=g;break}}var n=j.simModelBlueprints.filter(function(a){return a.id===d.activeModelID})[0],o=d.designComponent.isMultiSection(),p=k(d.designComponent.refDes,o?d.sectionName:"",{}),q=n.name+"_"+p,r={refdes:p,model:q},s=u(j,r,d,c,b,null);h=s.connected&&s.instanceString?s.instanceString.split(" "):[]}}return{refdes:h.length?h[0]:null,pinposition:f}}function d(a,b){var c=q(a),d=p(c),e=s.i18n.translate("Net %s has been converted from digital to analog. See help for more information.").fetch(b.join(", ")),f=s.i18n.translate("help").fetch();d.doMessage({type:r.NT_INFO,message:e.replace(f,'<a href="//digital.ni.com/express.nsf/bycode/risefall" target="_blank">'+f+"</a>"),toast:!0,group:{name:"net change",info:{displayName:s.i18n.translate("net change").fetch(),timestamp:new Date}}})}function e(a,b,c){var e=a.getAllInstances(),f=a.netlist,g=!1;return f&&function(){var i=Symbol("forceAnalogForCustomMissmatch"),j=Symbol("non digital pin count"),k=Symbol("simple digital pin count"),l=Symbol("ttl74ls digital pin count"),p=Symbol("cmos74hc digital pin count"),q=Symbol("custom digital pin count");f.forEachNet(function(a){void 0!==a[B]&&delete a[B],a.customVoltageValues=void 0});for(var r=function(d){var r=e[d];if(r instanceof n&&c){var s=c.getObject(r.templateGUID);if(r.probeID){var t=r.getAttachedNets(a,c);if(t.length>0&&s&&(s.probeType===m.PROBE_VOLTAGE||s.probeType===m.PROBE_CURRENT||s.probeType===m.PROBE_VOLTAGE_CURRENT||s.probeType===m.PROBE_REFERENCE))for(var u=0;u<t.length;u++){var v=t[u];v[j]|=0,v[j]++}}}else r.designComponent&&function(){var a=r.designComponent.oeclComponent;if(a&&a.simModelBlueprints.length>0){b.getPortsForModel(r.activeModelID).forEach(function(c){var d=c.mode?c.mode:b.EOeclPortMode.ANALOG,e=b.getSymbolPinNameForModelPort(a,r.sectionName,c.name,r.activeModelID,r.activeSymbolID),m=r.getPinInstance(e),n=f.getNetForItem(m);if(n)if(d===b.EOeclPortMode.DIGITAL){n[p]|=0,n[l]|=0,n[k]|=0,n[q]|=0;var s=r.activePinTechnology===h.CUSTOM||r.activePinTechnology===h.THREE||r.activePinTechnology===h.FIVE;r.activePinTechnology===h.CMOS74HC?n[p]++:r.activePinTechnology===h.TTL74LS?n[l]++:s?(0===n[q]?n.customVoltageValues=r.getVoltageLevels():n.customVoltageValues.equals(r.getVoltageLevels())||(n[i]=!0),n[q]++):n[k]++,g=!0,(r.activePinRiseTime>0||r.activePinFallTime>0)&&c.direction===o.OUT&&(n[B]=!0)}else n[j]|=0,n[j]++})}}()},s=0;s<e.length;s++)r(s);var t=[];f.forEachNet(function(a){var b=a[q]||0,c=a[k]||0,d=a[l]||0,e=a[p]||0,f=b+c+d+e,m=a[j]||0,n=a[i]||a[B]||!1,o=!n;o=o&&f>0&&0==m,o&&(o=o&&!(c&&(b||d||e)),o=o&&!(d&&(b||c||e)),o=o&&!(e&&(b||c||d)),o=o&&!(b&&(c||d||e))),a.isDigital&&!o&&t.push(a.name),a.isDigital=o,a.pinLogicFamilies=[],c>0?a.pinLogicFamilies.push(h.SIMPLE):d>0?a.pinLogicFamilies.push(h.TTL74LS):e>0?a.pinLogicFamilies.push(h.CMOS74HC):b>0&&a.pinLogicFamilies.push(h.CUSTOM),g&=a.isDigital||"0"===a.name||0==m,void 0!==a[k]&&delete a[k],void 0!==a[l]&&delete a[l],void 0!==a[p]&&delete a[p],void 0!==a[j]&&delete a[j],void 0!==a[q]&&delete a[q],void 0!==a[i]&&delete a[i]}),t.length>0&&d(a,t)}(),a.animatedWiresController&&a.animatedWiresController.updateAllWires(),g}function f(a,b,c,d,f,h,j,l,m){var n=a.netlist,o="",p=new Map,q=c||[],r={};o+="** "+a.name+" **\n",o+="*\n",o+="* Multisim Live SPICE netlist\n",o+="*\n",o+="*\n";var s=[],t=[],w=e(a,b,m);n.forEachNet(function(a){r[a.name]=a.name});var x="",y=q.map(function(a){return{netpin:a,zerovoltnetname:null}});y=y.filter(function(a){var b=void 0!=a.netpin.netName?n.getNet(a.netpin.netName):void 0;return!(b&&b.isDigital)}),y.length>0&&(x+="* 0V sources used for current measurements\n",y.forEach(function(a){x+="* "+A(a,b)+"\n",x+=z(a,b,r,d)+"\n\n"}));var B=y.reduce(function(a,b){return a[b.netpin.pin.parent.contextGUID+"+"+b.netpin.pin.parent.templateGUID+"+"+b.netpin.pin.pinID]=b.zerovoltnetname,a},{}),C=new Map,D=a.getAllInstances(),E=!1,F=new Map;D.forEach(function(a){if(a.designComponent){var c=a.designComponent.oeclComponent;if(c&&c.simModelBlueprints.length>0){var d=c.simModelBlueprints.filter(function(b){return b.id===a.activeModelID})[0],e=a.designComponent.isMultiSection(),g=k(a.designComponent.refDes,e?a.sectionName:"",{}),i=d.customData?d.customData.modelVariableName:void 0,l=a.variableObjectGetter?a.variableObjectGetter(i):null,m=(i?a.getVariableText(i):l?l.default:void 0)||"",o=m.replace(/^[*;].*$\r?\n|\s*;.+/gm,"").replace(/\s*\n\s*\+\s*/g," ").split(/\s+/),q=i&&o.length>1?o[1]:d.name,r=q+"_"+g,w={refdes:g,model:r},x=u(c,w,a,n,b,B,j,p,F),y=v(a,w,b,j,p);i&&(y=y.replace(/((?:(?:^|\n)\s*[*;][^\n]*)*\n?\.[^\s]+(?:(?:\s+)|(?:\s*\n\s*\+\s*)))[^+\s][^\s]*(\s+[^\0]*)/,"$1"+r+"$2")),x.connected&&x.instanceString?(E=!0,a.excludedFromSimulation=!1,s.push({refdes:g,instance:x.instanceString,definition:y})):(h&&x.instanceString&&t.push({refdes:g,instance:x.instanceString,definition:y}),f&&(a.excludedFromSimulation=!0,f.push(a)))}}},this);var G=o;j&&p.forEach(function(a,b){G+=".param "+b+" = "+a+"\n"});var H=function(a,b){if(a.length>0){a.sort(function(a,b){return a.refdes>b.refdes?1:a.refdes<b.refdes?-1:0}),b||(G+="\n",G+="* --- Circuit Topology ---\n\n"),a.forEach(function(a){G+="* Component: "+a.refdes+"\n",G+=a.instance,G+="\n"},this);var c=a.filter(function(a){return-1!=a.definition.search(/.model/i)&&-1==a.definition.search(/.subckt/i)}),d=a.filter(function(a){return-1!=a.definition.search(/.subckt/i)});c.length>0&&(b||(G+="\n* --- Circuit Models ---\n\n"),c.forEach(function(a){G+="* "+a.refdes+" model\n",G+=a.definition,G+="\n"},this)),d.length>0&&(b||(G+="\n* --- Subcircuits ---\n\n"),d.forEach(function(a){G+="* "+a.refdes+" subcircuit\n",G+=a.definition,G+="\n"},this))}};if(H(s,!1),F.size>0){G+="\n* --- Pin bridge models\n";var I=!0,J=!1,K=void 0;try{for(var L,M=F[Symbol.iterator]();!(I=(L=M.next()).done);I=!0){var N=L.value;G+="\n",G+=N[1]}}catch(a){J=!0,K=a}finally{try{!I&&M.return&&M.return()}finally{if(J)throw K}}}if(C.size>0){G+="\n* --- Pin bridges for probes\n";var O=!0,P=!1,Q=void 0;try{for(var R,S=C[Symbol.iterator]();!(O=(R=S.next()).done);O=!0){var T=R.value;G+="\n",G+=T[1]}}catch(a){P=!0,Q=a}finally{try{!O&&S.return&&S.return()}finally{if(P)throw Q}}G+="\n",G+="\n"}return G+=x,a.netlist.forEachNet(function(a){var b="\n\n";if(a.useInitialConditions){var c=i(a.initialConditions);isNaN(c)||(b=".IC V("+a.name+")="+c.toString()+"\n")}if(a.useNodeset){var d=i(a.nodeset);isNaN(d)||(b+=".NODESET V("+a.name+")="+d.toString()+"\n")}b&&b.trim()&&(G+=b)}),t.length&&(G+="\n",G+="* --- Unconnected items ---\n* These will be excluded\n* from the simulation\n\n",H(t,!0)),w&&(G+="\n",G+="* --- Placeholder source for all-digital circuit ---\n",G+="vdigitalplaceholder^ digitalplaceholder! 0 dc 0 ac 0 0 \n"),j&&(G+="\n",G+=".circuitparams "+[].concat(g(p.keys())).join(" ")+"\n"),l&&(l.isEmptyNetlist=!E&&G==o),G}var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;return a("getSpiceInfoForPin",c),a("toString",f),{setters:[function(a){g=a.default},function(a){h=a.ELogicFamily},function(a){i=a.default},function(a){j=a.getCktParamName},function(a){k=a.formatRefDes},function(a){l=a.PinBridge},function(a){m=a.default},function(a){n=a.ProbeInstance},function(a){o=a.EOeclPortDirection},function(a){p=a.default},function(a){q=a.default,r=a.ENotifyType},function(a){s=a.default}],execute:function(){t=function(a,b,c,d,e){if(a&&a.componentName===d.refdes&&c.some(function(b){return b.name===a.parameterName})){var f=j(a.parameterName);e.set(f,d[a.parameterName]),d[a.parameterName]="{ "+f+" }"}},u=function(a,b,c,d,e,f,g,h,j){var k=f||{},m=e.getInstanceForModelID(c.activeModelID),n={},o=!1,p=!1,q=m.instance;return m.variables.forEach(function(f){if(f.type==e.EOeclVariableType.PORT){p=!0;var g=e.getSymbolPinNameForModelPort(a,c.sectionName,f.name,c.activeModelID,c.activeSymbolID),h=c.getPinInstance(g),m=k[c.contextGUID+"+"+c.templateGUID+"+"+g]||d.getNetNameForItem(h),r=h?d.getNetForItem(h):null;if(m){if(o=!0,n[f.name]=m,void 0!==j){var s=l.createIfNeeded(r,h,f);if(s){var t=e.getDisplayNameForPin(a,c.sectionName,g,c.activeSymbolID),u="bridge"+b.refdes+"!"+(t&&t.length>0?t:g);n[f.name]=u,q+="\n",q+=s.getSpiceInstance(m,u),q+="\n",j.has(s.getName())||j.set(s.getName(),s.getSpiceModel())}}}else{var v=e.getDisplayNameForPin(a,c.sectionName,g,c.activeSymbolID);n[f.name]=b.refdes+"_NC_"+(v&&v.length>0?v:g)}}else{var w=c.getInstanceVariableState(c.activeModelID,f.name);if(!1===w)b[f.name]=w;else{var x=c.getInstanceVariableValue(c.activeModelID,f.name,"XY"!=f.propertyType);void 0!==x&&("XY"==f.propertyType&&(x="+ "+x.trim().split("\n").map(function(a){return a.trim().replace(/^\++/,"").replace(/,/," ").trim().split(/\s+/).map(function(a){return i(a)}).join(" ")}).filter(function(a){return!!a.length}).join("\n+ ")),b[f.name]=x)}}}),t(g,m,m.variables,b,h),{instanceString:e.substituteOECLVariables(q,m.variables,b,n),connected:o||!p}},v=function(a,b,c,d,e){var f=c.getDefinitionForModelID(a.activeModelID);return f.variables.forEach(function(c){var d=a.getModelVariableState(a.activeModelID,c.name);if(!1===d)b[c.name]=d;else{var e=a.getModelVariableValue(a.activeModelID,c.name,!0);void 0!==e&&(b[c.name]=e)}}),t(d,c.getInstanceForModelID(a.activeModelID),f.variables,b,e),c.substituteOECLVariables(f.definition,f.variables,b)},w=function(a){var b=a.parent;return k(b.designComponent.refDes,b.designComponent.isMultiSection()?b.sectionName:"",{})},x=function(a,b){return w(a,b)+".PinVoltage"+a.pinID+"--"},y=function(a,b,c){for(var d=b+a.netpin.netName,e=d,f=0;c[e];)e=d+f,f++;return c[e]=e,a.zerovoltnetname=e,e},z=function(a,b,c,d){var e=x(a.netpin.pin,b),f=y(a,e,c),g="v"+e+"voltage",h=void 0,i=d.get(a.netpin.pin);return h=i.devicecurrents.length?i.devicecurrents[0].currentpolarity:a.netpin.pin.parent.pinInstances.size>2||"1"===i.symbolpinname?"positive":"negative",i&&(i.currentattainable=!0,i.nocurrentpresent=!1,i.devicecurrents=[{currentname:"@"+g.toLowerCase()+"[i]",currentpolarity:h}]),g+" "+a.netpin.netName+" "+f+" DC 0.0"},A=function(a,b){return"0V source inserted at pin: "+a.netpin.pin.pinID+" of component "+w(a.netpin.pin,b)},B=Symbol("forceAnalogForRiseAndFall")}}}),a.register("189",[],function(){return{setters:[],execute:function(){}}}),a.register("15e",["a7","45","3d","30","17","189","32"],function(a,b){"use strict";var c,d,e,f,g;return{setters:[function(a){},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.toString},function(a){},function(a){g=a.default}],execute:function(){!function(){window.Polymer({is:"spice-netlist-view",ready:function(){},initialize:function(a,b){function h(){null===k&&(k=setTimeout(function(){k=null,j.netlistText=f(a.activeDesign,b,null,null,null,!0,void 0,void 0,a.activeViewGetter().sheetTemplateController.sheetTemplate)},100))}function i(a){void 0!==a&&void 0!==a.changeSource&&a.changeSource.settingsModel===a.simulationController.documentDigitalSettings&&h()}var j=this,k=null;a.listeners.addListener(a.events.ACTIVEDESIGNCHANGED,function(a){a.oldDesign&&(a.oldDesign.netlistController.listener.removeListener(d.NE_NETSCHANGED,h),a.oldDesign.netlistController.listener.removeListener(d.NE_PROPSCHANGED,h),a.oldDesign.listeners.removeListener(e.DESIGN_CHANGED,h),a.oldDesign.listeners.removeListener(e.NAME_CHANGED,h),a.oldDesign.simulationController.listeners.removeListener(g.SimulationSettingsChanged,i)),a.activeDesign&&(a.activeDesign.netlistController.listener.addListener(d.NE_NETSCHANGED,h),a.activeDesign.netlistController.listener.addListener(d.NE_PROPSCHANGED,h),a.activeDesign.listeners.addListener(e.DESIGN_CHANGED,h),a.activeDesign.listeners.addListener(e.NAME_CHANGED,h),a.activeDesign.simulationController.listeners.addListener(g.SimulationSettingsChanged,i))});var l=a.propertyController;l.propertyChangeListeners.addListener(c.INSTANCE_PROPERTY_CHANGED,h),l.propertyChangeListeners.addListener(c.MODEL_PROPERTY_CHANGED,h)},set netlistText(a){var b=a.replace(/</gm,"&lt;");b=b.replace(/>/gm,"&gt;"),b=b.replace(/(\r\n|\n|\r)/gm,"<br/>"),document.getElementById("netlistArea").innerHTML=b},get netlistText(){return document.getElementById("netlistArea").innerHTML}})}()}}}),a.register("18a",[],function(){return{setters:[],execute:function(){}}}),a.register("18b",["a7","29","18a"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"probe-display",attached:function(){var a=this;c.addReadyListener(function(b){a.voltageIndicator=b.i18n.translate("V").fetch(),a.currentIndicator=b.i18n.translate("I").fetch(),a.voltageIndicatorDc=b.i18n.translate("V").fetch(),a.currentIndicatorDc=b.i18n.translate("I").fetch(),a.frequencyIndicator=b.i18n.translate("f").fetch(),a.peakPeakSubscript=b.i18n.translate("PP").fetch(),a.rmsSubscript=b.i18n.translate("RMS").fetch(),a.avgSubscript=b.i18n.translate("AV").fetch(),a.voltageSubscript=b.i18n.translate("V").fetch(),a.currentSubscript=b.i18n.translate("I").fetch(),a.invalidDataWarning=b.i18n.translate("Out of date").fetch(),a.digitalIndicator=b.i18n.translate("D").fetch()})},properties:{displayCurrent:{type:Boolean,observer:"_currentDisplayStateChanged"},displayVoltage:{type:Boolean,observer:"_voltageDisplayStateChanged"},displayInstantaneous:{type:Boolean,observer:"_instantaneousDisplayStateChanged"},displayPeriodic:{type:Boolean,observer:"_periodicDisplayStateChanged"},displayDc:{type:Boolean,observer:"_dcDisplayStateChanged"},probeData:{type:Object,notify:!0,value:function(){return{}}},displayDigital:{type:Boolean,observer:"_digitalDisplayStateChanged"},voltageIndicator:String,currentIndicator:String,voltageIndicatorDc:String,currentIndicatorDc:String,frequencyIndicator:String,peakPeakSubscript:String,rmsSubscript:String,avgSubscript:String,voltageSubscript:String,currentSubscript:String,invalidDataWarning:String,digitalIndicator:String},_currentDisplayStateChanged:function(a){this.toggleClass("current",a)},_voltageDisplayStateChanged:function(a){this.toggleClass("voltage",a)},_instantaneousDisplayStateChanged:function(a){this.toggleClass("instantaneous",a)},_periodicDisplayStateChanged:function(a){this.toggleClass("periodic",a)},_dcDisplayStateChanged:function(a){this.toggleClass("dc",a)},_digitalDisplayStateChanged:function(a){this.toggleClass("digital",a)},displayValue:function(a){return a||"—"}})}()}}}),function(){var b=a.amdDefine;!function(a,d,e,f){"use strict";function g(a,b,c){return setTimeout(l(a,c),b)}function h(a,b,c){return!!Array.isArray(a)&&(i(a,c[b],c),!0)}function i(a,b,c){var d;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==f)for(d=0;d<a.length;)b.call(c,a[d],d,a),d++;else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)}function j(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function k(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&na(d,c)}function l(a,b){return function(){return a.apply(b,arguments)}}function m(a,b){return typeof a==qa?a.apply(b?b[0]||f:f,b):a}function n(a,b){return a===f?b:a}function o(a,b,c){i(s(b),function(b){a.addEventListener(b,c,!1)})}function p(a,b,c){i(s(b),function(b){a.removeEventListener(b,c,!1)})}function q(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function r(a,b){return a.indexOf(b)>-1}function s(a){return a.trim().split(/\s+/g)}function t(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function u(a){return Array.prototype.slice.call(a,0)}function v(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];t(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function w(a,b){for(var c,d,e=b[0].toUpperCase()+b.slice(1),g=0;g<oa.length;){if(c=oa[g],(d=c?c+e:b)in a)return d;g++}return f}function x(){return wa++}function y(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function z(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){m(a.options.enable,[a])&&c.handler(b)},this.init()}function A(a){var b=a.options.inputClass;return new(b||(za?O:Aa?R:ya?T:N))(a,B)}function B(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ga&&d-e==0,g=b&(Ia|Ja)&&d-e==0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,C(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function C(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=F(b)),e>1&&!c.firstMultiple?c.firstMultiple=F(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=G(d);b.timeStamp=ta(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=K(h,i),b.distance=J(h,i),D(c,b),b.offsetDirection=I(b.deltaX,b.deltaY);var j=H(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=sa(j.x)>sa(j.y)?j.x:j.y,b.scale=g?M(g.pointers,d):1,b.rotation=g?L(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,E(c,b);var k=a.element;q(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function D(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ga&&f.eventType!==Ia||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function E(a,b){var c,d,e,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ja&&(i>Fa||h.velocity===f)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=H(i,j,k);d=l.x,e=l.y,c=sa(l.x)>sa(l.y)?l.x:l.y,g=I(j,k),a.lastInterval=b}else c=h.velocity,d=h.velocityX,e=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=d,b.velocityY=e,b.direction=g}function F(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:ra(a.pointers[c].clientX),clientY:ra(a.pointers[c].clientY)},c++;return{timeStamp:ta(),pointers:b,center:G(b),deltaX:a.deltaX,deltaY:a.deltaY}}function G(a){var b=a.length;if(1===b)return{x:ra(a[0].clientX),y:ra(a[0].clientY)};for(var c=0,d=0,e=0;e<b;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:ra(c/b),y:ra(d/b)}}function H(a,b,c){return{x:b/a||0,y:c/a||0}}function I(a,b){return a===b?Ka:sa(a)>=sa(b)?a<0?La:Ma:b<0?Na:Oa}function J(a,b,c){c||(c=Sa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function K(a,b,c){c||(c=Sa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function L(a,b){return K(b[1],b[0],Ta)+K(a[1],a[0],Ta)}function M(a,b){return J(b[0],b[1],Ta)/J(a[0],a[1],Ta)}function N(){this.evEl=Va,this.evWin=Wa,this.pressed=!1,z.apply(this,arguments)}function O(){this.evEl=Za,this.evWin=$a,z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function P(){this.evTarget=ab,this.evWin=bb,this.started=!1,z.apply(this,arguments)}function Q(a,b){var c=u(a.touches),d=u(a.changedTouches);return b&(Ia|Ja)&&(c=v(c.concat(d),"identifier",!0)),[c,d]}function R(){this.evTarget=db,this.targetIds={},z.apply(this,arguments)}function S(a,b){var c=u(a.touches),d=this.targetIds;if(b&(Ga|Ha)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=u(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return q(a.target,i)}),b===Ga)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ia|Ja)&&delete d[g[e].identifier],e++;return h.length?[v(f.concat(h),"identifier",!0),h]:void 0}function T(){z.apply(this,arguments);var a=l(this.handler,this);this.touch=new R(this.manager,a),this.mouse=new N(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function U(a,b){a&Ga?(this.primaryTouch=b.changedPointers[0].identifier,V.call(this,b)):a&(Ia|Ja)&&V.call(this,b)}function V(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,eb)}}function W(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(f<=fb&&g<=fb)return!0}return!1}function X(a,b){this.manager=a,this.set(b)}function Y(a){if(r(a,lb))return lb;var b=r(a,mb),c=r(a,nb);return b&&c?lb:b||c?b?mb:nb:r(a,kb)?kb:jb}function Z(){if(!hb)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=!c||a.CSS.supports("touch-action",d)}),b}function $(a){this.options=na({},this.defaults,a||{}),this.id=x(),this.manager=null,this.options.enable=n(this.options.enable,!0),this.state=pb,this.simultaneous={},this.requireFail=[]}function _(a){return a&ub?"cancel":a&sb?"end":a&rb?"move":a&qb?"start":""}function aa(a){return a==Oa?"down":a==Na?"up":a==La?"left":a==Ma?"right":""}function ba(a,b){var c=b.manager;return c?c.get(a):a}function ca(){$.apply(this,arguments)}function da(){ca.apply(this,arguments),this.pX=null,this.pY=null}function ea(){ca.apply(this,arguments)}function fa(){$.apply(this,arguments),this._timer=null,this._input=null}function ga(){ca.apply(this,arguments)}function ha(){ca.apply(this,arguments)}function ia(){$.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ja(a,b){return b=b||{},b.recognizers=n(b.recognizers,ja.defaults.preset),new ka(a,b)}function ka(a,b){this.options=na({},ja.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=A(this),this.touchAction=new X(this,this.options.touchAction),la(this,!0),i(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function la(a,b){var c=a.element;if(c.style){var d;i(a.options.cssProps,function(e,f){d=w(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function ma(a,b){var c=d.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b,b.target.dispatchEvent(c)}var na,oa=["","webkit","Moz","MS","ms","o"],pa=d.createElement("div"),qa="function",ra=Math.round,sa=Math.abs,ta=Date.now;na="function"!=typeof Object.assign?function(a){if(a===f||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(d!==f&&null!==d)for(var e in d)d.hasOwnProperty(e)&&(b[e]=d[e])}return b}:Object.assign;var ua=j(function(a,b,c){for(var d=Object.keys(b),e=0;e<d.length;)(!c||c&&a[d[e]]===f)&&(a[d[e]]=b[d[e]]),e++;return a},"extend","Use `assign`."),va=j(function(a,b){return ua(a,b,!0)},"merge","Use `assign`."),wa=1,xa=/mobile|tablet|ip(ad|hone|od)|android/i,ya="ontouchstart"in a,za=w(a,"PointerEvent")!==f,Aa=ya&&xa.test(navigator.userAgent),Ba="touch",Ca="pen",Da="mouse",Ea="kinect",Fa=25,Ga=1,Ha=2,Ia=4,Ja=8,Ka=1,La=2,Ma=4,Na=8,Oa=16,Pa=La|Ma,Qa=Na|Oa,Ra=Pa|Qa,Sa=["x","y"],Ta=["clientX","clientY"];z.prototype={handler:function(){},init:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(y(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(y(this.element),this.evWin,this.domHandler)}};var Ua={mousedown:Ga,mousemove:Ha,mouseup:Ia},Va="mousedown",Wa="mousemove mouseup";k(N,z,{handler:function(a){var b=Ua[a.type];b&Ga&&0===a.button&&(this.pressed=!0),b&Ha&&1!==a.which&&(b=Ia),this.pressed&&(b&Ia&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Da,srcEvent:a}))}});var Xa={pointerdown:Ga,pointermove:Ha,pointerup:Ia,pointercancel:Ja,pointerout:Ja},Ya={2:Ba,3:Ca,4:Da,5:Ea},Za="pointerdown",$a="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Za="MSPointerDown",$a="MSPointerMove MSPointerUp MSPointerCancel"),k(O,z,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Xa[d],f=Ya[a.pointerType]||a.pointerType,g=f==Ba,h=t(b,a.pointerId,"pointerId");e&Ga&&(0===a.button||g)?h<0&&(b.push(a),h=b.length-1):e&(Ia|Ja)&&(c=!0),h<0||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var _a={touchstart:Ga,touchmove:Ha,touchend:Ia,touchcancel:Ja},ab="touchstart",bb="touchstart touchmove touchend touchcancel";k(P,z,{handler:function(a){var b=_a[a.type];if(b===Ga&&(this.started=!0),this.started){var c=Q.call(this,a,b);b&(Ia|Ja)&&c[0].length-c[1].length==0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:Ba,srcEvent:a})}}});var cb={touchstart:Ga,touchmove:Ha,touchend:Ia,touchcancel:Ja},db="touchstart touchmove touchend touchcancel";k(R,z,{handler:function(a){var b=cb[a.type],c=S.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:Ba,srcEvent:a})}});var eb=2500,fb=25;k(T,z,{handler:function(a,b,c){var d=c.pointerType==Ba,e=c.pointerType==Da;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)U.call(this,b,c);else if(e&&W.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var gb=w(pa.style,"touchAction"),hb=gb!==f,ib="compute",jb="auto",kb="manipulation",lb="none",mb="pan-x",nb="pan-y",ob=Z();X.prototype={set:function(a){a==ib&&(a=this.compute()),hb&&this.manager.element.style&&ob[a]&&(this.manager.element.style[gb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return i(this.manager.recognizers,function(b){m(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),Y(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=r(d,lb)&&!ob[lb],f=r(d,nb)&&!ob[nb],g=r(d,mb)&&!ob[mb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Pa||g&&c&Qa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var pb=1,qb=2,rb=4,sb=8,tb=sb,ub=16,vb=32;$.prototype={defaults:{},set:function(a){return na(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(h(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=ba(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return h(a,"dropRecognizeWith",this)?this:(a=ba(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(h(a,"requireFailure",this))return this;var b=this.requireFail;return a=ba(a,this),-1===t(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(h(a,"dropRequireFailure",this))return this;a=ba(a,this);var b=t(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;d<sb&&b(c.options.event+_(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=sb&&b(c.options.event+_(d))},tryEmit:function(a){if(this.canEmit())return this.emit(a);this.state=vb},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(vb|pb)))return!1;a++}return!0},recognize:function(a){var b=na({},a);if(!m(this.options.enable,[this,b]))return this.reset(),void(this.state=vb);this.state&(tb|ub|vb)&&(this.state=pb),this.state=this.process(b),this.state&(qb|rb|sb|ub)&&this.tryEmit(b)},process:function(a){},getTouchAction:function(){},reset:function(){}},k(ca,$,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(qb|rb),e=this.attrTest(a);return d&&(c&Ja||!e)?b|ub:d||e?c&Ia?b|sb:b&qb?b|rb:qb:vb}}),k(da,ca,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ra},getTouchAction:function(){var a=this.options.direction,b=[];return a&Pa&&b.push(nb),a&Qa&&b.push(mb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Pa?(e=0===f?Ka:f<0?La:Ma,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ka:g<0?Na:Oa,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return ca.prototype.attrTest.call(this,a)&&(this.state&qb||!(this.state&qb)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=aa(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),k(ea,ca,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[lb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&qb)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),k(fa,$,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[jb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,e=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ia|Ja)&&!e)this.reset();else if(a.eventType&Ga)this.reset(),this._timer=g(function(){this.state=tb,this.tryEmit()},b.time,this);else if(a.eventType&Ia)return tb;return vb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===tb&&(a&&a.eventType&Ia?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ta(),this.manager.emit(this.options.event,this._input)))}}),k(ga,ca,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[lb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&qb)}}),k(ha,ca,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Pa|Qa,pointers:1},getTouchAction:function(){return da.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Pa|Qa)?b=a.overallVelocity:c&Pa?b=a.overallVelocityX:c&Qa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&sa(b)>this.options.velocity&&a.eventType&Ia},emit:function(a){var b=aa(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),k(ia,$,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[kb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,e=a.deltaTime<b.time;if(this.reset(),a.eventType&Ga&&0===this.count)return this.failTimeout();if(d&&e&&c){if(a.eventType!=Ia)return this.failTimeout();var f=!this.pTime||a.timeStamp-this.pTime<b.interval,h=!this.pCenter||J(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&f?this.count+=1:this.count=1,this._input=a;if(0===this.count%b.taps)return this.hasRequireFailures()?(this._timer=g(function(){this.state=tb,this.tryEmit()},b.interval,this),qb):tb}return vb},failTimeout:function(){return this._timer=g(function(){this.state=vb},this.options.interval,this),vb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==tb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ja.VERSION="2.0.7",ja.defaults={domEvents:!1,touchAction:ib,enable:!0,inputTarget:null,inputClass:null,preset:[[ga,{enable:!1}],[ea,{enable:!1},["rotate"]],[ha,{direction:Pa}],[da,{direction:Pa},["swipe"]],[ia],[ia,{event:"doubletap",taps:2},["tap"]],[fa]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var wb=2;ka.prototype={set:function(a){return na(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?wb:1},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&tb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===wb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(qb|rb|sb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof $)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(h(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(h(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=t(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==f&&b!==f){var c=this.handlers;return i(s(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==f){var c=this.handlers;return i(s(a),function(a){b?c[a]&&c[a].splice(t(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ma(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&la(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},na(ja,{INPUT_START:Ga,INPUT_MOVE:Ha,INPUT_END:Ia,INPUT_CANCEL:Ja,STATE_POSSIBLE:pb,STATE_BEGAN:qb,STATE_CHANGED:rb,STATE_ENDED:sb,STATE_RECOGNIZED:tb,STATE_CANCELLED:ub,STATE_FAILED:vb,DIRECTION_NONE:Ka,DIRECTION_LEFT:La,DIRECTION_RIGHT:Ma,DIRECTION_UP:Na,DIRECTION_DOWN:Oa,DIRECTION_HORIZONTAL:Pa,DIRECTION_VERTICAL:Qa,DIRECTION_ALL:Ra,Manager:ka,Input:z,TouchAction:X,TouchInput:R,MouseInput:N,PointerEventInput:O,TouchMouseInput:T,SingleTouchInput:P,Recognizer:$,AttrRecognizer:ca,Tap:ia,Pan:da,Swipe:ha,Pinch:ea,Rotate:ga,Press:fa,on:o,off:p,each:i,merge:va,extend:ua,assign:na,inherit:k,bindFn:l,prefixed:w}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=ja,"function"==typeof b&&b.amd?b("8f",[],function(){return ja}):void 0!==c&&c.exports?c.exports=ja:a[e]=ja}(window,document,"Hammer")}(),a.register("18c",[],function(){return{setters:[],execute:function(){}}}),a.register("174",["a7","8f","18c"],function(a,b){"use strict";var c,d;return{setters:[function(a){},function(a){c=a.default},function(a){}],execute:function(){d=Object.freeze({D_VERTICAL:"D_VERTICAL",D_HORIZONTAL:"D_HORIZONTAL",D_BOTH:"D_BOTH",D_NONE:"D_NONE"}),window.Polymer({is:"resizeable-container",properties:{allowright:{reflectToAttribute:!0,type:Boolean,value:!1},allowbottom:{reflectToAttribute:!0,type:Boolean,value:!1},allowleft:{reflectToAttribute:!0,type:Boolean,value:!1},allowtop:{reflectToAttribute:!0,type:Boolean,value:!1},overlay:{reflectToAttribute:!0,type:Boolean,value:!1}},handleResizeStart:null,handleResizeEnd:null,handleResize:null,attached:function(){var a=this,b=new c(this.$.maincontainer,{touchAction:"auto"}),e=d.D_NONE,f=null;b.get("pan").set({direction:c.DIRECTION_ALL});var g=function(b){var c={};if("panstart"===b.type){var g=document.elementFromPoint(b.center.x-b.deltaX,b.center.y-b.deltaY);if(e=d.D_NONE,f=null,g){switch(f=g.id,g.id){case"resizeleft":case"resizeright":e=d.D_HORIZONTAL;break;case"resizecentertop":case"resizecenterbottom":e=d.D_VERTICAL;break;case"resizelefttop":case"resizerighttop":case"resizeleftbottom":case"resizerightbottom":e=d.D_BOTH}e!=d.D_NONE&&b.preventDefault()}a.handleResizeStart&&a.handleResizeStart()}e!==d.D_BOTH&&e!==d.D_HORIZONTAL||("resizeleft"===f||"resizelefttop"===f||"resizeleftbottom"===f?(c.leftDelta=b.deltaX,c.widthDelta=-b.deltaX):"resizeright"!==f&&"resizerighttop"!==f&&"resizerightbottom"!==f||(c.rightDelta=b.deltaX,c.widthDelta=b.deltaX)),e!==d.D_BOTH&&e!==d.D_VERTICAL||("resizecentertop"===f||"resizelefttop"===f||"resizerighttop"===f?(c.topDelta=b.deltaY,c.heightDelta=-b.deltaY):"resizecenterbottom"!==f&&"resizerightbottom"!==f&&"resizeleftbottom"!==f||(c.bottomDelta=b.deltaY,c.heightDelta=b.deltaY)),"panstart"!==b.type?(a.handleResize&&a.handleResize(c),"panend"===b.type&&a.handleResizeEnd&&a.handleResizeEnd()):a.handleResizeStart&&a.handleResizeStart(c)};b.on("panstart panend pan",g)}})}}}),a.register("cc",[],function(){return{setters:[],execute:function(){}}}),a.register("cb",[],function(){return{setters:[],execute:function(){}}}),a.register("18d",[],function(){return{setters:[],execute:function(){}}}),a.register("18e",["a7","cc","cb","29","18d"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){},function(a){c=a.default},function(a){}],execute:function(){!function(){window.Polymer({is:"schematic-controls",properties:{stringUndo:String,stringRedo:String,stringZoomIn:String,stringZoomOut:String},initialize:function(a){var b=this;c.addReadyListener(function(a){b.stringUndo=a.i18n.translate("Undo (Ctrl+Z)").fetch(),b.stringRedo=a.i18n.translate("Redo (Ctrl+Y)").fetch(),b.stringZoomIn=a.i18n.translate("Zoom in").fetch(),b.stringZoomOut=a.i18n.translate("Zoom out").fetch()}),a.attachHandlerToToolbar(b,b.previouslyhandledids)},updatePosition:function(){var a=this.parentElement;this.style.right=a.scrollWidth-a.querySelector(".resizeDetectContainer").scrollWidth+"px"},handleResize:function(){this.updatePosition()},previouslyhandledids:{writable:!0,value:{}}})}()}}}),a.register("18f",[],function(){return{setters:[],execute:function(){}}}),a.register("190",["a7","18f","9c"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){},function(a){c=a.getMeasurementsLiveStorageUrls}],execute:function(){!function(){window.Polymer({is:"measurements-live-storage",ready:function(){var a=this;this._storageIframes=c().map(function(b){var c=document.createElement("iframe");return c.src=b,a.$.wrapper.appendChild(c),c})},set:function(a,b){this._storageIframes.forEach(function(c){return c.contentWindow.postMessage({action:"setMultisimLive",value:{pairingCode:a,multisimTabId:b}},"*")})},clean:function(){this._storageIframes.forEach(function(a){return a.contentWindow.postMessage({action:"removeMultisimLive"},"*")})}})}()}}}),a.register("a7",[],function(){return{setters:[],execute:function(){}}}),a.register("d0",[],function(){return{setters:[],execute:function(){}}}),a.register("191",[],function(){return{setters:[],execute:function(){}}}),a.register("c6",["a7","d0","191"],function(a,b){"use strict";function c(a,b){b?a.setAttribute("disabled","disabled"):a.removeAttribute("disabled")}return{setters:[function(a){},function(a){},function(a){}],execute:function(){window.Polymer({is:"multisim-button",properties:{label:{reflectToAttribute:!0,type:String,value:"",notify:!0,observer:"_labelChanged"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0,observer:"_disabledChanged"},contextDisabled:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},clickthrough:{reflectToAttribute:!0,readonly:!0,type:Boolean,value:!1},handleclick:{reflectToAttribute:!1,type:Function,value:null},active:{reflectToAttribute:!0,type:Boolean,value:!1,notify:!0}},_disabledChanged:function(){c(this.$.button,this.disabled)},_commandContextHelper:null,set commandContextHelper(a){var b=this,d=function(){var a=b._commandContextHelper.testContextEnabled();a===b.contextDisabled&&(b.contextDisabled=!a,c(b.$.button,b.disabled||b.contextDisabled))};a!==b._commandContextHelper&&(b._commandContextHelper&&b._commandContextHelper.removeContextChangeListener(d),b._commandContextHelper=a,b._commandContextHelper&&b._commandContextHelper.addContextChangeListener(d)),d()},get commandContextHelper(){return this._commandContextHelper},attached:function(){var a=this;if(a.clickthrough){var b=document.createElement("div");for(b.setAttribute("id","button"),b.classList.add("multisim-button");a.$.button.childNodes.length;)b.appendChild(a.$.button.childNodes[0]);a.$.button.parentNode.replaceChild(b,a.$.button)}else a.$.button.addEventListener("click",function(b){a.behaviours&&a.behaviours.handleClick?a.behaviours.handleClick.call(a,b):a.handleclick&&a.handleclick(b)})},_labelChanged:function(){this.label&&(this.$.button.innerHTML=this.label)}})}}}),a.register("192",[],function(){return{setters:[],execute:function(){}}}),function(){var d=a.amdDefine;!function(a,e){function f(a){return o.PF.compile(a||"nplurals=2; plural=(n != 1);")}function g(a,b){this._key=a,this._i18n=b}var h=Array.prototype,i=Object.prototype,j=h.slice,k=i.hasOwnProperty,l=h.forEach,m={},n={forEach:function(a,b,c){var d,e,f;if(null!==a)if(l&&a.forEach===l)a.forEach(b,c);else if(a.length===+a.length){for(d=0,e=a.length;d<e;d++)if(d in a&&b.call(c,a[d],d,a)===m)return}else for(f in a)if(k.call(a,f)&&b.call(c,a[f],f,a)===m)return},extend:function(a){return this.forEach(j.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a}},o=function(a){if(this.defaults={locale_data:{messages:{"":{domain:"messages",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}}},domain:"messages",debug:!1},this.options=n.extend({},this.defaults,a),this.textdomain(this.options.domain),a.domain&&!this.options.locale_data[this.options.domain])throw new Error("Text domain set to non-existent domain: `"+a.domain+"`")};o.context_delimiter=String.fromCharCode(4),n.extend(g.prototype,{onDomain:function(a){return this._domain=a,this},withContext:function(a){return this._context=a,this},ifPlural:function(a,b){return this._val=a,this._pkey=b,this},fetch:function(a){return"[object Array]"!={}.toString.call(a)&&(a=[].slice.call(arguments,0)),(a&&a.length?o.sprintf:function(a){return a})(this._i18n.dcnpgettext(this._domain,this._context,this._key,this._pkey,this._val),a)}}),n.extend(o.prototype,{translate:function(a){return new g(a,this)},textdomain:function(a){if(!a)return this._textdomain;this._textdomain=a},gettext:function(a){return this.dcnpgettext.call(this,e,e,a)},dgettext:function(a,b){return this.dcnpgettext.call(this,a,e,b)},dcgettext:function(a,b){return this.dcnpgettext.call(this,a,e,b)},ngettext:function(a,b,c){return this.dcnpgettext.call(this,e,e,a,b,c)},dngettext:function(a,b,c,d){return this.dcnpgettext.call(this,a,e,b,c,d)},dcngettext:function(a,b,c,d){return this.dcnpgettext.call(this,a,e,b,c,d)},pgettext:function(a,b){return this.dcnpgettext.call(this,e,a,b)},dpgettext:function(a,b,c){return this.dcnpgettext.call(this,a,b,c)},dcpgettext:function(a,b,c){return this.dcnpgettext.call(this,a,b,c)},npgettext:function(a,b,c,d){return this.dcnpgettext.call(this,e,a,b,c,d)},dnpgettext:function(a,b,c,d,e){return this.dcnpgettext.call(this,a,b,c,d,e)},dcnpgettext:function(a,b,c,d,e){d=d||c,a=a||this._textdomain;var g;if(!this.options)return g=new o,g.dcnpgettext.call(g,void 0,void 0,c,d,e);if(!this.options.locale_data)throw new Error("No locale data provided.");if(!this.options.locale_data[a])throw new Error("Domain `"+a+"` was not found.");if(!this.options.locale_data[a][""])throw new Error("No locale meta information provided.");if(!c)throw new Error("No translation key found.");var h,i,j,k=b?b+o.context_delimiter+c:c,l=this.options.locale_data,m=l[a],n=(l.messages||this.defaults.locale_data.messages)[""],p=m[""].plural_forms||m[""]["Plural-Forms"]||m[""]["plural-forms"]||n.plural_forms||n["Plural-Forms"]||n["plural-forms"];if(void 0===e)j=0;else{if("number"!=typeof e&&(e=parseInt(e,10),isNaN(e)))throw new Error("The number that was passed in is not a number.");j=f(p)(e)}if(!m)throw new Error("No domain named `"+a+"` could be found.");return!(h=m[k])||j>h.length?(this.options.missing_key_callback&&this.options.missing_key_callback(k,a),i=[c,d],!0===this.options.debug&&console.log(i[f(p)(e)]),i[f()(e)]):(i=h[j])||(i=[c,d],i[f()(e)])}});var p=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function b(a,b){for(var c=[];b>0;c[--b]=a);return c.join("")}var c=function(){return c.cache.hasOwnProperty(arguments[0])||(c.cache[arguments[0]]=c.parse(arguments[0])),c.format.call(null,c.cache[arguments[0]],arguments)};return c.format=function(c,d){var e,f,g,h,i,j,k,l=1,m=c.length,n="",o=[];for(f=0;f<m;f++)if("string"===(n=a(c[f])))o.push(c[f]);else if("array"===n){if(h=c[f],h[2])for(e=d[l],g=0;g<h[2].length;g++){if(!e.hasOwnProperty(h[2][g]))throw p('[sprintf] property "%s" does not exist',h[2][g]);e=e[h[2][g]]}else e=h[1]?d[h[1]]:d[l++];if(/[^s]/.test(h[8])&&"number"!=a(e))throw p("[sprintf] expecting number but found %s",a(e));switch(void 0!==e&&null!==e||(e=""),h[8]){case"b":e=e.toString(2);break;case"c":e=String.fromCharCode(e);break;case"d":e=parseInt(e,10);break;case"e":e=h[7]?e.toExponential(h[7]):e.toExponential();break;case"f":e=h[7]?parseFloat(e).toFixed(h[7]):parseFloat(e);break;case"o":e=e.toString(8);break;case"s":e=(e=String(e))&&h[7]?e.substring(0,h[7]):e;break;case"u":e=Math.abs(e);break;case"x":e=e.toString(16);break;case"X":e=e.toString(16).toUpperCase()}e=/[def]/.test(h[8])&&h[3]&&e>=0?"+"+e:e,j=h[4]?"0"==h[4]?"0":h[4].charAt(1):" ",k=h[6]-String(e).length,i=h[6]?b(j,k):"",o.push(h[5]?e+i:i+e)}return o.join("")},c.cache={},c.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=/^[^\x25]+/.exec(b)))d.push(c[0]);else if(null!==(c=/^\x25{2}/.exec(b)))d.push("%");else{if(null===(c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)))throw"[sprintf] huh?";if(c[2]){e|=1;var f=[],g=c[2],h=[];if(null===(h=/^([a-z_][a-z_\d]*)/i.exec(g)))throw"[sprintf] huh?";for(f.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(g)))f.push(h[1]);else{if(null===(h=/^\[(\d+)\]/.exec(g)))throw"[sprintf] huh?";f.push(h[1])}c[2]=f}else e|=2;if(3===e)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";d.push(c)}b=b.substring(c[0].length)}return d},c}(),q=function(a,b){return b.unshift(a),p.apply(null,b)};o.parse_plural=function(a,b){return a=a.replace(/n/g,b),o.parse_expression(a)},o.sprintf=function(a,b){return"[object Array]"=={}.toString.call(b)?q(a,[].slice.call(b)):p.apply(this,[].slice.call(arguments))},o.prototype.sprintf=function(){return o.sprintf.apply(this,arguments)},o.PF={},o.PF.parse=function(a){var b=o.PF.extractPluralExpr(a);return o.PF.parser.parse.call(o.PF.parser,b)},o.PF.compile=function(a){function b(a){return!0===a?1:a||0}var c=o.PF.parse(a);return function(a){return b(o.PF.interpreter(c)(a))}},o.PF.interpreter=function(a){return function(b){switch(a.type){case"GROUP":return o.PF.interpreter(a.expr)(b);case"TERNARY":return o.PF.interpreter(a.expr)(b)?o.PF.interpreter(a.truthy)(b):o.PF.interpreter(a.falsey)(b);case"OR":return o.PF.interpreter(a.left)(b)||o.PF.interpreter(a.right)(b);case"AND":return o.PF.interpreter(a.left)(b)&&o.PF.interpreter(a.right)(b);case"LT":return o.PF.interpreter(a.left)(b)<o.PF.interpreter(a.right)(b);case"GT":return o.PF.interpreter(a.left)(b)>o.PF.interpreter(a.right)(b);case"LTE":return o.PF.interpreter(a.left)(b)<=o.PF.interpreter(a.right)(b);case"GTE":return o.PF.interpreter(a.left)(b)>=o.PF.interpreter(a.right)(b);case"EQ":return o.PF.interpreter(a.left)(b)==o.PF.interpreter(a.right)(b);case"NEQ":return o.PF.interpreter(a.left)(b)!=o.PF.interpreter(a.right)(b);case"MOD":return o.PF.interpreter(a.left)(b)%o.PF.interpreter(a.right)(b);case"VAR":return b;case"NUM":return a.val;default:throw new Error("Invalid Token found.")}}},o.PF.extractPluralExpr=function(a){a=a.replace(/^\s\s*/,"").replace(/\s\s*$/,""),/;\s*$/.test(a)||(a=a.concat(";"));var b,c=/nplurals\=(\d+);/,d=/plural\=(.*);/,e=a.match(c),f={};if(!(e.length>1))throw new Error("nplurals not found in plural_forms string: "+a);if(f.nplurals=e[1],a=a.replace(c,""),!((b=a.match(d))&&b.length>1))throw new Error("`plural` expression not found: "+a);return b[1]},o.PF.parser=function(){var a={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,"?":6,":":7,"||":8,"&&":9,"<":10,"<=":11,">":12,">=":13,"!=":14,"==":15,"%":16,"(":17,")":18,n:19,NUMBER:20,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"?",7:":",8:"||",9:"&&",10:"<",11:"<=",12:">",13:">=",14:"!=",15:"==",16:"%",17:"(",18:")",19:"n",20:"NUMBER"},productions_:[0,[3,2],[4,5],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,1],[4,1]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return{type:"GROUP",expr:f[h-1]};case 2:this.$={type:"TERNARY",expr:f[h-4],truthy:f[h-2],falsey:f[h]};break;case 3:this.$={type:"OR",left:f[h-2],right:f[h]};break;case 4:this.$={type:"AND",left:f[h-2],right:f[h]};break;case 5:this.$={type:"LT",left:f[h-2],right:f[h]};break;case 6:this.$={type:"LTE",left:f[h-2],right:f[h]};break;case 7:this.$={type:"GT",left:f[h-2],right:f[h]};break;case 8:this.$={type:"GTE",left:f[h-2],right:f[h]};break;case 9:this.$={type:"NEQ",left:f[h-2],right:f[h]};break;case 10:this.$={type:"EQ",left:f[h-2],right:f[h]};break;case 11:this.$={type:"MOD",left:f[h-2],right:f[h]};break;case 12:this.$={type:"GROUP",expr:f[h-1]};break;case 13:this.$={type:"VAR"};break;case 14:this.$={type:"NUM",val:Number(a)}}},table:[{3:1,4:2,17:[1,3],19:[1,4],20:[1,5]},{1:[3]},{5:[1,6],6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{4:17,17:[1,3],19:[1,4],20:[1,5]},{5:[2,13],6:[2,13],7:[2,13],8:[2,13],9:[2,13],10:[2,13],11:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],18:[2,13]},{5:[2,14],6:[2,14],7:[2,14],8:[2,14],9:[2,14],10:[2,14],11:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],18:[2,14]},{1:[2,1]},{4:18,17:[1,3],19:[1,4],20:[1,5]},{4:19,17:[1,3],19:[1,4],20:[1,5]},{4:20,17:[1,3],19:[1,4],20:[1,5]},{4:21,17:[1,3],19:[1,4],20:[1,5]},{4:22,17:[1,3],19:[1,4],20:[1,5]},{4:23,17:[1,3],19:[1,4],20:[1,5]},{4:24,17:[1,3],19:[1,4],20:[1,5]},{4:25,17:[1,3],19:[1,4],20:[1,5]},{4:26,17:[1,3],19:[1,4],20:[1,5]},{4:27,17:[1,3],19:[1,4],20:[1,5]},{6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[1,28]},{6:[1,7],7:[1,29],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{5:[2,3],6:[2,3],7:[2,3],8:[2,3],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,3]},{5:[2,4],6:[2,4],7:[2,4],8:[2,4],9:[2,4],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,4]},{5:[2,5],6:[2,5],7:[2,5],8:[2,5],9:[2,5],10:[2,5],11:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[1,16],18:[2,5]},{5:[2,6],6:[2,6],7:[2,6],8:[2,6],9:[2,6],10:[2,6],11:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[1,16],18:[2,6]},{5:[2,7],6:[2,7],7:[2,7],8:[2,7],9:[2,7],10:[2,7],11:[2,7],12:[2,7],13:[2,7],14:[2,7],15:[2,7],16:[1,16],18:[2,7]},{5:[2,8],6:[2,8],7:[2,8],8:[2,8],9:[2,8],10:[2,8],11:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[2,8],16:[1,16],18:[2,8]},{5:[2,9],6:[2,9],7:[2,9],8:[2,9],9:[2,9],10:[2,9],11:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[2,9],16:[1,16],18:[2,9]},{5:[2,10],6:[2,10],7:[2,10],8:[2,10],9:[2,10],10:[2,10],11:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[1,16],18:[2,10]},{5:[2,11],6:[2,11],7:[2,11],8:[2,11],9:[2,11],10:[2,11],11:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],18:[2,11]},{5:[2,12],6:[2,12],7:[2,12],8:[2,12],9:[2,12],10:[2,12],11:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],18:[2,12]},{4:30,17:[1,3],19:[1,4],20:[1,5]},{5:[2,2],6:[1,7],7:[2,2],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,2]}],defaultActions:{6:[2,1]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(a){e.length=e.length-2*a,f.length=f.length-a,g.length=g.length-a}function c(){var a;return a=d.lexer.lex()||1,"number"!=typeof a&&(a=d.symbols_[a]||a),a}var d=this,e=[0],f=[null],g=[],h=this.table,i="",j=0,k=0,l=0,m=2,n=1;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var o=this.lexer.yylloc;g.push(o),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,q,r,s,t,u,v,w,x,y={};;){if(r=e[e.length-1],this.defaultActions[r]?s=this.defaultActions[r]:(null==p&&(p=c()),s=h[r]&&h[r][p]),void 0===s||!s.length||!s[0]){if(!l){x=[];for(u in h[r])this.terminals_[u]&&u>2&&x.push("'"+this.terminals_[u]+"'");var z="";z=this.lexer.showPosition?"Parse error on line "+(j+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+this.terminals_[p]+"'":"Parse error on line "+(j+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(z,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:o,expected:x})}if(3==l){if(p==n)throw new Error(z||"Parsing halted.");k=this.lexer.yyleng,i=this.lexer.yytext,j=this.lexer.yylineno,o=this.lexer.yylloc,p=c()}for(;;){if(m.toString()in h[r])break;if(0==r)throw new Error(z||"Parsing halted.");b(1),r=e[e.length-1]}q=p,p=m,r=e[e.length-1],s=h[r]&&h[r][m],l=3}if(s[0]instanceof Array&&s.length>1)throw new Error("Parse Error: multiple actions possible at state: "+r+", token: "+p);switch(s[0]){case 1:e.push(p),f.push(this.lexer.yytext),g.push(this.lexer.yylloc),e.push(s[1]),p=null,q?(p=q,q=null):(k=this.lexer.yyleng,i=this.lexer.yytext,j=this.lexer.yylineno,o=this.lexer.yylloc,l>0&&l--);break;case 2:if(v=this.productions_[s[1]][1],y.$=f[f.length-v],y._$={first_line:g[g.length-(v||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(v||1)].first_column,last_column:g[g.length-1].last_column},void 0!==(t=this.performAction.call(y,i,k,j,this.yy,s[1],f,g)))return t;v&&(e=e.slice(0,-1*v*2),f=f.slice(0,-1*v),g=g.slice(0,-1*v)),e.push(this.productions_[s[1]][0]),f.push(y.$),g.push(y._$),w=h[e[e.length-2]][e[e.length-1]],e.push(w);break;case 3:return!0}}return!0}},b=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parseError)throw new Error(a);this.yy.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var a=this._input[0];return this.yytext+=a,this.yyleng++,this.match+=a,this.matched+=a,a.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),a},unput:function(a){return this._input=a+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b;this._more||(this.yytext="",this.match="");for(var c=this._currentRules(),d=0;d<c.length;d++)if(a=this._input.match(this.rules[c[d]]))return b=a[0].match(/\n.*/g),b&&(this.yylineno+=b.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:b?b[b.length-1].length-1:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.matches=a,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],this.performAction.call(this,this.yy,this,c[d],this.conditionStack[this.conditionStack.length-1])||void 0;if(""===this._input)return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return void 0!==a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.performAction=function(a,b,c,d){switch(c){case 0:break;case 1:return 20;case 2:return 19;case 3:return 8;case 4:return 9;case 5:return 6;case 6:return 7;case 7:return 11;case 8:return 13;case 9:return 10;case 10:return 12;case 11:return 14;case 12:return 15;case 13:return 16;case 14:return 17;case 15:return 18;case 16:return 5;case 17:return"INVALID"}},a.rules=[/^\s+/,/^[0-9]+(\.[0-9]+)?\b/,/^n\b/,/^\|\|/,/^&&/,/^\?/,/^:/,/^<=/,/^>=/,/^</,/^>/,/^!=/,/^==/,/^%/,/^\(/,/^\)/,/^$/,/^./],a.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],inclusive:!0}},a}();return a.lexer=b,a}(),void 0!==b?(void 0!==c&&c.exports&&(b=c.exports=o),b.Jed=o):("function"==typeof d&&d.amd&&d("193",[],function(){return o}),a.Jed=o)}(this)}(),a.register("194",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.keys(window.console).reduce(function(a,b){return a[b]=window.NationalInstruments&&window.NationalInstruments.measurementsLive&&window.NationalInstruments.measurementsLive.debug?window.console[b]:function(){},a},{}),c.assert=function(a,b){b||(b="assertion failed"),window.NationalInstruments&&window.NationalInstruments.measurementsLive&&window.NationalInstruments.measurementsLive.debug&&!a&&console.log(b)},a("default",c)}}}),a.register("29",["193","f7","194"],function(a,b){"use strict";function c(a){return a&&a.endsWith("/")?a.substring(0,a.length-1):a}function d(a,b,c,d){if(i=null,a){k||(k=new e(n));var f=function(){i=a,c()};b?w(b,a,f,d):x(a,f,d)}else k=null,m=[],Object.keys(q).forEach(function(a){var b=q[a];b.onload=null,b.timeout=0,b.ontimeout=null,delete q[a]}),d("null locale")}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;return{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){h=Object.freeze({MissingKey:"missingkey",Ready:"translationloaded"}),i=null,j=void 0,k=void 0,l=null,m=[],n={locale_data:{messages:{"":{domain:"messages",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}}},domain:"messages",missing_key_callback:j,_is_default_content:!0},o=f(),p=function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d=c?b[c]:null;if(d){var e=!Array.isArray(d)&&Array.isArray(d.translation);a[c]=e?d.translation:d}}},q={},r=function(a){var b=q[a];return!!b&&(4!==b.readyState||(delete q[a],!1))},s=function(a,b,c){if(r(a))return void c(q);var d=new XMLHttpRequest;d.timeout=15e3,d.ontimeout=function(){d.onload=null,delete q[a],c("timeout on waiting for load")},d.onload=function(){if(delete q[a],404===d.status)c(d.status);else try{var f=JSON.parse(d.responseText);k.options._is_default_content?(p(f.locale_data.messages,f.locale_data.messages),f.missing_key_callback=j,k=new e(f)):p(k.options.locale_data.messages,f.locale_data.messages),b()}catch(a){g.log(a),c(a)}},q[a]=d,d.open("GET",a),d.send()},t=function(a,b,c,d){var e=a.split("-");e.length>1&&(e[1]=e[1].toUpperCase(),a=e.join("-")),function a(e){var f=b+"/i18n/"+e+".json";s(f,function(){c()},function(b){b===q?g.log(f+" is being processed"):404===b&&"en"!==e?a(e.split("-").length>1?e.split("-")[0]:"en"):d("Error on loading "+f+"; cause: "+b)})}(a)},u=function(){if(k)try{o.notifyListeners(h.Ready,l)}catch(a){g.log("some translate listener handler throws exception; exception: "+a)}},v=function(a){return 0===m.length&&(j=function(a){g.log("Missing translation for key:"+a),o.notifyListeners(h.MissingKey,a)}),d(i||"en",a,u,u)},w=function(a,b,d,e){var f=c(a);m.find(function(a){return a===f})?d():(m.push(f),t(b,f,d,e))},x=function(a,b,c){g.assert(a,"invalid arguments: p_locale must be defined");var d=0,e=0,f=function(){d+e>=m.length&&(0===e?b():c())},h=function(){d++,f()},i=function(){e++,f()};f(),m.forEach(function(b){t(a,b,h,i)})},l={get i18n(){return k},get locale(){return i},set locale(a){null!==a&&i===a&&k||d(a,null,u,u)},moduleInit:v,get ready(){return i&&0===Object.keys(q).length},addReadyListener:function(a){o.addListener(h.Ready,a),this.ready&&a(l)},removeListener:function(a){o.removeListener(h.Ready,a)},addMissingKeyListener:function(a){o.addListener(h.MissingKey,a)},removeMissingKeyListener:function(a){o.removeListener(h.MissingKey,a)},clearListeners:function(){o=f()}},a("default",l)}}}),a.register("195",["26","27","1d","1e","150"],function(a,b){"use strict";var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.ChannelError}],execute:function(){a("SignalingChannel",h=function(){function a(){var b=this;e(this,a),this._eventListeners={},this._dispatchEvent=function(a){a.type in b._eventListeners&&b._eventListeners[a.type].forEach(function(b){return b.call(a.source,a)})},this._channel=null}return f(a,[{key:"addEventListener",value:function(a,b){a in this._eventListeners||(this._eventListeners[a]=[]),this._eventListeners[a].push(b)}},{key:"removeEventListener",value:function(a,b){a in this._eventListeners&&(this._eventListeners[a]=this._eventListeners[a].filter(function(a){return a!==b}))}},{key:"_setupEventProxies",value:function(){this._channel.addEventListener("close",this._dispatchEvent),this._channel.addEventListener("error",this._dispatchEvent),this._channel.addEventListener("message",this._dispatchEvent)}},{key:"send",value:function(a){throw new Error('function "send(message)" needs to be implemented by derived class')}},{key:"finalize",value:function(){}}]),a}()),a("SignalingChannel",h),h.WebSocket=function(a){function b(a){e(this,b);var d=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d.host=a,d}return d(b,a),f(b,[{key:"connect",value:function(a,b){var c=this,d=b&&b.timeout||1e3;return this._connectionPromise=this._connectionPromise||new Promise(function(b,e){var f=function(){c._channel.addEventListener("open",i),c._channel.addEventListener("close",k),c._channel.addEventListener("error",l)},h=function(){c._channel&&(c._channel.removeEventListener("open",i),c._channel.removeEventListener("close",k),c._channel.removeEventListener("error",l))},i=function(){clearTimeout(m),h(),c._setupEventProxies(),a.cancel=null,b()},j=function(a){c._connectionPromise=null,clearTimeout(m),h(),c._channel&&c._channel.close(),e(a),c._dispatchEvent({type:"error",reason:a})},k=function(){c._connectionPromise=null,clearTimeout(m),h(),e(g.FailToCreate)},l=function(){},m=void 0;if(d&&(m=setTimeout(function(){return j(g.Timeout)},d)),c._channel&&1===c._channel.readyState)j(g.ChannelExists);else try{c._channel=new WebSocket(c.host),f()}catch(a){e(g.FailToCreate)}a.cancel=j}),this._connectionPromise}},{key:"disconnect",value:function(){this._channel&&(this._channel.close(),this._channel=null),this._connectionPromise=null}},{key:"send",value:function(a){this._channel&&1===this._channel.readyState&&this._channel.send(a)}}]),b}(h),h.MessageChannel=function(a){function b(a,d,f,g){e(this,b);var h=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return h.url=a,h.windowFeatures=f,h.deviceUrl=g,h.windowName=d||"Connection Status",h}return d(b,a),f(b,[{key:"connect",value:function(a,b){var c=this,d=b&&b.timeout||2e4;return this._connectionPromise=this._connectionPromise||new Promise(function(b,e){var f=c.url+"?origin="+document.location.origin;c.deviceUrl&&(f+="&deviceServer="+c.deviceUrl),c._proxyWindow=window.open(f,c.windowName,c.windowFeatures);var h=setTimeout(function(){i(g.Timeout)},d),i=function(a){c._connectionPromise=null,window.removeEventListener("message",c._handleMessage),clearTimeout(h),c._channel&&(c._channel.close(),c._channel=null),c._proxyWindow&&(c._proxyWindow.close(),c._proxyWindow=null),e(a),c._dispatchEvent({type:"error",reason:a})};c._handleMessage=function(d){switch(d.data){case"createChannel":d.origin===new URL(c.url).origin&&d.source===c._proxyWindow&&(clearTimeout(h),h=null,c._channel=d.ports[0],c._setupEventProxies(),c._channel.start(),a.cancel=null,b());break;case"closing":d.origin!==new URL(c.url).origin||d.source!==c._proxyWindow&&void 0!==d.source||i(g.Canceled)}},window.addEventListener("message",c._handleMessage),a.cancel=i}),this._connectionPromise}},{key:"disconnect",value:function(){}},{key:"send",value:function(a){this._channel.postMessage(a)}},{key:"finalize",value:function(){var a=this;window.removeEventListener("message",this._handleMessage),this._proxyWindow.postMessage("connected",new URL(this.url).origin),this._channel.close(),setTimeout(function(){a._proxyWindow.close(),a._proxyWindow=null},3e3),this._connectionPromise=null}}]),b}(h)}}}),a.register("196",["197","1d","1e","26","27","198"],function(a,b){"use strict";var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.WebRtcConnection,i=a.RtcChannelNames}],execute:function(){a("MultisimRemoteConnection",j=function(a){function b(a,c,e){d(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return g._remotePeerId=c,g._myId=e,g._setupRTCPeerConnection(),g}return g(b,a),e(b,[{key:"collectDataChannelAndInstallHooks",value:function(a,b){var c=this,d=this._getDataChannelHooks(null,a,b),e=d.onChannelOpen,f=d.onChannelError;this._deviceConnection.ondatachannel=function(a){switch(a.channel.label){case i.dataChannel:c._dataChannel=a.channel,c._dataChannel.onmessage=c._internalHandlers.dataHandler,c._installDataChannelHooks(c._dataChannel,e,f);break;case i.controlChannel:c._controlChannel=a.channel,c._controlChannel.onmessage=c._internalHandlers.responseHandler,c._installDataChannelHooks(c._controlChannel,e,f);break;case i.negotiationChannel:c._negotiationChannel=a.channel,c._installDataChannelHooks(c._negotiationChannel,e,f)}}}},{key:"createAnswerToRemotePeer",value:function(a){var b=this;this._deviceConnection.setRemoteDescription(a),this._deviceConnection.createAnswer().then(function(a){b._sendSignalingCommandToRemotePeer({command:"answer",answer:a}),b._deviceConnection.setLocalDescription(a)})}},{key:"addIceCandidate",value:function(a){this._deviceConnection.addIceCandidate(a)}},{key:"_sendSignalingCommandToRemotePeer",value:function(a){this._signalingChannel.send(JSON.stringify(c({to:this.remotePeerId,address:this._myId},a)))}},{key:"_handleConnectionChange",value:function(a){switch(a){case"connected":this.onConnected&&this.onConnected();break;case"failed":case"closed":this.close()}}}]),b}(h)),a("MultisimRemoteConnection",j)}}}),a.register("199",["1d","1e","150","196"],function(a,b){"use strict";var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.DeviceError,f=a.ChannelError},function(a){g=a.MultisimRemoteConnection}],execute:function(){a("MultisimDevice",h=function(){function a(b){c(this,a),this._signalingChannel=b,this._measurementsConnections=new Map,this._isAlive=!1}return d(a,[{key:"connect",value:function(a){var b=this;return this._connectionPromise||function(){var c=a&&a.timeout||6e3,d=a&&a.retryCount||0,g=function(){return b._signalingChannel.connect({},{timeout:c}).then(function(){return b._negotiateConnection({})})},h=function a(){return g().catch(function(b){return d-- >1?a():Promise.reject(b)})};b._connectionPromise=h().catch(function(a){return a===f.FailToCreate||a===f.ChannelExists||a===f.Timeout?(window.console.log("connectSignalChannel failed with reason "+a),Promise.reject(e.ChannelConnectionError)):Promise.reject(a)})}(),this._connectionPromise}},{key:"disconnect",value:function(){clearTimeout(this._watchDog),this._measurementsConnections.forEach(function(a){a.close()}),this._signalingChannel&&this._signalingChannel.disconnect(),this._connectionPromise=null}},{key:"sendCommand",value:function(a,b){if(b){var c=this._measurementsConnections.get(b);c?c.sendCommand(a):window.console.log("No connection to this peer "+b)}else this._measurementsConnections.forEach(function(b){b.sendCommand(a)})}},{key:"sendData",value:function(a,b,c){if(c){var d=this._measurementsConnections.get(c);d?d.sendData(a,b):window.console.log("No connection to this peer "+c)}else this._measurementsConnections.forEach(function(c){c.sendData(a,b)})}},{key:"_negotiateConnection",value:function(a){var b=this;return new Promise(function(c,d){b._installSignalingHooks(c,d,a),b._sendNegotiateCommand()})}},{key:"_installSignalingHooks",value:function(a,b,c){var d=this;this._signalingChannel&&(void 0===this._handleSignalingMessage&&(this._handleSignalingMessage=function(e){return d.__handleSignalingMessage(e,a,b,c)}),void 0===this._handleSignalingError&&(this._handleSignalingError=function(a){return d.__handleSignalingError(a,b)}),void 0===this._handleSignalingClose&&(this._handleSignalingClose=function(a){return d.__handleSignalingClose(a)}),this._signalingChannel.removeEventListener("message",this._handleSignalingMessage),this._signalingChannel.removeEventListener("error",this._handleSignalingError),this._signalingChannel.removeEventListener("close",this._handleSignalingClose),this._signalingChannel.addEventListener("message",this._handleSignalingMessage),this._signalingChannel.addEventListener("error",this._handleSignalingError),this._signalingChannel.addEventListener("close",this._handleSignalingClose))}},{key:"__handleSignalingError",value:function(a,b){a.reason===f.Canceled?this.cancel(a.reason):(window.console.log("Signaling channel failed with reason "+a.reason),b(e.ChannelConnectionError))}},{key:"__handleSignalingClose",value:function(a){4e3===a.code?this.cancel(e.DeviceNotFound):(window.console.log("Signaling channel closed with event "+a+", code "+a.code),this.cancel(e.ChannelConnectionError))}},{key:"cancel",value:function(a){var b=a||e.OperationCancelled;this.canceled=!0,this.reason=b,this.oncancel&&this.oncancel(b)}},{key:"_sendNegotiateCommand",value:function(){this._signalingChannel.send(JSON.stringify({command:"register",pairingCode:this.myId}))}},{key:"__handleSignalingMessage",value:function(a,b,c,d){var e=this;if(a.data)try{!function(){var f=JSON.parse(a.data);switch(f.command){case"register":e._myId=f.pairingCode,e._isAlive=!0,e._setupWatchDog(),b&&b();break;case"server-pong":e._isAlive=!0;break;case"offer":var h=f.offer;if(h&&h.sdp&&h.type){if("offer"===h.type){var i=new g(e._signalingChannel,f.from,e._myId);i.onConnected=function(){try{track("Use new feature","connection established")}catch(a){}},i.collectDataChannelAndInstallHooks(c,d),i.createAnswerToRemotePeer(h),e._measurementsConnections.set(f.from,i),i.onresponse=function(a){e.onresponse&&e.onresponse(a,f.from)},i.onclose=function(){e._measurementsConnections.delete(f.from),e.onclose&&e.onclose(f.from)}}}else window.console.log("Can not parse received session description message.");break;case"candidate":var j=f.candidate;void 0===j.sdpMid||void 0===j.sdpMLineIndex||void 0===j.candidate?window.console.log("Invalid candidate"):e._measurementsConnections.get(f.from).addIceCandidate(j)}}()}catch(a){window.console.log("Multisim Live can not parse the returned message, the error is "+a)}}},{key:"_setupWatchDog",value:function(){var a=this;!function b(){if(!a._isAlive)return void(a._signalingChannel&&(a._signalingChannel.disconnect(),a._connectionPromise=null,clearTimeout(a._watchDog),a.onerror&&a.onerror()));a._isAlive=!1,a._signalingChannel.send(JSON.stringify({command:"client-ping"})),a._watchDog=setTimeout(b,5e3)}()}},{key:"myId",get:function(){return this._myId}}]),a}()),a("MultisimDevice",h)}}}),a.register("19a",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)})}}}),a.register("19b",["197","1d","1e","26","19a","27","19c","150"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.ConnectionToDevice},function(a){j=a.DeviceError}],execute:function(){a("SiganlingServerWarningCode",k=Object.freeze({InvalidPairingCode:1020})),a("SiganlingServerWarningCode",k),a("ConnectionToMultisimDevice",l=function(a){function b(a,c){return d(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c))}return h(b,a),e(b,[{key:"_sendSignalingCommandToRemotePeer",value:function(a){this._signalingChannel.send(JSON.stringify(c({pairingCode:this.remotePeerId},a)))}},{key:"__handleSignalingMessage",value:function(a){g(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"__handleSignalingMessage",this).call(this,a);var c=JSON.parse(a.data);switch(c.command){case"warning":c.code===k.InvalidPairingCode&&this.cancel(j.DeviceNotFound)}}}]),b}(i)),a("ConnectionToMultisimDevice",l)}}}),a.register("197",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a})}}}),a.register("26",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b})}}}),a.register("27",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)})}}}),a.register("1d",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")})}}});a.register("1e",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}())}}}),a.register("198",["1d","1e","150"],function(a,b){"use strict";var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.DeviceError,f=a.ChannelError}],execute:function(){a("RtcChannelNames",g=Object.freeze({dataChannel:"data",controlChannel:"control",negotiationChannel:"rtc-negotiation"})),a("RtcChannelNames",g),a("WebRtcConnection",h=function(){function a(b){var d=this;c(this,a),this._signalingChannel=b,this._internalHandlers={responseHandler:function(a){if(d.onresponse){var b="string"==typeof a.data?a.data:(new TextDecoder).decode(a.data),c=JSON.parse(b);d.onresponse(c)}},dataHandler:function(a){d.ondata&&d.ondata(a.data)},closeHandler:function(a){d.onclose&&d.onclose(a.data)},restartHandler:function(a){d.onrestart&&d.onrestart(a.data)}},this.onresponse=null,this.ondata=null,this.onrestart=null,this._cancelToken={canceled:!1,reason:null,cancel:function(a){this.canceled=!0,this.reason=a,this.oncancel&&this.oncancel(a)}}}return d(a,[{key:"disconnectSignalingChannel",value:function(){this._signalingChannel&&this._signalingChannel.disconnect()}},{key:"disconnect",value:function(){this.close(),this.disconnectSignalingChannel(),this._connectionPromise=null}},{key:"close",value:function(){this._dataChannel&&(this._dataChannel.close(),this._dataChannel=null),this._controlChannel&&(this._controlChannel.close(),this._controlChannel=null),this._negotiationChannel&&(this._negotiationChannel.close(),this._negotiationChannel=null),this._deviceConnection&&(this._deviceConnection.close(),this._notifyCloseEvent(),this._deviceConnection=null)}},{key:"_notifyCloseEvent",value:function(){!this._restartTimeoutId&&this._deviceConnection&&(this._internalHandlers.closeHandler(new CloseEvent("close")),this._deviceConnection=null)}},{key:"cancel",value:function(a){this._cancelToken.cancel(a||e.OperationCancelled)}},{key:"sendCommand",value:function(a){if(this.connected)try{this._controlChannel.send((new TextEncoder).encode(JSON.stringify(a)))}catch(a){window.console.log("control channel send error: "+a)}}},{key:"sendData",value:function(a,b){if(this.connected){var c=(new TextEncoder).encode(JSON.stringify(b||{})),d=new TextEncoder("utf-8").encode("\r\n"),e=new Uint8Array(c.length+d.length+a.length);e.set(c),e.set(d,c.length),e.set(a,c.length+d.length);var f=16384,g=e.length,h=28,i=f-h,j={HeaderSize:h,DataSize:0,FrameSize:f,TotalDataSize:g,TotalFrames:Math.ceil(g/i),FrameIndex:0,DataOffset:0};try{for(;j.DataOffset<g&&this._dataChannel&&"open"===this._dataChannel.readyState;){var k=new Uint8Array(f);this._writeU32NumberToU8Array(j.HeaderSize,k,0),this._writeU32NumberToU8Array(j.TotalDataSize,k,4),j.DataSize=Math.min(i,g-j.DataOffset),this._writeU32NumberToU8Array(j.DataSize,k,8),this._writeU32NumberToU8Array(j.FrameSize,k,12),this._writeU32NumberToU8Array(j.TotalFrames,k,16),this._writeU32NumberToU8Array(j.FrameIndex,k,20),this._writeU32NumberToU8Array(j.DataOffset,k,24),k.set(e.slice(j.DataOffset,j.DataOffset+j.DataSize),h),this._dataChannel.send(k),j.FrameIndex+=1,j.DataOffset=j.FrameIndex*i}}catch(a){window.console.log("data channel send error: "+a)}}}},{key:"_writeU32NumberToU8Array",value:function(a,b,c){var d=new ArrayBuffer(4);return new DataView(d).setUint32(0,a,!0),b.set(new Uint8Array(d),c),b}},{key:"_setupRTCPeerConnection",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c={iceServers:[{urls:["stun:stun.multisim.com:3478","stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302"]}]};if(b){[{urls:"turn:54.242.200.128:3478",username:"nishacademicweb",credential:"welcome"},{urls:"turn:54.223.70.100:3478",username:"nishacademicweb",credential:"welcome"}].forEach(function(a){return c.iceServers.push(a)})}"undefined"!=typeof InstallTrigger&&c.iceServers.forEach(function(a){a.urls=a.urls.slice(0,2)}),this._deviceConnection=new RTCPeerConnection(c),this._deviceConnection.onicecandidate=function(b){window.console.log("onicecandidate event.candidate = "+b.candidate),b.candidate&&(a._negotiationChannel&&"open"===a._negotiationChannel.readyState?a._negotiationChannel.send((new TextEncoder).encode(JSON.stringify(b.candidate))):a._sendSignalingCommandToRemotePeer({command:"candidate",candidate:b.candidate}))},this._deviceConnection.onconnectionstatechange=function(){var b=a._deviceConnection.connectionState;window.console.log("onconnectionstatechange to "+b),a._handleConnectionChange(b)},this._deviceConnection.oniceconnectionstatechange=function(b){var c=b.target.iceConnectionState;window.console.log("oniceconnectionstatechange to "+c),a._handleConnectionChange(c)},this._deviceConnection.addEventListener("close",this._internalHandlers.closeHandler)}},{key:"_setupRTCDataChannels",value:function(){this._dataChannel=this._deviceConnection.createDataChannel(g.dataChannel),this._dataChannel.binaryType="arraybuffer",this._dataChannel.onmessage=this._internalHandlers.dataHandler,this._controlChannel=this._deviceConnection.createDataChannel(g.controlChannel),this._controlChannel.binaryType="arraybuffer",this._controlChannel.onmessage=this._internalHandlers.responseHandler,this._negotiationChannel=this._deviceConnection.createDataChannel(g.negotiationChannel),this._negotiationChannel.binaryType="arraybuffer"}},{key:"_handleConnectionChange",value:function(a){}},{key:"_negotiateConnection",value:function(a){var b=this;return new Promise(function(c,d){b._installSignalingHooks(c,d,a),b._sendNegotiateCommand()})}},{key:"_sendNegotiateCommand",value:function(){}},{key:"_sendSignalingCommandToRemotePeer",value:function(a){}},{key:"__handleSignalingMessage",value:function(a,b,c,d){}},{key:"__handleSignalingError",value:function(a,b){a.reason===f.Canceled?this.cancel(a.reason):(window.console.log("__handleSignalingError failed with reason "+a.reason),b(e.ChannelConnectionError))}},{key:"__handleSignalingClose",value:function(a){4e3===a.code?this.cancel(e.DeviceNotFound):(window.console.log("__handleSignalingClose failed with event "+a+", code "+a.code),this.cancel(e.ChannelConnectionError))}},{key:"_installSignalingHooks",value:function(a,b,c){var d=this;this._signalingChannel&&(this._handleSignalingMessage=function(e){return d.__handleSignalingMessage(e,a,b,c)},this._handleSignalingError=function(a){return d.__handleSignalingError(a,b)},this._handleSignalingClose=function(a){return d.__handleSignalingClose(a)},this._signalingChannel.addEventListener("message",this._handleSignalingMessage),this._signalingChannel.addEventListener("error",this._handleSignalingError),this._signalingChannel.addEventListener("close",this._handleSignalingClose));var e=this._getDataChannelHooks(a,b,c),f=e.onChannelOpen,g=e.onChannelError;this._installDataChannelHooks(this._dataChannel,f,g),this._installDataChannelHooks(this._controlChannel,f,g),this._installDataChannelHooks(this._negotiationChannel,f,g)}},{key:"_getDataChannelHooks",value:function(a,b,c){var d=this,e=function(a){d._removeSignalingHooks(),b&&b(new Error(a))};return c.cancel=e,{onChannelOpen:function(){d._dataChannel&&"open"===d._dataChannel.readyState&&d._controlChannel&&"open"===d._controlChannel.readyState&&d._negotiationChannel&&"open"===d._negotiationChannel.readyState&&(d._dataChannel.onopen=null,d._controlChannel.onopen=null,d._negotiationChannel.onopen=null,d._dataChannel.onerror=null,d._controlChannel.onerror=null,d._negotiationChannel.onerror=null,a&&a())},onChannelError:function(a){e(a)}}}},{key:"_installDataChannelHooks",value:function(a,b,c){a&&(a.onopen=b,a.onerror=c)}},{key:"_removeSignalingHooks",value:function(){this._signalingChannel&&(this._signalingChannel.removeEventListener("message",this._handleSignalingMessage),this._signalingChannel.removeEventListener("error",this._handleSignalingError),this._signalingChannel.removeEventListener("close",this._handleSignalingClose)),this._dataChannel&&(this._dataChannel.onopen=null,this._dataChannel.onerror=null),this._controlChannel&&(this._controlChannel.onopen=null,this._controlChannel.onerror=null),this._negotiationChannel&&(this._negotiationChannel.onopen=null,this._negotiationChannel.onerror=null)}},{key:"remotePeerId",get:function(){return this._remotePeerId}},{key:"connected",get:function(){var a=this,b=["connected","completed","disconnected"];return!(!this._deviceConnection||!b.find(function(b){return b===a._deviceConnection.iceConnectionState}))}}]),a}()),a("WebRtcConnection",h)}}}),a.register("19c",["1d","1e","26","27","150","198"],function(a,b){"use strict";var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.DeviceError,h=a.ChannelError},function(a){i=a.WebRtcConnection}],execute:function(){a("ConnectionToDevice",j=function(a){function b(a,d){c(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return f._remotePeerId=d,f}return f(b,a),d(b,[{key:"connect",value:function(a){var b=this;return this._connectionPromise||function(){b._cancelToken.canceled=!1,b._cancelToken.reason=null;var c=a&&a.enableTurnServer||!1;b._setupRTCPeerConnection(c),b._setupRTCDataChannels();var d=a&&a.timeout||8e3,e=a&&a.retryCount||0,f=a&&a.retryDelay||1e3,i=function(a){return new Promise(function(b){return setTimeout(b,a)})},j=function a(b){return function(){var c=b.apply(void 0,arguments);if(c instanceof Promise)return c.catch(function(c){return e-- >1?i(f).then(a(b)):Promise.reject(c)})}},k={},l=function(a,c){return function(){for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c.canceled?Promise.reject(b._cancelToken.reason):new Promise(function(b,d){c.oncancel=function(a){k.cancel&&k.cancel(),d(a)},a.apply(void 0,e).then(function(a){return c.canceled||b(a)}).catch(function(a){return d(a)})})}},m=function(a){return b._signalingChannel.connect(a,{timeout:6e3}).catch(function(a){return a===h.FailToCreate||a===h.ChannelExists||a===h.Timeout?(window.console.log("connectSignalChannel failed with reason "+a),Promise.reject(g.ChannelConnectionError)):Promise.reject(a)})},n=-1,o=l(function(){return m(k)},b._cancelToken)().then(l(function(){return n=setTimeout(function(){return b.cancel(g.Timeout)},d),b._deviceConnection.createOffer()},b._cancelToken)).then(l(function(a){return b._deviceConnection.setLocalDescription(a)},b._cancelToken)).then(j(l(function(){return b._negotiateConnection(k)},b._cancelToken))).then(l(function(a){return b._signalingChannel.finalize(),b._removeSignalingHooks(),Promise.resolve(a)},b._cancelToken));b._connectionPromise=o.then(l(function(a){return clearTimeout(n),Promise.resolve(a)},b._cancelToken)).catch(function(a){clearTimeout(n),b._removeSignalingHooks(),b._signalingChannel.disconnect(),b._deviceConnection&&(b._deviceConnection.close(),b._deviceConnection=null),b._connectionPromise=null;var c=void 0;return c=a===h.Timeout?Promise.reject(g.DeviceConnectionError):a===h.Canceled?Promise.reject(g.OperationCancelled):Promise.reject(a),window.console.log("device.connect() failed with reason "+a),c})}(),this._connectionPromise}},{key:"_handleConnectionChange",value:function(a){var b=this;switch(a){case"failed":this._restartTimeoutId?(clearTimeout(this._restartTimeoutId),this._restartTimeoutId=null,this._internalHandlers.closeHandler(new CloseEvent("close")),this.disconnect()):(this._restartTimeoutId=setTimeout(function(){b._restartTimeoutId=null},6e4),this.disconnect(),this.connect().then(function(){b._internalHandlers.restartHandler(new CustomEvent("restart"))}).catch(function(){b._internalHandlers.closeHandler(new CloseEvent("close")),b.disconnect()}));break;case"closed":this._notifyCloseEvent()}}},{key:"_sendNegotiateCommand",value:function(){this._sendSignalingCommandToRemotePeer({command:"offer",offer:this._deviceConnection.localDescription})}},{key:"__handleSignalingMessage",value:function(a){var b=JSON.parse(a.data);if(b.address===this.remotePeerId||"usb"===this.remotePeerId)switch(b.command){case"answer":this._deviceConnection.setRemoteDescription(b.answer);break;case"candidate":this._deviceConnection.addIceCandidate(b.candidate)}}}]),b}(i)),a("ConnectionToDevice",j)}}}),a.register("19d",["197","1d","1e","26","27","19c"],function(a,b){"use strict";var c,d,e,f,g,h,i;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.ConnectionToDevice}],execute:function(){a("ConnectionToElvisDevice",i=function(a){function b(a,c){return d(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c))}return g(b,a),e(b,[{key:"_sendSignalingCommandToRemotePeer",value:function(a){this._signalingChannel.send(JSON.stringify(c({address:this.remotePeerId},a)))}}]),b}(h)),a("ConnectionToElvisDevice",i)}}}),a.register("150",[],function(a,b){"use strict";var c,d;return{setters:[],execute:function(){a("DeviceError",c=Object.freeze({OperationCancelled:"Operation cancelled",Timeout:"Timeout",DeviceConnectionError:"Could not connect to device",ChannelConnectionError:"Could not connect to server",DeviceNotFound:"Could not locate the device",CodePrefix:"Invalid device ID prefix",DuplicatedUsername:"Duplicated name",SafariNoHostCandidate:"Safari does not generate host ice candidate."})),a("ChannelError",d=Object.freeze({ChannelExists:"Signaling channel already exists",FailToCreate:"Failed to create signaling channel",Timeout:"Connection timed out",Canceled:"Operation cancelled,"})),a("DeviceError",c),a("ChannelError",d)}}}),a.register("5e",["195","199","19b","19d","150"],function(a,b){"use strict";var c,d,e,f,g;return{setters:[function(a){c=a.SignalingChannel},function(a){d=a.MultisimDevice},function(a){e=a.ConnectionToMultisimDevice},function(a){f=a.ConnectionToElvisDevice},function(a){g=a.DeviceError}],execute:function(){a("SignalingChannel",c),a("ConnectionToMultisimDevice",e),a("ConnectionToElvisDevice",f),a("MultisimDevice",d),a("DeviceError",g)}}}),a.register("f7",[],function(a,b){"use strict";function c(a,b){if(typeof b!==a)throw new Error("Parameter invalid, expected type === "+a+" but provided type === "+typeof b);return!0}function d(a,b,d,e){var f=!1;if(c("function",b)&&c("string",a)){d[a]=d[a]||[];var g=d[a];-1===g.indexOf(b)&&(b.weight=e||0,g.push(b),g.sort(function(a,b){return a.weight-b.weight}),f=!0)}return f}function e(a,b,c){var d=c[a],e=!1;if(d)if(b){var f=d.indexOf(b);-1!==f&&(d.splice(f,1),e=!0,0===d.length&&delete c[a])}else d&&(delete c[a],e=!0);return e}function f(a,b,c){var d=!1;if(a)d=e(a,b,c);else{var f=[];for(var g in c)c.hasOwnProperty(g)&&f.push(g);for(var h=0;h<f.length;h++)d=e(f[h],b,c)||d}return d}function g(a,b,c,d){var e=c[a];if(e){e=e.slice(0);for(var f=0;f<e.length;f++)try{e[f](b)}catch(a){if(!d)throw a;d(a)}}}function h(){var a={},b=null;return{addListener:function(b,c,e){return d(b,c,a,e)},removeListener:function(b,c){return f(b,c,a)},notifyListeners:function(c,d){g(c,d,a,b)},getEventListeners:function(b){return a[b]||[]},getListenerEvents:function(b){var c=[];for(var d in a)a.hasOwnProperty(d)&&-1!==a[d].indexOf(b)&&c.push(d);return c},setExceptionCallback:function(a){b=a}}}return a("default",h),{setters:[],execute:function(){}}}),a.register("30",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({DESIGN_CHANGED:"designChanged",NAME_CHANGED:"nameChanged",METADATA_CHANGED:"metadatachanged",GLOBAL_PROBE_SETTINGS_CHANGED:"globalProbeSettingsChanged",ANIMATED_COMPONENT_UPDATED:"animatedComponentUpdated",DESIGN_MODIFIED:"designModified",SOURCE_CHANGED:"sourceChanged"}),a("default",c)}}}),a.register("9c",[],function(a,b){"use strict";function c(){return g?[j]:h?[k,l]:i?[m]:[n]}function d(){return c().map(function(a){return""+a+p})}function e(){return""+c()[0]+q}function f(a){var b=new URLSearchParams;return b.set("settings",JSON.stringify(r)),b.set("multisimstream",JSON.stringify(a)),e()+"?"+b}var g,h,i,j,k,l,m,n,o,p,q,r;return a("getMeasurementsLiveStorageUrls",d),a("getMeasurementsLiveMeasureUrl",e),a("generateMeasurementsLivePreconfigScopeUrl",f),{setters:[],execute:function(){g=window.multisim.versionInfo.isDevelopment,h=!g&&/dev/.test(document.location.origin),i=!h&&/staging/.test(document.location.origin),j="http:"+document.location.origin.split(":")[1]+":8088",k="https://lobbybar-dev.multisim.com",l="https://lobbybar-ats.multisim.com",m="https://lobbybar-staging.multisim.com",n="https://measurementslive.ni.com",a("signallingServerAddress",o=g||h?"wss://m2-signaling-dev.multisim.com:1339":"wss://m2-signaling-server.multisim.com:1339"),a("signallingServerAddress",o),p="/cdn/instruments/local-storage/index.html",q=g?"/":"/measure.html",r={instrumentData:{instruments:{large:[{name:"scope"}],small:[],poppedOut:[]},order:{large:["scope"],small:[]},instrumentsInitialSettingsMap:{scope:JSON.stringify({isIntegratedWithMultisim:!0})}},hasInstrumentOptions:!0}}}}),a.register("34",["1d","1e","5e","f7","22","30","32","9c","21"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.MultisimDevice,f=a.SignalingChannel},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.signallingServerAddress},function(a){l=a.default}],execute:function(){a("MultisimDeviceControllerEvents",m=Object.freeze({pairingCodeChanged:"pairingCodeChanged",deviceChanged:"deviceChanged",disconnected:"disconnected",openDeviceConnection:"openDeviceConnection",closeDeviceConnection:"closeDeviceConnection",deviceConnectionError:"deviceConnectionError",signalingServerConnectionFailed:"signalingServerConnectionFailed"})),a("MultisimDeviceState",n=Object.freeze({Disabled:"disabled",Registering:"registering",Serving:"serving"})),a("CommandsWithMeasurements",o=Object.freeze({Circuit:"circuit",Probes:"probes",StartSimulation:"startSimulation",RequestData:"requestData"})),p=.02,a("MultisimDeviceController",q=function(){function a(b,d,e){var f=this;c(this,a),this._simulationController=b,this._activeDesignGetter=d,this._signallingServerAddress=k,this._pairingCode=null,this._state=n.Disabled,this.listeners=g(),this._measurementsLiveStorage=e,this.listeners.addListener(m.pairingCodeChanged,function(a){var b=a.pairingCode;return e.set(b,f.getTimeStampId())}),this.listeners.addListener(m.disconnected,function(){return e.clean()}),this.listeners.addListener(m.deviceConnectionError,function(){f._multisimDeviceConnect()}),this._disconnectCleaners=[],this._collectionDataInfo=new Map}return d(a,[{key:"doConnect",value:function(){var a=this;this._state===n.Disabled&&(this._state=n.Registering,this._connectTimeout=setTimeout(function(){a._registerToSignalingServer(),a._connectTimeout=null},1))}},{key:"disconnect",value:function(){this._state!==n.Disabled&&(this._state=n.Disabled,clearTimeout(this._connectTimeout),this._multisimDevice&&(this._multisimDevice.disconnect(),this._multisimDevice=null),this._pairingCode=null,this._disconnectCleaners.forEach(function(a){return a()}),this._disconnectCleaners=[],this.listeners.notifyListeners(m.disconnected))}},{key:"getPairingCodeAsync",value:function(){var a=this;return this._pairingCode?Promise.resolve(this._pairingCode):new Promise(function(b){var c=function c(d){var e=d.pairingCode;a.listeners.removeListener(m.pairingCodeChanged,c),b(e)};a.listeners.addListener(m.pairingCodeChanged,c)})}},{key:"getTimeStampId",value:function(){return isFinite(this._timeStampId)||(this._timeStampId=Date.now()),this._timeStampId}},{key:"sendCircuitInformation",value:function(a){this._multisimDevice&&this._multisimDevice.sendCommand({command:o.Circuit,circuit:this._activeDesignGetter().designName,pairingCode:this._multisimDevice.myId},a)}},{key:"sendStreamProbesInformation",value:function(a){var b=this;this._multisimDevice&&function(){var c=b._activeDesignGetter(),d=c.probeController.getProbes().filter(function(a){return c.probeController.getProbeType(a)===h.PROBE_VOLTAGE&&a.streamToMeasurementsLive}).map(function(a){return{value:a.probeID,displayText:a.probeID}});b._multisimDevice.sendCommand({command:o.Probes,probes:d},a)}()}},{key:"_registerToSignalingServer",value:function(){var a=new f.WebSocket(this.signallingServerAddress+"/multisim");this._multisimDevice=new e(a),this.listeners.notifyListeners(m.deviceChanged,this._multisimDevice),this._multisimDeviceConnect()}},{key:"_setPairingCode",value:function(a){window.console.log("pairing code is "+a),this._pairingCode=a,this._state=n.Serving,this.listeners.notifyListeners(m.pairingCodeChanged,{pairingCode:a})}},{key:"_multisimDeviceConnect",value:function(){var a=this;this._multisimDevice.connect({timeout:6e3,retryCount:3,retryDelay:500}).then(function(){a._multisimDevice.onresponse=function(b,c){return a._handleResponse(b,c)},a._multisimDevice.ondata=function(a,b){},a._multisimDevice.onclose=function(b){a._collectionDataInfo.delete(b),a.listeners.notifyListeners(m.closeDeviceConnection)},a._multisimDevice.onerror=function(b){var c="object"==typeof b?b.message:b;window.console.log("Connection to signaling server has something wrong.("+c+")"),a.listeners.notifyListeners(m.deviceConnectionError,b)},a._setPairingCode(a._multisimDevice.myId),a._addListenerToDesignNameChanged(),a._addListenerToSimulationController(),a.listeners.notifyListeners(m.openDeviceConnection)}).catch(function(){a.listeners.notifyListeners(m.signalingServerConnectionFailed)})}},{key:"_handleResponse",value:function(a,b){switch(a.command){case o.Circuit:this.sendCircuitInformation(b);break;case o.Probes:this.sendStreamProbesInformation(b);break;case o.RequestData:var c=void 0;c=Array.isArray(a.probeId)?a.probeId:[a.probeId];var d=Object.assign(this._collectionDataInfo.get(b)||{},{startIndex:this._simulationController.dataManager.length,acquisitionTimeToStream:a.acquisitionTime||0,acquisitionDelayToStream:a.acquisitionDelay||0,probeToStream:c,triggerForStream:a.trigger||{},shouldCollectData:!0,triggerStartIndex:this._simulationController.dataManager.length,triggerIndex:this._simulationController.dataManager.length,readyForTrigger:!1,triggered:!1,triggerOffset:0});this._collectionDataInfo.set(b,d),this._simulationController.ensureRetrieveNextData()}}},{key:"_addListenerToDesignNameChanged",value:function(){var a=this,b=function(){return a.sendCircuitInformation()},c=this._activeDesignGetter();c.listeners.addListener(i.NAME_CHANGED,b),this._disconnectCleaners.push(function(){c.listeners.removeListener(i.NAME_CHANGED,b)})}},{key:"_addListenerToSimulationController",value:function(){var a=this,b=function(){a._collectionDataInfo.forEach(function(a){Object.assign(a,{startIndex:0,triggerStartIndex:0,triggerIndex:0,readyForTrigger:!1,triggered:!1,triggerOffset:0})}),a._sendStartSimulationCommand()};this._simulationController.listeners.addListener(j.StartSimulation,b);var c=function(b){b.activeAnalysis===l.Interactive&&a._sendSimulatedData()};this._simulationController.dataManager.dataUpdateListeners.addListener(this._simulationController.dataManager.EDataUpdateEvents.AddData,c),this._disconnectCleaners.push(function(){a._simulationController.listeners.removeListener(j.StartSimulation,b),a._simulationController.dataManager.dataUpdateListeners.removeListener(a._simulationController.dataManager.EDataUpdateEvents.AddData,c)})}},{key:"_sendStartSimulationCommand",value:function(){this._multisimDevice&&this._multisimDevice.sendCommand({command:o.StartSimulation})}},{key:"_sendSimulatedData",value:function(){var a=this;this._collectionDataInfo.forEach(function(b,c){if(b.shouldCollectData){var d=a._generateProbeIndexInfo(b.probeToStream);0!==d.length&&a._collectAndSendSimulatedData(d,c,b)}})}},{key:"_generateProbeIndexInfo",value:function(a){var b=this._simulationController.dataManager.getSignalNames(),c=[];return a.forEach(function(a){var d=b.findIndex(function(b){return b.displayNames.some(function(b){return b.includes(":")&&b.match(/(.*):.*/)[1]===a})});-1!==d&&c.push({probeId:a,index:d})}),c}},{key:"_ensureEnoughDataForPreTrigger",value:function(a){if(a.readyForTrigger)return!0;if(!a.acquisitionDelayToStream||a.acquisitionDelayToStream>=0)return a.readyForTrigger=!0,!0;var b=-a.acquisitionDelayToStream,c=this._simulationController.dataManager,d=c.length,e=a.startIndex,f=c.getRawData(e,e+1)[0][0];if(c.getRawData(d-1,d)[0][0]>f+b){var g=a.triggerStartIndex,h=c.getRawData(g,d)[0],i=h.findIndex(function(a){return a>=f+b});return a.triggerStartIndex=g+i,a.triggerIndex=a.triggerStartIndex,a.readyForTrigger=!0,!0}return a.triggerStartIndex=d-1,a.triggerIndex=a.triggerStartIndex,!1}},{key:"_searchTriggerPointFromSignals",value:function(a,b,c,d,e){for(var f=void 0,g=0;g<e.length;g+=1)if(f=this._simulationController.dataManager.getTriggerPoint(a,b,c,d,e[g]))return f}},{key:"_findTriggerPoint",value:function(a,b){if(!a.triggered){var c=this._simulationController.dataManager,d=c.length,e=c.getRawData(a.triggerStartIndex,a.triggerStartIndex+1)[0][0],f=c.getRawData(a.triggerIndex,a.triggerIndex+1)[0][0],g=c.getRawData(d-1,d)[0][0],h=a.triggerForStream,i=c.getSignalNames(),j=h&&h.source?i.find(function(a){return a.displayNames.some(function(a){return a.includes(":")&&a.match(/(.*):.*/)[1]===h.source})}):void 0,k=j?j.signalName:void 0,l=!1,m=void 0,n=isFinite(h.level)?h.level:null;if(k&&(m=c.getTriggerPoint(f,h.onRising,h.onFalling,n,k)),!m){if(g<=e+p)return void(a.triggerIndex=d-1);l=!0;var o=b.map(function(a){return i[a.index].signalName}).filter(function(a){return a!==k});if(m=c.getTriggerPoint(e,!0,!1,null,k),m||(m=c.getTriggerPoint(e,!1,!0,null,k)),m||(m=this._searchTriggerPointFromSignals(e,!0,!1,null,o)),m||(m=this._searchTriggerPointFromSignals(e,!1,!0,null,o)),!m)return a.triggerIndex=a.triggerStartIndex,void(a.triggered=!0)}var q=l?a.triggerStartIndex:a.triggerIndex,r=c.getRawData(q,d)[0],s=r.findIndex(function(a){return a>m})-1,t=r[s];a.triggerIndex=q+s,a.triggered=!0,a.triggerOffset=m-t}}},{key:"_collectAndSendSimulatedData",value:function(a,b,c){if(!this._ensureEnoughDataForPreTrigger(c))return void this._simulationController.ensureRetrieveNextData();if(this._findTriggerPoint(c,a),!c.triggered)return void this._simulationController.ensureRetrieveNextData();var d=this._simulationController.dataManager,e=d.length,f=d.getRawData(e-1,e)[0][0],g=d.getRawData(c.triggerIndex,c.triggerIndex+1)[0][0];if(f<=g+c.acquisitionTimeToStream+c.acquisitionDelayToStream+c.triggerOffset)return void this._simulationController.ensureRetrieveNextData();var h=d.getRawData(c.startIndex,e),i=h[0].findIndex(function(a){return a>=g+c.acquisitionDelayToStream}),j=h[0][i],k=h[0].findIndex(function(a){return a>=g+c.acquisitionDelayToStream+c.acquisitionTimeToStream+c.triggerOffset});if(this._multisimDevice){for(var l=h[0].slice(i,k+1),m=a.map(function(a){return h[a.index].slice(i,k+1)}),n=function(a){m.some(function(b){return isNaN(b[a])})&&(l.splice(a,1),m.forEach(function(b){return b.splice(a,1)}),a-=1),p=a},p=0;p<l.length;p+=1)n(p);var q=new Uint8Array(new Float64Array(l).buffer),r=new Uint8Array(q.length*(a.length+1));r.set(q);var s=[];m.forEach(function(b,c){var d=new Uint8Array(new Float64Array(b).buffer);r.set(d,q.length*(c+1)),s.push(a[c].probeId)}),this._multisimDevice.sendData(r,{command:o.RequestData,probes:s,triggerOffset:g-j+c.triggerOffset},b),c.shouldCollectData=!1,c.startIndex=e}}},{key:"state",get:function(){return this._state}},{key:"signallingServerAddress",get:function(){return this._signallingServerAddress}}]),a}()),a("MultisimDeviceController",q),a("MultisimDeviceControllerEvents",m),a("MultisimDeviceState",n),a("CommandsWithMeasurements",o)}}}),a.register("32",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({StartSimulation:"startSimulation",PauseSimulation:"pauseSimulation",ResumeSimulation:"resumeSimulation",StopSimulation:"stopSimulation",SimulationRunning:"simulationRunning",RunStateChanged:"runStateChanged",SimulationErrored:"simulationErrored",SimWorkerCrashed:"simWorkerCrashed",DataAvailable:"dataAvailable",SimulatorLoadingBegin:"simulatorLoading",SimulatorLoadStateChange:"simulatorLoadStateChange",SimulatorLoaded:"simulatorLoaded",ActiveAnalysisChanged:"activeAnalysisChanged",SimulationSettingsChanged:"simulationSettingsChanged",SettingsFeedbackChanged:"SettingsFeedbackChanged",StreamConnectionChange:"streamConnectionChange",StreamErrored:"streamErrored"}),a("default",c)}}}),a.register("22",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({PROBE_VOLTAGE:"voltage",PROBE_CURRENT:"current",PROBE_VOLTAGE_CURRENT:"voltage_and_current",PROBE_EXPRESSION:"expression",PROBE_DATA:"data",PROBE_REFERENCE:"reference",PROBE_DIGITAL:"digital"}),a("default",c)}}}),a.register("44",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({Running:"running",Stopped:"stopped",Paused:"paused"}),a("default",c)}}}),a.register("21",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c=Object.freeze({Interactive:"interactive",Transient:"transient",AC:"AC",DC:"DC",DC_SWEEP:"DC Sweep",PARAM_SWEEP:"Parameter Sweep"}),a("default",c)}}}),a.register("19e",["a7","c6","192","29","34","32","22","44","21"],function(a,b){"use strict";var c,d,e,f,g,h,i;return{setters:[function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.MultisimDeviceControllerEvents,e=a.MultisimDeviceState},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){!function(){window.Polymer({is:"stream-status",properties:{show:{type:Boolean,reflectToAttribute:!0,value:!1},stringIdle:String,stringStreaming:String,stringInfo:String,stringDisable:String},attached:function(){var a=this;c.addReadyListener(function(b){a.stringIdle=b.i18n.translate("Run interactive simulation to stream data to MeasurementsLive").fetch(),a.stringStreaming=b.i18n.translate("Streaming data to MeasurementsLive").fetch(),a.stringDisable=b.i18n.translate("Disable streaming").fetch()}),this._detachedCleaners=[]},dettached:function(){this._detachedCleaners.forEach(function(a){return a()}),this._detachedCleaners=[]},initialize:function(a,b,c){var e=this;this._simulationController=a,this._multisimDeviceController=a.multisimDeviceController;var h=function(){return e.updateStreamState()};this._simulationController.listeners.addListener(f.RunStateChanged,h),this._multisimDeviceController.listeners.addListener(d.pairingCodeChanged,h),this._multisimDeviceController.listeners.addListener(d.disconnected,h),this._detachedCleaners=this._detachedCleaners||[],this._detachedCleaners.push(function(){e._simulationController.listeners.removeListener(f.RunStateChanged,h),e._multisimDeviceController.listeners.removeListener(d.pairingCodeChanged,h),e._multisimDeviceController.listeners.removeListener(d.disconnected,h)}),this.$.disableButton.addEventListener("click",function(){var a=b().probeController,d=c().sheetTemplateController.probeController;a.getProbes().forEach(function(b){a.getProbeType(b)===g.PROBE_VOLTAGE&&b.streamToMeasurementsLive&&d.showStreamToMeasurementsLive(b,!1)})})},updateStreamState:function(){this._multisimDeviceController.state===e.Serving?this._simulationController.simulationState===h.Running&&this._simulationController.activeAnalysis===i.Interactive?this.setStreaming():this.setIdle():this.setDisabled()},setIdle:function(){this.stringInfo=this.stringIdle,this.$.disableButton.disabled=!1,this.show=!0},setStreaming:function(){this.stringInfo=this.stringStreaming,this.$.disableButton.disabled=!1,this.show=!0},setDisabled:function(){this.$.disableButton.disabled=!0,this.show=!1}})}()}}}),a.register("19f",[],function(){return{setters:[],execute:function(){}}}),a.register("1",["2","3","4","5","6","a7","126","c2","fe","7","8","9","d0","c8","a","b","cb","c","d","fd","c9","ca","e","f3","c1","f","a1","21","ff","13","3e","14","18","1a","46","4b","e3","188","7f","60","32","44","45","63","64","92","65","66","67","68","69","6a","6e","17","17e","70","72","76","77","48","30","3d","88","61","28","10","8b","29","43","8c","8d","8e","f6","93","4c","94","95","49","90","3f","97","a0","34","22","a2","a3","be","c7","a5","a9","ab","ad","af","b1","b3","bb","c0","ce","d5","d8","e4","f2","fb","159","173","15e","18b","174","18e","190","19e","19f"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia;return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.initializeCommands,i=a.ECommandContexts},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default},function(a){r=a.default},function(a){s=a.default},function(a){t=a.default},function(a){u=a.default},function(a){v=a.default},function(a){w=a.default},function(a){x=a.default},function(a){y=a.default},function(a){z=a.default},function(a){A=a.default},function(a){B=a.default},function(a){C=a.default},function(a){D=a.default},function(a){E=a.default},function(a){F=a.toString},function(a){G=a.default},function(a){H=a.default},function(a){I=a.default},function(a){J=a.default},function(a){K=a.default},function(a){L=a.default},function(a){M=a.default},function(a){N=a.default},function(a){O=a.default},function(a){P=a.default},function(a){Q=a.default},function(a){R=a.default},function(a){S=a.default},function(a){T=a.default},function(a){U=a.default},function(a){V=a.default},function(a){W=a.default},function(a){X=a.default},function(a){Y=a.default},function(a){Z=a.default},function(a){$=a.default,_=a.ENotifyType},function(a){aa=a.default},function(a){ba=a.default},function(a){ca=a.default},function(a){da=a.default},function(a){ea=a.ComponentController},function(a){fa=a.getURLParameter},function(a){ga=a.default},function(a){ha=a.MultisimDeviceControllerEvents},function(a){ia=a.default},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){}],execute:function(){!function(){function a(a){window.addEventListener("beforeunload",function(b){window.multisim.versionInfo.isProduction&&a.activeDesign&&a.activeDesign.modified&&(b.returnValue=T.i18n.translate("This page is asking you to confirm that you want to leave - data you have entered may not be saved.").fetch())})}window.HTMLImports.whenReady(function(){window.Polymer.Gestures.add(document,"tap",null)}),window.Polymer({is:"web-multisim",properties:{activeView:{reflectToAttribute:!1,type:Object,observer:"activeViewChanged"},activeDesign:{reflectToAttribute:!1,type:Object,observer:"activeDesignChanged"},toolManager:{reflectToAttribute:!1,type:Object},listeners:{reflectToAttribute:!1,type:Object,readOnly:!0},events:{reflectToAttribute:!1,type:Object,readOnly:!0},preview:{type:Boolean,value:!1},waitscreen:{reflectToAttribute:!1,type:Object,value:null},stringConfirmresetofsimulatoroptions:String,stringConfirmDataPlotterDelete:String,circuiturl:String,circuitname:String},activeViewChanged:function(a,b){a!==b&&(a&&a.viewObject.activate(),this.listeners.notifyListeners(this.events.ACTIVEVIEWCHANGED,{newView:a,oldView:b}))},activeDesignChanged:function(a,b){a!==b&&(this.listeners.notifyListeners(this.events.ACTIVEDESIGNCHANGED,{activeDesign:a,oldDesign:b}),a&&(a.probeController.resourceController=this.resourceController))},attached:function(){function b(a,b){for(var c=document.elementFromPoint(a,b);c&&c.shadowDOMRoot;)c=c.shadowDOMRoot.elementFromPoint(a,b);return c}function ja(){na.waitscreen.handleWaitStop(Na),Ra.enabled=!1,Qa.stopCommand(!1,null),Qa.enabled=!0,Oa.classList.remove("hide"),Pa.classList.remove("show"),na.classList.remove("simulating"),na.$.palette.disabled=na.commandInterface.activeAppMode===i.CC_EMBEDDED}function ka(a){var b=void 0,c=void 0;"info"===a.errorType?b=_.NT_INFO:"warning"===a.errorType?b=_.NT_WARNING:"fatal"===a.errorType&&(ja(),b=_.NT_ERROR),-1!==a.message.indexOf("Timestep too small")?c="simerror-timestep":-1!==a.message.indexOf("Singular matrix")?c="simerror-matrix":-1!==a.message.indexOf("Unable to converge")?c="simerror-convergence":"fatal"===a.errorType&&(c="simerror-general"),c&&P.notifyTracker(c,{circuit_url:window.location.href,error_message:a.message}),na.messageHandler.doMessage({type:b,message:a.message,toast:!1,group:{name:na.simulationController.activeAnalysis+" "+(Ma||"").toString(),info:{displayName:na.simulationController.getAnalysisText(na.simulationController.activeAnalysis,!1),timestamp:new Date(Ma?Ma.getTime():null)}}})}function la(){ja();var a=_.NT_ERROR,b=T.i18n.translate("An unknown simulation error occurred.").fetch();na.messageHandler.doMessage({type:a,message:b,toast:!1,group:{name:na.simulationController.activeAnalysis+" "+(Ma||"").toString(),info:{displayName:na.simulationController.getAnalysisText(na.simulationController.activeAnalysis,!1),timestamp:new Date(Ma?Ma.getTime():null)}}})}function ma(){na.simulationController.simulationState===t.Stopped&&(na.dataManager.stale=!0)}var na=this,oa=window.multisim,pa=na.$.nims_sheettabs,qa=na.$.nims_sheetpages;na.activeViewGetter=function(){return na.activeView};var ra=null;na.$.appwindow.setAttribute("guid",Q());var sa=document.querySelector("head"),ta=null;sa||(sa=document.createElement("head"),document.insertBefore(sa,document.firstChild));var ua=sa.querySelector("title");ua||(ua=document.createElement("title"),sa.firstChild?sa.insertBefore(ua,sa.firstChild):sa.appendChild(ua)),na.$.maindrawer.drawerWidth="270px",oa.rootFolder=oa.rootFolder||this.resolveUrl("../../"),na.componentLocalStoreController=A(),na.$.embeddedlogo.src=window.multisim.rootFolder+"resources/images/MultiSim_Live_Blue_Match_3.svg";var va={queued:[],final:function(){na.waitscreen.handleWaitStop(na.waitscreen.appStartInfo)},startdo:function(a){this.queued.push(a)},done:function(a){var b=this.queued.indexOf(a);-1!==b&&this.queued.splice(b,1),!this.queued.length&&this.final&&(this.final(),this.final=null)}};a(na),window.multisim.versionInfo.isInternal&&function(){window.multisim.translateTest=T;var a=function a(){var b=na.commandInterface.createCommandObject("language",function(){switch(b.enabled=!1,T.locale){case"en":T.locale="bla";break;case"bla":T.locale="en"}});b.visible=!0,b.enabled=!0,T.removeListener(a)};T.addReadyListener(a)}();try{new window.CustomEvent("test")}catch(a){var wa=function(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c};wa.prototype=window.Event.prototype,window.CustomEvent=wa}this.applicationState={lastLocation:{x:0,y:0},lastEvent:null};var xa=window.multisim.browserDetect.isEmbedded;na.resourceController=z(va,na.componentLocalStoreController,xa);var ya=$(na);na.messageHandler=p(ya),ra=d(na.resourceController,na.messageHandler,xa),P.initialize();var za=Y(this.$.appwindow);na.activeDesignGetter=function(){return na.activeDesign};var Aa=j(na.activeDesignGetter,ra,na.activeViewGetter);na.currentController=Aa,L.initialize(na),m.initialize(ya),q.initialize(na.activeViewGetter,Aa),na._setListeners(R()),na._setEvents(Object.freeze({ACTIVEVIEWCHANGED:"activeViewChanged",ACTIVEDESIGNCHANGED:"activeDesignChanged"})),T.locale=fa("language")||"en",T.moduleInit(window.multisim.rootFolder),T.addMissingKeyListener(function(a){return ya.assert(!1,"Missing translation for key:"+a)}),U.initialize(na,na.resourceController),na.dataManager=l.create(R()),this.$.errordialog.init(za),na.simulationListeners=R(),na.simulationController=r(na.dataManager,na.simulationListeners,na.activeDesignGetter,Aa,ra,na.$.errordialog,na.$.measurementsLiveStorage),na.simulationController.listeners.addListener(s.StreamErrored,function(a){var b=na.activeViewGetter().sheetTemplateController.probeController;na.activeDesignGetter().probeController.getProbes().filter(function(b){return b.url===a.url||!a.url}).forEach(function(c){a.connected||b.disconnectStreamingProbe(c,T.i18n.translate("Connection failed.").fetch())})}),na.listeners.addListener(na.events.ACTIVEDESIGNCHANGED,function(){return na.simulationController.multisimDeviceController.disconnect()}),na.$.streamStatus.initialize(na.simulationController,na.activeDesignGetter,na.activeViewGetter);var Ba="streamingErrorMessage";na.simulationController.multisimDeviceController.listeners.addListener(ha.signalingServerConnectionFailed,function(){var a=na.activeDesignGetter().probeController;a.getProbes().filter(function(b){return a.getProbeType(b)===ia.PROBE_VOLTAGE&&b.streamToMeasurementsLive}).forEach(function(a){na.activeViewGetter().sheetTemplateController.probeController.showStreamToMeasurementsLive(a,!1)}),na.messageHandler.doMessage({type:_.NT_WARNING,subtype:Ba,message:T.i18n.translate("Failed to connect to the network. Check your network connection and try again, or contact your lab administrator.").fetch(),toast:!1,group:{name:"Streaming data",info:{displayName:T.i18n.translate("Streaming data").fetch(),timestamp:new Date}}})}),na.simulationController.multisimDeviceController.listeners.addListener(ha.openDeviceConnection,function(){na.messageHandler.clearMessages(Ba)});var Ca=function(){na.activeDesign&&(na.activeDesign.modified=!0)};na.simulationController.listeners.addListener(s.ActiveAnalysisChanged,Ca),na.simulationController.listeners.addListener(s.SimulationSettingsChanged,Ca),na.animationController=B(na.simulationController),na.audioController=g();var Da=this.querySelector(".right-drawer.transition.paper-drawer-panel > #main.paper-drawer-panel"),Ea=function a(){Da.removeEventListener("",a),na.preview||T.addReadyListener(function(){na.simulationController.initialize()})},Fa={transition:"transitionend",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},Ga=null;for(var Ha in Fa)if(Ha in Da.style){Ga=Fa[Ha];break}Ga&&Da.addEventListener(Ga,Ea),T.addReadyListener(function(a){na.querySelector("#analysisSettings").init(na,ra),na.stringConfirmresetofsimulatoroptions=a.i18n.translate("Confirm reset of simulator options").fetch(),na.stringConfirmDataPlotterDelete=a.i18n.translate("This action cannot be completely undone. You will lose information from data plotters.").fetch()}),na.undo=w(ya,na),na.commandInterface=c(na.undo),na.commandInterface.activeAppMode=xa?i.CC_EMBEDDED:null,na.$.palette.disabled=na.commandInterface.activeAppMode===i.CC_EMBEDDED,na.undo.initCommands(na.commandInterface,za,na.activeViewGetter,xa),na.selectionInterface=aa();var Ia=ba(this.$.nims_viewarea,na.commandInterface,na.dataManager,za),Ja=function(a,c){var d=b(a,c);return d?[d]:[]};na.toolManager=v(na.activeViewGetter,Ja,this.applicationState),na.fullscreenInterface=W(),na.fullscreenInterface.moduleInit(na.commandInterface),na.fullscreenInterface.setFullscreenElement(na.$.appwindow),za.addKeyHandler("F11",!1,!1,!1,!1,function(a){var b=na.commandInterface.getCommandObject("fullscreen");b.enabled&&b.startCommand(),a.preventDefault()}),na.inputEventsInterface=X(na.toolManager),na.cancelInterface=V(na.commandInterface,za),na.manipulationInterface=Z(na.commandInterface,na.toolManager,na.cancelInterface),ca.moduleInit(na.commandInterface),na.graphController=o(na.simulationController,na.messageHandler),this.$.netmergedialog.init(za),x.moduleInit(na.activeViewGetter,na.commandInterface,na.toolManager,this.$.netmergedialog,na.messageHandler),na.wiringController=x.create(na.activeViewGetter,ya),na.toolManager.registerTool(O(na.selectionInterface,na.commandInterface,na.wiringController,na.manipulationInterface,na.cancelInterface,na.toolManager,na.messageHandler)),h(na,za,na.activeViewGetter,this.$.nims_viewarea,ra);var Ka=na.$.simulationOutput;Ka.init(na.commandInterface,na.simulationController,this);var La={container:na.$.simulationOutputOverlay,outputComponent:Ka},Ma=null,Na={message:""},Oa=document.getElementById("active-analysis-select"),Pa=document.getElementById("analysisFeedback"),Qa=na.commandInterface.createCommandObject("runsimulation",function(){var a=null,b=na.activeViewGetter();if(na.activeDesignGetter().probeController.hasActiveProbes(b.sheetTemplateController.sheetTemplate)||na.simulationController.activeAnalysis===e.Interactive){var c=na.activeDesignGetter().probeController.validateProbes(b.sheetTemplateController.sheetTemplate);if(c.valid)na.activeDesignGetter().probeController.updateAllProbeDigitalDisplayOffsets(b.sheetTemplateController.sheetTemplate),na.simulationController.validateAnalysisSettings(na.simulationController.activeAnalysis)?(na.simulationController.simulationState===t.Paused?(na.audioController.resume(),na.simulationController.resumeSimulation()):(Qa.enabled=!1,Na.message=T.i18n.translate("Simulator loading ...").fetch(),na.waitscreen.handleWaitStart(Na),na.audioController.resume(),na.audioController.allSignalsOff(),va.startdo("initialize"),setTimeout(function(){La.container&&La.container.show();var a=void 0;if(na.simulationController.activeAnalysis===e.PARAM_SWEEP){var c=na.simulationController.getSimulationSettings(e.PARAM_SWEEP);a={componentName:c.componentName,parameterName:c.parameterName},na.simulationController.compParamToSweep=a}else na.simulationController.compParamToSweep=null;na.messageHandler.clearGroups(),Ma=new Date;var d=[],f={isEmptyNetlist:!1},g=!1,h=F(na.activeDesign,ra,null,null,d,!1,a,f,b.sheetTemplateController.sheetTemplate);f.isEmptyNetlist&&na.activeDesignGetter().probeController.hasActiveDataProbes(b.sheetTemplateController.sheetTemplate)&&(h+=k,g=!0);var i=na.simulationController.generateSimulationCommands(na.simulationController.activeAnalysis);d.forEach(function(a){var b=ea.getFormattedRefDesForComponent(a);na.messageHandler.doMessage({type:_.NT_WARNING,message:T.i18n.translate("%s is not connected. It will not be included in the simulation.").fetch(b),toast:!1,group:{name:na.simulationController.activeAnalysis+" "+Ma.toString(),info:{displayName:na.simulationController.getAnalysisText(na.simulationController.activeAnalysis,!1),timestamp:new Date(Ma.getTime())}}})}),Ka.outputInterface.datamanager=na.dataManager,Ka.outputInterface.initialize(na.simulationController.activeAnalysis,na.activeDesignGetter,na.activeViewGetter,na.graphController),na.simulationController.startSimulation(h,i,na.simulationController.activeAnalysis),Ya.outputComponent&&na.simulationController.activeAnalysis!==e.PARAM_SWEEP&&!g&&(Ya.outputComponent.netlistText=h)},1)),a=function(){var a={};return na.simulationController.simulationState===t.Running&&(na.audioController.suspend(),na.simulationController.pauseSimulation(),a={removeContext:!1}),a}):(ya.notify(T.i18n.translate("Fix invalid simulation settings.").fetch(),_.NT_ERROR),ta.enabled?ta.startCommand(T.i18n.translate("Simulate").fetch(),{selected:1}):pb.selected=1);else{var d=T.i18n.translate('Unable to start simulation due to errors in expression plotter "%1s": %2s').fetch(c.probeInstance.probeID,c.errorMessage);ya.notify(d,_.NT_ERROR),b.selectioninterface.clearSelectionSilent(b),b.selectUsingGUID(c.templateProbe.templateGUID,!0),ta.enabled&&ta.startCommand()}}else ya.notify(T.i18n.translate("Add a probe and simulate again.").fetch());return a},!0);Qa.contextHelper.contextHidden="all",Qa.contextHelper.contextVisible=["",i.CC_SIMULATION,i.CC_DUPLICATEOBJECT,i.CC_MOVESELECTION,i.CC_ADDOBJECT,i.CC_EMBEDDED],Qa.contextHelper.contextEnable="all",Qa.contextHelper.contextDisable=[i.CC_DUPLICATEOBJECT,i.CC_MOVESELECTION,i.CC_ADDOBJECT],Qa.contextName="simulation",Qa.cancelActiveCommand=!0,za.addKeyHandler("r",!0,!1,!1,!1,function(a){Qa.enabled&&(Qa.active?Qa.stopCommand(!0):Qa.startCommand(T.i18n.translate("Run simulation (Ctrl+R)").fetch())),a.preventDefault()},"runsimulation");var Ra=na.commandInterface.createCommandObject("stopsimulation",function(){return na.audioController.suspend(),na.simulationController.stopSimulation(),Qa.stopCommand(!1,null),null},!0);Ra.contextHelper.contextHidden="all",Ra.contextHelper.contextVisible=["",i.CC_SIMULATION,i.CC_DUPLICATEOBJECT,i.CC_MOVESELECTION,i.CC_ADDOBJECT,i.CC_EMBEDDED],za.addKeyHandler(".",!0,!1,!1,!1,function(a){Ra.enabled&&Ra.startCommand(T.i18n.translate("Stop simulation (Ctrl+.)").fetch()),a.preventDefault()},"stopsimulation"),na.simulationListeners.addListener(s.StartSimulation,function(){Oa.classList.add("hide"),Pa.classList.add("show"),Pa.classList.remove("pause"),Pa.title=T.i18n.translate("Time elapsed").fetch(),na.$.palette.disabled=!0,na.classList.add("simulating"),Pa.innerHTML=T.i18n.translate("Simulating").fetch()}),na.simulationListeners.addListener(s.SimulationRunning,function(){var a=void 0;switch(na.activeDesignGetter().probeController.hasActiveProbes(na.activeViewGetter().sheetTemplateController.sheetTemplate)||ya.notify(T.i18n.translate("Probes needed to show data in grapher.").fetch()),na.waitscreen.handleWaitStop(Na),na.simulationController.activeAnalysis!==e.Transient&&na.simulationController.activeAnalysis!==e.Interactive||(Qa.enabled=!0),Ra.enabled=!0,na.simulationController.activeAnalysis){case e.Interactive:a="simulate-interactive";break;case e.Transient:a="simulate-transient";break;case e.AC:a="simulate-acsweep";break;case e.DC:a="simulate-dcop";break;case e.DC_SWEEP:a="simulate-dcsweep";break;case e.PARAM_SWEEP:a="simulate-paramsweep"}P.notifyTracker(a,{circuit_url:window.location.href})}),na.simulationListeners.addListener(s.PauseSimulation,function(){na.audioController.suspend(),Pa.classList.add("pause"),Pa.title=T.i18n.translate("Simulation paused").fetch()}),na.simulationListeners.addListener(s.ResumeSimulation,function(){Pa.classList.remove("pause"),Pa.title=T.i18n.translate("Time elapsed").fetch()}),na.simulationListeners.addListener(s.StopSimulation,function(){na.audioController.suspend(),na.waitscreen.handleWaitStop(Na),Qa.stopCommand(!1,null),Qa.enabled=!0,Ra.enabled=!1,Oa.classList.remove("hide"),Pa.classList.remove("show"),na.classList.remove("simulating"),na.$.palette.disabled=na.commandInterface.activeAppMode===i.CC_EMBEDDED}),na.simulationListeners.addListener(s.SimulationErrored,ka),na.simulationListeners.addListener(s.SimWorkerCrashed,la);var Sa=function(a){switch(na.toggleClass("interact_analysis",!1),na.toggleClass("dcop_analysis",!1),na.toggleClass("transient_analysis",!1),na.toggleClass("ac_analysis",!1),a.activeAnalysis){case e.Interactive:na.toggleClass("interact_analysis",!0);break;case e.DC:na.toggleClass("dcop_analysis",!0);break;case e.Transient:na.toggleClass("transient_analysis",!0);break;case e.AC:na.toggleClass("ac_analysis",!0)}},Ta=function(a){na.toggleClass("periodic",a.periodicEnabled)},Ua=function(){ua.textContent=(na.activeDesign.modified?"*":"")+na.activeDesign.name||na.activeDesign.defaultName,na.circuitname=na.activeDesign.name||na.activeDesign.defaultName},Va=window.parent&&window.multisim.browserDetect.isIFrame&&fa("iframeid"),Wa=function(a){var b={messagetype:"filemodified",iframeid:Va,filemodified:a};window.parent.postMessage(JSON.stringify(b),"*")};na.listeners.addListener(na.events.ACTIVEDESIGNCHANGED,function(a){a.oldDesign&&(a.oldDesign.listeners.removeListener(M.GLOBAL_PROBE_SETTINGS_CHANGED,Ta),a.oldDesign.listeners.removeListener(M.NAME_CHANGED,Ua),a.oldDesign.listeners.removeListener(M.DESIGN_MODIFIED,Ua),Va&&a.oldDesign.listeners.removeListener(M.DESIGN_MODIFIED,Wa)),a.activeDesign&&(a.activeDesign.listeners.addListener(M.GLOBAL_PROBE_SETTINGS_CHANGED,Ta),a.activeDesign.listeners.addListener(M.NAME_CHANGED,Ua),a.activeDesign.listeners.addListener(M.DESIGN_MODIFIED,Ua),Va&&a.activeDesign.listeners.addListener(M.DESIGN_MODIFIED,Wa),ua.textContent=na.activeDesign.name||na.activeDesign.defaultName,na.circuitname=na.activeDesign.name||na.activeDesign.defaultName)}),na.simulationListeners.addListener(s.ActiveAnalysisChanged,Sa),Sa(na.simulationController),na.dataManager.dataUpdateListeners.addListener(na.dataManager.EDataUpdateEvents.Stale,function(){na.toggleClass("nims_simdata_stale",!0)}),na.dataManager.dataUpdateListeners.addListener(na.dataManager.EDataUpdateEvents.Refreshed,function(){na.toggleClass("nims_simdata_stale",!1)}),na.simulationListeners.addListener(s.SimulatorLoadingBegin,function(){Na.message=T.i18n.translate("Simulator loading ...").fetch(),na.waitscreen.updateWaitTexts(Na)}),na.simulationListeners.addListener(s.SimulatorLoadStateChange,function(a){Na.message=T.i18n.translate("Simulator loading ...").fetch(),Na.submessage=a.message,na.waitscreen.updateWaitTexts(Na)}),na.simulationListeners.addListener(s.SimWorkerCrashed,function(){na.waitscreen.handleWaitStop(Na),Ra.enabled=!1,Qa.stopCommand(!1,null),Qa.enabled=!0}),Qa.enabled=!0,Ra.enabled=!1;var Xa=R();na.propertyController=C(Xa,na.undo,na.activeDesignGetter,ra),na.propertyController.propertyChangeListeners.addListener(u.INSTANCE_PROPERTY_CHANGED,ma),na.propertyController.propertyChangeListeners.addListener(u.MODEL_PROPERTY_CHANGED,ma),na.listeners.addListener(na.events.ACTIVEDESIGNCHANGED,function(a){a.oldDesign&&(a.oldDesign.netlistController.listener.removeListener(N.NE_NETSCHANGED,ma),a.oldDesign.netlistController.listener.removeListener(N.NE_PROPSCHANGED,ma)),a.activeDesign&&(a.activeDesign.netlistController.listener.addListener(N.NE_NETSCHANGED,ma),a.activeDesign.netlistController.listener.addListener(N.NE_PROPSCHANGED,ma))});var Ya={outputComponent:na.querySelector("#spiceNetlist")};Ya.outputComponent.initialize(na,ra);var Za=m.create(na,qa,pa,na.manipulationInterface,na.inputEventsInterface,na.selectionInterface,na.wiringController,ra,na.propertyController),$a=na.$.schematicControls,_a=H(Za,ra,na.simulationController,Ia,na.messageHandler,{dataPlotterDeleteDialog:na.$.dataPlotterDeleteDialog,schematicControls:$a}),ab=G(Za,ra,na.simulationController,Ia),bb=I(na.dataManager,na.activeDesignGetter,na.activeViewGetter,na.graphController,Ka),cb=J(na.dataManager,na.activeDesignGetter,na.activeViewGetter,na.graphController,Ka),db=K(na.dataManager,na.activeDesignGetter,na.activeViewGetter,na.graphController,Ka),eb=E(na.simulationController),fb=na.$.designnamedialog,gb=na.$.logintosavedialog,hb=na.$.streamToMeasurementsDialog;na.upgradedialog=na.$.upgradedialog;var ib=S(na.commandInterface);na.fileDataController=n(na.activeDesignGetter,na.messageHandler),na.fileDataController.addImporter(_a),na.fileDataController.addImporter(bb);var jb=!0;na.fileDataController.addImporter(cb,jb),na.fileDataController.addImporter(db,jb),na.upgradedialog.init(za,na.fileDataController),na.fileDataController.listeners.addListener("load-project-completed",D(na)),na.$.feedbackdialog.initialize(na,za);var kb=na.$.mainToolbar,lb=na.$.dynamicToolbar;(kb||lb)&&(na.filePanelController=ga(na,na.activeDesignGetter,fb,gb,za,ra,ab,eb,Za,hb),na.filePanelController.attachToolbar(kb.filePanel),na.filePanelController.attachToolbar(kb),na.filePanelController.attachToolbar(lb),kb&&(kb.initialize(ib,na.fullscreenInterface,na,na.filePanelController,na.fileDataController),kb.filePanel.initialize(na,na.activeDesignGetter,ab,za,na.filePanelController)),lb&&(lb.initialize(ib,na.cancelInterface,na.simulationController,na.commandInterface,na,na.filePanelController,na.fileDataController),Ia.addResizeListener(function(){lb.handleResize()}))),$a.initialize(ib);for(var mb=this.querySelectorAll("paper-drawer-panel"),nb=0;nb<mb.length;nb++)mb[nb].drawerFocusSelector=null;var ob=na.$.leftrail,pb=na.$.rightrail;y(ib,na.commandInterface,this.selectionInterface,na.simulationController,na.$.maindrawer,na.$.documentdrawer,pb,ob,Ia),ta=na.commandInterface.getCommandObject("showrightpanel"),ta.contextHelper.contextHidden=[i.CC_EMBEDDED],ta.contextHelper.contextDisable=[i.CC_EMBEDDED],na.fileDataController.listeners.addListener(na.fileDataController.fileDataEvents.FDE_STARTLOAD,function(a){na.waitscreen.handleWaitStart(a)}),na.fileDataController.listeners.addListener(na.fileDataController.fileDataEvents.FDE_UPDATELOAD,function(a){na.waitscreen.updateWaitTexts(a)}),na.fileDataController.listeners.addListener(na.fileDataController.fileDataEvents.FDE_ENDLOAD,function(a){na.waitscreen.handleWaitStop(a)}),na.fileDataController.listeners.addListener(na.fileDataController.fileDataEvents.FDE_STARTSAVE,function(a){na.waitscreen.handleWaitStart(a)}),na.fileDataController.listeners.addListener(na.fileDataController.fileDataEvents.FDE_UPDATESAVE,function(a){na.waitscreen.updateWaitTexts(a)}),na.fileDataController.listeners.addListener(na.fileDataController.fileDataEvents.FDE_ENDSAVE,function(a){na.waitscreen.handleWaitStop(a)}),ob.initialize(na.commandInterface),ob.errorPanel.initialize(na.messageHandler,ob,ya),ob.netListPanel.initialize(),pb.init(na.activeViewGetter);var qb=function a(){function b(){if(na.activeViewGetter()){na.listeners.removeListener(na.events.ACTIVEVIEWCHANGED,b),na.$.confirmdialog.init(za),na.$.splitConnectorDialog.init(za),pb.documentProperties.initialize(na.activeViewGetter,na,na.commandInterface,na.undo,na.simulationController,na.$.confirmdialog),pb.objectProperties.initialize(na.activeViewGetter,na,na.$.splitConnectorDialog,Ia,Ka,ra,ya,na.resourceController),ob.metaDataPanel.init(na),fb.initialize(na,za),gb.initialize(za,na.fileDataController),ob.activate(ob.metaDataPanel,!1),na.$.streamToMeasurementsDialog.initialize(za),na.$.dataPlotterDeleteDialog.init(za);var a=T.i18n.translate("Continue").fetch();na.$.dataPlotterDeleteDialog.stringOK=a,na.activeViewGetter().sheetTemplateController.initConfirmDialog(na.$.dataPlotterDeleteDialog),ub()}}T.removeListener(a),na.listeners.addListener(na.events.ACTIVEVIEWCHANGED,b),b()},rb="50%";na.$.splitresizer.handleResizeStart=function(){var a=Ia.areaOrientation===Ia.EAreaOrientation.AO_HORIZONTAL,b=a?na.$.nims_viewarea.offsetWidth:na.$.nims_viewarea.offsetHeight,c=parseInt(a?na.$.nims_simoutputcontainer.offsetWidth:na.$.nims_simoutputcontainer.offsetHeight,10);na.$.splitresizer.handleResize=function(d){var e=a?d.widthDelta:d.heightDelta;e&&(rb=Math.min(90,Math.max(10,(c+e)/b*100))+"%",a?na.$.nims_simoutputcontainer.style.width=na.$.nims_simoutputcontainer.style.minWidth=na.$.nims_simoutputcontainer.style.maxWidth=rb:na.$.nims_simoutputcontainer.style.height=na.$.nims_simoutputcontainer.style.minHeight=na.$.nims_simoutputcontainer.style.maxHeight=rb)},na.$.splitresizer.handleResizeEnd=function(){ob.resizeContainer.handleResize=null,ob.resizeContainer.handleResizeEnd=null}};var sb=function(){Ia.areaState===Ia.EAreaStates.AS_SPLIT?Ia.areaOrientation===Ia.EAreaOrientation.AO_HORIZONTAL?(window.setTimeout(function(){na.$.nims_simoutputcontainer.style.width=na.$.nims_simoutputcontainer.style.minWidth=na.$.nims_simoutputcontainer.style.maxWidth=rb,na.$.nims_simoutputcontainer.style.height=na.$.nims_simoutputcontainer.style.minHeight=na.$.nims_simoutputcontainer.style.maxHeight="100%",na.$.palette.style.display="block"},0),na.$.splitresizer.allowleft=!0,na.$.splitresizer.allowbottom=!1):(window.setTimeout(function(){na.$.nims_simoutputcontainer.style.width=na.$.nims_simoutputcontainer.style.minWidth=na.$.nims_simoutputcontainer.style.maxWidth=null,na.$.nims_simoutputcontainer.style.height=na.$.nims_simoutputcontainer.style.minHeight=na.$.nims_simoutputcontainer.style.maxHeight=rb,na.$.palette.style.display="block"},0),na.$.splitresizer.allowleft=!1,na.$.splitresizer.allowbottom=!0):(window.setTimeout(function(){na.$.nims_simoutputcontainer.style.width=na.$.nims_simoutputcontainer.style.minWidth=na.$.nims_simoutputcontainer.style.maxWidth=null;var a=Ia.areaState==Ia.EAreaStates.AS_GRAPH;na.$.nims_simoutputcontainer.style.height=na.$.nims_simoutputcontainer.style.minHeight=na.$.nims_simoutputcontainer.style.maxHeight=a?"100%":null,na.$.palette.style.display=a?"none":"block"},0),na.$.splitresizer.allowleft=!1,na.$.splitresizer.allowbottom=!1)};Ia.addStateListener(sb),ob.resizeContainer.handleResizeStart=function(){var a=na.$.documentdrawer.offsetWidth-60,b=parseInt(na.$.documentdrawer.drawerWidth,10);na.$.documentdrawer._transition=!1,ob.resizeContainer.handleResize=function(c){c.widthDelta&&(na.$.documentdrawer.drawerWidth=Math.min(a,Math.max(256,b+c.widthDelta))+"px")},ob.resizeContainer.handleResizeEnd=function(){ob.resizeContainer.handleResize=null,ob.resizeContainer.handleResizeEnd=null,na.$.documentdrawer._transition=!0}};var tb=null;Ia.addResizeListener(function(){tb||(tb=setInterval(function(){var a=256,b=na.$.documentdrawer.offsetWidth-60,c=parseInt(na.$.documentdrawer.drawerWidth,10);na.$.documentdrawer.drawerWidth=Math.min(b,Math.max(a,c))+"px",sb(),c<=b&&c>=a&&(clearInterval(tb),tb=null)},100))}),T.addReadyListener(qb);var ub=function(){va.startdo("loadcomponents"),na.$.palette.initialize(na.resourceController,na.applicationState,na.commandInterface,na.manipulationInterface,na.selectionInterface,na.cancelInterface,na.activeViewGetter,za,Ia,na.fileDataController,va,ra);var a=function(){var a=na.$.palette.parentNode.getBoundingClientRect();na.$.palette.updateDisplayArea({left:a.left,top:a.top,right:a.right,bottom:a.bottom})},b=function(b){b.oldView&&b.oldView.viewObject.listeners.removeListener(b.oldView.viewObject.viewEvents.RESIZE,a),b.newView&&b.newView.viewObject.listeners.addListener(b.newView.viewObject.viewEvents.RESIZE,a)};b({oldView:null,newView:na.activeView}),a(),na.listeners.addListener(na.events.ACTIVEVIEWCHANGED,b)};da.initialize(na.resourceController);var vb=function a(){va.startdo("initialize"),na.listeners.removeListener(na.events.ACTIVEVIEWCHANGED,a),T.addReadyListener(function(){var a=function(){var a=document.location.search.substring(1).split("&").map(function(a){return decodeURI(a).split("=")});if(na.filePanelController&&a.length&&a[0].length)switch(a[0][0].toLowerCase()){case"download":if(a[0].length>1)switch(a[0][1].toLowerCase()){case"design":na.filePanelController.downloadCircuitFile();break;case"designimagepng":na.filePanelController.downloadCircuitPNG();break;case"designimagesvg":na.filePanelController.downloadCircuitSVG();break;case"simulationdatacsv":na.filePanelController.downloadSimulationDataCSV();break;case"simulationdatapng":na.filePanelController.downloadSimulationImagePNG();break;case"spicenetlist":na.filePanelController.downloadSPICENetlist();break;case"multisimdesign":na.filePanelController.downloadAsDesktopMultisimFile()}}},b=function(){na.fileDataController.getDefaultProjectName(na.activeDesign.defaultName,function(a){na.activeDesign.name=a,na.activeDesign.modified=!1}),va.done("initialize"),na.fileDataController.handleHomeLink(null),na.fileDataController.getSubscriptionInfo(function(){a()})};window.requestInfo?!window.requestInfo.isNew&&na.fileDataController.doLoadFromServer(window.requestInfo.project,function(b,c){c===na.fileDataController.responseCodes.RC_OK&&(na.activeDesign.hasSeenMetadata=!0,na.activeDesign.projectID=b.design.id,na.activeDesign.guid=b.design.guid,na.activeDesign.designMetaData.description=b.design.metaData.description,na.activeDesign.designMetaData.tags=b.design.metaData.tags.slice(),na.activeDesign.designMetaData.private=b.design.metaData.private,na.activeDesign.copiedFrom=b.design.copiedFrom,na.activeDesign.owner=window.requestInfo.owner,na.activeDesign.name=b.design.name,na.activeDesign.modified=!1,na.circuiturl=window.requestInfo.project_url,Ka.setOverlay(na.activeDesign),Ka.outputInterface.datamanager=na.dataManager,bb.loadDataIntoDataManager()),va.done("initialize"),na.fileDataController.getSubscriptionInfo(function(b){var c=na.activeDesign.componentCount,d="premium"===b.subscription||na.commandInterface.activeAppMode===i.CC_EMBEDDED,g=f[na.simulationController.activeAnalysis]&&!d;if(g){var h=na.simulationController.getAnalysisText(na.simulationController.activeAnalysis);na.simulationController.activeAnalysis=e.Interactive;var j="Open";na.messageHandler.doMessage({type:_.NT_WARNING,message:T.i18n.translate("Saved analysis type is not available with a free account. Type was changed to Interactive. Activate a premium account to run %s.").fetch(h),toast:!1,group:{name:j,info:{displayName:T.i18n.translate(j).fetch(),timestamp:new Date}}})}(c>b.componentLimit||g)&&(na.upgradedialog.stringFreeAccount=T.i18n.translate("This circuit is from a Premium user. You can edit and run basic simulations on this circuit.\n\nSave any changes to circuits with more than %s components and run advanced simulations with a premium account.").fetch(b.componentLimit),na.upgradedialog.stringNotLoggedIn=T.i18n.translate("This design contains %1$s components but your account only allows %2$s components. Login to place more components or save the design.").fetch(c,b.componentLimit),b.logged_in&&(na.upgradedialog.loggedInStatus=b.logged_in,na.upgradedialog.open(),P.notifyTracker("component-limit",{circuit_url:window.location.href}))),a(),na.fileDataController.listeners.notifyListeners("load-project-completed")})})||b():b()})};na.listeners.addListener(na.events.ACTIVEVIEWCHANGED,vb),Za.newDesign(na.simulationController,$a),this.$.appwindow.focus()},get responsiveWidth(){return parseFloat(this.$.maindrawer.responsiveWidth)}});var b=null;"function"==typeof window.Event?b=new Event("MultisimReady"):(b=document.createEvent("Event"),b.initEvent("MultisimReady",!0,!0)),window.dispatchEvent(b)}()}}}),System.register("third_party/iron-icons/communication-icons.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/iron-icons/hardware-icons.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/iron-icons/iron-icons.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-drawer-panel/paper-drawer-panel.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-header-panel/paper-header-panel.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-input/paper-input-container.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-input/paper-input.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-spinner/paper-spinner.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/web-multisim-styles/web-multisim-styles.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-icons/multisim-icons.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/dialog-designname/dialog-designname.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/dialog-feedback/dialog-feedback.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/dialog-error/dialog-error.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/dialog-logintosave/dialog-logintosave.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/dialog-netmerge/dialog-netmerge.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/dialog-split-connectors/dialog-split-connectors.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/dialog-upgrade/dialog-upgrade.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/dialog-prompt-stop-simulation/dialog-prompt-stop-simulation.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/dialog-stream-to-measurements-step1/dialog-stream-to-measurements-step1.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/dialog-stream-to-measurements/dialog-stream-to-measurements.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/base-view/base-view.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/schematic-view/schematic-view.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-toolbar/paper-toolbar.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/iron-dropdown/iron-dropdown.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/iron-dropdown/iron-dropdown-scroll-manager.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/panel-file-documents/panel-file-documents.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/toolbar/toolbar.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-menu/paper-menu.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-dialog/paper-dialog.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-dialog-scrollable/paper-dialog-scrollable.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-dialog/multisim-dialog.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/dialog-confirmation/dialog-confirmation.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/toolbar/dynamic-toolbar.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/simulation-output/simulation-output.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-menu-button/paper-menu-button.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/grapher-miniproperties/grapher-miniproperties.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/grapher-object/grapher-object.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/control-search/control-search.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/search-result/search-result.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multiline-ellipsis/multiline-ellipsis.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/search-result-details/search-result-details.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/object-palette/object-palette.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-slider/paper-slider.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-slider/multisim-slider.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-property-slider/multisim-property-slider.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/on-schematic-properties-panel/on-schematic-properties-panel.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/iron-input/iron-input.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-item/paper-item.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/iron-icons/av-icons.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/active-analysis-selector/active-analysis-selector.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/analysisSettingsPanels/ac-sweep/ac-sweep-settings.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/global-probe-settings/global-probe-settings.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/analysisSettingsPanels/interactive/interactive-settings.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/analysisSettingsPanels/dc-op/dc-op-settings.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/analysisSettingsPanels/transient/transient-settings.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/analysisSettingsPanels/dc-sweep/dcsweep-settings.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/analysisSettingsPanels/param-sweep/paramsweep-settings.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/analysis-settings/analysis-settings.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/global-simulation-settings/global-simulation-settings.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/document-digital-settings/document-digital-settings.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/sheet-settings/sheet-settings.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/document-properties-panel/document-properties-panel.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/grapher-properties/grapher-properties.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-htmlcontainer/multisim-htmlcontainer.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-xyinput/multisim-xyinput.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/object-properties/object-properties.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/net-properties/net-properties.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/control-gallery/control-gallery.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/right-rail-tab-switcher/right-rail-tab-switcher.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/logic-level/logic-level.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-switch/multisim-switch.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/control-colorpicker/control-colorpicker.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/control-colorbutton/control-colorbutton.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-color/multisim-color.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-dropdown/multisim-dropdown.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-list/multisim-list.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/control-list/control-list.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-dropdown-filtered-list/multisim-dropdown-filtered-list.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-group-box/multisim-group-box.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/iron-flex-layout/iron-flex-layout.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/iron-list/iron-list.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/probe-reference-list/probe-reference-list.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/ui-webcomponents/src/components/wait-spinner/wait-spinner.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/probe-properties/probe-properties.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/iron-collapse/iron-collapse.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/drawer-header/drawer-header.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/properties-text/properties-text.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/connector-properties/connector-properties.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/object-properties-panel/object-properties-panel.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/right-rail/right-rail.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/iron-pages/iron-pages.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-tabs/paper-tabs.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/panel-netlist/panel-netlist.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-grid/multisim-grid.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/panel-errors/panel-errors-group.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/panel-errors/panel-errors.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/behaviors/initialize-help.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/control-tags/control-tags.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/control-autocomplete/control-autocomplete.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-checkbox/paper-checkbox.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-toggle/multisim-toggle.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-input/multisim-input.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-multiline-input/multisim-multiline-input.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-small-help/multisim-small-help.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/metadata-properties/metadata-properties.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/panel-metadata/panel-metadata.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/left-rail/left-rail.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/spice-netlist-view/spice-netlist-view.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/probe-display/probe-display.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/resizeable-container/resizeable-container.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/iron-icon/iron-icon.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-icon-button/paper-icon-button.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/schematic-controls/schematic-controls.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/measurements-live-storage/measurements-live-storage.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/polymer/polymer.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("third_party/paper-button/paper-button.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/multisim-button/multisim-button.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/stream-status/stream-status.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){}),System.register("components/web-multisim/web-multisim.html!third_party/systemjs-plugin-html/html.js",[],!1,function(){})})(function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=a():a()});
//# sourceMappingURL=/api/v1/fetch-staff-resource/multisim.js.map